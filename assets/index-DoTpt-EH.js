var e,t=Object.defineProperty,r=(e,r,a)=>((e,r,a)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a)(e,"symbol"!=typeof r?r+"":r,a);import{c as a,a as n,u as s,j as i,B as l,P as o,V as c,b as d,d as u,e as m,f as h,R as p,g as x,h as g,i as f,k as y,A as v,D as b,C as j,S as k,l as w,m as N,n as _,o as S,p as C,q as T,r as O,s as P,I as A,t as E,v as D,w as M,x as z,y as R,z as I,E as F,F as B,G as L,L as q,H as $,J as K,T as U,O as H,K as Y,M as V,N as G,Q as W,U as Q,W as X,X as Z,Y as J,Z as ee,_ as te,$ as re,a0 as ae,a1 as ne,a2 as se,a3 as ie,a4 as le,a5 as oe,a6 as ce,a7 as de,a8 as ue,a9 as me,aa as he,ab as pe,ac as xe,ad as ge,ae as fe,af as ye,ag as ve,ah as be,ai as je,aj as ke,ak as we,al as Ne,am as _e,an as Se,ao as Ce,ap as Te,aq as Oe,ar as Pe,as as Ae,at as Ee,au as De}from"./ui-DIj0jjNq.js";import{a as Me,r as ze,R as Re,$ as Ie,b as Fe,c as Be,d as Le}from"./vendor-Hpyuf6TW.js";import{u as qe,a as $e,b as Ke,Q as Ue,c as He}from"./query-DGm8hLTJ.js";import{c as Ye}from"./supabase-8JbYa6KF.js";import{P as Ve}from"./maps-DAyowfzU.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ge=Me;e=Ge.createRoot,Ge.hydrateRoot;let We=0;const Qe=new Map,Xe=e=>{if(Qe.has(e))return;const t=setTimeout((()=>{Qe.delete(e),tt({type:"REMOVE_TOAST",toastId:e})}),1e6);Qe.set(e,t)},Ze=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Xe(r):e.toasts.forEach((e=>{Xe(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,open:!1}:e))}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))}}},Je=[];let et={toasts:[]};function tt(e){et=Ze(et,e),Je.forEach((e=>{e(et)}))}function rt({...e}){const t=(We=(We+1)%Number.MAX_SAFE_INTEGER,We.toString()),r=()=>tt({type:"DISMISS_TOAST",toastId:t});return tt({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>tt({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function at(){const[e,t]=ze.useState(et);return ze.useEffect((()=>(Je.push(t),()=>{const e=Je.indexOf(t);e>-1&&Je.splice(e,1)})),[e]),{...e,toast:rt,dismiss:e=>tt({type:"DISMISS_TOAST",toastId:e})}}var nt="ToastProvider",[st,it,lt]=a("Toast"),[ot,ct]=n("Toast",[lt]),[dt,ut]=ot(nt),mt=e=>{const{__scopeToast:t,label:r="Notification",duration:a=5e3,swipeDirection:n="right",swipeThreshold:s=50,children:l}=e,[o,c]=ze.useState(null),[d,u]=ze.useState(0),m=ze.useRef(!1),h=ze.useRef(!1);return r.trim(),i.jsx(st.Provider,{scope:t,children:i.jsx(dt,{scope:t,label:r,duration:a,swipeDirection:n,swipeThreshold:s,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:ze.useCallback((()=>u((e=>e+1))),[]),onToastRemove:ze.useCallback((()=>u((e=>e-1))),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:l})})};mt.displayName=nt;var ht="ToastViewport",pt=["F8"],xt="toast.viewportPause",gt="toast.viewportResume",ft=ze.forwardRef(((e,t)=>{const{__scopeToast:r,hotkey:a=pt,label:n="Notifications ({hotkey})",...c}=e,d=ut(ht,r),u=it(r),m=ze.useRef(null),h=ze.useRef(null),p=ze.useRef(null),x=ze.useRef(null),g=s(t,x,d.onViewportChange),f=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=d.toastCount>0;ze.useEffect((()=>{const e=e=>{var t;0!==a.length&&a.every((t=>e[t]||e.code===t))&&(null==(t=x.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[a]),ze.useEffect((()=>{const e=m.current,t=x.current;if(y&&e&&t){const r=()=>{if(!d.isClosePausedRef.current){const e=new CustomEvent(xt);t.dispatchEvent(e),d.isClosePausedRef.current=!0}},a=()=>{if(d.isClosePausedRef.current){const e=new CustomEvent(gt);t.dispatchEvent(e),d.isClosePausedRef.current=!1}},n=t=>{!e.contains(t.relatedTarget)&&a()},s=()=>{e.contains(document.activeElement)||a()};return e.addEventListener("focusin",r),e.addEventListener("focusout",n),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",s),window.addEventListener("blur",r),window.addEventListener("focus",a),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",n),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",r),window.removeEventListener("focus",a)}}}),[y,d.isClosePausedRef]);const v=ze.useCallback((({tabbingDirection:e})=>{const t=u().map((t=>{const r=t.ref.current,a=[r,...zt(r)];return"forwards"===e?a:a.reverse()}));return("forwards"===e?t.reverse():t).flat()}),[u]);return ze.useEffect((()=>{const e=x.current;if(e){const t=t=>{var r,a,n;const s=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!s){const s=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(r=h.current)||r.focus());const l=v({tabbingDirection:i?"backwards":"forwards"}),o=l.findIndex((e=>e===s));Rt(l.slice(o+1))?t.preventDefault():i?null==(a=h.current)||a.focus():null==(n=p.current)||n.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}}),[u,v]),i.jsxs(l,{ref:m,role:"region","aria-label":n.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&i.jsx(vt,{ref:h,onFocusFromOutsideViewport:()=>{Rt(v({tabbingDirection:"forwards"}))}}),i.jsx(st.Slot,{scope:r,children:i.jsx(o.ol,{tabIndex:-1,...c,ref:g})}),y&&i.jsx(vt,{ref:p,onFocusFromOutsideViewport:()=>{Rt(v({tabbingDirection:"backwards"}))}})]})}));ft.displayName=ht;var yt="ToastFocusProxy",vt=ze.forwardRef(((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:a,...n}=e,s=ut(yt,r);return i.jsx(c,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const r=e.relatedTarget;!(null==(t=s.viewport)?void 0:t.contains(r))&&a()}})}));vt.displayName=yt;var bt="Toast",jt=ze.forwardRef(((e,t)=>{const{forceMount:r,open:a,defaultOpen:n,onOpenChange:s,...l}=e,[o=!0,c]=d({prop:a,defaultProp:n,onChange:s});return i.jsx(u,{present:r||o,children:i.jsx(Nt,{open:o,...l,ref:t,onClose:()=>c(!1),onPause:m(e.onPause),onResume:m(e.onResume),onSwipeStart:h(e.onSwipeStart,(e=>{e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:h(e.onSwipeMove,(e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)})),onSwipeCancel:h(e.onSwipeCancel,(e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:h(e.onSwipeEnd,(e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),c(!1)}))})})}));jt.displayName=bt;var[kt,wt]=ot(bt,{onClose(){}}),Nt=ze.forwardRef(((e,t)=>{const{__scopeToast:r,type:a="foreground",duration:n,open:l,onClose:c,onEscapeKeyDown:d,onPause:u,onResume:x,onSwipeStart:g,onSwipeMove:f,onSwipeCancel:y,onSwipeEnd:v,...b}=e,j=ut(bt,r),[k,w]=ze.useState(null),N=s(t,(e=>w(e))),_=ze.useRef(null),S=ze.useRef(null),C=n||j.duration,T=ze.useRef(0),O=ze.useRef(C),P=ze.useRef(0),{onToastAdd:A,onToastRemove:E}=j,D=m((()=>{var e;(null==k?void 0:k.contains(document.activeElement))&&(null==(e=j.viewport)||e.focus()),c()})),M=ze.useCallback((e=>{e&&e!==1/0&&(window.clearTimeout(P.current),T.current=(new Date).getTime(),P.current=window.setTimeout(D,e))}),[D]);ze.useEffect((()=>{const e=j.viewport;if(e){const t=()=>{M(O.current),null==x||x()},r=()=>{const e=(new Date).getTime()-T.current;O.current=O.current-e,window.clearTimeout(P.current),null==u||u()};return e.addEventListener(xt,r),e.addEventListener(gt,t),()=>{e.removeEventListener(xt,r),e.removeEventListener(gt,t)}}}),[j.viewport,C,u,x,M]),ze.useEffect((()=>{l&&!j.isClosePausedRef.current&&M(C)}),[l,C,j.isClosePausedRef,M]),ze.useEffect((()=>(A(),()=>E())),[A,E]);const z=ze.useMemo((()=>k?Et(k):null),[k]);return j.viewport?i.jsxs(i.Fragment,{children:[z&&i.jsx(_t,{__scopeToast:r,role:"status","aria-live":"foreground"===a?"assertive":"polite","aria-atomic":!0,children:z}),i.jsx(kt,{scope:r,onClose:D,children:Me.createPortal(i.jsx(st.ItemSlot,{scope:r,children:i.jsx(p,{asChild:!0,onEscapeKeyDown:h(d,(()=>{j.isFocusedToastEscapeKeyDownRef.current||D(),j.isFocusedToastEscapeKeyDownRef.current=!1})),children:i.jsx(o.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":j.swipeDirection,...b,ref:N,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:h(e.onKeyDown,(e=>{"Escape"===e.key&&(null==d||d(e.nativeEvent),e.nativeEvent.defaultPrevented||(j.isFocusedToastEscapeKeyDownRef.current=!0,D()))})),onPointerDown:h(e.onPointerDown,(e=>{0===e.button&&(_.current={x:e.clientX,y:e.clientY})})),onPointerMove:h(e.onPointerMove,(e=>{if(!_.current)return;const t=e.clientX-_.current.x,r=e.clientY-_.current.y,a=Boolean(S.current),n=["left","right"].includes(j.swipeDirection),s=["left","up"].includes(j.swipeDirection)?Math.min:Math.max,i=n?s(0,t):0,l=n?0:s(0,r),o="touch"===e.pointerType?10:2,c={x:i,y:l},d={originalEvent:e,delta:c};a?(S.current=c,Dt("toast.swipeMove",f,d,{discrete:!1})):Mt(c,j.swipeDirection,o)?(S.current=c,Dt("toast.swipeStart",g,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>o||Math.abs(r)>o)&&(_.current=null)})),onPointerUp:h(e.onPointerUp,(e=>{const t=S.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),S.current=null,_.current=null,t){const r=e.currentTarget,a={originalEvent:e,delta:t};Mt(t,j.swipeDirection,j.swipeThreshold)?Dt("toast.swipeEnd",v,a,{discrete:!0}):Dt("toast.swipeCancel",y,a,{discrete:!0}),r.addEventListener("click",(e=>e.preventDefault()),{once:!0})}}))})})}),j.viewport)})]}):null})),_t=e=>{const{__scopeToast:t,children:r,...a}=e,n=ut(bt,t),[s,l]=ze.useState(!1),[o,d]=ze.useState(!1);return function(e=()=>{}){const t=m(e);g((()=>{let e=0,r=0;return e=window.requestAnimationFrame((()=>r=window.requestAnimationFrame(t))),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}}),[t])}((()=>l(!0))),ze.useEffect((()=>{const e=window.setTimeout((()=>d(!0)),1e3);return()=>window.clearTimeout(e)}),[]),o?null:i.jsx(x,{asChild:!0,children:i.jsx(c,{...a,children:s&&i.jsxs(i.Fragment,{children:[n.label," ",r]})})})},St=ze.forwardRef(((e,t)=>{const{__scopeToast:r,...a}=e;return i.jsx(o.div,{...a,ref:t})}));St.displayName="ToastTitle";var Ct=ze.forwardRef(((e,t)=>{const{__scopeToast:r,...a}=e;return i.jsx(o.div,{...a,ref:t})}));Ct.displayName="ToastDescription";var Tt=ze.forwardRef(((e,t)=>{const{altText:r,...a}=e;return r.trim()?i.jsx(At,{altText:r,asChild:!0,children:i.jsx(Pt,{...a,ref:t})}):null}));Tt.displayName="ToastAction";var Ot="ToastClose",Pt=ze.forwardRef(((e,t)=>{const{__scopeToast:r,...a}=e,n=wt(Ot,r);return i.jsx(At,{asChild:!0,children:i.jsx(o.button,{type:"button",...a,ref:t,onClick:h(e.onClick,n.onClose)})})}));Pt.displayName=Ot;var At=ze.forwardRef(((e,t)=>{const{__scopeToast:r,altText:a,...n}=e;return i.jsx(o.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...n,ref:t})}));function Et(e){const t=[];return Array.from(e.childNodes).forEach((e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,a=""===e.dataset.radixToastAnnounceExclude;if(!r)if(a){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...Et(e))}})),t}function Dt(e,t,r,{discrete:a}){const n=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),a?f(n,s):n.dispatchEvent(s)}var Mt=(e,t,r=0)=>{const a=Math.abs(e.x),n=Math.abs(e.y),s=a>n;return"left"===t||"right"===t?s&&a>r:!s&&n>r};function zt(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Rt(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}var It=mt,Ft=ft,Bt=jt,Lt=St,qt=Ct,$t=Tt,Kt=Pt;function Ut(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Ut(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Ht(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Ut(e))&&(a&&(a+=" "),a+=t);return a}const Yt=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Vt=Ht,Gt=(e,t)=>r=>{var a;if(null==(null==t?void 0:t.variants))return Vt(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:n,defaultVariants:s}=t,i=Object.keys(n).map((e=>{const t=null==r?void 0:r[e],a=null==s?void 0:s[e];if(null===t)return null;const i=Yt(t)||Yt(a);return n[e][i]})),l=r&&Object.entries(r).reduce(((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e}),{}),o=null==t||null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce(((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every((e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...l}[t]):{...s,...l}[t]===r}))?[...e,r,a]:e}),[]);return Vt(e,i,o,null==r?void 0:r.class,null==r?void 0:r.className)},Wt=(...e)=>e.filter(((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t)).join(" ").trim();
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Qt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ze.forwardRef((({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:s,iconNode:i,...l},o)=>ze.createElement("svg",{ref:o,...Qt,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:Wt("lucide",n),...l},[...i.map((([e,t])=>ze.createElement(e,t))),...Array.isArray(s)?s:[s]]))),Zt=(e,t)=>{const r=ze.forwardRef((({className:r,...a},n)=>{return ze.createElement(Xt,{ref:n,iconNode:t,className:Wt(`lucide-${s=e,s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...a});var s}));return r.displayName=`${e}`,r},Jt=Zt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),er=Zt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),tr=Zt("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),rr=Zt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),ar=Zt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),nr=Zt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),sr=Zt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),ir=Zt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),lr=Zt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),or=Zt("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),cr=Zt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),dr=Zt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),ur=Zt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),mr=Zt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),hr=Zt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),pr=Zt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),xr=Zt("ChartArea",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]]),gr=Zt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),fr=Zt("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),yr=Zt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),vr=Zt("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),br=Zt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),jr=Zt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),kr=Zt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),wr=Zt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Nr=Zt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),_r=Zt("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),Sr=Zt("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),Cr=Zt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),Tr=Zt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Or=Zt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Pr=Zt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ar=Zt("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]),Er=Zt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Dr=Zt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Mr=Zt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),zr=Zt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Rr=Zt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Ir=Zt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Fr=Zt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Br=Zt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Lr=Zt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),qr=Zt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),$r=Zt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Kr=Zt("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Ur=Zt("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),Hr=Zt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Yr=Zt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Vr=Zt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Gr=Zt("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Wr=Zt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Qr=Zt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),Xr=Zt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Zr=Zt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),Jr=Zt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),ea=Zt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),ta=Zt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),ra=Zt("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]),aa=Zt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),na=Zt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),sa=Zt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),ia=Zt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),la=Zt("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),oa=Zt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ca=Zt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),da=Zt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ua=Zt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ma=Zt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ha=Zt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),pa=Zt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),xa=Zt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),ga=Zt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),fa=Zt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),ya=Zt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),va=Zt("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]),ba=Zt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),ja=Zt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),ka=Zt("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),wa=Zt("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),Na=Zt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),_a=Zt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),Sa=Zt("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Ca=Zt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Ta=Zt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Oa=Zt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Pa=Zt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Aa=Zt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Ea=Zt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),Da=Zt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ma=Zt("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),za=Zt("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),Ra=Zt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Ia=Zt("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),Fa=Zt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ba=Zt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),La=Zt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qa=Zt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),$a=Zt("Ship",[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]]),Ka=Zt("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),Ua=Zt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Ha=Zt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ya=Zt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Va=Zt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Ga=Zt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Wa=Zt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Qa=Zt("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),Xa=Zt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Za=Zt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ja=Zt("Text",[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]]),en=Zt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),tn=Zt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),rn=Zt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),an=Zt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),nn=Zt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),sn=Zt("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),ln=Zt("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),on=Zt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),cn=Zt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),dn=Zt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),un=Zt("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),mn=Zt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hn=Zt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),pn=Zt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),xn=Zt("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),gn=Zt("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),fn=Zt("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),yn=Zt("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),vn=Zt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),bn=Zt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),jn=Zt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),kn=Zt("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),wn=e=>{const t=Cn(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),Nn(r,t)||Sn(e)},getConflictingClassGroupIds:(e,t)=>{const n=r[e]||[];return t&&a[e]?[...n,...a[e]]:n}}},Nn=(e,t)=>{var r;if(0===e.length)return t.classGroupId;const a=e[0],n=t.nextPart.get(a),s=n?Nn(e.slice(1),n):void 0;if(s)return s;if(0===t.validators.length)return;const i=e.join("-");return null==(r=t.validators.find((({validator:e})=>e(i))))?void 0:r.classGroupId},_n=/^\[(.+)\]$/,Sn=e=>{if(_n.test(e)){const t=_n.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Cn=e=>{const{theme:t,prefix:r}=e,a={nextPart:new Map,validators:[]};return An(Object.entries(e.classGroups),r).forEach((([e,r])=>{Tn(r,a,e,t)})),a},Tn=(e,t,r,a)=>{e.forEach((e=>{if("string"!=typeof e){if("function"==typeof e)return Pn(e)?void Tn(e(a),t,r,a):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach((([e,n])=>{Tn(n,On(t,e),r,a)}))}else{(""===e?t:On(t,e)).classGroupId=r}}))},On=(e,t)=>{let r=e;return t.split("-").forEach((e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)})),r},Pn=e=>e.isThemeGetter,An=(e,t)=>t?e.map((([e,r])=>[e,r.map((e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map((([e,r])=>[t+e,r]))):e))])):e,En=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const n=(n,s)=>{r.set(n,s),t++,t>e&&(t=0,a=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=a.get(e))?(n(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):n(e,t)}}},Dn=e=>{const{separator:t,experimentalParseClassName:r}=e,a=1===t.length,n=t[0],s=t.length,i=e=>{const r=[];let i,l=0,o=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===l){if(c===n&&(a||e.slice(u,u+s)===t)){r.push(e.slice(o,u)),o=u+s;continue}if("/"===c){i=u;continue}}"["===c?l++:"]"===c&&l--}const c=0===r.length?e:e.substring(o),d=c.startsWith("!");return{modifiers:r,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>o?i-o:void 0}};return r?e=>r({className:e,parseClassName:i}):i},Mn=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach((e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)})),t.push(...r.sort()),t},zn=/\s+/;
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Rn(){let e,t,r=0,a="";for(;r<arguments.length;)(e=arguments[r++])&&(t=In(e))&&(a&&(a+=" "),a+=t);return a}const In=e=>{if("string"==typeof e)return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=In(e[a]))&&(r&&(r+=" "),r+=t);return r};function Fn(e,...t){let r,a,n,s=function(l){const o=t.reduce(((e,t)=>t(e)),e());return r=(e=>({cache:En(e.cacheSize),parseClassName:Dn(e),...wn(e)}))(o),a=r.cache.get,n=r.cache.set,s=i,i(l)};function i(e){const t=a(e);if(t)return t;const s=((e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=t,s=[],i=e.trim().split(zn);let l="";for(let o=i.length-1;o>=0;o-=1){const e=i[o],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=r(e);let m=Boolean(u),h=a(m?d.substring(0,u):d);if(!h){if(!m){l=e+(l.length>0?" "+l:l);continue}if(h=a(d),!h){l=e+(l.length>0?" "+l:l);continue}m=!1}const p=Mn(t).join(":"),x=c?p+"!":p,g=x+h;if(s.includes(g))continue;s.push(g);const f=n(h,m);for(let r=0;r<f.length;++r){const e=f[r];s.push(x+e)}l=e+(l.length>0?" "+l:l)}return l})(e,r);return n(e,s),s}return function(){return s(Rn.apply(null,arguments))}}const Bn=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Ln=/^\[(?:([a-z-]+):)?(.+)\]$/i,qn=/^\d+\/\d+$/,$n=new Set(["px","full","screen"]),Kn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Un=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Hn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Yn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Vn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gn=e=>Qn(e)||$n.has(e)||qn.test(e),Wn=e=>cs(e,"length",ds),Qn=e=>Boolean(e)&&!Number.isNaN(Number(e)),Xn=e=>cs(e,"number",Qn),Zn=e=>Boolean(e)&&Number.isInteger(Number(e)),Jn=e=>e.endsWith("%")&&Qn(e.slice(0,-1)),es=e=>Ln.test(e),ts=e=>Kn.test(e),rs=new Set(["length","size","percentage"]),as=e=>cs(e,rs,us),ns=e=>cs(e,"position",us),ss=new Set(["image","url"]),is=e=>cs(e,ss,hs),ls=e=>cs(e,"",ms),os=()=>!0,cs=(e,t,r)=>{const a=Ln.exec(e);return!!a&&(a[1]?"string"==typeof t?a[1]===t:t.has(a[1]):r(a[2]))},ds=e=>Un.test(e)&&!Hn.test(e),us=()=>!1,ms=e=>Yn.test(e),hs=e=>Vn.test(e),ps=Fn((()=>{const e=Bn("colors"),t=Bn("spacing"),r=Bn("blur"),a=Bn("brightness"),n=Bn("borderColor"),s=Bn("borderRadius"),i=Bn("borderSpacing"),l=Bn("borderWidth"),o=Bn("contrast"),c=Bn("grayscale"),d=Bn("hueRotate"),u=Bn("invert"),m=Bn("gap"),h=Bn("gradientColorStops"),p=Bn("gradientColorStopPositions"),x=Bn("inset"),g=Bn("margin"),f=Bn("opacity"),y=Bn("padding"),v=Bn("saturate"),b=Bn("scale"),j=Bn("sepia"),k=Bn("skew"),w=Bn("space"),N=Bn("translate"),_=()=>["auto",es,t],S=()=>[es,t],C=()=>["",Gn,Wn],T=()=>["auto",Qn,es],O=()=>["","0",es],P=()=>[Qn,es];return{cacheSize:500,separator:":",theme:{colors:[os],spacing:[Gn,Wn],blur:["none","",ts,es],brightness:P(),borderColor:[e],borderRadius:["none","","full",ts,es],borderSpacing:S(),borderWidth:C(),contrast:P(),grayscale:O(),hueRotate:P(),invert:O(),gap:S(),gradientColorStops:[e],gradientColorStopPositions:[Jn,Wn],inset:_(),margin:_(),opacity:P(),padding:S(),saturate:P(),scale:P(),sepia:O(),skew:P(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",es]}],container:["container"],columns:[{columns:[ts]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",es]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Zn,es]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",es]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",Zn,es]}],"grid-cols":[{"grid-cols":[os]}],"col-start-end":[{col:["auto",{span:["full",Zn,es]},es]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[os]}],"row-start-end":[{row:["auto",{span:[Zn,es]},es]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",es]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",es]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[w]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[w]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",es,t]}],"min-w":[{"min-w":[es,t,"min","max","fit"]}],"max-w":[{"max-w":[es,t,"none","full","min","max","fit","prose",{screen:[ts]},ts]}],h:[{h:[es,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[es,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[es,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[es,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ts,Wn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xn]}],"font-family":[{font:[os]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",es]}],"line-clamp":[{"line-clamp":["none",Qn,Xn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gn,es]}],"list-image":[{"list-image":["none",es]}],"list-style-type":[{list:["none","disc","decimal",es]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[f]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gn,Wn]}],"underline-offset":[{"underline-offset":["auto",Gn,es]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",es]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",es]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[f]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ns]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",as]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},is]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[f]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[f]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Gn,es]}],"outline-w":[{outline:[Gn,Wn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[f]}],"ring-offset-w":[{"ring-offset":[Gn,Wn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ts,ls]}],"shadow-color":[{shadow:[os]}],opacity:[{opacity:[f]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[o]}],"drop-shadow":[{"drop-shadow":["","none",ts,es]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[v]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[o]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[f]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",es]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",es]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",es]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Zn,es]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",es]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",es]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",es]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Gn,Wn,Xn]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}));function xs(...e){return ps(Ht(e))}function gs(e){if(!e||0===e.length)return!1;return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}const fs=It,ys=ze.forwardRef((({className:e,...t},r)=>i.jsx(Ft,{ref:r,className:xs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t})));ys.displayName=Ft.displayName;const vs=Gt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bs=ze.forwardRef((({className:e,variant:t,...r},a)=>i.jsx(Bt,{ref:a,className:xs(vs({variant:t}),e),...r})));bs.displayName=Bt.displayName;ze.forwardRef((({className:e,...t},r)=>i.jsx($t,{ref:r,className:xs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}))).displayName=$t.displayName;const js=ze.forwardRef((({className:e,...t},r)=>i.jsx(Kt,{ref:r,className:xs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(vn,{className:"h-4 w-4"})})));js.displayName=Kt.displayName;const ks=ze.forwardRef((({className:e,...t},r)=>i.jsx(Lt,{ref:r,className:xs("text-sm font-semibold",e),...t})));ks.displayName=Lt.displayName;const ws=ze.forwardRef((({className:e,...t},r)=>i.jsx(qt,{ref:r,className:xs("text-sm opacity-90",e),...t})));function Ns(){const{toasts:e}=at();return i.jsxs(fs,{children:[e.map((function({id:e,title:t,description:r,action:a,...n}){return i.jsxs(bs,{...n,children:[i.jsxs("div",{className:"grid gap-1",children:[t&&i.jsx(ks,{children:t}),r&&i.jsx(ws,{children:r})]}),a,i.jsx(js,{})]},e)})),i.jsx(ys,{})]})}ws.displayName=qt.displayName;var _s=["light","dark"],Ss=ze.createContext(void 0),Cs={setTheme:e=>{},themes:[]};ze.memo((({forcedTheme:e,storageKey:t,attribute:r,enableSystem:a,enableColorScheme:n,defaultTheme:s,value:i,attrs:l,nonce:o})=>{let c="system"===s,d="class"===r?`var d=document.documentElement,c=d.classList;c.remove(${l.map((e=>`'${e}'`)).join(",")});`:`var d=document.documentElement,n='${r}',s='setAttribute';`,u=n?_s.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(e,t=!1,a=!0)=>{let s=i?i[e]:e,l=t?e+"|| ''":`'${s}'`,o="";return n&&a&&!t&&_s.includes(e)&&(o+=`d.style.colorScheme = '${e}';`),"class"===r?o+=t||s?`c.add(${l})`:"null":s&&(o+=`d[s](n,${l})`),o},h=e?`!function(){${d}${m(e)}}()`:a?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${c?"":"else{"+m(s,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(s,!1,!1)};}${u}}catch(t){}}();`;return ze.createElement("script",{nonce:o,dangerouslySetInnerHTML:{__html:h}})}));var Ts=Array(12).fill(0),Os=({visible:e})=>Re.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},Re.createElement("div",{className:"sonner-spinner"},Ts.map(((e,t)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`}))))),Ps=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),As=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Es=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ds=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ms=1,zs=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach((t=>t(e)))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...a}=e,n="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Ms++,s=this.toasts.find((e=>e.id===n)),i=void 0===e.dismissible||e.dismissible;return s?this.toasts=this.toasts.map((t=>t.id===n?(this.publish({...t,...e,id:n,title:r}),{...t,...e,id:n,dismissible:i,title:r}):t)):this.addToast({title:r,...a,dismissible:i,id:n}),n},this.dismiss=e=>(e||this.toasts.forEach((e=>{this.subscribers.forEach((t=>t({id:e.id,dismiss:!0})))})),this.subscribers.forEach((t=>t({id:e,dismiss:!0}))),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;void 0!==t.loading&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let a=e instanceof Promise?e:e(),n=void 0!==r;return a.then((async e=>{if(Rs(e)&&!e.ok){n=!1;let a="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,s="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:r,type:"error",message:a,description:s})}else if(void 0!==t.success){n=!1;let a="function"==typeof t.success?await t.success(e):t.success,s="function"==typeof t.description?await t.description(e):t.description;this.create({id:r,type:"success",message:a,description:s})}})).catch((async e=>{if(void 0!==t.error){n=!1;let a="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description;this.create({id:r,type:"error",message:a,description:s})}})).finally((()=>{var e;n&&(this.dismiss(r),r=void 0),null==(e=t.finally)||e.call(t)})),r},this.custom=(e,t)=>{let r=(null==t?void 0:t.id)||Ms++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Rs=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Is=(e,t)=>{let r=(null==t?void 0:t.id)||Ms++;return zs.addToast({title:e,...t,id:r}),r},Fs=Object.assign(Is,{success:zs.success,info:zs.info,warning:zs.warning,error:zs.error,custom:zs.custom,message:zs.message,promise:zs.promise,dismiss:zs.dismiss,loading:zs.loading},{getHistory:()=>zs.toasts});function Bs(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var Ls=3,qs=14;function $s(...e){return e.filter(Boolean).join(" ")}var Ks=e=>{var t,r,a,n,s,i,l,o,c,d;let{invert:u,toast:m,unstyled:h,interacting:p,setHeights:x,visibleToasts:g,heights:f,index:y,toasts:v,expanded:b,removeToast:j,defaultRichColors:k,closeButton:w,style:N,cancelButtonStyle:_,actionButtonStyle:S,className:C="",descriptionClassName:T="",duration:O,position:P,gap:A,loadingIcon:E,expandByDefault:D,classNames:M,icons:z,closeButtonAriaLabel:R="Close toast",pauseWhenPageIsHidden:I,cn:F}=e,[B,L]=Re.useState(!1),[q,$]=Re.useState(!1),[K,U]=Re.useState(!1),[H,Y]=Re.useState(!1),[V,G]=Re.useState(0),[W,Q]=Re.useState(0),X=Re.useRef(null),Z=Re.useRef(null),J=0===y,ee=y+1<=g,te=m.type,re=!1!==m.dismissible,ae=m.className||"",ne=m.descriptionClassName||"",se=Re.useMemo((()=>f.findIndex((e=>e.toastId===m.id))||0),[f,m.id]),ie=Re.useMemo((()=>{var e;return null!=(e=m.closeButton)?e:w}),[m.closeButton,w]),le=Re.useMemo((()=>m.duration||O||4e3),[m.duration,O]),oe=Re.useRef(0),ce=Re.useRef(0),de=Re.useRef(0),ue=Re.useRef(null),[me,he]=P.split("-"),pe=Re.useMemo((()=>f.reduce(((e,t,r)=>r>=se?e:e+t.height),0)),[f,se]),xe=(()=>{let[e,t]=Re.useState(document.hidden);return Re.useEffect((()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)}),[]),e})(),ge=m.invert||u,fe="loading"===te;ce.current=Re.useMemo((()=>se*A+pe),[se,pe]),Re.useEffect((()=>{L(!0)}),[]),Re.useLayoutEffect((()=>{if(!B)return;let e=Z.current,t=e.style.height;e.style.height="auto";let r=e.getBoundingClientRect().height;e.style.height=t,Q(r),x((e=>e.find((e=>e.toastId===m.id))?e.map((e=>e.toastId===m.id?{...e,height:r}:e)):[{toastId:m.id,height:r,position:m.position},...e]))}),[B,m.title,m.description,x,m.id]);let ye=Re.useCallback((()=>{$(!0),G(ce.current),x((e=>e.filter((e=>e.toastId!==m.id)))),setTimeout((()=>{j(m)}),200)}),[m,j,x,ce]);return Re.useEffect((()=>{if(m.promise&&"loading"===te||m.duration===1/0||"loading"===m.type)return;let e,t=le;return b||p||I&&xe?(()=>{if(de.current<oe.current){let e=(new Date).getTime()-oe.current;t-=e}de.current=(new Date).getTime()})():t!==1/0&&(oe.current=(new Date).getTime(),e=setTimeout((()=>{var e;null==(e=m.onAutoClose)||e.call(m,m),ye()}),t)),()=>clearTimeout(e)}),[b,p,D,m,le,ye,m.promise,te,I,xe]),Re.useEffect((()=>{let e=Z.current;if(e){let t=e.getBoundingClientRect().height;return Q(t),x((e=>[{toastId:m.id,height:t,position:m.position},...e])),()=>x((e=>e.filter((e=>e.toastId!==m.id))))}}),[x,m.id]),Re.useEffect((()=>{m.delete&&ye()}),[ye,m.delete]),Re.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Z,className:F(C,ae,null==M?void 0:M.toast,null==(t=null==m?void 0:m.classNames)?void 0:t.toast,null==M?void 0:M.default,null==M?void 0:M[te],null==(r=null==m?void 0:m.classNames)?void 0:r[te]),"data-sonner-toast":"","data-rich-colors":null!=(a=m.richColors)?a:k,"data-styled":!(m.jsx||m.unstyled||h),"data-mounted":B,"data-promise":!!m.promise,"data-removed":q,"data-visible":ee,"data-y-position":me,"data-x-position":he,"data-index":y,"data-front":J,"data-swiping":K,"data-dismissible":re,"data-type":te,"data-invert":ge,"data-swipe-out":H,"data-expanded":!!(b||D&&B),style:{"--index":y,"--toasts-before":y,"--z-index":v.length-y,"--offset":`${q?V:ce.current}px`,"--initial-height":D?"auto":`${W}px`,...N,...m.style},onPointerDown:e=>{fe||!re||(X.current=new Date,G(ce.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(U(!0),ue.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,r,a;if(H||!re)return;ue.current=null;let n=Number((null==(e=Z.current)?void 0:e.style.getPropertyValue("--swipe-amount").replace("px",""))||0),s=(new Date).getTime()-(null==(t=X.current)?void 0:t.getTime()),i=Math.abs(n)/s;if(Math.abs(n)>=20||i>.11)return G(ce.current),null==(r=m.onDismiss)||r.call(m,m),ye(),void Y(!0);null==(a=Z.current)||a.style.setProperty("--swipe-amount","0px"),U(!1)},onPointerMove:e=>{var t;if(!ue.current||!re)return;let r=e.clientY-ue.current.y,a=e.clientX-ue.current.x,n=("top"===me?Math.min:Math.max)(0,r),s="touch"===e.pointerType?10:2;Math.abs(n)>s?null==(t=Z.current)||t.style.setProperty("--swipe-amount",`${r}px`):Math.abs(a)>s&&(ue.current=null)}},ie&&!m.jsx?Re.createElement("button",{"aria-label":R,"data-disabled":fe,"data-close-button":!0,onClick:fe||!re?()=>{}:()=>{var e;ye(),null==(e=m.onDismiss)||e.call(m,m)},className:F(null==M?void 0:M.closeButton,null==(n=null==m?void 0:m.classNames)?void 0:n.closeButton)},Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||Re.isValidElement(m.title)?m.jsx||m.title:Re.createElement(Re.Fragment,null,te||m.icon||m.promise?Re.createElement("div",{"data-icon":"",className:F(null==M?void 0:M.icon,null==(s=null==m?void 0:m.classNames)?void 0:s.icon)},m.promise||"loading"===m.type&&!m.icon?m.icon||(null!=z&&z.loading?Re.createElement("div",{className:"sonner-loader","data-visible":"loading"===te},z.loading):E?Re.createElement("div",{className:"sonner-loader","data-visible":"loading"===te},E):Re.createElement(Os,{visible:"loading"===te})):null,"loading"!==m.type?m.icon||(null==z?void 0:z[te])||(e=>{switch(e){case"success":return Ps;case"info":return Es;case"warning":return As;case"error":return Ds;default:return null}})(te):null):null,Re.createElement("div",{"data-content":"",className:F(null==M?void 0:M.content,null==(i=null==m?void 0:m.classNames)?void 0:i.content)},Re.createElement("div",{"data-title":"",className:F(null==M?void 0:M.title,null==(l=null==m?void 0:m.classNames)?void 0:l.title)},m.title),m.description?Re.createElement("div",{"data-description":"",className:F(T,ne,null==M?void 0:M.description,null==(o=null==m?void 0:m.classNames)?void 0:o.description)},m.description):null),Re.isValidElement(m.cancel)?m.cancel:m.cancel&&Bs(m.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||_,onClick:e=>{var t,r;Bs(m.cancel)&&re&&(null==(r=(t=m.cancel).onClick)||r.call(t,e),ye())},className:F(null==M?void 0:M.cancelButton,null==(c=null==m?void 0:m.classNames)?void 0:c.cancelButton)},m.cancel.label):null,Re.isValidElement(m.action)?m.action:m.action&&Bs(m.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||S,onClick:e=>{var t,r;Bs(m.action)&&(e.defaultPrevented||(null==(r=(t=m.action).onClick)||r.call(t,e),ye()))},className:F(null==M?void 0:M.actionButton,null==(d=null==m?void 0:m.classNames)?void 0:d.actionButton)},m.action.label):null))};function Us(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}var Hs=e=>{let{invert:t,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:n,closeButton:s,className:i,offset:l,theme:o="light",richColors:c,duration:d,style:u,visibleToasts:m=Ls,toastOptions:h,dir:p=Us(),gap:x=qs,loadingIcon:g,icons:f,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:v,cn:b=$s}=e,[j,k]=Re.useState([]),w=Re.useMemo((()=>Array.from(new Set([r].concat(j.filter((e=>e.position)).map((e=>e.position)))))),[j,r]),[N,_]=Re.useState([]),[S,C]=Re.useState(!1),[T,O]=Re.useState(!1),[P,A]=Re.useState("system"!==o?o:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),E=Re.useRef(null),D=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=Re.useRef(null),z=Re.useRef(!1),R=Re.useCallback((e=>{var t;null!=(t=j.find((t=>t.id===e.id)))&&t.delete||zs.dismiss(e.id),k((t=>t.filter((({id:t})=>t!==e.id))))}),[j]);return Re.useEffect((()=>zs.subscribe((e=>{e.dismiss?k((t=>t.map((t=>t.id===e.id?{...t,delete:!0}:t)))):setTimeout((()=>{Ie.flushSync((()=>{k((t=>{let r=t.findIndex((t=>t.id===e.id));return-1!==r?[...t.slice(0,r),{...t[r],...e},...t.slice(r+1)]:[e,...t]}))}))}))}))),[]),Re.useEffect((()=>{"system"===o?("system"===o&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(({matches:e})=>{A(e?"dark":"light")}))):A(o)}),[o]),Re.useEffect((()=>{j.length<=1&&C(!1)}),[j]),Re.useEffect((()=>{let e=e=>{var t,r;a.every((t=>e[t]||e.code===t))&&(C(!0),null==(t=E.current)||t.focus()),"Escape"===e.code&&(document.activeElement===E.current||null!=(r=E.current)&&r.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[a]),Re.useEffect((()=>{if(E.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,z.current=!1)}}),[E.current]),j.length?Re.createElement("section",{"aria-label":`${y} ${D}`,tabIndex:-1},w.map(((e,r)=>{var a;let[o,y]=e.split("-");return Re.createElement("ol",{key:e,dir:"auto"===p?Us():p,tabIndex:-1,ref:E,className:i,"data-sonner-toaster":!0,"data-theme":P,"data-y-position":o,"data-x-position":y,style:{"--front-toast-height":`${(null==(a=N[0])?void 0:a.height)||0}px`,"--offset":"number"==typeof l?`${l}px`:l||"32px","--width":"356px","--gap":`${x}px`,...u},onBlur:e=>{z.current&&!e.currentTarget.contains(e.relatedTarget)&&(z.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||z.current||(z.current=!0,M.current=e.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{T||C(!1)},onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||O(!0)},onPointerUp:()=>O(!1)},j.filter((t=>!t.position&&0===r||t.position===e)).map(((r,a)=>{var i,l;return Re.createElement(Ks,{key:r.id,icons:f,index:a,toast:r,defaultRichColors:c,duration:null!=(i=null==h?void 0:h.duration)?i:d,className:null==h?void 0:h.className,descriptionClassName:null==h?void 0:h.descriptionClassName,invert:t,visibleToasts:m,closeButton:null!=(l=null==h?void 0:h.closeButton)?l:s,interacting:T,position:e,style:null==h?void 0:h.style,unstyled:null==h?void 0:h.unstyled,classNames:null==h?void 0:h.classNames,cancelButtonStyle:null==h?void 0:h.cancelButtonStyle,actionButtonStyle:null==h?void 0:h.actionButtonStyle,removeToast:R,toasts:j.filter((e=>e.position==r.position)),heights:N.filter((e=>e.position==r.position)),setHeights:_,expandByDefault:n,gap:x,loadingIcon:g,expanded:S,pauseWhenPageIsHidden:v,cn:b})})))}))):null};const Ys=({...e})=>{const{theme:t="system"}=null!=(r=ze.useContext(Ss))?r:Cs;var r;return i.jsx(Hs,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var[Vs,Gs]=n("Tooltip",[y]),Ws=y(),Qs="TooltipProvider",Xs=700,Zs="tooltip.open",[Js,ei]=Vs(Qs),ti=e=>{const{__scopeTooltip:t,delayDuration:r=Xs,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:s}=e,[l,o]=ze.useState(!0),c=ze.useRef(!1),d=ze.useRef(0);return ze.useEffect((()=>{const e=d.current;return()=>window.clearTimeout(e)}),[]),i.jsx(Js,{scope:t,isOpenDelayed:l,delayDuration:r,onOpen:ze.useCallback((()=>{window.clearTimeout(d.current),o(!1)}),[]),onClose:ze.useCallback((()=>{window.clearTimeout(d.current),d.current=window.setTimeout((()=>o(!0)),a)}),[a]),isPointerInTransitRef:c,onPointerInTransitChange:ze.useCallback((e=>{c.current=e}),[]),disableHoverableContent:n,children:s})};ti.displayName=Qs;var ri="Tooltip",[ai,ni]=Vs(ri),si=e=>{const{__scopeTooltip:t,children:r,open:a,defaultOpen:n=!1,onOpenChange:s,disableHoverableContent:l,delayDuration:o}=e,c=ei(ri,e.__scopeTooltip),u=Ws(t),[m,h]=ze.useState(null),p=_(),x=ze.useRef(0),g=l??c.disableHoverableContent,f=o??c.delayDuration,y=ze.useRef(!1),[v=!1,b]=d({prop:a,defaultProp:n,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(Zs))):c.onClose(),null==s||s(e)}}),j=ze.useMemo((()=>v?y.current?"delayed-open":"instant-open":"closed"),[v]),k=ze.useCallback((()=>{window.clearTimeout(x.current),x.current=0,y.current=!1,b(!0)}),[b]),w=ze.useCallback((()=>{window.clearTimeout(x.current),x.current=0,b(!1)}),[b]),N=ze.useCallback((()=>{window.clearTimeout(x.current),x.current=window.setTimeout((()=>{y.current=!0,b(!0),x.current=0}),f)}),[f,b]);return ze.useEffect((()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)}),[]),i.jsx(S,{...u,children:i.jsx(ai,{scope:t,contentId:p,open:v,stateAttribute:j,trigger:m,onTriggerChange:h,onTriggerEnter:ze.useCallback((()=>{c.isOpenDelayed?N():k()}),[c.isOpenDelayed,N,k]),onTriggerLeave:ze.useCallback((()=>{g?w():(window.clearTimeout(x.current),x.current=0)}),[w,g]),onOpen:k,onClose:w,disableHoverableContent:g,children:r})})};si.displayName=ri;var ii="TooltipTrigger",li=ze.forwardRef(((e,t)=>{const{__scopeTooltip:r,...a}=e,n=ni(ii,r),l=ei(ii,r),c=Ws(r),d=ze.useRef(null),u=s(t,d,n.onTriggerChange),m=ze.useRef(!1),p=ze.useRef(!1),x=ze.useCallback((()=>m.current=!1),[]);return ze.useEffect((()=>()=>document.removeEventListener("pointerup",x)),[x]),i.jsx(v,{asChild:!0,...c,children:i.jsx(o.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...a,ref:u,onPointerMove:h(e.onPointerMove,(e=>{"touch"!==e.pointerType&&(p.current||l.isPointerInTransitRef.current||(n.onTriggerEnter(),p.current=!0))})),onPointerLeave:h(e.onPointerLeave,(()=>{n.onTriggerLeave(),p.current=!1})),onPointerDown:h(e.onPointerDown,(()=>{m.current=!0,document.addEventListener("pointerup",x,{once:!0})})),onFocus:h(e.onFocus,(()=>{m.current||n.onOpen()})),onBlur:h(e.onBlur,n.onClose),onClick:h(e.onClick,n.onClose)})})}));li.displayName=ii;var[oi,ci]=Vs("TooltipPortal",{forceMount:void 0}),di="TooltipContent",ui=ze.forwardRef(((e,t)=>{const r=ci(di,e.__scopeTooltip),{forceMount:a=r.forceMount,side:n="top",...s}=e,l=ni(di,e.__scopeTooltip);return i.jsx(u,{present:a||l.open,children:l.disableHoverableContent?i.jsx(xi,{side:n,...s,ref:t}):i.jsx(mi,{side:n,...s,ref:t})})})),mi=ze.forwardRef(((e,t)=>{const r=ni(di,e.__scopeTooltip),a=ei(di,e.__scopeTooltip),n=ze.useRef(null),l=s(t,n),[o,c]=ze.useState(null),{trigger:d,onClose:u}=r,m=n.current,{onPointerInTransitChange:h}=a,p=ze.useCallback((()=>{c(null),h(!1)}),[h]),x=ze.useCallback(((e,t)=>{const r=e.currentTarget,a={x:e.clientX,y:e.clientY},n=function(e,t,r=5){const a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return a}(a,function(e,t){const r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,a,n,s)){case s:return"left";case n:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}(a,r.getBoundingClientRect())),s=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const r=e[a];for(;t.length>=2;){const e=t[t.length-1],a=t[t.length-2];if(!((e.x-a.x)*(r.y-a.y)>=(e.y-a.y)*(r.x-a.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let a=e.length-1;a>=0;a--){const t=e[a];for(;r.length>=2;){const e=r[r.length-1],a=r[r.length-2];if(!((e.x-a.x)*(t.y-a.y)>=(e.y-a.y)*(t.x-a.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}(t)}([...n,...function(e){const{top:t,right:r,bottom:a,left:n}=e;return[{x:n,y:t},{x:r,y:t},{x:r,y:a},{x:n,y:a}]}(t.getBoundingClientRect())]);c(s),h(!0)}),[h]);return ze.useEffect((()=>()=>p()),[p]),ze.useEffect((()=>{if(d&&m){const e=e=>x(e,m),t=e=>x(e,d);return d.addEventListener("pointerleave",e),m.addEventListener("pointerleave",t),()=>{d.removeEventListener("pointerleave",e),m.removeEventListener("pointerleave",t)}}}),[d,m,x,p]),ze.useEffect((()=>{if(o){const e=e=>{const t=e.target,r={x:e.clientX,y:e.clientY},a=(null==d?void 0:d.contains(t))||(null==m?void 0:m.contains(t)),n=!function(e,t){const{x:r,y:a}=e;let n=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const e=t[s].x,l=t[s].y,o=t[i].x,c=t[i].y;l>a!=c>a&&r<(o-e)*(a-l)/(c-l)+e&&(n=!n)}return n}(r,o);a?p():n&&(p(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[d,m,o,u,p]),i.jsx(xi,{...e,ref:l})})),[hi,pi]=Vs(ri,{isInside:!1}),xi=ze.forwardRef(((e,t)=>{const{__scopeTooltip:r,children:a,"aria-label":n,onEscapeKeyDown:s,onPointerDownOutside:l,...o}=e,c=ni(di,r),d=Ws(r),{onClose:u}=c;return ze.useEffect((()=>(document.addEventListener(Zs,u),()=>document.removeEventListener(Zs,u))),[u]),ze.useEffect((()=>{if(c.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(c.trigger))&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[c.trigger,u]),i.jsx(b,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:i.jsxs(j,{"data-state":c.stateAttribute,...d,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(k,{children:a}),i.jsx(hi,{scope:r,isInside:!0,children:i.jsx(w,{id:c.contentId,role:"tooltip",children:n||a})})]})})}));ui.displayName=di;var gi="TooltipArrow";ze.forwardRef(((e,t)=>{const{__scopeTooltip:r,...a}=e,n=Ws(r);return pi(gi,r).isInside?null:i.jsx(N,{...n,...a,ref:t})})).displayName=gi;var fi=ui;const yi=ti,vi=si,bi=li,ji=ze.forwardRef((({className:e,sideOffset:t=4,...r},a)=>i.jsx(fi,{ref:a,sideOffset:t,className:xs("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})));
/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ki.apply(this,arguments)}var wi,Ni;ji.displayName=fi.displayName,(Ni=wi||(wi={})).Pop="POP",Ni.Push="PUSH",Ni.Replace="REPLACE";const _i="popstate";function Si(e){return void 0===e&&(e={}),function(e,t,r,a){void 0===a&&(a={});let{window:n=document.defaultView,v5Compat:s=!1}=a,i=n.history,l=wi.Pop,o=null,c=d();null==c&&(c=0,i.replaceState(ki({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function u(){l=wi.Pop;let e=d(),t=null==e?null:e-c;c=e,o&&o({action:l,location:x.location,delta:t})}function m(e,t){l=wi.Push;let r=Pi(x.location,e,t);c=d()+1;let a=Oi(r,c),u=x.createHref(r);try{i.pushState(a,"",u)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;n.location.assign(u)}s&&o&&o({action:l,location:x.location,delta:1})}function h(e,t){l=wi.Replace;let r=Pi(x.location,e,t);c=d();let a=Oi(r,c),n=x.createHref(r);i.replaceState(a,"",n),s&&o&&o({action:l,location:x.location,delta:0})}function p(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,r="string"==typeof e?e:Ai(e);return r=r.replace(/ $/,"%20"),Ci(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}let x={get action(){return l},get location(){return e(n,i)},listen(e){if(o)throw new Error("A history only accepts one active listener");return n.addEventListener(_i,u),o=e,()=>{n.removeEventListener(_i,u),o=null}},createHref:e=>t(n,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:m,replace:h,go:e=>i.go(e)};return x}((function(e,t){let{pathname:r,search:a,hash:n}=e.location;return Pi("",{pathname:r,search:a,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:Ai(t)}),0,e)}function Ci(e,t){if(!1===e||null==e)throw new Error(t)}function Ti(e,t){if(!e)try{throw new Error(t)}catch(r){}}function Oi(e,t){return{usr:e.state,key:e.key,idx:t}}function Pi(e,t,r,a){return void 0===r&&(r=null),ki({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Ei(t):t,{state:r,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function Ai(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function Ei(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}var Di,Mi;function zi(e,t,r){return void 0===r&&(r="/"),function(e,t,r,a){let n="string"==typeof t?Ei(t):t,s=Wi(n.pathname||"/",r);if(null==s)return null;let i=Ri(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let l=null;for(let o=0;null==l&&o<i.length;++o){let e=Gi(s);l=Yi(i[o],e,a)}return l}(e,t,r,!1)}function Ri(e,t,r,a){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===a&&(a="");let n=(e,n,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};i.relativePath.startsWith("/")&&(Ci(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let l=Ji([a,i.relativePath]),o=r.concat(i);e.children&&e.children.length>0&&(Ci(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),Ri(e.children,t,o,l)),(null!=e.path||e.index)&&t.push({path:l,score:Hi(l,e.index),routesMeta:o})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let a of Ii(e.path))n(e,t,a);else n(e,t)})),t}function Ii(e){let t=e.split("/");if(0===t.length)return[];let[r,...a]=t,n=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===a.length)return n?[s,""]:[s];let i=Ii(a.join("/")),l=[];return l.push(...i.map((e=>""===e?s:[s,e].join("/")))),n&&l.push(...i),l.map((t=>e.startsWith("/")&&""===t?"/":t))}(Mi=Di||(Di={})).data="data",Mi.deferred="deferred",Mi.redirect="redirect",Mi.error="error";const Fi=/^:[\w-]+$/,Bi=3,Li=2,qi=1,$i=10,Ki=-2,Ui=e=>"*"===e;function Hi(e,t){let r=e.split("/"),a=r.length;return r.some(Ui)&&(a+=Ki),t&&(a+=Li),r.filter((e=>!Ui(e))).reduce(((e,t)=>e+(Fi.test(t)?Bi:""===t?qi:$i)),a)}function Yi(e,t,r){let{routesMeta:a}=e,n={},s="/",i=[];for(let l=0;l<a.length;++l){let e=a[l],o=l===a.length-1,c="/"===s?t:t.slice(s.length)||"/",d=Vi({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&r&&!a[a.length-1].route.index&&(d=Vi({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:Ji([s,d.pathname]),pathnameBase:el(Ji([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=Ji([s,d.pathnameBase]))}return i}function Vi(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);Ti("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(a.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(a.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let s=new RegExp(n,t?void 0:"i");return[s,a]}(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let s=n[0],i=s.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce(((e,t,r)=>{let{paramName:a,isOptional:n}=t;if("*"===a){let e=l[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[r];return e[a]=n&&!o?void 0:(o||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:i,pattern:e}}function Gi(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return Ti(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Wi(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&"/"!==a?null:e.slice(r)||"/"}function Qi(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Xi(e,t){let r=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t?r.map(((e,t)=>t===r.length-1?e.pathname:e.pathnameBase)):r.map((e=>e.pathnameBase))}function Zi(e,t,r,a){let n;void 0===a&&(a=!1),"string"==typeof e?n=Ei(e):(n=ki({},e),Ci(!n.pathname||!n.pathname.includes("?"),Qi("?","pathname","search",n)),Ci(!n.pathname||!n.pathname.includes("#"),Qi("#","pathname","hash",n)),Ci(!n.search||!n.search.includes("#"),Qi("#","search","hash",n)));let s,i=""===e||""===n.pathname,l=i?"/":n.pathname;if(null==l)s=r;else{let e=t.length-1;if(!a&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}s=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:r,search:a="",hash:n=""}="string"==typeof e?Ei(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:tl(a),hash:rl(n)}}(n,s),c=l&&"/"!==l&&l.endsWith("/"),d=(i||"."===l)&&r.endsWith("/");return o.pathname.endsWith("/")||!c&&!d||(o.pathname+="/"),o}const Ji=e=>e.join("/").replace(/\/\/+/g,"/"),el=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tl=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",rl=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const al=["post","put","patch","delete"];new Set(al);const nl=["get",...al];
/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},sl.apply(this,arguments)}new Set(nl);const il=ze.createContext(null),ll=ze.createContext(null),ol=ze.createContext(null),cl=ze.createContext(null),dl=ze.createContext({outlet:null,matches:[],isDataRoute:!1}),ul=ze.createContext(null);function ml(){return null!=ze.useContext(cl)}function hl(){return ml()||Ci(!1),ze.useContext(cl).location}function pl(e){ze.useContext(ol).static||ze.useLayoutEffect(e)}function xl(){let{isDataRoute:e}=ze.useContext(dl);return e?function(){let{router:e}=function(){let e=ze.useContext(il);return e||Ci(!1),e}(Nl.UseNavigateStable),t=Sl(_l.UseNavigateStable),r=ze.useRef(!1);pl((()=>{r.current=!0}));let a=ze.useCallback((function(a,n){void 0===n&&(n={}),r.current&&("number"==typeof a?e.navigate(a):e.navigate(a,sl({fromRouteId:t},n)))}),[e,t]);return a}():function(){ml()||Ci(!1);let e=ze.useContext(il),{basename:t,future:r,navigator:a}=ze.useContext(ol),{matches:n}=ze.useContext(dl),{pathname:s}=hl(),i=JSON.stringify(Xi(n,r.v7_relativeSplatPath)),l=ze.useRef(!1);pl((()=>{l.current=!0}));let o=ze.useCallback((function(r,n){if(void 0===n&&(n={}),!l.current)return;if("number"==typeof r)return void a.go(r);let o=Zi(r,JSON.parse(i),s,"path"===n.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:Ji([t,o.pathname])),(n.replace?a.replace:a.push)(o,n.state,n)}),[t,a,i,s,e]);return o}()}const gl=ze.createContext(null);function fl(){let{matches:e}=ze.useContext(dl),t=e[e.length-1];return t?t.params:{}}function yl(e,t){let{relative:r}=void 0===t?{}:t,{future:a}=ze.useContext(ol),{matches:n}=ze.useContext(dl),{pathname:s}=hl(),i=JSON.stringify(Xi(n,a.v7_relativeSplatPath));return ze.useMemo((()=>Zi(e,JSON.parse(i),s,"path"===r)),[e,i,s,r])}function vl(e,t){return function(e,t,r,a){ml()||Ci(!1);let{navigator:n}=ze.useContext(ol),{matches:s}=ze.useContext(dl),i=s[s.length-1],l=i?i.params:{};!i||i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let c,d=hl();if(t){var u;let e="string"==typeof t?Ei(t):t;"/"===o||(null==(u=e.pathname)?void 0:u.startsWith(o))||Ci(!1),c=e}else c=d;let m=c.pathname||"/",h=m;if("/"!==o){let e=o.replace(/^\//,"").split("/");h="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=zi(e,{pathname:h}),x=function(e,t,r,a){var n;void 0===t&&(t=[]);void 0===r&&(r=null);void 0===a&&(a=null);if(null==e){var s;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(s=a)&&s.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let i=e,l=null==(n=r)?void 0:n.errors;if(null!=l){let e=i.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||Ci(!1),i=i.slice(0,Math.min(i.length,e+1))}let o=!1,c=-1;if(r&&a&&a.v7_partialHydration)for(let d=0;d<i.length;d++){let e=i[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:a}=r,n=e.route.loader&&void 0===t[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||n){o=!0,i=c>=0?i.slice(0,c+1):[i[0]];break}}}return i.reduceRight(((e,a,n)=>{let s,d=!1,u=null,m=null;r&&(s=l&&a.route.id?l[a.route.id]:void 0,u=a.route.errorElement||jl,o&&(c<0&&0===n?(d=!0,m=null):c===n&&(d=!0,m=a.route.hydrateFallbackElement||null)));let h=t.concat(i.slice(0,n+1)),p=()=>{let t;return t=s?u:d?m:a.route.Component?ze.createElement(a.route.Component,null):a.route.element?a.route.element:e,ze.createElement(wl,{match:a,routeContext:{outlet:e,matches:h,isDataRoute:null!=r},children:t})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===n)?ze.createElement(kl,{location:r.location,revalidation:r.revalidation,component:u,error:s,children:p(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):p()}),null)}(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Ji([o,n.encodeLocation?n.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?o:Ji([o,n.encodeLocation?n.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,r,a);if(t&&x)return ze.createElement(cl.Provider,{value:{location:sl({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:wi.Pop}},x);return x}(e,t)}function bl(){let e=function(){var e;let t=ze.useContext(ul),r=function(){let e=ze.useContext(ll);return e||Ci(!1),e}(_l.UseRouteError),a=Sl(_l.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[a]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ze.createElement(ze.Fragment,null,ze.createElement("h2",null,"Unexpected Application Error!"),ze.createElement("h3",{style:{fontStyle:"italic"}},t),r?ze.createElement("pre",{style:a},r):null,null)}const jl=ze.createElement(bl,null);class kl extends ze.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?ze.createElement(dl.Provider,{value:this.props.routeContext},ze.createElement(ul.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wl(e){let{routeContext:t,match:r,children:a}=e,n=ze.useContext(il);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),ze.createElement(dl.Provider,{value:t},a)}var Nl=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Nl||{}),_l=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_l||{});function Sl(e){let t=function(){let e=ze.useContext(dl);return e||Ci(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||Ci(!1),r.route.id}function Cl(e){let{to:t,replace:r,state:a,relative:n}=e;ml()||Ci(!1);let{future:s,static:i}=ze.useContext(ol),{matches:l}=ze.useContext(dl),{pathname:o}=hl(),c=xl(),d=Zi(t,Xi(l,s.v7_relativeSplatPath),o,"path"===n),u=JSON.stringify(d);return ze.useEffect((()=>c(JSON.parse(u),{replace:r,state:a,relative:n})),[c,u,n,r,a]),null}function Tl(e){return function(e){let t=ze.useContext(dl).outlet;return t?ze.createElement(gl.Provider,{value:e},t):t}(e.context)}function Ol(e){Ci(!1)}function Pl(e){let{basename:t="/",children:r=null,location:a,navigationType:n=wi.Pop,navigator:s,static:i=!1,future:l}=e;ml()&&Ci(!1);let o=t.replace(/^\/*/,"/"),c=ze.useMemo((()=>({basename:o,navigator:s,static:i,future:sl({v7_relativeSplatPath:!1},l)})),[o,l,s,i]);"string"==typeof a&&(a=Ei(a));let{pathname:d="/",search:u="",hash:m="",state:h=null,key:p="default"}=a,x=ze.useMemo((()=>{let e=Wi(d,o);return null==e?null:{location:{pathname:e,search:u,hash:m,state:h,key:p},navigationType:n}}),[o,d,u,m,h,p,n]);return null==x?null:ze.createElement(ol.Provider,{value:c},ze.createElement(cl.Provider,{children:r,value:x}))}function Al(e){let{children:t,location:r}=e;return vl(El(t),r)}function El(e,t){void 0===t&&(t=[]);let r=[];return ze.Children.forEach(e,((e,a)=>{if(!ze.isValidElement(e))return;let n=[...t,a];if(e.type===ze.Fragment)return void r.push.apply(r,El(e.props.children,n));e.type!==Ol&&Ci(!1),e.props.index&&e.props.children&&Ci(!1);let s={id:e.props.id||n.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=El(e.props.children,n)),r.push(s)})),r}
/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Dl.apply(this,arguments)}function Ml(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map((e=>[r,e])):[[r,a]])}),[]))}new Promise((()=>{}));const zl=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(die){}const Rl=Fe.startTransition;function Il(e){let{basename:t,children:r,future:a,window:n}=e,s=ze.useRef();null==s.current&&(s.current=Si({window:n,v5Compat:!0}));let i=s.current,[l,o]=ze.useState({action:i.action,location:i.location}),{v7_startTransition:c}=a||{},d=ze.useCallback((e=>{c&&Rl?Rl((()=>o(e))):o(e)}),[o,c]);return ze.useLayoutEffect((()=>i.listen(d)),[i,d]),ze.createElement(Pl,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:a})}const Fl="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Bl=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ll=ze.forwardRef((function(e,t){let r,{onClick:a,relative:n,reloadDocument:s,replace:i,state:l,target:o,to:c,preventScrollReset:d,viewTransition:u}=e,m=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,zl),{basename:h}=ze.useContext(ol),p=!1;if("string"==typeof c&&Bl.test(c)&&(r=c,Fl))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=Wi(t.pathname,h);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:p=!0}catch(die){}let x=function(e,t){let{relative:r}=void 0===t?{}:t;ml()||Ci(!1);let{basename:a,navigator:n}=ze.useContext(ol),{hash:s,pathname:i,search:l}=yl(e,{relative:r}),o=i;return"/"!==a&&(o="/"===i?a:Ji([a,i])),n.createHref({pathname:o,search:l,hash:s})}(c,{relative:n}),g=function(e,t){let{target:r,replace:a,state:n,preventScrollReset:s,relative:i,viewTransition:l}=void 0===t?{}:t,o=xl(),c=hl(),d=yl(e,{relative:i});return ze.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let r=void 0!==a?a:Ai(c)===Ai(d);o(e,{replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l})}}),[c,o,d,a,n,r,e,s,i,l])}(c,{replace:i,state:l,target:o,preventScrollReset:d,relative:n,viewTransition:u});return ze.createElement("a",Dl({},m,{href:r||x,onClick:p||s?a:function(e){a&&a(e),e.defaultPrevented||g(e)},ref:t,target:o}))}));var ql,$l,Kl,Ul;function Hl(e){let t=ze.useRef(Ml(e)),r=ze.useRef(!1),a=hl(),n=ze.useMemo((()=>function(e,t){let r=Ml(e);return t&&t.forEach(((e,a)=>{r.has(a)||t.getAll(a).forEach((e=>{r.append(a,e)}))})),r}(a.search,r.current?null:t.current)),[a.search]),s=xl(),i=ze.useCallback(((e,t)=>{const a=Ml("function"==typeof e?e(n):e);r.current=!0,s("?"+a,t)}),[s,n]);return[n,i]}($l=ql||(ql={})).UseScrollRestoration="useScrollRestoration",$l.UseSubmit="useSubmit",$l.UseSubmitFetcher="useSubmitFetcher",$l.UseFetcher="useFetcher",$l.useViewTransitionState="useViewTransitionState",(Ul=Kl||(Kl={})).UseFetcher="useFetcher",Ul.UseFetchers="useFetchers",Ul.UseScrollRestoration="useScrollRestoration";const Yl=ze.createContext({theme:"system",setTheme:()=>null});function Vl({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme",...a}){const[n,s]=ze.useState((()=>localStorage.getItem(r)||t));ze.useEffect((()=>{const e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"!==n)e.classList.add(n);else{const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(t)}}),[n]);const l={theme:n,setTheme:e=>{localStorage.setItem(r,e),s(e)}};return i.jsx(Yl.Provider,{...a,value:l,children:e})}const Gl=()=>{const e=ze.useContext(Yl);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e},Wl=Ye("https://kjmkgpcbrvbiykytyuet.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtqbWtncGNicnZiaXlreXR5dWV0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyNjQxMDYsImV4cCI6MjA2Mzg0MDEwNn0.nwFRWAMNcrsNj3k3uIgfbO5jLdAvboOYKDWdqwkH0D0"),Ql=ze.createContext(void 0),Xl=()=>{Object.keys(localStorage).forEach((e=>{(e.startsWith("supabase.auth.")||e.includes("sb-"))&&localStorage.removeItem(e)})),Object.keys(sessionStorage||{}).forEach((e=>{(e.startsWith("supabase.auth.")||e.includes("sb-"))&&sessionStorage.removeItem(e)}))};function Zl({children:e}){const[t,r]=ze.useState(null),[a,n]=ze.useState(null),[s,l]=ze.useState(null),[o,c]=ze.useState(!0),d=ze.useCallback((async e=>{try{const{data:t,error:r}=await Wl.from("profiles").select("*").eq("id",e).single();return r?null:t}catch(t){return null}}),[]);ze.useEffect((()=>{let e=!0;const{data:{subscription:t}}=Wl.auth.onAuthStateChange((async(t,a)=>{e&&(n(a),r((null==a?void 0:a.user)??null),(null==a?void 0:a.user)?setTimeout((async()=>{if(!e)return;const t=await d(a.user.id);e&&l(t)}),0):l(null),c(!1))}));return(async()=>{try{const{data:{session:t},error:a}=await Wl.auth.getSession();if(a&&Xl(),e){if(n(t),r((null==t?void 0:t.user)??null),null==t?void 0:t.user){const r=await d(t.user.id);e&&l(r)}c(!1)}}catch(t){e&&c(!1)}})(),()=>{e=!1,t.unsubscribe()}}),[d]);const u={user:t,session:a,userProfile:s,loading:o,signIn:async(e,t)=>{try{Xl();try{await Wl.auth.signOut({scope:"global"})}catch(r){}const{data:a,error:n}=await Wl.auth.signInWithPassword({email:e,password:t});if(n)throw n;a.user&&setTimeout((()=>{window.location.href="/dashboard"}),100)}catch(a){throw a}},signUp:async e=>{try{Xl();const{error:t}=await Wl.auth.signUp({email:e.email,password:e.password,options:{data:{full_name:e.fullName,phone:e.phone,tc_kimlik:e.tcKimlik,company:e.company||"",address:e.address||""}}});if(t)throw t}catch(t){throw t}},signOut:async()=>{try{Xl();try{await Wl.auth.signOut({scope:"global"})}catch(e){}window.location.href="/"}catch(t){window.location.href="/"}}};return i.jsx(Ql.Provider,{value:u,children:e})}function Jl(){const e=ze.useContext(Ql);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const eo=ze.createContext(null),to=({children:e})=>{const t=(()=>{const{userProfile:e}=Jl(),{toast:t}=at(),[r,a]=ze.useState(0),n=ze.useRef(null),s=ze.useRef(!1),[i,l]=ze.useState(!1),[o,c]=ze.useState(null);ze.useEffect((()=>{if("grafiker"===(null==e?void 0:e.role)){const e=new Audio;e.preload="auto",e.volume=1,e.crossOrigin="anonymous",e.oncanplaythrough=()=>{l(!0),c(null)},e.onerror=()=>{l(!1),c("Ses dosyası yüklenemedi")},e.onloadstart=()=>{c(null)},n.current=e,e.src="https://cors-bypass.redexdatabase.workers.dev/https://github.com/xXMrGadgetXx/Data/raw/refs/heads/master/ttsMP3.com_VoiceText_2025-9-15_14-8-1.mp3",e.load()}return()=>{n.current&&(n.current.pause(),n.current=null)}}),[null==e?void 0:e.role]);const d=async()=>{if("grafiker"===(null==e?void 0:e.role))if(n.current&&i)try{n.current.currentTime=0,await n.current.play()}catch(t){"Notification"in window&&"granted"===Notification.permission&&new Notification("🎉 Yeni Sipariş!",{body:"Sistem üzerinde yeni bir sipariş oluşturuldu.",icon:"/favicon.ico",tag:"new-order",requireInteraction:!1})}else"grafiker"===(null==e?void 0:e.role)&&"Notification"in window&&"granted"===Notification.permission&&new Notification("🎉 Yeni Sipariş!",{body:"Sistem üzerinde yeni bir sipariş oluşturuldu.",icon:"/favicon.ico",tag:"new-order",requireInteraction:!1})};return ze.useEffect((()=>{"grafiker"!==(null==e?void 0:e.role)||s.current||(async()=>{try{const{count:e}=await Wl.from("orders").select("*",{count:"exact",head:!0});a(e||0),s.current=!0}catch(e){}})()}),[null==e?void 0:e.role]),ze.useEffect((()=>{if("grafiker"!==(null==e?void 0:e.role)||!s.current)return;const n=setInterval((async()=>{try{const{count:e}=await Wl.from("orders").select("*",{count:"exact",head:!0});if(e&&e>r){const n=e-r;await d(),t({title:"🎉 Yeni Sipariş!",description:1===n?"Sistem üzerinde yeni bir sipariş oluşturuldu.":`Sistem üzerinde ${n} yeni sipariş oluşturuldu.`,duration:5e3}),a(e)}}catch(e){}}),1e4);return()=>clearInterval(n)}),[null==e?void 0:e.role,r,t]),ze.useEffect((()=>{if("grafiker"!==(null==e?void 0:e.role))return;const r=Wl.channel("grafiker_order_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},(async e=>{var r;await d(),t({title:"🎉 Yeni Sipariş Geldi!",description:`Sipariş #${(null==(r=e.new)?void 0:r.order_number)||"Yeni"} oluşturuldu.`,duration:8e3}),a((e=>e+1))})).subscribe();return()=>{r.unsubscribe()}}),[null==e?void 0:e.role,t]),ze.useEffect((()=>{"grafiker"===(null==e?void 0:e.role)&&"Notification"in window&&("default"===Notification.permission?Notification.requestPermission().then((e=>{t("granted"===e?{title:"🔔 Bildirimler Aktif",description:"Grafiker sipariş bildirimleri aktif edildi.",duration:3e3}:{title:"⚠️ Bildirim İzni",description:"Tarayıcı bildirimleri reddedildi. Sadece ses bildirimleri aktif.",duration:3e3})})):"granted"===Notification.permission&&t({title:"🔔 Grafiker Bildirimleri",description:"Yeni sipariş bildirimleri aktif.",duration:2e3}))}),[null==e?void 0:e.role,t]),{playNotificationSound:d,lastOrderCount:r,audioReady:i,audioError:o,isGrafiker:"grafiker"===(null==e?void 0:e.role)}})();return i.jsx(eo.Provider,{value:t,children:e})},ro=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,className:xs("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})));ro.displayName="Card";const ao=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,className:xs("flex flex-col space-y-1.5 p-6",e),...t})));ao.displayName="CardHeader";const no=ze.forwardRef((({className:e,...t},r)=>i.jsx("h3",{ref:r,className:xs("text-2xl font-semibold leading-none tracking-tight",e),...t})));no.displayName="CardTitle";const so=ze.forwardRef((({className:e,...t},r)=>i.jsx("p",{ref:r,className:xs("text-sm text-muted-foreground",e),...t})));so.displayName="CardDescription";const io=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,className:xs("p-6 pt-0",e),...t})));io.displayName="CardContent";ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,className:xs("flex items-center p-6 pt-0",e),...t}))).displayName="CardFooter";const lo=Gt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),oo=ze.forwardRef((({className:e,variant:t,size:r,asChild:a=!1,...n},s)=>{const l=a?C:"button";return i.jsx(l,{className:xs(lo({variant:t,size:r,className:e})),ref:s,...n})}));oo.displayName="Button";const co=ze.forwardRef((({className:e,type:t,...r},a)=>i.jsx("input",{type:t,className:xs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r})));co.displayName="Input";var uo=ze.forwardRef(((e,t)=>i.jsx(o.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));uo.displayName="Label";var mo=uo;const ho=Gt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),po=ze.forwardRef((({className:e,...t},r)=>i.jsx(mo,{ref:r,className:xs(ho(),e),...t})));po.displayName=mo.displayName;var xo="horizontal",go=["horizontal","vertical"],fo=ze.forwardRef(((e,t)=>{const{decorative:r,orientation:a=xo,...n}=e,s=function(e){return go.includes(e)}(a)?a:xo,l=r?{role:"none"}:{"aria-orientation":"vertical"===s?s:void 0,role:"separator"};return i.jsx(o.div,{"data-orientation":s,...l,...n,ref:t})}));fo.displayName="Separator";var yo=fo;const vo=ze.forwardRef((({className:e,orientation:t="horizontal",decorative:r=!0,...a},n)=>i.jsx(yo,{ref:n,decorative:r,orientation:t,className:xs("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a})));function bo(){const{theme:e,setTheme:t}=Gl();return i.jsxs(oo,{variant:"ghost",size:"icon",onClick:()=>t("light"===e?"dark":"light"),className:"h-10 w-10",children:[i.jsx(Xa,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx(fa,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),i.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}vo.displayName=yo.displayName;const jo=()=>{const[e,t]=ze.useState(!0),{user:r,loading:a}=Jl(),n=xl();at(),ze.useEffect((()=>{r&&!a&&n("/dashboard",{replace:!0})}),[r,a,n]);return a?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(hr,{className:"h-12 w-12 text-blue-600 dark:text-blue-400 mx-auto mb-4 animate-spin"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Yükleniyor..."})]})}):r?null:i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:[i.jsx("div",{className:"fixed top-4 right-4 z-50",children:i.jsx(bo,{})}),i.jsxs("div",{className:"w-full max-w-7xl grid lg:grid-cols-2 gap-8 items-center min-h-[calc(100vh-2rem)]",children:[i.jsxs("div",{className:"hidden lg:flex flex-col justify-center space-y-8",children:[i.jsxs("div",{className:"text-center lg:text-left",children:[i.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-3 mb-6",children:[i.jsx("div",{className:"p-3 bg-blue-600 dark:bg-blue-500 rounded-xl shadow-lg",children:i.jsx(hr,{className:"h-8 w-8 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent",children:"BALTACI KURUMSAL"})]}),i.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Baltacı Kurumsal, işletmeleriniz için toplu ürün alım ve satışı için özel olarak tasarlanmış bir muhasebe sistemidir."})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4 p-6 bg-white/80 dark:bg-gray-800/80 rounded-xl backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:[i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(ur,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Kurumsal Çözümler"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"İşletmeniz için özel muhasebe sistemleri"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 p-6 bg-white/80 dark:bg-gray-800/80 rounded-xl backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:[i.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(hn,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Uzman Ekip"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Deneyimli muhasebeciler ile güvenli hizmet"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 p-6 bg-white/80 dark:bg-gray-800/80 rounded-xl backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 shadow-lg",children:[i.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:i.jsx(hr,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Dijital Çözümler"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Modern teknoloji ile hızlı işlemler"})]})]})]})]}),i.jsx("div",{className:"w-full max-w-md mx-auto lg:max-w-lg",children:i.jsxs(ro,{className:"shadow-2xl border-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-md",children:[i.jsxs(ao,{className:"text-center pb-6",children:[i.jsx("div",{className:"flex justify-center mb-4 lg:hidden",children:i.jsx("div",{className:"p-3 bg-blue-600 dark:bg-blue-500 rounded-xl shadow-lg",children:i.jsx(hr,{className:"h-8 w-8 text-white"})})}),i.jsx(no,{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:e?"Giriş Yap":"Hesap Oluştur"}),i.jsx(so,{className:"text-gray-600 dark:text-gray-400",children:e?"BALTACI KURUMSAL hesabınıza giriş yapın":"BALTACI KURUMSAL'ye katılın"})]}),i.jsxs(io,{className:"space-y-6",children:[e?i.jsx(ko,{}):i.jsx(wo,{}),i.jsx(vo,{className:"my-6"}),i.jsx("div",{className:"text-center",children:i.jsx(oo,{variant:"ghost",onClick:()=>{t(!e)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:e?"Hesabınız yok mu? Kayıt olun":"Zaten hesabınız var mı? Giriş yapın"})})]})]})})]})]})},ko=()=>{const[e,t]=ze.useState(""),[r,a]=ze.useState(""),[n,s]=ze.useState(!1),{signIn:l}=Jl(),{toast:o}=at();return i.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e&&r){s(!0);try{await l(e,r),o({title:"Başarılı",description:"Giriş yapıldı, yönlendiriliyorsunuz..."})}catch(a){o({title:"Giriş Hatası",description:a.message||"Giriş yapılırken bir hata oluştu",variant:"destructive"})}finally{s(!1)}}else o({title:"Hata",description:"Lütfen tüm alanları doldurun",variant:"destructive"})},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"email",className:"text-gray-700 dark:text-gray-300",children:"E-posta"}),i.jsxs("div",{className:"relative",children:[i.jsx(ua,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),i.jsx(co,{id:"email",type:"email",placeholder:"ornek@email.com",value:e,onChange:e=>t(e.target.value),className:"pl-10 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500",disabled:n,autoComplete:"email"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"password",className:"text-gray-700 dark:text-gray-300",children:"Şifre"}),i.jsxs("div",{className:"relative",children:[i.jsx(ca,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),i.jsx(co,{id:"password",type:"password",placeholder:"••••••••",value:r,onChange:e=>a(e.target.value),className:"pl-10 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500",disabled:n,autoComplete:"current-password"})]})]}),i.jsx(oo,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white py-2.5",disabled:n,children:n?"Giriş yapılıyor...":"Giriş Yap"})]})},wo=()=>{const[e,t]=ze.useState({fullName:"",email:"",password:"",phone:"",tcKimlik:"",company:"",address:""}),[r,a]=ze.useState(!1),{signUp:n}=Jl(),{toast:s}=at(),l=e=>{t((t=>({...t,[e.target.name]:e.target.value})))};return i.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2 space-y-4",children:i.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e.fullName&&e.email&&e.password&&e.phone&&e.tcKimlik){a(!0);try{await n(e),s({title:"Başarılı",description:"Hesap oluşturuldu, giriş yapabilirsiniz."})}catch(r){s({title:"Kayıt Hatası",description:r.message||"Hesap oluşturulurken bir hata oluştu",variant:"destructive"})}finally{a(!1)}}else s({title:"Hata",description:"Lütfen zorunlu alanları doldurun",variant:"destructive"})},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"fullName",className:"text-gray-700 dark:text-gray-300",children:"Ad Soyad *"}),i.jsxs("div",{className:"relative",children:[i.jsx(mn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),i.jsx(co,{id:"fullName",name:"fullName",type:"text",placeholder:"Adınız Soyadınız",value:e.fullName,onChange:l,className:"pl-10 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500",disabled:r,autoComplete:"name"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"email",className:"text-gray-700 dark:text-gray-300",children:"E-Posta *"}),i.jsxs("div",{className:"relative",children:[i.jsx(ua,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),i.jsx(co,{id:"email",name:"email",type:"email",placeholder:"ornek@email.com",value:e.email,onChange:l,className:"pl-10 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500",disabled:r,autoComplete:"email"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"password",className:"text-gray-700 dark:text-gray-300",children:"Şifre *"}),i.jsxs("div",{className:"relative",children:[i.jsx(ca,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),i.jsx(co,{id:"password",name:"password",type:"password",placeholder:"••••••••",value:e.password,onChange:l,className:"pl-10 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500",disabled:r,autoComplete:"new-password"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"phone",className:"text-gray-700 dark:text-gray-300",children:"Telefon *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ta,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),i.jsx(co,{id:"phone",name:"phone",type:"tel",placeholder:"0555 123 45 67",value:e.phone,onChange:l,className:"pl-10 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500",disabled:r,autoComplete:"tel"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"tcKimlik",className:"text-gray-700 dark:text-gray-300",children:"TC Kimlik *"}),i.jsxs("div",{className:"relative",children:[i.jsx(ra,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),i.jsx(co,{id:"tcKimlik",name:"tcKimlik",type:"text",placeholder:"12345678901",value:e.tcKimlik,onChange:l,className:"pl-10 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500",disabled:r})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"company",className:"text-gray-700 dark:text-gray-300",children:"Firma İsmi (Opsiyonel)"}),i.jsxs("div",{className:"relative",children:[i.jsx(ur,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),i.jsx(co,{id:"company",name:"company",type:"text",placeholder:"Firma adınız",value:e.company,onChange:l,className:"pl-10 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500",disabled:r,autoComplete:"organization"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"address",className:"text-gray-700 dark:text-gray-300",children:"Fatura Adresi (Opsiyonel)"}),i.jsxs("div",{className:"relative",children:[i.jsx(ma,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),i.jsx(co,{id:"address",name:"address",type:"text",placeholder:"Fatura adresiniz",value:e.address,onChange:l,className:"pl-10 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 focus:border-blue-500 focus:ring-blue-500",disabled:r,autoComplete:"street-address"})]})]}),i.jsx(oo,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white py-2.5 mt-6",disabled:r,children:r?"Hesap oluşturuluyor...":"Hesap Oluştur"})]})})},No=()=>{const{user:e,userProfile:t,loading:r}=Jl(),a=xl();return ze.useEffect((()=>{if(r)return;if(!e)return void a("/",{replace:!0});if(!t)return;const n=t.role;a("yonetici"===n||"muhasebeci"===n||"reklamci"===n?"/admin/dashboard":"toptanci"===n||"grafiker"===n?"/customer/dashboard":"/",{replace:!0})}),[e,t,r,a]),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-12 w-12 text-blue-600 dark:text-blue-400 mx-auto mb-4 animate-spin rounded-full border-4 border-blue-200 border-t-blue-600 dark:border-gray-600 dark:border-t-blue-400"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Yönlendiriliyor..."})]})})},_o=()=>{const e=hl();return ze.useEffect((()=>{}),[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},So=Gt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",primary:"border-transparent bg-blue-600 text-white hover:bg-blue-700",success:"border-transparent bg-green-600 text-white hover:bg-green-700"}},defaultVariants:{variant:"default"}});function Co({className:e,variant:t,...r}){return i.jsx("div",{className:xs(So({variant:t}),e),...r})}var To="Tabs",[Oo,Po]=n(To,[T]),Ao=T(),[Eo,Do]=Oo(To),Mo=ze.forwardRef(((e,t)=>{const{__scopeTabs:r,value:a,onValueChange:n,defaultValue:s,orientation:l="horizontal",dir:c,activationMode:u="automatic",...m}=e,h=O(c),[p,x]=d({prop:a,onChange:n,defaultProp:s});return i.jsx(Eo,{scope:r,baseId:_(),value:p,onValueChange:x,orientation:l,dir:h,activationMode:u,children:i.jsx(o.div,{dir:h,"data-orientation":l,...m,ref:t})})}));Mo.displayName=To;var zo="TabsList",Ro=ze.forwardRef(((e,t)=>{const{__scopeTabs:r,loop:a=!0,...n}=e,s=Do(zo,r),l=Ao(r);return i.jsx(P,{asChild:!0,...l,orientation:s.orientation,dir:s.dir,loop:a,children:i.jsx(o.div,{role:"tablist","aria-orientation":s.orientation,...n,ref:t})})}));Ro.displayName=zo;var Io="TabsTrigger",Fo=ze.forwardRef(((e,t)=>{const{__scopeTabs:r,value:a,disabled:n=!1,...s}=e,l=Do(Io,r),c=Ao(r),d=qo(l.baseId,a),u=$o(l.baseId,a),m=a===l.value;return i.jsx(A,{asChild:!0,...c,focusable:!n,active:m,children:i.jsx(o.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:d,...s,ref:t,onMouseDown:h(e.onMouseDown,(e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)})),onKeyDown:h(e.onKeyDown,(e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)})),onFocus:h(e.onFocus,(()=>{const e="manual"!==l.activationMode;m||n||!e||l.onValueChange(a)}))})})}));Fo.displayName=Io;var Bo="TabsContent",Lo=ze.forwardRef(((e,t)=>{const{__scopeTabs:r,value:a,forceMount:n,children:s,...l}=e,c=Do(Bo,r),d=qo(c.baseId,a),m=$o(c.baseId,a),h=a===c.value,p=ze.useRef(h);return ze.useEffect((()=>{const e=requestAnimationFrame((()=>p.current=!1));return()=>cancelAnimationFrame(e)}),[]),i.jsx(u,{present:n||h,children:({present:r})=>i.jsx(o.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:m,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:r&&s})})}));function qo(e,t){return`${e}-trigger-${t}`}function $o(e,t){return`${e}-content-${t}`}Lo.displayName=Bo;var Ko=Ro,Uo=Fo,Ho=Lo;const Yo=Mo,Vo=ze.forwardRef((({className:e,...t},r)=>i.jsx(Ko,{ref:r,className:xs("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t})));Vo.displayName=Ko.displayName;const Go=ze.forwardRef((({className:e,...t},r)=>i.jsx(Uo,{ref:r,className:xs("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t})));Go.displayName=Uo.displayName;const Wo=ze.forwardRef((({className:e,...t},r)=>i.jsx(Ho,{ref:r,className:xs("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})));Wo.displayName=Ho.displayName;const Qo=()=>{const{user:e,userProfile:t}=Jl(),r=(()=>{const[e,t]=ze.useState(!document.hidden);return ze.useEffect((()=>{const e=()=>{t(!document.hidden)};return document.addEventListener("visibilitychange",e),window.addEventListener("focus",(()=>t(!0))),window.addEventListener("blur",(()=>t(!1))),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("focus",(()=>t(!0))),window.removeEventListener("blur",(()=>t(!1)))}}),[]),e})(),{playNotificationSound:a,initializeAudio:n}=(()=>{const e=ze.useRef(null),t=ze.useCallback((()=>{e.current||(e.current=new Audio("https://cdn.pixabay.com/download/audio/2025/07/09/audio_121db7b43f.mp3?filename=notification-sound-effect-372475.mp3"),e.current.preload="auto",e.current.volume=.7)}),[]);return{playNotificationSound:ze.useCallback((async()=>{try{e.current||t(),e.current&&(e.current.currentTime=0,await e.current.play())}catch(r){}}),[t]),setVolume:ze.useCallback((t=>{e.current&&(e.current.volume=Math.max(0,Math.min(1,t)))}),[]),initializeAudio:t}})(),[s,i]=ze.useState([]),[l,o]=ze.useState(null),[c,d]=ze.useState([]),[u,m]=ze.useState([]),[h,p]=ze.useState(!0),[x,g]=ze.useState(!1),f=ze.useCallback((async()=>{if(e&&t&&t.role)try{const{data:e,error:r}=await Wl.from("chat_rooms").select("\n          *,\n          chat_room_permissions!inner(\n            role,\n            can_read,\n            can_write\n          )\n        ").eq("is_active",!0).eq("chat_room_permissions.role",t.role).eq("chat_room_permissions.can_read",!0).order("created_at");if(r)throw r;const a=(e||[]).map((e=>({id:e.id,name:e.name,slug:e.slug,description:e.description,room_type:e.room_type,is_active:e.is_active,created_at:e.created_at,created_by:e.created_by,updated_at:e.updated_at})));i(a)}catch(r){rt({title:"Hata",description:"Odalar yüklenirken bir hata oluştu",variant:"destructive"})}}),[e,t]),y=ze.useCallback((async t=>{if(e)try{const{data:e,error:r}=await Wl.from("chat_messages").select("*").eq("room_id",t).eq("is_deleted",!1).order("created_at",{ascending:!0}).limit(100);if(r)throw r;const a=[...new Set((e||[]).map((e=>e.user_id)))],{data:n,error:s}=await Wl.from("profiles").select("id, full_name, role").in("id",a);if(s)throw s;const i=(n||[]).reduce(((e,t)=>(e[t.id]=t,e)),{}),l=(e||[]).map((e=>{const t=i[e.user_id]||{full_name:"Bilinmeyen Kullanıcı",role:"toptanci"};return{...e,message_type:["text","image","file","system"].includes(e.message_type)?e.message_type:"text",user_name:t.full_name,user_role:t.role,reply_to_message:void 0}}));d(l)}catch(r){rt({title:"Hata",description:"Mesajlar yüklenirken bir hata oluştu",variant:"destructive"})}}),[e]),v=ze.useCallback((async()=>{if(e)try{const{data:e,error:t}=await Wl.from("chat_online_users").select("*").gte("last_activity",new Date(Date.now()-3e5).toISOString());if(t)throw t;const r=[...new Set((e||[]).map((e=>e.user_id)))],{data:a,error:n}=await Wl.from("profiles").select("id, full_name, role").in("id",r);if(n)throw n;const s=(a||[]).reduce(((e,t)=>(e[t.id]=t,e)),{}),i=(e||[]).map((e=>{const t=s[e.user_id]||{full_name:"Bilinmeyen Kullanıcı",role:"toptanci"};return{...e,status:["online","away","busy","offline"].includes(e.status)?e.status:"offline",user_name:t.full_name,user_role:t.role}}));m(i)}catch(t){}}),[e]),b=ze.useCallback((async(r,a="text",n,s)=>{if(!e||!l||!t)return!1;const i=t.role||"toptanci";if(!_(l.room_type,i))return rt({title:"Yetki Hatası",description:"Bu odaya mesaj yazma yetkiniz bulunmamaktadır",variant:"destructive"}),!1;try{const t={room_id:l.id,user_id:e.id,content:r,message_type:a,file_url:null==n?void 0:n.url,file_name:null==n?void 0:n.name,file_size:null==n?void 0:n.size,file_type:null==n?void 0:n.type,reply_to_message_id:s},{data:i,error:o}=await Wl.from("chat_messages").insert([t]).select().single();if(o)throw o;return!0}catch(o){return rt({title:"Hata",description:"Mesaj gönderilirken bir hata oluştu",variant:"destructive"}),!1}}),[e,l,t]),j=ze.useCallback((async(t,r)=>{if(!e)return!1;try{const{error:a}=await Wl.from("chat_messages").update({content:r,is_edited:!0,edited_at:(new Date).toISOString()}).eq("id",t).eq("user_id",e.id);if(a)throw a;return!0}catch(a){return rt({title:"Hata",description:"Mesaj düzenlenirken bir hata oluştu",variant:"destructive"}),!1}}),[e]),k=ze.useCallback((async r=>{if(!e||!t)return!1;const a=c.find((e=>e.id===r));if(!("yonetici"===t.role||(null==a?void 0:a.user_id)===e.id))return rt({title:"Yetki Hatası",description:"Bu mesajı silme yetkiniz bulunmamaktadır",variant:"destructive"}),!1;try{const{data:e,error:t}=await Wl.functions.invoke("delete-message",{body:{messageId:r}});if(t)throw t;if(null==e?void 0:e.error)throw new Error(e.error);return!0}catch(n){return rt({title:"Hata",description:"Mesaj silinirken bir hata oluştu",variant:"destructive"}),!1}}),[e,t,c]),w=ze.useCallback((async(t="online")=>{if(e)try{const{error:r}=await Wl.from("chat_online_users").upsert({user_id:e.id,last_activity:(new Date).toISOString(),current_room_id:null==l?void 0:l.id,status:t},{onConflict:"user_id"});if(r)throw r}catch(r){}}),[e,l]),N=ze.useCallback((async t=>{e&&(o(t),await y(t.id),await w("online"))}),[e,y,w]),_=(e,t)=>{switch(e){case"announcement":return"yonetici"===t;case"design":return["yonetici","toptanci","grafiker"].includes(t);case"general":return!0;default:return!1}};return ze.useEffect((()=>{e&&t&&(f(),v(),w("online"),p(!1))}),[e,t,f,v,w]),ze.useEffect((()=>{const t=()=>{e&&w("offline")};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t),e&&w("offline")}}),[e,w]),ze.useEffect((()=>{if(!e)return;const t=setInterval((()=>{w("online")}),3e4);return()=>clearInterval(t)}),[e,w]),ze.useEffect((()=>{if(!e)return;const t=Wl.channel(`chat_rooms_${e.id}_${Date.now()}`).on("postgres_changes",{event:"*",schema:"public",table:"chat_rooms"},(e=>{f()})).subscribe((e=>{}));return()=>{t.unsubscribe()}}),[e,f]),ze.useEffect((()=>{if(!e||!l)return;const t=Wl.channel(`messages_${l.id}_${e.id}_${Date.now()}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`room_id=eq.${l.id}`},(async t=>{const n=t.new;if(n)try{const{data:t,error:s}=await Wl.from("profiles").select("id, full_name, role").eq("id",n.user_id).single();if(!s&&t){const s={...n,message_type:["text","image","file","system"].includes(n.message_type)?n.message_type:"text",user_name:t.full_name,user_role:t.role,reply_to_message:void 0};d((t=>t.some((e=>e.id===n.id))?t:(n.user_id!==(null==e?void 0:e.id)&&(r||a()),[...t,s].sort(((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())))))}}catch(s){y(l.id)}})).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chat_messages",filter:`room_id=eq.${l.id}`},(e=>{const t=e.new;t&&(t.is_deleted?d((e=>e.filter((e=>e.id!==t.id)))):y(l.id))})).subscribe((e=>{"SUBSCRIBED"===e&&g(!0)})),n=Wl.channel(`online_users_${e.id}_${Date.now()}`).on("postgres_changes",{event:"*",schema:"public",table:"chat_online_users"},(e=>{v()})).subscribe((e=>{}));return()=>{g(!1),t.unsubscribe(),n.unsubscribe()}}),[e,null==l?void 0:l.id,v]),ze.useEffect((()=>{e&&w(r?"online":"away")}),[r,e,w]),ze.useEffect((()=>{n()}),[n]),{rooms:s,currentRoom:l,messages:c,onlineUsers:u,isLoading:h,isConnected:x,joinRoom:N,sendMessage:b,editMessage:j,deleteMessage:k,updateOnlineStatus:w,checkWritePermission:e=>_(e,(null==t?void 0:t.role)||"toptanci"),refresh:()=>{f(),l&&y(l.id),v()}}},Xo=e=>{const{user:t}=Jl(),[r,a]=ze.useState([]),n=ze.useCallback((async()=>{var r;if(t&&e)try{const a=Wl.channel(`typing:${e}`);await a.send({type:"broadcast",event:"typing_start",payload:{userId:t.id,userName:(null==(r=t.user_metadata)?void 0:r.full_name)||t.email||"Anonim"}})}catch(a){}}),[t,e]),s=ze.useCallback((async()=>{var r;if(t&&e)try{const a=Wl.channel(`typing:${e}`);await a.send({type:"broadcast",event:"typing_stop",payload:{userId:t.id,userName:(null==(r=t.user_metadata)?void 0:r.full_name)||t.email||"Anonim"}})}catch(a){}}),[t,e]);return ze.useEffect((()=>{if(!e)return;const r=Wl.channel(`typing:${e}`).on("broadcast",{event:"typing_start"},(e=>{const{userId:r,userName:n}=e.payload;r!==(null==t?void 0:t.id)&&a((e=>e.find((e=>e.id===r))?e:[...e,{id:r,name:n}]))})).on("broadcast",{event:"typing_stop"},(e=>{const{userId:r}=e.payload;r!==(null==t?void 0:t.id)&&a((e=>e.filter((e=>e.id!==r))))})).subscribe();return()=>{r.unsubscribe()}}),[e,null==t?void 0:t.id]),ze.useEffect((()=>{if(0===r.length)return;const e=setTimeout((()=>{a([])}),3e3);return()=>clearTimeout(e)}),[r]),{typingUsers:r,setTyping:async e=>{e?await n():await s()},stopTyping:s,startTyping:n}};var Zo="ScrollArea",[Jo,ec]=n(Zo),[tc,rc]=Jo(Zo),ac=ze.forwardRef(((e,t)=>{const{__scopeScrollArea:r,type:a="hover",dir:n,scrollHideDelay:l=600,...c}=e,[d,u]=ze.useState(null),[m,h]=ze.useState(null),[p,x]=ze.useState(null),[g,f]=ze.useState(null),[y,v]=ze.useState(null),[b,j]=ze.useState(0),[k,w]=ze.useState(0),[N,_]=ze.useState(!1),[S,C]=ze.useState(!1),T=s(t,(e=>u(e))),P=O(n);return i.jsx(tc,{scope:r,type:a,dir:P,scrollHideDelay:l,scrollArea:d,viewport:m,onViewportChange:h,content:p,onContentChange:x,scrollbarX:g,onScrollbarXChange:f,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:j,onCornerHeightChange:w,children:i.jsx(o.div,{dir:P,...c,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":k+"px",...e.style}})})}));ac.displayName=Zo;var nc="ScrollAreaViewport",sc=ze.forwardRef(((e,t)=>{const{__scopeScrollArea:r,children:a,asChild:n,nonce:l,...c}=e,d=rc(nc,r),u=ze.useRef(null),m=s(t,u,d.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"\n[data-radix-scroll-area-viewport] {\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  -webkit-overflow-scrolling: touch;\n}\n[data-radix-scroll-area-viewport]::-webkit-scrollbar {\n  display: none;\n}\n:where([data-radix-scroll-area-viewport]) {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n:where([data-radix-scroll-area-content]) {\n  flex-grow: 1;\n}\n"},nonce:l}),i.jsx(o.div,{"data-radix-scroll-area-viewport":"",...c,asChild:n,ref:m,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...e.style},children:Ec({asChild:n,children:a},(e=>i.jsx("div",{"data-radix-scroll-area-content":"",ref:d.onContentChange,style:{minWidth:d.scrollbarXEnabled?"fit-content":void 0},children:e})))})]})}));sc.displayName=nc;var ic="ScrollAreaScrollbar",lc=ze.forwardRef(((e,t)=>{const{forceMount:r,...a}=e,n=rc(ic,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:l}=n,o="horizontal"===e.orientation;return ze.useEffect((()=>(o?s(!0):l(!0),()=>{o?s(!1):l(!1)})),[o,s,l]),"hover"===n.type?i.jsx(oc,{...a,ref:t,forceMount:r}):"scroll"===n.type?i.jsx(cc,{...a,ref:t,forceMount:r}):"auto"===n.type?i.jsx(dc,{...a,ref:t,forceMount:r}):"always"===n.type?i.jsx(uc,{...a,ref:t}):null}));lc.displayName=ic;var oc=ze.forwardRef(((e,t)=>{const{forceMount:r,...a}=e,n=rc(ic,e.__scopeScrollArea),[s,l]=ze.useState(!1);return ze.useEffect((()=>{const e=n.scrollArea;let t=0;if(e){const r=()=>{window.clearTimeout(t),l(!0)},a=()=>{t=window.setTimeout((()=>l(!1)),n.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",a)}}}),[n.scrollArea,n.scrollHideDelay]),i.jsx(u,{present:r||s,children:i.jsx(dc,{"data-state":s?"visible":"hidden",...a,ref:t})})})),cc=ze.forwardRef(((e,t)=>{const{forceMount:r,...a}=e,n=rc(ic,e.__scopeScrollArea),s="horizontal"===e.orientation,l=Pc((()=>c("SCROLL_END")),100),[o,c]=(d="hidden",m={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},ze.useReducer(((e,t)=>m[e][t]??e),d));var d,m;return ze.useEffect((()=>{if("idle"===o){const e=window.setTimeout((()=>c("HIDE")),n.scrollHideDelay);return()=>window.clearTimeout(e)}}),[o,n.scrollHideDelay,c]),ze.useEffect((()=>{const e=n.viewport,t=s?"scrollLeft":"scrollTop";if(e){let r=e[t];const a=()=>{const a=e[t];r!==a&&(c("SCROLL"),l()),r=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}}),[n.viewport,s,c,l]),i.jsx(u,{present:r||"hidden"!==o,children:i.jsx(uc,{"data-state":"hidden"===o?"hidden":"visible",...a,ref:t,onPointerEnter:h(e.onPointerEnter,(()=>c("POINTER_ENTER"))),onPointerLeave:h(e.onPointerLeave,(()=>c("POINTER_LEAVE")))})})})),dc=ze.forwardRef(((e,t)=>{const r=rc(ic,e.__scopeScrollArea),{forceMount:a,...n}=e,[s,l]=ze.useState(!1),o="horizontal"===e.orientation,c=Pc((()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;l(o?e:t)}}),10);return Ac(r.viewport,c),Ac(r.content,c),i.jsx(u,{present:a||s,children:i.jsx(uc,{"data-state":s?"visible":"hidden",...n,ref:t})})})),uc=ze.forwardRef(((e,t)=>{const{orientation:r="vertical",...a}=e,n=rc(ic,e.__scopeScrollArea),s=ze.useRef(null),l=ze.useRef(0),[o,c]=ze.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Nc(o.viewport,o.content),u={...a,sizes:o,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>s.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function m(e,t){return function(e,t,r,a="ltr"){const n=_c(r),s=n/2,i=t||s,l=n-i,o=r.scrollbar.paddingStart+i,c=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,u="ltr"===a?[0,d]:[-1*d,0];return Cc([o,c],u)(e)}(e,l.current,o,t)}return"horizontal"===r?i.jsx(mc,{...u,ref:t,onThumbPositionChange:()=>{if(n.viewport&&s.current){const e=Sc(n.viewport.scrollLeft,o,n.dir);s.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=m(e,n.dir))}}):"vertical"===r?i.jsx(hc,{...u,ref:t,onThumbPositionChange:()=>{if(n.viewport&&s.current){const e=Sc(n.viewport.scrollTop,o);s.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=m(e))}}):null})),mc=ze.forwardRef(((e,t)=>{const{sizes:r,onSizesChange:a,...n}=e,l=rc(ic,e.__scopeScrollArea),[o,c]=ze.useState(),d=ze.useRef(null),u=s(t,d,l.onScrollbarXChange);return ze.useEffect((()=>{d.current&&c(getComputedStyle(d.current))}),[d]),i.jsx(gc,{"data-orientation":"horizontal",...n,ref:u,sizes:r,style:{bottom:0,left:"rtl"===l.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===l.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":_c(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(l.viewport){const a=l.viewport.scrollLeft+t.deltaX;e.onWheelScroll(a),Tc(a,r)&&t.preventDefault()}},onResize:()=>{d.current&&l.viewport&&o&&a({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:wc(o.paddingLeft),paddingEnd:wc(o.paddingRight)}})}})})),hc=ze.forwardRef(((e,t)=>{const{sizes:r,onSizesChange:a,...n}=e,l=rc(ic,e.__scopeScrollArea),[o,c]=ze.useState(),d=ze.useRef(null),u=s(t,d,l.onScrollbarYChange);return ze.useEffect((()=>{d.current&&c(getComputedStyle(d.current))}),[d]),i.jsx(gc,{"data-orientation":"vertical",...n,ref:u,sizes:r,style:{top:0,right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":_c(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(l.viewport){const a=l.viewport.scrollTop+t.deltaY;e.onWheelScroll(a),Tc(a,r)&&t.preventDefault()}},onResize:()=>{d.current&&l.viewport&&o&&a({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:wc(o.paddingTop),paddingEnd:wc(o.paddingBottom)}})}})})),[pc,xc]=Jo(ic),gc=ze.forwardRef(((e,t)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:n,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:d,onThumbPositionChange:u,onDragScroll:p,onWheelScroll:x,onResize:g,...f}=e,y=rc(ic,r),[v,b]=ze.useState(null),j=s(t,(e=>b(e))),k=ze.useRef(null),w=ze.useRef(""),N=y.viewport,_=a.content-a.viewport,S=m(x),C=m(u),T=Pc(g,10);function O(e){if(k.current){const t=e.clientX-k.current.left,r=e.clientY-k.current.top;p({x:t,y:r})}}return ze.useEffect((()=>{const e=e=>{const t=e.target;(null==v?void 0:v.contains(t))&&S(e,_)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})}),[N,v,_,S]),ze.useEffect(C,[a,C]),Ac(v,T),Ac(y.content,T),i.jsx(pc,{scope:r,scrollbar:v,hasThumb:n,onThumbChange:m(l),onThumbPointerUp:m(c),onThumbPositionChange:C,onThumbPointerDown:m(d),children:i.jsx(o.div,{...f,ref:j,style:{position:"absolute",...f.style},onPointerDown:h(e.onPointerDown,(e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),k.current=v.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),O(e)}})),onPointerMove:h(e.onPointerMove,O),onPointerUp:h(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=w.current,y.viewport&&(y.viewport.style.scrollBehavior=""),k.current=null}))})})})),fc="ScrollAreaThumb",yc=ze.forwardRef(((e,t)=>{const{forceMount:r,...a}=e,n=xc(fc,e.__scopeScrollArea);return i.jsx(u,{present:r||n.hasThumb,children:i.jsx(vc,{ref:t,...a})})})),vc=ze.forwardRef(((e,t)=>{const{__scopeScrollArea:r,style:a,...n}=e,l=rc(fc,r),c=xc(fc,r),{onThumbPositionChange:d}=c,u=s(t,(e=>c.onThumbChange(e))),m=ze.useRef(),p=Pc((()=>{m.current&&(m.current(),m.current=void 0)}),100);return ze.useEffect((()=>{const e=l.viewport;if(e){const t=()=>{if(p(),!m.current){const t=Oc(e,d);m.current=t,d()}};return d(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[l.viewport,p,d]),i.jsx(o.div,{"data-state":c.hasThumb?"visible":"hidden",...n,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:h(e.onPointerDownCapture,(e=>{const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top;c.onThumbPointerDown({x:r,y:a})})),onPointerUp:h(e.onPointerUp,c.onThumbPointerUp)})}));yc.displayName=fc;var bc="ScrollAreaCorner",jc=ze.forwardRef(((e,t)=>{const r=rc(bc,e.__scopeScrollArea),a=Boolean(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&a?i.jsx(kc,{...e,ref:t}):null}));jc.displayName=bc;var kc=ze.forwardRef(((e,t)=>{const{__scopeScrollArea:r,...a}=e,n=rc(bc,r),[s,l]=ze.useState(0),[c,d]=ze.useState(0),u=Boolean(s&&c);return Ac(n.scrollbarX,(()=>{var e;const t=(null==(e=n.scrollbarX)?void 0:e.offsetHeight)||0;n.onCornerHeightChange(t),d(t)})),Ac(n.scrollbarY,(()=>{var e;const t=(null==(e=n.scrollbarY)?void 0:e.offsetWidth)||0;n.onCornerWidthChange(t),l(t)})),u?i.jsx(o.div,{...a,ref:t,style:{width:s,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...e.style}}):null}));function wc(e){return e?parseInt(e,10):0}function Nc(e,t){const r=e/t;return isNaN(r)?0:r}function _c(e){const t=Nc(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-r)*t;return Math.max(a,18)}function Sc(e,t,r="ltr"){const a=_c(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-n,i=t.content-t.viewport,l=s-a,o=E(e,"ltr"===r?[0,i]:[-1*i,0]);return Cc([0,i],[0,l])(o)}function Cc(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}function Tc(e,t){return e>0&&e<t}var Oc=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},a=0;return function n(){const s={left:e.scrollLeft,top:e.scrollTop},i=r.left!==s.left,l=r.top!==s.top;(i||l)&&t(),r=s,a=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(a)};function Pc(e,t){const r=m(e),a=ze.useRef(0);return ze.useEffect((()=>()=>window.clearTimeout(a.current)),[]),ze.useCallback((()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,t)}),[r,t])}function Ac(e,t){const r=m(t);g((()=>{let t=0;if(e){const a=new ResizeObserver((()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)}));return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}}),[e,r])}function Ec(e,t){const{asChild:r,children:a}=e;if(!r)return"function"==typeof t?t(a):t;const n=ze.Children.only(a);return ze.cloneElement(n,{children:"function"==typeof t?t(n.props.children):t})}var Dc=ac,Mc=sc,zc=jc;const Rc=ze.forwardRef((({className:e,children:t,...r},a)=>i.jsxs(Dc,{ref:a,className:xs("relative overflow-hidden",e),...r,children:[i.jsx(Mc,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(Ic,{}),i.jsx(zc,{})]})));Rc.displayName=Dc.displayName;const Ic=ze.forwardRef((({className:e,orientation:t="vertical",...r},a)=>i.jsx(lc,{ref:a,orientation:t,className:xs("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:i.jsx(yc,{className:"relative flex-1 rounded-full bg-border"})})));function Fc({className:e,...t}){return i.jsx("div",{className:xs("animate-pulse rounded-md bg-muted",e),...t})}Ic.displayName=lc.displayName;const Bc=({rooms:e,currentRoom:t,onRoomChange:r,isLoading:a})=>{const n=e=>{switch(e){case"announcement":return"📢";case"design":return"🎨";case"general":return"💬";default:return"📁"}},s=e=>{switch(e){case"announcement":return"Yönetici duyuruları";case"design":return"Tasarım ekibi";case"general":return"Genel sohbet";default:return"Chat odası"}};return a?i.jsx("div",{className:"p-3 space-y-2",children:[1,2,3].map((e=>i.jsx(Fc,{className:"h-12 w-full"},e)))}):0===e.length?i.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[i.jsx(ea,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"Henüz odanız yok"})]}):i.jsx(Rc,{className:"flex-1",children:i.jsx("div",{className:"p-2 space-y-1",children:e.map((e=>i.jsx(oo,{variant:(null==t?void 0:t.id)===e.id?"default":"outline",size:"sm",onClick:()=>r(e.id),className:xs("w-full h-auto p-2 justify-start",(null==t?void 0:t.id)===e.id&&"bg-primary text-primary-foreground"),children:i.jsxs("div",{className:"flex items-center space-x-2 w-full",children:[i.jsx("span",{className:"text-base",children:n(e.room_type)}),i.jsxs("div",{className:"text-left min-w-0 flex-1",children:[i.jsx("div",{className:"font-medium text-xs truncate",children:e.name}),i.jsx("div",{className:"text-xs opacity-60 truncate",children:s(e.room_type)})]})]})},e.id)))})})};var Lc="Avatar",[qc,$c]=n(Lc),[Kc,Uc]=qc(Lc),Hc=ze.forwardRef(((e,t)=>{const{__scopeAvatar:r,...a}=e,[n,s]=ze.useState("idle");return i.jsx(Kc,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:s,children:i.jsx(o.span,{...a,ref:t})})}));Hc.displayName=Lc;var Yc="AvatarImage",Vc=ze.forwardRef(((e,t)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:n=()=>{},...s}=e,l=Uc(Yc,r),c=function(e,t){const[r,a]=ze.useState("idle");return g((()=>{if(!e)return void a("error");let r=!0;const n=new window.Image,s=e=>()=>{r&&a(e)};return a("loading"),n.onload=s("loaded"),n.onerror=s("error"),n.src=e,t&&(n.referrerPolicy=t),()=>{r=!1}}),[e,t]),r}(a,s.referrerPolicy),d=m((e=>{n(e),l.onImageLoadingStatusChange(e)}));return g((()=>{"idle"!==c&&d(c)}),[c,d]),"loaded"===c?i.jsx(o.img,{...s,ref:t,src:a}):null}));Vc.displayName=Yc;var Gc="AvatarFallback",Wc=ze.forwardRef(((e,t)=>{const{__scopeAvatar:r,delayMs:a,...n}=e,s=Uc(Gc,r),[l,c]=ze.useState(void 0===a);return ze.useEffect((()=>{if(void 0!==a){const e=window.setTimeout((()=>c(!0)),a);return()=>window.clearTimeout(e)}}),[a]),l&&"loaded"!==s.imageLoadingStatus?i.jsx(o.span,{...n,ref:t}):null}));Wc.displayName=Gc;var Qc=Hc,Xc=Vc,Zc=Wc;const Jc=ze.forwardRef((({className:e,...t},r)=>i.jsx(Qc,{ref:r,className:xs("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t})));Jc.displayName=Qc.displayName;ze.forwardRef((({className:e,...t},r)=>i.jsx(Xc,{ref:r,className:xs("aspect-square h-full w-full",e),...t}))).displayName=Xc.displayName;const ed=ze.forwardRef((({className:e,...t},r)=>i.jsx(Zc,{ref:r,className:xs("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t})));ed.displayName=Zc.displayName;const td=K,rd=U;ze.forwardRef((({className:e,inset:t,children:r,...a},n)=>i.jsxs(D,{ref:n,className:xs("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...a,children:[r,i.jsx(wr,{className:"ml-auto h-4 w-4"})]}))).displayName=D.displayName;ze.forwardRef((({className:e,...t},r)=>i.jsx(M,{ref:r,className:xs("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}))).displayName=M.displayName;const ad=ze.forwardRef((({className:e,sideOffset:t=4,...r},a)=>i.jsx(z,{children:i.jsx(R,{ref:a,sideOffset:t,className:xs("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})})));ad.displayName=R.displayName;const nd=ze.forwardRef((({className:e,inset:t,...r},a)=>i.jsx(I,{ref:a,className:xs("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r})));nd.displayName=I.displayName;ze.forwardRef((({className:e,children:t,checked:r,...a},n)=>i.jsxs(F,{ref:n,className:xs("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...a,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(B,{children:i.jsx(br,{className:"h-4 w-4"})})}),t]}))).displayName=F.displayName;ze.forwardRef((({className:e,children:t,...r},a)=>i.jsxs(L,{ref:a,className:xs("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(B,{children:i.jsx(Dr,{className:"h-2 w-2 fill-current"})})}),t]}))).displayName=L.displayName;ze.forwardRef((({className:e,inset:t,...r},a)=>i.jsx(q,{ref:a,className:xs("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}))).displayName=q.displayName;ze.forwardRef((({className:e,...t},r)=>i.jsx($,{ref:r,className:xs("-mx-1 my-1 h-px bg-muted",e),...t}))).displayName=$.displayName;const sd=X,id=Z,ld=Q,od=ze.forwardRef((({className:e,...t},r)=>i.jsx(H,{ref:r,className:xs("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t})));od.displayName=H.displayName;const cd=ze.forwardRef((({className:e,children:t,...r},a)=>i.jsxs(ld,{children:[i.jsx(od,{}),i.jsxs(Y,{ref:a,className:xs("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,i.jsxs(V,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})));cd.displayName=Y.displayName;const dd=({className:e,...t})=>i.jsx("div",{className:xs("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});dd.displayName="DialogHeader";const ud=({className:e,...t})=>i.jsx("div",{className:xs("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ud.displayName="DialogFooter";const md=ze.forwardRef((({className:e,...t},r)=>i.jsx(G,{ref:r,className:xs("text-lg font-semibold leading-none tracking-tight",e),...t})));md.displayName=G.displayName;const hd=ze.forwardRef((({className:e,...t},r)=>i.jsx(W,{ref:r,className:xs("text-sm text-muted-foreground",e),...t})));hd.displayName=W.displayName;const pd=({isOpen:e,onClose:t,imageUrl:r,imageName:a,userName:n,timestamp:s})=>{const[l,o]=ze.useState(1),[c,d]=ze.useState(0),[u,m]=ze.useState(!1);return i.jsx(sd,{open:e,onOpenChange:t,children:i.jsxs(cd,{className:"max-w-4xl w-full h-[90vh] p-0 bg-black/95",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/50 text-white",children:[i.jsx("div",{className:"flex items-center space-x-3",children:i.jsxs("div",{children:[n&&i.jsx("div",{className:"font-medium",children:n}),s&&i.jsx("div",{className:"text-sm text-gray-300",children:(h=s,new Date(h).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{o((e=>Math.max(e-.25,.5)))},disabled:l<=.5,className:"text-white hover:bg-white/20",children:i.jsx(kn,{className:"h-4 w-4"})}),i.jsxs("span",{className:"text-sm text-white min-w-[60px] text-center",children:[Math.round(100*l),"%"]}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{o((e=>Math.min(e+.25,3)))},disabled:l>=3,className:"text-white hover:bg-white/20",children:i.jsx(jn,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{d((e=>(e+90)%360))},className:"text-white hover:bg-white/20",children:i.jsx(za,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{const e=document.createElement("a");e.href=r,e.download=a||"image",document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"text-white hover:bg-white/20",children:i.jsx(qr,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:t,className:"text-white hover:bg-white/20",children:i.jsx(vn,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-hidden",children:i.jsxs("div",{className:"relative max-w-full max-h-full",children:[!u&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}),i.jsx("img",{src:r,alt:a||"Preview",className:xs("max-w-full max-h-full object-contain transition-all duration-300 cursor-grab active:cursor-grabbing",!u&&"opacity-0"),style:{transform:`scale(${l}) rotate(${c}deg)`,transformOrigin:"center"},onLoad:()=>m(!0),onError:()=>m(!0),onDoubleClick:()=>{o(1),d(0)},draggable:!1})]})}),a&&i.jsx("div",{className:"p-4 bg-black/50 text-white text-center",children:i.jsx("div",{className:"text-sm text-gray-300",children:a})})]})});var h};function xd(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const a=r.reduce(((t,{useScope:r,scopeName:a})=>({...t,...r(e)[`__scope${a}`]})),{});return ze.useMemo((()=>({[`__scope${t.scopeName}`]:a})),[a])}};return r.scopeName=t.scopeName,r}var gd="Progress",[fd,yd]=function(e,t=[]){let r=[];const a=()=>{const t=r.map((e=>ze.createContext(e)));return function(r){const a=(null==r?void 0:r[e])||t;return ze.useMemo((()=>({[`__scope${e}`]:{...r,[e]:a}})),[r,a])}};return a.scopeName=e,[function(t,a){const n=ze.createContext(a),s=r.length;function l(t){const{scope:r,children:a,...l}=t,o=(null==r?void 0:r[e][s])||n,c=ze.useMemo((()=>l),Object.values(l));return i.jsx(o.Provider,{value:c,children:a})}return r=[...r,a],l.displayName=t+"Provider",[l,function(r,i){const l=(null==i?void 0:i[e][s])||n,o=ze.useContext(l);if(o)return o;if(void 0!==a)return a;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},xd(a,...t)]}(gd),[vd,bd]=fd(gd),jd=ze.forwardRef(((e,t)=>{const{__scopeProgress:r,value:a=null,max:n,getValueLabel:s=Nd,...l}=e;(n||0===n)&&Cd(n);const c=Cd(n)?n:100;null!==a&&Td(a,c);const d=Td(a,c)?a:null,u=Sd(d)?s(d,c):void 0;return i.jsx(vd,{scope:r,value:d,max:c,children:i.jsx(o.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Sd(d)?d:void 0,"aria-valuetext":u,role:"progressbar","data-state":_d(d,c),"data-value":d??void 0,"data-max":c,...l,ref:t})})}));jd.displayName=gd;var kd="ProgressIndicator",wd=ze.forwardRef(((e,t)=>{const{__scopeProgress:r,...a}=e,n=bd(kd,r);return i.jsx(o.div,{"data-state":_d(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...a,ref:t})}));function Nd(e,t){return`${Math.round(e/t*100)}%`}function _d(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Sd(e){return"number"==typeof e}function Cd(e){return Sd(e)&&!isNaN(e)&&e>0}function Td(e,t){return Sd(e)&&!isNaN(e)&&e<=t&&e>=0}wd.displayName=kd;var Od=jd,Pd=wd;const Ad=ze.forwardRef((({className:e,value:t,...r},a)=>i.jsx(Od,{ref:a,className:xs("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:i.jsx(Pd,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})));Ad.displayName=Od.displayName;const Ed=e=>{const[t,r]=ze.useState({isPlaying:!1,isLoading:!1,duration:0,currentTime:0,volume:1}),a=ze.useRef(null),n=ze.useRef(null);ze.useEffect((()=>{if(e){const t=new Audio(e);return a.current=t,t.addEventListener("loadstart",(()=>{r((e=>({...e,isLoading:!0})))})),t.addEventListener("loadedmetadata",(()=>{const e=t.duration||0;r((t=>({...t,isLoading:!1,duration:isFinite(e)?e:0})))})),t.addEventListener("ended",(()=>{r((e=>({...e,isPlaying:!1,currentTime:0}))),i()})),t.addEventListener("error",(e=>{r((e=>({...e,isLoading:!1,isPlaying:!1,error:"Ses dosyası oynatılamadı"}))),i()})),()=>{t.pause(),t.removeEventListener("loadstart",(()=>{})),t.removeEventListener("loadedmetadata",(()=>{})),t.removeEventListener("ended",(()=>{})),t.removeEventListener("error",(()=>{}))}}}),[e]);const s=ze.useCallback((()=>{n.current=setInterval((()=>{if(a.current){const e=a.current.currentTime||0;isFinite(e)&&r((t=>({...t,currentTime:e})))}}),100)}),[]),i=ze.useCallback((()=>{n.current&&(clearInterval(n.current),n.current=null)}),[]),l=ze.useCallback((async()=>{if(a.current)try{t.isPlaying?(a.current.pause(),i(),r((e=>({...e,isPlaying:!1})))):(await a.current.play(),s(),r((e=>({...e,isPlaying:!0}))))}catch(e){r((e=>({...e,isPlaying:!1,error:"Ses dosyası oynatılamadı"})))}}),[t.isPlaying,s,i]),o=ze.useCallback((e=>{if(a.current&&t.duration>0){const n=Math.max(0,Math.min(e,t.duration));a.current.currentTime=n,r((e=>({...e,currentTime:n})))}}),[t.duration]),c=ze.useCallback((e=>{const t=Math.max(0,Math.min(1,e));a.current&&(a.current.volume=t),r((e=>({...e,volume:t})))}),[]),d=ze.useCallback((()=>{a.current&&(a.current.pause(),a.current.currentTime=0),i(),r((e=>({...e,isPlaying:!1,currentTime:0})))}),[i]),u=t.duration>0&&isFinite(t.duration)&&isFinite(t.currentTime)?t.currentTime/t.duration*100:0,m=ze.useCallback((e=>{if(!e||isNaN(e)||!isFinite(e))return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}),[]);return ze.useEffect((()=>()=>{i(),a.current&&a.current.pause()}),[i]),{...t,progress:u,togglePlayPause:l,stop:d,seekTo:o,setVolume:c,formatTime:m,canPlay:!t.isLoading&&!!e,progressPercentage:`${u}%`}},Dd=({audioUrl:e,duration:t,fileName:r,className:a,isOwn:n=!1})=>{const{isPlaying:s,isLoading:l,togglePlayPause:o,progress:c,currentTime:d,duration:u,formatTime:m,canPlay:h}=Ed(e);return i.jsxs("div",{className:xs("flex items-center space-x-3 p-3 rounded-lg min-w-[200px] max-w-[300px]",n?"bg-blue-500/10 border border-blue-500/20":"bg-muted/50 border border-border/20",a),children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:o,disabled:!h||l,className:xs("h-10 w-10 p-0 rounded-full",n?"bg-blue-500 hover:bg-blue-600 text-white":"bg-primary hover:bg-primary/90 text-primary-foreground"),children:l?i.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):s?i.jsx(_a,{className:"h-4 w-4"}):i.jsx(Oa,{className:"h-4 w-4 ml-0.5"})}),i.jsxs("div",{className:"flex-1 space-y-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(xn,{className:"h-3 w-3 text-muted-foreground"}),i.jsx("div",{className:"flex-1",children:i.jsx(Ad,{value:c,className:xs("h-1.5",n?"bg-blue-100/20":"bg-muted")})})]}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsx("span",{children:m(d)}),i.jsx("span",{children:m(u||t||0)})]})]})]})},Md=({messages:e,currentUserId:t,onEditMessage:r,onDeleteMessage:a,onReplyToMessage:n,canDelete:s=!1})=>{const[l,o]=ze.useState(null),[c,d]=ze.useState(""),[u,m]=ze.useState(null),h=ze.useRef(null);ze.useEffect((()=>{p()}),[e]);const p=()=>{var e;null==(e=h.current)||e.scrollIntoView({behavior:"smooth"})},x=e=>{const t=new Date(e),r=(new Date).getTime()-t.getTime(),a=Math.floor(r/864e5);return 0===a?t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):1===a?`Dün ${t.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}`:t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})},g=e=>e.user_name||"Bilinmeyen Kullanıcı",f=e=>{switch(e){case"yonetici":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"muhasebeci":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"grafiker":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"reklamci":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"toptanci":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},y=e=>[".mp3",".wav",".ogg",".aac",".m4a",".webm"].some((t=>e.toLowerCase().endsWith(t))),v=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},b=async()=>{if(!l||!r)return;await r(l,c)&&(o(null),d(""))},j=()=>{o(null),d("")},k=(e,t)=>{var r;if(null==t?void 0:t.startsWith("image/"))return i.jsx(aa,{className:"h-5 w-5 text-blue-500"});if(null==t?void 0:t.startsWith("audio/"))return i.jsx(ya,{className:"h-5 w-5 text-purple-500"});if(null==t?void 0:t.startsWith("video/"))return i.jsx(pn,{className:"h-5 w-5 text-pink-500"});switch(null==(r=null==e?void 0:e.split(".").pop())?void 0:r.toLowerCase()){case"pdf":return i.jsx(Wr,{className:"h-5 w-5 text-red-500"});case"doc":case"docx":return i.jsx(Wr,{className:"h-5 w-5 text-blue-600"});case"xls":case"xlsx":return i.jsx(Wr,{className:"h-5 w-5 text-green-600"});case"ppt":case"pptx":return i.jsx(Wr,{className:"h-5 w-5 text-orange-600"});case"zip":case"rar":case"7z":case"tar":case"gz":return i.jsx(er,{className:"h-5 w-5 text-purple-600"});case"txt":case"md":case"json":case"xml":case"csv":return i.jsx(Wr,{className:"h-5 w-5 text-gray-600"});case"js":case"ts":case"html":case"css":case"py":case"java":case"cpp":case"c":return i.jsx(Wr,{className:"h-5 w-5 text-indigo-600"});case"mp3":case"wav":case"flac":case"aac":return i.jsx(ya,{className:"h-5 w-5 text-purple-500"});case"mp4":case"avi":case"mkv":case"mov":case"webm":return i.jsx(pn,{className:"h-5 w-5 text-pink-500"});default:return i.jsx(Qr,{className:"h-5 w-5 text-gray-500"})}},w=e=>{e.file_url&&m({url:e.file_url,name:e.file_name,userName:g(e),timestamp:e.created_at})};return 0===e.length?i.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:"💬"}),i.jsx("p",{className:"text-lg mb-2",children:"Henüz mesaj yok"}),i.jsx("p",{className:"text-sm",children:"İlk mesajı göndermek için aşağıdaki kutuyu kullanın!"})]})}):i.jsxs(Rc,{className:"flex-1 px-4 py-2",children:[i.jsxs("div",{className:"space-y-4",children:[e.map(((u,m)=>{const h=u.user_id===t,p=0===m||e[m-1].user_id!==u.user_id;return i.jsxs("div",{className:"group",children:[u.reply_to_message&&i.jsxs("div",{className:"mb-2 ml-12 p-2 bg-muted/50 border-l-2 border-primary rounded-r",children:[i.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:[u.reply_to_message.user_name," yanıtlanıyor:"]}),i.jsx("div",{className:"text-sm truncate",children:u.reply_to_message.content})]}),i.jsxs("div",{className:xs("flex items-start",h?"justify-end":"space-x-3"),children:[!h&&i.jsx("div",{className:"flex-shrink-0",children:p?i.jsx(Jc,{className:"h-8 w-8",children:i.jsx(ed,{className:"text-xs",children:g(u).substring(0,2).toUpperCase()})}):i.jsx("div",{className:"h-8 w-8"})}),i.jsxs("div",{className:xs("max-w-[70%]",h?"ml-auto":"flex-1"),children:[p&&!h&&i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium",children:g(u)}),u.user_role&&i.jsx(Co,{variant:"secondary",className:xs("text-xs",f(u.user_role)),children:u.user_role})]}),i.jsxs("div",{className:xs("relative rounded-2xl shadow-sm","image"===u.message_type?"max-w-sm p-1":"max-w-xs p-3",h?"bg-blue-500 text-white ml-auto rounded-br-md":"bg-white dark:bg-gray-800 border rounded-bl-md",!p&&"mt-1"),children:["image"===u.message_type&&u.file_url&&i.jsxs("div",{className:"mb-2 relative group/image",children:[i.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(aa,{className:"h-8 w-8 text-gray-400"})}),i.jsx("img",{src:u.file_url,alt:"Paylaşılan resim",className:"relative z-10 max-w-[280px] max-h-[300px] w-auto h-auto object-cover cursor-pointer transition-all hover:brightness-90",onClick:()=>w(u),loading:"lazy",style:{minWidth:"200px",minHeight:"150px"}}),i.jsx("div",{className:"absolute inset-0 z-20 bg-black/0 group-hover/image:bg-black/10 transition-colors cursor-pointer",onClick:()=>w(u)}),i.jsx("div",{className:"absolute top-2 right-2 z-30 opacity-0 group-hover/image:opacity-100 transition-opacity",children:i.jsx(oo,{variant:"secondary",size:"sm",className:"h-8 w-8 p-0 bg-black/50 hover:bg-black/70 text-white border-0",onClick:e=>{e.stopPropagation(),window.open(u.file_url,"_blank")},children:i.jsx(qr,{className:"h-3 w-3"})})})]}),u.file_name&&i.jsx("div",{className:"mt-1 text-xs opacity-70 truncate",children:u.file_name})]}),u.file_url&&u.file_name&&y(u.file_name)&&i.jsx("div",{className:"mb-2",children:i.jsx(Dd,{audioUrl:u.file_url,fileName:u.file_name})}),"file"===u.message_type&&u.file_url&&!(u.file_name&&y(u.file_name))&&i.jsx("div",{className:"mb-2 p-3 bg-background/10 rounded-lg border border-border/20 hover:bg-background/20 transition-colors",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:k(u.file_name||"",u.file_type)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium truncate",children:u.file_name||"Dosya"}),u.file_size&&i.jsx("div",{className:"text-xs opacity-70",children:v(u.file_size)})]}),i.jsx("div",{className:"flex-shrink-0",children:i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>window.open(u.file_url,"_blank"),className:"h-8 w-8 p-0 hover:bg-background/50",children:i.jsx(qr,{className:"h-4 w-4"})})})]})}),l===u.id?i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:c,onChange:e=>d(e.target.value),className:"w-full p-2 text-sm bg-background border rounded resize-none",rows:3,autoFocus:!0}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(oo,{size:"sm",onClick:b,children:"Kaydet"}),i.jsx(oo,{size:"sm",variant:"outline",onClick:j,children:"İptal"})]})]}):i.jsxs("div",{className:xs("image"===u.message_type?"p-2":""),children:[!(u.file_url&&u.file_name&&y(u.file_name))&&u.content&&i.jsx("div",{className:"text-sm whitespace-pre-wrap break-words",children:u.content}),i.jsxs("div",{className:xs("flex items-center space-x-1 mt-1",h?"justify-end":"justify-start"),children:[u.is_edited&&i.jsx("span",{className:"text-xs opacity-60",children:"düzenlendi"}),i.jsx("span",{className:xs("text-xs opacity-70",h?"text-blue-100":"text-muted-foreground"),children:x(u.created_at)})]})]}),i.jsx("div",{className:xs("absolute opacity-0 group-hover:opacity-100 transition-opacity",h?"-left-8":"-right-8","top-0"),children:i.jsxs(td,{children:[i.jsx(rd,{asChild:!0,children:i.jsx(oo,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 bg-background shadow",children:i.jsx(Kr,{className:"h-3 w-3"})})}),i.jsxs(ad,{align:h?"end":"start",children:[n&&i.jsxs(nd,{onClick:()=>n(u.id),children:[i.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Yanıtla"]}),h&&r&&"text"===u.message_type&&i.jsxs(nd,{onClick:()=>(e=>{o(e.id),d(e.content)})(u),children:[i.jsx(Va,{className:"h-4 w-4 mr-2"}),"Düzenle"]}),(h||s)&&a&&i.jsxs(nd,{onClick:()=>(async e=>{a&&window.confirm("Bu mesajı silmek istediğinizden emin misiniz?")&&await a(e)})(u.id),className:"text-destructive",children:[i.jsx(tn,{className:"h-4 w-4 mr-2"}),"Sil"]}),u.file_url&&i.jsxs(nd,{onClick:()=>window.open(u.file_url,"_blank"),children:[i.jsx(Hr,{className:"h-4 w-4 mr-2"}),"Aç"]})]})]})})]})]})]})]},u.id)})),i.jsx("div",{ref:h})]}),i.jsx(pd,{isOpen:!!u,onClose:()=>m(null),imageUrl:(null==u?void 0:u.url)||"",imageName:null==u?void 0:u.name,userName:null==u?void 0:u.userName,timestamp:null==u?void 0:u.timestamp})]})};var zd="Popover",[Rd,Id]=n(zd,[y]),Fd=y(),[Bd,Ld]=Rd(zd),qd=e=>{const{__scopePopover:t,children:r,open:a,defaultOpen:n,onOpenChange:s,modal:l=!1}=e,o=Fd(t),c=ze.useRef(null),[u,m]=ze.useState(!1),[h=!1,p]=d({prop:a,defaultProp:n,onChange:s});return i.jsx(S,{...o,children:i.jsx(Bd,{scope:t,contentId:_(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:ze.useCallback((()=>p((e=>!e))),[p]),hasCustomAnchor:u,onCustomAnchorAdd:ze.useCallback((()=>m(!0)),[]),onCustomAnchorRemove:ze.useCallback((()=>m(!1)),[]),modal:l,children:r})})};qd.displayName=zd;var $d="PopoverAnchor";ze.forwardRef(((e,t)=>{const{__scopePopover:r,...a}=e,n=Ld($d,r),s=Fd(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=n;return ze.useEffect((()=>(l(),()=>o())),[l,o]),i.jsx(v,{...s,...a,ref:t})})).displayName=$d;var Kd="PopoverTrigger",Ud=ze.forwardRef(((e,t)=>{const{__scopePopover:r,...a}=e,n=Ld(Kd,r),l=Fd(r),c=s(t,n.triggerRef),d=i.jsx(o.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":tu(n.open),...a,ref:c,onClick:h(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?d:i.jsx(v,{asChild:!0,...l,children:d})}));Ud.displayName=Kd;var Hd="PopoverPortal",[Yd,Vd]=Rd(Hd,{forceMount:void 0}),Gd=e=>{const{__scopePopover:t,forceMount:r,children:a,container:n}=e,s=Ld(Hd,t);return i.jsx(Yd,{scope:t,forceMount:r,children:i.jsx(u,{present:r||s.open,children:i.jsx(x,{asChild:!0,container:n,children:a})})})};Gd.displayName=Hd;var Wd="PopoverContent",Qd=ze.forwardRef(((e,t)=>{const r=Vd(Wd,e.__scopePopover),{forceMount:a=r.forceMount,...n}=e,s=Ld(Wd,e.__scopePopover);return i.jsx(u,{present:a||s.open,children:s.modal?i.jsx(Xd,{...n,ref:t}):i.jsx(Zd,{...n,ref:t})})}));Qd.displayName=Wd;var Xd=ze.forwardRef(((e,t)=>{const r=Ld(Wd,e.__scopePopover),a=ze.useRef(null),n=s(t,a),l=ze.useRef(!1);return ze.useEffect((()=>{const e=a.current;if(e)return J(e)}),[]),i.jsx(ee,{as:C,allowPinchZoom:!0,children:i.jsx(Jd,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),l.current||null==(t=r.triggerRef.current)||t.focus()})),onPointerDownOutside:h(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,a=2===t.button||r;l.current=a}),{checkForDefaultPrevented:!1}),onFocusOutside:h(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),Zd=ze.forwardRef(((e,t)=>{const r=Ld(Wd,e.__scopePopover),a=ze.useRef(!1),n=ze.useRef(!1);return i.jsx(Jd,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,i;null==(s=e.onCloseAutoFocus)||s.call(e,t),t.defaultPrevented||(a.current||null==(i=r.triggerRef.current)||i.focus(),t.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:t=>{var s,i;null==(s=e.onInteractOutside)||s.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));const l=t.target;(null==(i=r.triggerRef.current)?void 0:i.contains(l))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})})),Jd=ze.forwardRef(((e,t)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:s,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,h=Ld(Wd,r),p=Fd(r);return te(),i.jsx(re,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:s,children:i.jsx(b,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(j,{"data-state":tu(h.open),role:"dialog",id:h.contentId,...p,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),eu="PopoverClose";ze.forwardRef(((e,t)=>{const{__scopePopover:r,...a}=e,n=Ld(eu,r);return i.jsx(o.button,{type:"button",...a,ref:t,onClick:h(e.onClick,(()=>n.onOpenChange(!1)))})})).displayName=eu;function tu(e){return e?"open":"closed"}ze.forwardRef(((e,t)=>{const{__scopePopover:r,...a}=e,n=Fd(r);return i.jsx(N,{...n,...a,ref:t})})).displayName="PopoverArrow";var ru=Gd,au=Qd;const nu=qd,su=Ud,iu=ze.forwardRef((({className:e,align:t="center",sideOffset:r=4,...a},n)=>i.jsx(ru,{children:i.jsx(au,{ref:n,align:t,sideOffset:r,className:xs("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})})));iu.displayName=au.displayName;var lu,ou,cu,du,uu,mu,hu,pu,xu,gu;(ou=lu||(lu={})).HEADER="header",ou.QUERY="query",(du=cu||(cu={})).HEADER="header",du.QUERY="query",(mu=uu||(uu={})).HTTP="http",mu.HTTPS="https",(pu=hu||(hu={})).MD5="md5",pu.CRC32="crc32",pu.CRC32C="crc32c",pu.SHA1="sha1",pu.SHA256="sha256",(gu=xu||(xu={}))[gu.HEADER=0]="HEADER",gu[gu.TRAILER=1]="TRAILER";const fu="__smithy_context";var yu,vu,bu,ju;(vu=yu||(yu={})).PROFILE="profile",vu.SSO_SESSION="sso-session",vu.SERVICES="services",(ju=bu||(bu={})).HTTP_0_9="http/0.9",ju.HTTP_1_0="http/1.0",ju.TDS_8_0="tds/8.0";class ku{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new ku({...e,headers:{...e.headers}});var r;return t.query&&(t.query=(r=t.query,Object.keys(r).reduce(((e,t)=>{const a=r[t];return{...e,[t]:Array.isArray(a)?[...a]:a}}),{}))),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){return ku.clone(this)}}class wu{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers}}const Nu={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},_u=e=>({applyToStack:t=>{t.add(function(e){return t=>async r=>{var a,n;const{request:s}=r;return ku.isInstance(s)&&s.body&&"node"===e.runtime&&"FetchHttpHandler"!==(null==(n=null==(a=e.requestHandler)?void 0:a.constructor)?void 0:n.name)&&(s.headers={...s.headers,Expect:"100-continue"}),t({...r,request:s})}}(e),Nu)}}),Su="WHEN_SUPPORTED",Cu="WHEN_REQUIRED",Tu=Su,Ou="WHEN_SUPPORTED",Pu="WHEN_REQUIRED",Au=Su;var Eu,Du,Mu,zu;(Du=Eu||(Eu={})).MD5="MD5",Du.CRC32="CRC32",Du.CRC32C="CRC32C",Du.CRC64NVME="CRC64NVME",Du.SHA1="SHA1",Du.SHA256="SHA256",(zu=Mu||(Mu={})).HEADER="header",zu.TRAILER="trailer";const Ru=Eu.CRC32;var Iu,Fu;function Bu(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}(Fu=Iu||(Iu={})).ENV="env",Fu.CONFIG="shared config entry";const Lu=e=>{var t,r;return wu.isInstance(e)?(null==(t=e.headers)?void 0:t.date)??(null==(r=e.headers)?void 0:r.Date):void 0},qu=e=>new Date(Date.now()+e),$u=(e,t)=>{const r=Date.parse(e);return((e,t)=>Math.abs(qu(t).getTime()-e)>=3e5)(r,t)?r-Date.now():t},Ku=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Uu=async e=>{var t,r,a;const n=Ku("context",e.context),s=Ku("config",e.config),i=null==(a=null==(r=null==(t=n.endpointV2)?void 0:t.properties)?void 0:r.authSchemes)?void 0:a[0],l=Ku("signer",s.signer);return{config:s,signer:await l(i),signingRegion:null==e?void 0:e.signingRegion,signingRegionSet:null==e?void 0:e.signingRegionSet,signingName:null==e?void 0:e.signingName}};class Hu{async sign(e,t,r){var a;if(!ku.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const n=await Uu(r),{config:s,signer:i}=n;let{signingRegion:l,signingName:o}=n;const c=r.context;if(null==(a=null==c?void 0:c.authSchemes)?void 0:a.length){const[e,t]=c.authSchemes;"sigv4a"===(null==e?void 0:e.name)&&"sigv4"===(null==t?void 0:t.name)&&(l=(null==t?void 0:t.signingRegion)??l,o=(null==t?void 0:t.signingName)??o)}return await i.sign(e,{signingDate:qu(s.systemClockOffset),signingRegion:l,signingService:o})}errorHandler(e){return t=>{const r=t.ServerTime??Lu(t.$response);if(r){const a=Ku("config",e.config),n=a.systemClockOffset;a.systemClockOffset=$u(r,a.systemClockOffset);a.systemClockOffset!==n&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){const r=Lu(e);if(r){const e=Ku("config",t.config);e.systemClockOffset=$u(r,e.systemClockOffset)}}}class Yu extends Hu{async sign(e,t,r){var a;if(!ku.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:n,signer:s,signingRegion:i,signingRegionSet:l,signingName:o}=await Uu(r),c=(await(null==(a=n.sigv4aSigningRegionSet)?void 0:a.call(n))??l??[i]).join(",");return await s.sign(e,{signingDate:qu(n.systemClockOffset),signingRegion:c,signingService:o})}}const Vu=e=>e[fu]||(e[fu]={}),Gu=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t};const Wu=(e,t)=>(r,a)=>async n=>{var s;const i=((e,t)=>{if(!t||0===t.length)return e;const r=[];for(const a of t)for(const t of e)t.schemeId.split("#")[1]===a&&r.push(t);for(const a of e)r.find((({schemeId:e})=>e===a.schemeId))||r.push(a);return r})(e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,a,n.input)),e.authSchemePreference?await e.authSchemePreference():[]),l=function(e){const t=new Map;for(const r of e)t.set(r.schemeId,r);return t}(e.httpAuthSchemes),o=Vu(a),c=[];for(const r of i){const n=l.get(r.schemeId);if(!n){c.push(`HttpAuthScheme \`${r.schemeId}\` was not enabled for this service.`);continue}const i=n.identityProvider(await t.identityProviderConfigProvider(e));if(!i){c.push(`HttpAuthScheme \`${r.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:d={},signingProperties:u={}}=(null==(s=r.propertiesExtractor)?void 0:s.call(r,e,a))||{};r.identityProperties=Object.assign(r.identityProperties||{},d),r.signingProperties=Object.assign(r.signingProperties||{},u),o.selectedHttpAuthScheme={httpAuthOption:r,identity:await i(r.identityProperties),signer:n.signer};break}if(!o.selectedHttpAuthScheme)throw new Error(c.join("\n"));return r(n)},Qu={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Xu=(e,t)=>(t.find((([t])=>t.match(e)))||[void 0,void 0])[1],Zu={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ju={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function em(e,t,r){return{applyToStack:a=>{a.add(((e,t)=>(r,a)=>async n=>{var s,i,l,o;const{response:c}=await r(n);try{return{response:c,output:await t(c,e)}}catch(d){if(Object.defineProperty(d,"$response",{value:c}),!("$metadata"in d)){const e="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+="\n  "+e}catch(die){a.logger&&"NoOpLogger"!==(null==(i=null==(s=a.logger)?void 0:s.constructor)?void 0:i.name)&&(null==(o=null==(l=a.logger)?void 0:l.warn)||o.call(l,e))}void 0!==d.$responseBodyText&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(wu.isInstance(c)){const{headers:e={}}=c,t=Object.entries(e);d.$metadata={httpStatusCode:c.statusCode,requestId:Xu(/^x-[\w-]+-request-?id$/,t),extendedRequestId:Xu(/^x-[\w-]+-id-2$/,t),cfId:Xu(/^x-[\w-]+-cf-id$/,t)}}}catch(die){}}throw d}})(e,r),Zu),a.add(((e,t)=>(r,a)=>async n=>{var s;const i=e,l=(null==(s=a.endpointV2)?void 0:s.url)&&i.urlParser?async()=>i.urlParser(a.endpointV2.url):i.endpoint;if(!l)throw new Error("No valid endpoint provider available.");const o=await t(n.input,{...e,endpoint:l});return r({...n,request:o})})(e,t),Ju)}}}const tm=e=>e=>{throw e},rm=(e,t)=>{},am={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},nm=e=>({applyToStack:e=>{e.addRelativeTo(((e,t)=>async r=>{if(!ku.isInstance(r.request))return e(r);const a=Vu(t).selectedHttpAuthScheme;if(!a)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:n={}},identity:s,signer:i}=a,l=await e({...r,request:await i.sign(r.request,s,n)}).catch((i.errorHandler||tm)(n));return(i.successHandler||rm)(l.response,n),l}),am)}}),sm=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t},im={},lm=new Array(64);for(let mie=0,hie="A".charCodeAt(0),pie="Z".charCodeAt(0);mie+hie<=pie;mie++){const e=String.fromCharCode(mie+hie);im[e]=mie,lm[mie]=e}for(let mie=0,hie="a".charCodeAt(0),pie="z".charCodeAt(0);mie+hie<=pie;mie++){const e=String.fromCharCode(mie+hie),t=mie+26;im[e]=t,lm[t]=e}for(let mie=0;mie<10;mie++){im[mie.toString(10)]=mie+52;const e=mie.toString(10),t=mie+52;im[e]=t,lm[t]=e}im["+"]=62,lm[62]="+",im["/"]=63,lm[63]="/";const om=e=>{let t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;const r=new ArrayBuffer(t),a=new DataView(r);for(let n=0;n<e.length;n+=4){let t=0,r=0;for(let a=n,l=n+3;a<=l;a++)if("="!==e[a]){if(!(e[a]in im))throw new TypeError(`Invalid character ${e[a]} in base64 string.`);t|=im[e[a]]<<6*(l-a),r+=6}else t>>=6;const s=n/4*3;t>>=r%8;const i=Math.floor(r/8);for(let e=0;e<i;e++){const r=8*(i-e-1);a.setUint8(s+e,(t&255<<r)>>r)}}return new Uint8Array(r)},cm=e=>(new TextEncoder).encode(e),dm=e=>"string"==typeof e?cm(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),um=e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function mm(e){let t;t="string"==typeof e?cm(e):e;const r="object"==typeof t&&"number"==typeof t.length,a="object"==typeof t&&"number"==typeof t.byteOffset&&"number"==typeof t.byteLength;if(!r&&!a)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let n="";for(let s=0;s<t.length;s+=3){let e=0,r=0;for(let n=s,i=Math.min(s+3,t.length);n<i;n++)e|=t[n]<<8*(i-n-1),r+=8;const a=Math.ceil(r/6);e<<=6*a-r;for(let t=1;t<=a;t++){const r=6*(a-t);n+=lm[(e&63<<r)>>r]}n+="==".slice(0,4-a)}return n}class hm extends Uint8Array{static fromString(e,t="utf-8"){if("string"==typeof e)return function(e,t){return"base64"===t?hm.mutate(om(e)):hm.mutate(cm(e))}(e,t);throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,hm.prototype),e}transformToString(e="utf-8"){return function(e,t="utf-8"){return"base64"===t?mm(e):um(e)}(this,e)}}const pm="function"==typeof ReadableStream?ReadableStream:function(){};class xm extends pm{}const gm=e=>{var t;return"function"==typeof ReadableStream&&((null==(t=null==e?void 0:e.constructor)?void 0:t.name)===ReadableStream.name||e instanceof ReadableStream)},fm=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:a,base64Encoder:n})=>{var s;if(!gm(r))throw new Error(`@smithy/util-stream: unsupported source type ${(null==(s=null==r?void 0:r.constructor)?void 0:s.name)??r} in ChecksumStream.`);const i=n??mm;if("function"!=typeof TransformStream)throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const l=new TransformStream({start(){},async transform(e,r){t.update(e),r.enqueue(e)},async flush(r){const n=await t.digest(),s=i(n);if(e!==s){const t=new Error(`Checksum mismatch: expected "${e}" but received "${s}" in response header "${a}".`);r.error(t)}else r.terminate()}});r.pipeThrough(l);const o=l.readable;return Object.setPrototypeOf(o,xm.prototype),o};class ym{constructor(e){this.allocByteArray=e,this.byteLength=0,this.byteArrays=[]}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(1===this.byteArrays.length){const e=this.byteArrays[0];return this.reset(),e}const e=this.allocByteArray(this.byteLength);let t=0;for(let r=0;r<this.byteArrays.length;++r){const a=this.byteArrays[r];e.set(a,t),t+=a.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}const vm=function(e,t,r){const a=e.getReader();let n=!1,s=0;const i=["",new ym((e=>new Uint8Array(e)))];let l=-1;const o=async e=>{const{value:c,done:d}=await a.read(),u=c;if(d){if(-1!==l){const t=bm(i,l);jm(t)>0&&e.enqueue(t)}e.close()}else{const a=function(e,t=!0){if(t&&"undefined"!=typeof Buffer&&e instanceof Buffer)return 2;if(e instanceof Uint8Array)return 1;if("string"==typeof e)return 0;return-1}(u,!1);if(l!==a&&(l>=0&&e.enqueue(bm(i,l)),l=a),-1===l)return void e.enqueue(u);const c=jm(u);s+=c;const d=jm(i[l]);if(c>=t&&0===d)e.enqueue(u);else{const a=function(e,t,r){switch(t){case 0:return e[0]+=r,jm(e[0]);case 1:case 2:return e[t].push(r),jm(e[t])}}(i,l,u);!n&&s>2*t&&(n=!0,null==r||r.warn(`@smithy/util-stream - stream chunk size ${c} is below threshold of ${t}, automatically buffering.`)),a>=t?e.enqueue(bm(i,l)):await o(e)}}};return new ReadableStream({pull:o})};function bm(e,t){switch(t){case 0:const r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function jm(e){return(null==e?void 0:e.byteLength)??(null==e?void 0:e.length)??0}const km=(e,t)=>{const{base64Encoder:r,bodyLengthChecker:a,checksumAlgorithmFn:n,checksumLocationName:s,streamHasher:i}=t,l=void 0!==r&&void 0!==a&&void 0!==n&&void 0!==s&&void 0!==i,o=l?i(n,e):void 0,c=e.getReader();return new ReadableStream({async pull(e){const{value:t,done:n}=await c.read();if(n){if(e.enqueue("0\r\n"),l){const t=r(await o);e.enqueue(`${s}:${t}\r\n`),e.enqueue("\r\n")}e.close()}else e.enqueue(`${(a(t)||0).toString(16)}\r\n${t}\r\n`)}})};const wm=e=>encodeURIComponent(e).replace(/[!'()*]/g,Nm),Nm=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function _m(e,t){return new Request(e,t)}function Sm(e=0){return new Promise(((t,r)=>{e&&setTimeout((()=>{const t=new Error(`Request did not complete within ${e} ms`);t.name="TimeoutError",r(t)}),e)}))}const Cm={supported:void 0};class Tm{static create(e){return"function"==typeof(null==e?void 0:e.handle)?e:new Tm(e)}constructor(e){"function"==typeof e?this.configProvider=e().then((e=>e||{})):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),void 0===Cm.supported&&(Cm.supported=Boolean("undefined"!=typeof Request&&"keepalive"in _m("https://[::1]")))}destroy(){}async handle(e,{abortSignal:t}={}){var r;this.config||(this.config=await this.configProvider);const a=this.config.requestTimeout,n=!0===this.config.keepAlive,s=this.config.credentials;if(null==t?void 0:t.aborted){const e=new Error("Request aborted");return e.name="AbortError",Promise.reject(e)}let i=e.path;const l=function(e){const t=[];for(let r of Object.keys(e).sort()){const a=e[r];if(r=wm(r),Array.isArray(a))for(let e=0,n=a.length;e<n;e++)t.push(`${r}=${wm(a[e])}`);else{let e=r;(a||"string"==typeof a)&&(e+=`=${wm(a)}`),t.push(e)}}return t.join("&")}(e.query||{});l&&(i+=`?${l}`),e.fragment&&(i+=`#${e.fragment}`);let o="";if(null!=e.username||null!=e.password){o=`${e.username??""}:${e.password??""}@`}const{port:c,method:d}=e,u=`${e.protocol}//${o}${e.hostname}${c?`:${c}`:""}${i}`,m="GET"===d||"HEAD"===d?void 0:e.body,h={body:m,headers:new Headers(e.headers),method:d,credentials:s};(null==(r=this.config)?void 0:r.cache)&&(h.cache=this.config.cache),m&&(h.duplex="half"),"undefined"!=typeof AbortController&&(h.signal=t),Cm.supported&&(h.keepalive=n),"function"==typeof this.config.requestInit&&Object.assign(h,this.config.requestInit(e));let p=()=>{};const x=_m(u,h),g=[fetch(x).then((e=>{const t=e.headers,r={};for(const a of t.entries())r[a[0]]=a[1];return null!=e.body?{response:new wu({headers:r,reason:e.statusText,statusCode:e.status,body:e.body})}:e.blob().then((t=>({response:new wu({headers:r,reason:e.statusText,statusCode:e.status,body:t})})))})),Sm(a)];return t&&g.push(new Promise(((e,r)=>{const a=()=>{const e=new Error("Request aborted");e.name="AbortError",r(e)};if("function"==typeof t.addEventListener){const e=t;e.addEventListener("abort",a,{once:!0}),p=()=>e.removeEventListener("abort",a)}else t.onabort=a}))),Promise.race(g).finally(p)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then((r=>(r[e]=t,r)))}httpHandlerConfigs(){return this.config??{}}}const Om=async e=>{var t;return"function"==typeof Blob&&e instanceof Blob||"Blob"===(null==(t=e.constructor)?void 0:t.name)?void 0!==Blob.prototype.arrayBuffer?new Uint8Array(await e.arrayBuffer()):async function(e){const t=await function(e){return new Promise(((t,r)=>{const a=new FileReader;a.onloadend=()=>{if(2!==a.readyState)return r(new Error("Reader aborted too early"));const e=a.result??"",n=e.indexOf(","),s=n>-1?n+1:e.length;t(e.substring(s))},a.onabort=()=>r(new Error("Read aborted")),a.onerror=()=>r(a.error),a.readAsDataURL(e)}))}(e),r=om(t);return new Uint8Array(r)}(e):async function(e){const t=[],r=e.getReader();let a=!1,n=0;for(;!a;){const{done:e,value:s}=await r.read();s&&(t.push(s),n+=s.length),a=e}const s=new Uint8Array(n);let i=0;for(const l of t)s.set(l,i),i+=l.length;return s}(e)};const Pm={},Am={};for(let mie=0;mie<256;mie++){let e=mie.toString(16).toLowerCase();1===e.length&&(e=`0${e}`),Pm[mie]=e,Am[e]=mie}function Em(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const a=e.slice(r,r+2).toLowerCase();if(!(a in Am))throw new Error(`Cannot decode unrecognized sequence ${a} as hexadecimal`);t[r/2]=Am[a]}return t}function Dm(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Pm[e[r]];return t}const Mm="The stream has already been transformed.",zm=e=>{var t,r;if(!Rm(e)&&!gm(e)){const a=(null==(r=null==(t=null==e?void 0:e.__proto__)?void 0:t.constructor)?void 0:r.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${a}`)}let a=!1;const n=async()=>{if(a)throw new Error(Mm);return a=!0,await Om(e)};return Object.assign(e,{transformToByteArray:n,transformToString:async e=>{const t=await n();if("base64"===e)return mm(t);if("hex"===e)return Dm(t);if(void 0===e||"utf8"===e||"utf-8"===e)return um(t);if("function"==typeof TextDecoder)return new TextDecoder(e).decode(t);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(a)throw new Error(Mm);if(a=!0,Rm(e))return(e=>{if("function"!=typeof e.stream)throw new Error("Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.\nIf you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body");return e.stream()})(e);if(gm(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},Rm=e=>"function"==typeof Blob&&e instanceof Blob;const Im=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return hm.mutate(e);if(!e)return hm.mutate(new Uint8Array);const r=t.streamCollector(e);return hm.mutate(await r)};function Fm(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}const Bm=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Lm=Math.ceil(2**127*(2-2**-23)),qm=e=>{const t=(e=>{if(null!=e){if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Zm.warn(Xm(`Expected number but observed string: ${e}`)),t}if("number"==typeof e)return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}})(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Lm)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},$m=e=>{if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},Km=e=>Hm(e,16),Um=e=>Hm(e,8),Hm=(e,t)=>{const r=$m(e);if(void 0!==r&&Ym(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Ym=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Vm=(e,t)=>{if(null==e){if(t)throw new TypeError(`Expected a non-null value for ${t}`);throw new TypeError("Expected a non-null value")}return e},Gm=e=>{if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return Zm.warn(Xm(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Wm=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Qm=e=>{const t=e.match(Wm);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Xm=e=>String(new TypeError(e).stack||e).split("\n").slice(0,5).filter((e=>!e.includes("stackTraceWarning"))).join("\n"),Zm={warn:console.warn},Jm=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],eh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];const th=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),rh=e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=th.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,a,n,s,i,l,o,c,d]=t,u=(e=>Km("string"==typeof e?Qm(e):e))(dh(a)),m=lh(n,"month",1,12),h=lh(s,"day",1,31),p=ah(u,m,h,{hours:i,minutes:l,seconds:o,fractionalMilliseconds:c});return"Z"!=d.toUpperCase()&&p.setTime(p.getTime()-ch(d)),p},ah=(e,t,r,a)=>{const n=t-1;return sh(e,n,r),new Date(Date.UTC(e,n,r,lh(a.hours,"hour",0,23),lh(a.minutes,"minute",0,59),lh(a.seconds,"seconds",0,60),oh(a.fractionalMilliseconds)))},nh=[31,28,31,30,31,30,31,31,30,31,30,31],sh=(e,t,r)=>{let a=nh[t];if(1===t&&ih(e)&&(a=29),r>a)throw new TypeError(`Invalid day for ${eh[t]} in ${e}: ${r}`)},ih=e=>e%4==0&&(e%100!=0||e%400==0),lh=(e,t,r,a)=>{const n=(e=>Um("string"==typeof e?Qm(e):e))(dh(e));if(n<r||n>a)throw new TypeError(`${t} must be between ${r} and ${a}, inclusive`);return n},oh=e=>null==e?0:1e3*(e=>qm("string"==typeof e?Qm(e):e))("0."+e),ch=e=>{const t=e[0];let r=1;if("+"==t)r=1;else{if("-"!=t)throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);r=-1}return r*(60*Number(e.substring(1,3))+Number(e.substring(4,6)))*60*1e3},dh=e=>{let t=0;for(;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)};function uh(e,t){return new mh(e,t)}class mh{constructor(e,t){this.input=e,this.context=t,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:e,protocol:t="https",port:r,path:a}=await this.context.endpoint();this.path=a;for(const n of this.resolvePathStack)n(this.path);return new ku({protocol:t,hostname:this.hostname||e,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push((t=>{this.path=`${(null==t?void 0:t.endsWith("/"))?t.slice(0,-1):t||""}`+e})),this}p(e,t,r,a){return this.resolvePathStack.push((n=>{this.path=((e,t,r,a,n,s)=>{if(null==t||void 0===t[r])throw new Error("No value provided for input HTTP label: "+r+".");{const t=a();if(t.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(n,s?t.split("/").map((e=>Fm(e))).join("/"):Fm(t))}return e})(n,this.input,e,t,r,a)})),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}class hh{constructor(e){this.authSchemes=new Map;for(const[t,r]of Object.entries(e))void 0!==r&&this.authSchemes.set(t,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}const ph=(xh=3e5,e=>gh(e)&&e.expiration.getTime()-Date.now()<xh);var xh;const gh=e=>void 0!==e.expiration,fh=(e,t,r)=>{let a,n,s,i=!1;return async t=>(s&&!(null==t?void 0:t.forceRefresh)||(a=await(async()=>{n||(n=e());try{a=await n,s=!0,i=!1}finally{n=void 0}return a})()),a)},yh="X-Amz-Date",vh="X-Amz-Signature",bh="X-Amz-Security-Token",jh="authorization",kh=yh.toLowerCase(),wh=[jh,kh,"date"],Nh=vh.toLowerCase(),_h="x-amz-content-sha256",Sh=bh.toLowerCase(),Ch={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Th=/^proxy-/,Oh=/^sec-/,Ph="AWS4-HMAC-SHA256",Ah="AWS4-HMAC-SHA256-PAYLOAD",Eh="aws4_request",Dh={},Mh=[],zh=(e,t,r)=>`${e}/${t}/${r}/${Eh}`,Rh=(e,t,r)=>{const a=new e(t);return a.update(dm(r)),a.digest()},Ih=({headers:e},t,r)=>{const a={};for(const n of Object.keys(e).sort()){if(null==e[n])continue;const s=n.toLowerCase();(s in Ch||(null==t?void 0:t.has(s))||Th.test(s)||Oh.test(s))&&(!r||r&&!r.has(s))||(a[s]=e[n].trim().replace(/\s+/g," "))}return a},Fh=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),Bh=async({headers:e,body:t},r)=>{for(const a of Object.keys(e))if(a.toLowerCase()===_h)return e[a];if(null==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||Fh(t)){const e=new r;return e.update(dm(t)),Dm(await e.digest())}return"UNSIGNED-PAYLOAD"};class Lh{format(e){const t=[];for(const n of Object.keys(e)){const r=cm(n);t.push(Uint8Array.from([r.byteLength]),r,this.formatHeaderValue(e[n]))}const r=new Uint8Array(t.reduce(((e,t)=>e+t.byteLength),0));let a=0;for(const n of t)r.set(n,a),a+=n.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const a=new Uint8Array(9);return a[0]=5,a.set(e.value.bytes,1),a;case"binary":const n=new DataView(new ArrayBuffer(3+e.value.byteLength));n.setUint8(0,6),n.setUint16(1,e.value.byteLength,!1);const s=new Uint8Array(n.buffer);return s.set(e.value,3),s;case"string":const i=cm(e.value),l=new DataView(new ArrayBuffer(3+i.byteLength));l.setUint8(0,7),l.setUint16(1,i.byteLength,!1);const o=new Uint8Array(l.buffer);return o.set(i,3),o;case"timestamp":const c=new Uint8Array(9);return c[0]=8,c.set(Uh.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!Kh.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(Em(e.value.replace(/\-/g,"")),1),d}}}var qh,$h;($h=qh||(qh={}))[$h.boolTrue=0]="boolTrue",$h[$h.boolFalse=1]="boolFalse",$h[$h.byte=2]="byte",$h[$h.short=3]="short",$h[$h.integer=4]="integer",$h[$h.long=5]="long",$h[$h.byteArray=6]="byteArray",$h[$h.string=7]="string",$h[$h.timestamp=8]="timestamp",$h[$h.uuid=9]="uuid";const Kh=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let Uh=class e{constructor(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let e=7,a=Math.abs(Math.round(t));e>-1&&a>0;e--,a/=256)r[e]=a;return t<0&&Hh(r),new e(r)}valueOf(){const e=this.bytes.slice(0),t=128&e[0];return t&&Hh(e),parseInt(Dm(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}};function Hh(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}const Yh=e=>{e=ku.clone(e);for(const t of Object.keys(e.headers))wh.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},Vh=e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e;class Gh{constructor({applyChecksum:e,credentials:t,region:r,service:a,sha256:n,uriEscapePath:s=!0}){this.service=a,this.sha256=n,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=Gu(r),this.credentialProvider=Gu(t)}createCanonicalRequest(e,t,r){const a=Object.keys(t).sort();return`${e.method}\n${this.getCanonicalPath(e)}\n${(({query:e={}})=>{const t=[],r={};for(const a of Object.keys(e)){if(a.toLowerCase()===Nh)continue;const n=wm(a);t.push(n);const s=e[a];"string"==typeof s?r[n]=`${n}=${wm(s)}`:Array.isArray(s)&&(r[n]=s.slice(0).reduce(((e,t)=>e.concat([`${n}=${wm(t)}`])),[]).sort().join("&"))}return t.sort().map((e=>r[e])).filter((e=>e)).join("&")})(e)}\n${a.map((e=>`${e}:${t[e]}`)).join("\n")}\n\n${a.join(";")}\n${r}`}async createStringToSign(e,t,r,a){const n=new this.sha256;n.update(dm(r));return`${a}\n${e}\n${t}\n${Dm(await n.digest())}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const a of e.split("/"))0!==(null==a?void 0:a.length)&&"."!==a&&(".."===a?t.pop():t.push(a));const r=`${(null==e?void 0:e.startsWith("/"))?"/":""}${t.join("/")}${t.length>0&&(null==e?void 0:e.endsWith("/"))?"/":""}`;return wm(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")}formatDate(e){const t=(r=e,Vh(r).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");var r;return{longDate:t,shortDate:t.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class Wh extends Gh{constructor({applyChecksum:e,credentials:t,region:r,service:a,sha256:n,uriEscapePath:s=!0}){super({applyChecksum:e,credentials:t,region:r,service:a,sha256:n,uriEscapePath:s}),this.headerFormatter=new Lh}async presign(e,t={}){const{signingDate:r=new Date,expiresIn:a=3600,unsignableHeaders:n,unhoistableHeaders:s,signableHeaders:i,hoistableHeaders:l,signingRegion:o,signingService:c}=t,d=await this.credentialProvider();this.validateResolvedCredentials(d);const u=o??await this.regionProvider(),{longDate:m,shortDate:h}=this.formatDate(r);if(a>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const p=zh(h,u,c??this.service),x=((e,t={})=>{var r,a;const{headers:n,query:s={}}=ku.clone(e);for(const i of Object.keys(n)){const e=i.toLowerCase();("x-amz-"===e.slice(0,6)&&!(null==(r=t.unhoistableHeaders)?void 0:r.has(e))||(null==(a=t.hoistableHeaders)?void 0:a.has(e)))&&(s[i]=n[i],delete n[i])}return{...e,headers:n,query:s}})(Yh(e),{unhoistableHeaders:s,hoistableHeaders:l});d.sessionToken&&(x.query[bh]=d.sessionToken),x.query["X-Amz-Algorithm"]=Ph,x.query["X-Amz-Credential"]=`${d.accessKeyId}/${p}`,x.query[yh]=m,x.query["X-Amz-Expires"]=a.toString(10);const g=Ih(x,n,i);return x.query["X-Amz-SignedHeaders"]=this.getCanonicalHeaderList(g),x.query[vh]=await this.getSignature(m,p,this.getSigningKey(d,u,h,c),this.createCanonicalRequest(x,g,await Bh(e,this.sha256))),x}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:a,signingRegion:n,signingService:s}){const i=n??await this.regionProvider(),{shortDate:l,longDate:o}=this.formatDate(r),c=zh(l,i,s??this.service),d=await Bh({headers:{},body:t},this.sha256),u=new this.sha256;u.update(e);const m=Dm(await u.digest()),h=[Ah,o,c,a,m,d].join("\n");return this.signString(h,{signingDate:r,signingRegion:i,signingService:s})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:a}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:a,priorSignature:e.priorSignature}).then((t=>({message:e.message,signature:t})))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:a}={}){const n=await this.credentialProvider();this.validateResolvedCredentials(n);const s=r??await this.regionProvider(),{shortDate:i}=this.formatDate(t),l=new this.sha256(await this.getSigningKey(n,s,i,a));return l.update(dm(e)),Dm(await l.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:a,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const l=n??await this.regionProvider(),o=Yh(e),{longDate:c,shortDate:d}=this.formatDate(t),u=zh(d,l,s??this.service);o.headers[kh]=c,i.sessionToken&&(o.headers[Sh]=i.sessionToken);const m=await Bh(o,this.sha256);!((e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1})(_h,o.headers)&&this.applyChecksum&&(o.headers[_h]=m);const h=Ih(o,a,r),p=await this.getSignature(c,u,this.getSigningKey(i,l,d,s),this.createCanonicalRequest(o,h,m));return o.headers[jh]=`${Ph} Credential=${i.accessKeyId}/${u}, SignedHeaders=${this.getCanonicalHeaderList(h)}, Signature=${p}`,o}async getSignature(e,t,r,a){const n=await this.createStringToSign(e,t,a,Ph),s=new this.sha256(await r);return s.update(dm(n)),Dm(await s.digest())}getSigningKey(e,t,r,a){return(async(e,t,r,a,n)=>{const s=`${r}:${a}:${n}:${Dm(await Rh(e,t.secretAccessKey,t.accessKeyId))}:${t.sessionToken}`;if(s in Dh)return Dh[s];for(Mh.push(s);Mh.length>50;)delete Dh[Mh.shift()];let i=`AWS4${t.secretAccessKey}`;for(const l of[r,a,n,Eh])i=await Rh(e,i,l);return Dh[s]=i})(this.sha256,e,r,t,a||this.service)}}const Qh=e=>{let t,r=e.credentials,a=!!e.credentials;Object.defineProperty(e,"credentials",{set(n){n&&n!==r&&n!==t&&(a=!0),r=n;const s=function(e,{credentials:t,credentialDefaultProvider:r}){let a;a=t?(null==t?void 0:t.memoized)?t:((e,t,r)=>{if(void 0===e)return;const a="function"!=typeof e?async()=>Promise.resolve(e):e;let n,s,i,l=!1;const o=async e=>{s||(s=a(e));try{n=await s,i=!0,l=!1}finally{s=void 0}return n};return void 0===t?async e=>(i&&!(null==e?void 0:e.forceRefresh)||(n=await o(e)),n):async e=>(i&&!(null==e?void 0:e.forceRefresh)||(n=await o(e)),l?n:r(n)?t(n)?(await o(e),n):n:(l=!0,n))})(t,ph,gh):r?sm(r(Object.assign({},e,{parentClientConfig:e}))):async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")};return a.memoized=!0,a}(e,{credentials:r,credentialDefaultProvider:e.credentialDefaultProvider}),i=function(e,t){if(t.configBound)return t;const r=async r=>t({...r,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}(e,s);a&&!i.attributed?(t=async e=>i(e).then((e=>function(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}(e,"CREDENTIALS_CODE","e"))),t.memoized=i.memoized,t.configBound=i.configBound,t.attributed=!0):t=i},get:()=>t,enumerable:!0,configurable:!0}),e.credentials=r;const{signingEscapePath:n=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:i}=e;let l;l=e.signer?sm(e.signer):e.regionInfoProvider?()=>sm(e.region)().then((async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t])).then((([t,r])=>{const{signingRegion:a,signingService:s}=t;e.signingRegion=e.signingRegion||a||r,e.signingName=e.signingName||s||e.serviceId;const l={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n};return new(e.signerConstructor||Wh)(l)})):async t=>{const r=(t=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await sm(e.region)(),properties:{}},t)).signingRegion,a=t.signingName;e.signingRegion=e.signingRegion||r,e.signingName=e.signingName||a||e.serviceId;const s={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n};return new(e.signerConstructor||Wh)(s)};return Object.assign(e,{systemClockOffset:s,signingEscapePath:n,signer:l})};const Xh="function"==typeof TextEncoder?new TextEncoder:null,Zh=e=>{if("string"==typeof e){if(Xh)return Xh.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){const a=e.charCodeAt(r);a>127&&a<=2047?t++:a>2047&&a<=65535&&(t+=2),a>=56320&&a<=57343&&r--}return t}if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;throw new Error(`Body Length computation failed for ${e}`)},Jh=(e,t)=>{const r=[];if(e&&r.push(e),t)for(const a of t)r.push(a);return r},ep=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,tp=()=>{let e=[],t=[],r=!1;const a=new Set,n=r=>{var a;return e.forEach((e=>{r.add(e.middleware,{...e})})),t.forEach((e=>{r.addRelativeTo(e.middleware,{...e})})),null==(a=r.identifyOnResolve)||a.call(r,l.identifyOnResolve()),r},s=e=>{const t=[];return e.before.forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...s(e))})),t.push(e),e.after.reverse().forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...s(e))})),t},i=(r=!1)=>{const a=[],n=[],i={};e.forEach((e=>{const t={...e,before:[],after:[]};for(const r of Jh(t.name,t.aliases))i[r]=t;a.push(t)})),t.forEach((e=>{const t={...e,before:[],after:[]};for(const r of Jh(t.name,t.aliases))i[r]=t;n.push(t)})),n.forEach((e=>{if(e.toMiddleware){const t=i[e.toMiddleware];if(void 0===t){if(r)return;throw new Error(`${e.toMiddleware} is not found when adding ${ep(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}));var l;return(l=a,l.sort(((e,t)=>rp[t.step]-rp[e.step]||ap[t.priority||"normal"]-ap[e.priority||"normal"]))).map(s).reduce(((e,t)=>(e.push(...t),e)),[])},l={add:(t,r={})=>{const{name:n,override:s,aliases:i}=r,l={step:"initialize",priority:"normal",middleware:t,...r},o=Jh(n,i);if(o.length>0){if(o.some((e=>a.has(e)))){if(!s)throw new Error(`Duplicate middleware name '${ep(n,i)}'`);for(const t of o){const r=e.findIndex((e=>{var r;return e.name===t||(null==(r=e.aliases)?void 0:r.some((e=>e===t)))}));if(-1===r)continue;const a=e[r];if(a.step!==l.step||l.priority!==a.priority)throw new Error(`"${ep(a.name,a.aliases)}" middleware with ${a.priority} priority in ${a.step} step cannot be overridden by "${ep(n,i)}" middleware with ${l.priority} priority in ${l.step} step.`);e.splice(r,1)}}for(const e of o)a.add(e)}e.push(l)},addRelativeTo:(e,r)=>{const{name:n,override:s,aliases:i}=r,l={middleware:e,...r},o=Jh(n,i);if(o.length>0){if(o.some((e=>a.has(e)))){if(!s)throw new Error(`Duplicate middleware name '${ep(n,i)}'`);for(const e of o){const r=t.findIndex((t=>{var r;return t.name===e||(null==(r=t.aliases)?void 0:r.some((t=>t===e)))}));if(-1===r)continue;const a=t[r];if(a.toMiddleware!==l.toMiddleware||a.relation!==l.relation)throw new Error(`"${ep(a.name,a.aliases)}" middleware ${a.relation} "${a.toMiddleware}" middleware cannot be overridden by "${ep(n,i)}" middleware ${l.relation} "${l.toMiddleware}" middleware.`);t.splice(r,1)}}for(const e of o)a.add(e)}t.push(l)},clone:()=>n(tp()),use:e=>{e.applyToStack(l)},remove:r=>"string"==typeof r?(r=>{let n=!1;const s=e=>{const t=Jh(e.name,e.aliases);if(t.includes(r)){n=!0;for(const e of t)a.delete(e);return!1}return!0};return e=e.filter(s),t=t.filter(s),n})(r):(r=>{let n=!1;const s=e=>{if(e.middleware===r){n=!0;for(const t of Jh(e.name,e.aliases))a.delete(t);return!1}return!0};return e=e.filter(s),t=t.filter(s),n})(r),removeByTag:r=>{let n=!1;const s=e=>{const{tags:t,name:s,aliases:i}=e;if(t&&t.includes(r)){const e=Jh(s,i);for(const t of e)a.delete(t);return n=!0,!1}return!0};return e=e.filter(s),t=t.filter(s),n},concat:e=>{var t;const a=n(tp());return a.use(e),a.identifyOnResolve(r||a.identifyOnResolve()||((null==(t=e.identifyOnResolve)?void 0:t.call(e))??!1)),a},applyToStack:n,identify:()=>i(!0).map((e=>{const t=e.step??e.relation+" "+e.toMiddleware;return ep(e.name,e.aliases)+" - "+t})),identifyOnResolve:e=>("boolean"==typeof e&&(r=e),r),resolve:(e,t)=>{for(const r of i().map((e=>e.middleware)).reverse())e=r(e,t);return e}};return l},rp={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},ap={high:3,normal:2,low:1};class np{constructor(e){this.config=e,this.middlewareStack=tp()}send(e,t,r){const a="function"!=typeof t?t:void 0,n="function"==typeof t?t:r;let s;if(void 0===a&&!0===this.config.cacheMiddleware){this.handlers||(this.handlers=new WeakMap);const t=this.handlers;t.has(e.constructor)?s=t.get(e.constructor):(s=e.resolveMiddleware(this.middlewareStack,this.config,a),t.set(e.constructor,s))}else delete this.handlers,s=e.resolveMiddleware(this.middlewareStack,this.config,a);if(!n)return s(e).then((e=>e.output));s(e).then((e=>n(null,e.output)),(e=>n(e))).catch((()=>{}))}destroy(){var e,t,r;null==(r=null==(t=null==(e=this.config)?void 0:e.requestHandler)?void 0:t.destroy)||r.call(t),delete this.handlers}}let sp=class{constructor(){this.middlewareStack=tp()}static classBuilder(){return new ip}resolveMiddlewareWithContext(e,t,r,{middlewareFn:a,clientName:n,commandName:s,inputFilterSensitiveLog:i,outputFilterSensitiveLog:l,smithyContext:o,additionalContext:c,CommandCtor:d}){for(const x of a.bind(this)(d,e,t,r))this.middlewareStack.use(x);const u=e.concat(this.middlewareStack),{logger:m}=t,h={logger:m,clientName:n,commandName:s,inputFilterSensitiveLog:i,outputFilterSensitiveLog:l,[fu]:{commandInstance:this,...o},...c},{requestHandler:p}=t;return u.resolve((e=>p.handle(e.request,r||{})),h)}};class ip{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,r={}){return this._smithyContext={service:e,operation:t,...r},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let t;return t=class extends sp{static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=t??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(r,a,n){return this.resolveMiddlewareWithContext(r,a,n,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const lp="***SensitiveInformation***";class op extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const t=e;return op.prototype.isPrototypeOf(t)||Boolean(t.$fault)&&Boolean(t.$metadata)&&("client"===t.$fault||"server"===t.$fault)}static[Symbol.hasInstance](e){if(!e)return!1;const t=e;return this===op?op.isInstance(e):!!op.isInstance(e)&&(t.name&&this.name?this.prototype.isPrototypeOf(e)||t.name===this.name:this.prototype.isPrototypeOf(e))}}const cp=(e,t={})=>{Object.entries(t).filter((([,e])=>void 0!==e)).forEach((([t,r])=>{null!=e[t]&&""!==e[t]||(e[t]=r)}));const r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},dp=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),up=e=>{switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},mp=e=>Object.assign((e=>{const t=[];for(const r in hu){const a=hu[r];void 0!==e[a]&&t.push({algorithmId:()=>a,checksumConstructor:()=>e[a]})}return{addChecksumAlgorithm(e){t.push(e)},checksumAlgorithms:()=>t}})(e),(e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy:()=>e.retryStrategy}))(e)),hp=e=>{const t="#text";for(const r in e)e.hasOwnProperty(r)&&void 0!==e[r][t]?e[r]=e[r][t]:"object"==typeof e[r]&&null!==e[r]&&(e[r]=hp(e[r]));return e},pp=e=>null!=e;class xp{trace(){}debug(){}info(){}warn(){}error(){}}function gp(e,t,r){let a,n,s;if(void 0===t&&void 0===r)a={},s=e;else{if(a=e,"function"==typeof t)return n=t,s=r,fp(a,n,s);s=t}for(const i of Object.keys(s))Array.isArray(s[i])?yp(a,null,s,i):a[i]=s[i];return a}const fp=(e,t,r)=>gp(e,Object.entries(r).reduce(((e,[r,a])=>(Array.isArray(a)?e[r]=a:e[r]="function"==typeof a?[t,a()]:[t,a],e)),{})),yp=(e,t,r,a)=>{let[n,s]=r[a];if("function"==typeof s){let t;const r=void 0===n&&null!=(t=s()),i="function"==typeof n&&!!n(void 0)||"function"!=typeof n&&!!n;r?e[a]=t:i&&(e[a]=s())}else{const t=void 0===n&&null!=s,r="function"==typeof n&&!!n(s)||"function"!=typeof n&&!!n;(t||r)&&(e[a]=s)}};var vp={},bp={};!function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+t+"]["+(t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*",a=new RegExp("^"+r+"$");e.isExist=function(e){return void 0!==e},e.isEmptyObject=function(e){return 0===Object.keys(e).length},e.merge=function(e,t,r){if(t){const a=Object.keys(t),n=a.length;for(let s=0;s<n;s++)e[a[s]]="strict"===r?[t[a[s]]]:t[a[s]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.isName=function(e){const t=a.exec(e);return!(null==t)},e.getAllMatches=function(e,t){const r=[];let a=t.exec(e);for(;a;){const n=[];n.startIndex=t.lastIndex-a[0].length;const s=a.length;for(let e=0;e<s;e++)n.push(a[e]);r.push(n),a=t.exec(e)}return r},e.nameRegexp=r}(bp);const jp=bp,kp={allowBooleanAttributes:!1,unpairedTags:[]};function wp(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function Np(e,t){const r=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const a=e.substr(r,t-r);if(t>5&&"xml"===a)return Ep("InvalidXml","XML declaration allowed only at the start of the document.",Mp(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function _p(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&(r--,0===r))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}vp.validate=function(e,t){t=Object.assign({},kp,t);const r=[];let a=!1,n=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let i=0;i<e.length;i++)if("<"===e[i]&&"?"===e[i+1]){if(i+=2,i=Np(e,i),i.err)return i}else{if("<"!==e[i]){if(wp(e[i]))continue;return Ep("InvalidChar","char '"+e[i]+"' is not expected.",Mp(e,i))}{let l=i;if(i++,"!"===e[i]){i=_p(e,i);continue}{let o=!1;"/"===e[i]&&(o=!0,i++);let c="";for(;i<e.length&&">"!==e[i]&&" "!==e[i]&&"\t"!==e[i]&&"\n"!==e[i]&&"\r"!==e[i];i++)c+=e[i];if(c=c.trim(),"/"===c[c.length-1]&&(c=c.substring(0,c.length-1),i--),s=c,!jp.isName(s)){let t;return t=0===c.trim().length?"Invalid space after '<'.":"Tag '"+c+"' is an invalid name.",Ep("InvalidTag",t,Mp(e,i))}const d=Tp(e,i);if(!1===d)return Ep("InvalidAttr","Attributes for '"+c+"' have open quote.",Mp(e,i));let u=d.value;if(i=d.index,"/"===u[u.length-1]){const r=i-u.length;u=u.substring(0,u.length-1);const n=Pp(u,t);if(!0!==n)return Ep(n.err.code,n.err.msg,Mp(e,r+n.err.line));a=!0}else if(o){if(!d.tagClosed)return Ep("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",Mp(e,i));if(u.trim().length>0)return Ep("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",Mp(e,l));if(0===r.length)return Ep("InvalidTag","Closing tag '"+c+"' has not been opened.",Mp(e,l));{const t=r.pop();if(c!==t.tagName){let r=Mp(e,t.tagStartPos);return Ep("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+c+"'.",Mp(e,l))}0==r.length&&(n=!0)}}else{const s=Pp(u,t);if(!0!==s)return Ep(s.err.code,s.err.msg,Mp(e,i-u.length+s.err.line));if(!0===n)return Ep("InvalidXml","Multiple possible root nodes found.",Mp(e,i));-1!==t.unpairedTags.indexOf(c)||r.push({tagName:c,tagStartPos:l}),a=!0}for(i++;i<e.length;i++)if("<"===e[i]){if("!"===e[i+1]){i++,i=_p(e,i);continue}if("?"!==e[i+1])break;if(i=Np(e,++i),i.err)return i}else if("&"===e[i]){const t=Ap(e,i);if(-1==t)return Ep("InvalidChar","char '&' is not expected.",Mp(e,i));i=t}else if(!0===n&&!wp(e[i]))return Ep("InvalidXml","Extra text at the end",Mp(e,i));"<"===e[i]&&i--}}}var s;return a?1==r.length?Ep("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Mp(e,r[0].tagStartPos)):!(r.length>0)||Ep("InvalidXml","Invalid '"+JSON.stringify(r.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):Ep("InvalidXml","Start tag expected.",1)};const Sp='"',Cp="'";function Tp(e,t){let r="",a="",n=!1;for(;t<e.length;t++){if(e[t]===Sp||e[t]===Cp)""===a?a=e[t]:a!==e[t]||(a="");else if(">"===e[t]&&""===a){n=!0;break}r+=e[t]}return""===a&&{value:r,index:t,tagClosed:n}}const Op=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function Pp(e,t){const r=jp.getAllMatches(e,Op),a={};for(let n=0;n<r.length;n++){if(0===r[n][1].length)return Ep("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",zp(r[n]));if(void 0!==r[n][3]&&void 0===r[n][4])return Ep("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",zp(r[n]));if(void 0===r[n][3]&&!t.allowBooleanAttributes)return Ep("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",zp(r[n]));const e=r[n][2];if(!Dp(e))return Ep("InvalidAttr","Attribute '"+e+"' is an invalid name.",zp(r[n]));if(a.hasOwnProperty(e))return Ep("InvalidAttr","Attribute '"+e+"' is repeated.",zp(r[n]));a[e]=1}return!0}function Ap(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function Ep(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Dp(e){return jp.isName(e)}function Mp(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function zp(e){return e.startIndex+e[1].length}var Rp={};const Ip={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}};Rp.buildOptions=function(e){return Object.assign({},Ip,e)},Rp.defaultOptions=Ip;const Fp=bp;function Bp(e,t){let r="";for(;t<e.length&&"'"!==e[t]&&'"'!==e[t];t++)r+=e[t];if(r=r.trim(),-1!==r.indexOf(" "))throw new Error("External entites are not supported");const a=e[t++];let n="";for(;t<e.length&&e[t]!==a;t++)n+=e[t];return[r,n,t]}function Lp(e,t){return"!"===e[t+1]&&"-"===e[t+2]&&"-"===e[t+3]}function qp(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"N"===e[t+3]&&"T"===e[t+4]&&"I"===e[t+5]&&"T"===e[t+6]&&"Y"===e[t+7]}function $p(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"L"===e[t+3]&&"E"===e[t+4]&&"M"===e[t+5]&&"E"===e[t+6]&&"N"===e[t+7]&&"T"===e[t+8]}function Kp(e,t){return"!"===e[t+1]&&"A"===e[t+2]&&"T"===e[t+3]&&"T"===e[t+4]&&"L"===e[t+5]&&"I"===e[t+6]&&"S"===e[t+7]&&"T"===e[t+8]}function Up(e,t){return"!"===e[t+1]&&"N"===e[t+2]&&"O"===e[t+3]&&"T"===e[t+4]&&"A"===e[t+5]&&"T"===e[t+6]&&"I"===e[t+7]&&"O"===e[t+8]&&"N"===e[t+9]}function Hp(e){if(Fp.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}const Yp=/^[-+]?0x[a-fA-F0-9]+$/,Vp=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Gp={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};var Wp=function(e,t={}){if(t=Object.assign({},Gp,t),!e||"string"!=typeof e)return e;let r=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(r))return e;if("0"===e)return 0;if(t.hex&&Yp.test(r))return function(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(r,16);if(-1!==r.search(/[eE]/)){const a=r.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(a){if(t.leadingZeros)r=(a[1]||"")+a[3];else if("0"!==a[2]||"."!==a[3][0])return e;return t.eNotation?Number(r):e}return e}{const a=Vp.exec(r);if(a){const n=a[1],s=a[2];let i=function(e){if(e&&-1!==e.indexOf("."))return"."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substr(0,e.length-1)),e;return e}(a[3]);if(!t.leadingZeros&&s.length>0&&n&&"."!==r[2])return e;if(!t.leadingZeros&&s.length>0&&!n&&"."!==r[1])return e;if(t.leadingZeros&&s===e)return 0;{const a=Number(r),l=""+a;return-1!==l.search(/[eE]/)?t.eNotation?a:e:-1!==r.indexOf(".")?"0"===l&&""===i||l===i||n&&l==="-"+i?a:e:s?i===l||n+i===l?a:e:r===l||r===n+l?a:e}}return e}};const Qp=bp,Xp=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}},Zp=function(e,t){const r={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let a=1,n=!1,s=!1,i="";for(;t<e.length;t++)if("<"!==e[t]||s)if(">"===e[t]){if(s?"-"===e[t-1]&&"-"===e[t-2]&&(s=!1,a--):a--,0===a)break}else"["===e[t]?n=!0:i+=e[t];else{if(n&&qp(e,t))t+=7,[entityName,val,t]=Bp(e,t+1),-1===val.indexOf("&")&&(r[Hp(entityName)]={regx:RegExp(`&${entityName};`,"g"),val:val});else if(n&&$p(e,t))t+=8;else if(n&&Kp(e,t))t+=8;else if(n&&Up(e,t))t+=9;else{if(!Lp)throw new Error("Invalid DOCTYPE");s=!0}a++,i=""}if(0!==a)throw new Error("Unclosed DOCTYPE")}return{entities:r,i:t}},Jp=Wp;function ex(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const a=t[r];this.lastEntities[a]={regex:new RegExp("&"+a+";","g"),val:e[a]}}}function tx(e,t,r,a,n,s,i){if(void 0!==e&&(this.options.trimValues&&!a&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));const a=this.options.tagValueProcessor(t,e,r,n,s);if(null==a)return e;if(typeof a!=typeof e||a!==e)return a;if(this.options.trimValues)return hx(e,this.options.parseTagValue,this.options.numberParseOptions);return e.trim()===e?hx(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function rx(e){if(this.options.removeNSPrefix){const t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}const ax=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function nx(e,t,r){if(!this.options.ignoreAttributes&&"string"==typeof e){const r=Qp.getAllMatches(e,ax),a=r.length,n={};for(let e=0;e<a;e++){const a=this.resolveNameSpace(r[e][1]);let s=r[e][4],i=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(i=this.options.transformAttributeName(i)),"__proto__"===i&&(i="#__proto__"),void 0!==s){this.options.trimValues&&(s=s.trim()),s=this.replaceEntitiesValue(s);const e=this.options.attributeValueProcessor(a,s,t);n[i]=null==e?s:typeof e!=typeof s||e!==s?e:hx(s,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(n[i]=!0)}if(!Object.keys(n).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=n,e}return n}}const sx=function(e){e=e.replace(/\r\n?/g,"\n");const t=new Xp("!xml");let r=t,a="",n="";for(let s=0;s<e.length;s++){if("<"===e[s])if("/"===e[s+1]){const t=dx(e,">",s,"Closing Tag is not closed.");let i=e.substring(s+2,t).trim();if(this.options.removeNSPrefix){const e=i.indexOf(":");-1!==e&&(i=i.substr(e+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),r&&(a=this.saveTextToParentTag(a,r,n));const l=n.substring(n.lastIndexOf(".")+1);if(i&&-1!==this.options.unpairedTags.indexOf(i))throw new Error(`Unpaired tag can not be used as closing tag: </${i}>`);let o=0;l&&-1!==this.options.unpairedTags.indexOf(l)?(o=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):o=n.lastIndexOf("."),n=n.substring(0,o),r=this.tagsNodeStack.pop(),a="",s=t}else if("?"===e[s+1]){let t=ux(e,s,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(a=this.saveTextToParentTag(a,r,n),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new Xp(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,n,t.tagName)),this.addChild(r,e,n)}s=t.closeIndex+1}else if("!--"===e.substr(s+1,3)){const t=dx(e,"--\x3e",s+4,"Comment is not closed.");if(this.options.commentPropName){const i=e.substring(s+4,t-2);a=this.saveTextToParentTag(a,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}s=t}else if("!D"===e.substr(s+1,2)){const t=Zp(e,s);this.docTypeEntities=t.entities,s=t.i}else if("!["===e.substr(s+1,2)){const t=dx(e,"]]>",s,"CDATA is not closed.")-2,i=e.substring(s+9,t);a=this.saveTextToParentTag(a,r,n);let l=this.parseTextData(i,r.tagname,n,!0,!1,!0,!0);null==l&&(l=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]):r.add(this.options.textNodeName,l),s=t+2}else{let i=ux(e,s,this.options.removeNSPrefix),l=i.tagName;const o=i.rawTagName;let c=i.tagExp,d=i.attrExpPresent,u=i.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&a&&"!xml"!==r.tagname&&(a=this.saveTextToParentTag(a,r,n,!1));const m=r;if(m&&-1!==this.options.unpairedTags.indexOf(m.tagname)&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),l!==t.tagname&&(n+=n?"."+l:l),this.isItStopNode(this.options.stopNodes,n,l)){let t="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)"/"===l[l.length-1]?(l=l.substr(0,l.length-1),n=n.substr(0,n.length-1),c=l):c=c.substr(0,c.length-1),s=i.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(l))s=i.closeIndex;else{const r=this.readStopNodeData(e,o,u+1);if(!r)throw new Error(`Unexpected end of ${o}`);s=r.i,t=r.tagContent}const a=new Xp(l);l!==c&&d&&(a[":@"]=this.buildAttributesMap(c,n,l)),t&&(t=this.parseTextData(t,l,n,!0,d,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),a.add(this.options.textNodeName,t),this.addChild(r,a,n)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){"/"===l[l.length-1]?(l=l.substr(0,l.length-1),n=n.substr(0,n.length-1),c=l):c=c.substr(0,c.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const e=new Xp(l);l!==c&&d&&(e[":@"]=this.buildAttributesMap(c,n,l)),this.addChild(r,e,n),n=n.substr(0,n.lastIndexOf("."))}else{const e=new Xp(l);this.tagsNodeStack.push(r),l!==c&&d&&(e[":@"]=this.buildAttributesMap(c,n,l)),this.addChild(r,e,n),r=e}a="",s=u}}else a+=e[s]}return t.child};function ix(e,t,r){const a=this.options.updateTag(t.tagname,r,t[":@"]);!1===a||("string"==typeof a?(t.tagname=a,e.addChild(t)):e.addChild(t))}const lx=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){const r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function ox(e,t,r,a){return e&&(void 0===a&&(a=0===Object.keys(t.child).length),void 0!==(e=this.parseTextData(e,t.tagname,r,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,a))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function cx(e,t,r){const a="*."+r;for(const n in e){const r=e[n];if(a===r||t===r)return!0}return!1}function dx(e,t,r,a){const n=e.indexOf(t,r);if(-1===n)throw new Error(a);return n+t.length-1}function ux(e,t,r,a=">"){const n=function(e,t,r=">"){let a,n="";for(let s=t;s<e.length;s++){let t=e[s];if(a)t===a&&(a="");else if('"'===t||"'"===t)a=t;else if(t===r[0]){if(!r[1])return{data:n,index:s};if(e[s+1]===r[1])return{data:n,index:s}}else"\t"===t&&(t=" ");n+=t}}(e,t+1,a);if(!n)return;let s=n.data;const i=n.index,l=s.search(/\s/);let o=s,c=!0;-1!==l&&(o=s.substring(0,l),s=s.substring(l+1).trimStart());const d=o;if(r){const e=o.indexOf(":");-1!==e&&(o=o.substr(e+1),c=o!==n.data.substr(e+1))}return{tagName:o,tagExp:s,closeIndex:i,attrExpPresent:c,rawTagName:d}}function mx(e,t,r){const a=r;let n=1;for(;r<e.length;r++)if("<"===e[r])if("/"===e[r+1]){const s=dx(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(n--,0===n))return{tagContent:e.substring(a,r),i:s};r=s}else if("?"===e[r+1]){r=dx(e,"?>",r+1,"StopNode is not closed.")}else if("!--"===e.substr(r+1,3)){r=dx(e,"--\x3e",r+3,"StopNode is not closed.")}else if("!["===e.substr(r+1,2)){r=dx(e,"]]>",r,"StopNode is not closed.")-2}else{const a=ux(e,r,">");if(a){(a&&a.tagName)===t&&"/"!==a.tagExp[a.tagExp.length-1]&&n++,r=a.closeIndex}}}function hx(e,t,r){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&Jp(e,r)}return Qp.isExist(e)?e:""}var px=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,16))}},this.addExternalEntities=ex,this.parseXml=sx,this.parseTextData=tx,this.resolveNameSpace=rx,this.buildAttributesMap=nx,this.isItStopNode=cx,this.replaceEntitiesValue=lx,this.readStopNodeData=mx,this.saveTextToParentTag=ox,this.addChild=ix}},xx={};function gx(e,t,r){let a;const n={};for(let s=0;s<e.length;s++){const i=e[s],l=fx(i);let o="";if(o=void 0===r?l:r+"."+l,l===t.textNodeName)void 0===a?a=i[l]:a+=""+i[l];else{if(void 0===l)continue;if(i[l]){let e=gx(i[l],t,o);const r=vx(e,t);i[":@"]?yx(e,i[":@"],o,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==n[l]&&n.hasOwnProperty(l)?(Array.isArray(n[l])||(n[l]=[n[l]]),n[l].push(e)):t.isArray(l,o,r)?n[l]=[e]:n[l]=e}}}return"string"==typeof a?a.length>0&&(n[t.textNodeName]=a):void 0!==a&&(n[t.textNodeName]=a),n}function fx(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const e=t[r];if(":@"!==e)return e}}function yx(e,t,r,a){if(t){const n=Object.keys(t),s=n.length;for(let i=0;i<s;i++){const s=n[i];a.isArray(s,r+"."+s,!0,!0)?e[s]=[t[s]]:e[s]=t[s]}}}function vx(e,t){const{textNodeName:r}=t,a=Object.keys(e).length;return 0===a||!(1!==a||!e[r]&&"boolean"!=typeof e[r]&&0!==e[r])}xx.prettify=function(e,t){return gx(e,t)};const{buildOptions:bx}=Rp,jx=px,{prettify:kx}=xx,wx=vp;var Nx=class{constructor(e){this.externalEntities={},this.options=bx(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const r=wx.validate(e,t);if(!0!==r)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}const r=new jx(this.options);r.addExternalEntities(this.externalEntities);const a=r.parseXml(e);return this.options.preserveOrder||void 0===a?a:kx(a,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};function _x(e,t,r,a){let n="",s=!1;for(let i=0;i<e.length;i++){const l=e[i],o=Sx(l);if(void 0===o)continue;let c="";if(c=0===r.length?o:`${r}.${o}`,o===t.textNodeName){let e=l[o];Tx(c,t)||(e=t.tagValueProcessor(o,e),e=Ox(e,t)),s&&(n+=a),n+=e,s=!1;continue}if(o===t.cdataPropName){s&&(n+=a),n+=`<![CDATA[${l[o][0][t.textNodeName]}]]>`,s=!1;continue}if(o===t.commentPropName){n+=a+`\x3c!--${l[o][0][t.textNodeName]}--\x3e`,s=!0;continue}if("?"===o[0]){const e=Cx(l[":@"],t),r="?xml"===o?"":a;let i=l[o][0][t.textNodeName];i=0!==i.length?" "+i:"",n+=r+`<${o}${i}${e}?>`,s=!0;continue}let d=a;""!==d&&(d+=t.indentBy);const u=a+`<${o}${Cx(l[":@"],t)}`,m=_x(l[o],t,c,d);-1!==t.unpairedTags.indexOf(o)?t.suppressUnpairedNode?n+=u+">":n+=u+"/>":m&&0!==m.length||!t.suppressEmptyNode?m&&m.endsWith(">")?n+=u+`>${m}${a}</${o}>`:(n+=u+">",m&&""!==a&&(m.includes("/>")||m.includes("</"))?n+=a+t.indentBy+m+a:n+=m,n+=`</${o}>`):n+=u+"/>",s=!0}return n}function Sx(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const a=t[r];if(e.hasOwnProperty(a)&&":@"!==a)return a}}function Cx(e,t){let r="";if(e&&!t.ignoreAttributes)for(let a in e){if(!e.hasOwnProperty(a))continue;let n=t.attributeValueProcessor(a,e[a]);n=Ox(n,t),!0===n&&t.suppressBooleanAttributes?r+=` ${a.substr(t.attributeNamePrefix.length)}`:r+=` ${a.substr(t.attributeNamePrefix.length)}="${n}"`}return r}function Tx(e,t){let r=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(let a in t.stopNodes)if(t.stopNodes[a]===e||t.stopNodes[a]==="*."+r)return!0;return!1}function Ox(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){const a=t.entities[r];e=e.replace(a.regex,a.val)}return e}var Px=function(e,t){let r="";return t.format&&t.indentBy.length>0&&(r="\n"),_x(e,t,"",r)};const Ax=Px,Ex={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Dx(e){this.options=Object.assign({},Ex,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Rx),this.processTextOrObjNode=Mx,this.options.format?(this.indentate=zx,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function Mx(e,t,r){const a=this.j2x(e,r+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextValNode(e[this.options.textNodeName],t,a.attrStr,r):this.buildObjectNode(a.val,t,a.attrStr,r)}function zx(e){return this.options.indentBy.repeat(e)}function Rx(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}Dx.prototype.build=function(e){return this.options.preserveOrder?Ax(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)},Dx.prototype.j2x=function(e,t){let r="",a="";for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n))if(void 0===e[n])this.isAttribute(n)&&(a+="");else if(null===e[n])this.isAttribute(n)?a+="":"?"===n[0]?a+=this.indentate(t)+"<"+n+"?"+this.tagEndChar:a+=this.indentate(t)+"<"+n+"/"+this.tagEndChar;else if(e[n]instanceof Date)a+=this.buildTextValNode(e[n],n,"",t);else if("object"!=typeof e[n]){const s=this.isAttribute(n);if(s)r+=this.buildAttrPairStr(s,""+e[n]);else if(n===this.options.textNodeName){let t=this.options.tagValueProcessor(n,""+e[n]);a+=this.replaceEntitiesValue(t)}else a+=this.buildTextValNode(e[n],n,"",t)}else if(Array.isArray(e[n])){const r=e[n].length;let s="",i="";for(let l=0;l<r;l++){const r=e[n][l];if(void 0===r);else if(null===r)"?"===n[0]?a+=this.indentate(t)+"<"+n+"?"+this.tagEndChar:a+=this.indentate(t)+"<"+n+"/"+this.tagEndChar;else if("object"==typeof r)if(this.options.oneListGroup){const e=this.j2x(r,t+1);s+=e.val,this.options.attributesGroupName&&r.hasOwnProperty(this.options.attributesGroupName)&&(i+=e.attrStr)}else s+=this.processTextOrObjNode(r,n,t);else if(this.options.oneListGroup){let e=this.options.tagValueProcessor(n,r);e=this.replaceEntitiesValue(e),s+=e}else s+=this.buildTextValNode(r,n,"",t)}this.options.oneListGroup&&(s=this.buildObjectNode(s,n,i,t)),a+=s}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){const t=Object.keys(e[n]),a=t.length;for(let s=0;s<a;s++)r+=this.buildAttrPairStr(t[s],""+e[n][t[s]])}else a+=this.processTextOrObjNode(e[n],n,t);return{attrStr:r,val:a}},Dx.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'},Dx.prototype.buildObjectNode=function(e,t,r,a){if(""===e)return"?"===t[0]?this.indentate(a)+"<"+t+r+"?"+this.tagEndChar:this.indentate(a)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let n="</"+t+this.tagEndChar,s="";return"?"===t[0]&&(s="?",n=""),!r&&""!==r||-1!==e.indexOf("<")?!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===s.length?this.indentate(a)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(a)+"<"+t+r+s+this.tagEndChar+e+this.indentate(a)+n:this.indentate(a)+"<"+t+r+s+">"+e+n}},Dx.prototype.closeTag=function(e){let t="";return-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode||(t="/"):t=this.options.suppressEmptyNode?"/":`></${e}`,t},Dx.prototype.buildTextValNode=function(e,t,r,a){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(a)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(a)+`\x3c!--${e}--\x3e`+this.newLine;if("?"===t[0])return this.indentate(a)+"<"+t+r+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(t,e);return n=this.replaceEntitiesValue(n),""===n?this.indentate(a)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(a)+"<"+t+r+">"+n+"</"+t+this.tagEndChar}},Dx.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};var Ix={XMLParser:Nx,XMLValidator:vp,XMLBuilder:Dx};const Fx=(e,t)=>((e,t)=>Im(e,t).then((e=>t.utf8Encoder(e))))(e,t).then((e=>{if(e.length){const t=new Ix.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>""===t.trim()&&t.includes("\n")?"":void 0});let r;t.addEntity("#xD","\r"),t.addEntity("#10","\n");try{r=t.parse(e,!0)}catch(die){throw die&&"object"==typeof die&&Object.defineProperty(die,"$responseBodyText",{value:e}),die}const a="#text",n=Object.keys(r)[0],s=r[n];return s[a]&&(s[n]=s[a],delete s[a]),hp(s)}return{}})),Bx=async(e,t)=>{const r=await Fx(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Lx=[Eu.CRC32,Eu.CRC32C,Eu.CRC64NVME,Eu.SHA1,Eu.SHA256],qx=[Eu.SHA256,Eu.SHA1,Eu.CRC32,Eu.CRC32C,Eu.CRC64NVME],$x=e=>e===Eu.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`,Kx=e=>void 0!==e&&"string"!=typeof e&&!ArrayBuffer.isView(e)&&!Fh(e);var Ux="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function Hx(e){return e instanceof Uint8Array?e:"string"==typeof e?Ux(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function Yx(e){return"string"==typeof e?0===e.length:0===e.byteLength}function Vx(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}function Gx(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}var Wx=function(){function e(){this.crc32c=new Qx}return e.prototype.update=function(e){Yx(e)||this.crc32c.update(Hx(e))},e.prototype.digest=function(){return ae(this,void 0,void 0,(function(){return ne(this,(function(e){return[2,Vx(this.crc32c.digest())]}))}))},e.prototype.reset=function(){this.crc32c=new Qx},e}(),Qx=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,r;try{for(var a=se(e),n=a.next();!n.done;n=a.next()){var s=n.value;this.checksum=this.checksum>>>8^Xx[255&(this.checksum^s)]}}catch(i){t={error:i}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}(),Xx=Gx([0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697]),Zx=function(){function e(){this.crc32=new Jx}return e.prototype.update=function(e){Yx(e)||this.crc32.update(Hx(e))},e.prototype.digest=function(){return ae(this,void 0,void 0,(function(){return ne(this,(function(e){return[2,Vx(this.crc32.digest())]}))}))},e.prototype.reset=function(){this.crc32=new Jx},e}(),Jx=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,r;try{for(var a=se(e),n=a.next();!n.done;n=a.next()){var s=n.value;this.checksum=this.checksum>>>8^eg[255&(this.checksum^s)]}}catch(i){t={error:i}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}(),eg=Gx([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);const tg=(e,t)=>{switch(e){case Eu.MD5:return t.md5;case Eu.CRC32:return Zx;case Eu.CRC32C:return Wx;case Eu.CRC64NVME:throw new Error('Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. \nYou must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. \nFor more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt');case Eu.SHA1:return t.sha1;case Eu.SHA256:return t.sha256;default:throw new Error(`Unsupported checksum algorithm: ${e}`)}},rg=(e,t)=>{const r=new e;return r.update(dm(t||"")),r.digest()},ag={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},ng=(e,t)=>(r,a)=>async n=>{if(!ku.isInstance(n.request))return r(n);if(((e,t)=>{const r=e.toLowerCase();for(const a of Object.keys(t))if(a.toLowerCase().startsWith(r))return!0;return!1})("x-amz-checksum-",n.request.headers))return r(n);const{request:s,input:i}=n,{body:l,headers:o}=s,{base64Encoder:c,streamHasher:d}=e,{requestChecksumRequired:u,requestAlgorithmMember:m}=t,h=await e.requestChecksumCalculation(),p=null==m?void 0:m.name,x=null==m?void 0:m.httpHeader;p&&!i[p]&&(h===Su||u)&&(i[p]=Ru,x&&(o[x]=Ru));const g=((e,{requestChecksumRequired:t,requestAlgorithmMember:r,requestChecksumCalculation:a})=>{if(!r)return a===Su||t?Ru:void 0;if(!e[r])return;const n=e[r];if(!Lx.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${Lx}.`);return n})(i,{requestChecksumRequired:u,requestAlgorithmMember:null==m?void 0:m.name,requestChecksumCalculation:h});let f=l,y=o;if(g){switch(g){case Eu.CRC32:Bu(a,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case Eu.CRC32C:Bu(a,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case Eu.CRC64NVME:Bu(a,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case Eu.SHA1:Bu(a,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case Eu.SHA256:Bu(a,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y")}const t=$x(g),r=tg(g,e);if(Kx(l)){const{getAwsChunkedEncodingStream:n,bodyLengthChecker:s}=e;f=n("number"==typeof e.requestStreamBufferSize&&e.requestStreamBufferSize>=8192?vm(l,e.requestStreamBufferSize,a.logger):l,{base64Encoder:c,bodyLengthChecker:s,checksumLocationName:t,checksumAlgorithmFn:r,streamHasher:d}),y={...o,"content-encoding":o["content-encoding"]?`${o["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":o["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":t},delete y["content-length"]}else if(!((e,t)=>{const r=e.toLowerCase();for(const a of Object.keys(t))if(r===a.toLowerCase())return!0;return!1})(t,o)){const e=await rg(r,l);y={...o,[t]:c(e)}}}return await r({...n,request:{...s,headers:y,body:f}})},sg={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},ig=(e=[])=>{const t=[];for(const r of qx)e.includes(r)&&Lx.includes(r)&&t.push(r);return t},lg=async(e,{checksumAlgorithmFn:t,base64Encoder:r})=>r(await rg(t,e)),og={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},cg=(e,t)=>(r,a)=>async n=>{if(!ku.isInstance(n.request))return r(n);const s=n.input,i=await r(n),l=i.response,{requestValidationModeMember:o,responseAlgorithms:c}=t;if(o&&"ENABLED"===s[o]){const{clientName:t,commandName:r}=a;if("S3Client"===t&&"GetObjectCommand"===r&&ig(c).every((e=>{const t=$x(e),r=l.headers[t];return!r||(e=>{const t=e.lastIndexOf("-");if(-1!==t){const r=e.slice(t+1);if(!r.startsWith("0")){const e=parseInt(r,10);if(!isNaN(e)&&e>=1&&e<=1e4)return!0}}return!1})(r)})))return i;await(async(e,{config:t,responseAlgorithms:r,logger:a})=>{const n=ig(r),{body:s,headers:i}=e;for(const o of n){const r=$x(o),n=i[r];if(n){let i;try{i=tg(o,t)}catch(l){if(o===Eu.CRC64NVME){null==a||a.warn(`Skipping ${Eu.CRC64NVME} checksum validation: ${l.message}`);continue}throw l}const{base64Encoder:c}=t;if(Kx(s))return void(e.body=fm({expectedChecksum:n,checksumSourceLocation:r,checksum:new i,source:s,base64Encoder:c}));const d=await lg(s,{checksumAlgorithmFn:i,base64Encoder:c});if(d===n)break;throw new Error(`Checksum mismatch: expected "${d}" but received "${n}" in response header "${r}".`)}}})(l,{config:e,responseAlgorithms:c,logger:a.logger})}return i},dg=(e,t)=>({applyToStack:r=>{r.add(ng(e,t),ag),r.addRelativeTo(((e,t)=>(r,a)=>async n=>{const s=n.input,{requestValidationModeMember:i}=t,l=await e.requestChecksumCalculation(),o=await e.responseChecksumValidation();switch(l){case Cu:Bu(a,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case Su:Bu(a,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z")}switch(o){case Pu:Bu(a,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case Ou:Bu(a,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b")}return i&&!s[i]&&o===Ou&&(s[i]="ENABLED"),r(n)})(e,t),sg),r.addRelativeTo(cg(e,t),og)}});const ug={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},mg=e=>({applyToStack:t=>{t.add((e=>t=>async r=>{if(!ku.isInstance(r.request))return t(r);const{request:a}=r,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!a.headers[":authority"])delete a.headers.host,a.headers[":authority"]=a.hostname+(a.port?":"+a.port:"");else if(!a.headers.host){let e=a.hostname;null!=a.port&&(e+=`:${a.port}`),a.headers.host=e}return t(r)})(e),ug)}}),hg={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0};var pg={};const xg="X-Amzn-Trace-Id",gg={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},fg=e=>({applyToStack:t=>{t.add((e=>t=>async r=>{const{request:a}=r;if(!ku.isInstance(a)||"node"!==e.runtime)return t(r);const n=Object.keys(a.headers??{}).find((e=>e.toLowerCase()===xg.toLowerCase()))??xg;if(a.headers.hasOwnProperty(n))return t(r);const s=pg._X_AMZN_TRACE_ID,i=e=>"string"==typeof e&&e.length>0;return i(pg.AWS_LAMBDA_FUNCTION_NAME)&&i(s)&&(a.headers[xg]=s),t({...r,request:a})})(e),gg)}});const yg={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},vg=e=>({applyToStack:e=>{e.add(((e,t)=>async r=>{var a;const{request:n}=r;if(ku.isInstance(n)&&!("content-length"in n.headers)&&!("x-amz-decoded-content-length"in n.headers)){const e="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";"function"!=typeof(null==(a=null==t?void 0:t.logger)?void 0:a.warn)||t.logger instanceof xp||t.logger.warn(e)}return e({...r})}),yg)}}),bg={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};const jg={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},kg=e=>({applyToStack:t=>{var r;t.add(function(e){return(t,r)=>async a=>{var n,s,i;try{return await t(a)}catch(l){if(e.followRegionRedirects&&(301===(null==(n=null==l?void 0:l.$metadata)?void 0:n.httpStatusCode)||400===(null==(s=null==l?void 0:l.$metadata)?void 0:s.httpStatusCode)&&"IllegalLocationConstraintException"===(null==l?void 0:l.name))){try{const t=l.$response.headers["x-amz-bucket-region"];null==(i=r.logger)||i.debug(`Redirecting from ${await e.region()} to ${t}`),r.__s3RegionRedirect=t}catch(die){throw new Error("Region redirect failed: "+die)}return t(a)}throw l}}}(e),jg),t.addRelativeTo((r=e,(e,t)=>async a=>{const n=await r.region(),s=r.region;let i=()=>{};t.__s3RegionRedirect&&(Object.defineProperty(r,"region",{writable:!1,value:async()=>t.__s3RegionRedirect}),i=()=>Object.defineProperty(r,"region",{writable:!0,value:s}));try{const s=await e(a);if(t.__s3RegionRedirect&&(i(),n!==await r.region()))throw new Error("Region was not restored following S3 region redirect.");return s}catch(die){throw i(),die}}),bg)}}),wg=class e{constructor(e={}){r(this,"data"),r(this,"lastPurgeTime",Date.now()),this.data=e}get(e){const t=this.data[e];if(t)return t}set(e,t){return this.data[e]=t,t}delete(e){delete this.data[e]}async purgeExpired(){const t=Date.now();if(!(this.lastPurgeTime+e.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(const e in this.data){const r=this.data[e];if(!r.isRefreshing){const a=await r.identity;a.expiration&&a.expiration.getTime()<t&&delete this.data[e]}}}};r(wg,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);let Ng=wg;class _g{constructor(e,t=!1,a=Date.now()){r(this,"_identity"),r(this,"isRefreshing"),r(this,"accessed"),this._identity=e,this.isRefreshing=t,this.accessed=a}get identity(){return this.accessed=Date.now(),this._identity}}const Sg=class e{constructor(e,t=new Ng){r(this,"createSessionFn"),r(this,"cache"),this.createSessionFn=e,this.cache=t}async getS3ExpressIdentity(t,r){const a=r.Bucket,{cache:n}=this,s=n.get(a);return s?s.identity.then((t=>{var r,i;if(((null==(r=t.expiration)?void 0:r.getTime())??0)<Date.now())return n.set(a,new _g(this.getIdentity(a))).identity;return((null==(i=t.expiration)?void 0:i.getTime())??0)<Date.now()+e.REFRESH_WINDOW_MS&&!s.isRefreshing&&(s.isRefreshing=!0,this.getIdentity(a).then((e=>{n.set(a,new _g(Promise.resolve(e)))}))),t})):n.set(a,new _g(this.getIdentity(a))).identity}async getIdentity(e){var t,r;await this.cache.purgeExpired().catch((e=>{}));const a=await this.createSessionFn(e);if(!(null==(t=a.Credentials)?void 0:t.AccessKeyId)||!(null==(r=a.Credentials)?void 0:r.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:a.Credentials.AccessKeyId,secretAccessKey:a.Credentials.SecretAccessKey,sessionToken:a.Credentials.SessionToken,expiration:a.Credentials.Expiration?new Date(a.Credentials.Expiration):void 0}}};r(Sg,"REFRESH_WINDOW_MS",6e4);let Cg=Sg;var Tg;!function(e){e.ENV="env",e.CONFIG="shared config entry"}(Tg||(Tg={}));const Og="X-Amz-S3session-Token",Pg=Og.toLowerCase();class Ag extends Wh{async signWithCredentials(e,t,r){const a=Eg(t);e.headers[Pg]=t.sessionToken;return Dg(this,a),this.signRequest(e,r??{})}async presignWithCredentials(e,t,r){const a=Eg(t);delete e.headers[Pg],e.headers[Og]=t.sessionToken,e.query=e.query??{},e.query[Og]=t.sessionToken;return Dg(this,a),this.presign(e,r)}}function Eg(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function Dg(e,t){const r=setTimeout((()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")}),10),a=e.credentialProvider;e.credentialProvider=()=>(clearTimeout(r),e.credentialProvider=a,Promise.resolve(t))}const Mg={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},zg=e=>({applyToStack:t=>{t.add((e=>(t,r)=>async a=>{var n,s,i,l,o;if(r.endpointV2){const t=r.endpointV2,c="sigv4-s3express"===(null==(i=null==(s=null==(n=t.properties)?void 0:n.authSchemes)?void 0:s[0])?void 0:i.name);if(("S3Express"===(null==(l=t.properties)?void 0:l.backend)||"Directory"===(null==(o=t.properties)?void 0:o.bucketType))&&(Bu(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),c){const t=a.input.Bucket;if(t){const n=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:t});r.s3ExpressIdentity=n,ku.isInstance(a.request)&&n.sessionToken&&(a.request.headers[Pg]=n.sessionToken)}}}return t(a)})(e),Mg)}}),Rg=e=>e=>{throw e},Ig=(e,t)=>{},Fg=e=>(t,r)=>async a=>{if(!ku.isInstance(a.request))return t(a);const n=Vu(r).selectedHttpAuthScheme;if(!n)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:s={}},identity:i,signer:l}=n;let o;o=r.s3ExpressIdentity?await(async(e,t,r,a)=>{const n=await a.signWithCredentials(r,e,{});if(n.headers["X-Amz-Security-Token"]||n.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return n})(r.s3ExpressIdentity,0,a.request,await e.signer()):await l.sign(a.request,i,s);const c=await t({...a,request:o}).catch((l.errorHandler||Rg)(s));return(l.successHandler||Ig)(c.response,s),c},Bg={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},Lg=e=>(t,r)=>async a=>{const n=await t(a),{response:s}=n;if(!wu.isInstance(s))return n;const{statusCode:i,body:l}=s;if(i<200||i>=300)return n;if(!("function"==typeof(null==l?void 0:l.stream)||"function"==typeof(null==l?void 0:l.pipe)||"function"==typeof(null==l?void 0:l.tee)))return n;let o=l,c=l;!l||"object"!=typeof l||l instanceof Uint8Array||([o,c]=await async function(e){return"function"==typeof e.stream&&(e=e.stream()),e.tee()}(l)),s.body=c;const d=await qg(o,{streamCollector:async e=>async function(e,t){let r=0;const a=[],n=e.getReader();let s=!1;for(;!s;){const{done:e,value:i}=await n.read();if(i&&(a.push(i),r+=(null==i?void 0:i.byteLength)??0),r>=t)break;s=e}n.releaseLock();const i=new Uint8Array(Math.min(t,r));let l=0;for(const o of a){if(o.byteLength>i.byteLength-l){i.set(o.subarray(0,i.byteLength-l),l);break}i.set(o,l),l+=o.length}return i}(e,3e3)});"function"==typeof(null==o?void 0:o.destroy)&&o.destroy();const u=e.utf8Encoder(d.subarray(d.length-16));if(0===d.length&&Bg[r.commandName]){const e=new Error("S3 aborted request");throw e.name="InternalError",e}return u&&u.endsWith("</Error>")&&(s.statusCode=400),n},qg=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),$g={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},Kg=e=>({applyToStack:t=>{t.addRelativeTo(Lg(e),$g)}});const Ug={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};const Hg={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Yg=e=>({applyToStack:t=>{t.add(function({bucketEndpoint:e}){return t=>async r=>{const{input:{Bucket:a}}=r;if(!e&&"string"==typeof a&&!("string"==typeof(n=a)&&0===n.indexOf("arn:")&&n.split(":").length>=6)&&a.indexOf("/")>=0){const e=new Error(`Bucket name shouldn't contain '/', received '${a}'`);throw e.name="InvalidBucketName",e}var n;return t({...r})}}(e),Hg),t.addRelativeTo(function(e){return(t,r)=>async a=>{var n,s,i,l;if(e.bucketEndpoint){const e=r.endpointV2;if(e){const t=a.input.Bucket;if("string"==typeof t)try{const a=new URL(t);r.endpointV2={...e,url:a}}catch(die){const a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${t} could not be parsed as URL.`;throw"NoOpLogger"===(null==(s=null==(n=r.logger)?void 0:n.constructor)?void 0:s.name)||null==(l=null==(i=r.logger)?void 0:i.warn)||l.call(i,a),die}}}return t(a)}}(e),Ug)}});const Vg=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Gg=e=>Vg.test(e)||e.startsWith("[")&&e.endsWith("]"),Wg=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Qg=(e,t=!1)=>{if(!t)return Wg.test(e);const r=e.split(".");for(const a of r)if(!Qg(a))return!1;return!0},Xg={},Zg="endpoints";function Jg(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${Jg(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Jg).join(", ")})`:JSON.stringify(e,null,2)}class ef extends Error{constructor(e){super(e),this.name="EndpointError"}}const tf=(e,t)=>(e=>{const t=e.split("."),r=[];for(const a of t){const t=a.indexOf("[");if(-1!==t){if(a.indexOf("]")!==a.length-1)throw new ef(`Path: '${e}' does not end with ']'`);const n=a.slice(t+1,-1);if(Number.isNaN(parseInt(n)))throw new ef(`Invalid array index: '${n}' in path: '${e}'`);0!==t&&r.push(a.slice(0,t)),r.push(n)}else r.push(a)}return r})(t).reduce(((r,a)=>{if("object"!=typeof r)throw new ef(`Index '${a}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(a)]:r[a]}),e),rf={[uu.HTTP]:80,[uu.HTTPS]:443},af={booleanEquals:(e,t)=>e===t,getAttr:tf,isSet:e=>null!=e,isValidHostLabel:Qg,not:e=>!e,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){const{hostname:t,port:r,protocol:a="",path:n="",query:s={}}=e,i=new URL(`${a}//${t}${r?`:${r}`:""}${n}`);return i.search=Object.entries(s).map((([e,t])=>`${e}=${t}`)).join("&"),i}return new URL(e)}catch(t){return null}})();if(!t)return null;const r=t.href,{host:a,hostname:n,pathname:s,protocol:i,search:l}=t;if(l)return null;const o=i.slice(0,-1);if(!Object.values(uu).includes(o))return null;const c=Gg(n);return{scheme:o,authority:`${a}${r.includes(`${a}:${rf[o]}`)||"string"==typeof e&&e.includes(`${a}:${rf[o]}`)?`:${rf[o]}`:""}`,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:c}},stringEquals:(e,t)=>e===t,substring:(e,t,r,a)=>t>=r||e.length<r?null:a?e.substring(e.length-r,e.length-t):e.substring(t,r),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},nf=(e,t)=>{const r=[],a={...t.endpointParams,...t.referenceRecord};let n=0;for(;n<e.length;){const t=e.indexOf("{",n);if(-1===t){r.push(e.slice(n));break}r.push(e.slice(n,t));const s=e.indexOf("}",t);if(-1===s){r.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[s+1]&&(r.push(e.slice(t+1,s)),n=s+2);const i=e.substring(t+1,s);if(i.includes("#")){const[e,t]=i.split("#");r.push(tf(a[e],t))}else r.push(a[i]);n=s+1}return r.join("")},sf=(e,t,r)=>{if("string"==typeof e)return nf(e,r);if(e.fn)return lf(e,r);if(e.ref)return(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord}[e]))(e,r);throw new ef(`'${t}': ${String(e)} is not a string, function or reference.`)},lf=({fn:e,argv:t},r)=>{const a=t.map((e=>["boolean","number"].includes(typeof e)?e:sf(e,"arg",r))),n=e.split(".");return n[0]in Xg&&null!=n[1]?Xg[n[0]][n[1]](...a):af[e](...a)},of=({assign:e,...t},r)=>{var a,n;if(e&&e in r.referenceRecord)throw new ef(`'${e}' is already defined in Reference Record.`);const s=lf(t,r);return null==(n=null==(a=r.logger)?void 0:a.debug)||n.call(a,`${Zg} evaluateCondition: ${Jg(t)} = ${Jg(s)}`),{result:""===s||!!s,...null!=e&&{toAssign:{name:e,value:s}}}},cf=(e=[],t)=>{var r,a;const n={};for(const s of e){const{result:e,toAssign:i}=of(s,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};i&&(n[i.name]=i.value,null==(a=null==(r=t.logger)?void 0:r.debug)||a.call(r,`${Zg} assign: ${i.name} := ${Jg(i.value)}`))}return{result:!0,referenceRecord:n}},df=(e,t)=>Object.entries(e).reduce(((e,[r,a])=>({...e,[r]:a.map((e=>{const a=sf(e,"Header value entry",t);if("string"!=typeof a)throw new ef(`Header '${r}' value '${a}' is not a string`);return a}))})),{}),uf=(e,t)=>{if(Array.isArray(e))return e.map((e=>uf(e,t)));switch(typeof e){case"string":return nf(e,t);case"object":if(null===e)throw new ef(`Unexpected endpoint property: ${e}`);return mf(e,t);case"boolean":return e;default:throw new ef("Unexpected endpoint property type: "+typeof e)}},mf=(e,t)=>Object.entries(e).reduce(((e,[r,a])=>({...e,[r]:uf(a,t)})),{}),hf=(e,t)=>{const r=sf(e,"Endpoint URL",t);if("string"==typeof r)try{return new URL(r)}catch(a){throw a}throw new ef("Endpoint URL must be a string, got "+typeof r)},pf=(e,t)=>{var r,a;const{conditions:n,endpoint:s}=e,{result:i,referenceRecord:l}=cf(n,t);if(!i)return;const o={...t,referenceRecord:{...t.referenceRecord,...l}},{url:c,properties:d,headers:u}=s;return null==(a=null==(r=t.logger)?void 0:r.debug)||a.call(r,`${Zg} Resolving endpoint from template: ${Jg(s)}`),{...null!=u&&{headers:df(u,o)},...null!=d&&{properties:mf(d,o)},url:hf(c,o)}},xf=(e,t)=>{const{conditions:r,error:a}=e,{result:n,referenceRecord:s}=cf(r,t);if(n)throw new ef(sf(a,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},gf=(e,t)=>{const{conditions:r,rules:a}=e,{result:n,referenceRecord:s}=cf(r,t);if(n)return ff(a,{...t,referenceRecord:{...t.referenceRecord,...s}})},ff=(e,t)=>{for(const r of e)if("endpoint"===r.type){const e=pf(r,t);if(e)return e}else if("error"===r.type)xf(r,t);else{if("tree"!==r.type)throw new ef(`Unknown endpoint rule: ${r}`);{const e=gf(r,t);if(e)return e}}throw new ef("Rules evaluation failed")},yf=(e,t=!1)=>{if(t){for(const t of e.split("."))if(!yf(t))return!1;return!0}return!!Qg(e)&&(!(e.length<3||e.length>63)&&(e===e.toLowerCase()&&!Gg(e)))};let vf={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],version:"1.1"};const bf={isVirtualHostableS3Bucket:yf,parseArn:e=>{const t=e.split(":");if(t.length<6)return null;const[r,a,n,s,i,...l]=t;if("arn"!==r||""===a||""===n||""===l.join(":"))return null;return{partition:a,service:n,region:s,accountId:i,resourceId:l.map((e=>e.split("/"))).flat()}},partition:e=>{const{partitions:t}=vf;for(const a of t){const{regions:t,outputs:r}=a;for(const[a,n]of Object.entries(t))if(a===e)return{...r,...n}}for(const a of t){const{regionRegex:t,outputs:r}=a;if(new RegExp(t).test(e))return{...r}}const r=t.find((e=>"aws"===e.id));if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}}};Xg.aws=bf;const jf=/\d{12}\.ddb/;const kf="user-agent",wf="x-amz-user-agent",Nf=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,_f=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g;const Sf=e=>(t,r)=>async a=>{var n,s,i,l;const{request:o}=a;if(!ku.isInstance(o))return t(a);const{headers:c}=o,d=(null==(n=null==r?void 0:r.userAgent)?void 0:n.map(Cf))||[],u=(await e.defaultUserAgentProvider()).map(Cf);await async function(e,t,r){var a,n,s,i,l,o,c;const d=r.request;if("rpc-v2-cbor"===(null==(a=null==d?void 0:d.headers)?void 0:a["smithy-protocol"])&&Bu(e,"PROTOCOL_RPC_V2_CBOR","M"),"function"==typeof t.retryStrategy){const r=await t.retryStrategy();"function"==typeof r.acquireInitialRetryToken?(null==(s=null==(n=r.constructor)?void 0:n.name)?void 0:s.includes("Adaptive"))?Bu(e,"RETRY_MODE_ADAPTIVE","F"):Bu(e,"RETRY_MODE_STANDARD","E"):Bu(e,"RETRY_MODE_LEGACY","D")}if("function"==typeof t.accountIdEndpointMode){const r=e.endpointV2;switch(String(null==(i=null==r?void 0:r.url)?void 0:i.hostname).match(jf)&&Bu(e,"ACCOUNT_ID_ENDPOINT","O"),await(null==(l=t.accountIdEndpointMode)?void 0:l.call(t))){case"disabled":Bu(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Bu(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Bu(e,"ACCOUNT_ID_MODE_REQUIRED","R")}}const u=null==(c=null==(o=e.__smithy_context)?void 0:o.selectedHttpAuthScheme)?void 0:c.identity;if(null==u?void 0:u.$source){const t=u;t.accountId&&Bu(e,"RESOLVED_ACCOUNT_ID","T");for(const[r,a]of Object.entries(t.$source??{}))Bu(e,r,a)}}(r,e,a);const m=r;u.push(`m/${function(e){let t="";for(const r in e){const a=e[r];if(!(t.length+a.length+1<=1024))break;t.length?t+=","+a:t+=a}return t}(Object.assign({},null==(s=r.__smithy_context)?void 0:s.features,null==(i=m.__aws_sdk_context)?void 0:i.features))}`);const h=(null==(l=null==e?void 0:e.customUserAgent)?void 0:l.map(Cf))||[],p=await e.userAgentAppId();p&&u.push(Cf([`app/${p}`]));const x=[].concat([...u,...d,...h]).join(" "),g=[...u.filter((e=>e.startsWith("aws-sdk-"))),...h].join(" ");return"browser"!==e.runtime?(g&&(c[wf]=c[wf]?`${c[kf]} ${g}`:g),c[kf]=x):c[wf]=x,t({...a,request:o})},Cf=e=>{var t;const r=e[0].split("/").map((e=>e.replace(Nf,"-"))).join("/"),a=null==(t=e[1])?void 0:t.replace(_f,"-"),n=r.indexOf("/"),s=r.substring(0,n);let i=r.substring(n+1);return"api"===s&&(i=i.toLowerCase()),[s,i,a].filter((e=>e&&e.length>0)).reduce(((e,t,r)=>{switch(r){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}}),"")},Tf={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Of=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),Pf=e=>Of(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,Af="content-length";const Ef={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Df=e=>({applyToStack:t=>{var r;t.add((r=e.bodyLengthChecker,e=>async t=>{const a=t.request;if(ku.isInstance(a)){const{body:e,headers:t}=a;if(e&&-1===Object.keys(t).map((e=>e.toLowerCase())).indexOf(Af))try{const t=r(e);a.headers={...a.headers,[Af]:String(t)}}catch(n){}}return e({...t,request:a})}),Ef)}}),Mf=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,zf=/(\d+\.){3}\d+/,Rf=/\.\./,If=e=>Mf.test(e)&&!zf.test(e)&&!Rf.test(e),Ff=e=>{const[t,r,a,,,n]=e.split(":"),s="arn"===t&&e.split(":").length>=6,i=Boolean(s&&r&&a&&n);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},Bf=(e,t,r)=>{const a=async()=>{const a=r[e]??r[t];return"function"==typeof a?a():a};return"credentialScope"===e||"CredentialScope"===t?async()=>{const e="function"==typeof r.credentials?await r.credentials():r.credentials;return(null==e?void 0:e.credentialScope)??(null==e?void 0:e.CredentialScope)}:"accountId"===e||"AccountId"===t?async()=>{const e="function"==typeof r.credentials?await r.credentials():r.credentials;return(null==e?void 0:e.accountId)??(null==e?void 0:e.AccountId)}:"endpoint"===e||"endpoint"===t?async()=>{const e=await a();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){const{protocol:t,hostname:r,port:a,path:n}=e;return`${t}//${r}${a?":"+a:""}${n}`}}return e}:a},Lf=async e=>{};const qf=e=>{if("string"==typeof e)return qf(new URL(e));const{hostname:t,pathname:r,port:a,protocol:n,search:s}=e;let i;return s&&(i=function(e){const t={};if(e=e.replace(/^\?/,""))for(const r of e.split("&")){let[e,a=null]=r.split("=");e=decodeURIComponent(e),a&&(a=decodeURIComponent(a)),e in t?Array.isArray(t[e])?t[e].push(a):t[e]=[t[e],a]:t[e]=a}return t}(s)),{hostname:t,port:a?parseInt(a):void 0,protocol:n,path:r,query:i}},$f=e=>"object"==typeof e?"url"in e?qf(e.url):e:qf(e),Kf=async(e,t,r)=>{var a;const n={},s=(null==(a=null==t?void 0:t.getEndpointParameterInstructions)?void 0:a.call(t))||{};for(const[i,l]of Object.entries(s))switch(l.type){case"staticContextParams":n[i]=l.value;break;case"contextParams":n[i]=e[l.name];break;case"clientContextParams":case"builtInParams":n[i]=await Bf(l.name,i,r)();break;case"operationContextParams":n[i]=l.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(l))}return 0===Object.keys(s).length&&Object.assign(n,r),"s3"===String(r.serviceId).toLowerCase()&&await(async e=>{const t=(null==e?void 0:e.Bucket)||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Ff(t)){if(!0===e.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!If(t)||-1!==t.indexOf(".")&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e})(n),n},Uf=({config:e,instructions:t})=>(r,a)=>async n=>{var s,i,l;e.endpoint&&function(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}(a,"ENDPOINT_OVERRIDE","N");const o=await(async(e,t,r,a)=>{if(!r.endpoint){let e;e=r.serviceConfiguredEndpoint?await r.serviceConfiguredEndpoint():await Lf(r.serviceId),e&&(r.endpoint=()=>Promise.resolve($f(e)))}const n=await Kf(e,t,r);if("function"!=typeof r.endpointProvider)throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,a)})(n.input,{getEndpointParameterInstructions:()=>t},{...e},a);a.endpointV2=o,a.authSchemes=null==(s=o.properties)?void 0:s.authSchemes;const c=null==(i=a.authSchemes)?void 0:i[0];if(c){a.signing_region=c.signingRegion,a.signing_service=c.signingName;const e=Vu(a),t=null==(l=null==e?void 0:e.selectedHttpAuthScheme)?void 0:l.httpAuthOption;t&&(t.signingProperties=Object.assign(t.signingProperties||{},{signing_region:c.signingRegion,signingRegion:c.signingRegion,signing_service:c.signingName,signingName:c.signingName,signingRegionSet:c.signingRegionSet},c.properties))}return r({...n})},Hf={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ju.name},Yf=(e,t)=>({applyToStack:r=>{r.addRelativeTo(Uf({config:e,instructions:t}),Hf)}});var Vf,Gf;(Gf=Vf||(Vf={})).STANDARD="standard",Gf.ADAPTIVE="adaptive";const Wf=Vf.STANDARD,Qf=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Xf=["TimeoutError","RequestTimeout","RequestTimeoutException"],Zf=[500,502,503,504],Jf=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],ey=e=>{var t,r;return 429===(null==(t=e.$metadata)?void 0:t.httpStatusCode)||Qf.includes(e.name)||1==(null==(r=e.$retryable)?void 0:r.throttling)},ty=(e,t=0)=>{var r;return(e=>{var t;return null==(t=e.$metadata)?void 0:t.clockSkewCorrected})(e)||Xf.includes(e.name)||Jf.includes((null==e?void 0:e.code)||"")||Zf.includes((null==(r=e.$metadata)?void 0:r.httpStatusCode)||0)||(e=>!!(e&&e instanceof TypeError)&&new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]).has(e.message))(e)||void 0!==e.cause&&t<=10&&ty(e.cause,t+1)};class ry{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(null==e?void 0:e.beta)??.7,this.minCapacity=(null==e?void 0:e.minCapacity)??1,this.minFillRate=(null==e?void 0:e.minFillRate)??.5,this.scaleConstant=(null==e?void 0:e.scaleConstant)??.4,this.smooth=(null==e?void 0:e.smooth)??.8;const t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise((e=>ry.setTimeoutFn(e,t)))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp)return void(this.lastTimestamp=e);const t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),ey(e)){const e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){const e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}ry.setTimeoutFn=setTimeout;const ay=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});class ny{constructor(e){this.maxAttempts=e,this.mode=Vf.STANDARD,this.capacity=500,this.retryBackoffStrategy=(()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(2e4,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}})(),this.maxAttemptsProvider="function"==typeof e?e:async()=>e}async acquireInitialRetryToken(e){return ay({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){const r=await this.getMaxAttempts();if(this.shouldRetry(e,t,r)){const r=t.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===r?500:100);const a=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),n=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,a):a,s=this.getCapacityCost(r);return this.capacity-=s,ay({retryDelay:n,retryCount:e.getRetryCount()+1,retryCost:s})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return 3}}shouldRetry(e,t,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return"TRANSIENT"===e?10:5}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class sy{constructor(e,t){this.maxAttemptsProvider=e,this.mode=Vf.ADAPTIVE;const{rateLimiter:r}=t??{};this.rateLimiter=r??new ry,this.standardRetryStrategy=new ny(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}let iy;const ly=new Uint8Array(16);function oy(){if(!iy&&(iy="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!iy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return iy(ly)}const cy=[];for(let mie=0;mie<256;++mie)cy.push((mie+256).toString(16).slice(1));const dy={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function uy(e,t,r){if(dy.randomUUID&&!t&&!e)return dy.randomUUID();const a=(e=e||{}).random||(e.rng||oy)();return a[6]=15&a[6]|64,a[8]=63&a[8]|128,function(e,t=0){return cy[e[t+0]]+cy[e[t+1]]+cy[e[t+2]]+cy[e[t+3]]+"-"+cy[e[t+4]]+cy[e[t+5]]+"-"+cy[e[t+6]]+cy[e[t+7]]+"-"+cy[e[t+8]]+cy[e[t+9]]+"-"+cy[e[t+10]]+cy[e[t+11]]+cy[e[t+12]]+cy[e[t+13]]+cy[e[t+14]]+cy[e[t+15]]}(a)}const my=e=>(null==e?void 0:e.body)instanceof ReadableStream,hy=e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess,py=e=>{const t={error:e,errorType:xy(e)},r=yy(e.$response);return r&&(t.retryAfterHint=r),t},xy=e=>ey(e)?"THROTTLING":ty(e)?"TRANSIENT":(e=>{var t;if(void 0!==(null==(t=e.$metadata)?void 0:t.httpStatusCode)){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!ty(e)}return!1})(e)?"SERVER_ERROR":"CLIENT_ERROR",gy={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},fy=e=>({applyToStack:t=>{t.add((e=>(t,r)=>async a=>{var n;let s=await e.retryStrategy();const i=await e.maxAttempts();if(!hy(s))return(null==s?void 0:s.mode)&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,a);{let e=await s.acquireInitialRetryToken(r.partition_id),c=new Error,d=0,u=0;const{request:m}=a,h=ku.isInstance(m);for(h&&(m.headers["amz-sdk-invocation-id"]=uy());;)try{h&&(m.headers["amz-sdk-request"]=`attempt=${d+1}; max=${i}`);const{response:r,output:n}=await t(a);return s.recordSuccess(e),n.$metadata.attempts=d+1,n.$metadata.totalRetryDelay=u,{response:r,output:n}}catch(die){const a=py(die);if(c=(l=die)instanceof Error?l:l instanceof Object?Object.assign(new Error,l):"string"==typeof l?new Error(l):new Error(`AWS SDK error wrapper for ${l}`),h&&my(m))throw null==(n=r.logger instanceof xp?console:r.logger)||n.warn("An error was encountered in a non-retryable streaming request."),c;try{e=await s.refreshRetryTokenForRetry(e,a)}catch(o){throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=d+1,c.$metadata.totalRetryDelay=u,c}d=e.getRetryCount();const i=e.getRetryDelay();u+=i,await new Promise((e=>setTimeout(e,i)))}}var l})(e),gy)}}),yy=e=>{if(!wu.isInstance(e))return;const t=Object.keys(e.headers).find((e=>"retry-after"===e.toLowerCase()));if(!t)return;const r=e.headers[t],a=Number(r);if(!Number.isNaN(a))return new Date(1e3*a);return new Date(r)};class vy{constructor(e){r(this,"sigv4aSigner"),r(this,"sigv4Signer"),r(this,"signerOptions"),this.sigv4Signer=new Ag(e),this.signerOptions=e}static sigv4aDependency(){return"none"}async sign(e,t={}){return"*"===t.signingRegion?this.getSigv4aSigner().sign(e,t):this.sigv4Signer.sign(e,t)}async signWithCredentials(e,t,r={}){if("*"===r.signingRegion)throw this.getSigv4aSigner(),new Error('signWithCredentials with signingRegion \'*\' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt');return this.sigv4Signer.signWithCredentials(e,t,r)}async presign(e,t={}){if("*"===t.signingRegion)throw this.getSigv4aSigner(),new Error('presign with signingRegion \'*\' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt');return this.sigv4Signer.presign(e,t)}async presignWithCredentials(e,t,r={}){if("*"===r.signingRegion)throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,t,r)}getSigv4aSigner(){if(!this.sigv4aSigner)throw"node"===this.signerOptions.runtime?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const by="required",jy="type",ky="rules",wy="conditions",Ny="fn",_y="argv",Sy="ref",Cy="assign",Ty="url",Oy="properties",Py="backend",Ay="authSchemes",Ey="disableDoubleEncoding",Dy="signingName",My="signingRegion",zy="headers",Ry="signingRegionSet",Iy=!0,Fy="isSet",By="booleanEquals",Ly="error",qy="aws.partition",$y="stringEquals",Ky="getAttr",Uy="name",Hy="substring",Yy="bucketSuffix",Vy="parseURL",Gy="endpoint",Wy="tree",Qy="aws.isVirtualHostableS3Bucket",Xy="{url#scheme}://{Bucket}.{url#authority}{url#path}",Zy="not",Jy="accessPointSuffix",ev="{url#scheme}://{url#authority}{url#path}",tv="hardwareType",rv="regionPrefix",av="bucketAliasSuffix",nv="outpostId",sv="isValidHostLabel",iv="sigv4a",lv="s3-outposts",ov="s3",cv="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",dv="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",uv="https://{Bucket}.s3.{partitionResult#dnsSuffix}",mv="aws.parseArn",hv="bucketArn",pv="arnType",xv="s3-object-lambda",gv="accesspoint",fv="accessPointName",yv="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",vv="mrapPartition",bv="outpostType",jv="arnPrefix",kv="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",wv="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Nv="https://s3.{partitionResult#dnsSuffix}",_v={[by]:!1,[jy]:"String"},Sv={[by]:!0,default:!1,[jy]:"Boolean"},Cv={[by]:!1,[jy]:"Boolean"},Tv={[Ny]:By,[_y]:[{[Sy]:"Accelerate"},!0]},Ov={[Ny]:By,[_y]:[{[Sy]:"UseFIPS"},!0]},Pv={[Ny]:By,[_y]:[{[Sy]:"UseDualStack"},!0]},Av={[Ny]:Fy,[_y]:[{[Sy]:"Endpoint"}]},Ev={[Ny]:qy,[_y]:[{[Sy]:"Region"}],[Cy]:"partitionResult"},Dv={[Ny]:$y,[_y]:[{[Ny]:Ky,[_y]:[{[Sy]:"partitionResult"},Uy]},"aws-cn"]},Mv={[Ny]:Fy,[_y]:[{[Sy]:"Bucket"}]},zv={[Sy]:"Bucket"},Rv={[wy]:[Pv],[Ly]:"S3Express does not support Dual-stack.",[jy]:Ly},Iv={[wy]:[Tv],[Ly]:"S3Express does not support S3 Accelerate.",[jy]:Ly},Fv={[wy]:[Av,{[Ny]:Vy,[_y]:[{[Sy]:"Endpoint"}],[Cy]:"url"}],[ky]:[{[wy]:[{[Ny]:Fy,[_y]:[{[Sy]:"DisableS3ExpressSessionAuth"}]},{[Ny]:By,[_y]:[{[Sy]:"DisableS3ExpressSessionAuth"},!0]}],[ky]:[{[wy]:[{[Ny]:By,[_y]:[{[Ny]:Ky,[_y]:[{[Sy]:"url"},"isIp"]},!0]}],[ky]:[{[wy]:[{[Ny]:"uriEncode",[_y]:[zv],[Cy]:"uri_encoded_bucket"}],[ky]:[{[Gy]:{[Ty]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[Oy]:{[Py]:"S3Express",[Ay]:[{[Ey]:!0,[Uy]:"sigv4",[Dy]:"s3express",[My]:"{Region}"}]},[zy]:{}},[jy]:Gy}],[jy]:Wy}],[jy]:Wy},{[wy]:[{[Ny]:Qy,[_y]:[zv,!1]}],[ky]:[{[Gy]:{[Ty]:Xy,[Oy]:{[Py]:"S3Express",[Ay]:[{[Ey]:!0,[Uy]:"sigv4",[Dy]:"s3express",[My]:"{Region}"}]},[zy]:{}},[jy]:Gy}],[jy]:Wy},{[Ly]:"S3Express bucket name is not a valid virtual hostable name.",[jy]:Ly}],[jy]:Wy},{[wy]:[{[Ny]:By,[_y]:[{[Ny]:Ky,[_y]:[{[Sy]:"url"},"isIp"]},!0]}],[ky]:[{[wy]:[{[Ny]:"uriEncode",[_y]:[zv],[Cy]:"uri_encoded_bucket"}],[ky]:[{[Gy]:{[Ty]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[Oy]:{[Py]:"S3Express",[Ay]:[{[Ey]:!0,[Uy]:"sigv4-s3express",[Dy]:"s3express",[My]:"{Region}"}]},[zy]:{}},[jy]:Gy}],[jy]:Wy}],[jy]:Wy},{[wy]:[{[Ny]:Qy,[_y]:[zv,!1]}],[ky]:[{[Gy]:{[Ty]:Xy,[Oy]:{[Py]:"S3Express",[Ay]:[{[Ey]:!0,[Uy]:"sigv4-s3express",[Dy]:"s3express",[My]:"{Region}"}]},[zy]:{}},[jy]:Gy}],[jy]:Wy},{[Ly]:"S3Express bucket name is not a valid virtual hostable name.",[jy]:Ly}],[jy]:Wy},Bv={[Ny]:Vy,[_y]:[{[Sy]:"Endpoint"}],[Cy]:"url"},Lv={[Ny]:By,[_y]:[{[Ny]:Ky,[_y]:[{[Sy]:"url"},"isIp"]},!0]},qv={[Sy]:"url"},$v={[Ny]:"uriEncode",[_y]:[zv],[Cy]:"uri_encoded_bucket"},Kv={[Py]:"S3Express",[Ay]:[{[Ey]:!0,[Uy]:"sigv4",[Dy]:"s3express",[My]:"{Region}"}]},Uv={},Hv={[Ny]:Qy,[_y]:[zv,!1]},Yv={[Ly]:"S3Express bucket name is not a valid virtual hostable name.",[jy]:Ly},Vv={[Ny]:Fy,[_y]:[{[Sy]:"UseS3ExpressControlEndpoint"}]},Gv={[Ny]:By,[_y]:[{[Sy]:"UseS3ExpressControlEndpoint"},!0]},Wv={[Ny]:Zy,[_y]:[Av]},Qv={[Ly]:"Unrecognized S3Express bucket name format.",[jy]:Ly},Xv={[Ny]:Zy,[_y]:[Mv]},Zv={[Sy]:tv},Jv={[wy]:[Wv],[Ly]:"Expected a endpoint to be specified but no endpoint was found",[jy]:Ly},eb={[Ay]:[{[Ey]:!0,[Uy]:iv,[Dy]:lv,[Ry]:["*"]},{[Ey]:!0,[Uy]:"sigv4",[Dy]:lv,[My]:"{Region}"}]},tb={[Ny]:By,[_y]:[{[Sy]:"ForcePathStyle"},!1]},rb={[Sy]:"ForcePathStyle"},ab={[Ny]:By,[_y]:[{[Sy]:"Accelerate"},!1]},nb={[Ny]:$y,[_y]:[{[Sy]:"Region"},"aws-global"]},sb={[Ay]:[{[Ey]:!0,[Uy]:"sigv4",[Dy]:ov,[My]:"us-east-1"}]},ib={[Ny]:Zy,[_y]:[nb]},lb={[Ny]:By,[_y]:[{[Sy]:"UseGlobalEndpoint"},!0]},ob={[Ty]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Oy]:{[Ay]:[{[Ey]:!0,[Uy]:"sigv4",[Dy]:ov,[My]:"{Region}"}]},[zy]:{}},cb={[Ay]:[{[Ey]:!0,[Uy]:"sigv4",[Dy]:ov,[My]:"{Region}"}]},db={[Ny]:By,[_y]:[{[Sy]:"UseGlobalEndpoint"},!1]},ub={[Ny]:By,[_y]:[{[Sy]:"UseDualStack"},!1]},mb={[Ty]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[Oy]:cb,[zy]:{}},hb={[Ny]:By,[_y]:[{[Sy]:"UseFIPS"},!1]},pb={[Ty]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[Oy]:cb,[zy]:{}},xb={[Ty]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Oy]:cb,[zy]:{}},gb={[Ny]:By,[_y]:[{[Ny]:Ky,[_y]:[qv,"isIp"]},!1]},fb={[Ty]:cv,[Oy]:cb,[zy]:{}},yb={[Ty]:Xy,[Oy]:cb,[zy]:{}},vb={[Gy]:yb,[jy]:Gy},bb={[Ty]:dv,[Oy]:cb,[zy]:{}},jb={[Ty]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[Oy]:cb,[zy]:{}},kb={[Ly]:"Invalid region: region was not a valid DNS name.",[jy]:Ly},wb={[Sy]:hv},Nb={[Sy]:pv},_b={[Ny]:Ky,[_y]:[wb,"service"]},Sb={[Sy]:fv},Cb={[wy]:[Pv],[Ly]:"S3 Object Lambda does not support Dual-stack",[jy]:Ly},Tb={[wy]:[Tv],[Ly]:"S3 Object Lambda does not support S3 Accelerate",[jy]:Ly},Ob={[wy]:[{[Ny]:Fy,[_y]:[{[Sy]:"DisableAccessPoints"}]},{[Ny]:By,[_y]:[{[Sy]:"DisableAccessPoints"},!0]}],[Ly]:"Access points are not supported for this operation",[jy]:Ly},Pb={[wy]:[{[Ny]:Fy,[_y]:[{[Sy]:"UseArnRegion"}]},{[Ny]:By,[_y]:[{[Sy]:"UseArnRegion"},!1]},{[Ny]:Zy,[_y]:[{[Ny]:$y,[_y]:[{[Ny]:Ky,[_y]:[wb,"region"]},"{Region}"]}]}],[Ly]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[jy]:Ly},Ab={[Ny]:Ky,[_y]:[{[Sy]:"bucketPartition"},Uy]},Eb={[Ny]:Ky,[_y]:[wb,"accountId"]},Db={[Ay]:[{[Ey]:!0,[Uy]:"sigv4",[Dy]:xv,[My]:"{bucketArn#region}"}]},Mb={[Ly]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[jy]:Ly},zb={[Ly]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[jy]:Ly},Rb={[Ly]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[jy]:Ly},Ib={[Ly]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[jy]:Ly},Fb={[Ly]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[jy]:Ly},Bb={[Ly]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[jy]:Ly},Lb={[Ay]:[{[Ey]:!0,[Uy]:"sigv4",[Dy]:ov,[My]:"{bucketArn#region}"}]},qb={[Ay]:[{[Ey]:!0,[Uy]:iv,[Dy]:lv,[Ry]:["*"]},{[Ey]:!0,[Uy]:"sigv4",[Dy]:lv,[My]:"{bucketArn#region}"}]},$b={[Ny]:mv,[_y]:[zv]},Kb={[Ty]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Oy]:cb,[zy]:{}},Ub={[Ty]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Oy]:cb,[zy]:{}},Hb={[Ty]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Oy]:cb,[zy]:{}},Yb={[Ty]:kv,[Oy]:cb,[zy]:{}},Vb={[Ty]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Oy]:cb,[zy]:{}},Gb={[Sy]:"UseObjectLambdaEndpoint"},Wb={[Ay]:[{[Ey]:!0,[Uy]:"sigv4",[Dy]:xv,[My]:"{Region}"}]},Qb={[Ty]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Oy]:cb,[zy]:{}},Xb={[Ty]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[Oy]:cb,[zy]:{}},Zb={[Ty]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Oy]:cb,[zy]:{}},Jb={[Ty]:ev,[Oy]:cb,[zy]:{}},ej={[Ty]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[Oy]:cb,[zy]:{}},tj=[{[Sy]:"Region"}],rj=[{[Sy]:"Endpoint"}],aj=[zv],nj=[Pv],sj=[Tv],ij=[Av,Bv],lj=[{[Ny]:Fy,[_y]:[{[Sy]:"DisableS3ExpressSessionAuth"}]},{[Ny]:By,[_y]:[{[Sy]:"DisableS3ExpressSessionAuth"},!0]}],oj=[$v],cj=[Hv],dj=[Ev],uj=[Ov],mj=[{[Ny]:Hy,[_y]:[zv,6,14,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,14,16,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],hj=[{[wy]:[Ov],[Gy]:{[Ty]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Oy]:Kv,[zy]:{}},[jy]:Gy},{[Gy]:{[Ty]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Oy]:Kv,[zy]:{}},[jy]:Gy}],pj=[{[Ny]:Hy,[_y]:[zv,6,15,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,15,17,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],xj=[{[Ny]:Hy,[_y]:[zv,6,19,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,19,21,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],gj=[{[Ny]:Hy,[_y]:[zv,6,20,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,20,22,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],fj=[{[Ny]:Hy,[_y]:[zv,6,26,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,26,28,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],yj=[{[wy]:[Ov],[Gy]:{[Ty]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Oy]:{[Py]:"S3Express",[Ay]:[{[Ey]:!0,[Uy]:"sigv4-s3express",[Dy]:"s3express",[My]:"{Region}"}]},[zy]:{}},[jy]:Gy},{[Gy]:{[Ty]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Oy]:{[Py]:"S3Express",[Ay]:[{[Ey]:!0,[Uy]:"sigv4-s3express",[Dy]:"s3express",[My]:"{Region}"}]},[zy]:{}},[jy]:Gy}],vj=[zv,0,7,!0],bj=[{[Ny]:Hy,[_y]:[zv,7,15,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,15,17,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],jj=[{[Ny]:Hy,[_y]:[zv,7,16,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,16,18,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],kj=[{[Ny]:Hy,[_y]:[zv,7,20,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,20,22,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],wj=[{[Ny]:Hy,[_y]:[zv,7,21,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,21,23,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],Nj=[{[Ny]:Hy,[_y]:[zv,7,27,!0],[Cy]:"s3expressAvailabilityZoneId"},{[Ny]:Hy,[_y]:[zv,27,29,!0],[Cy]:"s3expressAvailabilityZoneDelim"},{[Ny]:$y,[_y]:[{[Sy]:"s3expressAvailabilityZoneDelim"},"--"]}],_j=[Mv],Sj=[{[Ny]:sv,[_y]:[{[Sy]:nv},!1]}],Cj=[{[Ny]:$y,[_y]:[{[Sy]:rv},"beta"]}],Tj=[{[Ny]:sv,[_y]:[{[Sy]:"Region"},!1]}],Oj=[{[Ny]:$y,[_y]:[{[Sy]:"Region"},"us-east-1"]}],Pj=[{[Ny]:$y,[_y]:[Nb,gv]}],Aj=[{[Ny]:Ky,[_y]:[wb,"resourceId[1]"],[Cy]:fv},{[Ny]:Zy,[_y]:[{[Ny]:$y,[_y]:[Sb,""]}]}],Ej=[wb,"resourceId[1]"],Dj=[{[Ny]:Zy,[_y]:[{[Ny]:$y,[_y]:[{[Ny]:Ky,[_y]:[wb,"region"]},""]}]}],Mj=[{[Ny]:Zy,[_y]:[{[Ny]:Fy,[_y]:[{[Ny]:Ky,[_y]:[wb,"resourceId[2]"]}]}]}],zj=[wb,"resourceId[2]"],Rj=[{[Ny]:qy,[_y]:[{[Ny]:Ky,[_y]:[wb,"region"]}],[Cy]:"bucketPartition"}],Ij=[{[Ny]:$y,[_y]:[Ab,{[Ny]:Ky,[_y]:[{[Sy]:"partitionResult"},Uy]}]}],Fj=[{[Ny]:sv,[_y]:[{[Ny]:Ky,[_y]:[wb,"region"]},!0]}],Bj=[{[Ny]:sv,[_y]:[Eb,!1]}],Lj=[{[Ny]:sv,[_y]:[Sb,!1]}],qj=[{[Ny]:sv,[_y]:[{[Sy]:"Region"},!0]}],$j={version:"1.0",parameters:{Bucket:_v,Region:_v,UseFIPS:Sv,UseDualStack:Sv,Endpoint:_v,ForcePathStyle:Sv,Accelerate:Sv,UseGlobalEndpoint:Sv,UseObjectLambdaEndpoint:Cv,Key:_v,Prefix:_v,CopySource:_v,DisableAccessPoints:Cv,DisableMultiRegionAccessPoints:Sv,UseArnRegion:Cv,UseS3ExpressControlEndpoint:Cv,DisableS3ExpressSessionAuth:Cv},[ky]:[{[wy]:[{[Ny]:Fy,[_y]:tj}],[ky]:[{[wy]:[Tv,Ov],error:"Accelerate cannot be used with FIPS",[jy]:Ly},{[wy]:[Pv,Av],error:"Cannot set dual-stack in combination with a custom endpoint.",[jy]:Ly},{[wy]:[Av,Ov],error:"A custom endpoint cannot be combined with FIPS",[jy]:Ly},{[wy]:[Av,Tv],error:"A custom endpoint cannot be combined with S3 Accelerate",[jy]:Ly},{[wy]:[Ov,Ev,Dv],error:"Partition does not support FIPS",[jy]:Ly},{[wy]:[Mv,{[Ny]:Hy,[_y]:[zv,0,6,Iy],[Cy]:Yy},{[Ny]:$y,[_y]:[{[Sy]:Yy},"--x-s3"]}],[ky]:[Rv,Iv,Fv,{[wy]:[Vv,Gv],[ky]:[{[wy]:dj,[ky]:[{[wy]:[$v,Wv],[ky]:[{[wy]:uj,endpoint:{[Ty]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Oy]:Kv,[zy]:Uv},[jy]:Gy},{endpoint:{[Ty]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Oy]:Kv,[zy]:Uv},[jy]:Gy}],[jy]:Wy}],[jy]:Wy}],[jy]:Wy},{[wy]:cj,[ky]:[{[wy]:dj,[ky]:[{[wy]:lj,[ky]:[{[wy]:mj,[ky]:hj,[jy]:Wy},{[wy]:pj,[ky]:hj,[jy]:Wy},{[wy]:xj,[ky]:hj,[jy]:Wy},{[wy]:gj,[ky]:hj,[jy]:Wy},{[wy]:fj,[ky]:hj,[jy]:Wy},Qv],[jy]:Wy},{[wy]:mj,[ky]:yj,[jy]:Wy},{[wy]:pj,[ky]:yj,[jy]:Wy},{[wy]:xj,[ky]:yj,[jy]:Wy},{[wy]:gj,[ky]:yj,[jy]:Wy},{[wy]:fj,[ky]:yj,[jy]:Wy},Qv],[jy]:Wy}],[jy]:Wy},Yv],[jy]:Wy},{[wy]:[Mv,{[Ny]:Hy,[_y]:vj,[Cy]:Jy},{[Ny]:$y,[_y]:[{[Sy]:Jy},"--xa-s3"]}],[ky]:[Rv,Iv,Fv,{[wy]:cj,[ky]:[{[wy]:dj,[ky]:[{[wy]:lj,[ky]:[{[wy]:bj,[ky]:hj,[jy]:Wy},{[wy]:jj,[ky]:hj,[jy]:Wy},{[wy]:kj,[ky]:hj,[jy]:Wy},{[wy]:wj,[ky]:hj,[jy]:Wy},{[wy]:Nj,[ky]:hj,[jy]:Wy},Qv],[jy]:Wy},{[wy]:bj,[ky]:yj,[jy]:Wy},{[wy]:jj,[ky]:yj,[jy]:Wy},{[wy]:kj,[ky]:yj,[jy]:Wy},{[wy]:wj,[ky]:yj,[jy]:Wy},{[wy]:Nj,[ky]:yj,[jy]:Wy},Qv],[jy]:Wy}],[jy]:Wy},Yv],[jy]:Wy},{[wy]:[Xv,Vv,Gv],[ky]:[{[wy]:dj,[ky]:[{[wy]:ij,endpoint:{[Ty]:ev,[Oy]:Kv,[zy]:Uv},[jy]:Gy},{[wy]:uj,endpoint:{[Ty]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[Oy]:Kv,[zy]:Uv},[jy]:Gy},{endpoint:{[Ty]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[Oy]:Kv,[zy]:Uv},[jy]:Gy}],[jy]:Wy}],[jy]:Wy},{[wy]:[Mv,{[Ny]:Hy,[_y]:[zv,49,50,Iy],[Cy]:tv},{[Ny]:Hy,[_y]:[zv,8,12,Iy],[Cy]:rv},{[Ny]:Hy,[_y]:vj,[Cy]:av},{[Ny]:Hy,[_y]:[zv,32,49,Iy],[Cy]:nv},{[Ny]:qy,[_y]:tj,[Cy]:"regionPartition"},{[Ny]:$y,[_y]:[{[Sy]:av},"--op-s3"]}],[ky]:[{[wy]:Sj,[ky]:[{[wy]:[{[Ny]:$y,[_y]:[Zv,"e"]}],[ky]:[{[wy]:Cj,[ky]:[Jv,{[wy]:ij,endpoint:{[Ty]:"https://{Bucket}.ec2.{url#authority}",[Oy]:eb,[zy]:Uv},[jy]:Gy}],[jy]:Wy},{endpoint:{[Ty]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Oy]:eb,[zy]:Uv},[jy]:Gy}],[jy]:Wy},{[wy]:[{[Ny]:$y,[_y]:[Zv,"o"]}],[ky]:[{[wy]:Cj,[ky]:[Jv,{[wy]:ij,endpoint:{[Ty]:"https://{Bucket}.op-{outpostId}.{url#authority}",[Oy]:eb,[zy]:Uv},[jy]:Gy}],[jy]:Wy},{endpoint:{[Ty]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Oy]:eb,[zy]:Uv},[jy]:Gy}],[jy]:Wy},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[jy]:Ly}],[jy]:Wy},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[jy]:Ly}],[jy]:Wy},{[wy]:_j,[ky]:[{[wy]:[Av,{[Ny]:Zy,[_y]:[{[Ny]:Fy,[_y]:[{[Ny]:Vy,[_y]:rj}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[jy]:Ly},{[wy]:[tb,Hv],[ky]:[{[wy]:dj,[ky]:[{[wy]:Tj,[ky]:[{[wy]:[Tv,Dv],error:"S3 Accelerate cannot be used in this region",[jy]:Ly},{[wy]:[Pv,Ov,ab,Wv,nb],endpoint:{[Ty]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[Pv,Ov,ab,Wv,ib,lb],[ky]:[{endpoint:ob,[jy]:Gy}],[jy]:Wy},{[wy]:[Pv,Ov,ab,Wv,ib,db],endpoint:ob,[jy]:Gy},{[wy]:[ub,Ov,ab,Wv,nb],endpoint:{[Ty]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[ub,Ov,ab,Wv,ib,lb],[ky]:[{endpoint:mb,[jy]:Gy}],[jy]:Wy},{[wy]:[ub,Ov,ab,Wv,ib,db],endpoint:mb,[jy]:Gy},{[wy]:[Pv,hb,Tv,Wv,nb],endpoint:{[Ty]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[Pv,hb,Tv,Wv,ib,lb],[ky]:[{endpoint:pb,[jy]:Gy}],[jy]:Wy},{[wy]:[Pv,hb,Tv,Wv,ib,db],endpoint:pb,[jy]:Gy},{[wy]:[Pv,hb,ab,Wv,nb],endpoint:{[Ty]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[Pv,hb,ab,Wv,ib,lb],[ky]:[{endpoint:xb,[jy]:Gy}],[jy]:Wy},{[wy]:[Pv,hb,ab,Wv,ib,db],endpoint:xb,[jy]:Gy},{[wy]:[ub,hb,ab,Av,Bv,Lv,nb],endpoint:{[Ty]:cv,[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[ub,hb,ab,Av,Bv,gb,nb],endpoint:{[Ty]:Xy,[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[ub,hb,ab,Av,Bv,Lv,ib,lb],[ky]:[{[wy]:Oj,endpoint:fb,[jy]:Gy},{endpoint:fb,[jy]:Gy}],[jy]:Wy},{[wy]:[ub,hb,ab,Av,Bv,gb,ib,lb],[ky]:[{[wy]:Oj,endpoint:yb,[jy]:Gy},vb],[jy]:Wy},{[wy]:[ub,hb,ab,Av,Bv,Lv,ib,db],endpoint:fb,[jy]:Gy},{[wy]:[ub,hb,ab,Av,Bv,gb,ib,db],endpoint:yb,[jy]:Gy},{[wy]:[ub,hb,Tv,Wv,nb],endpoint:{[Ty]:dv,[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[ub,hb,Tv,Wv,ib,lb],[ky]:[{[wy]:Oj,endpoint:bb,[jy]:Gy},{endpoint:bb,[jy]:Gy}],[jy]:Wy},{[wy]:[ub,hb,Tv,Wv,ib,db],endpoint:bb,[jy]:Gy},{[wy]:[ub,hb,ab,Wv,nb],endpoint:{[Ty]:uv,[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[ub,hb,ab,Wv,ib,lb],[ky]:[{[wy]:Oj,endpoint:{[Ty]:uv,[Oy]:cb,[zy]:Uv},[jy]:Gy},{endpoint:jb,[jy]:Gy}],[jy]:Wy},{[wy]:[ub,hb,ab,Wv,ib,db],endpoint:jb,[jy]:Gy}],[jy]:Wy},kb],[jy]:Wy}],[jy]:Wy},{[wy]:[Av,Bv,{[Ny]:$y,[_y]:[{[Ny]:Ky,[_y]:[qv,"scheme"]},"http"]},{[Ny]:Qy,[_y]:[zv,Iy]},tb,hb,ub,ab],[ky]:[{[wy]:dj,[ky]:[{[wy]:Tj,[ky]:[vb],[jy]:Wy},kb],[jy]:Wy}],[jy]:Wy},{[wy]:[tb,{[Ny]:mv,[_y]:aj,[Cy]:hv}],[ky]:[{[wy]:[{[Ny]:Ky,[_y]:[wb,"resourceId[0]"],[Cy]:pv},{[Ny]:Zy,[_y]:[{[Ny]:$y,[_y]:[Nb,""]}]}],[ky]:[{[wy]:[{[Ny]:$y,[_y]:[_b,xv]}],[ky]:[{[wy]:Pj,[ky]:[{[wy]:Aj,[ky]:[Cb,Tb,{[wy]:Dj,[ky]:[Ob,{[wy]:Mj,[ky]:[Pb,{[wy]:Rj,[ky]:[{[wy]:dj,[ky]:[{[wy]:Ij,[ky]:[{[wy]:Fj,[ky]:[{[wy]:[{[Ny]:$y,[_y]:[Eb,""]}],error:"Invalid ARN: Missing account id",[jy]:Ly},{[wy]:Bj,[ky]:[{[wy]:Lj,[ky]:[{[wy]:ij,endpoint:{[Ty]:yv,[Oy]:Db,[zy]:Uv},[jy]:Gy},{[wy]:uj,endpoint:{[Ty]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Oy]:Db,[zy]:Uv},[jy]:Gy},{endpoint:{[Ty]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Oy]:Db,[zy]:Uv},[jy]:Gy}],[jy]:Wy},Mb],[jy]:Wy},zb],[jy]:Wy},Rb],[jy]:Wy},Ib],[jy]:Wy}],[jy]:Wy}],[jy]:Wy},Fb],[jy]:Wy},{error:"Invalid ARN: bucket ARN is missing a region",[jy]:Ly}],[jy]:Wy},Bb],[jy]:Wy},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[jy]:Ly}],[jy]:Wy},{[wy]:Pj,[ky]:[{[wy]:Aj,[ky]:[{[wy]:Dj,[ky]:[{[wy]:Pj,[ky]:[{[wy]:Dj,[ky]:[Ob,{[wy]:Mj,[ky]:[Pb,{[wy]:Rj,[ky]:[{[wy]:dj,[ky]:[{[wy]:[{[Ny]:$y,[_y]:[Ab,"{partitionResult#name}"]}],[ky]:[{[wy]:Fj,[ky]:[{[wy]:[{[Ny]:$y,[_y]:[_b,ov]}],[ky]:[{[wy]:Bj,[ky]:[{[wy]:Lj,[ky]:[{[wy]:sj,error:"Access Points do not support S3 Accelerate",[jy]:Ly},{[wy]:[Ov,Pv],endpoint:{[Ty]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Oy]:Lb,[zy]:Uv},[jy]:Gy},{[wy]:[Ov,ub],endpoint:{[Ty]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Oy]:Lb,[zy]:Uv},[jy]:Gy},{[wy]:[hb,Pv],endpoint:{[Ty]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Oy]:Lb,[zy]:Uv},[jy]:Gy},{[wy]:[hb,ub,Av,Bv],endpoint:{[Ty]:yv,[Oy]:Lb,[zy]:Uv},[jy]:Gy},{[wy]:[hb,ub],endpoint:{[Ty]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Oy]:Lb,[zy]:Uv},[jy]:Gy}],[jy]:Wy},Mb],[jy]:Wy},zb],[jy]:Wy},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[jy]:Ly}],[jy]:Wy},Rb],[jy]:Wy},Ib],[jy]:Wy}],[jy]:Wy}],[jy]:Wy},Fb],[jy]:Wy}],[jy]:Wy}],[jy]:Wy},{[wy]:[{[Ny]:sv,[_y]:[Sb,Iy]}],[ky]:[{[wy]:nj,error:"S3 MRAP does not support dual-stack",[jy]:Ly},{[wy]:uj,error:"S3 MRAP does not support FIPS",[jy]:Ly},{[wy]:sj,error:"S3 MRAP does not support S3 Accelerate",[jy]:Ly},{[wy]:[{[Ny]:By,[_y]:[{[Sy]:"DisableMultiRegionAccessPoints"},Iy]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[jy]:Ly},{[wy]:[{[Ny]:qy,[_y]:tj,[Cy]:vv}],[ky]:[{[wy]:[{[Ny]:$y,[_y]:[{[Ny]:Ky,[_y]:[{[Sy]:vv},Uy]},{[Ny]:Ky,[_y]:[wb,"partition"]}]}],[ky]:[{endpoint:{[Ty]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[Oy]:{[Ay]:[{[Ey]:Iy,name:iv,[Dy]:ov,[Ry]:["*"]}]},[zy]:Uv},[jy]:Gy}],[jy]:Wy},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[jy]:Ly}],[jy]:Wy}],[jy]:Wy},{error:"Invalid Access Point Name",[jy]:Ly}],[jy]:Wy},Bb],[jy]:Wy},{[wy]:[{[Ny]:$y,[_y]:[_b,lv]}],[ky]:[{[wy]:nj,error:"S3 Outposts does not support Dual-stack",[jy]:Ly},{[wy]:uj,error:"S3 Outposts does not support FIPS",[jy]:Ly},{[wy]:sj,error:"S3 Outposts does not support S3 Accelerate",[jy]:Ly},{[wy]:[{[Ny]:Fy,[_y]:[{[Ny]:Ky,[_y]:[wb,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[jy]:Ly},{[wy]:[{[Ny]:Ky,[_y]:Ej,[Cy]:nv}],[ky]:[{[wy]:Sj,[ky]:[Pb,{[wy]:Rj,[ky]:[{[wy]:dj,[ky]:[{[wy]:Ij,[ky]:[{[wy]:Fj,[ky]:[{[wy]:Bj,[ky]:[{[wy]:[{[Ny]:Ky,[_y]:zj,[Cy]:bv}],[ky]:[{[wy]:[{[Ny]:Ky,[_y]:[wb,"resourceId[3]"],[Cy]:fv}],[ky]:[{[wy]:[{[Ny]:$y,[_y]:[{[Sy]:bv},gv]}],[ky]:[{[wy]:ij,endpoint:{[Ty]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[Oy]:qb,[zy]:Uv},[jy]:Gy},{endpoint:{[Ty]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Oy]:qb,[zy]:Uv},[jy]:Gy}],[jy]:Wy},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[jy]:Ly}],[jy]:Wy},{error:"Invalid ARN: expected an access point name",[jy]:Ly}],[jy]:Wy},{error:"Invalid ARN: Expected a 4-component resource",[jy]:Ly}],[jy]:Wy},zb],[jy]:Wy},Rb],[jy]:Wy},Ib],[jy]:Wy}],[jy]:Wy}],[jy]:Wy},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[jy]:Ly}],[jy]:Wy},{error:"Invalid ARN: The Outpost Id was not set",[jy]:Ly}],[jy]:Wy},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[jy]:Ly}],[jy]:Wy},{error:"Invalid ARN: No ARN type specified",[jy]:Ly}],[jy]:Wy},{[wy]:[{[Ny]:Hy,[_y]:[zv,0,4,!1],[Cy]:jv},{[Ny]:$y,[_y]:[{[Sy]:jv},"arn:"]},{[Ny]:Zy,[_y]:[{[Ny]:Fy,[_y]:[$b]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[jy]:Ly},{[wy]:[{[Ny]:By,[_y]:[rb,Iy]},$b],error:"Path-style addressing cannot be used with ARN buckets",[jy]:Ly},{[wy]:oj,[ky]:[{[wy]:dj,[ky]:[{[wy]:[ab],[ky]:[{[wy]:[Pv,Wv,Ov,nb],endpoint:{[Ty]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[Pv,Wv,Ov,ib,lb],[ky]:[{endpoint:Kb,[jy]:Gy}],[jy]:Wy},{[wy]:[Pv,Wv,Ov,ib,db],endpoint:Kb,[jy]:Gy},{[wy]:[ub,Wv,Ov,nb],endpoint:{[Ty]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[ub,Wv,Ov,ib,lb],[ky]:[{endpoint:Ub,[jy]:Gy}],[jy]:Wy},{[wy]:[ub,Wv,Ov,ib,db],endpoint:Ub,[jy]:Gy},{[wy]:[Pv,Wv,hb,nb],endpoint:{[Ty]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[Pv,Wv,hb,ib,lb],[ky]:[{endpoint:Hb,[jy]:Gy}],[jy]:Wy},{[wy]:[Pv,Wv,hb,ib,db],endpoint:Hb,[jy]:Gy},{[wy]:[ub,Av,Bv,hb,nb],endpoint:{[Ty]:kv,[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[ub,Av,Bv,hb,ib,lb],[ky]:[{[wy]:Oj,endpoint:Yb,[jy]:Gy},{endpoint:Yb,[jy]:Gy}],[jy]:Wy},{[wy]:[ub,Av,Bv,hb,ib,db],endpoint:Yb,[jy]:Gy},{[wy]:[ub,Wv,hb,nb],endpoint:{[Ty]:wv,[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[ub,Wv,hb,ib,lb],[ky]:[{[wy]:Oj,endpoint:{[Ty]:wv,[Oy]:cb,[zy]:Uv},[jy]:Gy},{endpoint:Vb,[jy]:Gy}],[jy]:Wy},{[wy]:[ub,Wv,hb,ib,db],endpoint:Vb,[jy]:Gy}],[jy]:Wy},{error:"Path-style addressing cannot be used with S3 Accelerate",[jy]:Ly}],[jy]:Wy}],[jy]:Wy}],[jy]:Wy},{[wy]:[{[Ny]:Fy,[_y]:[Gb]},{[Ny]:By,[_y]:[Gb,Iy]}],[ky]:[{[wy]:dj,[ky]:[{[wy]:qj,[ky]:[Cb,Tb,{[wy]:ij,endpoint:{[Ty]:ev,[Oy]:Wb,[zy]:Uv},[jy]:Gy},{[wy]:uj,endpoint:{[Ty]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[Oy]:Wb,[zy]:Uv},[jy]:Gy},{endpoint:{[Ty]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[Oy]:Wb,[zy]:Uv},[jy]:Gy}],[jy]:Wy},kb],[jy]:Wy}],[jy]:Wy},{[wy]:[Xv],[ky]:[{[wy]:dj,[ky]:[{[wy]:qj,[ky]:[{[wy]:[Ov,Pv,Wv,nb],endpoint:{[Ty]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[Ov,Pv,Wv,ib,lb],[ky]:[{endpoint:Qb,[jy]:Gy}],[jy]:Wy},{[wy]:[Ov,Pv,Wv,ib,db],endpoint:Qb,[jy]:Gy},{[wy]:[Ov,ub,Wv,nb],endpoint:{[Ty]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[Ov,ub,Wv,ib,lb],[ky]:[{endpoint:Xb,[jy]:Gy}],[jy]:Wy},{[wy]:[Ov,ub,Wv,ib,db],endpoint:Xb,[jy]:Gy},{[wy]:[hb,Pv,Wv,nb],endpoint:{[Ty]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[hb,Pv,Wv,ib,lb],[ky]:[{endpoint:Zb,[jy]:Gy}],[jy]:Wy},{[wy]:[hb,Pv,Wv,ib,db],endpoint:Zb,[jy]:Gy},{[wy]:[hb,ub,Av,Bv,nb],endpoint:{[Ty]:ev,[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[hb,ub,Av,Bv,ib,lb],[ky]:[{[wy]:Oj,endpoint:Jb,[jy]:Gy},{endpoint:Jb,[jy]:Gy}],[jy]:Wy},{[wy]:[hb,ub,Av,Bv,ib,db],endpoint:Jb,[jy]:Gy},{[wy]:[hb,ub,Wv,nb],endpoint:{[Ty]:Nv,[Oy]:sb,[zy]:Uv},[jy]:Gy},{[wy]:[hb,ub,Wv,ib,lb],[ky]:[{[wy]:Oj,endpoint:{[Ty]:Nv,[Oy]:cb,[zy]:Uv},[jy]:Gy},{endpoint:ej,[jy]:Gy}],[jy]:Wy},{[wy]:[hb,ub,Wv,ib,db],endpoint:ej,[jy]:Gy}],[jy]:Wy},kb],[jy]:Wy}],[jy]:Wy}],[jy]:Wy},{error:"A region must be set when sending requests to S3.",[jy]:Ly}]},Kj=new class{constructor({size:e,params:t}){this.data=new Map,this.parameters=[],this.capacity=e??50,t&&(this.parameters=t)}get(e,t){const r=this.hash(e);if(!1===r)return t();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const e=this.data.keys();let t=0;for(;;){const{value:r,done:a}=e.next();if(this.data.delete(r),a||++t>10)break}}this.data.set(r,t())}return this.data.get(r)}size(){return this.data.size}hash(e){let t="";const{parameters:r}=this;if(0===r.length)return!1;for(const a of r){const r=String(e[a]??"");if(r.includes("|;"))return!1;t+=r+"|;"}return t}}({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),Uj=(e,t={})=>Kj.get(e,(()=>((e,t)=>{var r,a,n,s;const{endpointParams:i,logger:l}=t,{parameters:o,rules:c}=e;null==(a=null==(r=t.logger)?void 0:r.debug)||a.call(r,`${Zg} Initial EndpointParams: ${Jg(i)}`);const d=Object.entries(o).filter((([,e])=>null!=e.default)).map((([e,t])=>[e,t.default]));if(d.length>0)for(const[h,p]of d)i[h]=i[h]??p;const u=Object.entries(o).filter((([,e])=>e.required)).map((([e])=>e));for(const h of u)if(null==i[h])throw new ef(`Missing required parameter: '${h}'`);const m=ff(c,{endpointParams:i,logger:l,referenceRecord:{}});return null==(s=null==(n=t.logger)?void 0:n.debug)||s.call(n,`${Zg} Resolved endpoint: ${Jg(m)}`),m})($j,{endpointParams:e,logger:t.logger})));Xg.aws=bf;const Hj=(Yj=async(e,t,r)=>({operation:Vu(t).operation,region:await Gu(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),async(e,t,r)=>{var a,n,s;if(!r)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const i=await Yj(e,t,r),l=null==(s=null==(n=null==(a=Vu(t))?void 0:a.commandInstance)?void 0:n.constructor)?void 0:s.getEndpointParameterInstructions;if(!l)throw new Error(`getEndpointParameterInstructions() is not defined on \`${t.commandName}\``);const o=await Kf(r,{getEndpointParameterInstructions:l},e);return Object.assign(i,o)});var Yj;function Vj(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function Gj(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}const Wj=(Qj=Uj,Xj=e=>{const t=[];return e.operation,t.push(Vj(e)),t.push(Gj(e)),t},Zj={"aws.auth#sigv4":Vj,"aws.auth#sigv4a":Gj},e=>{var t;const r=null==(t=Qj(e).properties)?void 0:t.authSchemes;if(!r)return Xj(e);const a=[];for(const n of r){const{name:t,properties:s={},...i}=n,l=t.toLowerCase();let o;if("sigv4a"===l){o="aws.auth#sigv4a";const e=r.find((e=>{const t=e.name.toLowerCase();return"sigv4a"!==t&&t.startsWith("sigv4")}));if("none"===vy.sigv4aDependency()&&e)continue}else{if(!l.startsWith("sigv4"))throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${l}\``);o="aws.auth#sigv4"}const c=Zj[o];if(!c)throw new Error(`Could not find HttpAuthOption create function for \`${o}\``);const d=c(e);d.schemeId=o,d.signingProperties={...d.signingProperties||{},...i,...s},a.push(d)}return a});var Qj,Xj,Zj;const Jj=e=>{const t=(e=>(e.sigv4aSigningRegionSet=sm(e.sigv4aSigningRegionSet),e))(Qh(e));return Object.assign(t,{authSchemePreference:Gu(e.authSchemePreference??[])})},ek={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class tk extends op{constructor(e){super(e),Object.setPrototypeOf(this,tk.prototype)}}class rk extends tk{constructor(e){super({name:"NoSuchUpload",$fault:"client",...e}),r(this,"name","NoSuchUpload"),r(this,"$fault","client"),Object.setPrototypeOf(this,rk.prototype)}}class ak extends tk{constructor(e){super({name:"ObjectNotInActiveTierError",$fault:"client",...e}),r(this,"name","ObjectNotInActiveTierError"),r(this,"$fault","client"),Object.setPrototypeOf(this,ak.prototype)}}class nk extends tk{constructor(e){super({name:"BucketAlreadyExists",$fault:"client",...e}),r(this,"name","BucketAlreadyExists"),r(this,"$fault","client"),Object.setPrototypeOf(this,nk.prototype)}}class sk extends tk{constructor(e){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...e}),r(this,"name","BucketAlreadyOwnedByYou"),r(this,"$fault","client"),Object.setPrototypeOf(this,sk.prototype)}}class ik extends tk{constructor(e){super({name:"NoSuchBucket",$fault:"client",...e}),r(this,"name","NoSuchBucket"),r(this,"$fault","client"),Object.setPrototypeOf(this,ik.prototype)}}var lk,ok;(lk||(lk={})).visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1]),(ok||(ok={})).visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.AccessPointArn?t.AccessPointArn(e.AccessPointArn):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1]);class ck extends tk{constructor(e){super({name:"InvalidObjectState",$fault:"client",...e}),r(this,"name","InvalidObjectState"),r(this,"$fault","client"),r(this,"StorageClass"),r(this,"AccessTier"),Object.setPrototypeOf(this,ck.prototype),this.StorageClass=e.StorageClass,this.AccessTier=e.AccessTier}}class dk extends tk{constructor(e){super({name:"NoSuchKey",$fault:"client",...e}),r(this,"name","NoSuchKey"),r(this,"$fault","client"),Object.setPrototypeOf(this,dk.prototype)}}class uk extends tk{constructor(e){super({name:"NotFound",$fault:"client",...e}),r(this,"name","NotFound"),r(this,"$fault","client"),Object.setPrototypeOf(this,uk.prototype)}}const mk=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:lp},...e.SessionToken&&{SessionToken:lp}}),hk=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:lp},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:lp},...e.Credentials&&{Credentials:mk(e.Credentials)}}),pk=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:lp},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:lp}});class xk extends tk{constructor(e){super({name:"EncryptionTypeMismatch",$fault:"client",...e}),r(this,"name","EncryptionTypeMismatch"),r(this,"$fault","client"),Object.setPrototypeOf(this,xk.prototype)}}class gk extends tk{constructor(e){super({name:"InvalidRequest",$fault:"client",...e}),r(this,"name","InvalidRequest"),r(this,"$fault","client"),Object.setPrototypeOf(this,gk.prototype)}}class fk extends tk{constructor(e){super({name:"InvalidWriteOffset",$fault:"client",...e}),r(this,"name","InvalidWriteOffset"),r(this,"$fault","client"),Object.setPrototypeOf(this,fk.prototype)}}class yk extends tk{constructor(e){super({name:"TooManyParts",$fault:"client",...e}),r(this,"name","TooManyParts"),r(this,"$fault","client"),Object.setPrototypeOf(this,yk.prototype)}}class vk extends tk{constructor(e){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...e}),r(this,"name","ObjectAlreadyInActiveTierError"),r(this,"$fault","client"),Object.setPrototypeOf(this,vk.prototype)}}var bk;(bk||(bk={})).visit=(e,t)=>void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1]);const jk=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:lp},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:lp}}),kk=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:lp},...e.SSEKMSKeyId&&{SSEKMSKeyId:lp},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:lp}}),wk=async(e,t)=>{const r=uh(e,t),a=gp({},pp,{[nN]:e[Cw],[bN]:e[Tw],[jN]:e[Dw],[wN]:e[Ew],[kN]:[()=>pp(e[Gk]),()=>e[Gk].toString()]});r.bp("/"),r.p("Bucket",(()=>e.Bucket),"{Bucket}",!1);const n=gp({[Xw]:[,""]});return r.m("GET").h(a).q(n).b(undefined),r.build()},Nk=async(e,t)=>{const r=uh(e,t),a=gp({},pp,{...void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(((t,r)=>(t[`x-amz-meta-${r.toLowerCase()}`]=e.Metadata[r],t)),{}),[Yw]:e[cw]||"application/octet-stream",[Zw]:e[Hk],[Lw]:e[Xk],[qw]:e[tw],[$w]:e[rw],[Kw]:e[aw],[Uw]:[()=>pp(e[nw]),()=>e[nw].toString()],[Hw]:e[sw],[vN]:e[Qk],[Jw]:e[Zk],[eN]:e[Jk],[tN]:e[ew],[rN]:e[iw],[aN]:e[lw],[Vw]:[()=>pp(e[dw]),()=>function(e){const t=e.getUTCFullYear(),r=e.getUTCMonth(),a=e.getUTCDay(),n=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),l=e.getUTCSeconds();return`${Jm[a]}, ${n<10?`0${n}`:`${n}`} ${eh[r]} ${t} ${s<10?`0${s}`:`${s}`}:${i<10?`0${i}`:`${i}`}:${l<10?`0${l}`:`${l}`} GMT`}(e[dw]).toString()],[Ww]:e[yw],[Qw]:e[vw],[oN]:e[pw],[cN]:e[xw],[dN]:e[gw],[uN]:e[fw],[ON]:[()=>pp(e[Fw]),()=>e[Fw].toString()],[bN]:e[Tw],[yN]:e[Sw],[PN]:e[Bw],[NN]:e[Ow],[_N]:e[Pw],[SN]:e[Aw],[jN]:e[Dw],[wN]:e[Ew],[kN]:[()=>pp(e[Gk]),()=>e[Gk].toString()],[fN]:e[Nw],[CN]:e[Rw],[hN]:e[jw],[pN]:[()=>pp(e[kw]),()=>{return(t=e[kw],t.toISOString().replace(".000Z","Z")).toString();var t}],[mN]:e[bw],[lN]:e[uw]});r.bp("/{Key+}"),r.p("Bucket",(()=>e.Bucket),"{Bucket}",!1),r.p("Key",(()=>e.Key),"{Key+}",!0);const n=gp({[AN]:[,"PutObject"]});let s,i;return void 0!==e.Body&&(i=e.Body,s=i),r.m("PUT").h(a).q(n).b(s),r.build()},_k=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Ck(e,t);const r=gp({$metadata:Uk(e),[Tw]:[,e.headers[bN]],[Dw]:[,e.headers[jN]],[Ew]:[,e.headers[wN]],[Gk]:[()=>void 0!==e.headers[kN],()=>Bm(e.headers[kN])]}),a=Vm((e=>{if(null==e)return;if("object"==typeof e&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)})(await Fx(e.body,t)),"body");return null!=a[Wk]&&(r[Wk]=Kk(a[Wk])),r},Sk=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Ck(e,t);const r=gp({$metadata:Uk(e),[hw]:[,e.headers[iN]],[mw]:[,e.headers[Gw]],[Zk]:[,e.headers[Jw]],[Jk]:[,e.headers[eN]],[ew]:[,e.headers[tN]],[iw]:[,e.headers[rN]],[lw]:[,e.headers[aN]],[ow]:[,e.headers[sN]],[Tw]:[,e.headers[bN]],[Iw]:[,e.headers[TN]],[Ow]:[,e.headers[NN]],[Aw]:[,e.headers[SN]],[Dw]:[,e.headers[jN]],[Ew]:[,e.headers[wN]],[Gk]:[()=>void 0!==e.headers[kN],()=>Bm(e.headers[kN])],[zw]:[()=>void 0!==e.headers[xN],()=>{return t=e.headers[xN],$m("string"==typeof t?Qm(t):t);var t}],[ww]:[,e.headers[gN]]});return await Im(e.body,t),r},Ck=async(e,t)=>{const r={...e,body:await Bx(e.body,t)},a=((e,t)=>{var r;return void 0!==(null==(r=null==t?void 0:t.Error)?void 0:r.Code)?t.Error.Code:void 0!==(null==t?void 0:t.Code)?t.Code:404==e.statusCode?"NotFound":void 0})(e,r.body);switch(a){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await Fk(r);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await qk(r);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await Pk(r);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await Ak(r);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await Rk(r);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await Dk(r);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Ik(r);case"NotFound":case"com.amazonaws.s3#NotFound":throw await Bk(r);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await Ek(r);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await Mk(r);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await zk(r);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await $k(r);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await Lk(r);default:const t=r.body;return Tk({output:e,parsedBody:t,errorCode:a})}},Tk=(Ok=tk,({output:e,parsedBody:t,errorCode:r})=>{(({output:e,parsedBody:t,exceptionCtor:r,errorCode:a})=>{const n=dp(e),s=n.httpStatusCode?n.httpStatusCode+"":void 0,i=new r({name:(null==t?void 0:t.code)||(null==t?void 0:t.Code)||a||s||"UnknownError",$fault:"client",$metadata:n});throw cp(i,t)})({output:e,parsedBody:t,exceptionCtor:Ok,errorCode:r})});var Ok;const Pk=async(e,t)=>{const r=gp({});e.body;const a=new nk({$metadata:Uk(e),...r});return cp(a,e.body)},Ak=async(e,t)=>{const r=gp({});e.body;const a=new sk({$metadata:Uk(e),...r});return cp(a,e.body)},Ek=async(e,t)=>{const r=gp({});e.body;const a=new xk({$metadata:Uk(e),...r});return cp(a,e.body)},Dk=async(e,t)=>{const r=gp({}),a=e.body;null!=a[Vk]&&(r[Vk]=Gm(a[Vk])),null!=a[Sw]&&(r[Sw]=Gm(a[Sw]));const n=new ck({$metadata:Uk(e),...r});return cp(n,e.body)},Mk=async(e,t)=>{const r=gp({});e.body;const a=new gk({$metadata:Uk(e),...r});return cp(a,e.body)},zk=async(e,t)=>{const r=gp({});e.body;const a=new fk({$metadata:Uk(e),...r});return cp(a,e.body)},Rk=async(e,t)=>{const r=gp({});e.body;const a=new ik({$metadata:Uk(e),...r});return cp(a,e.body)},Ik=async(e,t)=>{const r=gp({});e.body;const a=new dk({$metadata:Uk(e),...r});return cp(a,e.body)},Fk=async(e,t)=>{const r=gp({});e.body;const a=new rk({$metadata:Uk(e),...r});return cp(a,e.body)},Bk=async(e,t)=>{const r=gp({});e.body;const a=new uk({$metadata:Uk(e),...r});return cp(a,e.body)},Lk=async(e,t)=>{const r=gp({});e.body;const a=new vk({$metadata:Uk(e),...r});return cp(a,e.body)},qk=async(e,t)=>{const r=gp({});e.body;const a=new ak({$metadata:Uk(e),...r});return cp(a,e.body)},$k=async(e,t)=>{const r=gp({});e.body;const a=new yk({$metadata:Uk(e),...r});return cp(a,e.body)},Kk=(e,t)=>{const r={};return null!=e[Yk]&&(r[Yk]=Gm(e[Yk])),null!=e[_w]&&(r[_w]=Gm(e[_w])),null!=e[Mw]&&(r[Mw]=Gm(e[Mw])),null!=e[hw]&&(r[hw]=Vm(rh(e[hw]))),r},Uk=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Hk="ACL",Yk="AccessKeyId",Vk="AccessTier",Gk="BucketKeyEnabled",Wk="Credentials",Qk="ChecksumAlgorithm",Xk="CacheControl",Zk="ChecksumCRC32",Jk="ChecksumCRC32C",ew="ChecksumCRC64NVME",tw="ContentDisposition",rw="ContentEncoding",aw="ContentLanguage",nw="ContentLength",sw="ContentMD5",iw="ChecksumSHA1",lw="ChecksumSHA256",ow="ChecksumType",cw="ContentType",dw="Expires",uw="ExpectedBucketOwner",mw="ETag",hw="Expiration",pw="GrantFullControl",xw="GrantRead",gw="GrantReadACP",fw="GrantWriteACP",yw="IfMatch",vw="IfNoneMatch",bw="ObjectLockLegalHoldStatus",jw="ObjectLockMode",kw="ObjectLockRetainUntilDate",ww="RequestCharged",Nw="RequestPayer",_w="SecretAccessKey",Sw="StorageClass",Cw="SessionMode",Tw="ServerSideEncryption",Ow="SSECustomerAlgorithm",Pw="SSECustomerKey",Aw="SSECustomerKeyMD5",Ew="SSEKMSEncryptionContext",Dw="SSEKMSKeyId",Mw="SessionToken",zw="Size",Rw="Tagging",Iw="VersionId",Fw="WriteOffsetBytes",Bw="WebsiteRedirectLocation",Lw="cache-control",qw="content-disposition",$w="content-encoding",Kw="content-language",Uw="content-length",Hw="content-md5",Yw="content-type",Vw="expires",Gw="etag",Ww="if-match",Qw="if-none-match",Xw="session",Zw="x-amz-acl",Jw="x-amz-checksum-crc32",eN="x-amz-checksum-crc32c",tN="x-amz-checksum-crc64nvme",rN="x-amz-checksum-sha1",aN="x-amz-checksum-sha256",nN="x-amz-create-session-mode",sN="x-amz-checksum-type",iN="x-amz-expiration",lN="x-amz-expected-bucket-owner",oN="x-amz-grant-full-control",cN="x-amz-grant-read",dN="x-amz-grant-read-acp",uN="x-amz-grant-write-acp",mN="x-amz-object-lock-legal-hold",hN="x-amz-object-lock-mode",pN="x-amz-object-lock-retain-until-date",xN="x-amz-object-size",gN="x-amz-request-charged",fN="x-amz-request-payer",yN="x-amz-storage-class",vN="x-amz-sdk-checksum-algorithm",bN="x-amz-server-side-encryption",jN="x-amz-server-side-encryption-aws-kms-key-id",kN="x-amz-server-side-encryption-bucket-key-enabled",wN="x-amz-server-side-encryption-context",NN="x-amz-server-side-encryption-customer-algorithm",_N="x-amz-server-side-encryption-customer-key",SN="x-amz-server-side-encryption-customer-key-md5",CN="x-amz-tagging",TN="x-amz-version-id",ON="x-amz-write-offset-bytes",PN="x-amz-website-redirect-location",AN="x-id";class EN extends(sp.classBuilder().ep({...ek,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m((function(e,t,r,a){return[em(r,this.serialize,this.deserialize),Yf(r,e.getEndpointParameterInstructions()),Kg(r)]})).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(pk,hk).ser(wk).de(_k).build()){}const DN="3.830.0";function MN(e){return"string"==typeof e?0===e.length:0===e.byteLength}var zN={name:"SHA-1"},RN={name:"HMAC",hash:zN},IN=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);const FN={};function BN(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:FN}var LN=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,r){BN().crypto.subtle.importKey("raw",qN(e),RN,!1,["sign"]).then(t,r)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!MN(e)){var t=qN(e),r=new Uint8Array(this.toHash.byteLength+t.byteLength);r.set(this.toHash,0),r.set(t,this.toHash.byteLength),this.toHash=r}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return BN().crypto.subtle.sign(RN,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):MN(this.toHash)?Promise.resolve(IN):Promise.resolve().then((function(){return BN().crypto.subtle.digest(zN,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e.prototype.reset=function(){this.toHash=new Uint8Array(0)},e}();function qN(e){return"string"==typeof e?(t=e,(new TextEncoder).encode(t)):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var t}var $N=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function KN(e){return!(!function(e){if("object"==typeof e&&"object"==typeof e.crypto){return"function"==typeof e.crypto.getRandomValues}return!1}(e)||"object"!=typeof e.crypto.subtle)&&function(e){return e&&$N.every((function(t){return"function"==typeof e[t]}))}(e.crypto.subtle)}var UN=function(){function e(e){if(!KN(BN()))throw new Error("SHA1 not supported");this.hash=new LN(e)}return e.prototype.update=function(e,t){this.hash.update(Hx(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}(),HN={name:"SHA-256"},YN={name:"HMAC",hash:HN},VN=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),GN=function(){function e(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return e.prototype.update=function(e){if(!Yx(e)){var t=Hx(e),r=new Uint8Array(this.toHash.byteLength+t.byteLength);r.set(this.toHash,0),r.set(t,this.toHash.byteLength),this.toHash=r}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return BN().crypto.subtle.sign(YN,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):Yx(this.toHash)?Promise.resolve(VN):Promise.resolve().then((function(){return BN().crypto.subtle.digest(HN,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise((function(t,r){BN().crypto.subtle.importKey("raw",Hx(e.secret),YN,!1,["sign"]).then(t,r)})),this.key.catch((function(){})))},e}(),WN=64,QN=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),XN=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ZN=Math.pow(2,53)-1,JN=function(){function e(){this.state=Int32Array.from(XN),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,r=e.byteLength;if(this.bytesHashed+=r,8*this.bytesHashed>ZN)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[t++],r--,this.bufferLength===WN&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(t.setUint8(this.bufferLength++,128),r%WN>=56){for(var a=this.bufferLength;a<WN;a++)t.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(a=this.bufferLength;a<56;a++)t.setUint8(a,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var n=new Uint8Array(32);for(a=0;a<8;a++)n[4*a]=this.state[a]>>>24&255,n[4*a+1]=this.state[a]>>>16&255,n[4*a+2]=this.state[a]>>>8&255,n[4*a+3]=this.state[a]>>>0&255;return n},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,r=t[0],a=t[1],n=t[2],s=t[3],i=t[4],l=t[5],o=t[6],c=t[7],d=0;d<WN;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var u=this.temp[d-2],m=(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,h=((u=this.temp[d-15])>>>7|u<<25)^(u>>>18|u<<14)^u>>>3;this.temp[d]=(m+this.temp[d-7]|0)+(h+this.temp[d-16]|0)}var p=(((i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7))+(i&l^~i&o)|0)+(c+(QN[d]+this.temp[d]|0)|0)|0,x=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&a^r&n^a&n)|0;c=o,o=l,l=i,i=s+p|0,s=n,n=a,a=r,r=p+x|0}t[0]+=r,t[1]+=a,t[2]+=n,t[3]+=s,t[4]+=i,t[5]+=l,t[6]+=o,t[7]+=c},e}(),e_=function(){function e(e){this.secret=e,this.hash=new JN,this.reset()}return e.prototype.update=function(e){if(!Yx(e)&&!this.error)try{this.hash.update(Hx(e))}catch(die){this.error=die}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return ae(this,void 0,void 0,(function(){return ne(this,(function(e){return[2,this.digestSync()]}))}))},e.prototype.reset=function(){if(this.hash=new JN,this.secret){this.outer=new JN;var e=function(e){var t=Hx(e);if(t.byteLength>WN){var r=new JN;r.update(t),t=r.digest()}var a=new Uint8Array(WN);return a.set(t),a}(this.secret),t=new Uint8Array(WN);t.set(e);for(var r=0;r<WN;r++)e[r]^=54,t[r]^=92;this.hash.update(e),this.outer.update(t);for(r=0;r<e.byteLength;r++)e[r]=0}},e}();var t_=function(){function e(e){KN(BN())?this.hash=new GN(e):this.hash=new e_(e)}return e.prototype.update=function(e,t){this.hash.update(Hx(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();const r_={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},a_={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},n_={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},s_={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},i_={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class l_{static getFirstMatch(e,t){const r=t.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,t){const r=t.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,t,r){if(e.test(t))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,r=!1){const a=l_.getVersionPrecision(e),n=l_.getVersionPrecision(t);let s=Math.max(a,n),i=0;const l=l_.map([e,t],(e=>{const t=s-l_.getVersionPrecision(e),r=e+new Array(t+1).join(".0");return l_.map(r.split("."),(e=>new Array(20-e.length).join("0")+e)).reverse()}));for(r&&(i=s-Math.min(a,n)),s-=1;s>=i;){if(l[0][s]>l[1][s])return 1;if(l[0][s]===l[1][s]){if(s===i)return 0;s-=1}else if(l[0][s]<l[1][s])return-1}}static map(e,t){const r=[];let a;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(a=0;a<e.length;a+=1)r.push(t(e[a]));return r}static find(e,t){let r,a;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,a=e.length;r<a;r+=1){const a=e[r];if(t(a,r))return a}}static assign(e,...t){const r=e;let a,n;if(Object.assign)return Object.assign(e,...t);for(a=0,n=t.length;a<n;a+=1){const e=t[a];if("object"==typeof e&&null!==e){Object.keys(e).forEach((t=>{r[t]=e[t]}))}}return e}static getBrowserAlias(e){return r_[e]}static getBrowserTypeByAlias(e){return a_[e]||""}}const o_=/version\/(\d+(\.?_?\d+)+)/i,c_=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=l_.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=l_.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=l_.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=l_.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=l_.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=l_.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=l_.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=l_.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=l_.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=l_.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=l_.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=l_.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=l_.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=l_.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=l_.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=l_.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=l_.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=l_.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=l_.getFirstMatch(o_,e)||l_.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=l_.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=l_.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=l_.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=l_.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=l_.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=l_.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=l_.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=l_.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=l_.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=l_.getFirstMatch(o_,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:l_.getFirstMatch(t,e),version:l_.getSecondMatch(t,e)}}}],d_=[{test:[/Roku\/DVP/],describe(e){const t=l_.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s_.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=l_.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s_.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=l_.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=l_.getWindowsVersionName(t);return{name:s_.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:s_.iOS},r=l_.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=l_.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=l_.getMacOSVersionName(t),a={name:s_.MacOS,version:t};return r&&(a.versionName=r),a}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=l_.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s_.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=l_.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=l_.getAndroidVersionName(t),a={name:s_.Android,version:t};return r&&(a.versionName=r),a}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=l_.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:s_.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=l_.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||l_.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||l_.getFirstMatch(/\bbb(\d+)/i,e);return{name:s_.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=l_.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s_.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=l_.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s_.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:s_.Linux})},{test:[/CrOS/],describe:()=>({name:s_.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=l_.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s_.PlayStation4,version:t}}}],u_=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=l_.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:n_.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:n_.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:n_.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:n_.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:n_.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:n_.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:n_.tablet})},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=l_.getFirstMatch(/(ipod|iphone)/i,e);return{type:n_.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:n_.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:n_.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:n_.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:n_.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:n_.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:n_.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:n_.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:n_.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:n_.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:n_.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:n_.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:n_.tv})}],m_=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:i_.Blink};const t=l_.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i_.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:i_.Trident},r=l_.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:i_.Presto},r=l_.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:i_.Gecko},r=l_.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:i_.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:i_.WebKit},r=l_.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class h_{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=l_.find(c_,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=l_.find(d_,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=l_.find(u_,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=l_.find(m_,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return l_.assign({},this.parsedResult)}satisfies(e){const t={};let r=0;const a={};let n=0;if(Object.keys(e).forEach((s=>{const i=e[s];"string"==typeof i?(a[s]=i,n+=1):"object"==typeof i&&(t[s]=i,r+=1)})),r>0){const e=Object.keys(t),r=l_.find(e,(e=>this.isOS(e)));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}const a=l_.find(e,(e=>this.isPlatform(e)));if(a){const e=this.satisfies(t[a]);if(void 0!==e)return e}}if(n>0){const e=Object.keys(a),t=l_.find(e,(e=>this.isBrowser(e,!0)));if(void 0!==t)return this.compareVersion(a[t])}}isBrowser(e,t=!1){const r=this.getBrowserName().toLowerCase();let a=e.toLowerCase();const n=l_.getBrowserTypeByAlias(a);return t&&n&&(a=n.toLowerCase()),a===r}compareVersion(e){let t=[0],r=e,a=!1;const n=this.getBrowserVersion();if("string"==typeof n)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(a=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(a=!0,r=e.substr(1)),t.indexOf(l_.compareVersions(n,r,a))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((e=>this.is(e)))}}
/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class p_{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new h_(e,t)}static parse(e){return new h_(e).getResult()}static get BROWSER_MAP(){return a_}static get ENGINE_MAP(){return i_}static get OS_MAP(){return s_}static get PLATFORMS_MAP(){return n_}}const x_=({serviceId:e,clientVersion:t})=>async r=>{var a,n,s,i,l,o;const c="undefined"!=typeof window&&(null==(a=null==window?void 0:window.navigator)?void 0:a.userAgent)?p_.parse(window.navigator.userAgent):void 0,d=[["aws-sdk-js",t],["ua","2.1"],[`os/${(null==(n=null==c?void 0:c.os)?void 0:n.name)||"other"}`,null==(s=null==c?void 0:c.os)?void 0:s.version],["lang/js"],["md/browser",`${(null==(i=null==c?void 0:c.browser)?void 0:i.name)??"unknown"}_${(null==(l=null==c?void 0:c.browser)?void 0:l.version)??"unknown"}`]];e&&d.push([`api/${e}`,t]);const u=await(null==(o=null==r?void 0:r.userAgentAppId)?void 0:o.call(r));return u&&d.push([`app/${u}`]),d};class g_{constructor(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x8000000000000000||e<-0x8000000000000000)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let r=7,a=Math.abs(Math.round(e));r>-1&&a>0;r--,a/=256)t[r]=a;return e<0&&f_(t),new g_(t)}valueOf(){const e=this.bytes.slice(0),t=128&e[0];return t&&f_(e),parseInt(Dm(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function f_(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}class y_{constructor(e,t){this.toUtf8=e,this.fromUtf8=t}format(e){const t=[];for(const n of Object.keys(e)){const r=this.fromUtf8(n);t.push(Uint8Array.from([r.byteLength]),r,this.formatHeaderValue(e[n]))}const r=new Uint8Array(t.reduce(((e,t)=>e+t.byteLength),0));let a=0;for(const n of t)r.set(n,a),a+=n.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const a=new Uint8Array(9);return a[0]=5,a.set(e.value.bytes,1),a;case"binary":const n=new DataView(new ArrayBuffer(3+e.value.byteLength));n.setUint8(0,6),n.setUint16(1,e.value.byteLength,!1);const s=new Uint8Array(n.buffer);return s.set(e.value,3),s;case"string":const i=this.fromUtf8(e.value),l=new DataView(new ArrayBuffer(3+i.byteLength));l.setUint8(0,7),l.setUint16(1,i.byteLength,!1);const o=new Uint8Array(l.buffer);return o.set(i,3),o;case"timestamp":const c=new Uint8Array(9);return c[0]=8,c.set(g_.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!O_.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(Em(e.value.replace(/\-/g,"")),1),d}}parse(e){const t={};let r=0;for(;r<e.byteLength;){const a=e.getUint8(r++),n=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a));switch(r+=a,e.getUint8(r++)){case 0:t[n]={type:b_,value:!0};break;case 1:t[n]={type:b_,value:!1};break;case 2:t[n]={type:j_,value:e.getInt8(r++)};break;case 3:t[n]={type:k_,value:e.getInt16(r,!1)},r+=2;break;case 4:t[n]={type:w_,value:e.getInt32(r,!1)},r+=4;break;case 5:t[n]={type:N_,value:new g_(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:const a=e.getUint16(r,!1);r+=2,t[n]={type:__,value:new Uint8Array(e.buffer,e.byteOffset+r,a)},r+=a;break;case 7:const s=e.getUint16(r,!1);r+=2,t[n]={type:S_,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,s))},r+=s;break;case 8:t[n]={type:C_,value:new Date(new g_(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:const i=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,t[n]={type:T_,value:`${Dm(i.subarray(0,4))}-${Dm(i.subarray(4,6))}-${Dm(i.subarray(6,8))}-${Dm(i.subarray(8,10))}-${Dm(i.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return t}}var v_;!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(v_||(v_={}));const b_="boolean",j_="byte",k_="short",w_="integer",N_="long",__="binary",S_="string",C_="timestamp",T_="uuid",O_=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class P_{constructor(e,t){this.headerMarshaller=new y_(e,t),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),t=this.isEndOfStream;return{getMessage:()=>e,isEndOfStream:()=>t}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const t=this.isEndOfStream;return{getMessages:()=>e,isEndOfStream:()=>t}}encode({headers:e,body:t}){const r=this.headerMarshaller.format(e),a=r.byteLength+t.byteLength+16,n=new Uint8Array(a),s=new DataView(n.buffer,n.byteOffset,n.byteLength),i=new Jx;return s.setUint32(0,a,!1),s.setUint32(4,r.byteLength,!1),s.setUint32(8,i.update(n.subarray(0,8)).digest(),!1),n.set(r,12),n.set(t,r.byteLength+12),s.setUint32(a-4,i.update(n.subarray(8,a-4)).digest(),!1),n}decode(e){const{headers:t,body:r}=function({byteLength:e,byteOffset:t,buffer:r}){if(e<16)throw new Error("Provided message too short to accommodate event stream message overhead");const a=new DataView(r,t,e),n=a.getUint32(0,!1);if(e!==n)throw new Error("Reported message length does not match received message length");const s=a.getUint32(4,!1),i=a.getUint32(8,!1),l=a.getUint32(e-4,!1),o=(new Jx).update(new Uint8Array(r,t,8));if(i!==o.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${o.digest()})`);if(o.update(new Uint8Array(r,t+8,e-12)),l!==o.digest())throw new Error(`The message checksum (${o.digest()}) did not match the expected value of ${l}`);return{headers:new DataView(r,t+8+4,s),body:new Uint8Array(r,t+8+4+s,n-s-16)}}(e);return{headers:this.headerMarshaller.parse(t),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class A_{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream){const t=this.options.decoder.decode(e);yield t}}}class E_{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const t=this.options.encoder.encode(e);yield t}this.options.includeEndFrame&&(yield new Uint8Array(0))}}class D_{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const t=await this.options.deserializer(e);void 0!==t&&(yield t)}}}class M_{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream){const t=this.options.serializer(e);yield t}}}function z_(e,t){return async function(r){const{value:a}=r.headers[":message-type"];if("error"===a){const e=new Error(r.headers[":error-message"].value||"UnknownError");throw e.name=r.headers[":error-code"].value,e}if("exception"===a){const a=r.headers[":exception-type"].value,n={[a]:r},s=await e(n);if(s.$unknown){const e=new Error(t(r.body));throw e.name=a,e}throw s[a]}if("event"===a){const t={[r.headers[":event-type"].value]:r},a=await e(t);if(a.$unknown)return;return a}throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let R_=class{constructor({utf8Encoder:e,utf8Decoder:t}){this.eventStreamCodec=new P_(e,t),this.utfEncoder=e}deserialize(e,t){const r=function(e){let t=0,r=0,a=null,n=null;const s=e=>{if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);t=e,r=4,a=new Uint8Array(e),new DataView(a.buffer).setUint32(0,e,!1)};return{[Symbol.asyncIterator]:async function*(){const i=e[Symbol.asyncIterator]();for(;;){const{value:e,done:l}=await i.next();if(l){if(!t)return;if(t!==r)throw new Error("Truncated event message received.");return void(yield a)}const o=e.length;let c=0;for(;c<o;){if(!a){const t=o-c;n||(n=new Uint8Array(4));const a=Math.min(4-r,t);if(n.set(e.slice(c,c+a),r),r+=a,c+=a,r<4)break;s(new DataView(n.buffer).getUint32(0,!1)),n=null}const i=Math.min(t-r,o-c);a.set(e.slice(c,c+i),r),r+=i,c+=i,t&&t===r&&(yield a,a=null,t=0,r=0)}}}}}(e);return new D_({messageStream:new A_({inputStream:r,decoder:this.eventStreamCodec}),deserializer:z_(t,this.utfEncoder)})}serialize(e,t){return new E_({messageStream:new M_({inputStream:e,serializer:t}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};class I_{constructor({utf8Encoder:e,utf8Decoder:t}){this.universalMarshaller=new R_({utf8Decoder:t,utf8Encoder:e})}deserialize(e,t){const r=F_(e)?(a=e,{[Symbol.asyncIterator]:async function*(){const e=a.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}}}):e;var a;return this.universalMarshaller.deserialize(r,t)}serialize(e,t){const r=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?(e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){const{done:r,value:a}=await t.next();if(r)return e.close();e.enqueue(a)}})})(r):r}}const F_=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream,B_=e=>new I_(e);const L_=async function(e,t){const r=new e;return await async function(e,t,r=1048576){const a=e.size;let n=0;for(;n<a;){const s=e.slice(n,Math.min(a,n+r));t(new Uint8Array(await s.arrayBuffer())),n+=s.size}}(t,(e=>{r.update(e)})),r.digest()},q_=64,$_=[1732584193,4023233417,2562383102,271733878];class K_{constructor(){this.reset()}update(e){if(function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const t=function(e){if("string"==typeof e)return cm(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(e)}(e);let r=0,{byteLength:a}=t;for(this.bytesHashed+=a;a>0;)this.buffer.setUint8(this.bufferLength++,t[r++]),a--,this.bufferLength===q_&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:e,bufferLength:t,bytesHashed:r}=this,a=8*r;if(e.setUint8(this.bufferLength++,128),t%q_>=56){for(let t=this.bufferLength;t<q_;t++)e.setUint8(t,0);this.hashBuffer(),this.bufferLength=0}for(let n=this.bufferLength;n<56;n++)e.setUint8(n,0);e.setUint32(56,a>>>0,!0),e.setUint32(60,Math.floor(a/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(16));for(let t=0;t<4;t++)e.setUint32(4*t,this.state[t],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){const{buffer:e,state:t}=this;let r=t[0],a=t[1],n=t[2],s=t[3];r=H_(r,a,n,s,e.getUint32(0,!0),7,3614090360),s=H_(s,r,a,n,e.getUint32(4,!0),12,3905402710),n=H_(n,s,r,a,e.getUint32(8,!0),17,606105819),a=H_(a,n,s,r,e.getUint32(12,!0),22,3250441966),r=H_(r,a,n,s,e.getUint32(16,!0),7,4118548399),s=H_(s,r,a,n,e.getUint32(20,!0),12,1200080426),n=H_(n,s,r,a,e.getUint32(24,!0),17,2821735955),a=H_(a,n,s,r,e.getUint32(28,!0),22,4249261313),r=H_(r,a,n,s,e.getUint32(32,!0),7,1770035416),s=H_(s,r,a,n,e.getUint32(36,!0),12,2336552879),n=H_(n,s,r,a,e.getUint32(40,!0),17,4294925233),a=H_(a,n,s,r,e.getUint32(44,!0),22,2304563134),r=H_(r,a,n,s,e.getUint32(48,!0),7,1804603682),s=H_(s,r,a,n,e.getUint32(52,!0),12,4254626195),n=H_(n,s,r,a,e.getUint32(56,!0),17,2792965006),a=H_(a,n,s,r,e.getUint32(60,!0),22,1236535329),r=Y_(r,a,n,s,e.getUint32(4,!0),5,4129170786),s=Y_(s,r,a,n,e.getUint32(24,!0),9,3225465664),n=Y_(n,s,r,a,e.getUint32(44,!0),14,643717713),a=Y_(a,n,s,r,e.getUint32(0,!0),20,3921069994),r=Y_(r,a,n,s,e.getUint32(20,!0),5,3593408605),s=Y_(s,r,a,n,e.getUint32(40,!0),9,38016083),n=Y_(n,s,r,a,e.getUint32(60,!0),14,3634488961),a=Y_(a,n,s,r,e.getUint32(16,!0),20,3889429448),r=Y_(r,a,n,s,e.getUint32(36,!0),5,568446438),s=Y_(s,r,a,n,e.getUint32(56,!0),9,3275163606),n=Y_(n,s,r,a,e.getUint32(12,!0),14,4107603335),a=Y_(a,n,s,r,e.getUint32(32,!0),20,1163531501),r=Y_(r,a,n,s,e.getUint32(52,!0),5,2850285829),s=Y_(s,r,a,n,e.getUint32(8,!0),9,4243563512),n=Y_(n,s,r,a,e.getUint32(28,!0),14,1735328473),a=Y_(a,n,s,r,e.getUint32(48,!0),20,2368359562),r=V_(r,a,n,s,e.getUint32(20,!0),4,4294588738),s=V_(s,r,a,n,e.getUint32(32,!0),11,2272392833),n=V_(n,s,r,a,e.getUint32(44,!0),16,1839030562),a=V_(a,n,s,r,e.getUint32(56,!0),23,4259657740),r=V_(r,a,n,s,e.getUint32(4,!0),4,2763975236),s=V_(s,r,a,n,e.getUint32(16,!0),11,1272893353),n=V_(n,s,r,a,e.getUint32(28,!0),16,4139469664),a=V_(a,n,s,r,e.getUint32(40,!0),23,3200236656),r=V_(r,a,n,s,e.getUint32(52,!0),4,681279174),s=V_(s,r,a,n,e.getUint32(0,!0),11,3936430074),n=V_(n,s,r,a,e.getUint32(12,!0),16,3572445317),a=V_(a,n,s,r,e.getUint32(24,!0),23,76029189),r=V_(r,a,n,s,e.getUint32(36,!0),4,3654602809),s=V_(s,r,a,n,e.getUint32(48,!0),11,3873151461),n=V_(n,s,r,a,e.getUint32(60,!0),16,530742520),a=V_(a,n,s,r,e.getUint32(8,!0),23,3299628645),r=G_(r,a,n,s,e.getUint32(0,!0),6,4096336452),s=G_(s,r,a,n,e.getUint32(28,!0),10,1126891415),n=G_(n,s,r,a,e.getUint32(56,!0),15,2878612391),a=G_(a,n,s,r,e.getUint32(20,!0),21,4237533241),r=G_(r,a,n,s,e.getUint32(48,!0),6,1700485571),s=G_(s,r,a,n,e.getUint32(12,!0),10,2399980690),n=G_(n,s,r,a,e.getUint32(40,!0),15,4293915773),a=G_(a,n,s,r,e.getUint32(4,!0),21,2240044497),r=G_(r,a,n,s,e.getUint32(32,!0),6,1873313359),s=G_(s,r,a,n,e.getUint32(60,!0),10,4264355552),n=G_(n,s,r,a,e.getUint32(24,!0),15,2734768916),a=G_(a,n,s,r,e.getUint32(52,!0),21,1309151649),r=G_(r,a,n,s,e.getUint32(16,!0),6,4149444226),s=G_(s,r,a,n,e.getUint32(44,!0),10,3174756917),n=G_(n,s,r,a,e.getUint32(8,!0),15,718787259),a=G_(a,n,s,r,e.getUint32(36,!0),21,3951481745),t[0]=r+t[0]&4294967295,t[1]=a+t[1]&4294967295,t[2]=n+t[2]&4294967295,t[3]=s+t[3]&4294967295}reset(){this.state=Uint32Array.from($_),this.buffer=new DataView(new ArrayBuffer(q_)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function U_(e,t,r,a,n,s){return((t=(t+e&4294967295)+(a+s&4294967295)&4294967295)<<n|t>>>32-n)+r&4294967295}function H_(e,t,r,a,n,s,i){return U_(t&r|~t&a,e,t,n,s,i)}function Y_(e,t,r,a,n,s,i){return U_(t&a|r&~a,e,t,n,s,i)}function V_(e,t,r,a,n,s,i){return U_(t^r^a,e,t,n,s,i)}function G_(e,t,r,a,n,s,i){return U_(r^(t|~a),e,t,n,s,i)}const W_=["in-region","cross-region","mobile","standard","legacy"],Q_=()=>{var e,t;const r="undefined"!=typeof window&&(null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent)?p_.parse(window.navigator.userAgent):void 0,a=null==(t=null==r?void 0:r.platform)?void 0:t.type;return"tablet"===a||"mobile"===a},X_=e=>{const t=(({defaultsMode:e}={})=>fh((async()=>{const t="function"==typeof e?await e():e;switch(null==t?void 0:t.toLowerCase()){case"auto":return Promise.resolve(Q_()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(null==t?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${W_.join(", ")}, got ${t}`)}})))(e),r=()=>t().then(up),a=(e=>({apiVersion:"2006-03-01",base64Decoder:(null==e?void 0:e.base64Decoder)??om,base64Encoder:(null==e?void 0:e.base64Encoder)??mm,disableHostPrefix:(null==e?void 0:e.disableHostPrefix)??!1,endpointProvider:(null==e?void 0:e.endpointProvider)??Uj,extensions:(null==e?void 0:e.extensions)??[],getAwsChunkedEncodingStream:(null==e?void 0:e.getAwsChunkedEncodingStream)??km,httpAuthSchemeProvider:(null==e?void 0:e.httpAuthSchemeProvider)??Wj,httpAuthSchemes:(null==e?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Hu},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new Yu}],logger:(null==e?void 0:e.logger)??new xp,sdkStreamMixin:(null==e?void 0:e.sdkStreamMixin)??zm,serviceId:(null==e?void 0:e.serviceId)??"S3",signerConstructor:(null==e?void 0:e.signerConstructor)??vy,signingEscapePath:(null==e?void 0:e.signingEscapePath)??!1,urlParser:(null==e?void 0:e.urlParser)??qf,useArnRegion:(null==e?void 0:e.useArnRegion)??void 0,utf8Decoder:(null==e?void 0:e.utf8Decoder)??cm,utf8Encoder:(null==e?void 0:e.utf8Encoder)??um}))(e);return{...a,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(null==e?void 0:e.bodyLengthChecker)??Zh,credentialDefaultProvider:(null==e?void 0:e.credentialDefaultProvider)??(e=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(null==e?void 0:e.defaultUserAgentProvider)??x_({serviceId:a.serviceId,clientVersion:DN}),eventStreamSerdeProvider:(null==e?void 0:e.eventStreamSerdeProvider)??B_,maxAttempts:(null==e?void 0:e.maxAttempts)??3,md5:(null==e?void 0:e.md5)??K_,region:(null==e?void 0:e.region)??(n="Region is missing",()=>Promise.reject(n)),requestHandler:Tm.create((null==e?void 0:e.requestHandler)??r),retryMode:(null==e?void 0:e.retryMode)??(async()=>(await r()).retryMode||Wf),sha1:(null==e?void 0:e.sha1)??UN,sha256:(null==e?void 0:e.sha256)??t_,streamCollector:(null==e?void 0:e.streamCollector)??Om,streamHasher:(null==e?void 0:e.streamHasher)??L_,useDualstackEndpoint:(null==e?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(false)),useFipsEndpoint:(null==e?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(false))};var n},Z_=(e,t)=>{const r=Object.assign((e=>({setRegion(t){e.region=t},region:()=>e.region}))(e),mp(e),(e=>({setHttpHandler(t){e.httpHandler=t},httpHandler:()=>e.httpHandler,updateHttpClientConfig(t,r){var a;null==(a=e.httpHandler)||a.updateHttpClientConfig(t,r)},httpHandlerConfigs:()=>e.httpHandler.httpHandlerConfigs()}))(e),(e=>{const t=e.httpAuthSchemes;let r=e.httpAuthSchemeProvider,a=e.credentials;return{setHttpAuthScheme(e){const r=t.findIndex((t=>t.schemeId===e.schemeId));-1===r?t.push(e):t.splice(r,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){r=e},httpAuthSchemeProvider:()=>r,setCredentials(e){a=e},credentials:()=>a}})(e));return t.forEach((e=>e.configure(r))),Object.assign(e,{region:r.region()},(a=r,Object.assign((e=>{const t={};return e.checksumAlgorithms().forEach((e=>{t[e.algorithmId()]=e.checksumConstructor()})),t})(a),(e=>{const t={};return t.retryStrategy=e.retryStrategy(),t})(a))),{httpHandler:r.httpHandler()},(e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}))(r));var a};class J_ extends np{constructor(...[e]){const t=X_(e||{});super(t),r(this,"config"),this.initConfig=t;const a=(e=>Object.assign(e,{useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}))(t),n=function(e){const t=sm(e.userAgentAppId??void 0),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:"string"==typeof r?[[r]]:r,userAgentAppId:async()=>{var r,a;const n=await t();if(!function(e){return void 0===e||"string"==typeof e&&e.length<=50}(n)){const t="NoOpLogger"!==(null==(a=null==(r=e.logger)?void 0:r.constructor)?void 0:a.name)&&e.logger?e.logger:console;"string"!=typeof n?null==t||t.warn("userAgentAppId must be a string or undefined."):n.length>50&&(null==t||t.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return n}})}(a),s=(e=>{const{requestChecksumCalculation:t,responseChecksumValidation:r,requestStreamBufferSize:a}=e;return Object.assign(e,{requestChecksumCalculation:Gu(t??Tu),responseChecksumValidation:Gu(r??Au),requestStreamBufferSize:Number(a??0)})})(n),i=(e=>{const{retryStrategy:t,retryMode:r,maxAttempts:a}=e,n=Gu(a??3);return Object.assign(e,{maxAttempts:n,retryStrategy:async()=>t||(await Gu(r)()===Vf.ADAPTIVE?new sy(n):new ny(n))})})(s),l=(e=>{const{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{if("string"==typeof t)return Pf(t);const e=await t();return Pf(e)},useFipsEndpoint:async()=>{const e="string"==typeof t?t:await t();return!!Of(e)||("function"!=typeof r?Promise.resolve(!!r):r())}})})(i),o=(e=>{const t=e.tls??!0,{endpoint:r,useDualstackEndpoint:a,useFipsEndpoint:n}=e,s=null!=r?async()=>$f(await Gu(r)()):void 0,i=!!r,l=Object.assign(e,{endpoint:s,tls:t,isCustomEndpoint:i,useDualstackEndpoint:Gu(a??!1),useFipsEndpoint:Gu(n??!1)});let o;return l.serviceConfiguredEndpoint=async()=>(e.serviceId&&!o&&(o=Lf(e.serviceId)),o),l})(l),c=(d=o,Object.assign(d,{eventStreamMarshaller:d.eventStreamSerdeProvider(d)}));var d;const u=((e,{session:t})=>{const[r,a]=t,{forcePathStyle:n,useAccelerateEndpoint:s,disableMultiregionAccessPoints:i,followRegionRedirects:l,s3ExpressIdentityProvider:o,bucketEndpoint:c}=e;return Object.assign(e,{forcePathStyle:n??!1,useAccelerateEndpoint:s??!1,disableMultiregionAccessPoints:i??!1,followRegionRedirects:l??!1,s3ExpressIdentityProvider:o??new Cg((async e=>r().send(new a({Bucket:e})))),bucketEndpoint:c??!1})})(Jj(c),{session:[()=>this,EN]}),m=Z_(u,(null==e?void 0:e.extensions)||[]);var h;this.config=m,this.middlewareStack.use((h=this.config,{applyToStack:e=>{e.add(Sf(h),Tf)}})),this.middlewareStack.use(fy(this.config)),this.middlewareStack.use(Df(this.config)),this.middlewareStack.use(mg(this.config)),this.middlewareStack.use((this.config,{applyToStack:e=>{e.add(((e,t)=>async r=>{var a,n;try{const n=await e(r),{clientName:s,commandName:i,logger:l,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=o,u=c??t.inputFilterSensitiveLog,m=d??t.outputFilterSensitiveLog,{$metadata:h,...p}=n.output;return null==(a=null==l?void 0:l.info)||a.call(l,{clientName:s,commandName:i,input:u(r.input),output:m(p),metadata:h}),n}catch(s){const{clientName:e,commandName:a,logger:i,dynamoDbDocumentClientOptions:l={}}=t,{overrideInputFilterSensitiveLog:o}=l,c=o??t.inputFilterSensitiveLog;throw null==(n=null==i?void 0:i.error)||n.call(i,{clientName:e,commandName:a,input:c(r.input),error:s,metadata:s.$metadata}),s}}),hg)}})),this.middlewareStack.use(fg(this.config)),this.middlewareStack.use(((e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:a=>{a.addRelativeTo(Wu(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Qu)}}))(this.config,{httpAuthSchemeParametersProvider:Hj,identityProviderConfigProvider:async e=>new hh({"aws.auth#sigv4":e.credentials,"aws.auth#sigv4a":e.credentials})})),this.middlewareStack.use(nm(this.config)),this.middlewareStack.use(Yg(this.config)),this.middlewareStack.use(_u(this.config)),this.middlewareStack.use(kg(this.config)),this.middlewareStack.use(zg(this.config)),this.middlewareStack.use((e=>({applyToStack:t=>{t.addRelativeTo(Fg(e),am)}}))(this.config))}destroy(){super.destroy()}}const eS={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},tS=e=>({applyToStack:t=>{t.add(function(e){return t=>async r=>{const a={...r.input},n=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const t of n){const r=a[t.target];if(r){let n;"string"==typeof r?rS(r,e)?n=e.base64Decoder(r):(n=e.utf8Decoder(r),a[t.target]=e.base64Encoder(n)):(n=ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r),a[t.target]=e.base64Encoder(n));const s=new e.md5;s.update(n),a[t.hash]=e.base64Encoder(await s.digest())}}return t({...r,input:a})}}(e),eS)}});function rS(e,t){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return 32===t.base64Decoder(e).length}catch{return!1}}class aS extends(sp.classBuilder().ep({...ek,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m((function(e,t,r,a){return[em(r,this.serialize,this.deserialize),Yf(r,e.getEndpointParameterInstructions()),dg(r,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),vg(),Kg(r),tS(r)]})).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(kk,jk).ser(Nk).de(Sk).build()){}const nS="chat";class sS extends Error{constructor(e,t){super(e),this.code=t,this.name="ChatFileUploadError"}}const iS=new J_({region:"auto",endpoint:"https://d94a4504810cc7822034164a9de127f5.r2.cloudflarestorage.com",credentials:{accessKeyId:"ea2c75e2c09e7f26bb23fdac637b7b3b",secretAccessKey:"87a01b4cca85b01814fd553f9c8f4bca698154a83fdedd4de29b848996e34782"}}),lS=async(e,t,r)=>{try{if(!e)throw new sS("Dosya gerekli");const a=104857600;if(e.size>a)throw new sS("Dosya boyutu 100MB'dan küçük olmalıdır");const n=e.name.split(".").pop(),s=`chat/${t}/${`${Date.now()}_${Math.random().toString(36).substring(7)}.${n}`}`,i=await e.arrayBuffer(),l=new Uint8Array(i),o=new aS({Bucket:nS,Key:s,Body:l,ContentType:e.type,ContentLength:e.size,Metadata:{"original-name":e.name,"uploaded-by":r,"upload-date":(new Date).toISOString()}});await iS.send(o);const c="https://chat.kilovermeyontemleri.online";return{success:!0,data:{key:s,url:`${c}/${encodeURIComponent(s)}`,bucket:nS,contentType:e.type,size:e.size,fileName:e.name}}}catch(a){return a instanceof sS?{success:!1,error:{message:a.message,code:a.code}}:a instanceof Error?{success:!1,error:{message:`Yükleme hatası: ${a.message}`}}:{success:!1,error:{message:"Bilinmeyen bir hata oluştu"}}}};function oS(e){return e.size<=104857600}function cS(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}const dS=()=>{const{user:e}=Jl(),t=e=>e.replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ç/g,"c").replace(/Ğ/g,"G").replace(/Ü/g,"U").replace(/Ş/g,"S").replace(/İ/g,"I").replace(/Ö/g,"O").replace(/Ç/g,"C").replace(/[^a-zA-Z0-9.-]/g,"_").replace(/_{2,}/g,"_"),r=ze.useCallback((async t=>{var r;if(!e)return{success:!1,error:"Kullanıcı girişi gerekli"};if(!oS(t))return{success:!1,error:"Dosya çok büyük (max 100MB)"};try{let a;return a=t.type.startsWith("image/")?await(async(e,t,r)=>lS(e,t,r))(t,"general",e.id):await lS(t,"general",e.id),a.success&&a.data?{success:!0,url:a.data.url}:{success:!1,error:(null==(r=a.error)?void 0:r.message)||"Dosya yükleme hatası"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Dosya yükleme hatası"}}}),[e]),a=ze.useCallback((async r=>{if(!e)return{success:!1,error:"Kullanıcı girişi gerekli"};if(!oS(r))return{success:!1,error:"Dosya çok büyük (max 100MB)"};try{const a=Date.now(),n=t(r.name),s=`chat/${e.id}/${a}_${n}`,{data:i,error:l}=await Wl.storage.from("chat-files").upload(s,r);if(l)throw l;const{data:o}=Wl.storage.from("chat-files").getPublicUrl(i.path);return{success:!0,url:o.publicUrl}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Dosya yükleme hatası"}}}),[e]),n=ze.useCallback((async e=>{try{const t=await r(e);if(t.success)return t;const n=await a(e);return n.success&&rt({title:"Bilgi",description:"Dosya alternatif depolama sistemine yüklendi",variant:"default"}),n}catch(t){return{success:!1,error:"Dosya yüklenemedi"}}}),[r,a]),s=ze.useCallback(((e,t=1920,r=1080,a=.8)=>new Promise((n=>{const s=document.createElement("canvas"),i=s.getContext("2d"),l=new Image;l.onload=()=>{const{width:o,height:c}=l;let d=o,u=c;o>t&&(d=t,u=c*t/o),u>r&&(u=r,d=d*r/u),s.width=d,s.height=u,null==i||i.drawImage(l,0,0,d,u),s.toBlob((t=>{if(t){const r=new File([t],e.name,{type:e.type,lastModified:Date.now()});n(r)}else n(e)}),e.type,a)},l.onerror=()=>n(e),l.src=URL.createObjectURL(e)}))),[]);return{uploadFile:n,uploadToCloudflare:r,uploadToSupabase:a,resizeImage:s,getFileType:e=>e.type.startsWith("image/")?"image":"file",getFileIcon:e=>{var t;switch(null==(t=e.split(".").pop())?void 0:t.toLowerCase()){case"pdf":case"txt":return"📄";case"doc":case"docx":return"📝";case"xls":case"xlsx":case"ppt":case"pptx":return"📊";case"zip":case"rar":return"🗜️";case"mp4":case"webm":return"🎥";case"mp3":case"wav":return"🎵";default:return"📎"}},formatFileSize:cS,sanitizeFileName:t}},uS=({onSendVoice:e,onCancel:t,disabled:r=!1,className:a})=>{const{isRecording:n,isPaused:s,recordingTime:l,audioBlob:o,startRecording:c,stopRecording:d,togglePause:u,cancelRecording:m,clearAudio:h,formatTime:p,createAudioFile:x,canRecord:g,canStop:f,hasAudio:y}=(()=>{const[e,t]=ze.useState(!1),[r,a]=ze.useState(!1),[n,s]=ze.useState(0),[i,l]=ze.useState(null),o=ze.useRef(null),c=ze.useRef(null),d=ze.useRef(null),u=ze.useRef([]),m=ze.useCallback((()=>{d.current=setInterval((()=>{s((e=>e+1))}),1e3)}),[]),h=ze.useCallback((()=>{d.current&&(clearInterval(d.current),d.current=null)}),[]),p=ze.useCallback((async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100}});c.current=e,u.current=[];const r=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"});return o.current=r,r.ondataavailable=e=>{e.data.size>0&&u.current.push(e.data)},r.onstop=()=>{const e=new Blob(u.current,{type:"audio/webm;codecs=opus"});l(e),c.current&&(c.current.getTracks().forEach((e=>e.stop())),c.current=null)},r.start(100),t(!0),a(!1),s(0),l(null),m(),!0}catch(e){let t="Ses kaydı başlatılamadı";return e instanceof Error&&(t="NotAllowedError"===e.name?"Mikrofon izni gerekli":"NotFoundError"===e.name?"Mikrofon bulunamadı":e.message),rt({title:"Ses Kayıt Hatası",description:t,variant:"destructive"}),!1}}),[m,rt]),x=ze.useCallback((()=>{o.current&&e&&(r?(o.current.resume(),a(!1),m()):(o.current.pause(),a(!0),h()))}),[e,r,m,h]),g=ze.useCallback((()=>new Promise((r=>{if(!o.current||!e)return void r({success:!1,error:"Aktif kayıt yok"});const s=o.current;s.onstop=()=>{const e=new Blob(u.current,{type:"audio/webm;codecs=opus"});l(e),t(!1),a(!1),h(),r({success:!0,blob:e,duration:n})},s.stop()}))),[e,n,h]),f=ze.useCallback((()=>{o.current&&o.current.stop(),c.current&&(c.current.getTracks().forEach((e=>e.stop())),c.current=null),t(!1),a(!1),s(0),l(null),h(),u.current=[]}),[h]),y=ze.useCallback((()=>{l(null),s(0)}),[]),v=ze.useCallback((e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`),[]),b=ze.useCallback(((e,t)=>{const r=Date.now();return new File([e],t||`voice_message_${r}.webm`,{type:"audio/webm;codecs=opus"})}),[]);return{isRecording:e,isPaused:r,recordingTime:n,audioBlob:i,startRecording:p,stopRecording:g,togglePause:x,cancelRecording:f,clearAudio:y,formatTime:v,createAudioFile:b,canRecord:!e,canStop:e,canPause:e&&!r,canResume:e&&r,hasAudio:!!i}})(),v=o?URL.createObjectURL(o):void 0,{isPlaying:b,togglePlayPause:j,progress:k,formatTime:w,currentTime:N,duration:_}=Ed(v),S=()=>{m(),h(),null==t||t()};return i.jsxs("div",{className:xs("p-3 bg-muted/50 rounded-lg space-y-3",a),children:[n&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-sm font-medium",children:s?"Duraklatıldı":"Kaydediliyor..."})]}),i.jsx("div",{className:"text-sm font-mono",children:p(l)})]}),y&&!n&&i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:j,className:"h-8 w-8 p-0",children:b?i.jsx(_a,{className:"h-4 w-4"}):i.jsx(Oa,{className:"h-4 w-4"})}),i.jsx("div",{className:"flex-1",children:i.jsx(Ad,{value:k,className:"h-2"})}),i.jsxs("div",{className:"text-xs font-mono text-muted-foreground",children:[w(N)," / ",w(_)]})]})}),i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[g&&i.jsx(oo,{variant:"default",size:"lg",onClick:async()=>{r||await c()},disabled:r,className:"rounded-full w-12 h-12 p-0 bg-red-500 hover:bg-red-600",children:i.jsx(xa,{className:"h-5 w-5"})}),n&&i.jsxs(i.Fragment,{children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:u,className:"h-8",children:s?i.jsx(Oa,{className:"h-4 w-4"}):i.jsx(_a,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"outline",size:"sm",onClick:async()=>{await d()},className:"h-8",children:i.jsx(Ga,{className:"h-4 w-4"})})]}),y&&!n&&i.jsxs(i.Fragment,{children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:S,className:"h-8",children:i.jsx(vn,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"default",size:"sm",onClick:async()=>{if(o)try{const t=x(o);await e(t,l),h()}catch(t){}},className:"h-8",children:i.jsx(Ba,{className:"h-4 w-4"})})]}),(n||y)&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:S,className:"h-8 text-muted-foreground",children:"İptal"})]}),g&&i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-muted-foreground",children:"Ses kaydı başlatmak için mikrofon butonuna basın"})})]})},mS=({onSendMessage:e,disabled:t=!1,placeholder:r="Mesajınızı yazın...",replyToMessage:a,onCancelReply:n,currentRoomId:s})=>{const[l,o]=ze.useState(""),[c,d]=ze.useState(!1),[u,m]=ze.useState(null),[h,p]=ze.useState(null),[x,g]=ze.useState(!1),f=ze.useRef(null),y=ze.useRef(null),{uploadFile:v,getFileIcon:b,formatFileSize:j}=dS(),{startTyping:k,stopTyping:w}=Xo(s),N=async()=>{var r;if(!l.trim()||t)return;const i=l.trim();o(""),s&&w();await e(i,"text",void 0,null==a?void 0:a.id)?n&&n():o(i),null==(r=y.current)||r.focus()},_=async()=>{if(h){d(!0);try{const t=await v(h);if(t.success&&t.url){const r={url:t.url,name:h.name,size:h.size,type:h.type};await e(l.trim()||"","image",r,null==a?void 0:a.id)&&(o(""),m(null),p(null),n&&n())}else alert(t.error||"Resim yüklenemedi")}catch(t){alert("Resim gönderilirken bir hata oluştu")}finally{d(!1)}}};return i.jsxs("div",{className:"space-y-2",children:[a&&i.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-t border-l-2 border-primary",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"text-xs text-muted-foreground font-medium",children:[a.user_name," yanıtlanıyor:"]}),i.jsx("div",{className:"text-sm truncate",children:a.content})]}),n&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:n,className:"h-6 w-6 p-0 ml-2",children:i.jsx(vn,{className:"h-3 w-3"})})]}),i.jsxs("div",{className:"flex items-end space-x-2 p-3",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;null==(e=f.current)||e.click()},disabled:t||c||x,className:"h-10 w-10 p-0",title:"Dosya veya resim yükle",children:i.jsx(Na,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>g(!0),disabled:t||c||!!u,className:"h-10 w-10 p-0",title:"Ses kaydı",children:i.jsx(xa,{className:"h-4 w-4"})}),i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(co,{ref:y,value:l,onChange:e=>{const t=e.target.value;o(t),s&&(t.length>0?k():w())},onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},placeholder:r,disabled:t||c,className:"pr-10"}),i.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:i.jsxs(nu,{children:[i.jsx(su,{asChild:!0,children:i.jsx(oo,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:t||c,children:i.jsx(Ya,{className:"h-4 w-4"})})}),i.jsx(iu,{className:"w-64 p-2",align:"end",side:"top",children:i.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-48 overflow-y-auto",children:["😀","😃","😄","😁","😆","😅","🤣","😂","🙂","🙃","😉","😊","😇","🥰","😍","🤩","😘","😗","😚","😙","😋","😛","😜","🤪","😝","🤑","🤗","🤭","🤫","🤔","🤐","🤨","😐","😑","😶","😏","😒","🙄","😬","🤥","😔","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤯","😳","🥵","🥶","😱","😨","👍","👎","👌","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","👋","🤚","🖐️","✋","🖖","👏"].map(((e,t)=>i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>(e=>{var t;o((t=>t+e)),null==(t=y.current)||t.focus()})(e),className:"h-8 w-8 p-0 text-lg hover:bg-muted",children:e},t)))})})]})})]}),i.jsx(oo,{onClick:N,disabled:!l.trim()||t||c||!!u||x,size:"sm",className:"h-10 w-10 p-0",children:c?i.jsx(oa,{className:"h-4 w-4 animate-spin"}):i.jsx(Ba,{className:"h-4 w-4"})})]}),u&&i.jsx("div",{className:"px-3 pb-2",children:i.jsx("div",{className:"relative bg-muted/50 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:u,alt:"Önizleme",className:"w-20 h-20 object-cover rounded-lg"}),i.jsx(oo,{variant:"secondary",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0 rounded-full",onClick:()=>{m(null),p(null)},children:i.jsx(vn,{className:"h-3 w-3"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium truncate",children:null==h?void 0:h.name}),i.jsx("div",{className:"text-xs text-muted-foreground",children:h&&j(h.size)}),i.jsx(co,{value:l,onChange:e=>o(e.target.value),placeholder:"Açıklama ekle (opsiyonel)...",className:"mt-2 h-8",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())}})]}),i.jsx(oo,{onClick:_,disabled:c||!h,size:"sm",className:"mt-8",children:c?i.jsx(oa,{className:"h-4 w-4 animate-spin"}):i.jsx(Ba,{className:"h-4 w-4"})})]})})}),c&&i.jsx("div",{className:"px-3 pb-2",children:i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[i.jsx(oa,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Dosya yükleniyor..."})]})}),i.jsx("input",{ref:f,type:"file",accept:"*/*",className:"hidden",onChange:t=>{var r;const s=null==(r=t.target.files)?void 0:r[0];if(s)if(s.type.startsWith("image/")){p(s);const e=new FileReader;e.onload=e=>{var t;m(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(s)}else{const t=s.type.startsWith("image/")?"image":"file";(async(t,r)=>{if(oS(t)){d(!0);try{const s=await v(t);if(s.success&&s.url){const i={url:s.url,name:t.name,size:t.size,type:t.type},l="image"===r?"Resim paylaştı":`Dosya paylaştı: ${t.name}`;await e(l,r,i,null==a?void 0:a.id),n&&n()}else alert(s.error||"Dosya yüklenemedi")}catch(s){alert("Dosya yüklenirken bir hata oluştu")}finally{d(!1)}}else alert("Dosya çok büyük (max 100MB)")})(s,t)}t.target.value=""}}),x&&i.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-background border rounded-lg shadow-lg p-4",children:i.jsx(uS,{onSendVoice:async(t,r)=>{d(!0);try{const r=await v(t);if(r.success&&r.url){const s={url:r.url,name:t.name,size:t.size,type:t.type};await e("","file",s,null==a?void 0:a.id)&&(g(!1),n&&n())}else alert(r.error||"Ses dosyası yüklenemedi")}catch(s){alert("Ses gönderilirken bir hata oluştu")}finally{d(!1)}},onCancel:()=>g(!1),disabled:c})})]})},hS=({onlineUsers:e,currentRoom:t})=>{const r=e=>{switch(e){case"online":return i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"});case"away":return i.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"});case"busy":return i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"});default:return i.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"})}},a=e=>{switch(e){case"yonetici":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"muhasebeci":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"grafiker":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"reklamci":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"toptanci":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},n=e=>{switch(e){case"online":return"Çevrimiçi";case"away":return"Uzakta";case"busy":return"Meşgul";case"offline":return"Çevrimdışı";default:return"Bilinmiyor"}},s=e=>{const t=new Date(e),r=(new Date).getTime()-t.getTime(),a=Math.floor(r/6e4);if(a<1)return"Az önce";if(a<60)return`${a} dakika önce`;if(a<1440){return`${Math.floor(a/60)} saat önce`}return t.toLocaleDateString("tr-TR")},l=[...e].sort(((e,t)=>{const r={online:1,away:2,busy:3,offline:4},a=r[e.status]||5,n=r[t.status]||5;return a!==n?a-n:"yonetici"===e.user_role&&"yonetici"!==t.user_role?-1:"yonetici"===t.user_role&&"yonetici"!==e.user_role?1:(e.user_name||"").localeCompare(t.user_name||"")}));return 0===e.length?i.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx(hn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"Çevrimiçi kullanıcı yok"})]})}):i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsxs("div",{className:"p-3 border-b bg-muted/50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"font-medium text-sm flex items-center space-x-2",children:[i.jsx(hn,{className:"h-4 w-4"}),i.jsx("span",{children:"Çevrimiçi Kullanıcılar"})]}),i.jsxs(Co,{variant:"secondary",className:"text-xs",children:[e.filter((e=>"online"===e.status)).length," / ",e.length]})]}),t&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[t.name," odasında"]})]}),i.jsx(Rc,{className:"flex-1",children:i.jsx("div",{className:"p-2 space-y-1",children:l.map((e=>{return i.jsxs("div",{className:xs("flex items-center space-x-2 p-2 rounded-lg transition-colors","hover:bg-muted/50 cursor-pointer"),children:[i.jsxs("div",{className:"relative flex-shrink-0",children:[i.jsx(Jc,{className:"h-8 w-8",children:i.jsx(ed,{className:"text-xs",children:(e.user_name||"NN").substring(0,2).toUpperCase()})}),i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 flex items-center justify-center w-3 h-3 bg-background rounded-full border border-border",children:r(e.status)})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{className:"font-medium text-xs truncate",children:e.user_name||"Bilinmeyen Kullanıcı"}),(t=e.user_role||"","yonetici"===t?i.jsx(Fr,{className:"h-3 w-3"}):null)]}),i.jsxs("div",{className:"flex items-center space-x-1 mt-0.5",children:[i.jsx(Co,{variant:"secondary",className:xs("text-xs px-1 py-0",a(e.user_role||"")),children:e.user_role||"kullanıcı"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:n(e.status)})]}),i.jsxs("div",{className:"flex items-center space-x-1 mt-1 text-xs text-muted-foreground",children:[i.jsx(zr,{className:"h-3 w-3"}),i.jsx("span",{children:s(e.last_activity)})]})]}),i.jsx(oo,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",title:"Özel mesaj gönder",children:i.jsx(ha,{className:"h-3 w-3"})})]},e.id);var t}))})})]})},pS=()=>{const[e,t]=ze.useState(!1),[r,a]=ze.useState("chat"),[n,s]=ze.useState(!0);at();const{user:l}=Jl(),{rooms:o,currentRoom:c,messages:d,onlineUsers:u,isLoading:m,joinRoom:h,sendMessage:p,editMessage:x,deleteMessage:g}=Qo(),{typingUsers:f,startTyping:y,stopTyping:v}=Xo(null==c?void 0:c.id);if(!l)return null;const b=(null==u?void 0:u.filter((e=>"online"===e.status)).length)||0;return i.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[!e&&i.jsxs(oo,{className:"rounded-full w-16 h-16 shadow-xl animate-bounce-custom transition-all duration-300 ease-in-out bg-blue-600 hover:bg-blue-700 text-white relative",onClick:()=>t(!0),children:[i.jsx(ha,{className:"h-7 w-7"}),!1]}),e&&i.jsxs(ro,{className:"w-[700px] h-[700px] flex flex-col shadow-2xl rounded-xl overflow-hidden animate-slide-in-up border border-gray-200 dark:border-gray-700",children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between p-4 border-b bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[i.jsxs(no,{className:"text-lg flex items-center gap-2 font-bold",children:[i.jsx(ha,{className:"h-6 w-6"}),(null==c?void 0:c.name)||"Chat",i.jsxs(Co,{variant:"secondary",className:"bg-white/20 text-white",children:[b," online"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>s(!n),className:"text-white hover:bg-white/20",title:n?"Sesi kapat":"Sesi aç",children:n?i.jsx(xn,{className:"h-4 w-4"}):i.jsx(gn,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"text-white hover:bg-white/20",title:"Kapat",children:i.jsx(vn,{className:"h-5 w-5"})})]})]}),i.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[i.jsx("div",{className:"w-40 border-r bg-gray-50 dark:bg-gray-900 flex flex-col",children:i.jsxs(Yo,{value:r,onValueChange:a,className:"flex-1 flex flex-col",children:[i.jsxs(Vo,{className:"grid w-full grid-cols-2 m-1",children:[i.jsxs(Go,{value:"chat",className:"text-xs p-1",children:[i.jsx(ea,{className:"h-3 w-3 mr-0.5"}),"Oda"]}),i.jsxs(Go,{value:"users",className:"text-xs p-1",children:[i.jsx(hn,{className:"h-3 w-3 mr-0.5"}),"Online"]})]}),i.jsx(Wo,{value:"chat",className:"flex-1 m-0",children:i.jsx(Bc,{rooms:o,currentRoom:c,onRoomChange:e=>{const t=o.find((t=>t.id===e));t&&h(t)},isLoading:m})}),i.jsx(Wo,{value:"users",className:"flex-1 m-0",children:i.jsx(hS,{onlineUsers:u,currentRoom:c})})]})}),i.jsx("div",{className:"flex-1 flex flex-col",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Md,{messages:d,currentUserId:(null==l?void 0:l.id)||"",onEditMessage:x,onDeleteMessage:g,canDelete:!0}),f.length>0&&i.jsx("div",{className:"px-4 py-2 text-sm text-muted-foreground border-t",children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("div",{className:"w-1 h-1 bg-current rounded-full animate-bounce"}),i.jsx("div",{className:"w-1 h-1 bg-current rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),i.jsx("div",{className:"w-1 h-1 bg-current rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),i.jsx("span",{children:1===f.length?`${f[0].name} yazıyor...`:`${f.length} kişi yazıyor...`})]})}),i.jsx(mS,{onSendMessage:async(e,t,r,a)=>{var n;try{if(r){const s=t||((null==(n=r.type)?void 0:n.startsWith("image/"))?"image":"file");await p(e,s,r,a)}else await p(e,"text",void 0,a);return!0}catch(s){return!1}},disabled:m,currentRoomId:null==c?void 0:c.id})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ha,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{className:"text-sm",children:"Bir chat odası seçin"}),i.jsx("p",{className:"text-xs mt-1",children:"Sol panelden bir oda seçerek sohbete başlayın"})]})})})]})]})]})};function xS(){const{userProfile:e}=Jl(),t=null==e?void 0:e.id,[r,a]=ze.useState(0),n=ze.useState("undefined"!=typeof Audio?new Audio("https://cdn.pixabay.com/download/audio/2025/07/09/audio_121db7b43f.mp3?filename=notification-sound-effect-372475.mp3"):null)[0],s=ze.useRef(!1),[l,o]=ze.useState(null),[c,d]=ze.useState(!1),u=async()=>{if(!t)return;const{count:e}=await Wl.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",t).eq("is_read",!1);a(e||0)},m=async()=>{if(n)try{await n.play()}catch{if(s.current)return;s.current=!0;const e=async()=>{try{await n.play()}catch{}window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",e),document.removeEventListener("visibilitychange",e)};window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0}),document.addEventListener("visibilitychange",e,{once:!0})}};if(ze.useEffect((()=>{u()}),[t]),ze.useEffect((()=>{if(!t)return;const e=Wl.channel("global-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${t}`},(async()=>{await u(),await m()})).subscribe();return()=>{Wl.removeChannel(e)}}),[t]),ze.useEffect((()=>{r>0&&m()}),[r]),!t)return null;return 0===r?i.jsx(sd,{open:c,onOpenChange:d,children:i.jsxs(cd,{children:[i.jsx(dd,{children:i.jsx(md,{children:null==l?void 0:l.title})}),i.jsx("div",{className:"text-sm whitespace-pre-wrap",children:null==l?void 0:l.message}),i.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:(null==l?void 0:l.created_at)?new Date(l.created_at).toLocaleString("tr-TR"):""})]})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:xs("fixed right-3 top-3 z-50 select-none","pointer-events-auto cursor-pointer"),onClick:async()=>{const{data:e}=await Wl.from("notifications").select("id,title,message,created_at,is_read").eq("user_id",t).eq("is_read",!1).order("created_at",{ascending:!1}).limit(1).maybeSingle();e&&(o({id:e.id,title:e.title,message:e.message,created_at:e.created_at}),d(!0),await Wl.from("notifications").update({is_read:!0}).eq("id",e.id),u())},title:r>0?"Okunmayan bildirimi aç":"Bildiriminiz yok",children:i.jsxs("div",{className:xs("inline-flex items-center gap-2 rounded-full px-6 py-3 shadow-md","bg-blue-600 text-white text-xs",r>0?"animate-pulse":"opacity-70"),children:[i.jsx("span",{children:"Bildirim"}),i.jsx("span",{className:"font-bold",children:r>99?"99+":r})]})}),i.jsx(sd,{open:c,onOpenChange:d,children:i.jsxs(cd,{children:[i.jsx(dd,{children:i.jsx(md,{children:null==l?void 0:l.title})}),i.jsx("div",{className:"text-sm whitespace-pre-wrap",children:null==l?void 0:l.message}),i.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:(null==l?void 0:l.created_at)?new Date(l.created_at).toLocaleString("tr-TR"):""})]})})]})}const gS=X,fS=Q,yS=ze.forwardRef((({className:e,...t},r)=>i.jsx(H,{className:xs("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r})));yS.displayName=H.displayName;const vS=Gt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),bS=ze.forwardRef((({side:e="right",className:t,children:r,...a},n)=>i.jsxs(fS,{children:[i.jsx(yS,{}),i.jsxs(Y,{ref:n,className:xs(vS({side:e}),t),...a,children:[r,i.jsxs(V,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})));bS.displayName=Y.displayName;ze.forwardRef((({className:e,...t},r)=>i.jsx(G,{ref:r,className:xs("text-lg font-semibold text-foreground",e),...t}))).displayName=G.displayName;ze.forwardRef((({className:e,...t},r)=>i.jsx(W,{ref:r,className:xs("text-sm text-muted-foreground",e),...t}))).displayName=W.displayName;const jS=ze.createContext(null);function kS(){const e=ze.useContext(jS);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const wS=ze.forwardRef((({defaultOpen:e=!0,open:t,onOpenChange:r,className:a,style:n,children:s,...l},o)=>{const c=function(){const[e,t]=ze.useState(void 0);return ze.useEffect((()=>{const e=window.matchMedia("(max-width: 767px)"),r=()=>{t(window.innerWidth<768)};return e.addEventListener("change",r),t(window.innerWidth<768),()=>e.removeEventListener("change",r)}),[]),!!e}(),[d,u]=ze.useState(!1),[m,h]=ze.useState(e),p=t??m,x=ze.useCallback((e=>{const t="function"==typeof e?e(p):e;r?r(t):h(t),document.cookie=`sidebar:state=${t}; path=/; max-age=604800`}),[r,p]),g=ze.useCallback((()=>c?u((e=>!e)):x((e=>!e))),[c,x,u]);ze.useEffect((()=>{const e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),g())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[g]);const f=p?"expanded":"collapsed",y=ze.useMemo((()=>({state:f,open:p,setOpen:x,isMobile:c,openMobile:d,setOpenMobile:u,toggleSidebar:g})),[f,p,x,c,d,u,g]);return i.jsx(jS.Provider,{value:y,children:i.jsx(yi,{delayDuration:0,children:i.jsx("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...n},className:xs("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",a),ref:o,...l,children:s})})})}));wS.displayName="SidebarProvider";const NS=ze.forwardRef((({side:e="left",variant:t="sidebar",collapsible:r="offcanvas",className:a,children:n,...s},l)=>{const{isMobile:o,state:c,openMobile:d,setOpenMobile:u}=kS();return"none"===r?i.jsx("div",{className:xs("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",a),ref:l,...s,children:n}):o?i.jsx(gS,{open:d,onOpenChange:u,...s,children:i.jsx(bS,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:e,children:i.jsx("div",{className:"flex h-full w-full flex-col",children:n})})}):i.jsxs("div",{ref:l,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":"collapsed"===c?r:"","data-variant":t,"data-side":e,children:[i.jsx("div",{className:xs("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===t||"inset"===t?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),i.jsx("div",{className:xs("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex","left"===e?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===t||"inset"===t?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",a),...s,children:i.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:n})})]})}));NS.displayName="Sidebar";ze.forwardRef((({className:e,onClick:t,...r},a)=>{const{toggleSidebar:n}=kS();return i.jsxs(oo,{ref:a,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:xs("h-7 w-7",e),onClick:e=>{null==t||t(e),n()},...r,children:[i.jsx(ka,{}),i.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})})).displayName="SidebarTrigger";const _S=ze.forwardRef((({className:e,...t},r)=>{const{toggleSidebar:a}=kS();return i.jsx("button",{ref:r,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:a,title:"Toggle Sidebar",className:xs("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})}));_S.displayName="SidebarRail";const SS=ze.forwardRef((({className:e,...t},r)=>i.jsx("main",{ref:r,className:xs("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t})));SS.displayName="SidebarInset";ze.forwardRef((({className:e,...t},r)=>i.jsx(co,{ref:r,"data-sidebar":"input",className:xs("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}))).displayName="SidebarInput";const CS=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,"data-sidebar":"header",className:xs("flex flex-col gap-2 p-2",e),...t})));CS.displayName="SidebarHeader";const TS=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,"data-sidebar":"footer",className:xs("flex flex-col gap-2 p-2",e),...t})));TS.displayName="SidebarFooter";ze.forwardRef((({className:e,...t},r)=>i.jsx(vo,{ref:r,"data-sidebar":"separator",className:xs("mx-2 w-auto bg-sidebar-border",e),...t}))).displayName="SidebarSeparator";const OS=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,"data-sidebar":"content",className:xs("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t})));OS.displayName="SidebarContent";const PS=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,"data-sidebar":"group",className:xs("relative flex w-full min-w-0 flex-col p-2",e),...t})));PS.displayName="SidebarGroup";ze.forwardRef((({className:e,asChild:t=!1,...r},a)=>{const n=t?C:"div";return i.jsx(n,{ref:a,"data-sidebar":"group-label",className:xs("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...r})})).displayName="SidebarGroupLabel";ze.forwardRef((({className:e,asChild:t=!1,...r},a)=>{const n=t?C:"button";return i.jsx(n,{ref:a,"data-sidebar":"group-action",className:xs("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...r})})).displayName="SidebarGroupAction";const AS=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,"data-sidebar":"group-content",className:xs("w-full text-sm",e),...t})));AS.displayName="SidebarGroupContent";const ES=ze.forwardRef((({className:e,...t},r)=>i.jsx("ul",{ref:r,"data-sidebar":"menu",className:xs("flex w-full min-w-0 flex-col gap-1",e),...t})));ES.displayName="SidebarMenu";const DS=ze.forwardRef((({className:e,...t},r)=>i.jsx("li",{ref:r,"data-sidebar":"menu-item",className:xs("group/menu-item relative",e),...t})));DS.displayName="SidebarMenuItem";const MS=Gt("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),zS=ze.forwardRef((({asChild:e=!1,isActive:t=!1,variant:r="default",size:a="default",tooltip:n,className:s,...l},o)=>{const c=e?C:"button",{isMobile:d,state:u}=kS(),m=i.jsx(c,{ref:o,"data-sidebar":"menu-button","data-size":a,"data-active":t,className:xs(MS({variant:r,size:a}),s),...l});return n?("string"==typeof n&&(n={children:n}),i.jsxs(vi,{children:[i.jsx(bi,{asChild:!0,children:m}),i.jsx(ji,{side:"right",align:"center",hidden:"collapsed"!==u||d,...n})]})):m}));zS.displayName="SidebarMenuButton";ze.forwardRef((({className:e,asChild:t=!1,showOnHover:r=!1,...a},n)=>{const s=t?C:"button";return i.jsx(s,{ref:n,"data-sidebar":"menu-action",className:xs("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...a})})).displayName="SidebarMenuAction";ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,"data-sidebar":"menu-badge",className:xs("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}))).displayName="SidebarMenuBadge";ze.forwardRef((({className:e,showIcon:t=!1,...r},a)=>{const n=ze.useMemo((()=>`${Math.floor(40*Math.random())+50}%`),[]);return i.jsxs("div",{ref:a,"data-sidebar":"menu-skeleton",className:xs("rounded-md h-8 flex gap-2 px-2 items-center",e),...r,children:[t&&i.jsx(Fc,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),i.jsx(Fc,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":n}})]})})).displayName="SidebarMenuSkeleton";ze.forwardRef((({className:e,...t},r)=>i.jsx("ul",{ref:r,"data-sidebar":"menu-sub",className:xs("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}))).displayName="SidebarMenuSub";ze.forwardRef((({...e},t)=>i.jsx("li",{ref:t,...e}))).displayName="SidebarMenuSubItem";function RS(){const{userProfile:e}=Jl(),[t,r]=ze.useState(!1),[a,n]=ze.useState(!1),[s,l]=ze.useState(0),[o,c]=ze.useState([]),[d,u]=ze.useState(null),[m,h]=ze.useState(!1),p=ze.useState("undefined"!=typeof Audio?new Audio("https://cdn.pixabay.com/download/audio/2025/07/09/audio_121db7b43f.mp3?filename=notification-sound-effect-372475.mp3"):null)[0],x=ze.useRef(!1),g=async()=>{if(p)try{await p.play()}catch{if(x.current)return;x.current=!0;const e=async()=>{try{await p.play()}catch{}window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",e),document.removeEventListener("visibilitychange",e)};window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("keydown",e,{once:!0}),document.addEventListener("visibilitychange",e,{once:!0})}},f=null==e?void 0:e.id,y=async()=>{if(!f)return;const{count:e,error:t}=await Wl.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",f).eq("is_read",!1);t||"number"!=typeof e||l(e)},v=async()=>{if(!f)return;n(!0);const{data:e,error:t}=await Wl.from("notifications").select("id,title,message,is_read,created_at").eq("user_id",f).order("created_at",{ascending:!1}).limit(10);t||c(e||[]),n(!1)};ze.useEffect((()=>{y(),(async()=>{const{count:e}=await Wl.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",f||"").eq("is_read",!1);(e||0)>0&&await g()})()}),[f]),ze.useEffect((()=>{if(!f)return;const e=Wl.channel("notifications-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${f}`},(async()=>{await g(),y(),t&&v()})).subscribe();return()=>{Wl.removeChannel(e)}}),[f,t]);const b=ze.useMemo((()=>s<=0?null:s>99?"99+":String(s)),[s]);return i.jsxs(i.Fragment,{children:[i.jsxs(nu,{open:t,onOpenChange:e=>{r(e),e&&v()},children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"ghost",size:"icon",className:"relative",children:[i.jsx(cr,{className:"h-4 w-4"}),b&&i.jsx("span",{className:"absolute -top-1 -right-1",children:i.jsx(Co,{className:"px-1 h-4 min-w-4 flex items-center justify-center rounded-full",children:b})})]})}),i.jsxs(iu,{align:"end",className:"w-80 p-0 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",children:[i.jsx("span",{className:"text-sm font-medium",children:"Bildirimler"}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:async()=>{f&&(n(!0),await Wl.from("notifications").update({is_read:!0}).eq("user_id",f).eq("is_read",!1),await y(),await v(),n(!1))},disabled:a||0===s,children:[a?i.jsx(oa,{className:"h-4 w-4 animate-spin"}):i.jsx(vr,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Tümünü Okundu İşaretle"})]})]}),i.jsx("div",{className:"max-h-80 overflow-auto",children:a?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(oa,{className:"h-5 w-5 animate-spin"})}):0===o.length?i.jsx("div",{className:"text-sm text-muted-foreground py-8 text-center",children:"Bildirim bulunmuyor"}):i.jsx("ul",{className:"divide-y",children:o.map((e=>i.jsx("li",{className:"p-3 hover:bg-muted/50 cursor-pointer",onClick:()=>(async e=>{u(e),h(!0),e.is_read||(await Wl.from("notifications").update({is_read:!0}).eq("id",e.id),c((t=>t.map((t=>t.id===e.id?{...t,is_read:!0}:t)))),y())})(e),children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("div",{className:"mt-1 h-2 w-2 rounded-full "+(e.is_read?"bg-gray-300":"bg-blue-500")}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-sm font-medium",children:e.title}),i.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:e.message}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.created_at).toLocaleString("tr-TR")})]})]})},e.id)))})})]})]}),i.jsx(sd,{open:m,onOpenChange:h,children:i.jsxs(cd,{children:[i.jsx(dd,{children:i.jsx(md,{children:null==d?void 0:d.title})}),i.jsx("div",{className:"text-sm whitespace-pre-wrap",children:null==d?void 0:d.message}),i.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:(null==d?void 0:d.created_at)?new Date(d.created_at).toLocaleString("tr-TR"):""})]})})]})}function IS(){const e=xl(),t=hl(),{signOut:r,userProfile:a}=Jl(),[n,s]=ze.useState((()=>JSON.parse(localStorage.getItem("adminSidebar.productMenu")||"false"))),[l,o]=ze.useState((()=>JSON.parse(localStorage.getItem("adminSidebar.userMenu")||"false"))),[c,d]=ze.useState((()=>JSON.parse(localStorage.getItem("adminSidebar.invoiceMenu")||"false"))),[u,m]=ze.useState((()=>JSON.parse(localStorage.getItem("adminSidebar.cargoMenu")||"false"))),[h,p]=ze.useState((()=>JSON.parse(localStorage.getItem("adminSidebar.orderMenu")||"false"))),[x,g]=ze.useState((()=>JSON.parse(localStorage.getItem("adminSidebar.employeeMenu")||"false"))),[f,y]=ze.useState((()=>JSON.parse(localStorage.getItem("adminSidebar.productionMenu")||"false"))),[v,b]=ze.useState((()=>JSON.parse(localStorage.getItem("adminSidebar.salesMenu")||"false")));ze.useEffect((()=>{localStorage.setItem("adminSidebar.productMenu",JSON.stringify(n))}),[n]),ze.useEffect((()=>{localStorage.setItem("adminSidebar.userMenu",JSON.stringify(l))}),[l]),ze.useEffect((()=>{localStorage.setItem("adminSidebar.invoiceMenu",JSON.stringify(c))}),[c]),ze.useEffect((()=>{localStorage.setItem("adminSidebar.cargoMenu",JSON.stringify(u))}),[u]),ze.useEffect((()=>{localStorage.setItem("adminSidebar.orderMenu",JSON.stringify(h))}),[h]),ze.useEffect((()=>{localStorage.setItem("adminSidebar.employeeMenu",JSON.stringify(x))}),[x]),ze.useEffect((()=>{localStorage.setItem("adminSidebar.productionMenu",JSON.stringify(f))}),[f]),ze.useEffect((()=>{localStorage.setItem("adminSidebar.salesMenu",JSON.stringify(v))}),[v]);const j=e=>t.pathname===e;return i.jsxs(NS,{className:"border-r border-gray-200 dark:border-gray-700",children:[i.jsx(CS,{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-600 dark:bg-blue-500 rounded-lg",children:i.jsx(hr,{className:"h-4 w-4 text-white"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"BALTACI KURUMSAL"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Yönetim Paneli"})]})]})}),i.jsx(OS,{className:"p-2",children:i.jsx(PS,{children:i.jsx(AS,{children:i.jsxs(ES,{children:[i.jsx(DS,{children:i.jsx(zS,{asChild:!0,isActive:j("/admin/dashboard"),className:"w-full justify-start",children:i.jsxs(Ll,{to:"/admin/dashboard",children:[i.jsx(ia,{className:"h-4 w-4"}),i.jsx("span",{children:"Dashboard"})]})})}),("yonetici"===(null==a?void 0:a.role)||"muhasebeci"===(null==a?void 0:a.role))&&i.jsxs(DS,{children:[i.jsxs(zS,{onClick:()=>p(!h),className:"w-full justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ha,{className:"h-4 w-4"}),i.jsx("span",{children:"Sipariş Yönetimi"})]}),i.jsx(jr,{className:"h-4 w-4 transition-transform "+(h?"rotate-180":"")})]}),h&&i.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[i.jsx(zS,{asChild:!0,isActive:j("/admin/orders"),size:"sm",children:i.jsxs(Ll,{to:"/admin/orders",children:[i.jsx(Ha,{className:"h-3 w-3"}),"Sipariş Listesi"]})}),i.jsx(zS,{asChild:!0,isActive:j("/admin/payment-slips"),size:"sm",children:i.jsxs(Ll,{to:"/admin/payment-slips",children:[i.jsx(Ea,{className:"h-3 w-3"}),"Dekont Listesi"]})})]})]}),"reklamci"===(null==a?void 0:a.role)&&i.jsx(DS,{children:i.jsx(zS,{asChild:!0,isActive:j("/admin/orders"),children:i.jsxs(Ll,{to:"/admin/orders",children:[i.jsx(Ha,{className:"h-4 w-4"}),i.jsx("span",{children:"Sipariş Listesi"})]})})}),i.jsxs(DS,{children:[i.jsxs(zS,{onClick:()=>d(!c),className:"w-full justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"h-4 w-4"}),i.jsx("span",{children:"Fatura Yönetimi"})]}),i.jsx(jr,{className:"h-4 w-4 transition-transform "+(c?"rotate-180":"")})]}),c&&i.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[i.jsx(zS,{asChild:!0,isActive:j("/admin/invoices"),size:"sm",children:i.jsxs(Ll,{to:"/admin/invoices",children:[i.jsx(Wr,{className:"h-3 w-3"}),"Fatura Listesi"]})}),i.jsx(zS,{asChild:!0,isActive:j("/admin/payment-management"),size:"sm",children:i.jsxs(Ll,{to:"/admin/payment-management",children:[i.jsx(Lr,{className:"h-3 w-3"}),"Ödeme Yönetimi"]})})]})]}),i.jsxs(DS,{children:[i.jsxs(zS,{onClick:()=>b(!v),className:"w-full justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(gr,{className:"h-4 w-4"}),i.jsx("span",{children:"Satış Analizi"})]}),i.jsx(jr,{className:"h-4 w-4 transition-transform "+(v?"rotate-180":"")})]}),v&&i.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[i.jsx(zS,{asChild:!0,isActive:j("/admin/sales"),size:"sm",children:i.jsxs(Ll,{to:"/admin/sales",children:[i.jsx(gr,{className:"h-3 w-3"}),"Genel Analiz"]})}),i.jsx(zS,{asChild:!0,isActive:j("/admin/sales/payment-analytics"),size:"sm",children:i.jsxs(Ll,{to:"/admin/sales/payment-analytics",children:[i.jsx(Lr,{className:"h-3 w-3"}),"Ödeme & Nakit Akışı"]})})]})]}),("yonetici"===(null==a?void 0:a.role)||"muhasebeci"===(null==a?void 0:a.role))&&i.jsxs(DS,{children:[i.jsxs(zS,{onClick:()=>m(!u),className:"w-full justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(sn,{className:"h-4 w-4"}),i.jsx("span",{children:"Kargo Sistemi"})]}),i.jsx(jr,{className:"h-4 w-4 transition-transform "+(u?"rotate-180":"")})]}),u&&i.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[i.jsx(zS,{asChild:!0,isActive:j("/admin/cargo/new-shipment"),size:"sm",children:i.jsxs(Ll,{to:"/admin/cargo/new-shipment",children:[i.jsx(Pa,{className:"h-3 w-3"}),"Yeni Gönderi"]})}),i.jsx(zS,{asChild:!0,isActive:j("/admin/cargo/delivery-list"),size:"sm",children:i.jsxs(Ll,{to:"/admin/cargo/delivery-list",children:[i.jsx(Mr,{className:"h-3 w-3"}),"Teslim Listesi"]})})]})]}),"reklamci"===(null==a?void 0:a.role)&&i.jsx(DS,{children:i.jsx(zS,{asChild:!0,isActive:j("/admin/sales"),children:i.jsxs(Ll,{to:"/admin/sales",children:[i.jsx(gr,{className:"h-4 w-4"}),i.jsx("span",{children:"Satış Analizi"})]})})}),("yonetici"===(null==a?void 0:a.role)||"muhasebeci"===(null==a?void 0:a.role))&&i.jsxs(DS,{children:[i.jsxs(zS,{onClick:()=>y(!f),className:"w-full justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ja,{className:"h-4 w-4"}),i.jsx("span",{children:"Cari Hesaplar"})]}),i.jsx(jr,{className:"h-4 w-4 transition-transform "+(f?"rotate-180":"")})]}),f&&i.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[i.jsx(zS,{asChild:!0,isActive:j("/admin/production"),size:"sm",children:i.jsxs(Ll,{to:"/admin/production",children:[i.jsx(Ia,{className:"h-3 w-3"}),"Dikim Cari"]})}),i.jsx(zS,{asChild:!0,isActive:j("/admin/dealers"),size:"sm",children:i.jsxs(Ll,{to:"/admin/dealers",children:[i.jsx(Qa,{className:"h-3 w-3"}),"Bayi Cari"]})})]})]}),"yonetici"===(null==a?void 0:a.role)&&i.jsxs(DS,{children:[i.jsxs(zS,{onClick:()=>s(!n),className:"w-full justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-4 w-4"}),i.jsx("span",{children:"Ürün Yönetimi"})]}),i.jsx(jr,{className:"h-4 w-4 transition-transform "+(n?"rotate-180":"")})]}),n&&i.jsxs("div",{className:"ml-6 mt-1 space-y-1",children:[i.jsxs(zS,{onClick:()=>e("/admin/products"),isActive:j("/admin/products"),size:"sm",children:[i.jsx(dr,{className:"h-3 w-3"}),"Ana Ürünler"]}),i.jsxs(zS,{onClick:()=>e("/admin/products/additional"),isActive:j("/admin/products/additional"),size:"sm",children:[i.jsx(ba,{className:"h-3 w-3"}),"Ek Ürünler"]}),i.jsxs(zS,{onClick:()=>e("/admin/products/design"),isActive:j("/admin/products/design"),size:"sm",children:[i.jsx(ja,{className:"h-3 w-3"}),"Özel Tasarım Ürünleri"]}),i.jsxs(zS,{onClick:()=>e("/admin/products/promotion"),isActive:j("/admin/products/promotion"),size:"sm",children:[i.jsx(Zr,{className:"h-3 w-3"}),"Promosyon Ürünleri"]}),i.jsxs(zS,{onClick:()=>e("/admin/products/new"),isActive:j("/admin/products/new"),size:"sm",children:[i.jsx(Pa,{className:"h-3 w-3"}),"Yeni Ürün Ekle"]}),i.jsxs(zS,{onClick:()=>e("/admin/products/print-regions"),isActive:j("/admin/products/print-regions"),size:"sm",children:[i.jsx(Za,{className:"h-3 w-3"}),"Baskı Bölgeleri"]})]})]}),"yonetici"===(null==a?void 0:a.role)&&i.jsxs(DS,{children:[i.jsxs(zS,{onClick:()=>g(!x),className:"w-full justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(La,{className:"h-4 w-4"}),i.jsx("span",{children:"Sistem Ayarları"})]}),i.jsx(jr,{className:"h-4 w-4 transition-transform "+(x?"rotate-180":"")})]}),x&&i.jsx("div",{className:"ml-6 mt-1 space-y-1",children:i.jsxs(zS,{onClick:()=>e("/admin/settings"),isActive:j("/admin/settings"),size:"sm",children:[i.jsx(La,{className:"h-3 w-3"}),"Genel Ayarlar"]})})]})]})})})}),i.jsx(TS,{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/50 rounded-full flex items-center justify-center",children:i.jsx(mn,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:null==a?void 0:a.full_name}),i.jsx(Co,{className:`text-xs ${(e=>{switch(e){case"yonetici":return"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300";case"muhasebeci":return"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300";case"toptanci":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";case"grafiker":return"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300";case"reklamci":return"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/50 dark:text-gray-300"}})((null==a?void 0:a.role)||"")}`,children:(e=>{switch(e){case"yonetici":return"Yönetici";case"muhasebeci":return"Muhasebeci";case"toptanci":return"Toptancı";case"grafiker":return"Grafiker";case"reklamci":return"Reklamcı";default:return e}})((null==a?void 0:a.role)||"")})]})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(RS,{}),i.jsx(bo,{})]}),i.jsxs(oo,{variant:"ghost",size:"sm",onClick:async()=>{try{localStorage.removeItem("adminSidebar.productMenu"),localStorage.removeItem("adminSidebar.userMenu"),localStorage.removeItem("adminSidebar.invoiceMenu"),localStorage.removeItem("adminSidebar.cargoMenu"),localStorage.removeItem("adminSidebar.orderMenu"),localStorage.removeItem("adminSidebar.employeeMenu"),localStorage.removeItem("adminSidebar.productionMenu"),localStorage.removeItem("adminSidebar.salesMenu"),await r(),e("/")}catch(t){}},className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100",children:[i.jsx(da,{className:"h-4 w-4 mr-2"}),"Çıkış"]})]})]})})]})}function FS(){const{user:e,userProfile:t,loading:r}=Jl(),a=xl();return ze.useEffect((()=>{if(r)return;if(!e)return void a("/",{replace:!0});if(!t)return;const n=t.role;return"yonetici"!==n&&"muhasebeci"!==n&&"reklamci"!==n?"toptanci"===n?void a("/customer/dashboard",{replace:!0}):void a("/",{replace:!0}):void 0}),[e,t,r,a]),r?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-12 w-12 text-blue-600 dark:text-blue-400 mx-auto mb-4 animate-spin rounded-full border-4 border-blue-200 border-t-blue-600 dark:border-gray-600 dark:border-t-blue-400"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Yükleniyor..."})]})}):!e||!t||"yonetici"!==t.role&&"muhasebeci"!==t.role&&"reklamci"!==t.role?null:i.jsx(wS,{children:i.jsxs("div",{className:"min-h-screen flex w-full bg-gray-50 dark:bg-gray-900",children:[i.jsx(IS,{}),i.jsx(SS,{className:"flex-1",children:i.jsx("main",{className:"p-6 space-y-6",children:i.jsx(Tl,{})})})]})})}function BS(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function LS(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function qS(e,t){const r=BS(e);return isNaN(t)?LS(e,NaN):t?(r.setDate(r.getDate()+t),r):r}function $S(e,t){const r=BS(e);if(isNaN(t))return LS(e,NaN);if(!t)return r;const a=r.getDate(),n=LS(e,r.getTime());n.setMonth(r.getMonth()+t+1,0);return a>=n.getDate()?n:(r.setFullYear(n.getFullYear(),n.getMonth(),a),r)}ze.forwardRef((({asChild:e=!1,size:t="md",isActive:r,className:a,...n},s)=>{const l=e?C:"a";return i.jsx(l,{ref:s,"data-sidebar":"menu-sub-button","data-size":t,"data-active":r,className:xs("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===t&&"text-xs","md"===t&&"text-sm","group-data-[collapsible=icon]:hidden",a),...n})})).displayName="SidebarMenuSubButton";const KS=6048e5,US=6e4,HS=36e5,YS=43200;let VS={};function GS(){return VS}function WS(e,t){var r,a,n,s;const i=GS(),l=(null==t?void 0:t.weekStartsOn)??(null==(a=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:a.weekStartsOn)??i.weekStartsOn??(null==(s=null==(n=i.locale)?void 0:n.options)?void 0:s.weekStartsOn)??0,o=BS(e),c=o.getDay(),d=(c<l?7:0)+c-l;return o.setDate(o.getDate()-d),o.setHours(0,0,0,0),o}function QS(e){return WS(e,{weekStartsOn:1})}function XS(e){const t=BS(e),r=t.getFullYear(),a=LS(e,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const n=QS(a),s=LS(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const i=QS(s);return t.getTime()>=n.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function ZS(e){const t=BS(e);return t.setHours(0,0,0,0),t}function JS(e){const t=BS(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function eC(e,t){const r=ZS(e),a=ZS(t),n=+r-JS(r),s=+a-JS(a);return Math.round((n-s)/864e5)}function tC(e,t){return qS(e,7*t)}function rC(e,t){return $S(e,12*t)}function aC(e,t){const r=BS(e),a=BS(t),n=r.getTime()-a.getTime();return n<0?-1:n>0?1:n}function nC(e,t){return+ZS(e)===+ZS(t)}function sC(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function iC(e,t){const r=BS(e),a=BS(t);return 12*(r.getFullYear()-a.getFullYear())+(r.getMonth()-a.getMonth())}function lC(e,t){const r=BS(e),a=BS(t),n=oC(r,a),s=Math.abs(eC(r,a));r.setDate(r.getDate()-n*s);const i=n*(s-Number(oC(r,a)===-n));return 0===i?0:i}function oC(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function cC(e){const t=BS(e);return t.setHours(23,59,59,999),t}function dC(e){const t=BS(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function uC(e,t){const r=BS(e),a=BS(t),n=aC(r,a),s=Math.abs(iC(r,a));let i;if(s<1)i=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*s);let t=aC(r,a)===-n;(function(e){const t=BS(e);return+cC(t)===+dC(t)})(BS(e))&&1===s&&1===aC(e,a)&&(t=!1),i=n*(s-Number(t))}return 0===i?0:i}function mC(e,t,r){const a=function(e,t){return+BS(e)-+BS(t)}(e,t)/1e3;return(n=null==r?void 0:r.roundingMethod,e=>{const t=(n?Math[n]:Math.trunc)(e);return 0===t?0:t})(a);var n}function hC(e){const t=BS(e);return t.setDate(1),t.setHours(0,0,0,0),t}function pC(e){const t=BS(e),r=LS(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function xC(e,t){var r,a,n,s;const i=GS(),l=(null==t?void 0:t.weekStartsOn)??(null==(a=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:a.weekStartsOn)??i.weekStartsOn??(null==(s=null==(n=i.locale)?void 0:n.options)?void 0:s.weekStartsOn)??0,o=BS(e),c=o.getDay(),d=6+(c<l?-7:0)-(c-l);return o.setDate(o.getDate()+d),o.setHours(23,59,59,999),o}function gC(e){return xC(e,{weekStartsOn:1})}const fC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function yC(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const vC={date:yC({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:yC({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:yC({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},bC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function jC(e){return(t,r)=>{let a;if("formatting"===((null==r?void 0:r.context)?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,n=(null==r?void 0:r.width)?String(r.width):t;a=e.formattingValues[n]||e.formattingValues[t]}else{const t=e.defaultWidth,n=(null==r?void 0:r.width)?String(r.width):e.defaultWidth;a=e.values[n]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function kC(e){return(t,r={})=>{const a=r.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(n);if(!s)return null;const i=s[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(l)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(l,(e=>e.test(i))):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(l,(e=>e.test(i)));let c;c=e.valueCallback?e.valueCallback(o):o,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}function wC(e){return(t,r={})=>{const a=t.match(e.matchPattern);if(!a)return null;const n=a[0],s=t.match(e.parsePattern);if(!s)return null;let i=e.valueCallback?e.valueCallback(s[0]):s[0];i=r.valueCallback?r.valueCallback(i):i;return{value:i,rest:t.slice(n.length)}}}const NC={code:"en-US",formatDistance:(e,t,r)=>{let a;const n=fC[e];return a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),(null==r?void 0:r.addSuffix)?r.comparison&&r.comparison>0?"in "+a:a+" ago":a},formatLong:vC,formatRelative:(e,t,r,a)=>bC[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:jC({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:jC({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:jC({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:jC({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:jC({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:wC({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:kC({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:kC({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:kC({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:kC({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:kC({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function _C(e){const t=BS(e),r=+QS(t)-+function(e){const t=XS(e),r=LS(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),QS(r)}(t);return Math.round(r/KS)+1}function SC(e,t){var r,a,n,s;const i=BS(e),l=i.getFullYear(),o=GS(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??o.firstWeekContainsDate??(null==(s=null==(n=o.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??1,d=LS(e,0);d.setFullYear(l+1,0,c),d.setHours(0,0,0,0);const u=WS(d,t),m=LS(e,0);m.setFullYear(l,0,c),m.setHours(0,0,0,0);const h=WS(m,t);return i.getTime()>=u.getTime()?l+1:i.getTime()>=h.getTime()?l:l-1}function CC(e,t){const r=BS(e),a=+WS(r,t)-+function(e,t){var r,a,n,s;const i=GS(),l=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(s=null==(n=i.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??1,o=SC(e,t),c=LS(e,0);return c.setFullYear(o,0,l),c.setHours(0,0,0,0),WS(c,t)}(r,t);return Math.round(a/KS)+1}function TC(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const OC={y(e,t){const r=e.getFullYear(),a=r>0?r:1-r;return TC("yy"===t?a%100:a,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):TC(r+1,2)},d:(e,t)=>TC(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>TC(e.getHours()%12||12,t.length),H:(e,t)=>TC(e.getHours(),t.length),m:(e,t)=>TC(e.getMinutes(),t.length),s:(e,t)=>TC(e.getSeconds(),t.length),S(e,t){const r=t.length,a=e.getMilliseconds();return TC(Math.trunc(a*Math.pow(10,r-3)),t.length)}},PC="midnight",AC="noon",EC="morning",DC="afternoon",MC="evening",zC="night",RC={G:function(e,t,r){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return r.ordinalNumber(a,{unit:"year"})}return OC.y(e,t)},Y:function(e,t,r,a){const n=SC(e,a),s=n>0?n:1-n;if("YY"===t){return TC(s%100,2)}return"Yo"===t?r.ordinalNumber(s,{unit:"year"}):TC(s,t.length)},R:function(e,t){return TC(XS(e),t.length)},u:function(e,t){return TC(e.getFullYear(),t.length)},Q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return TC(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return TC(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){const a=e.getMonth();switch(t){case"M":case"MM":return OC.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return TC(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){const n=CC(e,a);return"wo"===t?r.ordinalNumber(n,{unit:"week"}):TC(n,t.length)},I:function(e,t,r){const a=_C(e);return"Io"===t?r.ordinalNumber(a,{unit:"week"}):TC(a,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):OC.d(e,t)},D:function(e,t,r){const a=function(e){const t=BS(e);return eC(t,pC(t))+1}(e);return"Do"===t?r.ordinalNumber(a,{unit:"dayOfYear"}):TC(a,t.length)},E:function(e,t,r){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){const n=e.getDay(),s=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return TC(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){const n=e.getDay(),s=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return TC(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,r){const a=e.getDay(),n=0===a?7:a;switch(t){case"i":return String(n);case"ii":return TC(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const a=e.getHours();let n;switch(n=12===a?AC:0===a?PC:a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){const a=e.getHours();let n;switch(n=a>=17?MC:a>=12?DC:a>=4?EC:zC,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return OC.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):OC.H(e,t)},K:function(e,t,r){const a=e.getHours()%12;return"Ko"===t?r.ordinalNumber(a,{unit:"hour"}):TC(a,t.length)},k:function(e,t,r){let a=e.getHours();return 0===a&&(a=24),"ko"===t?r.ordinalNumber(a,{unit:"hour"}):TC(a,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):OC.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):OC.s(e,t)},S:function(e,t){return OC.S(e,t)},X:function(e,t,r){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return FC(a);case"XXXX":case"XX":return BC(a);default:return BC(a,":")}},x:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"x":return FC(a);case"xxxx":case"xx":return BC(a);default:return BC(a,":")}},O:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+IC(a,":");default:return"GMT"+BC(a,":")}},z:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+IC(a,":");default:return"GMT"+BC(a,":")}},t:function(e,t,r){return TC(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,r){return TC(e.getTime(),t.length)}};function IC(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),s=a%60;return 0===s?r+String(n):r+String(n)+t+TC(s,2)}function FC(e,t){if(e%60==0){return(e>0?"-":"+")+TC(Math.abs(e)/60,2)}return BC(e,t)}function BC(e,t=""){const r=e>0?"-":"+",a=Math.abs(e);return r+TC(Math.trunc(a/60),2)+t+TC(a%60,2)}const LC=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},qC=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},$C={p:qC,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return LC(e,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",LC(a,t)).replace("{{time}}",qC(n,t))}},KC=/^D+$/,UC=/^Y+$/,HC=["D","DD","YY","YYYY"];const YC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,VC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GC=/^'([^]*?)'?$/,WC=/''/g,QC=/[a-zA-Z]/;function XC(e,t,r){var a,n,s,i,l,o,c,d;const u=GS(),m=(null==r?void 0:r.locale)??u.locale??NC,h=(null==r?void 0:r.firstWeekContainsDate)??(null==(n=null==(a=null==r?void 0:r.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(i=null==(s=u.locale)?void 0:s.options)?void 0:i.firstWeekContainsDate)??1,p=(null==r?void 0:r.weekStartsOn)??(null==(o=null==(l=null==r?void 0:r.locale)?void 0:l.options)?void 0:o.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,x=BS(e);if(!function(e){if(!sC(e)&&"number"!=typeof e)return!1;const t=BS(e);return!isNaN(Number(t))}(x))throw new RangeError("Invalid time value");let g=t.match(VC).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,$C[t])(e,m.formatLong)}return e})).join("").match(YC).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:ZC(e)};if(RC[t])return{isToken:!0,value:e};if(t.match(QC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));m.localize.preprocessor&&(g=m.localize.preprocessor(x,g));const f={firstWeekContainsDate:h,weekStartsOn:p,locale:m};return g.map((a=>{if(!a.isToken)return a.value;const n=a.value;(!(null==r?void 0:r.useAdditionalWeekYearTokens)&&function(e){return UC.test(e)}(n)||!(null==r?void 0:r.useAdditionalDayOfYearTokens)&&function(e){return KC.test(e)}(n))&&function(e,t,r){const a=function(e,t,r){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(HC.includes(e))throw new RangeError(a)}(n,t,String(e));return(0,RC[n[0]])(x,n,m.localize,f)})).join("")}function ZC(e){const t=e.match(GC);return t?t[1].replace(WC,"'"):e}function JC(e,t){return function(e,t,r){const a=GS(),n=(null==r?void 0:r.locale)??a.locale??NC,s=aC(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const i=Object.assign({},r,{addSuffix:null==r?void 0:r.addSuffix,comparison:s});let l,o;s>0?(l=BS(t),o=BS(e)):(l=BS(e),o=BS(t));const c=mC(o,l),d=(JS(o)-JS(l))/1e3,u=Math.round((c-d)/60);let m;if(u<2)return(null==r?void 0:r.includeSeconds)?c<5?n.formatDistance("lessThanXSeconds",5,i):c<10?n.formatDistance("lessThanXSeconds",10,i):c<20?n.formatDistance("lessThanXSeconds",20,i):c<40?n.formatDistance("halfAMinute",0,i):c<60?n.formatDistance("lessThanXMinutes",1,i):n.formatDistance("xMinutes",1,i):0===u?n.formatDistance("lessThanXMinutes",1,i):n.formatDistance("xMinutes",u,i);if(u<45)return n.formatDistance("xMinutes",u,i);if(u<90)return n.formatDistance("aboutXHours",1,i);if(u<1440){const e=Math.round(u/60);return n.formatDistance("aboutXHours",e,i)}if(u<2520)return n.formatDistance("xDays",1,i);if(u<YS){const e=Math.round(u/1440);return n.formatDistance("xDays",e,i)}if(u<86400)return m=Math.round(u/YS),n.formatDistance("aboutXMonths",m,i);if(m=uC(o,l),m<12){const e=Math.round(u/YS);return n.formatDistance("xMonths",e,i)}{const e=m%12,t=Math.trunc(m/12);return e<3?n.formatDistance("aboutXYears",t,i):e<9?n.formatDistance("overXYears",t,i):n.formatDistance("almostXYears",t+1,i)}}(e,function(e){return LS(e,Date.now())}(e),t)}function eT(e,t){return function(e,t,r){const a=WS(e,r),n=WS(t,r),s=+a-JS(a),i=+n-JS(n);return Math.round((s-i)/KS)}(function(e){const t=BS(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}(e),hC(e),t)+1}function tT(e,t){const r=BS(e),a=BS(t);return r.getTime()>a.getTime()}function rT(e,t){return+BS(e)<+BS(t)}function aT(e,t){const r=BS(e),a=BS(t);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function nT(e,t){return qS(e,-t)}function sT(e,t){const r=function(e){const t={},r=e.split(iT.dateTimeDelimiter);let a;if(r.length>2)return t;/:/.test(r[0])?a=r[0]:(t.date=r[0],a=r[1],iT.timeZoneDelimiter.test(t.date)&&(t.date=e.split(iT.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length)));if(a){const e=iT.timezone.exec(a);e?(t.time=a.replace(e[1],""),t.timezone=e[1]):t.time=a}return t}(e);let a;if(r.date){const e=function(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(r);if(!a)return{year:NaN,restDateString:""};const n=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:null===s?n:100*s,restDateString:e.slice((a[1]||a[2]).length)}}(r.date,2);a=function(e,t){if(null===t)return new Date(NaN);const r=e.match(lT);if(!r)return new Date(NaN);const a=!!r[4],n=dT(r[1]),s=dT(r[2])-1,i=dT(r[3]),l=dT(r[4]),o=dT(r[5])-1;if(a)return function(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}(0,l,o)?function(e,t,r){const a=new Date(0);a.setUTCFullYear(e,0,4);const n=a.getUTCDay()||7,s=7*(t-1)+r+1-n;return a.setUTCDate(a.getUTCDate()+s),a}(t,l,o):new Date(NaN);{const e=new Date(0);return function(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(mT[t]||(hT(e)?29:28))}(t,s,i)&&function(e,t){return t>=1&&t<=(hT(e)?366:365)}(t,n)?(e.setUTCFullYear(t,s,Math.max(n,i)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const n=a.getTime();let s,i=0;if(r.time&&(i=function(e){const t=e.match(oT);if(!t)return NaN;const r=uT(t[1]),a=uT(t[2]),n=uT(t[3]);if(!function(e,t,r){if(24===e)return 0===t&&0===r;return r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}(r,a,n))return NaN;return r*HS+a*US+1e3*n}(r.time),isNaN(i)))return new Date(NaN);if(!r.timezone){const e=new Date(n+i),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return s=function(e){if("Z"===e)return 0;const t=e.match(cT);if(!t)return 0;const r="+"===t[1]?-1:1,a=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,n))return NaN;return r*(a*HS+n*US)}(r.timezone),isNaN(s)?new Date(NaN):new Date(n+i+s)}const iT={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},lT=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,oT=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,cT=/^([+-])(\d{2})(?::?(\d{2}))?$/;function dT(e){return e?parseInt(e):1}function uT(e){return e&&parseFloat(e.replace(",","."))||0}const mT=[31,null,31,30,31,30,31,31,30,31,30,31];function hT(e){return e%400==0||e%4==0&&e%100!=0}function pT(e,t){const r=BS(e),a=r.getFullYear(),n=r.getDate(),s=LS(e,0);s.setFullYear(a,t,15),s.setHours(0,0,0,0);const i=function(e){const t=BS(e),r=t.getFullYear(),a=t.getMonth(),n=LS(e,0);return n.setFullYear(r,a+1,0),n.setHours(0,0,0,0),n.getDate()}(s);return r.setMonth(t,Math.min(n,i)),r}function xT(e,t){const r=BS(e);return isNaN(+r)?LS(e,NaN):(r.setFullYear(t),r)}function gT(e,t){return $S(e,-t)}function fT(e,t){const r=function(e){vT[e]||(vT[e]=jT?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));return vT[e]}(t);return"formatToParts"in r?function(e,t){try{const r=e.formatToParts(t),a=[];for(let e=0;e<r.length;e++){const t=yT[r[e].type];void 0!==t&&(a[t]=parseInt(r[e].value,10))}return a}catch(r){if(r instanceof RangeError)return[NaN];throw r}}(r,e):function(e,t){const r=e.format(t),a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[parseInt(a[3],10),parseInt(a[1],10),parseInt(a[2],10),parseInt(a[4],10),parseInt(a[5],10),parseInt(a[6],10)]}(r,e)}const yT={year:0,month:1,day:2,hour:3,minute:4,second:5};const vT={},bT=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),jT="06/25/2014, 00:00:00"===bT||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===bT;function kT(e,t,r,a,n,s,i){const l=new Date(0);return l.setUTCFullYear(e,t,r),l.setUTCHours(a,n,s,i),l}const wT=36e5,NT={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function _T(e,t,r){if(!e)return 0;let a,n,s=NT.timezoneZ.exec(e);if(s)return 0;if(s=NT.timezoneHH.exec(e),s)return a=parseInt(s[1],10),CT(a)?-a*wT:NaN;if(s=NT.timezoneHHMM.exec(e),s){a=parseInt(s[2],10);const e=parseInt(s[3],10);return CT(a,e)?(n=Math.abs(a)*wT+6e4*e,"+"===s[1]?-n:n):NaN}if(function(e){if(TT[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),TT[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());const a=r?t:function(e){return kT(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),n=ST(a,e),s=r?n:function(e,t,r){const a=e.getTime();let n=a-t;const s=ST(new Date(n),r);if(t===s)return t;n-=s-t;const i=ST(new Date(n),r);if(s===i)return s;return Math.max(s,i)}(t,n,e);return-s}return NaN}function ST(e,t){const r=fT(e,t),a=kT(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime();let n=e.getTime();const s=n%1e3;return n-=s>=0?s:1e3+s,a-n}function CT(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}const TT={};function OT(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const PT=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,AT=36e5,ET=6e4,DT={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:PT};function MT(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);const r=null==t.additionalDigits?2:Number(t.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);const a=function(e){const t={};let r,a=DT.dateTimePattern.exec(e);a?(t.date=a[1],r=a[3]):(a=DT.datePattern.exec(e),a?(t.date=a[1],r=a[2]):(t.date=null,r=e));if(r){const e=DT.timeZone.exec(r);e?(t.time=r.replace(e[1],""),t.timeZone=e[1].trim()):t.time=r}return t}(e),{year:n,restDateString:s}=function(e,t){if(e){const r=DT.YYY[t],a=DT.YYYYY[t];let n=DT.YYYY.exec(e)||a.exec(e);if(n){const t=n[1];return{year:parseInt(t,10),restDateString:e.slice(t.length)}}if(n=DT.YY.exec(e)||r.exec(e),n){const t=n[1];return{year:100*parseInt(t,10),restDateString:e.slice(t.length)}}}return{year:null}}(a.date,r),i=function(e,t){if(null===t)return null;let r,a,n;if(!e||!e.length)return r=new Date(0),r.setUTCFullYear(t),r;let s=DT.MM.exec(e);if(s)return r=new Date(0),a=parseInt(s[1],10)-1,BT(t,a)?(r.setUTCFullYear(t,a),r):new Date(NaN);if(s=DT.DDD.exec(e),s){r=new Date(0);const e=parseInt(s[1],10);return function(e,t){if(t<1)return!1;const r=FT(e);if(r&&t>366)return!1;if(!r&&t>365)return!1;return!0}(t,e)?(r.setUTCFullYear(t,0,e),r):new Date(NaN)}if(s=DT.MMDD.exec(e),s){r=new Date(0),a=parseInt(s[1],10)-1;const e=parseInt(s[2],10);return BT(t,a,e)?(r.setUTCFullYear(t,a,e),r):new Date(NaN)}if(s=DT.Www.exec(e),s)return n=parseInt(s[1],10)-1,LT(n)?zT(t,n):new Date(NaN);if(s=DT.WwwD.exec(e),s){n=parseInt(s[1],10)-1;const e=parseInt(s[2],10)-1;return LT(n,e)?zT(t,n,e):new Date(NaN)}return null}(s,n);if(null===i||isNaN(i.getTime()))return new Date(NaN);if(i){const e=i.getTime();let r,n=0;if(a.time&&(n=function(e){let t,r,a=DT.HH.exec(e);if(a)return t=parseFloat(a[1].replace(",",".")),qT(t)?t%24*AT:NaN;if(a=DT.HHMM.exec(e),a)return t=parseInt(a[1],10),r=parseFloat(a[2].replace(",",".")),qT(t,r)?t%24*AT+r*ET:NaN;if(a=DT.HHMMSS.exec(e),a){t=parseInt(a[1],10),r=parseInt(a[2],10);const e=parseFloat(a[3].replace(",","."));return qT(t,r,e)?t%24*AT+r*ET+1e3*e:NaN}return null}(a.time),null===n||isNaN(n)))return new Date(NaN);if(a.timeZone||t.timeZone){if(r=_T(a.timeZone||t.timeZone,new Date(e+n)),isNaN(r))return new Date(NaN)}else r=OT(new Date(e+n)),r=OT(new Date(e+n+r));return new Date(e+n+r)}return new Date(NaN)}function zT(e,t,r){t=t||0,r=r||0;const a=new Date(0);a.setUTCFullYear(e,0,4);const n=7*t+r+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+n),a}const RT=[31,28,31,30,31,30,31,31,30,31,30,31],IT=[31,29,31,30,31,30,31,31,30,31,30,31];function FT(e){return e%400==0||e%4==0&&e%100!=0}function BT(e,t,r){if(t<0||t>11)return!1;if(null!=r){if(r<1)return!1;const a=FT(e);if(a&&r>IT[t])return!1;if(!a&&r>RT[t])return!1}return!0}function LT(e,t){return!(e<0||e>52)&&(null==t||!(t<0||t>6))}function qT(e,t,r){return!(e<0||e>=25)&&((null==t||!(t<0||t>=60))&&(null==r||!(r<0||r>=60)))}function $T(e,t,r){const a=_T(t,e=MT(e,r),!0),n=new Date(e.getTime()-a),s=new Date(0);return s.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),s.setHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),s}const KT="Europe/Istanbul";function UT(e){return function(e,t,r){if("string"==typeof e&&!e.match(PT))return MT(e,{...r,timeZone:t});const a=kT((e=MT(e,r)).getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),n=_T(t,new Date(a));return new Date(a+n)}(e,KT)}const HT=e=>{if(!e||0===e.length)return{totalPaid:0,totalDiscount:0,totalPayment:0};const t=e.reduce(((e,t)=>e+(t.amount||0)),0),r=e.reduce(((e,t)=>e+(t.discount||0)),0);return{totalPaid:t,totalDiscount:r,totalPayment:t+r}};function YT(){const{userProfile:e}=Jl(),t=$T(new Date,KT);const r=UT(ZS(t)),a=UT(cC(t));UT(WS(t,{weekStartsOn:1})),UT(xC(t,{weekStartsOn:1}));const n=UT(hC(t)),s=UT(dC(t));UT(hC(gT(t,1))),UT(dC(gT(t,1)));const{data:i,isLoading:l}=qe({queryKey:["dashboard-stats"],queryFn:async()=>{const[e,n,s,i,l,o]=await Promise.all([Wl.from("orders").select("total_amount").gte("created_at",r.toISOString()).lte("created_at",a.toISOString()),Wl.from("orders").select("total_amount").gte("created_at",UT(ZS(nT(t,1))).toISOString()).lte("created_at",UT(cC(nT(t,1))).toISOString()),Wl.from("orders").select("status").in("status",["pending","processing","shipped"]),Wl.from("product_variations").select("stock_quantity").lte("stock_quantity",10),Wl.from("profiles").select("role"),Wl.from("orders").select("\n            id,\n            total_amount,\n            payments (\n              id,\n              amount,\n              discount\n            )\n          ")]),c=e.data||[],d=n.data||[],u=c.reduce(((e,t)=>e+(t.total_amount||0)),0),m=d.reduce(((e,t)=>e+(t.total_amount||0)),0),h=m>0?(u-m)/m*100:u>0?100:0,p=s.data||[],x=p.filter((e=>"pending"===e.status)).length,g=i.data||[],f=g.filter((e=>e.stock_quantity<=5)).length,y=l.data||[],v=y.length,b=y.filter((e=>!e.role)).length,j=y.filter((e=>"toptanci"===e.role)).length,k=o.data||[],w=k.reduce(((e,t)=>e+(t.total_amount||0)),0),N=k.reduce(((e,t)=>{const{totalPaid:r}=HT(t.payments||[]);return e+r}),0),_=k.reduce(((e,t)=>{const{totalDiscount:r}=HT(t.payments||[]);return e+r}),0),S=k.reduce(((e,t)=>{const{totalPayment:r}=HT(t.payments||[]);return e+(t.total_amount-r)}),0),C=w-_;return{todaySales:{value:u,trend:{value:Math.abs(h),type:h>0?"increase":h<0?"decrease":"neutral"}},activeOrders:{value:p.length,pending:x},lowStock:{value:g.length,critical:f},users:{total:v,pending:b,active:j},payments:{totalPaid:N,totalDiscount:_,totalUnpaid:S,netAmount:C},orders:{totalAmount:w}}},enabled:!!e,staleTime:12e4,gcTime:3e5,refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:o,isLoading:c}=qe({queryKey:["dashboard-activities"],queryFn:async()=>{const t=[],{data:r}=await Wl.from("orders").select("id, order_number, total_amount, status, created_at, customer_name").order("created_at",{ascending:!1}).limit(5);if(null==r||r.forEach((e=>{t.push({id:`order-${e.id}`,type:"order",title:`Sipariş #${e.order_number}`,description:`${e.customer_name} - ₺${new Intl.NumberFormat("tr-TR").format(e.total_amount)}`,status:"pending"===e.status?"warning":"info",timestamp:e.created_at})})),"yonetici"===(null==e?void 0:e.role)){const{data:e}=await Wl.from("profiles").select("id, full_name, role, created_at").order("created_at",{ascending:!1}).limit(3);null==e||e.forEach((e=>{t.push({id:`user-${e.id}`,type:"user",title:e.full_name,description:e.role?"Kullanıcı onaylandı":"Onay bekliyor",status:e.role?"success":"warning",timestamp:e.created_at})}))}return t.sort(((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()))},enabled:!!e,staleTime:12e4,gcTime:6e5,refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:d,isLoading:u}=qe({queryKey:["dashboard-sales-chart"],queryFn:async()=>{const e=new Date,t=e.getDay(),r=0===t?6:t-1,a=new Date(e);a.setDate(e.getDate()-r);const n=new Date(a);n.setHours(0,0,0,0);const s=new Date(a);s.setDate(s.getDate()+6),s.setHours(23,59,59,999);const i=new Date(n);i.setDate(i.getDate()-7);const l=new Date(s);l.setDate(l.getDate()-7);const o=new Date(e);o.setDate(e.getDate()-56);const c=new Date(e);c.setMonth(e.getMonth()-12);const d=new Date(n.getTime()-108e5),u=new Date(s.getTime()-108e5),m=new Date(i.getTime()-108e5),h=new Date(l.getTime()-108e5),p=new Date(o.getTime()-108e5),x=new Date(c.getTime()-108e5),[g,f,y,v]=await Promise.all([Wl.from("orders").select("total_amount, created_at").gte("created_at",d.toISOString()).lte("created_at",u.toISOString()),Wl.from("orders").select("total_amount, created_at").gte("created_at",m.toISOString()).lte("created_at",h.toISOString()),Wl.from("orders").select("total_amount, created_at").gte("created_at",p.toISOString()),Wl.from("orders").select("total_amount, created_at").gte("created_at",x.toISOString())]),b=[],j=["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"];for(let C=0;C<7;C++){const e=new Date(a);e.setDate(a.getDate()+C);const t=new Date(e);t.setHours(0,0,0,0);const r=new Date(e);r.setHours(23,59,59,999);const n=(g.data||[]).filter((e=>{const a=new Date(e.created_at),n=new Date(a.getTime()+108e5);return n>=t&&n<=r})),s=(f.data||[]).filter((e=>{const a=new Date(e.created_at),n=new Date(a.getTime()+108e5),s=new Date(t);s.setDate(s.getDate()-7);const i=new Date(r);return i.setDate(i.getDate()-7),n>=s&&n<=i})),i=n.reduce(((e,t)=>e+(t.total_amount||0)),0),l=s.reduce(((e,t)=>e+(t.total_amount||0)),0);b.push({name:j[C],value:i,previousValue:l,date:e.toISOString().split("T")[0]})}const k=[],w=y.data||[];for(let C=7;C>=0;C--){const t=new Date(e);t.setDate(e.getDate()-7*C);const r=t.getDay(),a=0===r?6:r-1;t.setDate(t.getDate()-a),t.setHours(0,0,0,0);const n=new Date(t);n.setDate(n.getDate()+6),n.setHours(23,59,59,999);const s=w.filter((e=>{const r=new Date(e.created_at),a=new Date(r.getTime()+108e5);return a>=t&&a<=n})).reduce(((e,t)=>e+(t.total_amount||0)),0);let i;if(0===C)i="Bu Hafta";else if(1===C)i="Geçen Hafta";else{const e=t.getDate(),r=t.getMonth()+1,a=n.getDate(),s=n.getMonth()+1;i=r===s?`${e}-${a}/${r.toString().padStart(2,"0")}`:`${e}/${r.toString().padStart(2,"0")}-${a}/${s.toString().padStart(2,"0")}`}k.push({name:i,value:s,weekStart:t.toISOString().split("T")[0],weekEnd:n.toISOString().split("T")[0]})}const N=[],_=["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],S=v.data||[];for(let C=11;C>=0;C--){const t=new Date(e.getFullYear(),e.getMonth()-C,1),r=new Date(t.getFullYear(),t.getMonth()+1,0);r.setHours(23,59,59,999);const a=S.filter((e=>{const a=new Date(e.created_at),n=new Date(a.getTime()+108e5);return n>=t&&n<=r})).reduce(((e,t)=>e+(t.total_amount||0)),0);N.push({name:_[t.getMonth()],value:a,month:t.getMonth()+1,year:t.getFullYear()})}return{dailyData:b,weeklyData:k,monthlyData:N}},enabled:!!e&&["yonetici","muhasebeci","reklamci"].includes(e.role||""),staleTime:3e5,gcTime:9e5,refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:m,isLoading:h}=qe({queryKey:["dashboard-product-performance"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("order_items").select("\n          quantity,\n          product_variations!inner(\n            products!inner(name)\n          )\n        ").gte("created_at",n.toISOString()).lte("created_at",s.toISOString()).limit(1e3);if(t)return[];const r={};(e||[]).forEach((e=>{var t,a;const n=null==(a=null==(t=e.product_variations)?void 0:t.products)?void 0:a.name;n&&(r[n]=(r[n]||0)+e.quantity)}));const a=Object.entries(r).sort(((e,t)=>t[1]-e[1])).slice(0,6),i=a.reduce(((e,[t,r])=>e+r),0);return a.map((([e,t])=>({name:e,value:t,percentage:i>0?Math.round(t/i*100):0})))},enabled:!!e&&["yonetici","reklamci"].includes(e.role||""),staleTime:3e5,gcTime:9e5,refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:p,isLoading:x}=qe({queryKey:["dashboard-critical-stock"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("product_variations").select("\n          *,\n          products (\n            name,\n            code,\n            category\n          )\n        ").lte("stock_quantity",5).order("stock_quantity",{ascending:!0});if(t)throw t;return e||[]},enabled:!!e,staleTime:6e4,gcTime:3e5,refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:g,isLoading:f}=qe({queryKey:["dashboard-system-status"],queryFn:async()=>{const{count:e}=await Wl.from("products").select("*",{count:"exact",head:!0}),{count:t}=await Wl.from("products").select("*",{count:"exact",head:!0}).eq("status","active"),r=new Date;r.setDate(r.getDate()-30);const{count:a}=await Wl.from("orders").select("*",{count:"exact",head:!0}).gte("created_at",r.toISOString()),{count:n}=await Wl.from("profiles").select("*",{count:"exact",head:!0}),s=new Date;s.setDate(s.getDate()-7);const{count:i}=await Wl.from("profiles").select("*",{count:"exact",head:!0}).gte("created_at",s.toISOString()),{count:l}=await Wl.from("product_variations").select("*",{count:"exact",head:!0}).lte("stock_quantity",10),{count:o}=await Wl.from("product_variations").select("*",{count:"exact",head:!0}).lte("stock_quantity",5),{count:c}=await Wl.from("orders").select("*",{count:"exact",head:!0}).eq("status","pending"),{data:d}=await Wl.from("orders").select("total_amount").gte("created_at",r.toISOString()).not("total_amount","is",null),u=(null==d?void 0:d.reduce(((e,t)=>e+(t.total_amount||0)),0))||0;return{totalProducts:e||0,activeProducts:t||0,recentOrders:a||0,totalUsers:n||0,activeUsers:i||0,lowStockCount:l||0,criticalStockCount:o||0,pendingOrders:c||0,totalSales:u,avgOrderValue:a>0?u/a:0,systemPerformance:{cpuUsage:Math.min(100,Math.max(10,i/Math.max(n,1)*100)),memoryUsage:Math.min(100,Math.max(20,e/1e3*100)),diskUsage:Math.min(100,Math.max(15,a/1e3*100))}}},enabled:!!e,staleTime:18e4,gcTime:6e5,refetchOnMount:!1,refetchOnWindowFocus:!1});return{stats:i,activities:o,salesChartData:d,productPerformance:m,criticalStockProducts:p,systemStatus:g,isLoading:l||c||u||h||x||f}}function VT({title:e,value:t,subtitle:r,icon:a,trend:n,loading:s=!1,color:l="text-blue-600"}){return i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e}),i.jsx("div",{className:l,children:a})]}),i.jsx(io,{children:s?i.jsx("div",{className:"flex items-center justify-center h-12",children:i.jsx(oa,{className:"h-6 w-6 animate-spin"})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t}),(r||n)&&i.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r}),n&&i.jsxs("div",{className:`flex items-center gap-1 text-xs font-medium ${(()=>{if(!n)return"";switch(n.type){case"increase":return"text-green-600 dark:text-green-400";case"decrease":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}})()}`,children:[(()=>{if(!n)return null;switch(n.type){case"increase":return i.jsx(an,{className:"h-4 w-4 text-green-600"});case"decrease":return i.jsx(rn,{className:"h-4 w-4 text-red-600"});default:return i.jsx(ga,{className:"h-4 w-4 text-gray-600"})}})(),i.jsxs("span",{children:[Math.abs(n.value),"%"]})]})]})]})})]})}function GT({stats:e,loading:t=!1}){var r,a,n,s,l,o,c,d,u,m;return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[i.jsx(VT,{title:"Bugünkü Satışlar",value:`₺${new Intl.NumberFormat("tr-TR").format(e.todaySales.value)}`,trend:e.todaySales.trend,icon:i.jsx(an,{className:"h-4 w-4"}),color:"text-emerald-600 dark:text-emerald-400",loading:t}),i.jsx(VT,{title:"Aktif Siparişler",value:e.activeOrders.value,subtitle:`${e.activeOrders.pending} onay bekliyor`,icon:i.jsx(Co,{className:"h-4 w-4"}),color:"text-blue-600 dark:text-blue-400",loading:t}),i.jsx(VT,{title:"Stok Uyarısı",value:e.lowStock.value,subtitle:`${e.lowStock.critical} kritik seviyede`,icon:i.jsx(Co,{className:"h-4 w-4"}),color:"text-orange-600 dark:text-orange-400",loading:t}),i.jsx(VT,{title:"Kullanıcılar",value:e.users.total,subtitle:`${e.users.active} aktif, ${e.users.pending} onay bekliyor`,icon:i.jsx(Co,{className:"h-4 w-4"}),color:"text-purple-600 dark:text-purple-400",loading:t}),i.jsx(VT,{title:"Toplam Sipariş Tutarı",value:`₺${(null==(a=null==(r=e.orders)?void 0:r.totalAmount)?void 0:a.toLocaleString("tr-TR",{minimumFractionDigits:2}))||"0,00"}`,subtitle:`Net tutarı: ₺${(null==(s=null==(n=e.payments)?void 0:n.netAmount)?void 0:s.toLocaleString("tr-TR",{minimumFractionDigits:2}))||"0,00"}`,icon:i.jsx(hr,{className:"h-4 w-4"}),color:"text-blue-600 dark:text-blue-400",loading:t}),i.jsx(VT,{title:"Toplam Ödenen",value:`₺${(null==(o=null==(l=e.payments)?void 0:l.totalPaid)?void 0:o.toLocaleString("tr-TR",{minimumFractionDigits:2}))||"0,00"}`,subtitle:"Toplam tahsil edilen (brüt)",icon:i.jsx(Lr,{className:"h-4 w-4"}),color:"text-green-600 dark:text-green-400",loading:t}),i.jsx(VT,{title:"Toplam İskonto",value:`₺${(null==(d=null==(c=e.payments)?void 0:c.totalDiscount)?void 0:d.toLocaleString("tr-TR",{minimumFractionDigits:2}))||"0,00"}`,subtitle:"Verilen toplam iskonto",icon:i.jsx(Ea,{className:"h-4 w-4"}),color:"text-yellow-600 dark:text-yellow-400",loading:t}),i.jsx(VT,{title:"Alınmayan Ödeme",value:`₺${(null==(m=null==(u=e.payments)?void 0:u.totalUnpaid)?void 0:m.toLocaleString("tr-TR",{minimumFractionDigits:2}))||"0,00"}`,subtitle:"Kalan borç (brüt hesap)",icon:i.jsx(Ir,{className:"h-4 w-4"}),color:"text-red-600 dark:text-red-400",loading:t})]})}const WT={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarım dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklaşık 1 saat",other:"yaklaşık {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gün",other:"{{count}} gün"},aboutXWeeks:{one:"yaklaşık 1 hafta",other:"yaklaşık {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklaşık 1 ay",other:"yaklaşık {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklaşık 1 yıl",other:"yaklaşık {{count}} yıl"},xYears:{one:"1 yıl",other:"{{count}} yıl"},overXYears:{one:"1 yıldan fazla",other:"{{count}} yıldan fazla"},almostXYears:{one:"neredeyse 1 yıl",other:"neredeyse {{count}} yıl"}},QT={date:yC({formats:{full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},defaultWidth:"full"}),time:yC({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:yC({formats:{full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},XT={lastWeek:"'geçen hafta' eeee 'saat' p",yesterday:"'dün saat' p",today:"'bugün saat' p",tomorrow:"'yarın saat' p",nextWeek:"eeee 'saat' p",other:"P"},ZT={code:"tr",formatDistance:(e,t,r)=>{let a;const n=WT[e];return a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),(null==r?void 0:r.addSuffix)?r.comparison&&r.comparison>0?a+" sonra":a+" önce":a},formatLong:QT,formatRelative:(e,t,r,a)=>XT[e],localize:{ordinalNumber:(e,t)=>Number(e)+".",era:jC({values:{narrow:["MÖ","MS"],abbreviated:["MÖ","MS"],wide:["Milattan Önce","Milattan Sonra"]},defaultWidth:"wide"}),quarter:jC({values:{narrow:["1","2","3","4"],abbreviated:["1Ç","2Ç","3Ç","4Ç"],wide:["İlk çeyrek","İkinci Çeyrek","Üçüncü çeyrek","Son çeyrek"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:jC({values:{narrow:["O","Ş","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],wide:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"]},defaultWidth:"wide"}),day:jC({values:{narrow:["P","P","S","Ç","P","C","C"],short:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","Çar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]},defaultWidth:"wide"}),dayPeriod:jC({values:{narrow:{am:"öö",pm:"ös",midnight:"gy",noon:"ö",morning:"sa",afternoon:"ös",evening:"ak",night:"ge"},abbreviated:{am:"ÖÖ",pm:"ÖS",midnight:"gece yarısı",noon:"öğle",morning:"sabah",afternoon:"öğleden sonra",evening:"akşam",night:"gece"},wide:{am:"Ö.Ö.",pm:"Ö.S.",midnight:"gece yarısı",noon:"öğle",morning:"sabah",afternoon:"öğleden sonra",evening:"akşam",night:"gece"}},defaultWidth:"wide",formattingValues:{narrow:{am:"öö",pm:"ös",midnight:"gy",noon:"ö",morning:"sa",afternoon:"ös",evening:"ak",night:"ge"},abbreviated:{am:"ÖÖ",pm:"ÖS",midnight:"gece yarısı",noon:"öğlen",morning:"sabahleyin",afternoon:"öğleden sonra",evening:"akşamleyin",night:"geceleyin"},wide:{am:"ö.ö.",pm:"ö.s.",midnight:"gece yarısı",noon:"öğlen",morning:"sabahleyin",afternoon:"öğleden sonra",evening:"akşamleyin",night:"geceleyin"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:wC({matchPattern:/^(\d+)(\.)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:kC({matchPatterns:{narrow:/^(mö|ms)/i,abbreviated:/^(mö|ms)/i,wide:/^(milattan önce|milattan sonra)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(^mö|^milattan önce)/i,/(^ms|^milattan sonra)/i]},defaultParseWidth:"any"}),quarter:kC({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^[1234]ç/i,wide:/^((i|İ)lk|(i|İ)kinci|üçüncü|son) çeyrek/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1ç/i,/2ç/i,/3ç/i,/4ç/i],wide:[/^(i|İ)lk çeyrek/i,/(i|İ)kinci çeyrek/i,/üçüncü çeyrek/i,/son çeyrek/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:kC({matchPatterns:{narrow:/^[oşmnhtaek]/i,abbreviated:/^(oca|şub|mar|nis|may|haz|tem|ağu|eyl|eki|kas|ara)/i,wide:/^(ocak|şubat|mart|nisan|mayıs|haziran|temmuz|ağustos|eylül|ekim|kasım|aralık)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^o/i,/^ş/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^ş/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^ağ/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},defaultParseWidth:"any"}),day:kC({matchPatterns:{narrow:/^[psçc]/i,short:/^(pz|pt|sa|ça|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|çar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|salı|çarşamba|perşembe|cuma(?!rtesi)|cumartesi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^p/i,/^p/i,/^s/i,/^ç/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^ça/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^salı/i,/^çarşamba/i,/^perşembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},defaultParseWidth:"any"}),dayPeriod:kC({matchPatterns:{narrow:/^(öö|ös|gy|ö|sa|ös|ak|ge)/i,any:/^(ö\.?\s?[ös]\.?|öğleden sonra|gece yarısı|öğle|(sabah|öğ|akşam|gece)(leyin))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^ö\.?ö\.?/i,pm:/^ö\.?s\.?/i,midnight:/^(gy|gece yarısı)/i,noon:/^öğ/i,morning:/^sa/i,afternoon:/^öğleden sonra/i,evening:/^ak/i,night:/^ge/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};function JT({activities:e,loading:t=!1}){const r=e=>{switch(e){case"order":return i.jsx(Ha,{className:"h-4 w-4"});case"payment":return i.jsx(Or,{className:"h-4 w-4"});case"stock":return i.jsx(ba,{className:"h-4 w-4"});case"user":return i.jsx(mn,{className:"h-4 w-4"});default:return i.jsx(Tr,{className:"h-4 w-4"})}},a=e=>{switch(e){case"success":return"text-green-600 bg-green-100 dark:bg-green-900/50 dark:text-green-300";case"warning":return"text-orange-600 bg-orange-100 dark:bg-orange-900/50 dark:text-orange-300";case"error":return"text-red-600 bg-red-100 dark:bg-red-900/50 dark:text-red-300";default:return"text-blue-600 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300"}},n=e=>{switch(e){case"order":return"text-blue-600 dark:text-blue-400";case"payment":return"text-green-600 dark:text-green-400";case"stock":return"text-orange-600 dark:text-orange-400";case"user":return"text-purple-600 dark:text-purple-400";default:return"text-gray-600 dark:text-gray-400"}};return i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm h-full",children:[i.jsx(ao,{children:i.jsxs(no,{className:"text-lg text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[i.jsx(zr,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),"Son Aktiviteler"]})}),i.jsx(io,{children:i.jsx(Rc,{className:"h-[350px] pr-4",children:t?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-pulse space-y-4 w-full",children:[1,2,3,4,5].map((e=>i.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded-lg"},e)))})}):0===e.length?i.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Henüz aktivite bulunmuyor"}):i.jsx("div",{className:"space-y-4",children:e.map((e=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",children:[i.jsx("div",{className:`p-2 rounded-full ${n(e.type)} bg-opacity-10`,children:r(e.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:e.title}),e.status&&i.jsxs(Co,{className:a(e.status),variant:"secondary",children:["success"===e.status&&"Başarılı","warning"===e.status&&"Uyarı","error"===e.status&&"Hata","info"===e.status&&"Bilgi"]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:e.description}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:JC($T(new Date(e.timestamp),"Europe/Istanbul"),{addSuffix:!0,locale:ZT})})]})]},e.id)))})})})]})}const eO=ye,tO=ve,rO=ze.forwardRef((({className:e,children:t,...r},a)=>i.jsxs(ie,{ref:a,className:xs("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx(le,{asChild:!0,children:i.jsx(jr,{className:"h-4 w-4 opacity-50"})})]})));rO.displayName=ie.displayName;const aO=ze.forwardRef((({className:e,...t},r)=>i.jsx(oe,{ref:r,className:xs("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Nr,{className:"h-4 w-4"})})));aO.displayName=oe.displayName;const nO=ze.forwardRef((({className:e,...t},r)=>i.jsx(ce,{ref:r,className:xs("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(jr,{className:"h-4 w-4"})})));nO.displayName=ce.displayName;const sO=ze.forwardRef((({className:e,children:t,position:r="popper",...a},n)=>i.jsx(de,{children:i.jsxs(ue,{ref:n,className:xs("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[i.jsx(aO,{}),i.jsx(me,{className:xs("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(nO,{})]})})));sO.displayName=ue.displayName;ze.forwardRef((({className:e,...t},r)=>i.jsx(he,{ref:r,className:xs("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}))).displayName=he.displayName;const iO=ze.forwardRef((({className:e,children:t,...r},a)=>i.jsxs(pe,{ref:a,className:xs("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(xe,{children:i.jsx(br,{className:"h-4 w-4"})})}),i.jsx(ge,{children:t})]})));iO.displayName=pe.displayName;ze.forwardRef((({className:e,...t},r)=>i.jsx(fe,{ref:r,className:xs("-mx-1 my-1 h-px bg-muted",e),...t}))).displayName=fe.displayName;var lO=Array.isArray,oO="object"==typeof Be&&Be&&Be.Object===Object&&Be,cO=oO,dO="object"==typeof self&&self&&self.Object===Object&&self,uO=cO||dO||Function("return this")(),mO=uO.Symbol,hO=mO,pO=Object.prototype,xO=pO.hasOwnProperty,gO=pO.toString,fO=hO?hO.toStringTag:void 0;var yO=function(e){var t=xO.call(e,fO),r=e[fO];try{e[fO]=void 0;var a=!0}catch(die){}var n=gO.call(e);return a&&(t?e[fO]=r:delete e[fO]),n},vO=Object.prototype.toString;var bO=yO,jO=function(e){return vO.call(e)},kO=mO?mO.toStringTag:void 0;var wO=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":kO&&kO in Object(e)?bO(e):jO(e)};var NO=function(e){return null!=e&&"object"==typeof e},_O=wO,SO=NO;var CO=function(e){return"symbol"==typeof e||SO(e)&&"[object Symbol]"==_O(e)},TO=lO,OO=CO,PO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,AO=/^\w*$/;var EO=function(e,t){if(TO(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!OO(e))||(AO.test(e)||!PO.test(e)||null!=t&&e in Object(t))};var DO=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const MO=Le(DO);var zO=wO,RO=DO;var IO=function(e){if(!RO(e))return!1;var t=zO(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const FO=Le(IO);var BO,LO=uO["__core-js_shared__"],qO=(BO=/[^.]+$/.exec(LO&&LO.keys&&LO.keys.IE_PROTO||""))?"Symbol(src)_1."+BO:"";var $O=function(e){return!!qO&&qO in e},KO=Function.prototype.toString;var UO=function(e){if(null!=e){try{return KO.call(e)}catch(die){}try{return e+""}catch(die){}}return""},HO=IO,YO=$O,VO=DO,GO=UO,WO=/^\[object .+?Constructor\]$/,QO=Function.prototype,XO=Object.prototype,ZO=QO.toString,JO=XO.hasOwnProperty,eP=RegExp("^"+ZO.call(JO).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var tP=function(e){return!(!VO(e)||YO(e))&&(HO(e)?eP:WO).test(GO(e))},rP=function(e,t){return null==e?void 0:e[t]};var aP=function(e,t){var r=rP(e,t);return tP(r)?r:void 0},nP=aP(Object,"create"),sP=nP;var iP=function(){this.__data__=sP?sP(null):{},this.size=0};var lP=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},oP=nP,cP=Object.prototype.hasOwnProperty;var dP=function(e){var t=this.__data__;if(oP){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return cP.call(t,e)?t[e]:void 0},uP=nP,mP=Object.prototype.hasOwnProperty;var hP=nP;var pP=iP,xP=lP,gP=dP,fP=function(e){var t=this.__data__;return uP?void 0!==t[e]:mP.call(t,e)},yP=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=hP&&void 0===t?"__lodash_hash_undefined__":t,this};function vP(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}vP.prototype.clear=pP,vP.prototype.delete=xP,vP.prototype.get=gP,vP.prototype.has=fP,vP.prototype.set=yP;var bP=vP;var jP=function(){this.__data__=[],this.size=0};var kP=function(e,t){return e===t||e!=e&&t!=t},wP=kP;var NP=function(e,t){for(var r=e.length;r--;)if(wP(e[r][0],t))return r;return-1},_P=NP,SP=Array.prototype.splice;var CP=NP;var TP=NP;var OP=NP;var PP=jP,AP=function(e){var t=this.__data__,r=_P(t,e);return!(r<0)&&(r==t.length-1?t.pop():SP.call(t,r,1),--this.size,!0)},EP=function(e){var t=this.__data__,r=CP(t,e);return r<0?void 0:t[r][1]},DP=function(e){return TP(this.__data__,e)>-1},MP=function(e,t){var r=this.__data__,a=OP(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this};function zP(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}zP.prototype.clear=PP,zP.prototype.delete=AP,zP.prototype.get=EP,zP.prototype.has=DP,zP.prototype.set=MP;var RP=zP,IP=aP(uO,"Map"),FP=bP,BP=RP,LP=IP;var qP=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var $P=function(e,t){var r=e.__data__;return qP(t)?r["string"==typeof t?"string":"hash"]:r.map},KP=$P;var UP=$P;var HP=$P;var YP=$P;var VP=function(){this.size=0,this.__data__={hash:new FP,map:new(LP||BP),string:new FP}},GP=function(e){var t=KP(this,e).delete(e);return this.size-=t?1:0,t},WP=function(e){return UP(this,e).get(e)},QP=function(e){return HP(this,e).has(e)},XP=function(e,t){var r=YP(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this};function ZP(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}ZP.prototype.clear=VP,ZP.prototype.delete=GP,ZP.prototype.get=WP,ZP.prototype.has=QP,ZP.prototype.set=XP;var JP=ZP,eA=JP;function tA(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],s=r.cache;if(s.has(n))return s.get(n);var i=e.apply(this,a);return r.cache=s.set(n,i)||s,i};return r.cache=new(tA.Cache||eA),r}tA.Cache=eA;var rA=tA;const aA=Le(rA);var nA=rA;var sA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,iA=/\\(\\)?/g,lA=function(e){var t=nA(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(sA,(function(e,r,a,n){t.push(a?n.replace(iA,"$1"):r||e)})),t}));var oA=function(e,t){for(var r=-1,a=null==e?0:e.length,n=Array(a);++r<a;)n[r]=t(e[r],r,e);return n},cA=oA,dA=lO,uA=CO,mA=mO?mO.prototype:void 0,hA=mA?mA.toString:void 0;var pA=function e(t){if("string"==typeof t)return t;if(dA(t))return cA(t,e)+"";if(uA(t))return hA?hA.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},xA=pA;var gA=function(e){return null==e?"":xA(e)},fA=lO,yA=EO,vA=lA,bA=gA;var jA=function(e,t){return fA(e)?e:yA(e,t)?[e]:vA(bA(e))},kA=CO;var wA=function(e){if("string"==typeof e||kA(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},NA=jA,_A=wA;var SA=function(e,t){for(var r=0,a=(t=NA(t,e)).length;null!=e&&r<a;)e=e[_A(t[r++])];return r&&r==a?e:void 0},CA=SA;var TA=function(e,t,r){var a=null==e?void 0:CA(e,t);return void 0===a?r:a};const OA=Le(TA);const PA=Le((function(e){return null==e}));var AA=wO,EA=lO,DA=NO;const MA=Le((function(e){return"string"==typeof e||!EA(e)&&DA(e)&&"[object String]"==AA(e)}));var zA,RA={exports:{}},IA={},FA=Symbol.for("react.element"),BA=Symbol.for("react.portal"),LA=Symbol.for("react.fragment"),qA=Symbol.for("react.strict_mode"),$A=Symbol.for("react.profiler"),KA=Symbol.for("react.provider"),UA=Symbol.for("react.context"),HA=Symbol.for("react.server_context"),YA=Symbol.for("react.forward_ref"),VA=Symbol.for("react.suspense"),GA=Symbol.for("react.suspense_list"),WA=Symbol.for("react.memo"),QA=Symbol.for("react.lazy"),XA=Symbol.for("react.offscreen");function ZA(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case FA:switch(e=e.type){case LA:case $A:case qA:case VA:case GA:return e;default:switch(e=e&&e.$$typeof){case HA:case UA:case YA:case QA:case WA:case KA:return e;default:return t}}case BA:return t}}}zA=Symbol.for("react.module.reference"),IA.ContextConsumer=UA,IA.ContextProvider=KA,IA.Element=FA,IA.ForwardRef=YA,IA.Fragment=LA,IA.Lazy=QA,IA.Memo=WA,IA.Portal=BA,IA.Profiler=$A,IA.StrictMode=qA,IA.Suspense=VA,IA.SuspenseList=GA,IA.isAsyncMode=function(){return!1},IA.isConcurrentMode=function(){return!1},IA.isContextConsumer=function(e){return ZA(e)===UA},IA.isContextProvider=function(e){return ZA(e)===KA},IA.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===FA},IA.isForwardRef=function(e){return ZA(e)===YA},IA.isFragment=function(e){return ZA(e)===LA},IA.isLazy=function(e){return ZA(e)===QA},IA.isMemo=function(e){return ZA(e)===WA},IA.isPortal=function(e){return ZA(e)===BA},IA.isProfiler=function(e){return ZA(e)===$A},IA.isStrictMode=function(e){return ZA(e)===qA},IA.isSuspense=function(e){return ZA(e)===VA},IA.isSuspenseList=function(e){return ZA(e)===GA},IA.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===LA||e===$A||e===qA||e===VA||e===GA||e===XA||"object"==typeof e&&null!==e&&(e.$$typeof===QA||e.$$typeof===WA||e.$$typeof===KA||e.$$typeof===UA||e.$$typeof===YA||e.$$typeof===zA||void 0!==e.getModuleId)},IA.typeOf=ZA,RA.exports=IA;var JA=RA.exports,eE=wO,tE=NO;var rE=function(e){return"number"==typeof e||tE(e)&&"[object Number]"==eE(e)};const aE=Le(rE);var nE=rE;const sE=Le((function(e){return nE(e)&&e!=+e}));var iE=function(e){return 0===e?0:e>0?1:-1},lE=function(e){return MA(e)&&e.indexOf("%")===e.length-1},oE=function(e){return aE(e)&&!sE(e)},cE=function(e){return oE(e)||MA(e)},dE=0,uE=function(e){var t=++dE;return"".concat(e||"").concat(t)},mE=function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!oE(e)&&!MA(e))return a;if(lE(e)){var s=e.indexOf("%");r=t*parseFloat(e.slice(0,s))/100}else r=+e;return sE(r)&&(r=a),n&&r>t&&(r=t),r},hE=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},pE=function(e,t){return oE(e)&&oE(t)?function(r){return e+r*(t-e)}:function(){return t}};function xE(e,t,r){return e&&e.length?e.find((function(e){return e&&("function"==typeof t?t(e):OA(e,t))===r})):null}var gE=function(e,t){return oE(e)&&oE(t)?e-t:MA(e)&&MA(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function fE(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function yE(e){return(yE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vE=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],bE=["points","pathLength"],jE={svg:["viewBox","children"],polygon:bE,polyline:bE},kE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],wE=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(ze.isValidElement(e)&&(r=e.props),!MO(r))return null;var a={};return Object.keys(r).forEach((function(e){kE.includes(e)&&(a[e]=t||function(t){return r[e](r,t)})})),a},NE=function(e,t,r){if(!MO(e)||"object"!==yE(e))return null;var a=null;return Object.keys(e).forEach((function(n){var s=e[n];kE.includes(n)&&"function"==typeof s&&(a||(a={}),a[n]=function(e,t,r){return function(a){return e(t,r,a),null}}(s,t,r))})),a},_E=["children"],SE=["children"];function CE(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function TE(e){return(TE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var OE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},PE=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},AE=null,EE=null,DE=function e(t){if(t===AE&&Array.isArray(EE))return EE;var r=[];return ze.Children.forEach(t,(function(t){PA(t)||(JA.isFragment(t)?r=r.concat(e(t.props.children)):r.push(t))})),EE=r,AE=t,r};function ME(e,t){var r=[],a=[];return a=Array.isArray(t)?t.map((function(e){return PE(e)})):[PE(t)],DE(e).forEach((function(e){var t=OA(e,"type.displayName")||OA(e,"type.name");-1!==a.indexOf(t)&&r.push(e)})),r}function zE(e,t){var r=ME(e,t);return r&&r[0]}var RE=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,a=t.height;return!(!oE(r)||r<=0||!oE(a)||a<=0)},IE=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],FE=function(e){return e&&"object"===TE(e)&&"clipDot"in e},BE=function(e,t,r){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var a=e;if(ze.isValidElement(e)&&(a=e.props),!MO(a))return null;var n={};return Object.keys(a).forEach((function(e){var s;(function(e,t,r,a){var n,s=null!==(n=null==jE?void 0:jE[a])&&void 0!==n?n:[];return t.startsWith("data-")||!FO(e)&&(a&&s.includes(t)||vE.includes(t))||r&&kE.includes(t)})(null===(s=a)||void 0===s?void 0:s[e],e,t,r)&&(n[e]=a[e])})),n},LE=function e(t,r){if(t===r)return!0;var a=ze.Children.count(t);if(a!==ze.Children.count(r))return!1;if(0===a)return!0;if(1===a)return qE(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var n=0;n<a;n++){var s=t[n],i=r[n];if(Array.isArray(s)||Array.isArray(i)){if(!e(s,i))return!1}else if(!qE(s,i))return!1}return!0},qE=function(e,t){if(PA(e)&&PA(t))return!0;if(!PA(e)&&!PA(t)){var r=e.props||{},a=r.children,n=CE(r,_E),s=t.props||{},i=s.children,l=CE(s,SE);return a&&i?fE(n,l)&&LE(a,i):!a&&!i&&fE(n,l)}return!1},$E=function(e,t){var r=[],a={};return DE(e).forEach((function(e,n){if(function(e){return e&&e.type&&MA(e.type)&&IE.indexOf(e.type)>=0}(e))r.push(e);else if(e){var s=PE(e.type),i=t[s]||{},l=i.handler,o=i.once;if(l&&(!o||!a[s])){var c=l(e,s,n);r.push(c),a[s]=!0}}})),r},KE=["children","width","height","viewBox","className","style","title","desc"];function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},UE.apply(this,arguments)}function HE(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function YE(e){var t=e.children,r=e.width,a=e.height,n=e.viewBox,s=e.className,i=e.style,l=e.title,o=e.desc,c=HE(e,KE),d=n||{width:r,height:a,x:0,y:0},u=Ht("recharts-surface",s);return Re.createElement("svg",UE({},BE(c,!0,"svg"),{className:u,width:r,height:a,style:i,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Re.createElement("title",null,l),Re.createElement("desc",null,o),t)}var VE=["children","className"];function GE(){return GE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},GE.apply(this,arguments)}function WE(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var QE=Re.forwardRef((function(e,t){var r=e.children,a=e.className,n=WE(e,VE),s=Ht("recharts-layer",a);return Re.createElement("g",GE({className:s},BE(n,!0),{ref:t}),r)})),XE=function(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n]};var ZE=function(e,t,r){var a=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++a<n;)s[a]=e[a+t];return s};var JE=function(e,t,r){var a=e.length;return r=void 0===r?a:r,!t&&r>=a?e:ZE(e,t,r)},eD=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var tD=function(e){return eD.test(e)};var rD=function(e){return e.split("")},aD="\\ud800-\\udfff",nD="["+aD+"]",sD="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",iD="\\ud83c[\\udffb-\\udfff]",lD="[^"+aD+"]",oD="(?:\\ud83c[\\udde6-\\uddff]){2}",cD="[\\ud800-\\udbff][\\udc00-\\udfff]",dD="(?:"+sD+"|"+iD+")"+"?",uD="[\\ufe0e\\ufe0f]?",mD=uD+dD+("(?:\\u200d(?:"+[lD,oD,cD].join("|")+")"+uD+dD+")*"),hD="(?:"+[lD+sD+"?",sD,oD,cD,nD].join("|")+")",pD=RegExp(iD+"(?="+iD+")|"+hD+mD,"g");var xD=rD,gD=tD,fD=function(e){return e.match(pD)||[]};var yD=JE,vD=tD,bD=function(e){return gD(e)?fD(e):xD(e)},jD=gA;const kD=Le(function(e){return function(t){t=jD(t);var r=vD(t)?bD(t):void 0,a=r?r[0]:t.charAt(0),n=r?yD(r,1).join(""):t.slice(1);return a[e]()+n}}("toUpperCase"));function wD(e){return function(){return e}}const ND=Math.cos,_D=Math.sin,SD=Math.sqrt,CD=Math.PI,TD=2*CD,OD=Math.PI,PD=2*OD,AD=1e-6,ED=PD-AD;function DD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class MD{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?DD:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return DD;const r=10**t;return function(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,a){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,t,r,a,n,s){this._append`C${+e},${+t},${+r},${+a},${this._x1=+n},${this._y1=+s}`}arcTo(e,t,r,a,n){if(e=+e,t=+t,r=+r,a=+a,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=this._x1,i=this._y1,l=r-e,o=a-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>AD)if(Math.abs(d*l-o*c)>AD&&n){let m=r-s,h=a-i,p=l*l+o*o,x=m*m+h*h,g=Math.sqrt(p),f=Math.sqrt(u),y=n*Math.tan((OD-Math.acos((p+u-x)/(2*g*f)))/2),v=y/f,b=y/g;Math.abs(v-1)>AD&&this._append`L${e+v*c},${t+v*d}`,this._append`A${n},${n},0,0,${+(d*m>c*h)},${this._x1=e+b*l},${this._y1=t+b*o}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,a,n,s){if(e=+e,t=+t,s=!!s,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=r*Math.cos(a),l=r*Math.sin(a),o=e+i,c=t+l,d=1^s,u=s?a-n:n-a;null===this._x1?this._append`M${o},${c}`:(Math.abs(this._x1-o)>AD||Math.abs(this._y1-c)>AD)&&this._append`L${o},${c}`,r&&(u<0&&(u=u%PD+PD),u>ED?this._append`A${r},${r},0,1,${d},${e-i},${t-l}A${r},${r},0,1,${d},${this._x1=o},${this._y1=c}`:u>AD&&this._append`A${r},${r},0,${+(u>=OD)},${d},${this._x1=e+r*Math.cos(n)},${this._y1=t+r*Math.sin(n)}`)}rect(e,t,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function zD(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new MD(t)}function RD(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function ID(e){this._context=e}function FD(e){return new ID(e)}function BD(e){return e[0]}function LD(e){return e[1]}function qD(e,t){var r=wD(!0),a=null,n=FD,s=null,i=zD(l);function l(l){var o,c,d,u=(l=RD(l)).length,m=!1;for(null==a&&(s=n(d=i())),o=0;o<=u;++o)!(o<u&&r(c=l[o],o,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+e(c,o,l),+t(c,o,l));if(d)return s=null,d+""||null}return e="function"==typeof e?e:void 0===e?BD:wD(e),t="function"==typeof t?t:void 0===t?LD:wD(t),l.x=function(t){return arguments.length?(e="function"==typeof t?t:wD(+t),l):e},l.y=function(e){return arguments.length?(t="function"==typeof e?e:wD(+e),l):t},l.defined=function(e){return arguments.length?(r="function"==typeof e?e:wD(!!e),l):r},l.curve=function(e){return arguments.length?(n=e,null!=a&&(s=n(a)),l):n},l.context=function(e){return arguments.length?(null==e?a=s=null:s=n(a=e),l):a},l}function $D(e,t,r){var a=null,n=wD(!0),s=null,i=FD,l=null,o=zD(c);function c(c){var d,u,m,h,p,x=(c=RD(c)).length,g=!1,f=new Array(x),y=new Array(x);for(null==s&&(l=i(p=o())),d=0;d<=x;++d){if(!(d<x&&n(h=c[d],d,c))===g)if(g=!g)u=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=d-1;m>=u;--m)l.point(f[m],y[m]);l.lineEnd(),l.areaEnd()}g&&(f[d]=+e(h,d,c),y[d]=+t(h,d,c),l.point(a?+a(h,d,c):f[d],r?+r(h,d,c):y[d]))}if(p)return l=null,p+""||null}function d(){return qD().defined(n).curve(i).context(s)}return e="function"==typeof e?e:void 0===e?BD:wD(+e),t="function"==typeof t?t:wD(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?LD:wD(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:wD(+t),a=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:wD(+t),c):e},c.x1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:wD(+e),c):a},c.y=function(e){return arguments.length?(t="function"==typeof e?e:wD(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:wD(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:wD(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(a).y(t)},c.defined=function(e){return arguments.length?(n="function"==typeof e?e:wD(!!e),c):n},c.curve=function(e){return arguments.length?(i=e,null!=s&&(l=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=l=null:l=i(s=e),c):s},c}ID.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class KD{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const UD={draw(e,t){const r=SD(t/CD);e.moveTo(r,0),e.arc(0,0,r,0,TD)}},HD={draw(e,t){const r=SD(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},YD=SD(1/3),VD=2*YD,GD={draw(e,t){const r=SD(t/VD),a=r*YD;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},WD={draw(e,t){const r=SD(t),a=-r/2;e.rect(a,a,r,r)}},QD=_D(CD/10)/_D(7*CD/10),XD=_D(TD/10)*QD,ZD=-ND(TD/10)*QD,JD={draw(e,t){const r=SD(.8908130915292852*t),a=XD*r,n=ZD*r;e.moveTo(0,-r),e.lineTo(a,n);for(let s=1;s<5;++s){const t=TD*s/5,i=ND(t),l=_D(t);e.lineTo(l*r,-i*r),e.lineTo(i*a-l*n,l*a+i*n)}e.closePath()}},eM=SD(3),tM={draw(e,t){const r=-SD(t/(3*eM));e.moveTo(0,2*r),e.lineTo(-eM*r,-r),e.lineTo(eM*r,-r),e.closePath()}},rM=-.5,aM=SD(3)/2,nM=1/SD(12),sM=3*(nM/2+1),iM={draw(e,t){const r=SD(t/sM),a=r/2,n=r*nM,s=a,i=r*nM+r,l=-s,o=i;e.moveTo(a,n),e.lineTo(s,i),e.lineTo(l,o),e.lineTo(rM*a-aM*n,aM*a+rM*n),e.lineTo(rM*s-aM*i,aM*s+rM*i),e.lineTo(rM*l-aM*o,aM*l+rM*o),e.lineTo(rM*a+aM*n,rM*n-aM*a),e.lineTo(rM*s+aM*i,rM*i-aM*s),e.lineTo(rM*l+aM*o,rM*o-aM*l),e.closePath()}};function lM(){}function oM(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function cM(e){this._context=e}function dM(e){this._context=e}function uM(e){this._context=e}function mM(e){this._context=e}function hM(e){return e<0?-1:1}function pM(e,t,r){var a=e._x1-e._x0,n=t-e._x1,s=(e._y1-e._y0)/(a||n<0&&-0),i=(r-e._y1)/(n||a<0&&-0),l=(s*n+i*a)/(a+n);return(hM(s)+hM(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(l))||0}function xM(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function gM(e,t,r){var a=e._x0,n=e._y0,s=e._x1,i=e._y1,l=(s-a)/3;e._context.bezierCurveTo(a+l,n+l*t,s-l,i-l*r,s,i)}function fM(e){this._context=e}function yM(e){this._context=new vM(e)}function vM(e){this._context=e}function bM(e){this._context=e}function jM(e){var t,r,a=e.length-1,n=new Array(a),s=new Array(a),i=new Array(a);for(n[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<a-1;++t)n[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(n[a-1]=2,s[a-1]=7,i[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)r=n[t]/s[t-1],s[t]-=r,i[t]-=r*i[t-1];for(n[a-1]=i[a-1]/s[a-1],t=a-2;t>=0;--t)n[t]=(i[t]-n[t+1])/s[t];for(s[a-1]=(e[a]+n[a-1])/2,t=0;t<a-1;++t)s[t]=2*e[t+1]-n[t+1];return[n,s]}function kM(e,t){this._context=e,this._t=t}function wM(e,t){if((n=e.length)>1)for(var r,a,n,s=1,i=e[t[0]],l=i.length;s<n;++s)for(a=i,i=e[t[s]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function NM(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function _M(e,t){return e[t]}function SM(e){const t=[];return t.key=e,t}function CM(e){return(CM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:oM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:oM(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},dM.prototype={areaStart:lM,areaEnd:lM,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:oM(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},uM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:oM(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},mM.prototype={areaStart:lM,areaEnd:lM,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},fM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gM(this,this._t0,xM(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,gM(this,xM(this,r=pM(this,e,t)),r);break;default:gM(this,this._t0,r=pM(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(yM.prototype=Object.create(fM.prototype)).point=function(e,t){fM.prototype.point.call(this,t,e)},vM.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,n,s){this._context.bezierCurveTo(t,e,a,r,s,n)}},bM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var a=jM(e),n=jM(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(a[0][s],n[0][s],a[1][s],n[1][s],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},kM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var TM=["type","size","sizeType"];function OM(){return OM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},OM.apply(this,arguments)}function PM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function AM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PM(Object(r),!0).forEach((function(t){EM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function EM(e,t,r){var a;return a=function(e,t){if("object"!=CM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=CM(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==CM(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DM(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var MM={symbolCircle:UD,symbolCross:HD,symbolDiamond:GD,symbolSquare:WD,symbolStar:JD,symbolTriangle:tM,symbolWye:iM},zM=Math.PI/180,RM=function(e){var t,r,a=e.type,n=void 0===a?"circle":a,s=e.size,i=void 0===s?64:s,l=e.sizeType,o=void 0===l?"area":l,c=AM(AM({},DM(e,TM)),{},{type:n,size:i,sizeType:o}),d=c.className,u=c.cx,m=c.cy,h=BE(c,!0);return u===+u&&m===+m&&i===+i?Re.createElement("path",OM({},h,{className:Ht("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(m,")"),d:(t=function(e){var t="symbol".concat(kD(e));return MM[t]||UD}(n),r=function(e,t){let r=null,a=zD(n);function n(){let n;if(r||(r=n=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),n)return r=null,n+""||null}return e="function"==typeof e?e:wD(e||UD),t="function"==typeof t?t:wD(void 0===t?64:+t),n.type=function(t){return arguments.length?(e="function"==typeof t?t:wD(t),n):e},n.size=function(e){return arguments.length?(t="function"==typeof e?e:wD(+e),n):t},n.context=function(e){return arguments.length?(r=null==e?null:e,n):r},n}().type(t).size(function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var a=18*zM;return 1.25*e*e*(Math.tan(a)-Math.tan(2*a)*Math.pow(Math.tan(a),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(i,o,n)),r())})):null};function IM(e){return(IM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FM(){return FM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},FM.apply(this,arguments)}function BM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function LM(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,YM(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qM(e,t,r){return t=KM(t),function(e,t){if(t&&("object"===IM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$M()?Reflect.construct(t,r||[],KM(e).constructor):t.apply(e,r))}function $M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($M=function(){return!!e})()}function KM(e){return(KM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UM(e,t){return(UM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HM(e,t,r){return(t=YM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YM(e){var t=function(e,t){if("object"!=IM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=IM(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==IM(t)?t:t+""}RM.registerSymbol=function(e,t){MM["symbol".concat(kD(e))]=t};var VM=32,GM=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qM(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UM(e,t)}(e,ze.PureComponent),LM(e,[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,r=16,a=VM/6,n=VM/3,s=e.inactive?t:e.color;if("plainline"===e.type)return Re.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:VM,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return Re.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(r,"h").concat(n,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*n,",").concat(r,"\n            H").concat(VM,"M").concat(2*n,",").concat(r,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(n,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return Re.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(VM,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Re.isValidElement(e.legendIcon)){var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BM(Object(r),!0).forEach((function(t){HM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);return delete i.legendIcon,Re.cloneElement(e.legendIcon,i)}return Re.createElement(RM,{fill:s,cx:r,cy:r,size:VM,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,r=t.payload,a=t.iconSize,n=t.layout,s=t.formatter,i=t.inactiveColor,l={x:0,y:0,width:VM,height:VM},o={display:"horizontal"===n?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((function(t,r){var n=t.formatter||s,d=Ht(HM(HM({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",t.inactive));if("none"===t.type)return null;var u=FO(t.value)?null:t.value;XE(!FO(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var m=t.inactive?i:t.color;return Re.createElement("li",FM({className:d,style:o,key:"legend-item-".concat(r)},NE(e.props,t,r)),Re.createElement(YE,{width:a,height:a,viewBox:l,style:c},e.renderIcon(t)),Re.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},n?n(u,t,r):u))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,r=e.layout,a=e.align;if(!t||!t.length)return null;var n={padding:0,margin:0,textAlign:"horizontal"===r?a:"left"};return Re.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}])}();HM(GM,"displayName","Legend"),HM(GM,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var WM=RP;var QM=RP,XM=IP,ZM=JP;var JM=RP,ez=function(){this.__data__=new WM,this.size=0},tz=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},rz=function(e){return this.__data__.get(e)},az=function(e){return this.__data__.has(e)},nz=function(e,t){var r=this.__data__;if(r instanceof QM){var a=r.__data__;if(!XM||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new ZM(a)}return r.set(e,t),this.size=r.size,this};function sz(e){var t=this.__data__=new JM(e);this.size=t.size}sz.prototype.clear=ez,sz.prototype.delete=tz,sz.prototype.get=rz,sz.prototype.has=az,sz.prototype.set=nz;var iz=sz;var lz=JP,oz=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},cz=function(e){return this.__data__.has(e)};function dz(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new lz;++t<r;)this.add(e[t])}dz.prototype.add=dz.prototype.push=oz,dz.prototype.has=cz;var uz=dz;var mz=function(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1};var hz=function(e,t){return e.has(t)},pz=uz,xz=mz,gz=hz;var fz=function(e,t,r,a,n,s){var i=1&r,l=e.length,o=t.length;if(l!=o&&!(i&&o>l))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var u=-1,m=!0,h=2&r?new pz:void 0;for(s.set(e,t),s.set(t,e);++u<l;){var p=e[u],x=t[u];if(a)var g=i?a(x,p,u,t,e,s):a(p,x,u,e,t,s);if(void 0!==g){if(g)continue;m=!1;break}if(h){if(!xz(t,(function(e,t){if(!gz(h,t)&&(p===e||n(p,e,r,a,s)))return h.push(t)}))){m=!1;break}}else if(p!==x&&!n(p,x,r,a,s)){m=!1;break}}return s.delete(e),s.delete(t),m};var yz=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},vz=uO.Uint8Array,bz=kP,jz=fz,kz=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,a){r[++t]=[a,e]})),r},wz=yz,Nz=mO?mO.prototype:void 0,_z=Nz?Nz.valueOf:void 0;var Sz=function(e,t,r,a,n,s,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new vz(e),new vz(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return bz(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=kz;case"[object Set]":var o=1&a;if(l||(l=wz),e.size!=t.size&&!o)return!1;var c=i.get(e);if(c)return c==t;a|=2,i.set(e,t);var d=jz(l(e),l(t),a,n,s,i);return i.delete(e),d;case"[object Symbol]":if(_z)return _z.call(e)==_z.call(t)}return!1};var Cz=function(e,t){for(var r=-1,a=t.length,n=e.length;++r<a;)e[n+r]=t[r];return e},Tz=Cz,Oz=lO;var Pz=function(e,t,r){var a=t(e);return Oz(e)?a:Tz(a,r(e))};var Az=function(e,t){for(var r=-1,a=null==e?0:e.length,n=0,s=[];++r<a;){var i=e[r];t(i,r,e)&&(s[n++]=i)}return s},Ez=function(){return[]},Dz=Object.prototype.propertyIsEnumerable,Mz=Object.getOwnPropertySymbols,zz=Mz?function(e){return null==e?[]:(e=Object(e),Az(Mz(e),(function(t){return Dz.call(e,t)})))}:Ez;var Rz=function(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a},Iz=wO,Fz=NO;var Bz,Lz,qz,$z,Kz,Uz,Hz,Yz,Vz=function(e){return Fz(e)&&"[object Arguments]"==Iz(e)},Gz=NO,Wz=Object.prototype,Qz=Wz.hasOwnProperty,Xz=Wz.propertyIsEnumerable,Zz=Vz(function(){return arguments}())?Vz:function(e){return Gz(e)&&Qz.call(e,"callee")&&!Xz.call(e,"callee")},Jz={exports:{}};Bz=Jz,qz=uO,$z=function(){return!1},Kz=(Lz=Jz.exports)&&!Lz.nodeType&&Lz,Uz=Kz&&Bz&&!Bz.nodeType&&Bz,Hz=Uz&&Uz.exports===Kz?qz.Buffer:void 0,Yz=(Hz?Hz.isBuffer:void 0)||$z,Bz.exports=Yz;var eR=Jz.exports,tR=/^(?:0|[1-9]\d*)$/;var rR=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&tR.test(e))&&e>-1&&e%1==0&&e<t};var aR=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},nR=wO,sR=aR,iR=NO,lR={};lR["[object Float32Array]"]=lR["[object Float64Array]"]=lR["[object Int8Array]"]=lR["[object Int16Array]"]=lR["[object Int32Array]"]=lR["[object Uint8Array]"]=lR["[object Uint8ClampedArray]"]=lR["[object Uint16Array]"]=lR["[object Uint32Array]"]=!0,lR["[object Arguments]"]=lR["[object Array]"]=lR["[object ArrayBuffer]"]=lR["[object Boolean]"]=lR["[object DataView]"]=lR["[object Date]"]=lR["[object Error]"]=lR["[object Function]"]=lR["[object Map]"]=lR["[object Number]"]=lR["[object Object]"]=lR["[object RegExp]"]=lR["[object Set]"]=lR["[object String]"]=lR["[object WeakMap]"]=!1;var oR=function(e){return iR(e)&&sR(e.length)&&!!lR[nR(e)]};var cR=function(e){return function(t){return e(t)}},dR={exports:{}};!function(e,t){var r=oO,a=t&&!t.nodeType&&t,n=a&&e&&!e.nodeType&&e,s=n&&n.exports===a&&r.process,i=function(){try{var e=n&&n.require&&n.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(die){}}();e.exports=i}(dR,dR.exports);var uR=dR.exports,mR=oR,hR=cR,pR=uR&&uR.isTypedArray,xR=pR?hR(pR):mR,gR=Rz,fR=Zz,yR=lO,vR=eR,bR=rR,jR=xR,kR=Object.prototype.hasOwnProperty;var wR=function(e,t){var r=yR(e),a=!r&&fR(e),n=!r&&!a&&vR(e),s=!r&&!a&&!n&&jR(e),i=r||a||n||s,l=i?gR(e.length,String):[],o=l.length;for(var c in e)!t&&!kR.call(e,c)||i&&("length"==c||n&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bR(c,o))||l.push(c);return l},NR=Object.prototype;var _R=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||NR)};var SR=function(e,t){return function(r){return e(t(r))}},CR=SR(Object.keys,Object),TR=_R,OR=CR,PR=Object.prototype.hasOwnProperty;var AR=IO,ER=aR;var DR=function(e){return null!=e&&ER(e.length)&&!AR(e)},MR=wR,zR=function(e){if(!TR(e))return OR(e);var t=[];for(var r in Object(e))PR.call(e,r)&&"constructor"!=r&&t.push(r);return t},RR=DR;var IR=function(e){return RR(e)?MR(e):zR(e)},FR=Pz,BR=zz,LR=IR;var qR=function(e){return FR(e,LR,BR)},$R=Object.prototype.hasOwnProperty;var KR=function(e,t,r,a,n,s){var i=1&r,l=qR(e),o=l.length;if(o!=qR(t).length&&!i)return!1;for(var c=o;c--;){var d=l[c];if(!(i?d in t:$R.call(t,d)))return!1}var u=s.get(e),m=s.get(t);if(u&&m)return u==t&&m==e;var h=!0;s.set(e,t),s.set(t,e);for(var p=i;++c<o;){var x=e[d=l[c]],g=t[d];if(a)var f=i?a(g,x,d,t,e,s):a(x,g,d,e,t,s);if(!(void 0===f?x===g||n(x,g,r,a,s):f)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(h=!1)}return s.delete(e),s.delete(t),h},UR=aP(uO,"DataView"),HR=aP(uO,"Promise"),YR=aP(uO,"Set"),VR=UR,GR=IP,WR=HR,QR=YR,XR=aP(uO,"WeakMap"),ZR=wO,JR=UO,eI="[object Map]",tI="[object Promise]",rI="[object Set]",aI="[object WeakMap]",nI="[object DataView]",sI=JR(VR),iI=JR(GR),lI=JR(WR),oI=JR(QR),cI=JR(XR),dI=ZR;(VR&&dI(new VR(new ArrayBuffer(1)))!=nI||GR&&dI(new GR)!=eI||WR&&dI(WR.resolve())!=tI||QR&&dI(new QR)!=rI||XR&&dI(new XR)!=aI)&&(dI=function(e){var t=ZR(e),r="[object Object]"==t?e.constructor:void 0,a=r?JR(r):"";if(a)switch(a){case sI:return nI;case iI:return eI;case lI:return tI;case oI:return rI;case cI:return aI}return t});var uI=iz,mI=fz,hI=Sz,pI=KR,xI=dI,gI=lO,fI=eR,yI=xR,vI="[object Arguments]",bI="[object Array]",jI="[object Object]",kI=Object.prototype.hasOwnProperty;var wI=function(e,t,r,a,n,s){var i=gI(e),l=gI(t),o=i?bI:xI(e),c=l?bI:xI(t),d=(o=o==vI?jI:o)==jI,u=(c=c==vI?jI:c)==jI,m=o==c;if(m&&fI(e)){if(!fI(t))return!1;i=!0,d=!1}if(m&&!d)return s||(s=new uI),i||yI(e)?mI(e,t,r,a,n,s):hI(e,t,o,r,a,n,s);if(!(1&r)){var h=d&&kI.call(e,"__wrapped__"),p=u&&kI.call(t,"__wrapped__");if(h||p){var x=h?e.value():e,g=p?t.value():t;return s||(s=new uI),n(x,g,r,a,s)}}return!!m&&(s||(s=new uI),pI(e,t,r,a,n,s))},NI=NO;var _I=function e(t,r,a,n,s){return t===r||(null==t||null==r||!NI(t)&&!NI(r)?t!=t&&r!=r:wI(t,r,a,n,e,s))},SI=iz,CI=_I;var TI=DO;var OI=function(e){return e==e&&!TI(e)},PI=OI,AI=IR;var EI=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}},DI=function(e,t,r,a){var n=r.length,s=n,i=!a;if(null==e)return!s;for(e=Object(e);n--;){var l=r[n];if(i&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++n<s;){var o=(l=r[n])[0],c=e[o],d=l[1];if(i&&l[2]){if(void 0===c&&!(o in e))return!1}else{var u=new SI;if(a)var m=a(c,d,o,e,t,u);if(!(void 0===m?CI(d,c,3,a,u):m))return!1}}return!0},MI=function(e){for(var t=AI(e),r=t.length;r--;){var a=t[r],n=e[a];t[r]=[a,n,PI(n)]}return t},zI=EI;var RI=jA,II=Zz,FI=lO,BI=rR,LI=aR,qI=wA;var $I=function(e,t){return null!=e&&t in Object(e)},KI=function(e,t,r){for(var a=-1,n=(t=RI(t,e)).length,s=!1;++a<n;){var i=qI(t[a]);if(!(s=null!=e&&r(e,i)))break;e=e[i]}return s||++a!=n?s:!!(n=null==e?0:e.length)&&LI(n)&&BI(i,n)&&(FI(e)||II(e))};var UI=_I,HI=TA,YI=function(e,t){return null!=e&&KI(e,t,$I)},VI=EO,GI=OI,WI=EI,QI=wA;var XI=function(e){return e};var ZI=SA;var JI=function(e){return function(t){return null==t?void 0:t[e]}},eF=function(e){return function(t){return ZI(t,e)}},tF=EO,rF=wA;var aF=function(e){var t=MI(e);return 1==t.length&&t[0][2]?zI(t[0][0],t[0][1]):function(r){return r===e||DI(r,e,t)}},nF=function(e,t){return VI(e)&&GI(t)?WI(QI(e),t):function(r){var a=HI(r,e);return void 0===a&&a===t?YI(r,e):UI(t,a,3)}},sF=XI,iF=lO,lF=function(e){return tF(e)?JI(rF(e)):eF(e)};var oF=function(e){return"function"==typeof e?e:null==e?sF:"object"==typeof e?iF(e)?nF(e[0],e[1]):aF(e):lF(e)};var cF=function(e,t,r,a){for(var n=e.length,s=r+(a?1:-1);a?s--:++s<n;)if(t(e[s],s,e))return s;return-1};var dF=cF,uF=function(e){return e!=e},mF=function(e,t,r){for(var a=r-1,n=e.length;++a<n;)if(e[a]===t)return a;return-1};var hF=function(e,t,r){return t==t?mF(e,t,r):dF(e,uF,r)};var pF=function(e,t){return!!(null==e?0:e.length)&&hF(e,t,0)>-1};var xF=function(e,t,r){for(var a=-1,n=null==e?0:e.length;++a<n;)if(r(t,e[a]))return!0;return!1};var gF=YR,fF=function(){},yF=gF&&1/yz(new gF([,-0]))[1]==1/0?function(e){return new gF(e)}:fF,vF=uz,bF=pF,jF=xF,kF=hz,wF=yF,NF=yz;var _F=oF,SF=function(e,t,r){var a=-1,n=bF,s=e.length,i=!0,l=[],o=l;if(r)i=!1,n=jF;else if(s>=200){var c=t?null:wF(e);if(c)return NF(c);i=!1,n=kF,o=new vF}else o=t?[]:l;e:for(;++a<s;){var d=e[a],u=t?t(d):d;if(d=r||0!==d?d:0,i&&u==u){for(var m=o.length;m--;)if(o[m]===u)continue e;t&&o.push(u),l.push(d)}else n(o,u,r)||(o!==l&&o.push(u),l.push(d))}return l};const CF=Le((function(e,t){return e&&e.length?SF(e,_F(t)):[]}));function TF(e,t,r){return!0===t?CF(e,r):FO(t)?CF(e,t):e}function OF(e){return(OF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var PF=["ref"];function AF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function EF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AF(Object(r),!0).forEach((function(t){FF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function DF(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,BF(a.key),a)}}function MF(e,t,r){return t=RF(t),function(e,t){if(t&&("object"===OF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zF()?Reflect.construct(t,r||[],RF(e).constructor):t.apply(e,r))}function zF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zF=function(){return!!e})()}function RF(e){return(RF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IF(e,t){return(IF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function FF(e,t,r){return(t=BF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BF(e){var t=function(e,t){if("object"!=OF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=OF(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OF(t)?t:t+""}function LF(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qF(e){return e.value}var $F=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return FF(t=MF(this,e,[].concat(a)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IF(e,t)}(e,ze.PureComponent),t=e,a=[{key:"getWithHeight",value:function(e,t){var r=EF(EF({},this.defaultProps),e.props).layout;return"vertical"===r&&oE(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}],(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?EF({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,a=this.props,n=a.layout,s=a.align,i=a.verticalAlign,l=a.margin,o=a.chartWidth,c=a.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===s&&"vertical"===n?{left:((o||0)-this.getBBoxSnapshot().width)/2}:"right"===s?{right:l&&l.right||0}:{left:l&&l.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===i?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===i?{bottom:l&&l.bottom||0}:{top:l&&l.top||0}),EF(EF({},t),r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.content,a=t.width,n=t.height,s=t.wrapperStyle,i=t.payloadUniqBy,l=t.payload,o=EF(EF({position:"absolute",width:a||"auto",height:n||"auto"},this.getDefaultPosition(s)),s);return Re.createElement("div",{className:"recharts-legend-wrapper",style:o,ref:function(t){e.wrapperNode=t}},function(e,t){if(Re.isValidElement(e))return Re.cloneElement(e,t);if("function"==typeof e)return Re.createElement(e,t);t.ref;var r=LF(t,PF);return Re.createElement(GM,r)}(r,EF(EF({},this.props),{},{payload:TF(l,i,qF)})))}}])&&DF(t.prototype,r),a&&DF(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();FF($F,"displayName","Legend"),FF($F,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var KF=Zz,UF=lO,HF=mO?mO.isConcatSpreadable:void 0;var YF=Cz,VF=function(e){return UF(e)||KF(e)||!!(HF&&e&&e[HF])};var GF=function e(t,r,a,n,s){var i=-1,l=t.length;for(a||(a=VF),s||(s=[]);++i<l;){var o=t[i];r>0&&a(o)?r>1?e(o,r-1,a,n,s):YF(s,o):n||(s[s.length]=o)}return s};var WF=function(e){return function(t,r,a){for(var n=-1,s=Object(t),i=a(t),l=i.length;l--;){var o=i[e?l:++n];if(!1===r(s[o],o,s))break}return t}}(),QF=IR;var XF=function(e,t){return e&&WF(e,t,QF)},ZF=DR;var JF=function(e,t){return function(r,a){if(null==r)return r;if(!ZF(r))return e(r,a);for(var n=r.length,s=t?n:-1,i=Object(r);(t?s--:++s<n)&&!1!==a(i[s],s,i););return r}}(XF),eB=JF,tB=DR;var rB=function(e,t){var r=-1,a=tB(e)?Array(e.length):[];return eB(e,(function(e,n,s){a[++r]=t(e,n,s)})),a};var aB=CO;var nB=function(e,t){if(e!==t){var r=void 0!==e,a=null===e,n=e==e,s=aB(e),i=void 0!==t,l=null===t,o=t==t,c=aB(t);if(!l&&!c&&!s&&e>t||s&&i&&o&&!l&&!c||a&&i&&o||!r&&o||!n)return 1;if(!a&&!s&&!c&&e<t||c&&r&&n&&!a&&!s||l&&r&&n||!i&&n||!o)return-1}return 0};var sB=oA,iB=SA,lB=oF,oB=rB,cB=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},dB=cR,uB=function(e,t,r){for(var a=-1,n=e.criteria,s=t.criteria,i=n.length,l=r.length;++a<i;){var o=nB(n[a],s[a]);if(o)return a>=l?o:o*("desc"==r[a]?-1:1)}return e.index-t.index},mB=XI,hB=lO;var pB=function(e,t,r){t=t.length?sB(t,(function(e){return hB(e)?function(t){return iB(t,1===e.length?e[0]:e)}:e})):[mB];var a=-1;t=sB(t,dB(lB));var n=oB(e,(function(e,r,n){return{criteria:sB(t,(function(t){return t(e)})),index:++a,value:e}}));return cB(n,(function(e,t){return uB(e,t,r)}))};var xB=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},gB=Math.max;var fB=function(e,t,r){return t=gB(void 0===t?e.length-1:t,0),function(){for(var a=arguments,n=-1,s=gB(a.length-t,0),i=Array(s);++n<s;)i[n]=a[t+n];n=-1;for(var l=Array(t+1);++n<t;)l[n]=a[n];return l[t]=r(i),xB(e,this,l)}};var yB=function(e){return function(){return e}},vB=aP,bB=function(){try{var e=vB(Object,"defineProperty");return e({},"",{}),e}catch(die){}}(),jB=yB,kB=bB,wB=kB?function(e,t){return kB(e,"toString",{configurable:!0,enumerable:!1,value:jB(t),writable:!0})}:XI,NB=Date.now;var _B=function(e){var t=0,r=0;return function(){var a=NB(),n=16-(a-r);if(r=a,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(wB),SB=XI,CB=fB,TB=_B;var OB=kP,PB=DR,AB=rR,EB=DO;var DB=function(e,t,r){if(!EB(r))return!1;var a=typeof t;return!!("number"==a?PB(r)&&AB(t,r.length):"string"==a&&t in r)&&OB(r[t],e)},MB=GF,zB=pB,RB=DB;const IB=Le(function(e,t){return TB(CB(e,t,SB),e+"")}((function(e,t){if(null==e)return[];var r=t.length;return r>1&&RB(e,t[0],t[1])?t=[]:r>2&&RB(t[0],t[1],t[2])&&(t=[t[0]]),zB(e,MB(t,1),[])})));function FB(e){return(FB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BB(){return BB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},BB.apply(this,arguments)}function LB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function $B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function KB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$B(Object(r),!0).forEach((function(t){UB(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function UB(e,t,r){var a;return a=function(e,t){if("object"!=FB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=FB(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==FB(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HB(e){return Array.isArray(e)&&cE(e[0])&&cE(e[1])?e.join(" ~ "):e}var YB=function(e){var t=e.separator,r=void 0===t?" : ":t,a=e.contentStyle,n=void 0===a?{}:a,s=e.itemStyle,i=void 0===s?{}:s,l=e.labelStyle,o=void 0===l?{}:l,c=e.payload,d=e.formatter,u=e.itemSorter,m=e.wrapperClassName,h=e.labelClassName,p=e.label,x=e.labelFormatter,g=e.accessibilityLayer,f=void 0!==g&&g,y=KB({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),v=KB({margin:0},o),b=!PA(p),j=b?p:"",k=Ht("recharts-default-tooltip",m),w=Ht("recharts-tooltip-label",h);b&&x&&null!=c&&(j=x(p,c));var N=f?{role:"status","aria-live":"assertive"}:{};return Re.createElement("div",BB({className:k,style:y},N),Re.createElement("p",{className:w,style:v},Re.isValidElement(j)?j:"".concat(j)),function(){if(c&&c.length){var e=(u?IB(c,u):c).map((function(e,t){if("none"===e.type)return null;var a=KB({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i),n=e.formatter||d||HB,s=e.value,l=e.name,o=s,u=l;if(n&&null!=o&&null!=u){var m=n(s,l,e,t,c);if(Array.isArray(m)){var h=LB(m,2);o=h[0],u=h[1]}else o=m}return Re.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:a},cE(u)?Re.createElement("span",{className:"recharts-tooltip-item-name"},u):null,cE(u)?Re.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Re.createElement("span",{className:"recharts-tooltip-item-value"},o),Re.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return Re.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function VB(e){return(VB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GB(e,t,r){var a;return a=function(e,t){if("object"!=VB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=VB(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==VB(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var WB="recharts-tooltip-wrapper",QB={visibility:"hidden"};function XB(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return Ht(WB,GB(GB(GB(GB({},"".concat(WB,"-right"),oE(r)&&t&&oE(t.x)&&r>=t.x),"".concat(WB,"-left"),oE(r)&&t&&oE(t.x)&&r<t.x),"".concat(WB,"-bottom"),oE(a)&&t&&oE(t.y)&&a>=t.y),"".concat(WB,"-top"),oE(a)&&t&&oE(t.y)&&a<t.y))}function ZB(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,l=e.tooltipDimension,o=e.viewBox,c=e.viewBoxDimension;if(s&&oE(s[a]))return s[a];var d=r[a]-l-n,u=r[a]+n;return t[a]?i[a]?d:u:i[a]?d<o[a]?Math.max(u,o[a]):Math.max(d,o[a]):u+l>o[a]+c?Math.max(d,o[a]):Math.max(u,o[a])}function JB(e){return(JB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function tL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eL(Object(r),!0).forEach((function(t){lL(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rL(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,oL(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aL(e,t,r){return t=sL(t),function(e,t){if(t&&("object"===JB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nL()?Reflect.construct(t,r||[],sL(e).constructor):t.apply(e,r))}function nL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nL=function(){return!!e})()}function sL(e){return(sL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iL(e,t){return(iL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lL(e,t,r){return(t=oL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oL(e){var t=function(e,t){if("object"!=JB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=JB(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JB(t)?t:t+""}var cL=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return lL(t=aL(this,e,[].concat(a)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),lL(t,"handleKeyDown",(function(e){var r,a,n,s;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(r=null===(a=t.props.coordinate)||void 0===a?void 0:a.x)&&void 0!==r?r:0,y:null!==(n=null===(s=t.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==n?n:0}})})),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iL(e,t)}(e,ze.PureComponent),rL(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,r=t.active,a=t.allowEscapeViewBox,n=t.animationDuration,s=t.animationEasing,i=t.children,l=t.coordinate,o=t.hasPayload,c=t.isAnimationActive,d=t.offset,u=t.position,m=t.reverseDirection,h=t.useTranslate3d,p=t.viewBox,x=t.wrapperStyle,g=function(e){var t,r,a=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,i=e.position,l=e.reverseDirection,o=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:o.height>0&&o.width>0&&n?function(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:t=ZB({allowEscapeViewBox:a,coordinate:n,key:"x",offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),translateY:r=ZB({allowEscapeViewBox:a,coordinate:n,key:"y",offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):QB,cssClasses:XB({translateX:t,translateY:r,coordinate:n})}}({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:d,position:u,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:h,viewBox:p}),f=g.cssClasses,y=g.cssProperties,v=tL(tL({transition:c&&r?"transform ".concat(n,"ms ").concat(s):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&o?"visible":"hidden",position:"absolute",top:0,left:0},x);return Re.createElement("div",{tabIndex:-1,className:f,style:v,ref:function(t){e.wrapperNode=t}},i)}}])}(),dL={isSsr:!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return dL[e]},set:function(e,t){if("string"==typeof e)dL[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach((function(t){dL[t]=e[t]}))}}};function uL(e){return(uL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function hL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mL(Object(r),!0).forEach((function(t){vL(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mL(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pL(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bL(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xL(e,t,r){return t=fL(t),function(e,t){if(t&&("object"===uL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gL()?Reflect.construct(t,r||[],fL(e).constructor):t.apply(e,r))}function gL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gL=function(){return!!e})()}function fL(e){return(fL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yL(e,t){return(yL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vL(e,t,r){return(t=bL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bL(e){var t=function(e,t){if("object"!=uL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=uL(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uL(t)?t:t+""}function jL(e){return e.dataKey}var kL=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xL(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yL(e,t)}(e,ze.PureComponent),pL(e,[{key:"render",value:function(){var e=this,t=this.props,r=t.active,a=t.allowEscapeViewBox,n=t.animationDuration,s=t.animationEasing,i=t.content,l=t.coordinate,o=t.filterNull,c=t.isAnimationActive,d=t.offset,u=t.payload,m=t.payloadUniqBy,h=t.position,p=t.reverseDirection,x=t.useTranslate3d,g=t.viewBox,f=t.wrapperStyle,y=null!=u?u:[];o&&y.length&&(y=TF(u.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),m,jL));var v=y.length>0;return Re.createElement(cL,{allowEscapeViewBox:a,animationDuration:n,animationEasing:s,isAnimationActive:c,active:r,coordinate:l,hasPayload:v,offset:d,position:h,reverseDirection:p,useTranslate3d:x,viewBox:g,wrapperStyle:f},function(e,t){return Re.isValidElement(e)?Re.cloneElement(e,t):"function"==typeof e?Re.createElement(e,t):Re.createElement(YB,t)}(i,hL(hL({},this.props),{},{payload:y})))}}])}();vL(kL,"displayName","Tooltip"),vL(kL,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!dL.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var wL=uO,NL=/\s/;var _L=function(e){for(var t=e.length;t--&&NL.test(e.charAt(t)););return t},SL=/^\s+/;var CL=function(e){return e?e.slice(0,_L(e)+1).replace(SL,""):e},TL=DO,OL=CO,PL=/^[-+]0x[0-9a-f]+$/i,AL=/^0b[01]+$/i,EL=/^0o[0-7]+$/i,DL=parseInt;var ML=function(e){if("number"==typeof e)return e;if(OL(e))return NaN;if(TL(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=TL(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=CL(e);var r=AL.test(e);return r||EL.test(e)?DL(e.slice(2),r?2:8):PL.test(e)?NaN:+e},zL=DO,RL=function(){return wL.Date.now()},IL=ML,FL=Math.max,BL=Math.min;var LL=function(e,t,r){var a,n,s,i,l,o,c=0,d=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var r=a,s=n;return a=n=void 0,c=t,i=e.apply(s,r)}function p(e){var r=e-o;return void 0===o||r>=t||r<0||u&&e-c>=s}function x(){var e=RL();if(p(e))return g(e);l=setTimeout(x,function(e){var r=t-(e-o);return u?BL(r,s-(e-c)):r}(e))}function g(e){return l=void 0,m&&a?h(e):(a=n=void 0,i)}function f(){var e=RL(),r=p(e);if(a=arguments,n=this,o=e,r){if(void 0===l)return function(e){return c=e,l=setTimeout(x,t),d?h(e):i}(o);if(u)return clearTimeout(l),l=setTimeout(x,t),h(o)}return void 0===l&&(l=setTimeout(x,t)),i}return t=IL(t)||0,zL(r)&&(d=!!r.leading,s=(u="maxWait"in r)?FL(IL(r.maxWait)||0,t):s,m="trailing"in r?!!r.trailing:m),f.cancel=function(){void 0!==l&&clearTimeout(l),c=0,a=o=n=l=void 0},f.flush=function(){return void 0===l?i:g(RL())},f},qL=LL,$L=DO;var KL=function(e,t,r){var a=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return $L(r)&&(a="leading"in r?!!r.leading:a,n="trailing"in r?!!r.trailing:n),qL(e,t,{leading:a,maxWait:t,trailing:n})};const UL=Le(KL);function HL(e){return(HL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function VL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YL(Object(r),!0).forEach((function(t){GL(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YL(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function GL(e,t,r){var a;return a=function(e,t){if("object"!=HL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=HL(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==HL(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return QL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var XL=ze.forwardRef((function(e,t){var r=e.aspect,a=e.initialDimension,n=void 0===a?{width:-1,height:-1}:a,s=e.width,i=void 0===s?"100%":s,l=e.height,o=void 0===l?"100%":l,c=e.minWidth,d=void 0===c?0:c,u=e.minHeight,m=e.maxHeight,h=e.children,p=e.debounce,x=void 0===p?0:p,g=e.id,f=e.className,y=e.onResize,v=e.style,b=void 0===v?{}:v,j=ze.useRef(null),k=ze.useRef();k.current=y,ze.useImperativeHandle(t,(function(){return Object.defineProperty(j.current,"current",{get:function(){return j.current},configurable:!0})}));var w=WL(ze.useState({containerWidth:n.width,containerHeight:n.height}),2),N=w[0],_=w[1],S=ze.useCallback((function(e,t){_((function(r){var a=Math.round(e),n=Math.round(t);return r.containerWidth===a&&r.containerHeight===n?r:{containerWidth:a,containerHeight:n}}))}),[]);ze.useEffect((function(){var e=function(e){var t,r=e[0].contentRect,a=r.width,n=r.height;S(a,n),null===(t=k.current)||void 0===t||t.call(k,a,n)};x>0&&(e=UL(e,x,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=j.current.getBoundingClientRect(),a=r.width,n=r.height;return S(a,n),t.observe(j.current),function(){t.disconnect()}}),[S,x]);var C=ze.useMemo((function(){var e=N.containerWidth,t=N.containerHeight;if(e<0||t<0)return null;XE(lE(i)||lE(o),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",i,o),XE(!r||r>0,"The aspect(%s) must be greater than zero.",r);var a=lE(i)?e:i,n=lE(o)?t:o;r&&r>0&&(a?n=a/r:n&&(a=n*r),m&&n>m&&(n=m)),XE(a>0||n>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",a,n,i,o,d,u,r);var s=!Array.isArray(h)&&PE(h.type).endsWith("Chart");return Re.Children.map(h,(function(e){return Re.isValidElement(e)?ze.cloneElement(e,VL({width:a,height:n},s?{style:VL({height:"100%",width:"100%",maxHeight:n,maxWidth:a},e.props.style)}:{})):e}))}),[r,h,o,m,u,d,N,i]);return Re.createElement("div",{id:g?"".concat(g):void 0,className:Ht("recharts-responsive-container",f),style:VL(VL({},b),{},{width:i,height:o,minWidth:d,minHeight:u,maxHeight:m}),ref:j},C)})),ZL=function(e){return null};function JL(e){return(JL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function tq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eq(Object(r),!0).forEach((function(t){rq(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rq(e,t,r){var a;return a=function(e,t){if("object"!=JL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=JL(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==JL(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ZL.displayName="Cell";var aq={widthCache:{},cacheCount:0},nq={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},sq="recharts_measurement_span";var iq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||dL.isSsr)return{width:0,height:0};var r,a=(r=tq({},t),Object.keys(r).forEach((function(e){r[e]||delete r[e]})),r),n=JSON.stringify({text:e,copyStyle:a});if(aq.widthCache[n])return aq.widthCache[n];try{var s=document.getElementById(sq);s||((s=document.createElement("span")).setAttribute("id",sq),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var i=tq(tq({},nq),a);Object.assign(s.style,i),s.textContent="".concat(e);var l=s.getBoundingClientRect(),o={width:l.width,height:l.height};return aq.widthCache[n]=o,++aq.cacheCount>2e3&&(aq.cacheCount=0,aq.widthCache={}),o}catch(die){return{width:0,height:0}}};function lq(e){return(lq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cq(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function dq(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,uq(a.key),a)}}function uq(e){var t=function(e,t){if("object"!=lq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=lq(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==lq(t)?t:t+""}var mq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pq=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xq=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,gq={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},fq=Object.keys(gq),yq="NaN";var vq=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),""===r||pq.test(r)||(this.num=NaN,this.unit=""),fq.includes(r)&&(this.num=function(e,t){return e*gq[t]}(t,r),this.unit="px")}return t=e,a=[{key:"parse",value:function(t){var r,a=oq(null!==(r=xq.exec(t))&&void 0!==r?r:[],3),n=a[1],s=a[2];return new e(parseFloat(n),null!=s?s:"")}}],(r=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&dq(t.prototype,r),a&&dq(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function bq(e){if(e.includes(yq))return yq;for(var t=e;t.includes("*")||t.includes("/");){var r,a=oq(null!==(r=mq.exec(t))&&void 0!==r?r:[],4),n=a[1],s=a[2],i=a[3],l=vq.parse(null!=n?n:""),o=vq.parse(null!=i?i:""),c="*"===s?l.multiply(o):l.divide(o);if(c.isNaN())return yq;t=t.replace(mq,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=oq(null!==(d=hq.exec(t))&&void 0!==d?d:[],4),m=u[1],h=u[2],p=u[3],x=vq.parse(null!=m?m:""),g=vq.parse(null!=p?p:""),f="+"===h?x.add(g):x.subtract(g);if(f.isNaN())return yq;t=t.replace(hq,f.toString())}return t}var jq=/\(([^()]*)\)/;function kq(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var r=oq(jq.exec(t),2)[1];t=t.replace(jq,bq(r))}return t}(t),t=bq(t)}function wq(e){var t=function(e){try{return kq(e)}catch(die){return yq}}(e.slice(5,-1));return t===yq?"":t}var Nq=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_q=["dx","dy","angle","className","breakAll"];function Sq(){return Sq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Sq.apply(this,arguments)}function Cq(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Tq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oq(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Pq=/[ \f\n\r\t\v\u2028\u2029]+/,Aq=function(e){var t=e.children,r=e.breakAll,a=e.style;try{var n=[];return PA(t)||(n=r?t.toString().split(""):t.toString().split(Pq)),{wordsWithComputedWidth:n.map((function(e){return{word:e,width:iq(e,a).width}})),spaceWidth:r?0:iq(" ",a).width}}catch(die){return null}},Eq=function(e){return[{words:PA(e)?[]:e.toString().split(Pq)}]},Dq=function(e){var t=e.width,r=e.scaleToFit,a=e.children,n=e.style,s=e.breakAll,i=e.maxLines;if((t||r)&&!dL.isSsr){var l=Aq({breakAll:s,children:a,style:n});return l?function(e,t,r,a,n){var s=e.maxLines,i=e.children,l=e.style,o=e.breakAll,c=oE(s),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var s=t.word,i=t.width,l=e[e.length-1];if(l&&(null==a||n||l.width+i+r<Number(a)))l.words.push(s),l.width+=i+r;else{var o={words:[s],width:i};e.push(o)}return e}),[])},m=u(t);if(!c)return m;for(var h,p=function(e){var t=d.slice(0,e),r=Aq({breakAll:o,style:l,children:t+"…"}).wordsWithComputedWidth,n=u(r),i=n.length>s||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(n).width>Number(a);return[i,n]},x=0,g=d.length-1,f=0;x<=g&&f<=d.length-1;){var y=Math.floor((x+g)/2),v=Tq(p(y-1),2),b=v[0],j=v[1],k=Tq(p(y),1)[0];if(b||k||(x=y+1),b&&k&&(g=y-1),!b&&k){h=j;break}f++}return h||m}({breakAll:s,children:a,maxLines:i,style:n},l.wordsWithComputedWidth,l.spaceWidth,t,r):Eq(a)}return Eq(a)},Mq="#808080",zq=function(e){var t=e.x,r=void 0===t?0:t,a=e.y,n=void 0===a?0:a,s=e.lineHeight,i=void 0===s?"1em":s,l=e.capHeight,o=void 0===l?"0.71em":l,c=e.scaleToFit,d=void 0!==c&&c,u=e.textAnchor,m=void 0===u?"start":u,h=e.verticalAnchor,p=void 0===h?"end":h,x=e.fill,g=void 0===x?Mq:x,f=Cq(e,Nq),y=ze.useMemo((function(){return Dq({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:d,style:f.style,width:f.width})}),[f.breakAll,f.children,f.maxLines,d,f.style,f.width]),v=f.dx,b=f.dy,j=f.angle,k=f.className,w=f.breakAll,N=Cq(f,_q);if(!cE(r)||!cE(n))return null;var _,S=r+(oE(v)?v:0),C=n+(oE(b)?b:0);switch(p){case"start":_=wq("calc(".concat(o,")"));break;case"middle":_=wq("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:_=wq("calc(".concat(y.length-1," * -").concat(i,")"))}var T=[];if(d){var O=y[0].width,P=f.width;T.push("scale(".concat((oE(P)?P/O:1)/O,")"))}return j&&T.push("rotate(".concat(j,", ").concat(S,", ").concat(C,")")),T.length&&(N.transform=T.join(" ")),Re.createElement("text",Sq({},BE(N,!0),{x:S,y:C,className:Ht("recharts-text",k),textAnchor:m,fill:g.includes("url")?Mq:g}),y.map((function(e,t){var r=e.words.join(w?"":" ");return Re.createElement("tspan",{x:S,dy:0===t?_:i,key:"".concat(r,"-").concat(t)},r)})))};function Rq(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Iq(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fq(e){let t,r,a;function n(e,a,n=0,s=e.length){if(n<s){if(0!==t(a,a))return s;do{const t=n+s>>>1;r(e[t],a)<0?n=t+1:s=t}while(n<s)}return n}return 2!==e.length?(t=Rq,r=(t,r)=>Rq(e(t),r),a=(t,r)=>e(t)-r):(t=e===Rq||e===Iq?e:Bq,r=e,a=e),{left:n,center:function(e,t,r=0,s=e.length){const i=n(e,t,r,s-1);return i>r&&a(e[i-1],t)>-a(e[i],t)?i-1:i},right:function(e,a,n=0,s=e.length){if(n<s){if(0!==t(a,a))return s;do{const t=n+s>>>1;r(e[t],a)<=0?n=t+1:s=t}while(n<s)}return n}}}function Bq(){return 0}function Lq(e){return null===e?NaN:+e}const qq=Fq(Rq).right;Fq(Lq).center;class $q extends Map{constructor(e,t=Uq){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(Kq(this,e))}has(e){return super.has(Kq(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const a=t(r);e.has(a)&&(r=e.get(a),e.delete(a));return r}(this,e))}}function Kq({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function Uq(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Hq(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const Yq=Math.sqrt(50),Vq=Math.sqrt(10),Gq=Math.sqrt(2);function Wq(e,t,r){const a=(t-e)/Math.max(0,r),n=Math.floor(Math.log10(a)),s=a/Math.pow(10,n),i=s>=Yq?10:s>=Vq?5:s>=Gq?2:1;let l,o,c;return n<0?(c=Math.pow(10,-n)/i,l=Math.round(e*c),o=Math.round(t*c),l/c<e&&++l,o/c>t&&--o,c=-c):(c=Math.pow(10,n)*i,l=Math.round(e/c),o=Math.round(t/c),l*c<e&&++l,o*c>t&&--o),o<l&&.5<=r&&r<2?Wq(e,t,2*r):[l,o,c]}function Qq(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const a=t<e,[n,s,i]=a?Wq(t,e,r):Wq(e,t,r);if(!(s>=n))return[];const l=s-n+1,o=new Array(l);if(a)if(i<0)for(let c=0;c<l;++c)o[c]=(s-c)/-i;else for(let c=0;c<l;++c)o[c]=(s-c)*i;else if(i<0)for(let c=0;c<l;++c)o[c]=(n+c)/-i;else for(let c=0;c<l;++c)o[c]=(n+c)*i;return o}function Xq(e,t,r){return Wq(e=+e,t=+t,r=+r)[2]}function Zq(e,t,r){r=+r;const a=(t=+t)<(e=+e),n=a?Xq(t,e,r):Xq(e,t,r);return(a?-1:1)*(n<0?1/-n:n)}function Jq(e,t){let r;for(const a of e)null!=a&&(r<a||void 0===r&&a>=a)&&(r=a);return r}function e$(e,t){let r;for(const a of e)null!=a&&(r>a||void 0===r&&a>=a)&&(r=a);return r}function t$(e,t,r=0,a=1/0,n){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(n=void 0===n?Hq:function(e=Rq){if(e===Rq)return Hq;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||0===a?a:(0===e(r,r))-(0===e(t,t))}}(n);a>r;){if(a-r>600){const s=a-r+1,i=t-r+1,l=Math.log(s),o=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*o*(s-o)/s)*(i-s/2<0?-1:1);t$(e,t,Math.max(r,Math.floor(t-i*o/s+c)),Math.min(a,Math.floor(t+(s-i)*o/s+c)),n)}const s=e[t];let i=r,l=a;for(r$(e,r,t),n(e[a],s)>0&&r$(e,r,a);i<l;){for(r$(e,i,l),++i,--l;n(e[i],s)<0;)++i;for(;n(e[l],s)>0;)--l}0===n(e[r],s)?r$(e,r,l):(++l,r$(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function r$(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function a$(e,t,r=Lq){if((a=e.length)&&!isNaN(t=+t)){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,n=(a-1)*t,s=Math.floor(n),i=+r(e[s],s,e);return i+(+r(e[s+1],s+1,e)-i)*(n-s)}}function n$(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function s$(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const i$=Symbol("implicit");function l$(){var e=new $q,t=[],r=[],a=i$;function n(n){let s=e.get(n);if(void 0===s){if(a!==i$)return a;e.set(n,s=t.push(n)-1)}return r[s%r.length]}return n.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new $q;for(const a of r)e.has(a)||e.set(a,t.push(a)-1);return n},n.range=function(e){return arguments.length?(r=Array.from(e),n):r.slice()},n.unknown=function(e){return arguments.length?(a=e,n):a},n.copy=function(){return l$(t,r).unknown(a)},n$.apply(n,arguments),n}function o$(){var e,t,r=l$().unknown(void 0),a=r.domain,n=r.range,s=0,i=1,l=!1,o=0,c=0,d=.5;function u(){var r=a().length,u=i<s,m=u?i:s,h=u?s:i;e=(h-m)/Math.max(1,r-o+2*c),l&&(e=Math.floor(e)),m+=(h-m-e*(r-o))*d,t=e*(1-o),l&&(m=Math.round(m),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var a=-1,n=0|Math.max(0,Math.ceil((t-e)/r)),s=new Array(n);++a<n;)s[a]=e+a*r;return s}(r).map((function(t){return m+e*t}));return n(u?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(a(e),u()):a()},r.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,u()):[s,i]},r.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,l=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(l=!!e,u()):l},r.padding=function(e){return arguments.length?(o=Math.min(1,c=+e),u()):o},r.paddingInner=function(e){return arguments.length?(o=Math.min(1,e),u()):o},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return o$(a(),[s,i]).round(l).paddingInner(o).paddingOuter(c).align(d)},n$.apply(u(),arguments)}function c$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return c$(t())},e}function d$(){return c$(o$.apply(null,arguments).paddingInner(1))}function u$(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function m$(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function h$(){}var p$=.7,x$=1/p$,g$="\\s*([+-]?\\d+)\\s*",f$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",y$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v$=/^#([0-9a-f]{3,8})$/,b$=new RegExp(`^rgb\\(${g$},${g$},${g$}\\)$`),j$=new RegExp(`^rgb\\(${y$},${y$},${y$}\\)$`),k$=new RegExp(`^rgba\\(${g$},${g$},${g$},${f$}\\)$`),w$=new RegExp(`^rgba\\(${y$},${y$},${y$},${f$}\\)$`),N$=new RegExp(`^hsl\\(${f$},${y$},${y$}\\)$`),_$=new RegExp(`^hsla\\(${f$},${y$},${y$},${f$}\\)$`),S$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function C$(){return this.rgb().formatHex()}function T$(){return this.rgb().formatRgb()}function O$(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=v$.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?P$(t):3===r?new D$(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?A$(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?A$(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=b$.exec(e))?new D$(t[1],t[2],t[3],1):(t=j$.exec(e))?new D$(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=k$.exec(e))?A$(t[1],t[2],t[3],t[4]):(t=w$.exec(e))?A$(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=N$.exec(e))?B$(t[1],t[2]/100,t[3]/100,1):(t=_$.exec(e))?B$(t[1],t[2]/100,t[3]/100,t[4]):S$.hasOwnProperty(e)?P$(S$[e]):"transparent"===e?new D$(NaN,NaN,NaN,0):null}function P$(e){return new D$(e>>16&255,e>>8&255,255&e,1)}function A$(e,t,r,a){return a<=0&&(e=t=r=NaN),new D$(e,t,r,a)}function E$(e,t,r,a){return 1===arguments.length?((n=e)instanceof h$||(n=O$(n)),n?new D$((n=n.rgb()).r,n.g,n.b,n.opacity):new D$):new D$(e,t,r,null==a?1:a);var n}function D$(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}function M$(){return`#${F$(this.r)}${F$(this.g)}${F$(this.b)}`}function z$(){const e=R$(this.opacity);return`${1===e?"rgb(":"rgba("}${I$(this.r)}, ${I$(this.g)}, ${I$(this.b)}${1===e?")":`, ${e})`}`}function R$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function I$(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function F$(e){return((e=I$(e))<16?"0":"")+e.toString(16)}function B$(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new q$(e,t,r,a)}function L$(e){if(e instanceof q$)return new q$(e.h,e.s,e.l,e.opacity);if(e instanceof h$||(e=O$(e)),!e)return new q$;if(e instanceof q$)return e;var t=(e=e.rgb()).r/255,r=e.g/255,a=e.b/255,n=Math.min(t,r,a),s=Math.max(t,r,a),i=NaN,l=s-n,o=(s+n)/2;return l?(i=t===s?(r-a)/l+6*(r<a):r===s?(a-t)/l+2:(t-r)/l+4,l/=o<.5?s+n:2-s-n,i*=60):l=o>0&&o<1?0:i,new q$(i,l,o,e.opacity)}function q$(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}function $$(e){return(e=(e||0)%360)<0?e+360:e}function K$(e){return Math.max(0,Math.min(1,e||0))}function U$(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}u$(h$,O$,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:C$,formatHex:C$,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return L$(this).formatHsl()},formatRgb:T$,toString:T$}),u$(D$,E$,m$(h$,{brighter(e){return e=null==e?x$:Math.pow(x$,e),new D$(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?p$:Math.pow(p$,e),new D$(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new D$(I$(this.r),I$(this.g),I$(this.b),R$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M$,formatHex:M$,formatHex8:function(){return`#${F$(this.r)}${F$(this.g)}${F$(this.b)}${F$(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:z$,toString:z$})),u$(q$,(function(e,t,r,a){return 1===arguments.length?L$(e):new q$(e,t,r,null==a?1:a)}),m$(h$,{brighter(e){return e=null==e?x$:Math.pow(x$,e),new q$(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?p$:Math.pow(p$,e),new q$(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,n=2*r-a;return new D$(U$(e>=240?e-240:e+120,n,a),U$(e,n,a),U$(e<120?e+240:e-120,n,a),this.opacity)},clamp(){return new q$($$(this.h),K$(this.s),K$(this.l),R$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=R$(this.opacity);return`${1===e?"hsl(":"hsla("}${$$(this.h)}, ${100*K$(this.s)}%, ${100*K$(this.l)}%${1===e?")":`, ${e})`}`}}));const H$=e=>()=>e;function Y$(e){return 1===(e=+e)?V$:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}(t,r,e):H$(isNaN(t)?r:t)}}function V$(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):H$(isNaN(e)?t:e)}const G$=function e(t){var r=Y$(t);function a(e,t){var a=r((e=E$(e)).r,(t=E$(t)).r),n=r(e.g,t.g),s=r(e.b,t.b),i=V$(e.opacity,t.opacity);return function(t){return e.r=a(t),e.g=n(t),e.b=s(t),e.opacity=i(t),e+""}}return a.gamma=e,a}(1);function W$(e,t){t||(t=[]);var r,a=e?Math.min(t.length,e.length):0,n=t.slice();return function(s){for(r=0;r<a;++r)n[r]=e[r]*(1-s)+t[r]*s;return n}}function Q$(e,t){var r,a=t?t.length:0,n=e?Math.min(a,e.length):0,s=new Array(n),i=new Array(a);for(r=0;r<n;++r)s[r]=aK(e[r],t[r]);for(;r<a;++r)i[r]=t[r];return function(e){for(r=0;r<n;++r)i[r]=s[r](e);return i}}function X$(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function Z$(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function J$(e,t){var r,a={},n={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?a[r]=aK(e[r],t[r]):n[r]=t[r];return function(e){for(r in a)n[r]=a[r](e);return n}}var eK=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tK=new RegExp(eK.source,"g");function rK(e,t){var r,a,n,s=eK.lastIndex=tK.lastIndex=0,i=-1,l=[],o=[];for(e+="",t+="";(r=eK.exec(e))&&(a=tK.exec(t));)(n=a.index)>s&&(n=t.slice(s,n),l[i]?l[i]+=n:l[++i]=n),(r=r[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,o.push({i:i,x:Z$(r,a)})),s=tK.lastIndex;return s<t.length&&(n=t.slice(s),l[i]?l[i]+=n:l[++i]=n),l.length<2?o[0]?function(e){return function(t){return e(t)+""}}(o[0].x):function(e){return function(){return e}}(t):(t=o.length,function(e){for(var r,a=0;a<t;++a)l[(r=o[a]).i]=r.x(e);return l.join("")})}function aK(e,t){var r,a,n=typeof t;return null==t||"boolean"===n?H$(t):("number"===n?Z$:"string"===n?(r=O$(t))?(t=r,G$):rK:t instanceof O$?G$:t instanceof Date?X$:(a=t,!ArrayBuffer.isView(a)||a instanceof DataView?Array.isArray(t)?Q$:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?J$:Z$:W$))(e,t)}function nK(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function sK(e){return+e}var iK=[0,1];function lK(e){return e}function oK(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function cK(e,t,r){var a=e[0],n=e[1],s=t[0],i=t[1];return n<a?(a=oK(n,a),s=r(i,s)):(a=oK(a,n),s=r(s,i)),function(e){return s(a(e))}}function dK(e,t,r){var a=Math.min(e.length,t.length)-1,n=new Array(a),s=new Array(a),i=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<a;)n[i]=oK(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(t){var r=qq(e,t,1,a)-1;return s[r](n[r](t))}}function uK(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mK(){var e,t,r,a,n,s,i=iK,l=iK,o=aK,c=lK;function d(){var e,t,r,o=Math.min(i.length,l.length);return c!==lK&&(e=i[0],t=i[o-1],e>t&&(r=e,e=t,t=r),c=function(r){return Math.max(e,Math.min(t,r))}),a=o>2?dK:cK,n=s=null,u}function u(t){return null==t||isNaN(t=+t)?r:(n||(n=a(i.map(e),l,o)))(e(c(t)))}return u.invert=function(r){return c(t((s||(s=a(l,i.map(e),Z$)))(r)))},u.domain=function(e){return arguments.length?(i=Array.from(e,sK),d()):i.slice()},u.range=function(e){return arguments.length?(l=Array.from(e),d()):l.slice()},u.rangeRound=function(e){return l=Array.from(e),o=nK,d()},u.clamp=function(e){return arguments.length?(c=!!e||lK,d()):c!==lK},u.interpolate=function(e){return arguments.length?(o=e,d()):o},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,a){return e=r,t=a,d()}}function hK(){return mK()(lK,lK)}function pK(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function xK(e){return(e=pK(Math.abs(e)))?e[1]:NaN}var gK,fK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yK(e){if(!(t=fK.exec(e)))throw new Error("invalid format: "+e);var t;return new vK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function vK(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function bK(e,t){var r=pK(e,t);if(!r)return e+"";var a=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+new Array(n-a.length+2).join("0")}yK.prototype=vK.prototype,vK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const jK={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>bK(100*e,t),r:bK,s:function(e,t){var r=pK(e,t);if(!r)return e+"";var a=r[0],n=r[1],s=n-(gK=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,i=a.length;return s===i?a:s>i?a+new Array(s-i+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+pK(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function kK(e){return e}var wK,NK,_K,SK=Array.prototype.map,CK=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function TK(e){var t,r,a=void 0===e.grouping||void 0===e.thousands?kK:(t=SK.call(e.grouping,Number),r=e.thousands+"",function(e,a){for(var n=e.length,s=[],i=0,l=t[0],o=0;n>0&&l>0&&(o+l+1>a&&(l=Math.max(1,a-o)),s.push(e.substring(n-=l,n+l)),!((o+=l+1)>a));)l=t[i=(i+1)%t.length];return s.reverse().join(r)}),n=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?kK:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(SK.call(e.numerals,String)),o=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=yK(e)).fill,r=e.align,u=e.sign,m=e.symbol,h=e.zero,p=e.width,x=e.comma,g=e.precision,f=e.trim,y=e.type;"n"===y?(x=!0,y="g"):jK[y]||(void 0===g&&(g=12),f=!0,y="g"),(h||"0"===t&&"="===r)&&(h=!0,t="0",r="=");var v="$"===m?n:"#"===m&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===m?s:/[%p]/.test(y)?o:"",j=jK[y],k=/[defgprs%]/.test(y);function w(e){var n,s,o,m=v,w=b;if("c"===y)w=j(e)+w,e="";else{var N=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),g),f&&(e=function(e){e:for(var t,r=e.length,a=1,n=-1;a<r;++a)switch(e[a]){case".":n=t=a;break;case"0":0===n&&(n=a),t=a;break;default:if(!+e[a])break e;n>0&&(n=0)}return n>0?e.slice(0,n)+e.slice(t+1):e}(e)),N&&0===+e&&"+"!==u&&(N=!1),m=(N?"("===u?u:c:"-"===u||"("===u?"":u)+m,w=("s"===y?CK[8+gK/3]:"")+w+(N&&"("===u?")":""),k)for(n=-1,s=e.length;++n<s;)if(48>(o=e.charCodeAt(n))||o>57){w=(46===o?i+e.slice(n+1):e.slice(n))+w,e=e.slice(0,n);break}}x&&!h&&(e=a(e,1/0));var _=m.length+e.length+w.length,S=_<p?new Array(p-_+1).join(t):"";switch(x&&h&&(e=a(S+e,S.length?p-w.length:1/0),S=""),r){case"<":e=m+e+w+S;break;case"=":e=m+S+e+w;break;case"^":e=S.slice(0,_=S.length>>1)+m+e+w+S.slice(_);break;default:e=S+m+e+w}return l(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),w.toString=function(){return e+""},w}return{format:u,formatPrefix:function(e,t){var r=u(((e=yK(e)).type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(xK(t)/3))),n=Math.pow(10,-a),s=CK[8+a/3];return function(e){return r(n*e)+s}}}}function OK(e,t,r,a){var n,s=Zq(e,t,r);switch((a=yK(null==a?",f":a)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=a.precision||isNaN(n=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xK(t)/3)))-xK(Math.abs(e)))}(s,i))||(a.precision=n),_K(a,i);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(n=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xK(t)-xK(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(a.precision=n-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(n=function(e){return Math.max(0,-xK(Math.abs(e)))}(s))||(a.precision=n-2*("%"===a.type))}return NK(a)}function PK(e){var t=e.domain;return e.ticks=function(e){var r=t();return Qq(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var a=t();return OK(a[0],a[a.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var a,n,s=t(),i=0,l=s.length-1,o=s[i],c=s[l],d=10;for(c<o&&(n=o,o=c,c=n,n=i,i=l,l=n);d-- >0;){if((n=Xq(o,c,r))===a)return s[i]=o,s[l]=c,t(s);if(n>0)o=Math.floor(o/n)*n,c=Math.ceil(c/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,c=Math.floor(c*n)/n}a=n}return e},e}function AK(){var e=hK();return e.copy=function(){return uK(e,AK())},n$.apply(e,arguments),PK(e)}function EK(e,t){var r,a=0,n=(e=e.slice()).length-1,s=e[a],i=e[n];return i<s&&(r=a,a=n,n=r,r=s,s=i,i=r),e[a]=t.floor(s),e[n]=t.ceil(i),e}function DK(e){return Math.log(e)}function MK(e){return Math.exp(e)}function zK(e){return-Math.log(-e)}function RK(e){return-Math.exp(-e)}function IK(e){return isFinite(e)?+("1e"+e):e<0?0:e}function FK(e){return(t,r)=>-e(-t,r)}function BK(e){const t=e(DK,MK),r=t.domain;let a,n,s=10;function i(){return a=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),n=function(e){return 10===e?IK:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),r()[0]<0?(a=FK(a),n=FK(n),e(zK,RK)):e(DK,MK),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(r(e),i()):r()},t.ticks=e=>{const t=r();let i=t[0],l=t[t.length-1];const o=l<i;o&&([i,l]=[l,i]);let c,d,u=a(i),m=a(l);const h=null==e?10:+e;let p=[];if(!(s%1)&&m-u<h){if(u=Math.floor(u),m=Math.ceil(m),i>0){for(;u<=m;++u)for(c=1;c<s;++c)if(d=u<0?c/n(-u):c*n(u),!(d<i)){if(d>l)break;p.push(d)}}else for(;u<=m;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/n(-u):c*n(u),!(d<i)){if(d>l)break;p.push(d)}2*p.length<h&&(p=Qq(i,l,h))}else p=Qq(u,m,Math.min(m-u,h)).map(n);return o?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===s?"s":","),"function"!=typeof r&&(s%1||null!=(r=yK(r)).precision||(r.trim=!0),r=NK(r)),e===1/0)return r;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/n(Math.round(a(e)));return t*s<s-.5&&(t*=s),t<=i?r(e):""}},t.nice=()=>r(EK(r(),{floor:e=>n(Math.floor(a(e))),ceil:e=>n(Math.ceil(a(e)))})),t}function LK(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function qK(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $K(e){var t=1,r=e(LK(t),qK(t));return r.constant=function(r){return arguments.length?e(LK(t=+r),qK(t)):t},PK(r)}function KK(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function UK(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function HK(e){return e<0?-e*e:e*e}function YK(e){var t=e(lK,lK),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(lK,lK):.5===r?e(UK,HK):e(KK(r),KK(1/r)):r},PK(t)}function VK(){var e=YK(mK());return e.copy=function(){return uK(e,VK()).exponent(e.exponent())},n$.apply(e,arguments),e}function GK(e){return Math.sign(e)*e*e}wK=TK({thousands:",",grouping:[3],currency:["$",""]}),NK=wK.format,_K=wK.formatPrefix;const WK=new Date,QK=new Date;function XK(e,t,r,a){function n(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return n.floor=t=>(e(t=new Date(+t)),t),n.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),n.round=e=>{const t=n(e),r=n.ceil(e);return e-t<r-e?t:r},n.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),n.range=(r,a,s)=>{const i=[];if(r=n.ceil(r),s=null==s?1:Math.floor(s),!(r<a&&s>0))return i;let l;do{i.push(l=new Date(+r)),t(r,s),e(r)}while(l<r&&r<a);return i},n.filter=r=>XK((t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)}),((e,a)=>{if(e>=e)if(a<0)for(;++a<=0;)for(;t(e,-1),!r(e););else for(;--a>=0;)for(;t(e,1),!r(e););})),r&&(n.count=(t,a)=>(WK.setTime(+t),QK.setTime(+a),e(WK),e(QK),Math.floor(r(WK,QK))),n.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?n.filter(a?t=>a(t)%e===0:t=>n.count(0,t)%e===0):n:null)),n}const ZK=XK((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));ZK.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?XK((t=>{t.setTime(Math.floor(t/e)*e)}),((t,r)=>{t.setTime(+t+r*e)}),((t,r)=>(r-t)/e)):ZK:null),ZK.range;const JK=1e3,eU=6e4,tU=36e5,rU=864e5,aU=6048e5,nU=2592e6,sU=31536e6,iU=XK((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*JK)}),((e,t)=>(t-e)/JK),(e=>e.getUTCSeconds()));iU.range;const lU=XK((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*JK)}),((e,t)=>{e.setTime(+e+t*eU)}),((e,t)=>(t-e)/eU),(e=>e.getMinutes()));lU.range;const oU=XK((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*eU)}),((e,t)=>(t-e)/eU),(e=>e.getUTCMinutes()));oU.range;const cU=XK((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*JK-e.getMinutes()*eU)}),((e,t)=>{e.setTime(+e+t*tU)}),((e,t)=>(t-e)/tU),(e=>e.getHours()));cU.range;const dU=XK((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*tU)}),((e,t)=>(t-e)/tU),(e=>e.getUTCHours()));dU.range;const uU=XK((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*eU)/rU),(e=>e.getDate()-1));uU.range;const mU=XK((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/rU),(e=>e.getUTCDate()-1));mU.range;const hU=XK((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/rU),(e=>Math.floor(e/rU)));function pU(e){return XK((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*eU)/aU))}hU.range;const xU=pU(0),gU=pU(1),fU=pU(2),yU=pU(3),vU=pU(4),bU=pU(5),jU=pU(6);function kU(e){return XK((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/aU))}xU.range,gU.range,fU.range,yU.range,vU.range,bU.range,jU.range;const wU=kU(0),NU=kU(1),_U=kU(2),SU=kU(3),CU=kU(4),TU=kU(5),OU=kU(6);wU.range,NU.range,_U.range,SU.range,CU.range,TU.range,OU.range;const PU=XK((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()));PU.range;const AU=XK((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()));AU.range;const EU=XK((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));EU.every=e=>isFinite(e=Math.floor(e))&&e>0?XK((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,r)=>{t.setFullYear(t.getFullYear()+r*e)})):null,EU.range;const DU=XK((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function MU(e,t,r,a,n,s){const i=[[iU,1,JK],[iU,5,5e3],[iU,15,15e3],[iU,30,3e4],[s,1,eU],[s,5,3e5],[s,15,9e5],[s,30,18e5],[n,1,tU],[n,3,108e5],[n,6,216e5],[n,12,432e5],[a,1,rU],[a,2,1728e5],[r,1,aU],[t,1,nU],[t,3,7776e6],[e,1,sU]];function l(t,r,a){const n=Math.abs(r-t)/a,s=Fq((([,,e])=>e)).right(i,n);if(s===i.length)return e.every(Zq(t/sU,r/sU,a));if(0===s)return ZK.every(Math.max(Zq(t,r,a),1));const[l,o]=i[n/i[s-1][2]<i[s][2]/n?s-1:s];return l.every(o)}return[function(e,t,r){const a=t<e;a&&([e,t]=[t,e]);const n=r&&"function"==typeof r.range?r:l(e,t,r),s=n?n.range(e,+t+1):[];return a?s.reverse():s},l]}DU.every=e=>isFinite(e=Math.floor(e))&&e>0?XK((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)})):null,DU.range;const[zU,RU]=MU(DU,AU,wU,hU,dU,oU),[IU,FU]=MU(EU,PU,xU,uU,cU,lU);function BU(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function LU(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qU(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var $U,KU,UU,HU={"-":"",_:" ",0:"0"},YU=/^\s*\d+/,VU=/^%/,GU=/[\\^$*+?|[\]().{}]/g;function WU(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",s=n.length;return a+(s<r?new Array(r-s+1).join(t)+n:n)}function QU(e){return e.replace(GU,"\\$&")}function XU(e){return new RegExp("^(?:"+e.map(QU).join("|")+")","i")}function ZU(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function JU(e,t,r){var a=YU.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function eH(e,t,r){var a=YU.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function tH(e,t,r){var a=YU.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function rH(e,t,r){var a=YU.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function aH(e,t,r){var a=YU.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function nH(e,t,r){var a=YU.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function sH(e,t,r){var a=YU.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function iH(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function lH(e,t,r){var a=YU.exec(t.slice(r,r+1));return a?(e.q=3*a[0]-3,r+a[0].length):-1}function oH(e,t,r){var a=YU.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function cH(e,t,r){var a=YU.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function dH(e,t,r){var a=YU.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function uH(e,t,r){var a=YU.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function mH(e,t,r){var a=YU.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function hH(e,t,r){var a=YU.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function pH(e,t,r){var a=YU.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function xH(e,t,r){var a=YU.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function gH(e,t,r){var a=VU.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function fH(e,t,r){var a=YU.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function yH(e,t,r){var a=YU.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function vH(e,t){return WU(e.getDate(),t,2)}function bH(e,t){return WU(e.getHours(),t,2)}function jH(e,t){return WU(e.getHours()%12||12,t,2)}function kH(e,t){return WU(1+uU.count(EU(e),e),t,3)}function wH(e,t){return WU(e.getMilliseconds(),t,3)}function NH(e,t){return wH(e,t)+"000"}function _H(e,t){return WU(e.getMonth()+1,t,2)}function SH(e,t){return WU(e.getMinutes(),t,2)}function CH(e,t){return WU(e.getSeconds(),t,2)}function TH(e){var t=e.getDay();return 0===t?7:t}function OH(e,t){return WU(xU.count(EU(e)-1,e),t,2)}function PH(e){var t=e.getDay();return t>=4||0===t?vU(e):vU.ceil(e)}function AH(e,t){return e=PH(e),WU(vU.count(EU(e),e)+(4===EU(e).getDay()),t,2)}function EH(e){return e.getDay()}function DH(e,t){return WU(gU.count(EU(e)-1,e),t,2)}function MH(e,t){return WU(e.getFullYear()%100,t,2)}function zH(e,t){return WU((e=PH(e)).getFullYear()%100,t,2)}function RH(e,t){return WU(e.getFullYear()%1e4,t,4)}function IH(e,t){var r=e.getDay();return WU((e=r>=4||0===r?vU(e):vU.ceil(e)).getFullYear()%1e4,t,4)}function FH(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+WU(t/60|0,"0",2)+WU(t%60,"0",2)}function BH(e,t){return WU(e.getUTCDate(),t,2)}function LH(e,t){return WU(e.getUTCHours(),t,2)}function qH(e,t){return WU(e.getUTCHours()%12||12,t,2)}function $H(e,t){return WU(1+mU.count(DU(e),e),t,3)}function KH(e,t){return WU(e.getUTCMilliseconds(),t,3)}function UH(e,t){return KH(e,t)+"000"}function HH(e,t){return WU(e.getUTCMonth()+1,t,2)}function YH(e,t){return WU(e.getUTCMinutes(),t,2)}function VH(e,t){return WU(e.getUTCSeconds(),t,2)}function GH(e){var t=e.getUTCDay();return 0===t?7:t}function WH(e,t){return WU(wU.count(DU(e)-1,e),t,2)}function QH(e){var t=e.getUTCDay();return t>=4||0===t?CU(e):CU.ceil(e)}function XH(e,t){return e=QH(e),WU(CU.count(DU(e),e)+(4===DU(e).getUTCDay()),t,2)}function ZH(e){return e.getUTCDay()}function JH(e,t){return WU(NU.count(DU(e)-1,e),t,2)}function eY(e,t){return WU(e.getUTCFullYear()%100,t,2)}function tY(e,t){return WU((e=QH(e)).getUTCFullYear()%100,t,2)}function rY(e,t){return WU(e.getUTCFullYear()%1e4,t,4)}function aY(e,t){var r=e.getUTCDay();return WU((e=r>=4||0===r?CU(e):CU.ceil(e)).getUTCFullYear()%1e4,t,4)}function nY(){return"+0000"}function sY(){return"%"}function iY(e){return+e}function lY(e){return Math.floor(+e/1e3)}function oY(e){return new Date(e)}function cY(e){return e instanceof Date?+e:+new Date(+e)}function dY(e,t,r,a,n,s,i,l,o,c){var d=hK(),u=d.invert,m=d.domain,h=c(".%L"),p=c(":%S"),x=c("%I:%M"),g=c("%I %p"),f=c("%a %d"),y=c("%b %d"),v=c("%B"),b=c("%Y");function j(e){return(o(e)<e?h:l(e)<e?p:i(e)<e?x:s(e)<e?g:a(e)<e?n(e)<e?f:y:r(e)<e?v:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?m(Array.from(e,cY)):m().map(oY)},d.ticks=function(t){var r=m();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var r=m();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?m(EK(r,e)):d},d.copy=function(){return uK(d,dY(e,t,r,a,n,s,i,l,o,c))},d}function uY(){var e,t,r,a,n,s=0,i=1,l=lK,o=!1;function c(t){return null==t||isNaN(t=+t)?n:l(0===r?.5:(t=(a(t)-e)*r,o?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,a;return arguments.length?([r,a]=t,l=e(r,a),c):[l(0),l(1)]}}return c.domain=function(n){return arguments.length?([s,i]=n,e=a(s=+s),t=a(i=+i),r=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(o=!!e,c):o},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.range=d(aK),c.rangeRound=d(nK),c.unknown=function(e){return arguments.length?(n=e,c):n},function(n){return a=n,e=n(s),t=n(i),r=e===t?0:1/(t-e),c}}function mY(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hY(){var e=YK(uY());return e.copy=function(){return mY(e,hY()).exponent(e.exponent())},s$.apply(e,arguments)}function pY(){var e,t,r,a,n,s,i,l=0,o=.5,c=1,d=1,u=lK,m=!1;function h(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?a:n),u(m?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,a,n;return arguments.length?([r,a,n]=t,u=function(e,t){void 0===t&&(t=e,e=aK);for(var r=0,a=t.length-1,n=t[0],s=new Array(a<0?0:a);r<a;)s[r]=e(n,n=t[++r]);return function(e){var t=Math.max(0,Math.min(a-1,Math.floor(e*=a)));return s[t](e-t)}}(e,[r,a,n]),h):[u(0),u(.5),u(1)]}}return h.domain=function(i){return arguments.length?([l,o,c]=i,e=s(l=+l),t=s(o=+o),r=s(c=+c),a=e===t?0:.5/(t-e),n=t===r?0:.5/(r-t),d=t<e?-1:1,h):[l,o,c]},h.clamp=function(e){return arguments.length?(m=!!e,h):m},h.interpolator=function(e){return arguments.length?(u=e,h):u},h.range=p(aK),h.rangeRound=p(nK),h.unknown=function(e){return arguments.length?(i=e,h):i},function(i){return s=i,e=i(l),t=i(o),r=i(c),a=e===t?0:.5/(t-e),n=t===r?0:.5/(r-t),d=t<e?-1:1,h}}function xY(){var e=YK(pY());return e.copy=function(){return mY(e,xY()).exponent(e.exponent())},s$.apply(e,arguments)}!function(e){$U=function(e){var t=e.dateTime,r=e.date,a=e.time,n=e.periods,s=e.days,i=e.shortDays,l=e.months,o=e.shortMonths,c=XU(n),d=ZU(n),u=XU(s),m=ZU(s),h=XU(i),p=ZU(i),x=XU(l),g=ZU(l),f=XU(o),y=ZU(o),v={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return o[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:vH,e:vH,f:NH,g:zH,G:IH,H:bH,I:jH,j:kH,L:wH,m:_H,M:SH,p:function(e){return n[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:iY,s:lY,S:CH,u:TH,U:OH,V:AH,w:EH,W:DH,x:null,X:null,y:MH,Y:RH,Z:FH,"%":sY},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return o[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:BH,e:BH,f:UH,g:tY,G:aY,H:LH,I:qH,j:$H,L:KH,m:HH,M:YH,p:function(e){return n[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:iY,s:lY,S:VH,u:GH,U:WH,V:XH,w:ZH,W:JH,x:null,X:null,y:eY,Y:rY,Z:nY,"%":sY},j={a:function(e,t,r){var a=h.exec(t.slice(r));return a?(e.w=p.get(a[0].toLowerCase()),r+a[0].length):-1},A:function(e,t,r){var a=u.exec(t.slice(r));return a?(e.w=m.get(a[0].toLowerCase()),r+a[0].length):-1},b:function(e,t,r){var a=f.exec(t.slice(r));return a?(e.m=y.get(a[0].toLowerCase()),r+a[0].length):-1},B:function(e,t,r){var a=x.exec(t.slice(r));return a?(e.m=g.get(a[0].toLowerCase()),r+a[0].length):-1},c:function(e,r,a){return N(e,t,r,a)},d:cH,e:cH,f:xH,g:sH,G:nH,H:uH,I:uH,j:dH,L:pH,m:oH,M:mH,p:function(e,t,r){var a=c.exec(t.slice(r));return a?(e.p=d.get(a[0].toLowerCase()),r+a[0].length):-1},q:lH,Q:fH,s:yH,S:hH,u:eH,U:tH,V:rH,w:JU,W:aH,x:function(e,t,a){return N(e,r,t,a)},X:function(e,t,r){return N(e,a,t,r)},y:sH,Y:nH,Z:iH,"%":gH};function k(e,t){return function(r){var a,n,s,i=[],l=-1,o=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++l<c;)37===e.charCodeAt(l)&&(i.push(e.slice(o,l)),null!=(n=HU[a=e.charAt(++l)])?a=e.charAt(++l):n="e"===a?" ":"0",(s=t[a])&&(a=s(r,n)),i.push(a),o=l+1);return i.push(e.slice(o,l)),i.join("")}}function w(e,t){return function(r){var a,n,s=qU(1900,void 0,1);if(N(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(n=(a=LU(qU(s.y,0,1))).getUTCDay(),a=n>4||0===n?NU.ceil(a):NU(a),a=mU.offset(a,7*(s.V-1)),s.y=a.getUTCFullYear(),s.m=a.getUTCMonth(),s.d=a.getUTCDate()+(s.w+6)%7):(n=(a=BU(qU(s.y,0,1))).getDay(),a=n>4||0===n?gU.ceil(a):gU(a),a=uU.offset(a,7*(s.V-1)),s.y=a.getFullYear(),s.m=a.getMonth(),s.d=a.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),n="Z"in s?LU(qU(s.y,0,1)).getUTCDay():BU(qU(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(n+5)%7:s.w+7*s.U-(n+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,LU(s)):BU(s)}}function N(e,t,r,a){for(var n,s,i=0,l=t.length,o=r.length;i<l;){if(a>=o)return-1;if(37===(n=t.charCodeAt(i++))){if(n=t.charAt(i++),!(s=j[n in HU?t.charAt(i++):n])||(a=s(e,r,a))<0)return-1}else if(n!=r.charCodeAt(a++))return-1}return a}return v.x=k(r,v),v.X=k(a,v),v.c=k(t,v),b.x=k(r,b),b.X=k(a,b),b.c=k(t,b),{format:function(e){var t=k(e+="",v);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}(e),KU=$U.format,$U.parse,UU=$U.utcFormat,$U.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const gY=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:o$,scaleDiverging:function e(){var t=PK(pY()(lK));return t.copy=function(){return mY(t,e())},s$.apply(t,arguments)},scaleDivergingLog:function e(){var t=BK(pY()).domain([.1,1,10]);return t.copy=function(){return mY(t,e()).base(t.base())},s$.apply(t,arguments)},scaleDivergingPow:xY,scaleDivergingSqrt:function(){return xY.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=$K(pY());return t.copy=function(){return mY(t,e()).constant(t.constant())},s$.apply(t,arguments)},scaleIdentity:function e(t){var r;function a(e){return null==e||isNaN(e=+e)?r:e}return a.invert=a,a.domain=a.range=function(e){return arguments.length?(t=Array.from(e,sK),a):t.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,sK):[0,1],PK(a)},scaleImplicit:i$,scaleLinear:AK,scaleLog:function e(){const t=BK(mK()).domain([1,10]);return t.copy=()=>uK(t,e()).base(t.base()),n$.apply(t,arguments),t},scaleOrdinal:l$,scalePoint:d$,scalePow:VK,scaleQuantile:function e(){var t,r=[],a=[],n=[];function s(){var e=0,t=Math.max(1,a.length);for(n=new Array(t-1);++e<t;)n[e-1]=a$(r,e/t);return i}function i(e){return null==e||isNaN(e=+e)?t:a[qq(n,e)]}return i.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:[t>0?n[t-1]:r[0],t<n.length?n[t]:r[r.length-1]]},i.domain=function(e){if(!arguments.length)return r.slice();r=[];for(let t of e)null==t||isNaN(t=+t)||r.push(t);return r.sort(Rq),s()},i.range=function(e){return arguments.length?(a=Array.from(e),s()):a.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.quantiles=function(){return n.slice()},i.copy=function(){return e().domain(r).range(a).unknown(t)},n$.apply(i,arguments)},scaleQuantize:function e(){var t,r=0,a=1,n=1,s=[.5],i=[0,1];function l(e){return null!=e&&e<=e?i[qq(s,e,0,n)]:t}function o(){var e=-1;for(s=new Array(n);++e<n;)s[e]=((e+1)*a-(e-n)*r)/(n+1);return l}return l.domain=function(e){return arguments.length?([r,a]=e,r=+r,a=+a,o()):[r,a]},l.range=function(e){return arguments.length?(n=(i=Array.from(e)).length-1,o()):i.slice()},l.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,s[0]]:t>=n?[s[n-1],a]:[s[t-1],s[t]]},l.unknown=function(e){return arguments.length?(t=e,l):l},l.thresholds=function(){return s.slice()},l.copy=function(){return e().domain([r,a]).range(i).unknown(t)},n$.apply(PK(l),arguments)},scaleRadial:function e(){var t,r=hK(),a=[0,1],n=!1;function s(e){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(r(e));return isNaN(a)?t:n?Math.round(a):a}return s.invert=function(e){return r.invert(GK(e))},s.domain=function(e){return arguments.length?(r.domain(e),s):r.domain()},s.range=function(e){return arguments.length?(r.range((a=Array.from(e,sK)).map(GK)),s):a.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(n=!!e,s):n},s.clamp=function(e){return arguments.length?(r.clamp(e),s):r.clamp()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e(r.domain(),a).round(n).clamp(r.clamp()).unknown(t)},n$.apply(s,arguments),PK(s)},scaleSequential:function e(){var t=PK(uY()(lK));return t.copy=function(){return mY(t,e())},s$.apply(t,arguments)},scaleSequentialLog:function e(){var t=BK(uY()).domain([1,10]);return t.copy=function(){return mY(t,e()).base(t.base())},s$.apply(t,arguments)},scaleSequentialPow:hY,scaleSequentialQuantile:function e(){var t=[],r=lK;function a(e){if(null!=e&&!isNaN(e=+e))return r((qq(t,e,1)-1)/(t.length-1))}return a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(Rq),a},a.interpolator=function(e){return arguments.length?(r=e,a):r},a.range=function(){return t.map(((e,a)=>r(a/(t.length-1))))},a.quantiles=function(e){return Array.from({length:e+1},((r,a)=>function(e,t){if((r=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||r<2)return e$(e);if(t>=1)return Jq(e);var r,a=(r-1)*t,n=Math.floor(a),s=Jq(t$(e,n).subarray(0,n+1));return s+(e$(e.subarray(n+1))-s)*(a-n)}}(t,a/e)))},a.copy=function(){return e(r).domain(t)},s$.apply(a,arguments)},scaleSequentialSqrt:function(){return hY.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=$K(uY());return t.copy=function(){return mY(t,e()).constant(t.constant())},s$.apply(t,arguments)},scaleSqrt:function(){return VK.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=$K(mK());return t.copy=function(){return uK(t,e()).constant(t.constant())},n$.apply(t,arguments)},scaleThreshold:function e(){var t,r=[.5],a=[0,1],n=1;function s(e){return null!=e&&e<=e?a[qq(r,e,0,n)]:t}return s.domain=function(e){return arguments.length?(r=Array.from(e),n=Math.min(r.length,a.length-1),s):r.slice()},s.range=function(e){return arguments.length?(a=Array.from(e),n=Math.min(r.length,a.length-1),s):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return[r[t-1],r[t]]},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return e().domain(r).range(a).unknown(t)},n$.apply(s,arguments)},scaleTime:function(){return n$.apply(dY(IU,FU,EU,PU,xU,uU,cU,lU,iU,KU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return n$.apply(dY(zU,RU,DU,AU,wU,mU,dU,oU,iU,UU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:OK},Symbol.toStringTag,{value:"Module"}));var fY=CO;var yY=function(e,t,r){for(var a=-1,n=e.length;++a<n;){var s=e[a],i=t(s);if(null!=i&&(void 0===l?i==i&&!fY(i):r(i,l)))var l=i,o=s}return o};var vY=function(e,t){return e>t},bY=yY,jY=vY,kY=XI;const wY=Le((function(e){return e&&e.length?bY(e,kY,jY):void 0}));var NY=function(e,t){return e<t},_Y=yY,SY=NY,CY=XI;const TY=Le((function(e){return e&&e.length?_Y(e,CY,SY):void 0}));var OY=oA,PY=oF,AY=rB,EY=lO;var DY=GF,MY=function(e,t){return(EY(e)?OY:AY)(e,PY(t))};const zY=Le((function(e,t){return DY(MY(e,t),1)}));var RY=_I;const IY=Le((function(e,t){return RY(e,t)}));var FY,BY=1e9,LY=!0,qY="[DecimalError] ",$Y=qY+"Invalid argument: ",KY=qY+"Exponent out of range: ",UY=Math.floor,HY=Math.pow,YY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,VY=1e7,GY=9007199254740991,WY=UY(1286742750677284.5),QY={};function XY(e,t){var r,a,n,s,i,l,o,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),LY?lV(t,u):t;if(o=e.d,c=t.d,i=e.e,n=t.e,o=o.slice(),s=i-n){for(s<0?(a=o,s=-s,l=c.length):(a=c,n=i,l=o.length),s>(l=(i=Math.ceil(u/7))>l?i+1:l+1)&&(s=l,a.length=1),a.reverse();s--;)a.push(0);a.reverse()}for((l=o.length)-(s=c.length)<0&&(s=l,a=c,c=o,o=a),r=0;s;)r=(o[--s]=o[s]+c[s]+r)/VY|0,o[s]%=VY;for(r&&(o.unshift(r),++n),l=o.length;0==o[--l];)o.pop();return t.d=o,t.e=n,LY?lV(t,u):t}function ZY(e,t,r){if(e!==~~e||e<t||e>r)throw Error($Y+e)}function JY(e){var t,r,a,n=e.length-1,s="",i=e[0];if(n>0){for(s+=i,t=1;t<n;t++)(r=7-(a=e[t]+"").length)&&(s+=nV(r)),s+=a;(r=7-(a=(i=e[t])+"").length)&&(s+=nV(r))}else if(0===i)return"0";for(;i%10==0;)i/=10;return s+i}QY.absoluteValue=QY.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},QY.comparedTo=QY.cmp=function(e){var t,r,a,n,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(a=s.d.length)<(n=e.d.length)?a:n;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return a===n?0:a>n^s.s<0?1:-1},QY.decimalPlaces=QY.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},QY.dividedBy=QY.div=function(e){return eV(this,new this.constructor(e))},QY.dividedToIntegerBy=QY.idiv=function(e){var t=this.constructor;return lV(eV(this,new t(e),0,1),t.precision)},QY.equals=QY.eq=function(e){return!this.cmp(e)},QY.exponent=function(){return rV(this)},QY.greaterThan=QY.gt=function(e){return this.cmp(e)>0},QY.greaterThanOrEqualTo=QY.gte=function(e){return this.cmp(e)>=0},QY.isInteger=QY.isint=function(){return this.e>this.d.length-2},QY.isNegative=QY.isneg=function(){return this.s<0},QY.isPositive=QY.ispos=function(){return this.s>0},QY.isZero=function(){return 0===this.s},QY.lessThan=QY.lt=function(e){return this.cmp(e)<0},QY.lessThanOrEqualTo=QY.lte=function(e){return this.cmp(e)<1},QY.logarithm=QY.log=function(e){var t,r=this,a=r.constructor,n=a.precision,s=n+5;if(void 0===e)e=new a(10);else if((e=new a(e)).s<1||e.eq(FY))throw Error(qY+"NaN");if(r.s<1)throw Error(qY+(r.s?"NaN":"-Infinity"));return r.eq(FY)?new a(0):(LY=!1,t=eV(sV(r,s),sV(e,s),s),LY=!0,lV(t,n))},QY.minus=QY.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oV(t,e):XY(t,(e.s=-e.s,e))},QY.modulo=QY.mod=function(e){var t,r=this,a=r.constructor,n=a.precision;if(!(e=new a(e)).s)throw Error(qY+"NaN");return r.s?(LY=!1,t=eV(r,e,0,1).times(e),LY=!0,r.minus(t)):lV(new a(r),n)},QY.naturalExponential=QY.exp=function(){return tV(this)},QY.naturalLogarithm=QY.ln=function(){return sV(this)},QY.negated=QY.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},QY.plus=QY.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XY(t,e):oV(t,(e.s=-e.s,e))},QY.precision=QY.sd=function(e){var t,r,a,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error($Y+e);if(t=rV(n)+1,r=7*(a=n.d.length-1)+1,a=n.d[a]){for(;a%10==0;a/=10)r--;for(a=n.d[0];a>=10;a/=10)r++}return e&&t>r?t:r},QY.squareRoot=QY.sqrt=function(){var e,t,r,a,n,s,i,l=this,o=l.constructor;if(l.s<1){if(!l.s)return new o(0);throw Error(qY+"NaN")}for(e=rV(l),LY=!1,0==(n=Math.sqrt(+l))||n==1/0?(((t=JY(l.d)).length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=UY((e+1)/2)-(e<0||e%2),a=new o(t=n==1/0?"5e"+e:(t=n.toExponential()).slice(0,t.indexOf("e")+1)+e)):a=new o(n.toString()),n=i=(r=o.precision)+3;;)if(a=(s=a).plus(eV(l,s,i+2)).times(.5),JY(s.d).slice(0,i)===(t=JY(a.d)).slice(0,i)){if(t=t.slice(i-3,i+1),n==i&&"4999"==t){if(lV(s,r+1,0),s.times(s).eq(l)){a=s;break}}else if("9999"!=t)break;i+=4}return LY=!0,lV(a,r)},QY.times=QY.mul=function(e){var t,r,a,n,s,i,l,o,c,d=this,u=d.constructor,m=d.d,h=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,r=d.e+e.e,(o=m.length)<(c=h.length)&&(s=m,m=h,h=s,i=o,o=c,c=i),s=[],a=i=o+c;a--;)s.push(0);for(a=c;--a>=0;){for(t=0,n=o+a;n>a;)l=s[n]+h[a]*m[n-a-1]+t,s[n--]=l%VY|0,t=l/VY|0;s[n]=(s[n]+t)%VY|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,LY?lV(e,u.precision):e},QY.toDecimalPlaces=QY.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),void 0===e?r:(ZY(e,0,BY),void 0===t?t=a.rounding:ZY(t,0,8),lV(r,e+rV(r)+1,t))},QY.toExponential=function(e,t){var r,a=this,n=a.constructor;return void 0===e?r=cV(a,!0):(ZY(e,0,BY),void 0===t?t=n.rounding:ZY(t,0,8),r=cV(a=lV(new n(a),e+1,t),!0,e+1)),r},QY.toFixed=function(e,t){var r,a,n=this,s=n.constructor;return void 0===e?cV(n):(ZY(e,0,BY),void 0===t?t=s.rounding:ZY(t,0,8),r=cV((a=lV(new s(n),e+rV(n)+1,t)).abs(),!1,e+rV(a)+1),n.isneg()&&!n.isZero()?"-"+r:r)},QY.toInteger=QY.toint=function(){var e=this,t=e.constructor;return lV(new t(e),rV(e)+1,t.rounding)},QY.toNumber=function(){return+this},QY.toPower=QY.pow=function(e){var t,r,a,n,s,i,l=this,o=l.constructor,c=+(e=new o(e));if(!e.s)return new o(FY);if(!(l=new o(l)).s){if(e.s<1)throw Error(qY+"Infinity");return l}if(l.eq(FY))return l;if(a=o.precision,e.eq(FY))return lV(l,a);if(i=(t=e.e)>=(r=e.d.length-1),s=l.s,i){if((r=c<0?-c:c)<=GY){for(n=new o(FY),t=Math.ceil(a/7+4),LY=!1;r%2&&dV((n=n.times(l)).d,t),0!==(r=UY(r/2));)dV((l=l.times(l)).d,t);return LY=!0,e.s<0?new o(FY).div(n):lV(n,a)}}else if(s<0)throw Error(qY+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,l.s=1,LY=!1,n=e.times(sV(l,a+12)),LY=!0,(n=tV(n)).s=s,n},QY.toPrecision=function(e,t){var r,a,n=this,s=n.constructor;return void 0===e?a=cV(n,(r=rV(n))<=s.toExpNeg||r>=s.toExpPos):(ZY(e,1,BY),void 0===t?t=s.rounding:ZY(t,0,8),a=cV(n=lV(new s(n),e,t),e<=(r=rV(n))||r<=s.toExpNeg,e)),a},QY.toSignificantDigits=QY.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(ZY(e,1,BY),void 0===t?t=r.rounding:ZY(t,0,8)),lV(new r(this),e,t)},QY.toString=QY.valueOf=QY.val=QY.toJSON=QY[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=rV(e),r=e.constructor;return cV(e,t<=r.toExpNeg||t>=r.toExpPos)};var eV=function(){function e(e,t){var r,a=0,n=e.length;for(e=e.slice();n--;)r=e[n]*t+a,e[n]=r%VY|0,a=r/VY|0;return a&&e.unshift(a),e}function t(e,t,r,a){var n,s;if(r!=a)s=r>a?1:-1;else for(n=s=0;n<r;n++)if(e[n]!=t[n]){s=e[n]>t[n]?1:-1;break}return s}function r(e,t,r){for(var a=0;r--;)e[r]-=a,a=e[r]<t[r]?1:0,e[r]=a*VY+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(a,n,s,i){var l,o,c,d,u,m,h,p,x,g,f,y,v,b,j,k,w,N,_=a.constructor,S=a.s==n.s?1:-1,C=a.d,T=n.d;if(!a.s)return new _(a);if(!n.s)throw Error(qY+"Division by zero");for(o=a.e-n.e,w=T.length,j=C.length,p=(h=new _(S)).d=[],c=0;T[c]==(C[c]||0);)++c;if(T[c]>(C[c]||0)&&--o,(y=null==s?s=_.precision:i?s+(rV(a)-rV(n))+1:s)<0)return new _(0);if(y=y/7+2|0,c=0,1==w)for(d=0,T=T[0],y++;(c<j||d)&&y--;c++)v=d*VY+(C[c]||0),p[c]=v/T|0,d=v%T|0;else{for((d=VY/(T[0]+1)|0)>1&&(T=e(T,d),C=e(C,d),w=T.length,j=C.length),b=w,g=(x=C.slice(0,w)).length;g<w;)x[g++]=0;(N=T.slice()).unshift(0),k=T[0],T[1]>=VY/2&&++k;do{d=0,(l=t(T,x,w,g))<0?(f=x[0],w!=g&&(f=f*VY+(x[1]||0)),(d=f/k|0)>1?(d>=VY&&(d=VY-1),1==(l=t(u=e(T,d),x,m=u.length,g=x.length))&&(d--,r(u,w<m?N:T,m))):(0==d&&(l=d=1),u=T.slice()),(m=u.length)<g&&u.unshift(0),r(x,u,g),-1==l&&(l=t(T,x,w,g=x.length))<1&&(d++,r(x,w<g?N:T,g)),g=x.length):0===l&&(d++,x=[0]),p[c++]=d,l&&x[0]?x[g++]=C[b]||0:(x=[C[b]],g=1)}while((b++<j||void 0!==x[0])&&y--)}return p[0]||p.shift(),h.e=o,lV(h,i?s+rV(h)+1:s)}}();function tV(e,t){var r,a,n,s,i,l=0,o=0,c=e.constructor,d=c.precision;if(rV(e)>16)throw Error(KY+rV(e));if(!e.s)return new c(FY);for(null==t?(LY=!1,i=d):i=t,s=new c(.03125);e.abs().gte(.1);)e=e.times(s),o+=5;for(i+=Math.log(HY(2,o))/Math.LN10*2+5|0,r=a=n=new c(FY),c.precision=i;;){if(a=lV(a.times(e),i),r=r.times(++l),JY((s=n.plus(eV(a,r,i))).d).slice(0,i)===JY(n.d).slice(0,i)){for(;o--;)n=lV(n.times(n),i);return c.precision=d,null==t?(LY=!0,lV(n,d)):n}n=s}}function rV(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function aV(e,t,r){if(t>e.LN10.sd())throw LY=!0,r&&(e.precision=r),Error(qY+"LN10 precision limit exceeded");return lV(new e(e.LN10),t)}function nV(e){for(var t="";e--;)t+="0";return t}function sV(e,t){var r,a,n,s,i,l,o,c,d,u=1,m=e,h=m.d,p=m.constructor,x=p.precision;if(m.s<1)throw Error(qY+(m.s?"NaN":"-Infinity"));if(m.eq(FY))return new p(0);if(null==t?(LY=!1,c=x):c=t,m.eq(10))return null==t&&(LY=!0),aV(p,c);if(c+=10,p.precision=c,a=(r=JY(h)).charAt(0),s=rV(m),!(Math.abs(s)<15e14))return o=aV(p,c+2,x).times(s+""),m=sV(new p(a+"."+r.slice(1)),c-10).plus(o),p.precision=x,null==t?(LY=!0,lV(m,x)):m;for(;a<7&&1!=a||1==a&&r.charAt(1)>3;)a=(r=JY((m=m.times(e)).d)).charAt(0),u++;for(s=rV(m),a>1?(m=new p("0."+r),s++):m=new p(a+"."+r.slice(1)),l=i=m=eV(m.minus(FY),m.plus(FY),c),d=lV(m.times(m),c),n=3;;){if(i=lV(i.times(d),c),JY((o=l.plus(eV(i,new p(n),c))).d).slice(0,c)===JY(l.d).slice(0,c))return l=l.times(2),0!==s&&(l=l.plus(aV(p,c+2,x).times(s+""))),l=eV(l,new p(u),c),p.precision=x,null==t?(LY=!0,lV(l,x)):l;l=o,n+=2}}function iV(e,t){var r,a,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;48===t.charCodeAt(a);)++a;for(n=t.length;48===t.charCodeAt(n-1);)--n;if(t=t.slice(a,n)){if(n-=a,r=r-a-1,e.e=UY(r/7),e.d=[],a=(r+1)%7,r<0&&(a+=7),a<n){for(a&&e.d.push(+t.slice(0,a)),n-=7;a<n;)e.d.push(+t.slice(a,a+=7));a=7-(t=t.slice(a)).length}else a-=n;for(;a--;)t+="0";if(e.d.push(+t),LY&&(e.e>WY||e.e<-WY))throw Error(KY+r)}else e.s=0,e.e=0,e.d=[0];return e}function lV(e,t,r){var a,n,s,i,l,o,c,d,u=e.d;for(i=1,s=u[0];s>=10;s/=10)i++;if((a=t-i)<0)a+=7,n=t,c=u[d=0];else{if((d=Math.ceil((a+1)/7))>=(s=u.length))return e;for(c=s=u[d],i=1;s>=10;s/=10)i++;n=(a%=7)-7+i}if(void 0!==r&&(l=c/(s=HY(10,i-n-1))%10|0,o=t<0||void 0!==u[d+1]||c%s,o=r<4?(l||o)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||o||6==r&&(a>0?n>0?c/HY(10,i-n):0:u[d-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return o?(s=rV(e),u.length=1,t=t-s-1,u[0]=HY(10,(7-t%7)%7),e.e=UY(-t/7)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(0==a?(u.length=d,s=1,d--):(u.length=d+1,s=HY(10,7-a),u[d]=n>0?(c/HY(10,i-n)%HY(10,n)|0)*s:0),o)for(;;){if(0==d){(u[0]+=s)==VY&&(u[0]=1,++e.e);break}if(u[d]+=s,u[d]!=VY)break;u[d--]=0,s=1}for(a=u.length;0===u[--a];)u.pop();if(LY&&(e.e>WY||e.e<-WY))throw Error(KY+rV(e));return e}function oV(e,t){var r,a,n,s,i,l,o,c,d,u,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),LY?lV(t,h):t;if(o=e.d,u=t.d,a=t.e,c=e.e,o=o.slice(),i=c-a){for((d=i<0)?(r=o,i=-i,l=u.length):(r=u,a=c,l=o.length),i>(n=Math.max(Math.ceil(h/7),l)+2)&&(i=n,r.length=1),r.reverse(),n=i;n--;)r.push(0);r.reverse()}else{for((d=(n=o.length)<(l=u.length))&&(l=n),n=0;n<l;n++)if(o[n]!=u[n]){d=o[n]<u[n];break}i=0}for(d&&(r=o,o=u,u=r,t.s=-t.s),l=o.length,n=u.length-l;n>0;--n)o[l++]=0;for(n=u.length;n>i;){if(o[--n]<u[n]){for(s=n;s&&0===o[--s];)o[s]=VY-1;--o[s],o[n]+=VY}o[n]-=u[n]}for(;0===o[--l];)o.pop();for(;0===o[0];o.shift())--a;return o[0]?(t.d=o,t.e=a,LY?lV(t,h):t):new m(0)}function cV(e,t,r){var a,n=rV(e),s=JY(e.d),i=s.length;return t?(r&&(a=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+nV(a):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n<0?"e":"e+")+n):n<0?(s="0."+nV(-n-1)+s,r&&(a=r-i)>0&&(s+=nV(a))):n>=i?(s+=nV(n+1-i),r&&(a=r-n-1)>0&&(s=s+"."+nV(a))):((a=n+1)<i&&(s=s.slice(0,a)+"."+s.slice(a)),r&&(a=r-i)>0&&(n+1===i&&(s+="."),s+=nV(a))),e.s<0?"-"+s:s}function dV(e,t){if(e.length>t)return e.length=t,!0}function uV(e){if(!e||"object"!=typeof e)throw Error(qY+"Object expected");var t,r,a,n=["precision",1,BY,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if(void 0!==(a=e[r=n[t]])){if(!(UY(a)===a&&a>=n[t+1]&&a<=n[t+2]))throw Error($Y+r+": "+a);this[r]=a}if(void 0!==(a=e[r="LN10"])){if(a!=Math.LN10)throw Error($Y+r+": "+a);this[r]=new this(a)}return this}var mV=function e(t){var r,a,n;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error($Y+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):iV(t,e.toString())}if("string"!=typeof e)throw Error($Y+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!YY.test(e))throw Error($Y+e);iV(t,e)}if(s.prototype=QY,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=uV,void 0===t&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<n.length;)t.hasOwnProperty(a=n[r++])||(t[a]=this[a]);return s.config(t),s}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});FY=new mV(1);const hV=mV;function pV(e){return function(e){if(Array.isArray(e))return xV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return xV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xV(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var gV=function(e){return e},fV={"@@functional/placeholder":!0},yV=function(e){return e===fV},vV=function(e){return function t(){return 0===arguments.length||1===arguments.length&&yV(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},bV=function e(t,r){return 1===t?r:vV((function(){for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];var i=n.filter((function(e){return e!==fV})).length;return i>=t?r.apply(void 0,n):e(t-i,vV((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var s=n.map((function(e){return yV(e)?t.shift():e}));return r.apply(void 0,pV(s).concat(t))})))}))},jV=function(e){return bV(e.length,e)},kV=function(e,t){for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},wV=jV((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),NV=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},_V=function(e){var t=null,r=null;return function(){for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return t&&n.every((function(e,r){return e===t[r]}))?r:(t=n,r=e.apply(void 0,n))}};const SV={rangeStep:function(e,t,r){for(var a=new hV(e),n=0,s=[];a.lt(t)&&n<1e5;)s.push(a.toNumber()),a=a.add(r),n++;return s},getDigitCount:function(e){return 0===e?1:Math.floor(new hV(e).abs().log(10).toNumber())+1},interpolateNumber:jV((function(e,t,r){var a=+e;return a+r*(+t-a)})),uninterpolateNumber:jV((function(e,t,r){var a=t-+e;return(r-e)/(a=a||1/0)})),uninterpolateTruncation:jV((function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))}))};function CV(e){return function(e){if(Array.isArray(e))return PV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||OV(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(o){n=!0,s=o}finally{try{a||null==l.return||l.return()}finally{if(n)throw s}}return r}(e,t)||OV(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OV(e,t){if(e){if("string"==typeof e)return PV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?PV(e,t):void 0}}function PV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function AV(e){var t=TV(e,2),r=t[0],a=t[1],n=r,s=a;return r>a&&(n=a,s=r),[n,s]}function EV(e,t,r){if(e.lte(0))return new hV(0);var a=SV.getDigitCount(e.toNumber()),n=new hV(10).pow(a),s=e.div(n),i=1!==a?.05:.1,l=new hV(Math.ceil(s.div(i).toNumber())).add(r).mul(i).mul(n);return t?l:new hV(Math.ceil(l))}function DV(e,t,r){var a=1,n=new hV(e);if(!n.isint()&&r){var s=Math.abs(e);s<1?(a=new hV(10).pow(SV.getDigitCount(e)-1),n=new hV(Math.floor(n.div(a).toNumber())).mul(a)):s>1&&(n=new hV(Math.floor(e)))}else 0===e?n=new hV(Math.floor((t-1)/2)):r||(n=new hV(Math.floor(e)));var i=Math.floor((t-1)/2),l=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return gV;var a=t.reverse(),n=a[0],s=a.slice(1);return function(){return s.reduce((function(e,t){return t(e)}),n.apply(void 0,arguments))}}(wV((function(e){return n.add(new hV(e-i).mul(a)).toNumber()})),kV);return l(0,t)}function MV(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new hV(0),tickMin:new hV(0),tickMax:new hV(0)};var s,i=EV(new hV(t).sub(e).div(r-1),a,n);s=e<=0&&t>=0?new hV(0):(s=new hV(e).add(t).div(2)).sub(new hV(s).mod(i));var l=Math.ceil(s.sub(e).div(i).toNumber()),o=Math.ceil(new hV(t).sub(s).div(i).toNumber()),c=l+o+1;return c>r?MV(e,t,r,a,n+1):(c<r&&(o=t>0?o+(r-c):o,l=t>0?l:l+(r-c)),{step:i,tickMin:s.sub(new hV(l).mul(i)),tickMax:s.add(new hV(o).mul(i))})}var zV=_V((function(e){var t=TV(e,2),r=t[0],a=t[1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(n,2),l=TV(AV([r,a]),2),o=l[0],c=l[1];if(o===-1/0||c===1/0){var d=c===1/0?[o].concat(CV(kV(0,n-1).map((function(){return 1/0})))):[].concat(CV(kV(0,n-1).map((function(){return-1/0}))),[c]);return r>a?NV(d):d}if(o===c)return DV(o,n,s);var u=MV(o,c,i,s),m=u.step,h=u.tickMin,p=u.tickMax,x=SV.rangeStep(h,p.add(new hV(.1).mul(m)),m);return r>a?NV(x):x})),RV=_V((function(e,t){var r=TV(e,2),a=r[0],n=r[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=TV(AV([a,n]),2),l=i[0],o=i[1];if(l===-1/0||o===1/0)return[a,n];if(l===o)return[l];var c=Math.max(t,2),d=EV(new hV(o).sub(l).div(c-1),s,0),u=[].concat(CV(SV.rangeStep(new hV(l),new hV(o).sub(new hV(.99).mul(d)),d)),[o]);return a>n?NV(u):u}));function IV(e,t){throw new Error("Invariant failed")}var FV=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function BV(e){return(BV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LV(){return LV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},LV.apply(this,arguments)}function qV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function KV(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function UV(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QV(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HV(e,t,r){return t=VV(t),function(e,t){if(t&&("object"===BV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,YV()?Reflect.construct(t,r||[],VV(e).constructor):t.apply(e,r))}function YV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YV=function(){return!!e})()}function VV(e){return(VV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GV(e,t){return(GV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WV(e,t,r){return(t=QV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QV(e){var t=function(e,t){if("object"!=BV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=BV(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BV(t)?t:t+""}var XV=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),HV(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GV(e,t)}(e,Re.Component),UV(e,[{key:"render",value:function(){var e=this.props,t=e.offset,r=e.layout,a=e.width,n=e.dataKey,s=e.data,i=e.dataPointFormatter,l=e.xAxis,o=e.yAxis,c=KV(e,FV),d=BE(c,!1);"x"===this.props.direction&&"number"!==l.type&&IV();var u=s.map((function(e){var s=i(e,n),c=s.x,u=s.y,m=s.value,h=s.errorVal;if(!h)return null;var p,x,g=[];if(Array.isArray(h)){var f=qV(h,2);p=f[0],x=f[1]}else p=x=h;if("vertical"===r){var y=l.scale,v=u+t,b=v+a,j=v-a,k=y(m-p),w=y(m+x);g.push({x1:w,y1:b,x2:w,y2:j}),g.push({x1:k,y1:v,x2:w,y2:v}),g.push({x1:k,y1:b,x2:k,y2:j})}else if("horizontal"===r){var N=o.scale,_=c+t,S=_-a,C=_+a,T=N(m-p),O=N(m+x);g.push({x1:S,y1:O,x2:C,y2:O}),g.push({x1:_,y1:T,x2:_,y2:O}),g.push({x1:S,y1:T,x2:C,y2:T})}return Re.createElement(QE,LV({className:"recharts-errorBar",key:"bar-".concat(g.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},d),g.map((function(e){return Re.createElement("line",LV({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return Re.createElement(QE,{className:"recharts-errorBars"},u)}}])}();function ZV(e){return(ZV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function eG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JV(Object(r),!0).forEach((function(t){tG(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JV(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tG(e,t,r){var a;return a=function(e,t){if("object"!=ZV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=ZV(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ZV(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}WV(XV,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),WV(XV,"displayName","ErrorBar");var rG=function(e){var t=e.children,r=e.formattedGraphicalItems,a=e.legendWidth,n=e.legendContent,s=zE(t,$F);if(!s)return null;var i,l=$F.defaultProps,o=void 0!==l?eG(eG({},l),s.props):{};return i=s.props&&s.props.payload?s.props&&s.props.payload:"children"===n?(r||[]).reduce((function(e,t){var r=t.item,a=t.props,n=a.sectors||a.data||[];return e.concat(n.map((function(e){return{type:s.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(r||[]).map((function(e){var t=e.item,r=t.type.defaultProps,a=void 0!==r?eG(eG({},r),t.props):{},n=a.dataKey,s=a.name,i=a.legendType;return{inactive:a.hide,dataKey:n,type:o.iconType||i||"square",color:uG(t),value:s||n,payload:a}})),eG(eG(eG({},o),$F.getWithHeight(s,a)),{},{payload:i,item:s})};function aG(e){return(aG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nG(e){return function(e){if(Array.isArray(e))return sG(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return sG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sG(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function iG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function lG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iG(Object(r),!0).forEach((function(t){oG(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oG(e,t,r){var a;return a=function(e,t){if("object"!=aG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=aG(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==aG(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cG(e,t,r){return PA(e)||PA(t)?r:cE(t)?OA(e,t,r):FO(t)?t(e):r}function dG(e,t,r,a){var n=zY(e,(function(e){return cG(e,t)}));if("number"===r){var s=n.filter((function(e){return oE(e)||parseFloat(e)}));return s.length?[TY(s),wY(s)]:[1/0,-1/0]}return(a?n.filter((function(e){return!PA(e)})):n).map((function(e){return cE(e)||e instanceof Date?e:""}))}var uG=function(e){var t,r,a=e.type.displayName,n=null!==(t=e.type)&&void 0!==t&&t.defaultProps?lG(lG({},e.type.defaultProps),e.props):e.props,s=n.stroke,i=n.fill;switch(a){case"Line":r=s;break;case"Area":case"Radar":r=s&&"none"!==s?s:i;break;default:r=i}return r},mG=function(e,t,r,a,n){var s=ME(t.props.children,XV).filter((function(e){return function(e,t,r){return!!PA(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===r?"xAxis"===t:"y"!==r||"yAxis"===t)}(a,n,e.props.direction)}));if(s&&s.length){var i=s.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var a=cG(t,r);if(PA(a))return e;var n=Array.isArray(a)?[TY(a),wY(a)]:[a,a],s=i.reduce((function(e,r){var a=cG(t,r,0),s=n[0]-Math.abs(Array.isArray(a)?a[0]:a),i=n[1]+Math.abs(Array.isArray(a)?a[1]:a);return[Math.min(s,e[0]),Math.max(i,e[1])]}),[1/0,-1/0]);return[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}),[1/0,-1/0])}return null},hG=function(e,t,r,a,n){var s=t.map((function(t){var s=t.props.dataKey;return"number"===r&&s&&mG(e,t,s,a)||dG(e,s,r,n)}));if("number"===r)return s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var i={};return s.reduce((function(e,t){for(var r=0,a=t.length;r<a;r++)i[t[r]]||(i[t[r]]=!0,e.push(t[r]));return e}),[])},pG=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},xG=function(e,t,r,a){if(a)return e.map((function(e){return e.coordinate}));var n,s,i=e.map((function(e){return e.coordinate===t&&(n=!0),e.coordinate===r&&(s=!0),e.coordinate}));return n||i.push(t),s||i.push(r),i},gG=function(e,t,r){if(!e)return null;var a=e.scale,n=e.duplicateDomain,s=e.type,i=e.range,l="scaleBand"===e.realScaleType?a.bandwidth()/2:2,o=(t||r)&&"category"===s&&a.bandwidth?a.bandwidth()/l:0;return o="angleAxis"===e.axisType&&(null==i?void 0:i.length)>=2?2*iE(i[0]-i[1])*o:o,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=n?n.indexOf(e):e;return{coordinate:a(t)+o,value:e,offset:o}})).filter((function(e){return!sE(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:a(e)+o,value:e,index:t,offset:o}})):a.ticks&&!r?a.ticks(e.tickCount).map((function(e){return{coordinate:a(e)+o,value:e,offset:o}})):a.domain().map((function(e,t){return{coordinate:a(e)+o,value:n?n[e]:e,index:t,offset:o}}))},fG=new WeakMap,yG=function(e,t){if("function"!=typeof t)return e;fG.has(e)||fG.set(e,new WeakMap);var r=fG.get(e);if(r.has(t))return r.get(t);var a=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,a),a},vG=function(e,t,r){var a=e.scale,n=e.type,s=e.layout,i=e.axisType;if("auto"===a)return"radial"===s&&"radiusAxis"===i?{scale:o$(),realScaleType:"band"}:"radial"===s&&"angleAxis"===i?{scale:AK(),realScaleType:"linear"}:"category"===n&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:d$(),realScaleType:"point"}:"category"===n?{scale:o$(),realScaleType:"band"}:{scale:AK(),realScaleType:"linear"};if(MA(a)){var l="scale".concat(kD(a));return{scale:(gY[l]||d$)(),realScaleType:gY[l]?l:"point"}}return FO(a)?{scale:a}:{scale:d$(),realScaleType:"point"}},bG=1e-4,jG=function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,a=e.range(),n=Math.min(a[0],a[1])-bG,s=Math.max(a[0],a[1])+bG,i=e(t[0]),l=e(t[r-1]);(i<n||i>s||l<n||l>s)&&e.domain([t[0],t[r-1]])}},kG={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var n=0,s=0,i=0;i<t;++i){var l=sE(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=n,e[i][r][1]=n+l,n=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1])}},expand:function(e,t){if((a=e.length)>0){for(var r,a,n,s=0,i=e[0].length;s<i;++s){for(n=r=0;r<a;++r)n+=e[r][s][1]||0;if(n)for(r=0;r<a;++r)e[r][s][1]/=n}wM(e,t)}},none:wM,silhouette:function(e,t){if((r=e.length)>0){for(var r,a=0,n=e[t[0]],s=n.length;a<s;++a){for(var i=0,l=0;i<r;++i)l+=e[i][a][1]||0;n[a][1]+=n[a][0]=-l/2}wM(e,t)}},wiggle:function(e,t){if((n=e.length)>0&&(a=(r=e[t[0]]).length)>0){for(var r,a,n,s=0,i=1;i<a;++i){for(var l=0,o=0,c=0;l<n;++l){for(var d=e[t[l]],u=d[i][1]||0,m=(u-(d[i-1][1]||0))/2,h=0;h<l;++h){var p=e[t[h]];m+=(p[i][1]||0)-(p[i-1][1]||0)}o+=u,c+=m*u}r[i-1][1]+=r[i-1][0]=s,o&&(s-=c/o)}r[i-1][1]+=r[i-1][0]=s,wM(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var n=0,s=0;s<t;++s){var i=sE(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=n,e[s][r][1]=n+i,n=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}}},wG=function(e,t,r){var a=t.map((function(e){return e.props.dataKey})),n=kG[r],s=function(){var e=wD([]),t=NM,r=wM,a=_M;function n(n){var s,i,l=Array.from(e.apply(this,arguments),SM),o=l.length,c=-1;for(const e of n)for(s=0,++c;s<o;++s)(l[s][c]=[0,+a(e,l[s].key,c,n)]).data=e;for(s=0,i=RD(t(l));s<o;++s)l[i[s]].index=s;return r(l,i),l}return n.keys=function(t){return arguments.length?(e="function"==typeof t?t:wD(Array.from(t)),n):e},n.value=function(e){return arguments.length?(a="function"==typeof e?e:wD(+e),n):a},n.order=function(e){return arguments.length?(t=null==e?NM:"function"==typeof e?e:wD(Array.from(e)),n):t},n.offset=function(e){return arguments.length?(r=null==e?wM:e,n):r},n}().keys(a).value((function(e,t){return+cG(e,t,0)})).order(NM).offset(n);return s(e)},NG=function(e,t){var r=t.realScaleType,a=t.type,n=t.tickCount,s=t.originalDomain,i=t.allowDecimals,l=r||t.scale;if("auto"!==l&&"linear"!==l)return null;if(n&&"number"===a&&s&&("auto"===s[0]||"auto"===s[1])){var o=e.domain();if(!o.length)return null;var c=zV(o,n,i);return e.domain([TY(c),wY(c)]),{niceTicks:c}}if(n&&"number"===a){var d=e.domain();return{niceTicks:RV(d,n,i)}}return null};function _G(e){var t=e.axis,r=e.ticks,a=e.bandSize,n=e.entry,s=e.index,i=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!PA(n[t.dataKey])){var l=xE(r,"value",n[t.dataKey]);if(l)return l.coordinate+a/2}return r[s]?r[s].coordinate+a/2:null}var o=cG(n,PA(i)?t.dataKey:i);return PA(o)?null:t.scale(o)}var SG=function(e){var t=e.axis,r=e.ticks,a=e.offset,n=e.bandSize,s=e.entry,i=e.index;if("category"===t.type)return r[i]?r[i].coordinate+a:null;var l=cG(s,t.dataKey,t.domain[i]);return PA(l)?null:t.scale(l)-n/2+a},CG=function(e,t,r){return Object.keys(e).reduce((function(a,n){var s=e[n].stackedData.reduce((function(e,a){var n=a.slice(t,r+1).reduce((function(e,t){return[TY(t.concat([e[0]]).filter(oE)),wY(t.concat([e[1]]).filter(oE))]}),[1/0,-1/0]);return[Math.min(e[0],n[0]),Math.max(e[1],n[1])]}),[1/0,-1/0]);return[Math.min(s[0],a[0]),Math.max(s[1],a[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},TG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,OG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PG=function(e,t,r){if(FO(e))return e(t,r);if(!Array.isArray(e))return t;var a=[];if(oE(e[0]))a[0]=r?e[0]:Math.min(e[0],t[0]);else if(TG.test(e[0])){var n=+TG.exec(e[0])[1];a[0]=t[0]-n}else FO(e[0])?a[0]=e[0](t[0]):a[0]=t[0];if(oE(e[1]))a[1]=r?e[1]:Math.max(e[1],t[1]);else if(OG.test(e[1])){var s=+OG.exec(e[1])[1];a[1]=t[1]+s}else FO(e[1])?a[1]=e[1](t[1]):a[1]=t[1];return a},AG=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var n=IB(t,(function(e){return e.coordinate})),s=1/0,i=1,l=n.length;i<l;i++){var o=n[i],c=n[i-1];s=Math.min((o.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},EG=function(e,t,r){return e&&e.length?IY(e,OA(r,"type.defaultProps.domain"))?t:e:t},DG=function(e,t){var r=e.type.defaultProps?lG(lG({},e.type.defaultProps),e.props):e.props,a=r.dataKey,n=r.name,s=r.unit,i=r.formatter,l=r.tooltipType,o=r.chartType,c=r.hide;return lG(lG({},BE(e,!1)),{},{dataKey:a,unit:s,formatter:i,name:n||a,color:uG(e),value:cG(t,a),type:l,payload:t,chartType:o,hide:c})};function MG(e){return(MG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function RG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zG(Object(r),!0).forEach((function(t){IG(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zG(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function IG(e,t,r){var a;return a=function(e,t){if("object"!=MG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=MG(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==MG(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return BG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BG(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var LG=Math.PI/180,qG=function(e){return 180*e/Math.PI},$G=function(e,t,r,a){return{x:e+Math.cos(-LG*a)*r,y:t+Math.sin(-LG*a)*r}},KG=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},UG=function(e,t){var r=e.x,a=e.y,n=t.cx,s=t.cy,i=function(e,t){var r=e.x,a=e.y,n=t.x,s=t.y;return Math.sqrt(Math.pow(r-n,2)+Math.pow(a-s,2))}({x:r,y:a},{x:n,y:s});if(i<=0)return{radius:i};var l=(r-n)/i,o=Math.acos(l);return a>s&&(o=2*Math.PI-o),{radius:i,angle:qG(o),angleInRadian:o}},HG=function(e,t){var r=t.startAngle,a=t.endAngle,n=Math.floor(r/360),s=Math.floor(a/360);return e+360*Math.min(n,s)},YG=function(e,t){var r=e.x,a=e.y,n=UG({x:r,y:a},t),s=n.radius,i=n.angle,l=t.innerRadius,o=t.outerRadius;if(s<l||s>o)return!1;if(0===s)return!0;var c,d=function(e){var t=e.startAngle,r=e.endAngle,a=Math.floor(t/360),n=Math.floor(r/360),s=Math.min(a,n);return{startAngle:t-360*s,endAngle:r-360*s}}(t),u=d.startAngle,m=d.endAngle,h=i;if(u<=m){for(;h>m;)h-=360;for(;h<u;)h+=360;c=h>=u&&h<=m}else{for(;h>u;)h-=360;for(;h<m;)h+=360;c=h>=m&&h<=u}return c?RG(RG({},t),{},{radius:s,angle:HG(h,t)}):null},VG=function(e){return ze.isValidElement(e)||FO(e)||"boolean"==typeof e?"":e.className};function GG(e){return(GG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WG=["offset"];function QG(e){return function(e){if(Array.isArray(e))return XG(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return XG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XG(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ZG(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function JG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function eW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JG(Object(r),!0).forEach((function(t){tW(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JG(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tW(e,t,r){var a;return a=function(e,t){if("object"!=GG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=GG(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==GG(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rW(){return rW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},rW.apply(this,arguments)}var aW=function(e,t,r){var a,n,s=e.position,i=e.viewBox,l=e.offset,o=e.className,c=i,d=c.cx,u=c.cy,m=c.innerRadius,h=c.outerRadius,p=c.startAngle,x=c.endAngle,g=c.clockWise,f=(m+h)/2,y=function(e,t){return iE(t-e)*Math.min(Math.abs(t-e),360)}(p,x),v=y>=0?1:-1;"insideStart"===s?(a=p+v*l,n=g):"insideEnd"===s?(a=x-v*l,n=!g):"end"===s&&(a=x+v*l,n=g),n=y<=0?n:!n;var b=$G(d,u,f,a),j=$G(d,u,f,a+359*(n?1:-1)),k="M".concat(b.x,",").concat(b.y,"\n    A").concat(f,",").concat(f,",0,1,").concat(n?0:1,",\n    ").concat(j.x,",").concat(j.y),w=PA(e.id)?uE("recharts-radial-line-"):e.id;return Re.createElement("text",rW({},r,{dominantBaseline:"central",className:Ht("recharts-radial-bar-label",o)}),Re.createElement("defs",null,Re.createElement("path",{id:w,d:k})),Re.createElement("textPath",{xlinkHref:"#".concat(w)},t))};function nW(e){var t,r=e.offset,a=eW({offset:void 0===r?5:r},ZG(e,WG)),n=a.viewBox,s=a.position,i=a.value,l=a.children,o=a.content,c=a.className,d=void 0===c?"":c,u=a.textBreakAll;if(!n||PA(i)&&PA(l)&&!ze.isValidElement(o)&&!FO(o))return null;if(ze.isValidElement(o))return ze.cloneElement(o,a);if(FO(o)){if(t=ze.createElement(o,a),ze.isValidElement(t))return t}else t=function(e){var t=e.value,r=e.formatter,a=PA(e.children)?t:e.children;return FO(r)?r(a):a}(a);var m=function(e){return"cx"in e&&oE(e.cx)}(n),h=BE(a,!0);if(m&&("insideStart"===s||"insideEnd"===s||"end"===s))return aW(a,t,h);var p=m?function(e){var t=e.viewBox,r=e.offset,a=e.position,n=t,s=n.cx,i=n.cy,l=n.innerRadius,o=n.outerRadius,c=(n.startAngle+n.endAngle)/2;if("outside"===a){var d=$G(s,i,o+r,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if("center"===a)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===a)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===a)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=$G(s,i,(l+o)/2,c);return{x:m.x,y:m.y,textAnchor:"middle",verticalAnchor:"middle"}}(a):function(e){var t=e.viewBox,r=e.parentViewBox,a=e.offset,n=e.position,s=t,i=s.x,l=s.y,o=s.width,c=s.height,d=c>=0?1:-1,u=d*a,m=d>0?"end":"start",h=d>0?"start":"end",p=o>=0?1:-1,x=p*a,g=p>0?"end":"start",f=p>0?"start":"end";if("top"===n)return eW(eW({},{x:i+o/2,y:l-d*a,textAnchor:"middle",verticalAnchor:m}),r?{height:Math.max(l-r.y,0),width:o}:{});if("bottom"===n)return eW(eW({},{x:i+o/2,y:l+c+u,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(r.y+r.height-(l+c),0),width:o}:{});if("left"===n){var y={x:i-x,y:l+c/2,textAnchor:g,verticalAnchor:"middle"};return eW(eW({},y),r?{width:Math.max(y.x-r.x,0),height:c}:{})}if("right"===n){var v={x:i+o+x,y:l+c/2,textAnchor:f,verticalAnchor:"middle"};return eW(eW({},v),r?{width:Math.max(r.x+r.width-v.x,0),height:c}:{})}var b=r?{width:o,height:c}:{};return"insideLeft"===n?eW({x:i+x,y:l+c/2,textAnchor:f,verticalAnchor:"middle"},b):"insideRight"===n?eW({x:i+o-x,y:l+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===n?eW({x:i+o/2,y:l+u,textAnchor:"middle",verticalAnchor:h},b):"insideBottom"===n?eW({x:i+o/2,y:l+c-u,textAnchor:"middle",verticalAnchor:m},b):"insideTopLeft"===n?eW({x:i+x,y:l+u,textAnchor:f,verticalAnchor:h},b):"insideTopRight"===n?eW({x:i+o-x,y:l+u,textAnchor:g,verticalAnchor:h},b):"insideBottomLeft"===n?eW({x:i+x,y:l+c-u,textAnchor:f,verticalAnchor:m},b):"insideBottomRight"===n?eW({x:i+o-x,y:l+c-u,textAnchor:g,verticalAnchor:m},b):MO(n)&&(oE(n.x)||lE(n.x))&&(oE(n.y)||lE(n.y))?eW({x:i+mE(n.x,o),y:l+mE(n.y,c),textAnchor:"end",verticalAnchor:"end"},b):eW({x:i+o/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(a);return Re.createElement(zq,rW({className:Ht("recharts-label",d)},h,p,{breakAll:u}),t)}nW.displayName="Label";var sW=function(e){var t=e.cx,r=e.cy,a=e.angle,n=e.startAngle,s=e.endAngle,i=e.r,l=e.radius,o=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,m=e.top,h=e.left,p=e.width,x=e.height,g=e.clockWise,f=e.labelViewBox;if(f)return f;if(oE(p)&&oE(x)){if(oE(d)&&oE(u))return{x:d,y:u,width:p,height:x};if(oE(m)&&oE(h))return{x:m,y:h,width:p,height:x}}return oE(d)&&oE(u)?{x:d,y:u,width:0,height:0}:oE(t)&&oE(r)?{cx:t,cy:r,startAngle:n||a||0,endAngle:s||a||0,innerRadius:o||0,outerRadius:c||l||i||0,clockWise:g}:e.viewBox?e.viewBox:{}};nW.parseViewBox=sW,nW.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var a=e.children,n=sW(e),s=ME(a,nW).map((function(e,r){return ze.cloneElement(e,{viewBox:t||n,key:"label-".concat(r)})}));if(!r)return s;var i=function(e,t){return e?!0===e?Re.createElement(nW,{key:"label-implicit",viewBox:t}):cE(e)?Re.createElement(nW,{key:"label-implicit",viewBox:t,value:e}):ze.isValidElement(e)?e.type===nW?ze.cloneElement(e,{key:"label-implicit",viewBox:t}):Re.createElement(nW,{key:"label-implicit",content:e,viewBox:t}):FO(e)?Re.createElement(nW,{key:"label-implicit",content:e,viewBox:t}):MO(e)?Re.createElement(nW,rW({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||n);return[i].concat(QG(s))};const iW=Le((function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}));function lW(e){return(lW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var oW=["valueAccessor"],cW=["data","dataKey","clockWise","id","textBreakAll"];function dW(e){return function(e){if(Array.isArray(e))return uW(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return uW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uW(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function mW(){return mW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mW.apply(this,arguments)}function hW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hW(Object(r),!0).forEach((function(t){xW(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hW(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xW(e,t,r){var a;return a=function(e,t){if("object"!=lW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=lW(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==lW(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gW(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var fW=function(e){return Array.isArray(e.value)?iW(e.value):e.value};function yW(e){var t=e.valueAccessor,r=void 0===t?fW:t,a=gW(e,oW),n=a.data,s=a.dataKey,i=a.clockWise,l=a.id,o=a.textBreakAll,c=gW(a,cW);return n&&n.length?Re.createElement(QE,{className:"recharts-label-list"},n.map((function(e,t){var a=PA(s)?r(e,t):cG(e&&e.payload,s),n=PA(l)?{}:{id:"".concat(l,"-").concat(t)};return Re.createElement(nW,mW({},BE(e,!0),c,n,{parentViewBox:e.parentViewBox,value:a,textBreakAll:o,viewBox:nW.parseViewBox(PA(i)?e:pW(pW({},e),{},{clockWise:i})),key:"label-".concat(t),index:t}))}))):null}function vW(e){return(vW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bW(){return bW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},bW.apply(this,arguments)}function jW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function kW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jW(Object(r),!0).forEach((function(t){wW(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jW(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wW(e,t,r){var a;return a=function(e,t){if("object"!=vW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=vW(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==vW(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}yW.displayName="LabelList",yW.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var a=ME(e.children,yW).map((function(e,r){return ze.cloneElement(e,{data:t,key:"labelList-".concat(r)})}));return r?[function(e,t){return e?!0===e?Re.createElement(yW,{key:"labelList-implicit",data:t}):Re.isValidElement(e)||FO(e)?Re.createElement(yW,{key:"labelList-implicit",data:t,content:e}):MO(e)?Re.createElement(yW,mW({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(dW(a)):a};var NW=function(e){var t=e.cx,r=e.cy,a=e.radius,n=e.angle,s=e.sign,i=e.isExternal,l=e.cornerRadius,o=e.cornerIsExternal,c=l*(i?1:-1)+a,d=Math.asin(l/c)/LG,u=o?n:n+s*d,m=o?n-s*d:n;return{center:$G(t,r,c,u),circleTangency:$G(t,r,a,u),lineTangency:$G(t,r,c*Math.cos(d*LG),m),theta:d}},_W=function(e){var t=e.cx,r=e.cy,a=e.innerRadius,n=e.outerRadius,s=e.startAngle,i=function(e,t){return iE(t-e)*Math.min(Math.abs(t-e),359.999)}(s,e.endAngle),l=s+i,o=$G(t,r,n,s),c=$G(t,r,n,l),d="M ".concat(o.x,",").concat(o.y,"\n    A ").concat(n,",").concat(n,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(s>l),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(a>0){var u=$G(t,r,a,s),m=$G(t,r,a,l);d+="L ".concat(m.x,",").concat(m.y,"\n            A ").concat(a,",").concat(a,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(s<=l),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},SW={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},CW=function(e){var t=kW(kW({},SW),e),r=t.cx,a=t.cy,n=t.innerRadius,s=t.outerRadius,i=t.cornerRadius,l=t.forceCornerRadius,o=t.cornerIsExternal,c=t.startAngle,d=t.endAngle,u=t.className;if(s<n||c===d)return null;var m,h=Ht("recharts-sector",u),p=s-n,x=mE(i,p,0,!0);return m=x>0&&Math.abs(c-d)<360?function(e){var t=e.cx,r=e.cy,a=e.innerRadius,n=e.outerRadius,s=e.cornerRadius,i=e.forceCornerRadius,l=e.cornerIsExternal,o=e.startAngle,c=e.endAngle,d=iE(c-o),u=NW({cx:t,cy:r,radius:n,angle:o,sign:d,cornerRadius:s,cornerIsExternal:l}),m=u.circleTangency,h=u.lineTangency,p=u.theta,x=NW({cx:t,cy:r,radius:n,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:l}),g=x.circleTangency,f=x.lineTangency,y=x.theta,v=l?Math.abs(o-c):Math.abs(o-c)-p-y;if(v<0)return i?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):_W({cx:t,cy:r,innerRadius:a,outerRadius:n,startAngle:o,endAngle:c});var b="M ".concat(h.x,",").concat(h.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(n,",").concat(n,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,"\n  ");if(a>0){var j=NW({cx:t,cy:r,radius:a,angle:o,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),k=j.circleTangency,w=j.lineTangency,N=j.theta,_=NW({cx:t,cy:r,radius:a,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),S=_.circleTangency,C=_.lineTangency,T=_.theta,O=l?Math.abs(o-c):Math.abs(o-c)-N-T;if(O<0&&0===s)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(C.x,",").concat(C.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,"\n      A").concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(d>0),",").concat(k.x,",").concat(k.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b}({cx:r,cy:a,innerRadius:n,outerRadius:s,cornerRadius:Math.min(x,p/2),forceCornerRadius:l,cornerIsExternal:o,startAngle:c,endAngle:d}):_W({cx:r,cy:a,innerRadius:n,outerRadius:s,startAngle:c,endAngle:d}),Re.createElement("path",bW({},BE(t,!0),{className:h,d:m,role:"img"}))};function TW(e){return(TW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OW(){return OW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},OW.apply(this,arguments)}function PW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function AW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PW(Object(r),!0).forEach((function(t){EW(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PW(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function EW(e,t,r){var a;return a=function(e,t){if("object"!=TW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=TW(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==TW(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var DW={curveBasisClosed:function(e){return new dM(e)},curveBasisOpen:function(e){return new uM(e)},curveBasis:function(e){return new cM(e)},curveBumpX:function(e){return new KD(e,!0)},curveBumpY:function(e){return new KD(e,!1)},curveLinearClosed:function(e){return new mM(e)},curveLinear:FD,curveMonotoneX:function(e){return new fM(e)},curveMonotoneY:function(e){return new yM(e)},curveNatural:function(e){return new bM(e)},curveStep:function(e){return new kM(e,.5)},curveStepAfter:function(e){return new kM(e,1)},curveStepBefore:function(e){return new kM(e,0)}},MW=function(e){return e.x===+e.x&&e.y===+e.y},zW=function(e){return e.x},RW=function(e){return e.y},IW=function(e){var t,r=e.type,a=void 0===r?"linear":r,n=e.points,s=void 0===n?[]:n,i=e.baseLine,l=e.layout,o=e.connectNulls,c=void 0!==o&&o,d=function(e,t){if(FO(e))return e;var r="curve".concat(kD(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?DW[r]||FD:DW["".concat(r).concat("vertical"===t?"Y":"X")]}(a,l),u=c?s.filter((function(e){return MW(e)})):s;if(Array.isArray(i)){var m=c?i.filter((function(e){return MW(e)})):i,h=u.map((function(e,t){return AW(AW({},e),{},{base:m[t]})}));return(t="vertical"===l?$D().y(RW).x1(zW).x0((function(e){return e.base.x})):$D().x(zW).y1(RW).y0((function(e){return e.base.y}))).defined(MW).curve(d),t(h)}return(t="vertical"===l&&oE(i)?$D().y(RW).x1(zW).x0(i):oE(i)?$D().x(zW).y1(RW).y0(i):qD().x(zW).y(RW)).defined(MW).curve(d),t(u)},FW=function(e){var t=e.className,r=e.points,a=e.path,n=e.pathRef;if(!(r&&r.length||a))return null;var s=r&&r.length?IW(e):a;return ze.createElement("path",OW({},BE(e,!1),wE(e),{className:Ht("recharts-curve",t),d:s,ref:n}))},BW=Object.getOwnPropertyNames,LW=Object.getOwnPropertySymbols,qW=Object.prototype.hasOwnProperty;function $W(e,t){return function(r,a,n){return e(r,a,n)&&t(r,a,n)}}function KW(e){return function(t,r,a){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,a);var n=a.cache,s=n.get(t),i=n.get(r);if(s&&i)return s===r&&i===t;n.set(t,r),n.set(r,t);var l=e(t,r,a);return n.delete(t),n.delete(r),l}}function UW(e){return BW(e).concat(LW(e))}var HW=Object.hasOwn||function(e,t){return qW.call(e,t)};function YW(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var VW=Object.getOwnPropertyDescriptor,GW=Object.keys;function WW(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function QW(e,t){return YW(e.getTime(),t.getTime())}function XW(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function ZW(e,t){return e===t}function JW(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var n,s,i=new Array(a),l=e.entries(),o=0;(n=l.next())&&!n.done;){for(var c=t.entries(),d=!1,u=0;(s=c.next())&&!s.done;)if(i[u])u++;else{var m=n.value,h=s.value;if(r.equals(m[0],h[0],o,u,e,t,r)&&r.equals(m[1],h[1],m[0],h[0],e,t,r)){d=i[u]=!0;break}u++}if(!d)return!1;o++}return!0}var eQ=YW;function tQ(e,t,r){var a=GW(e),n=a.length;if(GW(t).length!==n)return!1;for(;n-- >0;)if(!oQ(e,t,r,a[n]))return!1;return!0}function rQ(e,t,r){var a,n,s,i=UW(e),l=i.length;if(UW(t).length!==l)return!1;for(;l-- >0;){if(!oQ(e,t,r,a=i[l]))return!1;if(n=VW(e,a),s=VW(t,a),(n||s)&&(!n||!s||n.configurable!==s.configurable||n.enumerable!==s.enumerable||n.writable!==s.writable))return!1}return!0}function aQ(e,t){return YW(e.valueOf(),t.valueOf())}function nQ(e,t){return e.source===t.source&&e.flags===t.flags}function sQ(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var n,s,i=new Array(a),l=e.values();(n=l.next())&&!n.done;){for(var o=t.values(),c=!1,d=0;(s=o.next())&&!s.done;){if(!i[d]&&r.equals(n.value,s.value,n.value,s.value,e,t,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function iQ(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function lQ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function oQ(e,t,r,a){return!("_owner"!==a&&"__o"!==a&&"__v"!==a||!e.$$typeof&&!t.$$typeof)||HW(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}var cQ=Array.isArray,dQ="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,uQ=Object.assign,mQ=Object.prototype.toString.call.bind(Object.prototype.toString);var hQ=pQ();function pQ(e){void 0===e&&(e={});var t,r=e.circular,a=void 0!==r&&r,n=e.createInternalComparator,s=e.createState,i=e.strict,l=void 0!==i&&i,o=function(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,n={areArraysEqual:a?rQ:WW,areDatesEqual:QW,areErrorsEqual:XW,areFunctionsEqual:ZW,areMapsEqual:a?$W(JW,rQ):JW,areNumbersEqual:eQ,areObjectsEqual:a?rQ:tQ,arePrimitiveWrappersEqual:aQ,areRegExpsEqual:nQ,areSetsEqual:a?$W(sQ,rQ):sQ,areTypedArraysEqual:a?rQ:iQ,areUrlsEqual:lQ};if(r&&(n=uQ({},n,r(n))),t){var s=KW(n.areArraysEqual),i=KW(n.areMapsEqual),l=KW(n.areObjectsEqual),o=KW(n.areSetsEqual);n=uQ({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:l,areSetsEqual:o})}return n}(e),c=function(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areErrorsEqual,n=e.areFunctionsEqual,s=e.areMapsEqual,i=e.areNumbersEqual,l=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(e,h,p){if(e===h)return!0;if(null==e||null==h)return!1;var x=typeof e;if(x!==typeof h)return!1;if("object"!==x)return"number"===x?i(e,h,p):"function"===x&&n(e,h,p);var g=e.constructor;if(g!==h.constructor)return!1;if(g===Object)return l(e,h,p);if(cQ(e))return t(e,h,p);if(null!=dQ&&dQ(e))return u(e,h,p);if(g===Date)return r(e,h,p);if(g===RegExp)return c(e,h,p);if(g===Map)return s(e,h,p);if(g===Set)return d(e,h,p);var f=mQ(e);return"[object Date]"===f?r(e,h,p):"[object RegExp]"===f?c(e,h,p):"[object Map]"===f?s(e,h,p):"[object Set]"===f?d(e,h,p):"[object Object]"===f?"function"!=typeof e.then&&"function"!=typeof h.then&&l(e,h,p):"[object URL]"===f?m(e,h,p):"[object Error]"===f?a(e,h,p):"[object Arguments]"===f?l(e,h,p):("[object Boolean]"===f||"[object Number]"===f||"[object String]"===f)&&o(e,h,p)}}(o);return function(e){var t=e.circular,r=e.comparator,a=e.createState,n=e.equals,s=e.strict;if(a)return function(e,i){var l=a(),o=l.cache,c=void 0===o?t?new WeakMap:void 0:o,d=l.meta;return r(e,i,{cache:c,equals:n,meta:d,strict:s})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};var i={cache:void 0,equals:n,meta:void 0,strict:s};return function(e,t){return r(e,t,i)}}({circular:a,comparator:c,createState:s,equals:n?n(c):(t=c,function(e,r,a,n,s,i,l){return t(e,r,l)}),strict:l})}function xQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame((function a(n){r<0&&(r=n),n-r>t?(e(n),r=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(a)}))}function gQ(e){return(gQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fQ(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return yQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yQ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function vQ(){var e=function(){return null},t=!1,r=function r(a){if(!t){if(Array.isArray(a)){if(!a.length)return;var n=fQ(a),s=n[0],i=n.slice(1);return"number"==typeof s?void xQ(r.bind(null,i),s):(r(s),void xQ(r.bind(null,i)))}"object"===gQ(a)&&e(a),"function"==typeof a&&a()}};return{stop:function(){t=!0},start:function(e){t=!1,r(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function bQ(e){return(bQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function kQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jQ(Object(r),!0).forEach((function(t){wQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wQ(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==bQ(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==bQ(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===bQ(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}pQ({strict:!0}),pQ({circular:!0}),pQ({circular:!0,strict:!0}),pQ({createInternalComparator:function(){return YW}}),pQ({strict:!0,createInternalComparator:function(){return YW}}),pQ({circular:!0,createInternalComparator:function(){return YW}}),pQ({circular:!0,createInternalComparator:function(){return YW},strict:!0});var NQ=function(e){return e},_Q=function(e,t){return Object.keys(t).reduce((function(r,a){return kQ(kQ({},r),{},wQ({},a,e(a,t[a])))}),{})},SQ=function(e,t,r){return e.map((function(e){return"".concat((a=e,a.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(r);var a})).join(",")};function CQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||OQ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TQ(e){return function(e){if(Array.isArray(e))return PQ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||OQ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OQ(e,t){if(e){if("string"==typeof e)return PQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?PQ(e,t):void 0}}function PQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var AQ=1e-4,EQ=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},DQ=function(e,t){return e.map((function(e,r){return e*Math.pow(t,r)})).reduce((function(e,t){return e+t}))},MQ=function(e,t){return function(r){var a=EQ(e,t);return DQ(a,r)}},zQ=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],n=t[1],s=t[2],i=t[3];if(1===t.length)switch(t[0]){case"linear":a=0,n=0,s=1,i=1;break;case"ease":a=.25,n=.1,s=.25,i=1;break;case"ease-in":a=.42,n=0,s=1,i=1;break;case"ease-out":a=.42,n=0,s=.58,i=1;break;case"ease-in-out":a=0,n=0,s=.58,i=1;break;default:var l=t[0].split("(");if("cubic-bezier"===l[0]&&4===l[1].split(")")[0].split(",").length){var o=CQ(l[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),4);a=o[0],n=o[1],s=o[2],i=o[3]}}var c,d,u=MQ(a,s),m=MQ(n,i),h=(c=a,d=s,function(e){var t=EQ(c,d),r=[].concat(TQ(t.map((function(e,t){return e*t})).slice(1)),[0]);return DQ(r,e)}),p=function(e){for(var t,r=e>1?1:e,a=r,n=0;n<8;++n){var s=u(a)-r,i=h(a);if(Math.abs(s-r)<AQ||i<AQ)return m(a);a=(t=a-s/i)>1?1:t<0?0:t}return m(a)};return p.isStepper=!1,p},RQ=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0];if("string"==typeof a)switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return zQ(a);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,a=e.damping,n=void 0===a?8:a,s=e.dt,i=void 0===s?17:s,l=function(e,t,a){var s=a+(-(e-t)*r-a*n)*i/1e3,l=a*i/1e3+e;return Math.abs(l-t)<AQ&&Math.abs(s)<AQ?[t,0]:[l,s]};return l.isStepper=!0,l.dt=i,l}();default:if("cubic-bezier"===a.split("(")[0])return zQ(a)}return"function"==typeof a?a:null};function IQ(e){return(IQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FQ(e){return function(e){if(Array.isArray(e))return UQ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||KQ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function LQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BQ(Object(r),!0).forEach((function(t){qQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qQ(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==IQ(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==IQ(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===IQ(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||KQ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KQ(e,t){if(e){if("string"==typeof e)return UQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?UQ(e,t):void 0}}function UQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var HQ=function(e,t,r){return e+(t-e)*r},YQ=function(e){return e.from!==e.to},VQ=function e(t,r,a){var n=_Q((function(e,r){if(YQ(r)){var a=$Q(t(r.from,r.to,r.velocity),2),n=a[0],s=a[1];return LQ(LQ({},r),{},{from:n,velocity:s})}return r}),r);return a<1?_Q((function(e,t){return YQ(t)?LQ(LQ({},t),{},{velocity:HQ(t.velocity,n[e].velocity,a),from:HQ(t.from,n[e].from,a)}):t}),r):e(t,n,a-1)};const GQ=function(e,t,r,a,n){var s,i,l,o,c=(s=e,i=t,[Object.keys(s),Object.keys(i)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),d=c.reduce((function(r,a){return LQ(LQ({},r),{},qQ({},a,[e[a],t[a]]))}),{}),u=c.reduce((function(r,a){return LQ(LQ({},r),{},qQ({},a,{from:e[a],velocity:0,to:t[a]}))}),{}),m=-1,h=function(){return null};return h=r.isStepper?function(a){l||(l=a);var s=(a-l)/r.dt;u=VQ(r,u,s),n(LQ(LQ(LQ({},e),t),_Q((function(e,t){return t.from}),u))),l=a,Object.values(u).filter(YQ).length&&(m=requestAnimationFrame(h))}:function(s){o||(o=s);var i=(s-o)/a,l=_Q((function(e,t){return HQ.apply(void 0,FQ(t).concat([r(i)]))}),d);if(n(LQ(LQ(LQ({},e),t),l)),i<1)m=requestAnimationFrame(h);else{var c=_Q((function(e,t){return HQ.apply(void 0,FQ(t).concat([r(1)]))}),d);n(LQ(LQ(LQ({},e),t),c))}},function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(m)}}};function WQ(e){return(WQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var QQ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function XQ(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ZQ(e){return function(e){if(Array.isArray(e))return JQ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return JQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JQ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function eX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function tX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eX(Object(r),!0).forEach((function(t){rX(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eX(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rX(e,t,r){return(t=nX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aX(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,nX(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nX(e){var t=function(e,t){if("object"!==WQ(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==WQ(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===WQ(t)?t:String(t)}function sX(e,t){return(sX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iX(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(die){return!1}}();return function(){var r,a=cX(e);if(t){var n=cX(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return lX(this,r)}}function lX(e,t){if(t&&("object"===WQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oX(e)}function oX(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cX(e){return(cX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dX=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sX(e,t)}(t,ze.PureComponent);var e=iX(t);function t(r,a){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=(n=e.call(this,r,a)).props,i=s.isActive,l=s.attributeName,o=s.from,c=s.to,d=s.steps,u=s.children,m=s.duration;if(n.handleStyleChange=n.handleStyleChange.bind(oX(n)),n.changeStyle=n.changeStyle.bind(oX(n)),!i||m<=0)return n.state={style:{}},"function"==typeof u&&(n.state={style:c}),lX(n);if(d&&d.length)n.state={style:d[0].style};else if(o){if("function"==typeof u)return n.state={style:o},lX(n);n.state={style:l?rX({},l,o):o}}else n.state={style:{}};return n}return aX(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,a=t.canBegin,n=t.attributeName,s=t.shouldReAnimate,i=t.to,l=t.from,o=this.state.style;if(a)if(r){if(!(hQ(e.to,i)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||s?l:e.to;if(this.state&&o){var u={style:n?rX({},n,d):d};(n&&o[n]!==d||!n&&o!==d)&&this.setState(u)}this.runAnimation(tX(tX({},this.props),{},{from:d,begin:0}))}}else{var m={style:n?rX({},n,i):i};this.state&&o&&(n&&o[n]!==i||!n&&o!==i)&&this.setState(m)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,a=e.to,n=e.duration,s=e.easing,i=e.begin,l=e.onAnimationEnd,o=e.onAnimationStart,c=GQ(r,a,RQ(s),n,this.changeStyle);this.manager.start([o,i,function(){t.stopJSAnimation=c()},n,l])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,a=e.begin,n=e.onAnimationStart,s=r[0],i=s.style,l=s.duration,o=void 0===l?0:l;return this.manager.start([n].concat(ZQ(r.reduce((function(e,a,n){if(0===n)return e;var s=a.duration,i=a.easing,l=void 0===i?"ease":i,o=a.style,c=a.properties,d=a.onAnimationEnd,u=n>0?r[n-1]:a,m=c||Object.keys(o);if("function"==typeof l||"spring"===l)return[].concat(ZQ(e),[t.runJSAnimation.bind(t,{from:u.style,to:o,duration:s,easing:l}),s]);var h=SQ(m,s,l),p=tX(tX(tX({},u.style),o),{},{transition:h});return[].concat(ZQ(e),[p,s,d]).filter(NQ)}),[i,Math.max(o,a)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=vQ());var t=e.begin,r=e.duration,a=e.attributeName,n=e.to,s=e.easing,i=e.onAnimationStart,l=e.onAnimationEnd,o=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!=typeof s&&"function"!=typeof c&&"spring"!==s)if(o.length>1)this.runStepAnimation(e);else{var u=a?rX({},a,n):n,m=SQ(Object.keys(u),r,s);d.start([i,t,tX(tX({},u),{},{transition:m}),r,l])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children;e.begin;var r=e.duration;e.attributeName,e.easing;var a=e.isActive;e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart;var n=XQ(e,QQ),s=ze.Children.count(t),i=this.state.style;if("function"==typeof t)return t(i);if(!a||0===s||r<=0)return t;var l=function(e){var t=e.props,r=t.style,a=void 0===r?{}:r,s=t.className;return ze.cloneElement(e,tX(tX({},n),{},{style:tX(tX({},a),i),className:s}))};return 1===s?l(ze.Children.only(t)):Re.createElement("div",null,ze.Children.map(t,(function(e){return l(e)})))}}]),t}();function uX(){return uX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uX.apply(null,arguments)}function mX(e){return(mX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hX(){return hX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hX.apply(this,arguments)}function pX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xX(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function gX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gX(Object(r),!0).forEach((function(t){yX(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gX(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yX(e,t,r){var a;return a=function(e,t){if("object"!=mX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=mX(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==mX(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}dX.displayName="Animate",dX.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},dX.propTypes={from:Ve.oneOfType([Ve.object,Ve.string]),to:Ve.oneOfType([Ve.object,Ve.string]),attributeName:Ve.string,duration:Ve.number,begin:Ve.number,easing:Ve.oneOfType([Ve.string,Ve.func]),steps:Ve.arrayOf(Ve.shape({duration:Ve.number.isRequired,style:Ve.object.isRequired,easing:Ve.oneOfType([Ve.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ve.func]),properties:Ve.arrayOf("string"),onAnimationEnd:Ve.func})),children:Ve.oneOfType([Ve.node,Ve.func]),isActive:Ve.bool,canBegin:Ve.bool,onAnimationEnd:Ve.func,shouldReAnimate:Ve.bool,onAnimationStart:Ve.func,onAnimationReStart:Ve.func};var vX=function(e,t,r,a,n){var s,i=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,o=r>=0?1:-1,c=a>=0&&r>=0||a<0&&r<0?1:0;if(i>0&&n instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=n[u]>i?i:n[u];s="M".concat(e,",").concat(t+l*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),s+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+l*d[1])),s+="L ".concat(e+r,",").concat(t+a-l*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-o*d[2],",").concat(t+a)),s+="L ".concat(e+o*d[3],",").concat(t+a),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+a-l*d[3])),s+="Z"}else if(i>0&&n===+n&&n>0){var m=Math.min(i,n);s="M ".concat(e,",").concat(t+l*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+o*m,",").concat(t,"\n            L ").concat(e+r-o*m,",").concat(t,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+l*m,"\n            L ").concat(e+r,",").concat(t+a-l*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-o*m,",").concat(t+a,"\n            L ").concat(e+o*m,",").concat(t+a,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+a-l*m," Z")}else s="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return s},bX=function(e,t){if(!e||!t)return!1;var r=e.x,a=e.y,n=t.x,s=t.y,i=t.width,l=t.height;if(Math.abs(i)>0&&Math.abs(l)>0){var o=Math.min(n,n+i),c=Math.max(n,n+i),d=Math.min(s,s+l),u=Math.max(s,s+l);return r>=o&&r<=c&&a>=d&&a<=u}return!1},jX={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kX=function(e){var t=fX(fX({},jX),e),r=ze.useRef(),a=pX(ze.useState(-1),2),n=a[0],s=a[1];ze.useEffect((function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(t){}}),[]);var i=t.x,l=t.y,o=t.width,c=t.height,d=t.radius,u=t.className,m=t.animationEasing,h=t.animationDuration,p=t.animationBegin,x=t.isAnimationActive,g=t.isUpdateAnimationActive;if(i!==+i||l!==+l||o!==+o||c!==+c||0===o||0===c)return null;var f=Ht("recharts-rectangle",u);return g?Re.createElement(dX,{canBegin:n>0,from:{width:o,height:c,x:i,y:l},to:{width:o,height:c,x:i,y:l},duration:h,animationEasing:m,isActive:g},(function(e){var a=e.width,s=e.height,i=e.x,l=e.y;return Re.createElement(dX,{canBegin:n>0,from:"0px ".concat(-1===n?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:x,easing:m},Re.createElement("path",hX({},BE(t,!0),{className:f,d:vX(i,l,a,s,d),ref:r})))})):Re.createElement("path",hX({},BE(t,!0),{className:f,d:vX(i,l,o,c,d)}))},wX=["points","className","baseLinePoints","connectNulls"];function NX(){return NX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},NX.apply(this,arguments)}function _X(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function SX(e){return function(e){if(Array.isArray(e))return CX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return CX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CX(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var TX=function(e){return e&&e.x===+e.x&&e.y===+e.y},OX=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){TX(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),TX(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(r=[r.reduce((function(e,t){return[].concat(SX(e),SX(t))}),[])]);var a=r.map((function(e){return e.reduce((function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===r.length?"".concat(a,"Z"):a},PX=function(e){var t=e.points,r=e.className,a=e.baseLinePoints,n=e.connectNulls,s=_X(e,wX);if(!t||!t.length)return null;var i=Ht("recharts-polygon",r);if(a&&a.length){var l=s.stroke&&"none"!==s.stroke,o=function(e,t,r){var a=OX(e,r);return"".concat("Z"===a.slice(-1)?a.slice(0,-1):a,"L").concat(OX(t.reverse(),r).slice(1))}(t,a,n);return Re.createElement("g",{className:i},Re.createElement("path",NX({},BE(s,!0),{fill:"Z"===o.slice(-1)?s.fill:"none",stroke:"none",d:o})),l?Re.createElement("path",NX({},BE(s,!0),{fill:"none",d:OX(t,n)})):null,l?Re.createElement("path",NX({},BE(s,!0),{fill:"none",d:OX(a,n)})):null)}var c=OX(t,n);return Re.createElement("path",NX({},BE(s,!0),{fill:"Z"===c.slice(-1)?s.fill:"none",className:i,d:c}))};function AX(){return AX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},AX.apply(this,arguments)}var EX=function(e){var t=e.cx,r=e.cy,a=e.r,n=Ht("recharts-dot",e.className);return t===+t&&r===+r&&a===+a?ze.createElement("circle",AX({},BE(e,!1),wE(e),{className:n,cx:t,cy:r,r:a})):null};function DX(e){return(DX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var MX=["x","y","top","left","width","height","className"];function zX(){return zX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zX.apply(this,arguments)}function RX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function IX(e,t,r){var a;return a=function(e,t){if("object"!=DX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=DX(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==DX(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FX(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var BX=function(e,t,r,a,n,s){return"M".concat(e,",").concat(n,"v").concat(a,"M").concat(s,",").concat(t,"h").concat(r)},LX=function(e){var t=e.x,r=void 0===t?0:t,a=e.y,n=void 0===a?0:a,s=e.top,i=void 0===s?0:s,l=e.left,o=void 0===l?0:l,c=e.width,d=void 0===c?0:c,u=e.height,m=void 0===u?0:u,h=e.className,p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RX(Object(r),!0).forEach((function(t){IX(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RX(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({x:r,y:n,top:i,left:o,width:d,height:m},FX(e,MX));return oE(r)&&oE(n)&&oE(d)&&oE(m)&&oE(i)&&oE(o)?Re.createElement("path",zX({},BE(p,!0),{className:Ht("recharts-cross",h),d:BX(r,n,d,m,i,o)})):null},qX=yY,$X=vY,KX=oF;const UX=Le((function(e,t){return e&&e.length?qX(e,KX(t),$X):void 0}));var HX=yY,YX=oF,VX=NY;const GX=Le((function(e,t){return e&&e.length?HX(e,YX(t),VX):void 0}));var WX=["cx","cy","angle","ticks","axisLine"],QX=["ticks","tick","angle","tickFormatter","stroke"];function XX(e){return(XX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZX(){return ZX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ZX.apply(this,arguments)}function JX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function eZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JX(Object(r),!0).forEach((function(t){lZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JX(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tZ(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rZ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,oZ(a.key),a)}}function aZ(e,t,r){return t=sZ(t),function(e,t){if(t&&("object"===XX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nZ()?Reflect.construct(t,r||[],sZ(e).constructor):t.apply(e,r))}function nZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nZ=function(){return!!e})()}function sZ(e){return(sZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iZ(e,t){return(iZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lZ(e,t,r){return(t=oZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oZ(e){var t=function(e,t){if("object"!=XX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=XX(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XX(t)?t:t+""}var cZ=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),aZ(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iZ(e,t)}(e,ze.PureComponent),t=e,a=[{key:"renderTickItem",value:function(e,t,r){return Re.isValidElement(e)?Re.cloneElement(e,t):FO(e)?e(t):Re.createElement(zq,ZX({},t,{className:"recharts-polar-radius-axis-tick-value"}),r)}}],(r=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,a=r.angle,n=r.cx,s=r.cy;return $G(n,s,t,a)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,a=e.angle,n=e.ticks,s=UX(n,(function(e){return e.coordinate||0}));return{cx:t,cy:r,startAngle:a,endAngle:a,innerRadius:GX(n,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:s.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,a=e.angle,n=e.ticks,s=e.axisLine,i=tZ(e,WX),l=n.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),o=$G(t,r,l[0],a),c=$G(t,r,l[1],a),d=eZ(eZ(eZ({},BE(i,!1)),{},{fill:"none"},BE(s,!1)),{},{x1:o.x,y1:o.y,x2:c.x,y2:c.y});return Re.createElement("line",ZX({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var t=this,r=this.props,a=r.ticks,n=r.tick,s=r.angle,i=r.tickFormatter,l=r.stroke,o=tZ(r,QX),c=this.getTickTextAnchor(),d=BE(o,!1),u=BE(n,!1),m=a.map((function(r,a){var o=t.getTickValueCoord(r),m=eZ(eZ(eZ(eZ({textAnchor:c,transform:"rotate(".concat(90-s,", ").concat(o.x,", ").concat(o.y,")")},d),{},{stroke:"none",fill:l},u),{},{index:a},o),{},{payload:r});return Re.createElement(QE,ZX({className:Ht("recharts-polar-radius-axis-tick",VG(n)),key:"tick-".concat(r.coordinate)},NE(t.props,r,a)),e.renderTickItem(n,m,i?i(r.value,a):r.value))}));return Re.createElement(QE,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.axisLine,a=e.tick;return t&&t.length?Re.createElement(QE,{className:Ht("recharts-polar-radius-axis",this.props.className)},r&&this.renderAxisLine(),a&&this.renderTicks(),nW.renderCallByParent(this.props,this.getViewBox())):null}}])&&rZ(t.prototype,r),a&&rZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function dZ(e){return(dZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uZ(){return uZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uZ.apply(this,arguments)}function mZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function hZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mZ(Object(r),!0).forEach((function(t){vZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mZ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pZ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bZ(a.key),a)}}function xZ(e,t,r){return t=fZ(t),function(e,t){if(t&&("object"===dZ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gZ()?Reflect.construct(t,r||[],fZ(e).constructor):t.apply(e,r))}function gZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gZ=function(){return!!e})()}function fZ(e){return(fZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yZ(e,t){return(yZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vZ(e,t,r){return(t=bZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bZ(e){var t=function(e,t){if("object"!=dZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=dZ(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dZ(t)?t:t+""}lZ(cZ,"displayName","PolarRadiusAxis"),lZ(cZ,"axisType","radiusAxis"),lZ(cZ,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var jZ=Math.PI/180,kZ=1e-5,wZ=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xZ(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yZ(e,t)}(e,ze.PureComponent),t=e,a=[{key:"renderTickItem",value:function(e,t,r){return Re.isValidElement(e)?Re.cloneElement(e,t):FO(e)?e(t):Re.createElement(zq,uZ({},t,{className:"recharts-polar-angle-axis-tick-value"}),r)}}],(r=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,a=t.cy,n=t.radius,s=t.orientation,i=t.tickSize||8,l=$G(r,a,n,e.coordinate),o=$G(r,a,n+("inner"===s?-1:1)*i,e.coordinate);return{x1:l.x,y1:l.y,x2:o.x,y2:o.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*jZ);return r>kZ?"outer"===t?"start":"end":r<-kZ?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,a=e.radius,n=e.axisLine,s=e.axisLineType,i=hZ(hZ({},BE(this.props,!1)),{},{fill:"none"},BE(n,!1));if("circle"===s)return Re.createElement(EX,uZ({className:"recharts-polar-angle-axis-line"},i,{cx:t,cy:r,r:a}));var l=this.props.ticks.map((function(e){return $G(t,r,a,e.coordinate)}));return Re.createElement(PX,uZ({className:"recharts-polar-angle-axis-line"},i,{points:l}))}},{key:"renderTicks",value:function(){var t=this,r=this.props,a=r.ticks,n=r.tick,s=r.tickLine,i=r.tickFormatter,l=r.stroke,o=BE(this.props,!1),c=BE(n,!1),d=hZ(hZ({},o),{},{fill:"none"},BE(s,!1)),u=a.map((function(r,a){var u=t.getTickLineCoord(r),m=hZ(hZ(hZ({textAnchor:t.getTickTextAnchor(r)},o),{},{stroke:"none",fill:l},c),{},{index:a,payload:r,x:u.x2,y:u.y2});return Re.createElement(QE,uZ({className:Ht("recharts-polar-angle-axis-tick",VG(n)),key:"tick-".concat(r.coordinate)},NE(t.props,r,a)),s&&Re.createElement("line",uZ({className:"recharts-polar-angle-axis-tick-line"},d,u)),n&&e.renderTickItem(n,m,i?i(r.value,a):r.value))}));return Re.createElement(QE,{className:"recharts-polar-angle-axis-ticks"},u)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.radius,a=e.axisLine;return r<=0||!t||!t.length?null:Re.createElement(QE,{className:Ht("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}])&&pZ(t.prototype,r),a&&pZ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();vZ(wZ,"displayName","PolarAngleAxis"),vZ(wZ,"axisType","angleAxis"),vZ(wZ,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var NZ=SR(Object.getPrototypeOf,Object),_Z=wO,SZ=NZ,CZ=NO,TZ=Function.prototype,OZ=Object.prototype,PZ=TZ.toString,AZ=OZ.hasOwnProperty,EZ=PZ.call(Object);const DZ=Le((function(e){if(!CZ(e)||"[object Object]"!=_Z(e))return!1;var t=SZ(e);if(null===t)return!0;var r=AZ.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&PZ.call(r)==EZ}));var MZ=wO,zZ=NO;const RZ=Le((function(e){return!0===e||!1===e||zZ(e)&&"[object Boolean]"==MZ(e)}));function IZ(e){return(IZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FZ(){return FZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},FZ.apply(this,arguments)}function BZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LZ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LZ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function qZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qZ(Object(r),!0).forEach((function(t){KZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qZ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KZ(e,t,r){var a;return a=function(e,t){if("object"!=IZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=IZ(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==IZ(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UZ,HZ=function(e,t,r,a,n){var s,i=r-a;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-i/2,",").concat(t+n),s+="L ".concat(e+r-i/2-a,",").concat(t+n),s+="L ".concat(e,",").concat(t," Z")},YZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VZ=function(e){var t=$Z($Z({},YZ),e),r=ze.useRef(),a=BZ(ze.useState(-1),2),n=a[0],s=a[1];ze.useEffect((function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(t){}}),[]);var i=t.x,l=t.y,o=t.upperWidth,c=t.lowerWidth,d=t.height,u=t.className,m=t.animationEasing,h=t.animationDuration,p=t.animationBegin,x=t.isUpdateAnimationActive;if(i!==+i||l!==+l||o!==+o||c!==+c||d!==+d||0===o&&0===c||0===d)return null;var g=Ht("recharts-trapezoid",u);return x?Re.createElement(dX,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:d,x:i,y:l},to:{upperWidth:o,lowerWidth:c,height:d,x:i,y:l},duration:h,animationEasing:m,isActive:x},(function(e){var a=e.upperWidth,s=e.lowerWidth,i=e.height,l=e.x,o=e.y;return Re.createElement(dX,{canBegin:n>0,from:"0px ".concat(-1===n?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:m},Re.createElement("path",FZ({},BE(t,!0),{className:g,d:HZ(l,o,a,s,i),ref:r})))})):Re.createElement("g",null,Re.createElement("path",FZ({},BE(t,!0),{className:g,d:HZ(i,l,o,c,d)})))},GZ=["option","shapeType","propTransformer","activeClassName","isActive"];function WZ(e){return(WZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QZ(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function XZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ZZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XZ(Object(r),!0).forEach((function(t){JZ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XZ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function JZ(e,t,r){var a;return a=function(e,t){if("object"!=WZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=WZ(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==WZ(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eJ(e,t){return ZZ(ZZ({},t),e)}function tJ(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Re.createElement(kX,r);case"trapezoid":return Re.createElement(VZ,r);case"sector":return Re.createElement(CW,r);case"symbols":if(function(e){return"symbols"===e}(t))return Re.createElement(RM,r);break;default:return null}}function rJ(e){var t,r=e.option,a=e.shapeType,n=e.propTransformer,s=void 0===n?eJ:n,i=e.activeClassName,l=void 0===i?"recharts-active-shape":i,o=e.isActive,c=QZ(e,GZ);if(ze.isValidElement(r))t=ze.cloneElement(r,ZZ(ZZ({},c),function(e){return ze.isValidElement(e)?e.props:e}(r)));else if(FO(r))t=r(c);else if(DZ(r)&&!RZ(r)){var d=s(r,c);t=Re.createElement(tJ,{shapeType:a,elementProps:d})}else{var u=c;t=Re.createElement(tJ,{shapeType:a,elementProps:u})}return o?Re.createElement(QE,{className:l},t):t}function aJ(e,t){return null!=t&&"trapezoids"in e.props}function nJ(e,t){return null!=t&&"sectors"in e.props}function sJ(e,t){return null!=t&&"points"in e.props}function iJ(e,t){var r,a,n=e.x===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,s=e.y===(null==t||null===(a=t.labelViewBox)||void 0===a?void 0:a.y)||e.y===t.y;return n&&s}function lJ(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function oJ(e,t){var r=e.x===t.x,a=e.y===t.y,n=e.z===t.z;return r&&a&&n}function cJ(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,n=function(e,t){var r;return aJ(e,t)?r="trapezoids":nJ(e,t)?r="sectors":sJ(e,t)&&(r="points"),r}(r,t),s=function(e,t){var r,a;return aJ(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:nJ(e,t)?null===(a=t.tooltipPayload)||void 0===a||null===(a=a[0])||void 0===a||null===(a=a.payload)||void 0===a?void 0:a.payload:sJ(e,t)?t.payload:{}}(r,t),i=a.filter((function(e,a){var i=IY(s,e),l=r.props[n].filter((function(e){var a=function(e,t){var r;return aJ(e,t)?r=iJ:nJ(e,t)?r=lJ:sJ(e,t)&&(r=oJ),r}(r,t);return a(e,t)})),o=r.props[n].indexOf(l[l.length-1]);return i&&a===o}));return a.indexOf(i[i.length-1])}function dJ(e){return(dJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uJ(){return uJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uJ.apply(this,arguments)}function mJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function hJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mJ(Object(r),!0).forEach((function(t){vJ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pJ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bJ(a.key),a)}}function xJ(e,t,r){return t=fJ(t),function(e,t){if(t&&("object"===dJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gJ()?Reflect.construct(t,r||[],fJ(e).constructor):t.apply(e,r))}function gJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gJ=function(){return!!e})()}function fJ(e){return(fJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yJ(e,t){return(yJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vJ(e,t,r){return(t=bJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bJ(e){var t=function(e,t){if("object"!=dJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=dJ(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dJ(t)?t:t+""}var jJ=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vJ(r=xJ(this,e,[t]),"pieRef",null),vJ(r,"sectorRefs",[]),vJ(r,"id",uE("recharts-pie-")),vJ(r,"handleAnimationEnd",(function(){var e=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),FO(e)&&e()})),vJ(r,"handleAnimationStart",(function(){var e=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),FO(e)&&e()})),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yJ(e,t)}(e,ze.PureComponent),t=e,a=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,r){if(Re.isValidElement(e))return Re.cloneElement(e,t);if(FO(e))return e(t);var a=Ht("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return Re.createElement(FW,uJ({},t,{key:r,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(e,t,r){if(Re.isValidElement(e))return Re.cloneElement(e,t);var a=r;if(FO(e)&&(a=e(t),Re.isValidElement(a)))return a;var n=Ht("recharts-pie-label-text","boolean"==typeof e||FO(e)?"":e.className);return Re.createElement(zq,uJ({},t,{alignmentBaseline:"middle",className:n}),a)}}],(r=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,a=r.label,n=r.labelLine,s=r.dataKey,i=r.valueKey,l=BE(this.props,!1),o=BE(a,!1),c=BE(n,!1),d=a&&a.offsetRadius||20,u=t.map((function(t,r){var u=(t.startAngle+t.endAngle)/2,m=$G(t.cx,t.cy,t.outerRadius+d,u),h=hJ(hJ(hJ(hJ({},l),t),{},{stroke:"none"},o),{},{index:r,textAnchor:e.getTextAnchor(m.x,t.cx)},m),p=hJ(hJ(hJ(hJ({},l),t),{},{fill:"none",stroke:t.fill},c),{},{index:r,points:[$G(t.cx,t.cy,t.outerRadius,u),m]}),x=s;return PA(s)&&PA(i)?x="value":PA(s)&&(x=i),Re.createElement(QE,{key:"label-".concat(t.startAngle,"-").concat(t.endAngle,"-").concat(t.midAngle,"-").concat(r)},n&&e.renderLabelLineItem(n,p,"line"),e.renderLabelItem(a,h,cG(t,x)))}));return Re.createElement(QE,{className:"recharts-pie-labels"},u)}},{key:"renderSectorsStatically",value:function(e){var t=this,r=this.props,a=r.activeShape,n=r.blendStroke,s=r.inactiveShape;return e.map((function(r,i){if(0===(null==r?void 0:r.startAngle)&&0===(null==r?void 0:r.endAngle)&&1!==e.length)return null;var l=t.isActiveIndex(i),o=s&&t.hasActiveIndex()?s:null,c=l?a:o,d=hJ(hJ({},r),{},{stroke:n?r.fill:r.stroke,tabIndex:-1});return Re.createElement(QE,uJ({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},NE(t.props,r,i),{key:"sector-".concat(null==r?void 0:r.startAngle,"-").concat(null==r?void 0:r.endAngle,"-").concat(r.midAngle,"-").concat(i)}),Re.createElement(rJ,uJ({option:c,isActive:l,shapeType:"sector"},d)))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,r=t.sectors,a=t.isAnimationActive,n=t.animationBegin,s=t.animationDuration,i=t.animationEasing,l=t.animationId,o=this.state,c=o.prevSectors,d=o.prevIsAnimationActive;return Re.createElement(dX,{begin:n,duration:s,isActive:a,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(l,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(t){var a=t.t,n=[],s=(r&&r[0]).startAngle;return r.forEach((function(e,t){var r=c&&c[t],i=t>0?OA(e,"paddingAngle",0):0;if(r){var l=pE(r.endAngle-r.startAngle,e.endAngle-e.startAngle),o=hJ(hJ({},e),{},{startAngle:s+i,endAngle:s+l(a)+i});n.push(o),s=o.endAngle}else{var d=e.endAngle,u=e.startAngle,m=pE(0,d-u)(a),h=hJ(hJ({},e),{},{startAngle:s+i,endAngle:s+m+i});n.push(h),s=h.endAngle}})),Re.createElement(QE,null,e.renderSectorsStatically(n))}))}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var r=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"ArrowRight":var a=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[a].focus(),t.setState({sectorToFocus:a});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,r=e.isAnimationActive,a=this.state.prevSectors;return!(r&&t&&t.length)||a&&IY(a,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,r=t.hide,a=t.sectors,n=t.className,s=t.label,i=t.cx,l=t.cy,o=t.innerRadius,c=t.outerRadius,d=t.isAnimationActive,u=this.state.isAnimationFinished;if(r||!a||!a.length||!oE(i)||!oE(l)||!oE(o)||!oE(c))return null;var m=Ht("recharts-pie",n);return Re.createElement(QE,{tabIndex:this.props.rootTabIndex,className:m,ref:function(t){e.pieRef=t}},this.renderSectors(),s&&this.renderLabels(a),nW.renderCallByParent(this.props,null,!1),(!d||u)&&yW.renderCallByParent(this.props,a,!1))}}])&&pJ(t.prototype,r),a&&pJ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();UZ=jJ,vJ(jJ,"displayName","Pie"),vJ(jJ,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!dL.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),vJ(jJ,"parseDeltaAngle",(function(e,t){return iE(t-e)*Math.min(Math.abs(t-e),360)})),vJ(jJ,"getRealPieData",(function(e){var t=e.data,r=e.children,a=BE(e,!1),n=ME(r,ZL);return t&&t.length?t.map((function(e,t){return hJ(hJ(hJ({payload:e},a),e),n&&n[t]&&n[t].props)})):n&&n.length?n.map((function(e){return hJ(hJ({},a),e.props)})):[]})),vJ(jJ,"parseCoordinateOfPie",(function(e,t){var r=t.top,a=t.left,n=t.width,s=t.height,i=KG(n,s);return{cx:a+mE(e.cx,n,n/2),cy:r+mE(e.cy,s,s/2),innerRadius:mE(e.innerRadius,i,0),outerRadius:mE(e.outerRadius,i,.8*i),maxRadius:e.maxRadius||Math.sqrt(n*n+s*s)/2}})),vJ(jJ,"getComposedData",(function(e){var t=e.item,r=e.offset,a=void 0!==t.type.defaultProps?hJ(hJ({},t.type.defaultProps),t.props):t.props,n=UZ.getRealPieData(a);if(!n||!n.length)return null;var s=a.cornerRadius,i=a.startAngle,l=a.endAngle,o=a.paddingAngle,c=a.dataKey,d=a.nameKey,u=a.valueKey,m=a.tooltipType,h=Math.abs(a.minAngle),p=UZ.parseCoordinateOfPie(a,r),x=UZ.parseDeltaAngle(i,l),g=Math.abs(x),f=c;PA(c)&&PA(u)?(XE(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),f="value"):PA(c)&&(XE(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),f=u);var y,v,b=n.filter((function(e){return 0!==cG(e,f,0)})).length,j=g-b*h-(g>=360?b:b-1)*o,k=n.reduce((function(e,t){var r=cG(t,f,0);return e+(oE(r)?r:0)}),0);k>0&&(y=n.map((function(e,t){var r,a=cG(e,f,0),n=cG(e,d,t),l=(oE(a)?a:0)/k,c=(r=t?v.endAngle+iE(x)*o*(0!==a?1:0):i)+iE(x)*((0!==a?h:0)+l*j),u=(r+c)/2,g=(p.innerRadius+p.outerRadius)/2,y=[{name:n,value:a,payload:e,dataKey:f,type:m}],b=$G(p.cx,p.cy,g,u);return v=hJ(hJ(hJ({percent:l,cornerRadius:s,name:n,tooltipPayload:y,midAngle:u,middleRadius:g,tooltipPosition:b},e),p),{},{value:cG(e,f),startAngle:r,endAngle:c,payload:e,paddingAngle:iE(x)*o})})));return hJ(hJ({},p),{},{sectors:y,data:n})}));var kJ=Math.ceil,wJ=Math.max;var NJ=ML,_J=1/0;var SJ=function(e){return e?(e=NJ(e))===_J||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},CJ=function(e,t,r,a){for(var n=-1,s=wJ(kJ((t-e)/(r||1)),0),i=Array(s);s--;)i[a?s:++n]=e,e+=r;return i},TJ=DB,OJ=SJ;const PJ=Le(function(e){return function(t,r,a){return a&&"number"!=typeof a&&TJ(t,r,a)&&(r=a=void 0),t=OJ(t),void 0===r?(r=t,t=0):r=OJ(r),a=void 0===a?t<r?1:-1:OJ(a),CJ(t,r,a,e)}}());function AJ(e){return(AJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function DJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?EJ(Object(r),!0).forEach((function(t){MJ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function MJ(e,t,r){var a;return a=function(e,t){if("object"!=AJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=AJ(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==AJ(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zJ=["Webkit","Moz","O","ms"];function RJ(e){return(RJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IJ(){return IJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},IJ.apply(this,arguments)}function FJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function BJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FJ(Object(r),!0).forEach((function(t){HJ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function LJ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,YJ(a.key),a)}}function qJ(e,t,r){return t=KJ(t),function(e,t){if(t&&("object"===RJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$J()?Reflect.construct(t,r||[],KJ(e).constructor):t.apply(e,r))}function $J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($J=function(){return!!e})()}function KJ(e){return(KJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UJ(e,t){return(UJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HJ(e,t,r){return(t=YJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YJ(e){var t=function(e,t){if("object"!=RJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=RJ(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RJ(t)?t:t+""}var VJ=function(e){return e.changedTouches&&!!e.changedTouches.length},GJ=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),HJ(r=qJ(this,e,[t]),"handleDrag",(function(e){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(e):r.state.isSlideMoving&&r.handleSlideDrag(e)})),HJ(r,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&r.handleDrag(e.changedTouches[0])})),HJ(r,"handleDragEnd",(function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=r.props,t=e.endIndex,a=e.onDragEnd,n=e.startIndex;null==a||a({endIndex:t,startIndex:n})})),r.detachDragEndListener()})),HJ(r,"handleLeaveWrapper",(function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))})),HJ(r,"handleEnterSlideOrTraveller",(function(){r.setState({isTextActive:!0})})),HJ(r,"handleLeaveSlideOrTraveller",(function(){r.setState({isTextActive:!1})})),HJ(r,"handleSlideDragStart",(function(e){var t=VJ(e)?e.changedTouches[0]:e;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),r.attachDragEndListener()})),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UJ(e,t)}(e,ze.PureComponent),t=e,a=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,a=e.width,n=e.height,s=e.stroke,i=Math.floor(r+n/2)-1;return Re.createElement(Re.Fragment,null,Re.createElement("rect",{x:t,y:r,width:a,height:n,fill:s,stroke:"none"}),Re.createElement("line",{x1:t+1,y1:i,x2:t+a-1,y2:i,fill:"none",stroke:"#fff"}),Re.createElement("line",{x1:t+1,y1:i+2,x2:t+a-1,y2:i+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,r){return Re.isValidElement(t)?Re.cloneElement(t,r):FO(t)?t(r):e.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,a=e.width,n=e.x,s=e.travellerWidth,i=e.updateId,l=e.startIndex,o=e.endIndex;if(r!==t.prevData||i!==t.prevUpdateId)return BJ({prevData:r,prevTravellerWidth:s,prevUpdateId:i,prevX:n,prevWidth:a},r&&r.length?function(e){var t=e.data,r=e.startIndex,a=e.endIndex,n=e.x,s=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var l=t.length,o=d$().domain(PJ(0,l)).range([n,n+s-i]),c=o.domain().map((function(e){return o(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:o(r),endX:o(a),scale:o,scaleValues:c}}({data:r,width:a,x:n,travellerWidth:s,startIndex:l,endIndex:o}):{scale:null,scaleValues:null});if(t.scale&&(a!==t.prevWidth||n!==t.prevX||s!==t.prevTravellerWidth)){t.scale.range([n,n+a-s]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:r,prevTravellerWidth:s,prevUpdateId:i,prevX:n,prevWidth:a,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=0,a=e.length-1;a-r>1;){var n=Math.floor((r+a)/2);e[n]>t?a=n:r=n}return t>=e[a]?a:r}}],(r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var r=t.startX,a=t.endX,n=this.state.scaleValues,s=this.props,i=s.gap,l=s.data.length-1,o=Math.min(r,a),c=Math.max(r,a),d=e.getIndexInRange(n,o),u=e.getIndexInRange(n,c);return{startIndex:d-d%i,endIndex:u===l?l:u-u%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,a=t.tickFormatter,n=t.dataKey,s=cG(r[e],n,e);return FO(a)?a(s,e):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,a=t.startX,n=t.endX,s=this.props,i=s.x,l=s.width,o=s.travellerWidth,c=s.startIndex,d=s.endIndex,u=s.onChange,m=e.pageX-r;m>0?m=Math.min(m,i+l-o-n,i+l-o-a):m<0&&(m=Math.max(m,i-a,i-n));var h=this.getIndex({startX:a+m,endX:n+m});h.startIndex===c&&h.endIndex===d||!u||u(h),this.setState({startX:a+m,endX:n+m,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=VJ(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,a=t.movingTravellerId,n=t.endX,s=t.startX,i=this.state[a],l=this.props,o=l.x,c=l.width,d=l.travellerWidth,u=l.onChange,m=l.gap,h=l.data,p={startX:this.state.startX,endX:this.state.endX},x=e.pageX-r;x>0?x=Math.min(x,o+c-d-i):x<0&&(x=Math.max(x,o-i)),p[a]=i+x;var g=this.getIndex(p),f=g.startIndex,y=g.endIndex;this.setState(HJ(HJ({},a,i+x),"brushMoveStartX",e.pageX),(function(){var e;u&&(e=h.length-1,("startX"===a&&(n>s?f%m===0:y%m===0)||n<s&&y===e||"endX"===a&&(n>s?y%m===0:f%m===0)||n>s&&y===e)&&u(g))}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,a=this.state,n=a.scaleValues,s=a.startX,i=a.endX,l=this.state[t],o=n.indexOf(l);if(-1!==o){var c=o+e;if(!(-1===c||c>=n.length)){var d=n[c];"startX"===t&&d>=i||"endX"===t&&d<=s||this.setState(HJ({},t,d),(function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,a=e.width,n=e.height,s=e.fill,i=e.stroke;return Re.createElement("rect",{stroke:i,fill:s,x:t,y:r,width:a,height:n})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,a=e.width,n=e.height,s=e.data,i=e.children,l=e.padding,o=ze.Children.only(i);return o?Re.cloneElement(o,{x:t,y:r,width:a,height:n,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(t,r){var a,n,s=this,i=this.props,l=i.y,o=i.travellerWidth,c=i.height,d=i.traveller,u=i.ariaLabel,m=i.data,h=i.startIndex,p=i.endIndex,x=Math.max(t,this.props.x),g=BJ(BJ({},BE(this.props,!1)),{},{x:x,y:l,width:o,height:c}),f=u||"Min value: ".concat(null===(a=m[h])||void 0===a?void 0:a.name,", Max value: ").concat(null===(n=m[p])||void 0===n?void 0:n.name);return Re.createElement(QE,{tabIndex:0,role:"slider","aria-label":f,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,g))}},{key:"renderSlide",value:function(e,t){var r=this.props,a=r.y,n=r.height,s=r.stroke,i=r.travellerWidth,l=Math.min(e,t)+i,o=Math.max(Math.abs(t-e)-i,0);return Re.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:a,width:o,height:n})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,a=e.y,n=e.height,s=e.travellerWidth,i=e.stroke,l=this.state,o=l.startX,c=l.endX,d={pointerEvents:"none",fill:i};return Re.createElement(QE,{className:"recharts-brush-texts"},Re.createElement(zq,IJ({textAnchor:"end",verticalAnchor:"middle",x:Math.min(o,c)-5,y:a+n/2},d),this.getTextOfTick(t)),Re.createElement(zq,IJ({textAnchor:"start",verticalAnchor:"middle",x:Math.max(o,c)+s+5,y:a+n/2},d),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,a=e.children,n=e.x,s=e.y,i=e.width,l=e.height,o=e.alwaysShowText,c=this.state,d=c.startX,u=c.endX,m=c.isTextActive,h=c.isSlideMoving,p=c.isTravellerMoving,x=c.isTravellerFocused;if(!t||!t.length||!oE(n)||!oE(s)||!oE(i)||!oE(l)||i<=0||l<=0)return null;var g,f,y,v,b=Ht("recharts-brush",r),j=1===Re.Children.count(a),k=(f="none",y=(g="userSelect").replace(/(\w)/,(function(e){return e.toUpperCase()})),(v=zJ.reduce((function(e,t){return DJ(DJ({},e),{},MJ({},t+y,f))}),{}))[g]=f,v);return Re.createElement(QE,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(d,u),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(u,"endX"),(m||h||p||x||o)&&this.renderText())}}])&&LJ(t.prototype,r),a&&LJ(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();HJ(GJ,"displayName","Brush"),HJ(GJ,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var WJ=JF;var QJ=mz,XJ=oF,ZJ=function(e,t){var r;return WJ(e,(function(e,a,n){return!(r=t(e,a,n))})),!!r},JJ=lO,e0=DB;const t0=Le((function(e,t,r){var a=JJ(e)?QJ:ZJ;return r&&e0(e,t,r)&&(t=void 0),a(e,XJ(t))}));var r0=function(e,t){var r=e.alwaysShow,a=e.ifOverflow;return r&&(a="extendDomain"),a===t},a0=bB;var n0=function(e,t,r){"__proto__"==t&&a0?a0(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},s0=XF,i0=oF;const l0=Le((function(e,t){var r={};return t=i0(t),s0(e,(function(e,a,n){n0(r,a,t(e,a,n))})),r}));var o0=JF;var c0=function(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(!t(e[r],r,e))return!1;return!0},d0=function(e,t){var r=!0;return o0(e,(function(e,a,n){return r=!!t(e,a,n)})),r},u0=oF,m0=lO,h0=DB;const p0=Le((function(e,t,r){var a=m0(e)?c0:d0;return r&&h0(e,t,r)&&(t=void 0),a(e,u0(t))}));var x0=["x","y"];function g0(e){return(g0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f0(){return f0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},f0.apply(this,arguments)}function y0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y0(Object(r),!0).forEach((function(t){b0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b0(e,t,r){var a;return a=function(e,t){if("object"!=g0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=g0(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==g0(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j0(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function k0(e,t){var r=e.x,a=e.y,n=j0(e,x0),s="".concat(r),i=parseInt(s,10),l="".concat(a),o=parseInt(l,10),c="".concat(t.height||n.height),d=parseInt(c,10),u="".concat(t.width||n.width),m=parseInt(u,10);return v0(v0(v0(v0(v0({},t),n),i?{x:i}:{}),o?{y:o}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function w0(e){return Re.createElement(rJ,f0({shapeType:"rectangle",propTransformer:k0,activeClassName:"recharts-active-bar"},e))}var N0,_0=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r,a){if("number"==typeof e)return e;var n=oE(r)||function(e){return PA(e)}(r);return n?e(r,a):(n||IV(),t)}},S0=["value","background"];function C0(e){return(C0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T0(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},O0.apply(this,arguments)}function P0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function A0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P0(Object(r),!0).forEach((function(t){I0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E0(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,F0(a.key),a)}}function D0(e,t,r){return t=z0(t),function(e,t){if(t&&("object"===C0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M0()?Reflect.construct(t,r||[],z0(e).constructor):t.apply(e,r))}function M0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(M0=function(){return!!e})()}function z0(e){return(z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R0(e,t){return(R0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I0(e,t,r){return(t=F0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F0(e){var t=function(e,t){if("object"!=C0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=C0(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C0(t)?t:t+""}var B0=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return I0(t=D0(this,e,[].concat(a)),"state",{isAnimationFinished:!1}),I0(t,"id",uE("recharts-bar-")),I0(t,"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()})),I0(t,"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()})),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R0(e,t)}(e,ze.PureComponent),t=e,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],(r=[{key:"renderRectanglesStatically",value:function(e){var t=this,r=this.props,a=r.shape,n=r.dataKey,s=r.activeIndex,i=r.activeBar,l=BE(this.props,!1);return e&&e.map((function(e,r){var o=r===s,c=o?i:a,d=A0(A0(A0({},l),e),{},{isActive:o,option:c,index:r,dataKey:n,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return Re.createElement(QE,O0({className:"recharts-bar-rectangle"},NE(t.props,e,r),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(r)}),Re.createElement(w0,d))}))}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,r=t.data,a=t.layout,n=t.isAnimationActive,s=t.animationBegin,i=t.animationDuration,l=t.animationEasing,o=t.animationId,c=this.state.prevData;return Re.createElement(dX,{begin:s,duration:i,isActive:n,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(o),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(t){var n=t.t,s=r.map((function(e,t){var r=c&&c[t];if(r){var s=pE(r.x,e.x),i=pE(r.y,e.y),l=pE(r.width,e.width),o=pE(r.height,e.height);return A0(A0({},e),{},{x:s(n),y:i(n),width:l(n),height:o(n)})}if("horizontal"===a){var d=pE(0,e.height)(n);return A0(A0({},e),{},{y:e.y+e.height-d,height:d})}var u=pE(0,e.width)(n);return A0(A0({},e),{},{width:u})}));return Re.createElement(QE,null,e.renderRectanglesStatically(s))}))}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,a=this.state.prevData;return!(r&&t&&t.length)||a&&IY(a,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,r=t.data,a=t.dataKey,n=t.activeIndex,s=BE(this.props.background,!1);return r.map((function(t,r){t.value;var i=t.background,l=T0(t,S0);if(!i)return null;var o=A0(A0(A0(A0(A0({},l),{},{fill:"#eee"},i),s),NE(e.props,t,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:a,index:r,className:"recharts-bar-background-rectangle"});return Re.createElement(w0,O0({key:"background-bar-".concat(r),option:e.props.background,isActive:r===n},o))}))}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,a=r.data,n=r.xAxis,s=r.yAxis,i=r.layout,l=ME(r.children,XV);if(!l)return null;var o="vertical"===i?a[0].height/2:a[0].width/2,c=function(e,t){var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:cG(e,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return Re.createElement(QE,d,l.map((function(e){return Re.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:a,xAxis:n,yAxis:s,layout:i,offset:o,dataPointFormatter:c})})))}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,a=e.className,n=e.xAxis,s=e.yAxis,i=e.left,l=e.top,o=e.width,c=e.height,d=e.isAnimationActive,u=e.background,m=e.id;if(t||!r||!r.length)return null;var h=this.state.isAnimationFinished,p=Ht("recharts-bar",a),x=n&&n.allowDataOverflow,g=s&&s.allowDataOverflow,f=x||g,y=PA(m)?this.id:m;return Re.createElement(QE,{className:p},x||g?Re.createElement("defs",null,Re.createElement("clipPath",{id:"clipPath-".concat(y)},Re.createElement("rect",{x:x?i:i-o/2,y:g?l:l-c/2,width:x?o:2*o,height:g?c:2*c}))):null,Re.createElement(QE,{className:"recharts-bar-rectangles",clipPath:f?"url(#clipPath-".concat(y,")"):null},u?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(f,y),(!d||h)&&yW.renderCallByParent(this.props,r))}}])&&E0(t.prototype,r),a&&E0(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function L0(e){return(L0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q0(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,H0(a.key),a)}}function $0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function K0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$0(Object(r),!0).forEach((function(t){U0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U0(e,t,r){return(t=H0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H0(e){var t=function(e,t){if("object"!=L0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=L0(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L0(t)?t:t+""}N0=B0,I0(B0,"displayName","Bar"),I0(B0,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!dL.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),I0(B0,"getComposedData",(function(e){var t=e.props,r=e.item,a=e.barPosition,n=e.bandSize,s=e.xAxis,i=e.yAxis,l=e.xAxisTicks,o=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,m=e.offset,h=function(e,t){if(!e)return null;for(var r=0,a=e.length;r<a;r++)if(e[r].item===t)return e[r].position;return null}(a,r);if(!h)return null;var p=t.layout,x=r.type.defaultProps,g=void 0!==x?A0(A0({},x),r.props):r.props,f=g.dataKey,y=g.children,v=g.minPointSize,b="horizontal"===p?i:s,j=c?b.scale.domain():null,k=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var a=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return a<=0&&n>=0?0:n<0?n:a}return r[0]}({numericAxis:b}),w=ME(y,ZL),N=u.map((function(e,t){var a,u,m,x,g,y;c?a=function(e,t){if(!t||2!==t.length||!oE(t[0])||!oE(t[1]))return e;var r=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!oE(e[0])||e[0]<r)&&(n[0]=r),(!oE(e[1])||e[1]>a)&&(n[1]=a),n[0]>a&&(n[0]=a),n[1]<r&&(n[1]=r),n}(c[d+t],j):(a=cG(e,f),Array.isArray(a)||(a=[k,a]));var b=_0(v,N0.defaultProps.minPointSize)(a[1],t);if("horizontal"===p){var N,_=[i.scale(a[0]),i.scale(a[1])],S=_[0],C=_[1];u=SG({axis:s,ticks:l,bandSize:n,offset:h.offset,entry:e,index:t}),m=null!==(N=null!=C?C:S)&&void 0!==N?N:void 0,x=h.size;var T=S-C;if(g=Number.isNaN(T)?0:T,y={x:u,y:i.y,width:x,height:i.height},Math.abs(b)>0&&Math.abs(g)<Math.abs(b)){var O=iE(g||b)*(Math.abs(b)-Math.abs(g));m-=O,g+=O}}else{var P=[s.scale(a[0]),s.scale(a[1])],A=P[0],E=P[1];if(u=A,m=SG({axis:i,ticks:o,bandSize:n,offset:h.offset,entry:e,index:t}),x=E-A,g=h.size,y={x:s.x,y:m,width:s.width,height:g},Math.abs(b)>0&&Math.abs(x)<Math.abs(b))x+=iE(x||b)*(Math.abs(b)-Math.abs(x))}return A0(A0(A0({},e),{},{x:u,y:m,width:x,height:g,value:c?a:a[1],payload:e,background:y},w&&w[t]&&w[t].props),{},{tooltipPayload:[DG(r,e)],tooltipPosition:{x:u+x/2,y:m+g/2}})}));return A0({data:N,layout:p},m)}));var Y0=function(e,t,r,a,n){var s=e.width,i=e.height,l=e.layout,o=e.children,c=Object.keys(t),d={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:i-r.bottom,bottomMirror:i-r.bottom},u=!!zE(o,B0);return c.reduce((function(s,i){var o,c,m,h,p,x=t[i],g=x.orientation,f=x.domain,y=x.padding,v=void 0===y?{}:y,b=x.mirror,j=x.reversed,k="".concat(g).concat(b?"Mirror":"");if("number"===x.type&&("gap"===x.padding||"no-gap"===x.padding)){var w=f[1]-f[0],N=1/0,_=x.categoricalDomain.sort(gE);if(_.forEach((function(e,t){t>0&&(N=Math.min((e||0)-(_[t-1]||0),N))})),Number.isFinite(N)){var S=N/w,C="vertical"===x.layout?r.height:r.width;if("gap"===x.padding&&(o=S*C/2),"no-gap"===x.padding){var T=mE(e.barCategoryGap,S*C),O=S*C/2;o=O-T-(O-T)/C*T}}}c="xAxis"===a?[r.left+(v.left||0)+(o||0),r.left+r.width-(v.right||0)-(o||0)]:"yAxis"===a?"horizontal"===l?[r.top+r.height-(v.bottom||0),r.top+(v.top||0)]:[r.top+(v.top||0)+(o||0),r.top+r.height-(v.bottom||0)-(o||0)]:x.range,j&&(c=[c[1],c[0]]);var P=vG(x,n,u),A=P.scale,E=P.realScaleType;A.domain(f).range(c),jG(A);var D=NG(A,K0(K0({},x),{},{realScaleType:E}));"xAxis"===a?(p="top"===g&&!b||"bottom"===g&&b,m=r.left,h=d[k]-p*x.height):"yAxis"===a&&(p="left"===g&&!b||"right"===g&&b,m=d[k]-p*x.width,h=r.top);var M=K0(K0(K0({},x),D),{},{realScaleType:E,x:m,y:h,scale:A,width:"xAxis"===a?r.width:x.width,height:"yAxis"===a?r.height:x.height});return M.bandSize=AG(M,D),x.hide||"xAxis"!==a?x.hide||(d[k]+=(p?-1:1)*M.width):d[k]+=(p?-1:1)*M.height,K0(K0({},s),{},U0({},i,M))}),{})},V0=function(e,t){var r=e.x,a=e.y,n=t.x,s=t.y;return{x:Math.min(r,n),y:Math.min(a,s),width:Math.abs(n-r),height:Math.abs(s-a)}},G0=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,r=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,a=t.position;if(void 0!==e){if(a)switch(a){case"start":default:return this.scale(e);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],a=t[t.length-1];return r<=a?e>=r&&e<=a:e>=a&&e<=r}}],a=[{key:"create",value:function(t){return new e(t)}}],r&&q0(t.prototype,r),a&&q0(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();U0(G0,"EPS",1e-4);var W0=function(e){var t=Object.keys(e).reduce((function(t,r){return K0(K0({},t),{},U0({},r,G0.create(e[r])))}),{});return K0(K0({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.bandAware,n=r.position;return l0(e,(function(e,r){return t[r].apply(e,{bandAware:a,position:n})}))},isInRange:function(e){return p0(e,(function(e,r){return t[r].isInRange(e)}))}})};var Q0=oF,X0=DR,Z0=IR;var J0=function(e){return function(t,r,a){var n=Object(t);if(!X0(t)){var s=Q0(r);t=Z0(t),r=function(e){return s(n[e],e,n)}}var i=e(t,r,a);return i>-1?n[s?t[i]:i]:void 0}},e1=SJ;var t1=cF,r1=oF,a1=function(e){var t=e1(e),r=t%1;return t==t?r?t-r:t:0},n1=Math.max;const s1=Le(J0((function(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var n=null==r?0:a1(r);return n<0&&(n=n1(a+n,0)),t1(e,r1(t),n)})));var i1=aA((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")})),l1=ze.createContext(void 0),o1=ze.createContext(void 0),c1=ze.createContext(void 0),d1=ze.createContext({}),u1=ze.createContext(void 0),m1=ze.createContext(0),h1=ze.createContext(0),p1=function(e){var t=e.state,r=t.xAxisMap,a=t.yAxisMap,n=t.offset,s=e.clipPathId,i=e.children,l=e.width,o=e.height,c=i1(n);return Re.createElement(l1.Provider,{value:r},Re.createElement(o1.Provider,{value:a},Re.createElement(d1.Provider,{value:n},Re.createElement(c1.Provider,{value:c},Re.createElement(u1.Provider,{value:s},Re.createElement(m1.Provider,{value:o},Re.createElement(h1.Provider,{value:l},i)))))))},x1=function(e){var t=ze.useContext(l1);null==t&&IV();var r=t[e];return null==r&&IV(),r},g1=function(e){var t=ze.useContext(o1);null==t&&IV();var r=t[e];return null==r&&IV(),r},f1=function(){return ze.useContext(h1)},y1=function(){return ze.useContext(m1)};function v1(e){return(v1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b1(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,T1(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j1(e,t,r){return t=w1(t),function(e,t){if(t&&("object"===v1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k1()?Reflect.construct(t,r||[],w1(e).constructor):t.apply(e,r))}function k1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(k1=function(){return!!e})()}function w1(e){return(w1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N1(e,t){return(N1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_1(Object(r),!0).forEach((function(t){C1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C1(e,t,r){return(t=T1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T1(e){var t=function(e,t){if("object"!=v1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=v1(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v1(t)?t:t+""}function O1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P1(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function A1(){return A1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},A1.apply(this,arguments)}function E1(e){var t=e.x,r=e.y,a=e.segment,n=e.xAxisId,s=e.yAxisId,i=e.shape,l=e.className,o=e.alwaysShow,c=ze.useContext(u1),d=x1(n),u=g1(s),m=ze.useContext(c1);if(!c||!m)return null;XE(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=function(e,t,r,a,n,s,i,l,o){var c=n.x,d=n.y,u=n.width,m=n.height;if(r){var h=o.y,p=e.y.apply(h,{position:s});if(r0(o,"discard")&&!e.y.isInRange(p))return null;var x=[{x:c+u,y:p},{x:c,y:p}];return"left"===l?x.reverse():x}if(t){var g=o.x,f=e.x.apply(g,{position:s});if(r0(o,"discard")&&!e.x.isInRange(f))return null;var y=[{x:f,y:d+m},{x:f,y:d}];return"top"===i?y.reverse():y}if(a){var v=o.segment.map((function(t){return e.apply(t,{position:s})}));return r0(o,"discard")&&t0(v,(function(t){return!e.isInRange(t)}))?null:v}return null}(W0({x:d.scale,y:u.scale}),cE(t),cE(r),a&&2===a.length,m,e.position,d.orientation,u.orientation,e);if(!h)return null;var p=O1(h,2),x=p[0],g=x.x,f=x.y,y=p[1],v=y.x,b=y.y,j=S1(S1({clipPath:r0(e,"hidden")?"url(#".concat(c,")"):void 0},BE(e,!0)),{},{x1:g,y1:f,x2:v,y2:b});return Re.createElement(QE,{className:Ht("recharts-reference-line",l)},function(e,t){return Re.isValidElement(e)?Re.cloneElement(e,t):FO(e)?e(t):Re.createElement("line",A1({},t,{className:"recharts-reference-line-line"}))}(i,j),nW.renderCallByParent(e,function(e){var t=e.x1,r=e.y1,a=e.x2,n=e.y2;return V0({x:t,y:r},{x:a,y:n})}({x1:g,y1:f,x2:v,y2:b})))}var D1=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j1(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N1(e,t)}(e,Re.Component),b1(e,[{key:"render",value:function(){return Re.createElement(E1,this.props)}}])}();function M1(){return M1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},M1.apply(this,arguments)}function z1(e){return(z1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function I1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R1(Object(r),!0).forEach((function(t){K1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F1(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,U1(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function B1(e,t,r){return t=q1(t),function(e,t){if(t&&("object"===z1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L1()?Reflect.construct(t,r||[],q1(e).constructor):t.apply(e,r))}function L1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(L1=function(){return!!e})()}function q1(e){return(q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $1(e,t){return($1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function K1(e,t,r){return(t=U1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U1(e){var t=function(e,t){if("object"!=z1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=z1(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z1(t)?t:t+""}C1(D1,"displayName","ReferenceLine"),C1(D1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var H1=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),B1(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$1(e,t)}(e,Re.Component),F1(e,[{key:"render",value:function(){var t=this.props,r=t.x,a=t.y,n=t.r,s=t.alwaysShow,i=t.clipPathId,l=cE(r),o=cE(a);if(XE(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!o)return null;var c=function(e){var t=e.x,r=e.y,a=e.xAxis,n=e.yAxis,s=W0({x:a.scale,y:n.scale}),i=s.apply({x:t,y:r},{bandAware:!0});return r0(e,"discard")&&!s.isInRange(i)?null:i}(this.props);if(!c)return null;var d=c.x,u=c.y,m=this.props,h=m.shape,p=m.className,x=I1(I1({clipPath:r0(this.props,"hidden")?"url(#".concat(i,")"):void 0},BE(this.props,!0)),{},{cx:d,cy:u});return Re.createElement(QE,{className:Ht("recharts-reference-dot",p)},e.renderDot(h,x),nW.renderCallByParent(this.props,{x:d-n,y:u-n,width:2*n,height:2*n}))}}])}();function Y1(){return Y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y1.apply(this,arguments)}function V1(e){return(V1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function W1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G1(Object(r),!0).forEach((function(t){t2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q1(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r2(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function X1(e,t,r){return t=J1(t),function(e,t){if(t&&("object"===V1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z1()?Reflect.construct(t,r||[],J1(e).constructor):t.apply(e,r))}function Z1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Z1=function(){return!!e})()}function J1(e){return(J1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e2(e,t){return(e2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function t2(e,t,r){return(t=r2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r2(e){var t=function(e,t){if("object"!=V1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=V1(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V1(t)?t:t+""}K1(H1,"displayName","ReferenceDot"),K1(H1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),K1(H1,"renderDot",(function(e,t){return Re.isValidElement(e)?Re.cloneElement(e,t):FO(e)?e(t):Re.createElement(EX,M1({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))}));var a2=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),X1(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e2(e,t)}(e,Re.Component),Q1(e,[{key:"render",value:function(){var t=this.props,r=t.x1,a=t.x2,n=t.y1,s=t.y2,i=t.className,l=t.alwaysShow,o=t.clipPathId;XE(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=cE(r),d=cE(a),u=cE(n),m=cE(s),h=this.props.shape;if(!(c||d||u||m||h))return null;var p=function(e,t,r,a,n){var s=n.x1,i=n.x2,l=n.y1,o=n.y2,c=n.xAxis,d=n.yAxis;if(!c||!d)return null;var u=W0({x:c.scale,y:d.scale}),m={x:e?u.x.apply(s,{position:"start"}):u.x.rangeMin,y:r?u.y.apply(l,{position:"start"}):u.y.rangeMin},h={x:t?u.x.apply(i,{position:"end"}):u.x.rangeMax,y:a?u.y.apply(o,{position:"end"}):u.y.rangeMax};return!r0(n,"discard")||u.isInRange(m)&&u.isInRange(h)?V0(m,h):null}(c,d,u,m,this.props);if(!p&&!h)return null;var x=r0(this.props,"hidden")?"url(#".concat(o,")"):void 0;return Re.createElement(QE,{className:Ht("recharts-reference-area",i)},e.renderRect(h,W1(W1({clipPath:x},BE(this.props,!0)),p)),nW.renderCallByParent(this.props,p))}}])}();function n2(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var a=[],n=0;n<e.length;n+=t)a.push(e[n]);return a}function s2(e,t,r){return function(e){var t=e.width,r=e.height,a=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=a*Math.PI/180,s=Math.atan(r/t),i=n>s&&n<Math.PI-s?r/Math.sin(n):t/Math.cos(n);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},r)}function i2(e,t,r,a,n){if(e*t<e*a||e*t>e*n)return!1;var s=r();return e*(t-e*s/2-a)>=0&&e*(t+e*s/2-n)<=0}function l2(e){return(l2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function c2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o2(Object(r),!0).forEach((function(t){d2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d2(e,t,r){var a;return a=function(e,t){if("object"!=l2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=l2(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==l2(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u2(e,t,r){var a=e.tick,n=e.ticks,s=e.viewBox,i=e.minTickGap,l=e.orientation,o=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!n||!n.length||!a)return[];if(oE(o)||dL.isSsr)return function(e,t){return n2(e,t+1)}(n,"number"==typeof o&&oE(o)?o:0);var m=[],h="top"===l||"bottom"===l?"width":"height",p=d&&"width"===h?iq(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=function(e,a){var n=FO(c)?c(e.value,a):e.value;return"width"===h?s2(iq(n,{fontSize:t,letterSpacing:r}),p,u):iq(n,{fontSize:t,letterSpacing:r})[h]},g=n.length>=2?iE(n[1].coordinate-n[0].coordinate):1,f=function(e,t,r){var a="width"===r,n=e.x,s=e.y,i=e.width,l=e.height;return 1===t?{start:a?n:s,end:a?n+i:s+l}:{start:a?n+i:s+l,end:a?n:s}}(s,g,h);return"equidistantPreserveStart"===o?function(e,t,r,a,n){for(var s,i=(a||[]).slice(),l=t.start,o=t.end,c=0,d=1,u=l,m=function(){var t=null==a?void 0:a[c];if(void 0===t)return{v:n2(a,d)};var s,i=c,m=function(){return void 0===s&&(s=r(t,i)),s},h=t.coordinate,p=0===c||i2(e,h,m,u,o);p||(c=0,u=l,d+=1),p&&(u=h+e*(m()/2+n),c+=d)};d<=i.length;)if(s=m())return s.v;return[]}(g,f,x,n,i):(m="preserveStart"===o||"preserveStartEnd"===o?function(e,t,r,a,n,s){var i=(a||[]).slice(),l=i.length,o=t.start,c=t.end;if(s){var d=a[l-1],u=r(d,l-1),m=e*(d.coordinate+e*u/2-c);i[l-1]=d=c2(c2({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate}),i2(e,d.tickCoord,(function(){return u}),o,c)&&(c=d.tickCoord-e*(u/2+n),i[l-1]=c2(c2({},d),{},{isShow:!0}))}for(var h=s?l-1:l,p=function(t){var a,s=i[t],l=function(){return void 0===a&&(a=r(s,t)),a};if(0===t){var d=e*(s.coordinate-e*l()/2-o);i[t]=s=c2(c2({},s),{},{tickCoord:d<0?s.coordinate-d*e:s.coordinate})}else i[t]=s=c2(c2({},s),{},{tickCoord:s.coordinate});i2(e,s.tickCoord,l,o,c)&&(o=s.tickCoord+e*(l()/2+n),i[t]=c2(c2({},s),{},{isShow:!0}))},x=0;x<h;x++)p(x);return i}(g,f,x,n,i,"preserveStartEnd"===o):function(e,t,r,a,n){for(var s=(a||[]).slice(),i=s.length,l=t.start,o=t.end,c=function(t){var a,c=s[t],d=function(){return void 0===a&&(a=r(c,t)),a};if(t===i-1){var u=e*(c.coordinate+e*d()/2-o);s[t]=c=c2(c2({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else s[t]=c=c2(c2({},c),{},{tickCoord:c.coordinate});i2(e,c.tickCoord,d,l,o)&&(o=c.tickCoord-e*(d()/2+n),s[t]=c2(c2({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return s}(g,f,x,n,i),m.filter((function(e){return e.isShow})))}t2(a2,"displayName","ReferenceArea"),t2(a2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),t2(a2,"renderRect",(function(e,t){return Re.isValidElement(e)?Re.cloneElement(e,t):FO(e)?e(t):Re.createElement(kX,Y1({},t,{className:"recharts-reference-area-rect"}))}));var m2=["viewBox"],h2=["viewBox"],p2=["ticks"];function x2(e){return(x2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g2(){return g2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},g2.apply(this,arguments)}function f2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f2(Object(r),!0).forEach((function(t){_2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v2(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function b2(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,S2(a.key),a)}}function j2(e,t,r){return t=w2(t),function(e,t){if(t&&("object"===x2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k2()?Reflect.construct(t,r||[],w2(e).constructor):t.apply(e,r))}function k2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(k2=function(){return!!e})()}function w2(e){return(w2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N2(e,t){return(N2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _2(e,t,r){return(t=S2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S2(e){var t=function(e,t){if("object"!=x2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=x2(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x2(t)?t:t+""}var C2=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r=j2(this,e,[t])).state={fontSize:"",letterSpacing:""},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N2(e,t)}(e,ze.Component),t=e,a=[{key:"renderTickItem",value:function(e,t,r){var a=Ht(t.className,"recharts-cartesian-axis-tick-value");return Re.isValidElement(e)?Re.cloneElement(e,y2(y2({},t),{},{className:a})):FO(e)?e(y2(y2({},t),{},{className:a})):Re.createElement(zq,g2({},t,{className:"recharts-cartesian-axis-tick-value"}),r)}}],(r=[{key:"shouldComponentUpdate",value:function(e,t){var r=e.viewBox,a=v2(e,m2),n=this.props,s=n.viewBox,i=v2(n,h2);return!fE(r,s)||!fE(a,i)||!fE(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,r,a,n,s,i,l=this.props,o=l.x,c=l.y,d=l.width,u=l.height,m=l.orientation,h=l.tickSize,p=l.mirror,x=l.tickMargin,g=p?-1:1,f=e.tickSize||h,y=oE(e.tickCoord)?e.tickCoord:e.coordinate;switch(m){case"top":t=r=e.coordinate,i=(a=(n=c+ +!p*u)-g*f)-g*x,s=y;break;case"left":a=n=e.coordinate,s=(t=(r=o+ +!p*d)-g*f)-g*x,i=y;break;case"right":a=n=e.coordinate,s=(t=(r=o+ +p*d)+g*f)+g*x,i=y;break;default:t=r=e.coordinate,i=(a=(n=c+ +p*u)+g*f)+g*x,s=y}return{line:{x1:t,y1:a,x2:r,y2:n},tick:{x:s,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,r=t.orientation,a=t.mirror;switch(r){case"left":e=a?"start":"end";break;case"right":e=a?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,r=e.mirror,a="end";switch(t){case"left":case"right":a="middle";break;case"top":a=r?"start":"end";break;default:a=r?"end":"start"}return a}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,r=e.y,a=e.width,n=e.height,s=e.orientation,i=e.mirror,l=e.axisLine,o=y2(y2(y2({},BE(this.props,!1)),BE(l,!1)),{},{fill:"none"});if("top"===s||"bottom"===s){var c=+("top"===s&&!i||"bottom"===s&&i);o=y2(y2({},o),{},{x1:t,y1:r+c*n,x2:t+a,y2:r+c*n})}else{var d=+("left"===s&&!i||"right"===s&&i);o=y2(y2({},o),{},{x1:t+d*a,y1:r,x2:t+d*a,y2:r+n})}return Re.createElement("line",g2({},o,{className:Ht("recharts-cartesian-axis-line",OA(l,"className"))}))}},{key:"renderTicks",value:function(t,r,a){var n=this,s=this.props,i=s.tickLine,l=s.stroke,o=s.tick,c=s.tickFormatter,d=s.unit,u=u2(y2(y2({},this.props),{},{ticks:t}),r,a),m=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=BE(this.props,!1),x=BE(o,!1),g=y2(y2({},p),{},{fill:"none"},BE(i,!1)),f=u.map((function(t,r){var a=n.getTickLineCoord(t),s=a.line,f=a.tick,y=y2(y2(y2(y2({textAnchor:m,verticalAnchor:h},p),{},{stroke:"none",fill:l},x),f),{},{index:r,payload:t,visibleTicksCount:u.length,tickFormatter:c});return Re.createElement(QE,g2({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},NE(n.props,t,r)),i&&Re.createElement("line",g2({},g,s,{className:Ht("recharts-cartesian-axis-tick-line",OA(i,"className"))})),o&&e.renderTickItem(o,y,"".concat(FO(c)?c(t.value,r):t.value).concat(d||"")))}));return Re.createElement("g",{className:"recharts-cartesian-axis-ticks"},f)}},{key:"render",value:function(){var e=this,t=this.props,r=t.axisLine,a=t.width,n=t.height,s=t.ticksGenerator,i=t.className;if(t.hide)return null;var l=this.props,o=l.ticks,c=v2(l,p2),d=o;return FO(s)&&(d=o&&o.length>0?s(this.props):s(c)),a<=0||n<=0||!d||!d.length?null:Re.createElement(QE,{className:Ht("recharts-cartesian-axis",i),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(d,this.state.fontSize,this.state.letterSpacing),nW.renderCallByParent(this.props))}}])&&b2(t.prototype,r),a&&b2(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();_2(C2,"displayName","CartesianAxis"),_2(C2,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var T2=["x1","y1","x2","y2","key"],O2=["offset"];function P2(e){return(P2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A2(Object(r),!0).forEach((function(t){D2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D2(e,t,r){var a;return a=function(e,t){if("object"!=P2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=P2(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==P2(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M2(){return M2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},M2.apply(this,arguments)}function z2(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var R2=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,a=e.x,n=e.y,s=e.width,i=e.height,l=e.ry;return Re.createElement("rect",{x:a,y:n,ry:l,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function I2(e,t){var r;if(Re.isValidElement(e))r=Re.cloneElement(e,t);else if(FO(e))r=e(t);else{var a=t.x1,n=t.y1,s=t.x2,i=t.y2,l=t.key,o=z2(t,T2),c=BE(o,!1);c.offset;var d=z2(c,O2);r=Re.createElement("line",M2({},d,{x1:a,y1:n,x2:s,y2:i,fill:"none",key:l}))}return r}function F2(e){var t=e.x,r=e.width,a=e.horizontal,n=void 0===a||a,s=e.horizontalPoints;if(!n||!s||!s.length)return null;var i=s.map((function(a,s){var i=E2(E2({},e),{},{x1:t,y1:a,x2:t+r,y2:a,key:"line-".concat(s),index:s});return I2(n,i)}));return Re.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function B2(e){var t=e.y,r=e.height,a=e.vertical,n=void 0===a||a,s=e.verticalPoints;if(!n||!s||!s.length)return null;var i=s.map((function(a,s){var i=E2(E2({},e),{},{x1:a,y1:t,x2:a,y2:t+r,key:"line-".concat(s),index:s});return I2(n,i)}));return Re.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function L2(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,n=e.y,s=e.width,i=e.height,l=e.horizontalPoints,o=e.horizontal;if(!(void 0===o||o)||!t||!t.length)return null;var c=l.map((function(e){return Math.round(e+n-n)})).sort((function(e,t){return e-t}));n!==c[0]&&c.unshift(0);var d=c.map((function(e,l){var o=!c[l+1]?n+i-e:c[l+1]-e;if(o<=0)return null;var d=l%t.length;return Re.createElement("rect",{key:"react-".concat(l),y:e,x:a,height:o,width:s,stroke:"none",fill:t[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})}));return Re.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function q2(e){var t=e.vertical,r=void 0===t||t,a=e.verticalFill,n=e.fillOpacity,s=e.x,i=e.y,l=e.width,o=e.height,c=e.verticalPoints;if(!r||!a||!a.length)return null;var d=c.map((function(e){return Math.round(e+s-s)})).sort((function(e,t){return e-t}));s!==d[0]&&d.unshift(0);var u=d.map((function(e,t){var r=!d[t+1]?s+l-e:d[t+1]-e;if(r<=0)return null;var c=t%a.length;return Re.createElement("rect",{key:"react-".concat(t),x:e,y:i,width:r,height:o,stroke:"none",fill:a[c],fillOpacity:n,className:"recharts-cartesian-grid-bg"})}));return Re.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var $2=function(e,t){var r=e.xAxis,a=e.width,n=e.height,s=e.offset;return xG(u2(E2(E2(E2({},C2.defaultProps),r),{},{ticks:gG(r,!0),viewBox:{x:0,y:0,width:a,height:n}})),s.left,s.left+s.width,t)},K2=function(e,t){var r=e.yAxis,a=e.width,n=e.height,s=e.offset;return xG(u2(E2(E2(E2({},C2.defaultProps),r),{},{ticks:gG(r,!0),viewBox:{x:0,y:0,width:a,height:n}})),s.top,s.top+s.height,t)},U2={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function H2(e){var t,r,a,n,s,i,l,o,c=f1(),d=y1(),u=ze.useContext(d1),m=E2(E2({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:U2.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:U2.fill,horizontal:null!==(a=e.horizontal)&&void 0!==a?a:U2.horizontal,horizontalFill:null!==(n=e.horizontalFill)&&void 0!==n?n:U2.horizontalFill,vertical:null!==(s=e.vertical)&&void 0!==s?s:U2.vertical,verticalFill:null!==(i=e.verticalFill)&&void 0!==i?i:U2.verticalFill,x:oE(e.x)?e.x:u.left,y:oE(e.y)?e.y:u.top,width:oE(e.width)?e.width:u.width,height:oE(e.height)?e.height:u.height}),h=m.x,p=m.y,x=m.width,g=m.height,f=m.syncWithTicks,y=m.horizontalValues,v=m.verticalValues,b=(l=ze.useContext(l1),hE(l)),j=(o=ze.useContext(o1),s1(o,(function(e){return p0(e.domain,Number.isFinite)}))||hE(o));if(!oE(x)||x<=0||!oE(g)||g<=0||!oE(h)||h!==+h||!oE(p)||p!==+p)return null;var k=m.verticalCoordinatesGenerator||$2,w=m.horizontalCoordinatesGenerator||K2,N=m.horizontalPoints,_=m.verticalPoints;if((!N||!N.length)&&FO(w)){var S=y&&y.length,C=w({yAxis:j?E2(E2({},j),{},{ticks:S?y:j.ticks}):void 0,width:c,height:d,offset:u},!!S||f);XE(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(P2(C),"]")),Array.isArray(C)&&(N=C)}if((!_||!_.length)&&FO(k)){var T=v&&v.length,O=k({xAxis:b?E2(E2({},b),{},{ticks:T?v:b.ticks}):void 0,width:c,height:d,offset:u},!!T||f);XE(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(P2(O),"]")),Array.isArray(O)&&(_=O)}return Re.createElement("g",{className:"recharts-cartesian-grid"},Re.createElement(R2,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),Re.createElement(F2,M2({},m,{offset:u,horizontalPoints:N,xAxis:b,yAxis:j})),Re.createElement(B2,M2({},m,{offset:u,verticalPoints:_,xAxis:b,yAxis:j})),Re.createElement(L2,M2({},m,{horizontalPoints:N})),Re.createElement(q2,M2({},m,{verticalPoints:_})))}H2.displayName="CartesianGrid";var Y2=["type","layout","connectNulls","ref"],V2=["key"];function G2(e){return(G2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W2(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Q2.apply(this,arguments)}function X2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Z2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X2(Object(r),!0).forEach((function(t){i4(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J2(e){return function(e){if(Array.isArray(e))return e4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return e4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e4(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function t4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,l4(a.key),a)}}function r4(e,t,r){return t=n4(t),function(e,t){if(t&&("object"===G2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a4()?Reflect.construct(t,r||[],n4(e).constructor):t.apply(e,r))}function a4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a4=function(){return!!e})()}function n4(e){return(n4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s4(e,t){return(s4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i4(e,t,r){return(t=l4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l4(e){var t=function(e,t){if("object"!=G2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=G2(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G2(t)?t:t+""}var o4=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return i4(t=r4(this,e,[].concat(a)),"state",{isAnimationFinished:!0,totalLength:0}),i4(t,"generateSimpleStrokeDasharray",(function(e,t){return"".concat(t,"px ").concat(e-t,"px")})),i4(t,"getStrokeDasharray",(function(r,a,n){var s=n.reduce((function(e,t){return e+t}));if(!s)return t.generateSimpleStrokeDasharray(a,r);for(var i=Math.floor(r/s),l=r%s,o=a-r,c=[],d=0,u=0;d<n.length;u+=n[d],++d)if(u+n[d]>l){c=[].concat(J2(n.slice(0,d)),[l-u]);break}var m=c.length%2==0?[0,o]:[o];return[].concat(J2(e.repeat(n,i)),J2(c),m).map((function(e){return"".concat(e,"px")})).join(", ")})),i4(t,"id",uE("recharts-line-")),i4(t,"pathRef",(function(e){t.mainCurve=e})),i4(t,"handleAnimationEnd",(function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()})),i4(t,"handleAnimationStart",(function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()})),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s4(e,t)}(e,ze.PureComponent),t=e,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var r=e.length%2!=0?[].concat(J2(e),[0]):e,a=[],n=0;n<t;++n)a=[].concat(J2(a),J2(r));return a}},{key:"renderDotItem",value:function(e,t){var r;if(Re.isValidElement(e))r=Re.cloneElement(e,t);else if(FO(e))r=e(t);else{var a=t.key,n=W2(t,V2),s=Ht("recharts-line-dot","boolean"!=typeof e?e.className:"");r=Re.createElement(EX,Q2({key:a},n,{className:s}))}return r}}],(r=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,a=r.points,n=r.xAxis,s=r.yAxis,i=r.layout,l=ME(r.children,XV);if(!l)return null;var o=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:cG(e.payload,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return Re.createElement(QE,c,l.map((function(e){return Re.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:a,xAxis:n,yAxis:s,layout:i,dataPointFormatter:o})})))}},{key:"renderDots",value:function(t,r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,s=n.dot,i=n.points,l=n.dataKey,o=BE(this.props,!1),c=BE(s,!0),d=i.map((function(t,r){var a=Z2(Z2(Z2({key:"dot-".concat(r),r:3},o),c),{},{index:r,cx:t.x,cy:t.y,value:t.value,dataKey:l,payload:t.payload,points:i});return e.renderDotItem(s,a)})),u={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(a,")"):null};return Re.createElement(QE,Q2({className:"recharts-line-dots",key:"dots"},u),d)}},{key:"renderCurveStatically",value:function(e,t,r,a){var n=this.props,s=n.type,i=n.layout,l=n.connectNulls;n.ref;var o=W2(n,Y2),c=Z2(Z2(Z2({},BE(o,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(r,")"):null,points:e},a),{},{type:s,layout:i,connectNulls:l});return Re.createElement(FW,Q2({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var r=this,a=this.props,n=a.points,s=a.strokeDasharray,i=a.isAnimationActive,l=a.animationBegin,o=a.animationDuration,c=a.animationEasing,d=a.animationId,u=a.animateNewValues,m=a.width,h=a.height,p=this.state,x=p.prevPoints,g=p.totalLength;return Re.createElement(dX,{begin:l,duration:o,isActive:i,easing:c,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(a){var i=a.t;if(x){var l=x.length/n.length,o=n.map((function(e,t){var r=Math.floor(t*l);if(x[r]){var a=x[r],n=pE(a.x,e.x),s=pE(a.y,e.y);return Z2(Z2({},e),{},{x:n(i),y:s(i)})}if(u){var o=pE(2*m,e.x),c=pE(h/2,e.y);return Z2(Z2({},e),{},{x:o(i),y:c(i)})}return Z2(Z2({},e),{},{x:e.x,y:e.y})}));return r.renderCurveStatically(o,e,t)}var c,d=pE(0,g)(i);if(s){var p="".concat(s).split(/[,\s]+/gim).map((function(e){return parseFloat(e)}));c=r.getStrokeDasharray(d,g,p)}else c=r.generateSimpleStrokeDasharray(g,d);return r.renderCurveStatically(n,e,t,{strokeDasharray:c})}))}},{key:"renderCurve",value:function(e,t){var r=this.props,a=r.points,n=r.isAnimationActive,s=this.state,i=s.prevPoints,l=s.totalLength;return n&&a&&a.length&&(!i&&l>0||!IY(i,a))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(a,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,a=t.dot,n=t.points,s=t.className,i=t.xAxis,l=t.yAxis,o=t.top,c=t.left,d=t.width,u=t.height,m=t.isAnimationActive,h=t.id;if(r||!n||!n.length)return null;var p=this.state.isAnimationFinished,x=1===n.length,g=Ht("recharts-line",s),f=i&&i.allowDataOverflow,y=l&&l.allowDataOverflow,v=f||y,b=PA(h)?this.id:h,j=null!==(e=BE(a,!1))&&void 0!==e?e:{r:3,strokeWidth:2},k=j.r,w=void 0===k?3:k,N=j.strokeWidth,_=void 0===N?2:N,S=(FE(a)?a:{}).clipDot,C=void 0===S||S,T=2*w+_;return Re.createElement(QE,{className:g},f||y?Re.createElement("defs",null,Re.createElement("clipPath",{id:"clipPath-".concat(b)},Re.createElement("rect",{x:f?c:c-d/2,y:y?o:o-u/2,width:f?d:2*d,height:y?u:2*u})),!C&&Re.createElement("clipPath",{id:"clipPath-dots-".concat(b)},Re.createElement("rect",{x:c-T/2,y:o-T/2,width:d+T,height:u+T}))):null,!x&&this.renderCurve(v,b),this.renderErrorBar(v,b),(x||a)&&this.renderDots(v,C,b),(!m||p)&&yW.renderCallByParent(this.props,n))}}])&&t4(t.prototype,r),a&&t4(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();i4(o4,"displayName","Line"),i4(o4,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!dL.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),i4(o4,"getComposedData",(function(e){var t=e.props,r=e.xAxis,a=e.yAxis,n=e.xAxisTicks,s=e.yAxisTicks,i=e.dataKey,l=e.bandSize,o=e.displayedData,c=e.offset,d=t.layout;return Z2({points:o.map((function(e,t){var o=cG(e,i);return"horizontal"===d?{x:_G({axis:r,ticks:n,bandSize:l,entry:e,index:t}),y:PA(o)?null:a.scale(o),value:o,payload:e}:{x:PA(o)?null:r.scale(o),y:_G({axis:a,ticks:s,bandSize:l,entry:e,index:t}),value:o,payload:e}})),layout:d},c)}));var c4,d4=["layout","type","stroke","connectNulls","isRange","ref"],u4=["key"];function m4(e){return(m4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h4(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function p4(){return p4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p4.apply(this,arguments)}function x4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function g4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x4(Object(r),!0).forEach((function(t){k4(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x4(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,w4(a.key),a)}}function y4(e,t,r){return t=b4(t),function(e,t){if(t&&("object"===m4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v4()?Reflect.construct(t,r||[],b4(e).constructor):t.apply(e,r))}function v4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(v4=function(){return!!e})()}function b4(e){return(b4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j4(e,t){return(j4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k4(e,t,r){return(t=w4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w4(e){var t=function(e,t){if("object"!=m4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=m4(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m4(t)?t:t+""}var N4=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return k4(t=y4(this,e,[].concat(a)),"state",{isAnimationFinished:!0}),k4(t,"id",uE("recharts-area-")),k4(t,"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),FO(e)&&e()})),k4(t,"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),FO(e)&&e()})),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j4(e,t)}(e,ze.PureComponent),t=e,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],(r=[{key:"renderDots",value:function(t,r,a){var n=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(n&&!s)return null;var i=this.props,l=i.dot,o=i.points,c=i.dataKey,d=BE(this.props,!1),u=BE(l,!0),m=o.map((function(t,r){var a=g4(g4(g4({key:"dot-".concat(r),r:3},d),u),{},{index:r,cx:t.x,cy:t.y,dataKey:c,value:t.value,payload:t.payload,points:o});return e.renderDotItem(l,a)})),h={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(a,")"):null};return Re.createElement(QE,p4({className:"recharts-area-dots"},h),m)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,r=t.baseLine,a=t.points,n=t.strokeWidth,s=a[0].x,i=a[a.length-1].x,l=e*Math.abs(s-i),o=wY(a.map((function(e){return e.y||0})));return oE(r)&&"number"==typeof r?o=Math.max(r,o):r&&Array.isArray(r)&&r.length&&(o=Math.max(wY(r.map((function(e){return e.y||0}))),o)),oE(o)?Re.createElement("rect",{x:s<i?s:s-l,y:0,width:l,height:Math.floor(o+(n?parseInt("".concat(n),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,r=t.baseLine,a=t.points,n=t.strokeWidth,s=a[0].y,i=a[a.length-1].y,l=e*Math.abs(s-i),o=wY(a.map((function(e){return e.x||0})));return oE(r)&&"number"==typeof r?o=Math.max(r,o):r&&Array.isArray(r)&&r.length&&(o=Math.max(wY(r.map((function(e){return e.x||0}))),o)),oE(o)?Re.createElement("rect",{x:0,y:s<i?s:s-l,width:o+(n?parseInt("".concat(n),10):1),height:Math.floor(l)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,r,a){var n=this.props,s=n.layout,i=n.type,l=n.stroke,o=n.connectNulls,c=n.isRange;n.ref;var d=h4(n,d4);return Re.createElement(QE,{clipPath:r?"url(#clipPath-".concat(a,")"):null},Re.createElement(FW,p4({},BE(d,!0),{points:e,connectNulls:o,type:i,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==l&&Re.createElement(FW,p4({},BE(this.props,!1),{className:"recharts-area-curve",layout:s,type:i,connectNulls:o,fill:"none",points:e})),"none"!==l&&c&&Re.createElement(FW,p4({},BE(this.props,!1),{className:"recharts-area-curve",layout:s,type:i,connectNulls:o,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var r=this,a=this.props,n=a.points,s=a.baseLine,i=a.isAnimationActive,l=a.animationBegin,o=a.animationDuration,c=a.animationEasing,d=a.animationId,u=this.state,m=u.prevPoints,h=u.prevBaseLine;return Re.createElement(dX,{begin:l,duration:o,isActive:i,easing:c,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(a){var i=a.t;if(m){var l,o=m.length/n.length,c=n.map((function(e,t){var r=Math.floor(t*o);if(m[r]){var a=m[r],n=pE(a.x,e.x),s=pE(a.y,e.y);return g4(g4({},e),{},{x:n(i),y:s(i)})}return e}));return l=oE(s)&&"number"==typeof s?pE(h,s)(i):PA(s)||sE(s)?pE(h,0)(i):s.map((function(e,t){var r=Math.floor(t*o);if(h[r]){var a=h[r],n=pE(a.x,e.x),s=pE(a.y,e.y);return g4(g4({},e),{},{x:n(i),y:s(i)})}return e})),r.renderAreaStatically(c,l,e,t)}return Re.createElement(QE,null,Re.createElement("defs",null,Re.createElement("clipPath",{id:"animationClipPath-".concat(t)},r.renderClipRect(i))),Re.createElement(QE,{clipPath:"url(#animationClipPath-".concat(t,")")},r.renderAreaStatically(n,s,e,t)))}))}},{key:"renderArea",value:function(e,t){var r=this.props,a=r.points,n=r.baseLine,s=r.isAnimationActive,i=this.state,l=i.prevPoints,o=i.prevBaseLine,c=i.totalLength;return s&&a&&a.length&&(!l&&c>0||!IY(l,a)||!IY(o,n))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(a,n,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,a=t.dot,n=t.points,s=t.className,i=t.top,l=t.left,o=t.xAxis,c=t.yAxis,d=t.width,u=t.height,m=t.isAnimationActive,h=t.id;if(r||!n||!n.length)return null;var p=this.state.isAnimationFinished,x=1===n.length,g=Ht("recharts-area",s),f=o&&o.allowDataOverflow,y=c&&c.allowDataOverflow,v=f||y,b=PA(h)?this.id:h,j=null!==(e=BE(a,!1))&&void 0!==e?e:{r:3,strokeWidth:2},k=j.r,w=void 0===k?3:k,N=j.strokeWidth,_=void 0===N?2:N,S=(FE(a)?a:{}).clipDot,C=void 0===S||S,T=2*w+_;return Re.createElement(QE,{className:g},f||y?Re.createElement("defs",null,Re.createElement("clipPath",{id:"clipPath-".concat(b)},Re.createElement("rect",{x:f?l:l-d/2,y:y?i:i-u/2,width:f?d:2*d,height:y?u:2*u})),!C&&Re.createElement("clipPath",{id:"clipPath-dots-".concat(b)},Re.createElement("rect",{x:l-T/2,y:i-T/2,width:d+T,height:u+T}))):null,x?null:this.renderArea(v,b),(a||x)&&this.renderDots(v,C,b),(!m||p)&&yW.renderCallByParent(this.props,n))}}])&&f4(t.prototype,r),a&&f4(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function _4(e){return(_4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S4(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,E4(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function C4(e,t,r){return t=O4(t),function(e,t){if(t&&("object"===_4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,T4()?Reflect.construct(t,r||[],O4(e).constructor):t.apply(e,r))}function T4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(T4=function(){return!!e})()}function O4(e){return(O4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P4(e,t){return(P4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A4(e,t,r){return(t=E4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E4(e){var t=function(e,t){if("object"!=_4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=_4(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_4(t)?t:t+""}c4=N4,k4(N4,"displayName","Area"),k4(N4,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!dL.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),k4(N4,"getBaseValue",(function(e,t,r,a){var n=e.layout,s=e.baseValue,i=t.props.baseValue,l=null!=i?i:s;if(oE(l)&&"number"==typeof l)return l;var o="horizontal"===n?a:r,c=o.scale.domain();if("number"===o.type){var d=Math.max(c[0],c[1]),u=Math.min(c[0],c[1]);return"dataMin"===l?u:"dataMax"===l||d<0?d:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===l?c[0]:"dataMax"===l?c[1]:c[0]})),k4(N4,"getComposedData",(function(e){var t,r=e.props,a=e.item,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,l=e.yAxisTicks,o=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,h=e.offset,p=r.layout,x=d&&d.length,g=c4.getBaseValue(r,a,n,s),f="horizontal"===p,y=!1,v=m.map((function(e,t){var r;x?r=d[u+t]:(r=cG(e,c),Array.isArray(r)?y=!0:r=[g,r]);var a=null==r[1]||x&&null==cG(e,c);return f?{x:_G({axis:n,ticks:i,bandSize:o,entry:e,index:t}),y:a?null:s.scale(r[1]),value:r,payload:e}:{x:a?null:n.scale(r[1]),y:_G({axis:s,ticks:l,bandSize:o,entry:e,index:t}),value:r,payload:e}}));return t=x||y?v.map((function(e){var t=Array.isArray(e.value)?e.value[0]:null;return f?{x:e.x,y:null!=t&&null!=e.y?s.scale(t):null}:{x:null!=t?n.scale(t):null,y:e.y}})):f?s.scale(g):n.scale(g),g4({points:v,baseLine:t,layout:p,isRange:y},h)})),k4(N4,"renderDotItem",(function(e,t){var r;if(Re.isValidElement(e))r=Re.cloneElement(e,t);else if(FO(e))r=e(t);else{var a=Ht("recharts-area-dot","boolean"!=typeof e?e.className:""),n=t.key,s=h4(t,u4);r=Re.createElement(EX,p4({},s,{key:n,className:a}))}return r}));var D4=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C4(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P4(e,t)}(e,ze.Component),S4(e,[{key:"render",value:function(){return null}}])}();A4(D4,"displayName","ZAxis"),A4(D4,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var M4=["option","isActive"];function z4(){return z4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},z4.apply(this,arguments)}function R4(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function I4(e){var t=e.option,r=e.isActive,a=R4(e,M4);return"string"==typeof t?ze.createElement(rJ,z4({option:ze.createElement(RM,z4({type:t},a)),isActive:r,shapeType:"symbols"},a)):ze.createElement(rJ,z4({option:t,isActive:r,shapeType:"symbols"},a))}function F4(e){return(F4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B4(){return B4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B4.apply(this,arguments)}function L4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function q4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L4(Object(r),!0).forEach((function(t){V4(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L4(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,G4(a.key),a)}}function K4(e,t,r){return t=H4(t),function(e,t){if(t&&("object"===F4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U4()?Reflect.construct(t,r||[],H4(e).constructor):t.apply(e,r))}function U4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U4=function(){return!!e})()}function H4(e){return(H4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y4(e,t){return(Y4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V4(e,t,r){return(t=G4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G4(e){var t=function(e,t){if("object"!=F4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=F4(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F4(t)?t:t+""}var W4=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return V4(t=K4(this,e,[].concat(a)),"state",{isAnimationFinished:!1}),V4(t,"handleAnimationEnd",(function(){t.setState({isAnimationFinished:!0})})),V4(t,"handleAnimationStart",(function(){t.setState({isAnimationFinished:!1})})),V4(t,"id",uE("recharts-scatter-")),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y4(e,t)}(e,ze.PureComponent),t=e,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}}],(r=[{key:"renderSymbolsStatically",value:function(e){var t=this,r=this.props,a=r.shape,n=r.activeShape,s=r.activeIndex,i=BE(this.props,!1);return e.map((function(e,r){var l=s===r,o=l?n:a,c=q4(q4({},i),e);return Re.createElement(QE,B4({className:"recharts-scatter-symbol",key:"symbol-".concat(null==e?void 0:e.cx,"-").concat(null==e?void 0:e.cy,"-").concat(null==e?void 0:e.size,"-").concat(r)},NE(t.props,e,r),{role:"img"}),Re.createElement(I4,B4({option:o,isActive:l,key:"symbol-".concat(r)},c)))}))}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,t=this.props,r=t.points,a=t.isAnimationActive,n=t.animationBegin,s=t.animationDuration,i=t.animationEasing,l=t.animationId,o=this.state.prevPoints;return Re.createElement(dX,{begin:n,duration:s,isActive:a,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(t){var a=t.t,n=r.map((function(e,t){var r=o&&o[t];if(r){var n=pE(r.cx,e.cx),s=pE(r.cy,e.cy),i=pE(r.size,e.size);return q4(q4({},e),{},{cx:n(a),cy:s(a),size:i(a)})}var l=pE(0,e.size);return q4(q4({},e),{},{size:l(a)})}));return Re.createElement(QE,null,e.renderSymbolsStatically(n))}))}},{key:"renderSymbols",value:function(){var e=this.props,t=e.points,r=e.isAnimationActive,a=this.state.prevPoints;return!(r&&t&&t.length)||a&&IY(a,t)?this.renderSymbolsStatically(t):this.renderSymbolsWithAnimation()}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,t=e.points,r=e.xAxis,a=e.yAxis,n=ME(e.children,XV);return n?n.map((function(e,n){var s=e.props,i=s.direction,l=s.dataKey;return Re.cloneElement(e,{key:"".concat(i,"-").concat(l,"-").concat(t[n]),data:t,xAxis:r,yAxis:a,layout:"x"===i?"vertical":"horizontal",dataPointFormatter:function(e,t){return{x:e.cx,y:e.cy,value:"x"===i?+e.node.x:+e.node.y,errorVal:cG(e,t)}}})})):null}},{key:"renderLine",value:function(){var e,t,r=this.props,a=r.points,n=r.line,s=r.lineType,i=r.lineJointType,l=BE(this.props,!1),o=BE(n,!1);if("joint"===s)e=a.map((function(e){return{x:e.cx,y:e.cy}}));else if("fitting"===s){var c=function(e){if(!e||!e.length)return null;for(var t=e.length,r=0,a=0,n=0,s=0,i=1/0,l=-1/0,o=0,c=0,d=0;d<t;d++)r+=o=e[d].cx||0,a+=c=e[d].cy||0,n+=o*c,s+=o*o,i=Math.min(i,o),l=Math.max(l,o);var u=t*s!==r*r?(t*n-r*a)/(t*s-r*r):0;return{xmin:i,xmax:l,a:u,b:(a-u*r)/t}}(a),d=c.xmin,u=c.xmax,m=c.a,h=c.b,p=function(e){return m*e+h};e=[{x:d,y:p(d)},{x:u,y:p(u)}]}var x=q4(q4(q4({},l),{},{fill:"none",stroke:l&&l.fill},o),{},{points:e});return t=Re.isValidElement(n)?Re.cloneElement(n,x):FO(n)?n(x):Re.createElement(FW,B4({},x,{type:i})),Re.createElement(QE,{className:"recharts-scatter-line",key:"recharts-scatter-line"},t)}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.points,a=e.line,n=e.className,s=e.xAxis,i=e.yAxis,l=e.left,o=e.top,c=e.width,d=e.height,u=e.id,m=e.isAnimationActive;if(t||!r||!r.length)return null;var h=this.state.isAnimationFinished,p=Ht("recharts-scatter",n),x=s&&s.allowDataOverflow,g=i&&i.allowDataOverflow,f=x||g,y=PA(u)?this.id:u;return Re.createElement(QE,{className:p,clipPath:f?"url(#clipPath-".concat(y,")"):null},x||g?Re.createElement("defs",null,Re.createElement("clipPath",{id:"clipPath-".concat(y)},Re.createElement("rect",{x:x?l:l-c/2,y:g?o:o-d/2,width:x?c:2*c,height:g?d:2*d}))):null,a&&this.renderLine(),this.renderErrorBar(),Re.createElement(QE,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!m||h)&&yW.renderCallByParent(this.props,r))}}])&&$4(t.prototype,r),a&&$4(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a}();function Q4(e){return(Q4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X4(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a3(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z4(e,t,r){return t=e3(t),function(e,t){if(t&&("object"===Q4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,J4()?Reflect.construct(t,r||[],e3(e).constructor):t.apply(e,r))}function J4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(J4=function(){return!!e})()}function e3(e){return(e3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t3(e,t){return(t3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r3(e,t,r){return(t=a3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a3(e){var t=function(e,t){if("object"!=Q4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=Q4(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q4(t)?t:t+""}function n3(){return n3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n3.apply(this,arguments)}function s3(e){var t=e.xAxisId,r=f1(),a=y1(),n=x1(t);return null==n?null:ze.createElement(C2,n3({},n,{className:Ht("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(e){return gG(e,!0)}}))}V4(W4,"displayName","Scatter"),V4(W4,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!dL.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"}),V4(W4,"getComposedData",(function(e){var t=e.xAxis,r=e.yAxis,a=e.zAxis,n=e.item,s=e.displayedData,i=e.xAxisTicks,l=e.yAxisTicks,o=e.offset,c=n.props.tooltipType,d=ME(n.props.children,ZL),u=PA(t.dataKey)?n.props.dataKey:t.dataKey,m=PA(r.dataKey)?n.props.dataKey:r.dataKey,h=a&&a.dataKey,p=a?a.range:D4.defaultProps.range,x=p&&p[0],g=t.scale.bandwidth?t.scale.bandwidth():0,f=r.scale.bandwidth?r.scale.bandwidth():0,y=s.map((function(e,s){var o=cG(e,u),p=cG(e,m),y=!PA(h)&&cG(e,h)||"-",v=[{name:PA(t.dataKey)?n.props.name:t.name||t.dataKey,unit:t.unit||"",value:o,payload:e,dataKey:u,type:c},{name:PA(r.dataKey)?n.props.name:r.name||r.dataKey,unit:r.unit||"",value:p,payload:e,dataKey:m,type:c}];"-"!==y&&v.push({name:a.name||a.dataKey,unit:a.unit||"",value:y,payload:e,dataKey:h,type:c});var b=_G({axis:t,ticks:i,bandSize:g,entry:e,index:s,dataKey:u}),j=_G({axis:r,ticks:l,bandSize:f,entry:e,index:s,dataKey:m}),k="-"!==y?a.scale(y):x,w=Math.sqrt(Math.max(k,0)/Math.PI);return q4(q4({},e),{},{cx:b,cy:j,x:b-w,y:j-w,xAxis:t,yAxis:r,zAxis:a,width:2*w,height:2*w,size:k,node:{x:o,y:p,z:y},tooltipPayload:v,tooltipPosition:{x:b,y:j},payload:e},d&&d[s]&&d[s].props)}));return q4({points:y},o)}));var i3=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Z4(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t3(e,t)}(e,ze.Component),X4(e,[{key:"render",value:function(){return ze.createElement(s3,this.props)}}])}();function l3(e){return(l3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o3(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,p3(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c3(e,t,r){return t=u3(t),function(e,t){if(t&&("object"===l3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d3()?Reflect.construct(t,r||[],u3(e).constructor):t.apply(e,r))}function d3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(d3=function(){return!!e})()}function u3(e){return(u3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m3(e,t){return(m3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h3(e,t,r){return(t=p3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p3(e){var t=function(e,t){if("object"!=l3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=l3(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l3(t)?t:t+""}function x3(){return x3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},x3.apply(this,arguments)}r3(i3,"displayName","XAxis"),r3(i3,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var g3=function(e){var t=e.yAxisId,r=f1(),a=y1(),n=g1(t);return null==n?null:ze.createElement(C2,x3({},n,{className:Ht("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(e){return gG(e,!0)}}))},f3=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c3(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m3(e,t)}(e,ze.Component),o3(e,[{key:"render",value:function(){return ze.createElement(g3,this.props)}}])}();function y3(e){return function(e){if(Array.isArray(e))return v3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return v3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v3(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}h3(f3,"displayName","YAxis"),h3(f3,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var b3=function(e,t,r,a,n){var s=ME(e,D1),i=ME(e,H1),l=[].concat(y3(s),y3(i)),o=ME(e,a2),c="".concat(a,"Id"),d=a[0],u=t;if(l.length&&(u=l.reduce((function(e,t){if(t.props[c]===r&&r0(t.props,"extendDomain")&&oE(t.props[d])){var a=t.props[d];return[Math.min(e[0],a),Math.max(e[1],a)]}return e}),u)),o.length){var m="".concat(d,"1"),h="".concat(d,"2");u=o.reduce((function(e,t){if(t.props[c]===r&&r0(t.props,"extendDomain")&&oE(t.props[m])&&oE(t.props[h])){var a=t.props[m],n=t.props[h];return[Math.min(e[0],a,n),Math.max(e[1],a,n)]}return e}),u)}return n&&n.length&&(u=n.reduce((function(e,t){return oE(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),u)),u},j3={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,a,s,i){if("function"!=typeof a)throw new TypeError("The listener must be a function");var l=new n(a,s||e,i),o=r?r+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],l]:e._events[o].push(l):(e._events[o]=l,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(r=!1)),l.prototype.eventNames=function(){var e,a,n=[];if(0===this._eventsCount)return n;for(a in e=this._events)t.call(e,a)&&n.push(r?a.slice(1):a);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=r?r+e:e,a=this._events[t];if(!a)return[];if(a.fn)return[a.fn];for(var n=0,s=a.length,i=new Array(s);n<s;n++)i[n]=a[n].fn;return i},l.prototype.listenerCount=function(e){var t=r?r+e:e,a=this._events[t];return a?a.fn?1:a.length:0},l.prototype.emit=function(e,t,a,n,s,i){var l=r?r+e:e;if(!this._events[l])return!1;var o,c,d=this._events[l],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,a),!0;case 4:return d.fn.call(d.context,t,a,n),!0;case 5:return d.fn.call(d.context,t,a,n,s),!0;case 6:return d.fn.call(d.context,t,a,n,s,i),!0}for(c=1,o=new Array(u-1);c<u;c++)o[c-1]=arguments[c];d.fn.apply(d.context,o)}else{var m,h=d.length;for(c=0;c<h;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,a);break;case 4:d[c].fn.call(d[c].context,t,a,n);break;default:if(!o)for(m=1,o=new Array(u-1);m<u;m++)o[m-1]=arguments[m];d[c].fn.apply(d[c].context,o)}}return!0},l.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,a,n){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var l=this._events[s];if(l.fn)l.fn!==t||n&&!l.once||a&&l.context!==a||i(this,s);else{for(var o=0,c=[],d=l.length;o<d;o++)(l[o].fn!==t||n&&!l[o].once||a&&l[o].context!==a)&&c.push(l[o]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(j3);var k3=new(Le(j3.exports)),w3="recharts.syncMouseEvents";function N3(e){return(N3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _3(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,C3(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S3(e,t,r){return(t=C3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C3(e){var t=function(e,t){if("object"!=N3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=N3(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==N3(t)?t:t+""}var T3=function(){return _3((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S3(this,"activeIndex",0),S3(this,"coordinateList",[]),S3(this,"layout","horizontal")}),[{key:"setDetails",value:function(e){var t,r=e.coordinateList,a=void 0===r?null:r,n=e.container,s=void 0===n?null:n,i=e.layout,l=void 0===i?null:i,o=e.offset,c=void 0===o?null:o,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!=a?a:this.coordinateList)&&void 0!==t?t:[],this.container=null!=s?s:this.container,this.layout=null!=l?l:this.layout,this.offset=null!=c?c:this.offset,this.mouseHandlerCallback=null!=u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var r=this.container.getBoundingClientRect(),a=r.x,n=r.y,s=r.height,i=this.coordinateList[this.activeIndex].coordinate,l=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,o=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=a+i+l,d=n+this.offset.top+s/2+o;this.mouseHandlerCallback({pageX:c,pageY:d})}}}])}();function O3(e){var t=e.cx,r=e.cy,a=e.radius,n=e.startAngle,s=e.endAngle;return{points:[$G(t,r,a,n),$G(t,r,a,s)],cx:t,cy:r,radius:a,startAngle:n,endAngle:s}}function P3(e,t,r){var a,n,s,i;if("horizontal"===e)s=a=t.x,n=r.top,i=r.top+r.height;else if("vertical"===e)i=n=t.y,a=r.left,s=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return O3(t);var l=t.cx,o=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,m=$G(l,o,c,u),h=$G(l,o,d,u);a=m.x,n=m.y,s=h.x,i=h.y}return[{x:a,y:n},{x:s,y:i}]}function A3(e){return(A3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function D3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E3(Object(r),!0).forEach((function(t){M3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M3(e,t,r){var a;return a=function(e,t){if("object"!=A3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=A3(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==A3(a)?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z3(e){var t,r,a,n=e.element,s=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,o=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,m=e.layout,h=e.chartName,p=null!==(t=n.props.cursor)&&void 0!==t?t:null===(r=n.type.defaultProps)||void 0===r?void 0:r.cursor;if(!n||!p||!i||!l||"ScatterChart"!==h&&"axis"!==s)return null;var x=FW;if("ScatterChart"===h)a=l,x=LX;else if("BarChart"===h)a=function(e,t,r,a){var n=a/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-n:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-n,width:"horizontal"===e?a:r.width-1,height:"horizontal"===e?r.height-1:a}}(m,l,c,u),x=kX;else if("radial"===m){var g=O3(l),f=g.cx,y=g.cy,v=g.radius;a={cx:f,cy:y,startAngle:g.startAngle,endAngle:g.endAngle,innerRadius:v,outerRadius:v},x=CW}else a={points:P3(m,l,c)},x=FW;var b=D3(D3(D3(D3({stroke:"#ccc",pointerEvents:"none"},c),a),BE(p,!1)),{},{payload:o,payloadIndex:d,className:Ht("recharts-tooltip-cursor",p.className)});return ze.isValidElement(p)?ze.cloneElement(p,b):ze.createElement(x,b)}var R3=["item"],I3=["children","className","width","height","style","compact","title","desc"];function F3(e){return(F3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B3(){return B3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B3.apply(this,arguments)}function L3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s,i,l=[],o=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t);else for(;!(o=(a=s.call(r)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(d){c=!0,n=d}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return l}}(e,t)||G3(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q3(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $3(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,J3(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function K3(e,t,r){return t=H3(t),function(e,t){if(t&&("object"===F3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U3()?Reflect.construct(t,r||[],H3(e).constructor):t.apply(e,r))}function U3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U3=function(){return!!e})()}function H3(e){return(H3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y3(e,t){return(Y3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V3(e){return function(e){if(Array.isArray(e))return W3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G3(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G3(e,t){if(e){if("string"==typeof e)return W3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W3(e,t):void 0}}function W3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function X3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q3(Object(r),!0).forEach((function(t){Z3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z3(e,t,r){return(t=J3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J3(e){var t=function(e,t){if("object"!=F3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=F3(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F3(t)?t:t+""}var e5={xAxis:["bottom","top"],yAxis:["left","right"]},t5={width:"100%",height:"100%"},r5={x:0,y:0};function a5(e){return e}var n5=function(e,t){var r=t.graphicalItems,a=t.dataStartIndex,n=t.dataEndIndex,s=(null!=r?r:[]).reduce((function(e,t){var r=t.props.data;return r&&r.length?[].concat(V3(e),V3(r)):e}),[]);return s.length>0?s:e&&e.length&&oE(a)&&oE(n)?e.slice(a,n+1):[]};function s5(e){return"number"===e?[0,"auto"]:void 0}var i5=function(e,t,r,a){var n=e.graphicalItems,s=e.tooltipAxis,i=n5(t,e);return r<0||!n||!n.length||r>=i.length?null:n.reduce((function(n,l){var o,c,d=null!==(o=l.props.data)&&void 0!==o?o:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),s.dataKey&&!s.allowDuplicatedCategory)?c=xE(void 0===d?i:d,s.dataKey,a):c=d&&d[r]||i[r];return c?[].concat(V3(n),[DG(l,c)]):n}),[])},l5=function(e,t,r,a){var n=a||{x:e.chartX,y:e.chartY},s=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(n,r),i=e.orderedTooltipTicks,l=e.tooltipAxis,o=e.tooltipTicks,c=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=-1,i=null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0;if(i<=1)return 0;if(n&&"angleAxis"===n.axisType&&Math.abs(Math.abs(n.range[1]-n.range[0])-360)<=1e-6)for(var l=n.range,o=0;o<i;o++){var c=o>0?a[o-1].coordinate:a[i-1].coordinate,d=a[o].coordinate,u=o>=i-1?a[0].coordinate:a[o+1].coordinate,m=void 0;if(iE(d-c)!==iE(u-d)){var h=[];if(iE(u-d)===iE(l[1]-l[0])){m=u;var p=d+l[1]-l[0];h[0]=Math.min(p,(p+c)/2),h[1]=Math.max(p,(p+c)/2)}else{m=c;var x=u+l[1]-l[0];h[0]=Math.min(d,(x+d)/2),h[1]=Math.max(d,(x+d)/2)}var g=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>g[0]&&e<=g[1]||e>=h[0]&&e<=h[1]){s=a[o].index;break}}else{var f=Math.min(c,u),y=Math.max(c,u);if(e>(f+d)/2&&e<=(y+d)/2){s=a[o].index;break}}}else for(var v=0;v<i;v++)if(0===v&&e<=(r[v].coordinate+r[v+1].coordinate)/2||v>0&&v<i-1&&e>(r[v].coordinate+r[v-1].coordinate)/2&&e<=(r[v].coordinate+r[v+1].coordinate)/2||v===i-1&&e>(r[v].coordinate+r[v-1].coordinate)/2){s=r[v].index;break}return s}(s,i,o,l);if(c>=0&&o){var d=o[c]&&o[c].value,u=i5(e,t,c,d),m=function(e,t,r,a){var n=t.find((function(e){return e&&e.index===r}));if(n){if("horizontal"===e)return{x:n.coordinate,y:a.y};if("vertical"===e)return{x:a.x,y:n.coordinate};if("centric"===e){var s=n.coordinate,i=a.radius;return X3(X3(X3({},a),$G(a.cx,a.cy,i,s)),{},{angle:s,radius:i})}var l=n.coordinate,o=a.angle;return X3(X3(X3({},a),$G(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}return r5}(r,i,c,n);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:m}}return null},o5=function(e,t){var r=t.axes,a=t.graphicalItems,n=t.axisType,s=t.axisIdKey,i=t.stackGroups,l=t.dataStartIndex,o=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,m=pG(c,n);return r.reduce((function(t,r){var h,p=void 0!==r.type.defaultProps?X3(X3({},r.type.defaultProps),r.props):r.props,x=p.type,g=p.dataKey,f=p.allowDataOverflow,y=p.allowDuplicatedCategory,v=p.scale,b=p.ticks,j=p.includeHidden,k=p[s];if(t[k])return t;var w,N,_,S=n5(e.data,{graphicalItems:a.filter((function(e){var t;return(s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s])===k})),dataStartIndex:l,dataEndIndex:o}),C=S.length;(function(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var a=null==e?void 0:e[0],n=null==e?void 0:e[1];if(a&&n&&oE(a)&&oE(n))return!0}return!1})(p.domain,f,x)&&(w=PG(p.domain,null,f),!m||"number"!==x&&"auto"===v||(_=dG(S,g,"category")));var T=s5(x);if(!w||0===w.length){var O,P=null!==(O=p.domain)&&void 0!==O?O:T;if(g){if(w=dG(S,g,x),"category"===x&&m){var A=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++){if(r[e[a]])return!0;r[e[a]]=!0}return!1}(w);y&&A?(N=w,w=PJ(0,C)):y||(w=EG(P,w,r).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(V3(e),[t])}),[]))}else if("category"===x)w=y?w.filter((function(e){return""!==e&&!PA(e)})):EG(P,w,r).reduce((function(e,t){return e.indexOf(t)>=0||""===t||PA(t)?e:[].concat(V3(e),[t])}),[]);else if("number"===x){var E=function(e,t,r,a,n){var s=t.map((function(t){return mG(e,t,r,n,a)})).filter((function(e){return!PA(e)}));return s&&s.length?s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(S,a.filter((function(e){var t,r,a=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],n="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return a===k&&(j||!n)})),g,n,c);E&&(w=E)}!m||"number"!==x&&"auto"===v||(_=dG(S,g,"category"))}else w=m?PJ(0,C):i&&i[k]&&i[k].hasStack&&"number"===x?"expand"===u?[0,1]:CG(i[k].stackGroups,l,o):hG(S,a.filter((function(e){var t=s in e.props?e.props[s]:e.type.defaultProps[s],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===k&&(j||!r)})),x,c,!0);if("number"===x)w=b3(d,w,k,n,b),P&&(w=PG(P,w,f));else if("category"===x&&P){var D=P;w.every((function(e){return D.indexOf(e)>=0}))&&(w=D)}}return X3(X3({},t),{},Z3({},k,X3(X3({},p),{},{axisType:n,domain:w,categoricalDomain:_,duplicateDomain:N,originalDomain:null!==(h=p.domain)&&void 0!==h?h:T,isCategorical:m,layout:c})))}),{})},c5=function(e,t){var r=t.axisType,a=void 0===r?"xAxis":r,n=t.AxisComp,s=t.graphicalItems,i=t.stackGroups,l=t.dataStartIndex,o=t.dataEndIndex,c=e.children,d="".concat(a,"Id"),u=ME(c,n),m={};return u&&u.length?m=o5(e,{axes:u,graphicalItems:s,axisType:a,axisIdKey:d,stackGroups:i,dataStartIndex:l,dataEndIndex:o}):s&&s.length&&(m=function(e,t){var r=t.graphicalItems,a=t.Axis,n=t.axisType,s=t.axisIdKey,i=t.stackGroups,l=t.dataStartIndex,o=t.dataEndIndex,c=e.layout,d=e.children,u=n5(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:o}),m=u.length,h=pG(c,n),p=-1;return r.reduce((function(e,t){var x,g=(void 0!==t.type.defaultProps?X3(X3({},t.type.defaultProps),t.props):t.props)[s],f=s5("number");return e[g]?e:(p++,h?x=PJ(0,m):i&&i[g]&&i[g].hasStack?(x=CG(i[g].stackGroups,l,o),x=b3(d,x,g,n)):(x=PG(f,hG(u,r.filter((function(e){var t,r,a=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],n="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return a===g&&!n})),"number",c),a.defaultProps.allowDataOverflow),x=b3(d,x,g,n)),X3(X3({},e),{},Z3({},g,X3(X3({axisType:n},a.defaultProps),{},{hide:!0,orientation:OA(e5,"".concat(n,".").concat(p%2),null),domain:x,originalDomain:f,isCategorical:h,layout:c}))))}),{})}(e,{Axis:n,graphicalItems:s,axisType:a,axisIdKey:d,stackGroups:i,dataStartIndex:l,dataEndIndex:o})),m},d5=function(e){var t=e.children,r=e.defaultShowTooltip,a=zE(t,GJ),n=0,s=0;return e.data&&0!==e.data.length&&(s=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(n=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:n,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:Boolean(r)}},u5=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},m5=function(e,t){var r=e.props,a=(e.graphicalItems,e.xAxisMap),n=void 0===a?{}:a,s=e.yAxisMap,i=void 0===s?{}:s,l=r.width,o=r.height,c=r.children,d=r.margin||{},u=zE(c,GJ),m=zE(c,$F),h=Object.keys(i).reduce((function(e,t){var r=i[t],a=r.orientation;return r.mirror||r.hide?e:X3(X3({},e),{},Z3({},a,e[a]+r.width))}),{left:d.left||0,right:d.right||0}),p=Object.keys(n).reduce((function(e,t){var r=n[t],a=r.orientation;return r.mirror||r.hide?e:X3(X3({},e),{},Z3({},a,OA(e,"".concat(a))+r.height))}),{top:d.top||0,bottom:d.bottom||0}),x=X3(X3({},p),h),g=x.bottom;u&&(x.bottom+=u.props.height||GJ.defaultProps.height),m&&t&&(x=function(e,t,r,a){var n=r.children,s=r.width,i=r.margin,l=s-(i.left||0)-(i.right||0),o=rG({children:n,legendWidth:l});if(o){var c=a||{},d=c.width,u=c.height,m=o.align,h=o.verticalAlign,p=o.layout;if(("vertical"===p||"horizontal"===p&&"middle"===h)&&"center"!==m&&oE(e[m]))return lG(lG({},e),{},oG({},m,e[m]+(d||0)));if(("horizontal"===p||"vertical"===p&&"center"===m)&&"middle"!==h&&oE(e[h]))return lG(lG({},e),{},oG({},h,e[h]+(u||0)))}return e}(x,0,r,t));var f=l-x.left-x.right,y=o-x.top-x.bottom;return X3(X3({brushBottom:g},x),{},{width:Math.max(f,0),height:Math.max(y,0)})},h5=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},p5=function(e){var t=e.chartName,r=e.GraphicalChild,a=e.defaultTooltipEventType,n=void 0===a?"axis":a,s=e.validateTooltipEventTypes,i=void 0===s?["axis"]:s,l=e.axisComponents,o=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,u=function(e,t){var r=t.graphicalItems,a=t.stackGroups,n=t.offset,s=t.updateId,i=t.dataStartIndex,o=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,m=e.barCategoryGap,h=e.maxBarSize,p=u5(d),x=p.numericAxisName,g=p.cateAxisName,f=function(e){return!(!e||!e.length)&&e.some((function(e){var t=PE(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(r),y=[];return r.forEach((function(r,p){var v=n5(e.data,{graphicalItems:[r],dataStartIndex:i,dataEndIndex:o}),b=void 0!==r.type.defaultProps?X3(X3({},r.type.defaultProps),r.props):r.props,j=b.dataKey,k=b.maxBarSize,w=b["".concat(x,"Id")],N=b["".concat(g,"Id")],_=l.reduce((function(e,r){var a=t["".concat(r.axisType,"Map")],n=b["".concat(r.axisType,"Id")];a&&a[n]||"zAxis"===r.axisType||IV();var s=a[n];return X3(X3({},e),{},Z3(Z3({},r.axisType,s),"".concat(r.axisType,"Ticks"),gG(s)))}),{}),S=_[g],C=_["".concat(g,"Ticks")],T=a&&a[w]&&a[w].hasStack&&function(e,t){var r,a=(null!==(r=e.type)&&void 0!==r&&r.defaultProps?lG(lG({},e.type.defaultProps),e.props):e.props).stackId;if(cE(a)){var n=t[a];if(n){var s=n.items.indexOf(e);return s>=0?n.stackedData[s]:null}}return null}(r,a[w].stackGroups),O=PE(r.type).indexOf("Bar")>=0,P=AG(S,C),A=[],E=f&&function(e){var t=e.barSize,r=e.totalSize,a=e.stackGroups,n=void 0===a?{}:a;if(!n)return{};for(var s={},i=Object.keys(n),l=0,o=i.length;l<o;l++)for(var c=n[i[l]].stackGroups,d=Object.keys(c),u=0,m=d.length;u<m;u++){var h=c[d[u]],p=h.items,x=h.cateAxisId,g=p.filter((function(e){return PE(e.type).indexOf("Bar")>=0}));if(g&&g.length){var f=g[0].type.defaultProps,y=void 0!==f?lG(lG({},f),g[0].props):g[0].props,v=y.barSize,b=y[x];s[b]||(s[b]=[]);var j=PA(v)?t:v;s[b].push({item:g[0],stackList:g.slice(1),barSize:PA(j)?void 0:mE(j,r,0)})}}return s}({barSize:c,stackGroups:a,totalSize:h5(_,g)});if(O){var D,M,z=PA(k)?h:k,R=null!==(D=null!==(M=AG(S,C,!0))&&void 0!==M?M:z)&&void 0!==D?D:0;A=function(e){var t=e.barGap,r=e.barCategoryGap,a=e.bandSize,n=e.sizeList,s=void 0===n?[]:n,i=e.maxBarSize,l=s.length;if(l<1)return null;var o,c=mE(t,a,0,!0),d=[];if(s[0].barSize===+s[0].barSize){var u=!1,m=a/l,h=s.reduce((function(e,t){return e+t.barSize||0}),0);(h+=(l-1)*c)>=a&&(h-=(l-1)*c,c=0),h>=a&&m>0&&(u=!0,h=l*(m*=.9));var p={offset:((a-h)/2|0)-c,size:0};o=s.reduce((function(e,t){var r={item:t.item,position:{offset:p.offset+p.size+c,size:u?m:t.barSize}},a=[].concat(nG(e),[r]);return p=a[a.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){a.push({item:e,position:p})})),a}),d)}else{var x=mE(r,a,0,!0);a-2*x-(l-1)*c<=0&&(c=0);var g=(a-2*x-(l-1)*c)/l;g>1&&(g>>=0);var f=i===+i?Math.min(g,i):g;o=s.reduce((function(e,t,r){var a=[].concat(nG(e),[{item:t.item,position:{offset:x+(g+c)*r+(g-f)/2,size:f}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){a.push({item:e,position:a[a.length-1].position})})),a}),d)}return o}({barGap:u,barCategoryGap:m,bandSize:R!==P?R:P,sizeList:E[N],maxBarSize:z}),R!==P&&(A=A.map((function(e){return X3(X3({},e),{},{position:X3(X3({},e.position),{},{offset:e.position.offset-R/2})})})))}var I,F,B=r&&r.type&&r.type.getComposedData;B&&y.push({props:X3(X3({},B(X3(X3({},_),{},{displayedData:v,props:e,dataKey:j,item:r,bandSize:P,barPosition:A,offset:n,stackedData:T,layout:d,dataStartIndex:i,dataEndIndex:o}))),{},Z3(Z3(Z3({key:r.key||"item-".concat(p)},x,_[x]),g,_[g]),"animationId",s)),childIndex:(I=r,F=e.children,DE(F).indexOf(I)),item:r})})),y},m=function(e,a){var n=e.props,s=e.dataStartIndex,i=e.dataEndIndex,o=e.updateId;if(!RE({props:n}))return null;var d=n.children,m=n.layout,h=n.stackOffset,p=n.data,x=n.reverseStackOrder,g=u5(m),f=g.numericAxisName,y=g.cateAxisName,v=ME(d,r),b=function(e,t,r,a,n,s){if(!e)return null;var i=(s?t.reverse():t).reduce((function(e,t){var n,s=null!==(n=t.type)&&void 0!==n&&n.defaultProps?lG(lG({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(s.hide)return e;var l=s[r],o=e[l]||{hasStack:!1,stackGroups:{}};if(cE(i)){var c=o.stackGroups[i]||{numericAxisId:r,cateAxisId:a,items:[]};c.items.push(t),o.hasStack=!0,o.stackGroups[i]=c}else o.stackGroups[uE("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[t]};return lG(lG({},e),{},oG({},l,o))}),{});return Object.keys(i).reduce((function(t,s){var l=i[s];return l.hasStack&&(l.stackGroups=Object.keys(l.stackGroups).reduce((function(t,s){var i=l.stackGroups[s];return lG(lG({},t),{},oG({},s,{numericAxisId:r,cateAxisId:a,items:i.items,stackedData:wG(e,i.items,n)}))}),{})),lG(lG({},t),{},oG({},s,l))}),{})}(p,v,"".concat(f,"Id"),"".concat(y,"Id"),h,x),j=l.reduce((function(e,t){var r="".concat(t.axisType,"Map");return X3(X3({},e),{},Z3({},r,c5(n,X3(X3({},t),{},{graphicalItems:v,stackGroups:t.axisType===f&&b,dataStartIndex:s,dataEndIndex:i}))))}),{}),k=m5(X3(X3({},j),{},{props:n,graphicalItems:v}),null==a?void 0:a.legendBBox);Object.keys(j).forEach((function(e){j[e]=c(n,j[e],k,e.replace("Map",""),t)}));var w,N,_=j["".concat(y,"Map")],S=(w=hE(_),{tooltipTicks:N=gG(w,!1,!0),orderedTooltipTicks:IB(N,(function(e){return e.coordinate})),tooltipAxis:w,tooltipAxisBandSize:AG(w,N)}),C=u(n,X3(X3({},j),{},{dataStartIndex:s,dataEndIndex:i,updateId:o,graphicalItems:v,stackGroups:b,offset:k}));return X3(X3({formattedGraphicalItems:C,graphicalItems:v,offset:k,stackGroups:b},S),j)},h=function(){function e(r){var a,n,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Z3(s=K3(this,e,[r]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Z3(s,"accessibilityManager",new T3),Z3(s,"handleLegendBBoxUpdate",(function(e){if(e){var t=s.state,r=t.dataStartIndex,a=t.dataEndIndex,n=t.updateId;s.setState(X3({legendBBox:e},m({props:s.props,dataStartIndex:r,dataEndIndex:a,updateId:n},X3(X3({},s.state),{},{legendBBox:e}))))}})),Z3(s,"handleReceiveSyncEvent",(function(e,t,r){if(s.props.syncId===e){if(r===s.eventEmitterSymbol&&"function"!=typeof s.props.syncMethod)return;s.applySyncEvent(t)}})),Z3(s,"handleBrushChange",(function(e){var t=e.startIndex,r=e.endIndex;if(t!==s.state.dataStartIndex||r!==s.state.dataEndIndex){var a=s.state.updateId;s.setState((function(){return X3({dataStartIndex:t,dataEndIndex:r},m({props:s.props,dataStartIndex:t,dataEndIndex:r,updateId:a},s.state))})),s.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}})),Z3(s,"handleMouseEnter",(function(e){var t=s.getMouseInfo(e);if(t){var r=X3(X3({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var a=s.props.onMouseEnter;FO(a)&&a(r,e)}})),Z3(s,"triggeredAfterMouseMove",(function(e){var t=s.getMouseInfo(e),r=t?X3(X3({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(r),s.triggerSyncEvent(r);var a=s.props.onMouseMove;FO(a)&&a(r,e)})),Z3(s,"handleItemMouseEnter",(function(e){s.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),Z3(s,"handleItemMouseLeave",(function(){s.setState((function(){return{isTooltipActive:!1}}))})),Z3(s,"handleMouseMove",(function(e){e.persist(),s.throttleTriggeredAfterMouseMove(e)})),Z3(s,"handleMouseLeave",(function(e){s.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};s.setState(t),s.triggerSyncEvent(t);var r=s.props.onMouseLeave;FO(r)&&r(t,e)})),Z3(s,"handleOuterEvent",(function(e){var t,r=function(e){var t=e&&e.type;return t&&OE[t]?OE[t]:null}(e),a=OA(s.props,"".concat(r));r&&FO(a)&&a(null!==(t=/.*touch.*/i.test(r)?s.getMouseInfo(e.changedTouches[0]):s.getMouseInfo(e))&&void 0!==t?t:{},e)})),Z3(s,"handleClick",(function(e){var t=s.getMouseInfo(e);if(t){var r=X3(X3({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var a=s.props.onClick;FO(a)&&a(r,e)}})),Z3(s,"handleMouseDown",(function(e){var t=s.props.onMouseDown;FO(t)&&t(s.getMouseInfo(e),e)})),Z3(s,"handleMouseUp",(function(e){var t=s.props.onMouseUp;FO(t)&&t(s.getMouseInfo(e),e)})),Z3(s,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),Z3(s,"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseDown(e.changedTouches[0])})),Z3(s,"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseUp(e.changedTouches[0])})),Z3(s,"handleDoubleClick",(function(e){var t=s.props.onDoubleClick;FO(t)&&t(s.getMouseInfo(e),e)})),Z3(s,"handleContextMenu",(function(e){var t=s.props.onContextMenu;FO(t)&&t(s.getMouseInfo(e),e)})),Z3(s,"triggerSyncEvent",(function(e){void 0!==s.props.syncId&&k3.emit(w3,s.props.syncId,e,s.eventEmitterSymbol)})),Z3(s,"applySyncEvent",(function(e){var t=s.props,r=t.layout,a=t.syncMethod,n=s.state.updateId,i=e.dataStartIndex,l=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)s.setState(X3({dataStartIndex:i,dataEndIndex:l},m({props:s.props,dataStartIndex:i,dataEndIndex:l,updateId:n},s.state)));else if(void 0!==e.activeTooltipIndex){var o=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=s.state,h=u.offset,p=u.tooltipTicks;if(!h)return;if("function"==typeof a)d=a(p,e);else if("value"===a){d=-1;for(var x=0;x<p.length;x++)if(p[x].value===e.activeLabel){d=x;break}}var g=X3(X3({},h),{},{x:h.left,y:h.top}),f=Math.min(o,g.x+g.width),y=Math.min(c,g.y+g.height),v=p[d]&&p[d].value,b=i5(s.state,s.props.data,d),j=p[d]?{x:"horizontal"===r?p[d].coordinate:f,y:"horizontal"===r?y:p[d].coordinate}:r5;s.setState(X3(X3({},e),{},{activeLabel:v,activeCoordinate:j,activePayload:b,activeTooltipIndex:d}))}else s.setState(e)})),Z3(s,"renderCursor",(function(e){var r,a=s.state,n=a.isTooltipActive,i=a.activeCoordinate,l=a.activePayload,o=a.offset,c=a.activeTooltipIndex,d=a.tooltipAxisBandSize,u=s.getTooltipEventType(),m=null!==(r=e.props.active)&&void 0!==r?r:n,h=s.props.layout,p=e.key||"_recharts-cursor";return Re.createElement(z3,{key:p,activeCoordinate:i,activePayload:l,activeTooltipIndex:c,chartName:t,element:e,isActive:m,layout:h,offset:o,tooltipAxisBandSize:d,tooltipEventType:u})})),Z3(s,"renderPolarAxis",(function(e,t,r){var a=OA(e,"type.axisType"),n=OA(s.state,"".concat(a,"Map")),i=e.type.defaultProps,l=void 0!==i?X3(X3({},i),e.props):e.props,o=n&&n[l["".concat(a,"Id")]];return ze.cloneElement(e,X3(X3({},o),{},{className:Ht(a,o.className),key:e.key||"".concat(t,"-").concat(r),ticks:gG(o,!0)}))})),Z3(s,"renderPolarGrid",(function(e){var t=e.props,r=t.radialLines,a=t.polarAngles,n=t.polarRadius,i=s.state,l=i.radiusAxisMap,o=i.angleAxisMap,c=hE(l),d=hE(o),u=d.cx,m=d.cy,h=d.innerRadius,p=d.outerRadius;return ze.cloneElement(e,{polarAngles:Array.isArray(a)?a:gG(d,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(n)?n:gG(c,!0).map((function(e){return e.coordinate})),cx:u,cy:m,innerRadius:h,outerRadius:p,key:e.key||"polar-grid",radialLines:r})})),Z3(s,"renderLegend",(function(){var e=s.state.formattedGraphicalItems,t=s.props,r=t.children,a=t.width,n=t.height,i=s.props.margin||{},l=a-(i.left||0)-(i.right||0),c=rG({children:r,formattedGraphicalItems:e,legendWidth:l,legendContent:o});if(!c)return null;var d=c.item,u=q3(c,R3);return ze.cloneElement(d,X3(X3({},u),{},{chartWidth:a,chartHeight:n,margin:i,onBBoxUpdate:s.handleLegendBBoxUpdate}))})),Z3(s,"renderTooltip",(function(){var e,t=s.props,r=t.children,a=t.accessibilityLayer,n=zE(r,kL);if(!n)return null;var i=s.state,l=i.isTooltipActive,o=i.activeCoordinate,c=i.activePayload,d=i.activeLabel,u=i.offset,m=null!==(e=n.props.active)&&void 0!==e?e:l;return ze.cloneElement(n,{viewBox:X3(X3({},u),{},{x:u.left,y:u.top}),active:m,label:d,payload:m?c:[],coordinate:o,accessibilityLayer:a})})),Z3(s,"renderBrush",(function(e){var t=s.props,r=t.margin,a=t.data,n=s.state,i=n.offset,l=n.dataStartIndex,o=n.dataEndIndex,c=n.updateId;return ze.cloneElement(e,{key:e.key||"_recharts-brush",onChange:yG(s.handleBrushChange,e.props.onChange),data:a,x:oE(e.props.x)?e.props.x:i.left,y:oE(e.props.y)?e.props.y:i.top+i.height+i.brushBottom-(r.bottom||0),width:oE(e.props.width)?e.props.width:i.width,startIndex:l,endIndex:o,updateId:"brush-".concat(c)})})),Z3(s,"renderReferenceElement",(function(e,t,r){if(!e)return null;var a=s.clipPathId,n=s.state,i=n.xAxisMap,l=n.yAxisMap,o=n.offset,c=e.type.defaultProps||{},d=e.props,u=d.xAxisId,m=void 0===u?c.xAxisId:u,h=d.yAxisId,p=void 0===h?c.yAxisId:h;return ze.cloneElement(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:i[m],yAxis:l[p],viewBox:{x:o.left,y:o.top,width:o.width,height:o.height},clipPathId:a})})),Z3(s,"renderActivePoints",(function(t){var r=t.item,a=t.activePoint,n=t.basePoint,s=t.childIndex,i=t.isRange,l=[],o=r.props.key,c=void 0!==r.item.type.defaultProps?X3(X3({},r.item.type.defaultProps),r.item.props):r.item.props,d=c.activeDot,u=X3(X3({index:s,dataKey:c.dataKey,cx:a.x,cy:a.y,r:4,fill:uG(r.item),strokeWidth:2,stroke:"#fff",payload:a.payload,value:a.value},BE(d,!1)),wE(d));return l.push(e.renderActiveDot(d,u,"".concat(o,"-activePoint-").concat(s))),n?l.push(e.renderActiveDot(d,X3(X3({},u),{},{cx:n.x,cy:n.y}),"".concat(o,"-basePoint-").concat(s))):i&&l.push(null),l})),Z3(s,"renderGraphicChild",(function(e,t,r){var a=s.filterFormatItem(e,t,r);if(!a)return null;var n=s.getTooltipEventType(),i=s.state,l=i.isTooltipActive,o=i.tooltipAxis,c=i.activeTooltipIndex,d=i.activeLabel,u=zE(s.props.children,kL),m=a.props,h=m.points,p=m.isRange,x=m.baseLine,g=void 0!==a.item.type.defaultProps?X3(X3({},a.item.type.defaultProps),a.item.props):a.item.props,f=g.activeDot,y=g.hide,v=g.activeBar,b=g.activeShape,j=Boolean(!y&&l&&u&&(f||v||b)),k={};"axis"!==n&&u&&"click"===u.props.trigger?k={onClick:yG(s.handleItemMouseEnter,e.props.onClick)}:"axis"!==n&&(k={onMouseLeave:yG(s.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:yG(s.handleItemMouseEnter,e.props.onMouseEnter)});var w=ze.cloneElement(e,X3(X3({},a.props),k));if(j){if(!(c>=0)){var N,_=(null!==(N=s.getItemByXY(s.state.activeCoordinate))&&void 0!==N?N:{graphicalItem:w}).graphicalItem,S=_.item,C=void 0===S?e:S,T=_.childIndex,O=X3(X3(X3({},a.props),k),{},{activeIndex:T});return[ze.cloneElement(C,O),null,null]}var P,A;if(o.dataKey&&!o.allowDuplicatedCategory){var E="function"==typeof o.dataKey?function(e){return"function"==typeof o.dataKey?o.dataKey(e.payload):null}:"payload.".concat(o.dataKey.toString());P=xE(h,E,d),A=p&&x&&xE(x,E,d)}else P=null==h?void 0:h[c],A=p&&x&&x[c];if(b||v){var D=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[ze.cloneElement(e,X3(X3(X3({},a.props),k),{},{activeIndex:D})),null,null]}if(!PA(P))return[w].concat(V3(s.renderActivePoints({item:a,activePoint:P,basePoint:A,childIndex:c,isRange:p})))}return p?[w,null,null]:[w,null]})),Z3(s,"renderCustomized",(function(e,t,r){return ze.cloneElement(e,X3(X3({key:"recharts-customized-".concat(r)},s.props),s.state))})),Z3(s,"renderMap",{CartesianGrid:{handler:a5,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:a5},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:a5},YAxis:{handler:a5},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!==(a=r.id)&&void 0!==a?a:uE("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=UL(s.triggeredAfterMouseMove,null!==(n=r.throttleDelay)&&void 0!==n?n:1e3/60),s.state={},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y3(e,t)}(e,ze.Component),$3(e,[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,a=e.height,n=e.layout,s=zE(t,kL);if(s){var i=s.props.defaultIndex;if(!("number"!=typeof i||i<0||i>this.state.tooltipTicks.length-1)){var l=this.state.tooltipTicks[i]&&this.state.tooltipTicks[i].value,o=i5(this.state,r,i,l),c=this.state.tooltipTicks[i].coordinate,d=(this.state.offset.top+a)/2,u="horizontal"===n?{x:c,y:d}:{y:c,x:d},m=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));m&&(u=X3(X3({},u),m.props.points[i].tooltipPosition),o=m.props.points[i].tooltipPayload);var h={activeTooltipIndex:i,isTooltipActive:!0,activeLabel:l,activePayload:o,activeCoordinate:u};this.setState(h),this.renderCursor(s),this.accessibilityManager.setIndex(i)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(!this.props.accessibilityLayer)return null;var r,a;(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin)&&this.accessibilityManager.setDetails({offset:{left:null!==(r=this.props.margin.left)&&void 0!==r?r:0,top:null!==(a=this.props.margin.top)&&void 0!==a?a:0}});return null}},{key:"componentDidUpdate",value:function(e){LE([zE(e.children,kL)],[zE(this.props.children,kL)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=zE(this.props.children,kL);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return i.indexOf(t)>=0?t:n}return n}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,r=this.container,a=r.getBoundingClientRect(),n={top:(t=a).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},s={chartX:Math.round(e.pageX-n.left),chartY:Math.round(e.pageY-n.top)},i=a.width/r.offsetWidth||1,l=this.inRange(s.chartX,s.chartY,i);if(!l)return null;var o=this.state,c=o.xAxisMap,d=o.yAxisMap,u=this.getTooltipEventType(),m=l5(this.state,this.props.data,this.props.layout,l);if("axis"!==u&&c&&d){var h=hE(c).scale,p=hE(d).scale,x=h&&h.invert?h.invert(s.chartX):null,g=p&&p.invert?p.invert(s.chartY):null;return X3(X3({},s),{},{xValue:x,yValue:g},m)}return m?X3(X3({},s),m):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=this.props.layout,n=e/r,s=t/r;if("horizontal"===a||"vertical"===a){var i=this.state.offset;return n>=i.left&&n<=i.left+i.width&&s>=i.top&&s<=i.top+i.height?{x:n,y:s}:null}var l=this.state,o=l.angleAxisMap,c=l.radiusAxisMap;if(o&&c){var d=hE(o);return YG({x:n,y:s},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=zE(e,kL),a={};return r&&"axis"===t&&(a="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),X3(X3({},wE(this.props,this.handleOuterEvent)),a)}},{key:"addListener",value:function(){k3.on(w3,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){k3.removeListener(w3,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var a=this.state.formattedGraphicalItems,n=0,s=a.length;n<s;n++){var i=a[n];if(i.item===e||i.props.key===e.key||t===PE(i.item.type)&&r===i.childIndex)return i}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,r=t.left,a=t.top,n=t.height,s=t.width;return Re.createElement("defs",null,Re.createElement("clipPath",{id:e},Re.createElement("rect",{x:r,y:a,height:n,width:s})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var r=L3(t,2),a=r[0],n=r[1];return X3(X3({},e),{},Z3({},a,n.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var r=L3(t,2),a=r[0],n=r[1];return X3(X3({},e),{},Z3({},a,n.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,a=t.activeItem;if(r&&r.length)for(var n=0,s=r.length;n<s;n++){var i=r[n],l=i.props,o=i.item,c=void 0!==o.type.defaultProps?X3(X3({},o.type.defaultProps),o.props):o.props,d=PE(o.type);if("Bar"===d){var u=(l.data||[]).find((function(t){return bX(e,t)}));if(u)return{graphicalItem:i,payload:u}}else if("RadialBar"===d){var m=(l.data||[]).find((function(t){return YG(e,t)}));if(m)return{graphicalItem:i,payload:m}}else if(aJ(i,a)||nJ(i,a)||sJ(i,a)){var h=cJ({graphicalItem:i,activeTooltipItem:a,itemData:c.data}),p=void 0===c.activeIndex?h:c.activeIndex;return{graphicalItem:X3(X3({},i),{},{childIndex:p}),payload:sJ(i,a)?c.data[h]:i.props.data[h]}}}return null}},{key:"render",value:function(){var e=this;if(!RE(this))return null;var t,r,a=this.props,n=a.children,s=a.className,i=a.width,l=a.height,o=a.style,c=a.compact,d=a.title,u=a.desc,m=q3(a,I3),h=BE(m,!1);if(c)return Re.createElement(p1,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Re.createElement(YE,B3({},h,{width:i,height:l,title:d,desc:u}),this.renderClipPath(),$E(n,this.renderMap)));this.props.accessibilityLayer&&(h.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,h.role=null!==(r=this.props.role)&&void 0!==r?r:"application",h.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},h.onFocus=function(){e.accessibilityManager.focus()});var p=this.parseEventsOfWrapper();return Re.createElement(p1,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Re.createElement("div",B3({className:Ht("recharts-wrapper",s),style:X3({position:"relative",cursor:"default",width:i,height:l},o)},p,{ref:function(t){e.container=t}}),Re.createElement(YE,B3({},h,{width:i,height:l,title:d,desc:u,style:t5}),this.renderClipPath(),$E(n,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}();Z3(h,"displayName",t),Z3(h,"defaultProps",X3({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Z3(h,"getDerivedStateFromProps",(function(e,t){var r=e.dataKey,a=e.data,n=e.children,s=e.width,i=e.height,l=e.layout,o=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var h=d5(e);return X3(X3(X3({},h),{},{updateId:0},m(X3(X3({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:a,prevWidth:s,prevHeight:i,prevLayout:l,prevStackOffset:o,prevMargin:c,prevChildren:n})}if(r!==t.prevDataKey||a!==t.prevData||s!==t.prevWidth||i!==t.prevHeight||l!==t.prevLayout||o!==t.prevStackOffset||!fE(c,t.prevMargin)){var p=d5(e),x={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=X3(X3({},l5(t,a,l)),{},{updateId:t.updateId+1}),f=X3(X3(X3({},p),x),g);return X3(X3(X3({},f),m(X3({props:e},f),t)),{},{prevDataKey:r,prevData:a,prevWidth:s,prevHeight:i,prevLayout:l,prevStackOffset:o,prevMargin:c,prevChildren:n})}if(!LE(n,t.prevChildren)){var y,v,b,j,k=zE(n,GJ),w=k&&null!==(y=null===(v=k.props)||void 0===v?void 0:v.startIndex)&&void 0!==y?y:d,N=k&&null!==(b=null===(j=k.props)||void 0===j?void 0:j.endIndex)&&void 0!==b?b:u,_=w!==d||N!==u,S=!PA(a)&&!_?t.updateId:t.updateId+1;return X3(X3({updateId:S},m(X3(X3({props:e},t),{},{updateId:S,dataStartIndex:w,dataEndIndex:N}),t)),{},{prevChildren:n,dataStartIndex:w,dataEndIndex:N})}return null})),Z3(h,"renderActiveDot",(function(e,t,r){var a;return a=ze.isValidElement(e)?ze.cloneElement(e,t):FO(e)?e(t):Re.createElement(EX,t),Re.createElement(QE,{className:"recharts-active-dot",key:r},a)}));var p=ze.forwardRef((function(e,t){return Re.createElement(h,B3({},e,{ref:t}))}));return p.displayName=h.displayName,p},x5=p5({chartName:"LineChart",GraphicalChild:o4,axisComponents:[{axisType:"xAxis",AxisComp:i3},{axisType:"yAxis",AxisComp:f3}],formatAxisMap:Y0}),g5=p5({chartName:"BarChart",GraphicalChild:B0,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:i3},{axisType:"yAxis",AxisComp:f3}],formatAxisMap:Y0}),f5=p5({chartName:"PieChart",GraphicalChild:jJ,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:wZ},{axisType:"radiusAxis",AxisComp:cZ}],formatAxisMap:function(e,t,r,a,n){var s=e.width,i=e.height,l=e.startAngle,o=e.endAngle,c=mE(e.cx,s,s/2),d=mE(e.cy,i,i/2),u=KG(s,i,r),m=mE(e.innerRadius,u,0),h=mE(e.outerRadius,u,.8*u);return Object.keys(t).reduce((function(e,r){var s,i=t[r],u=i.domain,p=i.reversed;if(PA(i.range))"angleAxis"===a?s=[l,o]:"radiusAxis"===a&&(s=[m,h]),p&&(s=[s[1],s[0]]);else{var x=FG(s=i.range,2);l=x[0],o=x[1]}var g=vG(i,n),f=g.realScaleType,y=g.scale;y.domain(u).range(s),jG(y);var v=NG(y,RG(RG({},i),{},{realScaleType:f})),b=RG(RG(RG({},i),v),{},{range:s,radius:h,realScaleType:f,scale:y,cx:c,cy:d,innerRadius:m,outerRadius:h,startAngle:l,endAngle:o});return RG(RG({},e),{},IG({},r,b))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),y5=p5({chartName:"ScatterChart",GraphicalChild:W4,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:i3},{axisType:"yAxis",AxisComp:f3},{axisType:"zAxis",AxisComp:D4}],formatAxisMap:Y0}),v5=p5({chartName:"AreaChart",GraphicalChild:N4,axisComponents:[{axisType:"xAxis",AxisComp:i3},{axisType:"yAxis",AxisComp:f3}],formatAxisMap:Y0}),b5=p5({chartName:"ComposedChart",GraphicalChild:[o4,N4,B0,W4],axisComponents:[{axisType:"xAxis",AxisComp:i3},{axisType:"yAxis",AxisComp:f3},{axisType:"zAxis",AxisComp:D4}],formatAxisMap:Y0});const j5=({active:e,payload:t,label:r,currentTab:a})=>{var n;if(e&&t&&t.length){const e=null==(n=t[0])?void 0:n.payload;return i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[i.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r}),"weekly"===a&&(null==e?void 0:e.weekStart)&&(null==e?void 0:e.weekEnd)&&i.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:[new Date(e.weekStart).toLocaleDateString("tr-TR")," - ",new Date(e.weekEnd).toLocaleDateString("tr-TR")]}),t.map(((e,t)=>i.jsxs("p",{className:"text-sm",style:{color:e.color},children:[e.name,": ₺",new Intl.NumberFormat("tr-TR").format(e.value)]},t)))]})}return null};function k5({dailyData:e,weeklyData:t,monthlyData:r,loading:a=!1}){const[n,s]=ze.useState("line"),l=[{value:"line",label:"Çizgi Grafik",icon:fr},{value:"bar",label:"Sütun Grafik",icon:gr},{value:"area",label:"Alan Grafik",icon:xr},{value:"pie",label:"Pasta Grafik",icon:yr}],o=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#06B6D4","#84CC16","#F97316"],c=(e,t)=>{if("pie"===n){const t=(e=>e.map(((e,t)=>({name:e.name,value:e.value,fill:o[t%o.length]}))))(e);return i.jsxs(f5,{children:[i.jsx(jJ,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} (${(100*t).toFixed(0)}%)`,outerRadius:120,fill:"#8884d8",dataKey:"value",children:t.map(((e,t)=>i.jsx(ZL,{fill:e.fill},`cell-${t}`)))}),i.jsx(kL,{formatter:e=>[`₺${new Intl.NumberFormat("tr-TR").format(e)}`,"Satış"]}),i.jsx($F,{})]})}const r={data:e,children:[i.jsx(H2,{strokeDasharray:"3 3",className:"stroke-gray-200 dark:stroke-gray-700"},"grid"),i.jsx(i3,{dataKey:"name",className:"text-gray-600 dark:text-gray-400",tick:{fill:"currentColor",fontSize:"weekly"===t?12:14},angle:"weekly"===t?-45:0,textAnchor:"weekly"===t?"end":"middle",height:"weekly"===t?80:60},"xaxis"),i.jsx(f3,{className:"text-gray-600 dark:text-gray-400",tick:{fill:"currentColor"},tickFormatter:e=>`₺${e/1e3}K`},"yaxis"),i.jsx(kL,{content:e=>i.jsx(j5,{...e,currentTab:t})},"tooltip"),i.jsx($F,{},"legend")]};switch(n){case"line":return i.jsxs(x5,{...r,children:[r.children,i.jsx(o4,{type:"monotone",dataKey:"value",stroke:"#3B82F6",strokeWidth:2,name:"daily"===t?"Bu Hafta":"weekly"===t?"Haftalık Satış":"Aylık Satış",dot:{fill:"#3B82F6",strokeWidth:2,r:4}}),"daily"===t&&i.jsx(o4,{type:"monotone",dataKey:"previousValue",stroke:"#9CA3AF",strokeWidth:2,strokeDasharray:"5 5",name:"Geçen Hafta",dot:{fill:"#9CA3AF",strokeWidth:2,r:4}})]});case"bar":return i.jsxs(g5,{...r,children:[r.children,i.jsx(B0,{dataKey:"value",fill:"daily"===t?"#3B82F6":"weekly"===t?"#10B981":"#8B5CF6",name:"daily"===t?"Bu Hafta":"weekly"===t?"Haftalık Satış":"Aylık Satış",radius:[8,8,0,0]}),"daily"===t&&i.jsx(B0,{dataKey:"previousValue",fill:"#9CA3AF",name:"Geçen Hafta",radius:[8,8,0,0]})]});case"area":return i.jsxs(v5,{...r,children:[r.children,i.jsx(N4,{type:"monotone",dataKey:"value",stroke:"daily"===t?"#3B82F6":"weekly"===t?"#10B981":"#8B5CF6",fill:"daily"===t?"#3B82F680":"weekly"===t?"#10B98180":"#8B5CF680",strokeWidth:2,name:"daily"===t?"Bu Hafta":"weekly"===t?"Haftalık Satış":"Aylık Satış"}),"daily"===t&&i.jsx(N4,{type:"monotone",dataKey:"previousValue",stroke:"#9CA3AF",fill:"#9CA3AF80",strokeWidth:2,name:"Geçen Hafta"})]});default:return null}};return i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm",children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(no,{className:"text-lg text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[i.jsx(an,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Satış Grafikleri"]}),i.jsxs(eO,{value:n,onValueChange:e=>s(e),children:[i.jsx(rO,{className:"w-[180px]",children:i.jsx(tO,{placeholder:"Grafik Türü Seç"})}),i.jsx(sO,{children:l.map((e=>{const t=e.icon;return i.jsx(iO,{value:e.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(t,{className:"h-4 w-4"}),e.label]})},e.value)}))})]})]})}),i.jsx(io,{children:a?i.jsx("div",{className:"h-[400px] flex items-center justify-center",children:i.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 w-full h-full rounded-lg"})}):i.jsxs(Yo,{defaultValue:"daily",className:"w-full",children:[i.jsxs(Vo,{className:"grid w-full mb-4 "+(t&&t.length>0?"grid-cols-3":"grid-cols-2"),children:[i.jsx(Go,{value:"daily",children:"Günlük"}),t&&t.length>0&&i.jsx(Go,{value:"weekly",children:"Haftalık"}),i.jsx(Go,{value:"monthly",children:"Aylık"})]}),i.jsx(Wo,{value:"daily",children:i.jsx("div",{className:"h-[350px]",children:i.jsx(XL,{width:"100%",height:"100%",children:c(e,"daily")})})}),t&&t.length>0&&i.jsx(Wo,{value:"weekly",children:i.jsx("div",{className:"h-[350px]",children:i.jsx(XL,{width:"100%",height:"100%",children:c(t,"weekly")})})}),i.jsx(Wo,{value:"monthly",children:i.jsx("div",{className:"h-[350px]",children:i.jsx(XL,{width:"100%",height:"100%",children:c(r,"monthly")})})})]})})]})}const w5=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];function N5({data:e,loading:t=!1}){const r=({active:e,payload:t})=>e&&t&&t.length?i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded shadow-lg border border-gray-200 dark:border-gray-700",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t[0].name}),i.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:["Satış: ",t[0].value," adet"]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Oran: %",t[0].payload.percentage]})]}):null;return i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm",children:[i.jsx(ao,{children:i.jsxs(no,{className:"text-lg text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),"En Çok Satan Ürünler"]})}),i.jsx(io,{children:t?i.jsx("div",{className:"h-[350px] flex items-center justify-center",children:i.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 w-64 h-64 rounded-full"})}):0===e.length?i.jsx("div",{className:"h-[350px] flex items-center justify-center text-gray-500 dark:text-gray-400",children:"Henüz veri bulunmuyor"}):i.jsx("div",{className:"h-[350px]",children:i.jsx(XL,{width:"100%",height:"100%",children:i.jsxs(f5,{children:[i.jsx(jJ,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:({cx:e,cy:t,midAngle:r,innerRadius:a,outerRadius:n,percent:s})=>{const l=Math.PI/180,o=a+.5*(n-a),c=e+o*Math.cos(-r*l),d=t+o*Math.sin(-r*l);return s<.05?null:i.jsx("text",{x:c,y:d,fill:"white",textAnchor:c>e?"start":"end",dominantBaseline:"central",className:"font-medium text-sm",children:`${(100*s).toFixed(0)}%`})},outerRadius:120,fill:"#8884d8",dataKey:"value",children:e.map(((e,t)=>i.jsx(ZL,{fill:w5[t%w5.length]},`cell-${t}`)))}),i.jsx(kL,{content:i.jsx(r,{})}),i.jsx($F,{verticalAlign:"bottom",height:36,formatter:e=>i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e})})]})})})})]})}function _5({userRole:e="yonetici"}){const t=xl(),r=[{id:"new-order",title:"Yeni Sipariş",description:"Hızlı sipariş oluştur",icon:i.jsx(Pa,{className:"h-4 w-4"}),link:"/customer/new-order",color:"bg-blue-600 hover:bg-blue-700 text-white",permission:["yonetici","muhasebeci"]},{id:"orders",title:"Siparişler",description:"Tüm siparişleri görüntüle",icon:i.jsx(Ha,{className:"h-4 w-4"}),link:"/admin/orders",color:"bg-green-600 hover:bg-green-700 text-white",permission:["yonetici","muhasebeci","reklamci"]},{id:"products",title:"Ürünler",description:"Ürün yönetimi",icon:i.jsx(ba,{className:"h-4 w-4"}),link:"/admin/products",color:"bg-purple-600 hover:bg-purple-700 text-white",permission:["yonetici"]},{id:"users",title:"Kullanıcılar",description:"Kullanıcı yönetimi",icon:i.jsx(hn,{className:"h-4 w-4"}),link:"/admin/users",color:"bg-orange-600 hover:bg-orange-700 text-white",permission:["yonetici"]},{id:"invoices",title:"Faturalar",description:"Fatura işlemleri",icon:i.jsx(Wr,{className:"h-4 w-4"}),link:"/admin/invoices",color:"bg-red-600 hover:bg-red-700 text-white",permission:["yonetici","muhasebeci"]},{id:"cargo",title:"Kargo",description:"Kargo takibi",icon:i.jsx(sn,{className:"h-4 w-4"}),link:"/admin/cargo/delivery-list",color:"bg-indigo-600 hover:bg-indigo-700 text-white",permission:["yonetici","muhasebeci"]},{id:"sales",title:"Satış Analizi",description:"Detaylı raporlar",icon:i.jsx(gr,{className:"h-4 w-4"}),link:"/admin/sales",color:"bg-pink-600 hover:bg-pink-700 text-white",permission:["yonetici","reklamci"]},{id:"settings",title:"Ayarlar",description:"Sistem ayarları",icon:i.jsx(La,{className:"h-4 w-4"}),link:"/admin/settings",color:"bg-gray-600 hover:bg-gray-700 text-white",permission:["yonetici"]}].filter((t=>!t.permission||t.permission.includes(e)));return i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm",children:[i.jsx(ao,{children:i.jsxs(no,{className:"text-lg text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[i.jsx(bn,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}),"Hızlı Erişim"]})}),i.jsx(io,{children:i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:r.map((e=>i.jsxs(oo,{onClick:()=>t(e.link),className:`h-auto flex-col items-center justify-center gap-2 py-4 px-3 ${e.color}`,variant:"default",children:[i.jsx("div",{className:"p-2 rounded-full bg-white/20",children:e.icon}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"font-medium text-sm",children:e.title}),i.jsx("p",{className:"text-xs opacity-90",children:e.description})]})]},e.id)))})})]})}const S5=Gt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),C5=ze.forwardRef((({className:e,variant:t,...r},a)=>i.jsx("div",{ref:a,role:"alert",className:xs(S5({variant:t}),e),...r})));C5.displayName="Alert";ze.forwardRef((({className:e,...t},r)=>i.jsx("h5",{ref:r,className:xs("mb-1 font-medium leading-none tracking-tight",e),...t}))).displayName="AlertTitle";const T5=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{ref:r,className:xs("text-sm [&_p]:leading-relaxed",e),...t})));function O5(){const{userProfile:e}=Jl(),{stats:t,activities:r,salesChartData:a,productPerformance:n,criticalStockProducts:s,systemStatus:l,isLoading:o}=YT(),[c,d]=ze.useState(!1);return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Dashboard"}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[(()=>{const e=(new Date).getHours();return e<12?"Günaydın":e<18?"İyi günler":"İyi akşamlar"})(),", ",null==e?void 0:e.full_name,"! 👋"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Co,{className:(e=>{switch(e){case"yonetici":return"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300";case"muhasebeci":return"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300";case"toptanci":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";case"reklamci":return"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/50 dark:text-gray-300"}})((null==e?void 0:e.role)||""),children:(e=>{switch(e){case"yonetici":return"Yönetici";case"muhasebeci":return"Muhasebeci";case"toptanci":return"Toptancı";case"reklamci":return"Reklamcı";default:return e}})((null==e?void 0:e.role)||"")}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsx(Pr,{className:"h-4 w-4 text-green-500"}),"Sistem Aktif"]})]})]})}),"yonetici"===(null==e?void 0:e.role)&&t&&(t.users.pending>0||t.lowStock.critical>0)&&i.jsxs(C5,{className:"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800",children:[i.jsx(Tr,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),i.jsxs(T5,{className:"text-orange-800 dark:text-orange-200 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Dikkat gerektiren işlemler:"}),t.users.pending>0&&i.jsxs("span",{className:"ml-2",children:[t.users.pending," kullanıcı onay bekliyor."]}),t.lowStock.critical>0&&i.jsxs("span",{className:"ml-2",children:[t.lowStock.critical," ürün kritik stok seviyesinde."]})]}),t.lowStock.critical>0&&i.jsxs(sd,{open:c,onOpenChange:d,children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{variant:"outline",size:"sm",className:"ml-4",children:[i.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Detayları Gör"]})}),i.jsxs(cd,{className:"max-w-2xl",children:[i.jsx(dd,{children:i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5 text-orange-500"}),"Kritik Stok Seviyesindeki Ürünler"]})}),i.jsx("div",{className:"space-y-4",children:s&&s.length>0?i.jsx("div",{className:"space-y-3",children:s.map((e=>{var t,r,a;return i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-orange-50 dark:bg-orange-900/20",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:null==(t=e.products)?void 0:t.name}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[i.jsxs("p",{children:["Kod: ",null==(r=e.products)?void 0:r.code]}),i.jsxs("p",{children:["Kategori: ",null==(a=e.products)?void 0:a.category]}),i.jsxs("p",{children:["Renk: ",e.color," | Boyut: ",e.size]}),i.jsxs("p",{children:["SKU: ",e.sku]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs(Co,{variant:0===e.stock_quantity?"destructive":"secondary",className:"text-sm",children:[e.stock_quantity," adet"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:0===e.stock_quantity?"Tükendi":"Kritik seviye"})]})]},e.id)}))}):i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Kritik stok seviyesinde ürün bulunmuyor."})})]})]})]})]}),o?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map((e=>i.jsx(Fc,{className:"h-32"},e)))}):t&&i.jsx(GT,{stats:t,loading:o}),i.jsx(_5,{userRole:null==e?void 0:e.role}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[["yonetici","muhasebeci","reklamci"].includes((null==e?void 0:e.role)||"")&&i.jsx("div",{className:"lg:col-span-2",children:o?i.jsx(Fc,{className:"h-[450px]"}):a&&i.jsx(k5,{dailyData:a.dailyData,weeklyData:a.weeklyData,monthlyData:a.monthlyData,loading:o})}),i.jsx("div",{className:["yonetici","muhasebeci","reklamci"].includes((null==e?void 0:e.role)||"")?"":"lg:col-span-3",children:o?i.jsx(Fc,{className:"h-[450px]"}):i.jsx(JT,{activities:r||[],loading:o})})]}),["yonetici","reklamci"].includes((null==e?void 0:e.role)||"")&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx("div",{children:o?i.jsx(Fc,{className:"h-[400px]"}):n&&i.jsx(N5,{data:n,loading:o})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Sistem Performansı"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CPU Kullanımı"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[l?Math.round(l.systemPerformance.cpuUsage):0,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full "+(l&&l.systemPerformance.cpuUsage>80?"bg-red-500":l&&l.systemPerformance.cpuUsage>60?"bg-yellow-500":"bg-green-500"),style:{width:`${l?l.systemPerformance.cpuUsage:0}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bellek Kullanımı"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[l?Math.round(l.systemPerformance.memoryUsage):0,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full "+(l&&l.systemPerformance.memoryUsage>80?"bg-red-500":l&&l.systemPerformance.memoryUsage>60?"bg-yellow-500":"bg-blue-500"),style:{width:`${l?l.systemPerformance.memoryUsage:0}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Disk Alanı"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[l?Math.round(l.systemPerformance.diskUsage):0,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full "+(l&&l.systemPerformance.diskUsage>80?"bg-red-500":l&&l.systemPerformance.diskUsage>60?"bg-yellow-500":"bg-blue-500"),style:{width:`${l?l.systemPerformance.diskUsage:0}%`}})})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Hızlı Bilgiler"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ortalama Sipariş Değeri"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["₺",l?new Intl.NumberFormat("tr-TR").format(Math.round(l.avgOrderValue)):"0"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aktif Kullanıcı Oranı"}),i.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["%",l&&l.totalUsers>0?Math.round(l.activeUsers/l.totalUsers*100):0]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ürün Aktiflik Oranı"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["%",l&&l.totalProducts>0?Math.round(l.activeProducts/l.totalProducts*100):0]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Düşük Stok Oranı"}),i.jsxs("span",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:["%",l&&l.totalProducts>0?Math.round(l.lowStockCount/l.totalProducts*100):0]})]})]})]})]})]})]})}T5.displayName="AlertDescription";const P5=ze.forwardRef((({className:e,...t},r)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:r,className:xs("w-full caption-bottom text-sm",e),...t})})));P5.displayName="Table";const A5=ze.forwardRef((({className:e,...t},r)=>i.jsx("thead",{ref:r,className:xs("[&_tr]:border-b",e),...t})));A5.displayName="TableHeader";const E5=ze.forwardRef((({className:e,...t},r)=>i.jsx("tbody",{ref:r,className:xs("[&_tr:last-child]:border-0",e),...t})));E5.displayName="TableBody";ze.forwardRef((({className:e,...t},r)=>i.jsx("tfoot",{ref:r,className:xs("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}))).displayName="TableFooter";const D5=ze.forwardRef((({className:e,...t},r)=>i.jsx("tr",{ref:r,className:xs("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t})));D5.displayName="TableRow";const M5=ze.forwardRef((({className:e,...t},r)=>i.jsx("th",{ref:r,className:xs("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t})));M5.displayName="TableHead";const z5=ze.forwardRef((({className:e,...t},r)=>i.jsx("td",{ref:r,className:xs("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t})));z5.displayName="TableCell";ze.forwardRef((({className:e,...t},r)=>i.jsx("caption",{ref:r,className:xs("mt-4 text-sm text-muted-foreground",e),...t}))).displayName="TableCaption";var R5="AlertDialog",[I5,F5]=n(R5,[be]),B5=be(),L5=e=>{const{__scopeAlertDialog:t,...r}=e,a=B5(t);return i.jsx(X,{...a,...r,modal:!0})};L5.displayName=R5;var q5=ze.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...a}=e,n=B5(r);return i.jsx(Z,{...n,...a,ref:t})}));q5.displayName="AlertDialogTrigger";var $5=e=>{const{__scopeAlertDialog:t,...r}=e,a=B5(t);return i.jsx(Q,{...a,...r})};$5.displayName="AlertDialogPortal";var K5=ze.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...a}=e,n=B5(r);return i.jsx(H,{...n,...a,ref:t})}));K5.displayName="AlertDialogOverlay";var U5="AlertDialogContent",[H5,Y5]=I5(U5),V5=ze.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,children:a,...n}=e,l=B5(r),o=ze.useRef(null),c=s(t,o),d=ze.useRef(null);return i.jsx(je,{contentName:U5,titleName:G5,docsSlug:"alert-dialog",children:i.jsx(H5,{scope:r,cancelRef:d,children:i.jsxs(Y,{role:"alertdialog",...l,...n,ref:c,onOpenAutoFocus:h(n.onOpenAutoFocus,(e=>{var t;e.preventDefault(),null==(t=d.current)||t.focus({preventScroll:!0})})),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[i.jsx(k,{children:a}),i.jsx(t6,{contentRef:o})]})})})}));V5.displayName=U5;var G5="AlertDialogTitle",W5=ze.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...a}=e,n=B5(r);return i.jsx(G,{...n,...a,ref:t})}));W5.displayName=G5;var Q5="AlertDialogDescription",X5=ze.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...a}=e,n=B5(r);return i.jsx(W,{...n,...a,ref:t})}));X5.displayName=Q5;var Z5=ze.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...a}=e,n=B5(r);return i.jsx(V,{...n,...a,ref:t})}));Z5.displayName="AlertDialogAction";var J5="AlertDialogCancel",e6=ze.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...a}=e,{cancelRef:n}=Y5(J5,r),l=B5(r),o=s(t,n);return i.jsx(V,{...l,...a,ref:o})}));e6.displayName=J5;var t6=({contentRef:e})=>{const t=`\`${U5}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${U5}\` by passing a \`${Q5}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${U5}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return ze.useEffect((()=>{var t;document.getElementById(null==(t=e.current)?void 0:t.getAttribute("aria-describedby"))}),[t,e]),null},r6=K5,a6=V5,n6=Z5,s6=e6,i6=W5,l6=X5;const o6=L5,c6=q5,d6=$5,u6=ze.forwardRef((({className:e,...t},r)=>i.jsx(r6,{className:xs("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r})));u6.displayName=r6.displayName;const m6=ze.forwardRef((({className:e,...t},r)=>i.jsxs(d6,{children:[i.jsx(u6,{}),i.jsx(a6,{ref:r,className:xs("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]})));m6.displayName=a6.displayName;const h6=({className:e,...t})=>i.jsx("div",{className:xs("flex flex-col space-y-2 text-center sm:text-left",e),...t});h6.displayName="AlertDialogHeader";const p6=({className:e,...t})=>i.jsx("div",{className:xs("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});p6.displayName="AlertDialogFooter";const x6=ze.forwardRef((({className:e,...t},r)=>i.jsx(i6,{ref:r,className:xs("text-lg font-semibold",e),...t})));x6.displayName=i6.displayName;const g6=ze.forwardRef((({className:e,...t},r)=>i.jsx(l6,{ref:r,className:xs("text-sm text-muted-foreground",e),...t})));g6.displayName=l6.displayName;const f6=ze.forwardRef((({className:e,...t},r)=>i.jsx(n6,{ref:r,className:xs(lo(),e),...t})));f6.displayName=n6.displayName;const y6=ze.forwardRef((({className:e,...t},r)=>i.jsx(s6,{ref:r,className:xs(lo({variant:"outline"}),"mt-2 sm:mt-0",e),...t})));y6.displayName=s6.displayName;const v6=ze.forwardRef((({className:e,...t},r)=>i.jsx("textarea",{className:xs("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t})));v6.displayName="Textarea";var b6="Checkbox",[j6,k6]=n(b6),[w6,N6]=j6(b6),_6=ze.forwardRef(((e,t)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:l,required:c,disabled:u,value:m="on",onCheckedChange:p,form:x,...g}=e,[f,y]=ze.useState(null),v=s(t,(e=>y(e))),b=ze.useRef(!1),j=!f||(x||!!f.closest("form")),[k=!1,w]=d({prop:n,defaultProp:l,onChange:p}),N=ze.useRef(k);return ze.useEffect((()=>{const e=null==f?void 0:f.form;if(e){const t=()=>w(N.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[f,w]),i.jsxs(w6,{scope:r,state:k,disabled:u,children:[i.jsx(o.button,{type:"button",role:"checkbox","aria-checked":O6(k)?"mixed":k,"aria-required":c,"data-state":P6(k),"data-disabled":u?"":void 0,disabled:u,value:m,...g,ref:v,onKeyDown:h(e.onKeyDown,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:h(e.onClick,(e=>{w((e=>!!O6(e)||!e)),j&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())}))}),j&&i.jsx(T6,{control:f,bubbles:!b.current,name:a,value:m,checked:k,required:c,disabled:u,form:x,style:{transform:"translateX(-100%)"},defaultChecked:!O6(l)&&l})]})}));_6.displayName=b6;var S6="CheckboxIndicator",C6=ze.forwardRef(((e,t)=>{const{__scopeCheckbox:r,forceMount:a,...n}=e,s=N6(S6,r);return i.jsx(u,{present:a||O6(s.state)||!0===s.state,children:i.jsx(o.span,{"data-state":P6(s.state),"data-disabled":s.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})}));C6.displayName=S6;var T6=e=>{const{control:t,checked:r,bubbles:a=!0,defaultChecked:n,...s}=e,l=ze.useRef(null),o=ke(r),c=we(t);ze.useEffect((()=>{const e=l.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==r&&n){const t=new Event("click",{bubbles:a});e.indeterminate=O6(r),n.call(e,!O6(r)&&r),e.dispatchEvent(t)}}),[o,r,a]);const d=ze.useRef(!O6(r)&&r);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??d.current,...s,tabIndex:-1,ref:l,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function O6(e){return"indeterminate"===e}function P6(e){return O6(e)?"indeterminate":e?"checked":"unchecked"}var A6=_6,E6=C6;const D6=ze.forwardRef((({className:e,...t},r)=>i.jsx(A6,{ref:r,className:xs("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(E6,{className:xs("flex items-center justify-center text-current"),children:i.jsx(br,{className:"h-4 w-4"})})})));D6.displayName=A6.displayName;const M6=ze.forwardRef((({value:e,onChange:t,className:r},a)=>{const[n,s]=ze.useState(e||"#000000"),l=e=>{const r=e.target.value;s(r),t(r)};return i.jsxs(nu,{children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",className:xs("w-[220px] justify-start text-left font-normal",!e&&"text-muted-foreground",r),children:[i.jsx("div",{className:"mr-2 h-4 w-4 rounded",style:{backgroundColor:n}}),i.jsx("span",{children:n})]})}),i.jsx(iu,{className:"w-[220px] p-3",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(co,{type:"color",value:n,onChange:l,className:"h-8 w-full cursor-pointer"}),i.jsx(co,{value:n,onChange:l,className:"h-8"})]})})]})}));M6.displayName="ColorPicker";const z6="https://api.parasut.com/v4";let R6=null,I6=null;const F6=async()=>{const{data:e}=await Wl.from("system_settings").select("setting_key, setting_value").in("setting_key",["parasut_company_id"]);return{companyId:((null==e?void 0:e.reduce(((e,t)=>(e[t.setting_key]=t.setting_value,e)),{}))||{}).parasut_company_id||"550402"}},B6=async()=>{try{const e=await(async()=>{try{const e=await fetch("https://cors-bypass.redexdatabase.workers.dev/https://parasute.baltacikurumsal.com/api/bearer");if(!e.ok)throw new Error("Token API yanıt vermedi");return await e.json()}catch(e){throw new Error(`Token alınamadı: ${e instanceof Error?e.message:"Bilinmeyen hata"}`)}})();if(!e.bearerToken)throw new Error("API'den geçerli bir token alınamadı");const t=new Date(e.lastUpdated);return t.setMilliseconds(t.getMilliseconds()+e.timeToNext.totalMs),await Promise.all([Wl.from("system_settings").upsert({setting_key:"parasut_token",setting_value:e.bearerToken,setting_type:"string",description:"Paraşüt API Bearer token",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),Wl.from("system_settings").upsert({setting_key:"parasut_token_expires_at",setting_value:t.toISOString(),setting_type:"string",description:"Paraşüt API token son kullanma tarihi",updated_at:(new Date).toISOString()},{onConflict:"setting_key"})]),R6=e.bearerToken,I6=t.toISOString(),{token:e.bearerToken,expiresAt:t.toISOString()}}catch(e){throw new Error(`Token yenileme hatası: ${e instanceof Error?e.message:"Bilinmeyen hata"}`)}},L6=async()=>{if(R6&&I6&&!(e=>{if(!e)return!0;const t=new Date(e);return new Date>=t})(I6))return R6;return(await B6()).token},q6=async()=>({accept:"application/vnd.api+json","accept-language":"tr;q=0.7",authorization:await L6(),"cache-control":"no-cache","content-type":"application/vnd.api+json",pragma:"no-cache","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}),$6=e=>`https://cors-bypass.redexdatabase.workers.dev/${e}`,K6="1017521562",U6="1009104546",H6="1045446505",Y6="1005363789",V6="1045446676",G6="1045446350",W6="1001477314",Q6="1000553450",X6="1000026766",Z6=(e,t)=>{const r=[];e.forEach(((e,t)=>{const a=J6(e.item_type,e.product_variations.products.category,e.notes),n=e.product_variations.products.tax_rate||10;let s,i,l,o;if(0===n)s=e.unit_price,i=e.total_price,l=0,o=e.total_price;else{const t=1+n/100;s=e.unit_price/t,i=e.total_price/t,l=i*n/100,o=i+l}r.push({attributes:{unit_price:parseFloat(s.toFixed(4)),quantity:e.quantity,discount_type:"percentage",discount:"0.00",invoice_discount:"0.00",vat:l.toFixed(2),excise_duty_type:"percentage",excise_duty:"0.00",communications_tax:"0.00",accommodation_tax:"0.00",net_total_without_invoice_discount:0,detail_no:null,shipping_method:null,delivery_method:null,net_total:o.toFixed(2),discount_value:"0.00",discount_rate:"0.00",vat_rate:n.toFixed(2),excise_duty_value:"0.00",excise_duty_rate:"0.00",communications_tax_rate:"0.00",accommodation_tax_rate:"0.00",accommodation_tax_exempt:!1,vat_withholding:"0.00",vat_withholding_rate:"0.00",vat_withholding_code:null,unrefunded_quantity:e.quantity,vat_exemption_code:null,diib_code:null},relationships:{product:{data:{type:"products",id:a}},invoice:{data:{type:"sales_invoices",id:null}},warehouse:{data:{type:"warehouses",id:"1000000161"}}},type:"sales_invoice_details"})}));return t.filter((e=>e.price>0)).forEach((e=>{const t=Math.round(e.price/20),a=20/1.1,n=a*t,s=10*n/100;r.push({attributes:{unit_price:parseFloat(a.toFixed(4)),quantity:t,discount_type:"percentage",discount:"0.00",invoice_discount:"0.00",vat:s.toFixed(2),excise_duty_type:"percentage",excise_duty:"0.00",communications_tax:"0.00",accommodation_tax:"0.00",net_total_without_invoice_discount:0,detail_no:null,shipping_method:null,delivery_method:null,net_total:parseFloat((n+s).toFixed(4)),discount_value:"0.00",discount_rate:"0.00",vat_rate:10..toFixed(2),excise_duty_value:"0.00",excise_duty_rate:"0.00",communications_tax_rate:"0.00",accommodation_tax_rate:"0.00",accommodation_tax_exempt:!1,vat_withholding:"0.00",vat_withholding_rate:"0.00",vat_withholding_code:null,unrefunded_quantity:t,vat_exemption_code:null,diib_code:null},relationships:{product:{data:{type:"products",id:V6}},invoice:{data:{type:"sales_invoices",id:null}},warehouse:{data:{type:"warehouses",id:"1000000161"}}},type:"sales_invoice_details"})})),r},J6=(e,t,r)=>{switch(e){case"ready_stock":default:return K6;case"shorts":return(null==t?void 0:t.toLowerCase().includes("tasarım"))?H6:U6;case"socks":return Y6;case"design":return G6;case"product":if(r){const e=r.toLowerCase();if(e.includes("eldiven"))return W6;if(e.includes("yelek"))return X6;if(e.includes("tekmelik"))return Q6}return W6}},e8=async e=>{const t=[];let r;try{r={step:"contact_check",status:"in_progress",message:"Sipariş detayları alınıyor..."},t.push(r);const a=await r8(e);if(!a)throw new Error("Sipariş bulunamadı");const{order:n,orderItems:s,printRequests:i}=a;r.status="completed",r.message="Sipariş detayları başarıyla alındı",r={step:"invoice_create",status:"in_progress",message:"Yerel fatura oluşturuluyor..."},t.push(r);const l=(new Date).toISOString().split("T")[0],o=`LOCAL-${n.order_number}-${Date.now()}`,c=s.reduce(((e,t)=>e+t.total_price),0),d=c+i.reduce(((e,t)=>e+(t.price||0)),0),u=.1*d,m=d+u,{data:h,error:p}=await Wl.from("invoices").insert({order_id:e,customer_id:n.customer_id,invoice_number:o,invoice_date:l,due_date:l,subtotal:c,tax_amount:u,total_amount:m,status:"draft",payment_method:null,payment_date:null,notes:`Yerel fatura - Sipariş: ${n.order_number}`,parasut_invoice_id:null,parasut_contact_id:null,parasut_invoice_url:null}).select().single();if(p)throw new Error(`Fatura oluşturma hatası: ${p.message}`);r.status="completed",r.message="Yerel fatura başarıyla oluşturuldu",r.data={invoiceId:h.id},r={step:"supabase_save",status:"in_progress",message:"Sipariş durumu güncelleniyor..."},t.push(r);const{error:x}=await Wl.from("orders").update({updated_at:(new Date).toISOString()}).eq("id",e);return r.status="completed",r.message="Sipariş durumu güncellendi",t.push({step:"completed",status:"completed",message:"Yerel fatura işlemi tamamlandı"}),{success:!0,invoice:{data:{id:h.id,type:"sales_invoices",attributes:{currency:"TRL",gross_total:m.toString(),total_vat:u.toString(),net_total:d.toString(),net_total_in_trl:d.toString(),issue_date:l,due_date:l,description:`Yerel Fatura - ${n.order_number}`,item_type:"invoice",contact_type:"person",order_no:o,invoice_discount:"0",withholding_rate:"0",total_discount:"0",exchange_rate:"1"},relationships:{contact:{data:{type:"contacts",id:n.customer_id||""}},details:{data:[]}}}},contact:null,steps:t}}catch(a){return t.push({step:"error",status:"error",message:`Hata oluştu: ${a.message||"Bilinmeyen hata"}`}),{success:!1,steps:t,error:a.message||"Bilinmeyen hata oluştu"}}},t8=async(e,t=!1)=>{const r=[];let a;try{if(t)return await e8(e);a={step:"contact_check",status:"in_progress",message:"Sipariş detayları alınıyor..."},r.push(a);const n=await r8(e);if(!n)throw new Error("Sipariş bulunamadı");const{order:s,orderItems:i,printRequests:l}=n;a.status="completed",a.message="Sipariş detayları başarıyla alındı",a={step:"contact_check",status:"in_progress",message:"Müşteri Paraşüt'te kontrol ediliyor..."},r.push(a);const o=s.company_name||s.customer_name||"Unknown Customer",c=await(async e=>{try{const r=await F6();let a=await q6(),n=`${z6}/${r.companyId}/contacts`;e&&(n+=`?filter[name]=${encodeURIComponent(e.trim())}`);let s=await fetch($6(n),{method:"GET",headers:a});if(401===s.status)try{R6=null,I6=null,await B6(),a=await q6(),s=await fetch($6(n),{method:"GET",headers:a})}catch(t){if(t instanceof Error){if(t.message.includes("COOKIE_EXPIRED"))throw new Error("⚠️ Cookie süresi dolmuş! Lütfen Admin Ayarlar > Entegrasyonlar bölümünden Paraşüt'te yeniden giriş yapıp yeni cookie verisi girin.");if(t.message.includes("COOKIE_DATA_MISSING"))throw new Error("⚠️ Cookie verisi bulunamadı! Lütfen Admin Ayarlar > Entegrasyonlar bölümünden Paraşüt cookie verisi girin.")}throw t}if(!s.ok)throw new Error(`Contacts getirilemedi (${s.status}): ${s.statusText}`);return await s.json()}catch(r){throw r}})(o);let d,u;if(c.data&&c.data.length>0)d=c.data[0].id,u=c.data[0],a.status="completed",a.message="Müşteri Paraşüt'te bulundu",a.data={contactId:d};else{a={step:"contact_create",status:"in_progress",message:"Yeni müşteri Paraşüt'te oluşturuluyor..."},r.push(a);const e=((e,t)=>{const r="company"===e.customer_type||e.company_name;return{data:{attributes:{contact_type:r?"company":"person",account_type:"customer",name:r?e.company_name||(null==t?void 0:t.company):e.customer_name||(null==t?void 0:t.full_name),short_name:null,phone:e.customer_phone||(null==t?void 0:t.phone),fax:null,address:e.customer_address||(null==t?void 0:t.address),is_abroad:!1,postal_code:null,district:e.customer_district||"istanbul",city:e.customer_city||"beylikdüzü",country:null,tax_info:null,tax_number:e.customer_tc||"1111111111",archived:!1,ibans:[],term_days:0,exchange_rate_type:"buying",opening_balance:{},remove_opening_balance:!1,untrackable:!1},relationships:{category:{},price_list:{data:null}},type:"contacts"}}})(s,null);u=await(async e=>{try{const r=await F6();let a=await q6(),n=await fetch($6(`${z6}/${r.companyId}/contacts`),{method:"POST",headers:a,body:JSON.stringify(e)});if(401===n.status)try{R6=null,I6=null,await B6(),a=await q6(),n=await fetch($6(`${z6}/${r.companyId}/contacts`),{method:"POST",headers:a,body:JSON.stringify(e)})}catch(t){if(t instanceof Error){if(t.message.includes("COOKIE_EXPIRED"))throw new Error("⚠️ Cookie süresi dolmuş! Lütfen Admin Ayarlar > Entegrasyonlar bölümünden Paraşüt'te yeniden giriş yapıp yeni cookie verisi girin.");if(t.message.includes("COOKIE_DATA_MISSING"))throw new Error("⚠️ Cookie verisi bulunamadı! Lütfen Admin Ayarlar > Entegrasyonlar bölümünden Paraşüt cookie verisi girin.")}throw t}if(!n.ok){const e=await n.text();throw new Error(`Contact oluşturulamadı (${n.status}): ${e}`)}return await n.json()}catch(r){throw r}})(e),d=u.data.id,a.status="completed",a.message="Müşteri Paraşüt'te oluşturuldu",a.data={contactId:d}}a={step:"invoice_create",status:"in_progress",message:"Fatura oluşturuluyor..."},r.push(a);const m=((e,t,r,a,n)=>{const s=((e,t)=>{let r=0,a=0;return e.forEach((e=>{const t=e.product_variations.products.tax_rate||10,n=1+t/100,s=e.total_price/n;r+=s,a+=s*t/100})),t.forEach((e=>{if(e.price>0){const t=10,n=1+t/100,s=e.price/n;r+=s,a+=s*t/100}})),{grossTotal:(r+a).toFixed(2),totalVat:a.toFixed(2),netTotal:r.toFixed(2)}})(r,a),i=(new Date).toISOString().split("T")[0];return{data:{attributes:{currency:"TRL",total_discount:"0.00",total_invoice_discount:"0.00",invoice_discount_type:"percentage",withholding:"0.00",total_vat_withholding:"0.00",total_excise_duty:"0.00",total_communications_tax:"0.00",total_accommodation_tax:"0.00",gross_total:s.grossTotal,total_vat:s.totalVat,exchange_rate:"1.0000",net_total:s.netTotal,net_total_in_trl:s.netTotal,remaining:0,issue_date:(()=>{const t=new Date(e.created_at.split("T")[0]);return(new Date(i).getTime()-t.getTime())/864e5>7?i:e.created_at.split("T")[0]})(),due_date:(()=>{const t=new Date(e.created_at.split("T")[0]);return(new Date(i).getTime()-t.getTime())/864e5>7?i:e.created_at.split("T")[0]})(),order_date:(()=>{const t=new Date(e.created_at.split("T")[0]);return(new Date(i).getTime()-t.getTime())/864e5>7?i:e.created_at.split("T")[0]})(),payment_status:null,days_overdue:null,days_till_due_date:null,is_recurred_item:!1,description:`Sipariş Numarası: ${e.order_number}`,item_type:"invoice",item_type_before_cancellation:null,archived:!1,invoice_no:null,invoice_id:null,invoice_series:null,billing_address:e.billing_address||e.customer_address||(null==t?void 0:t.address),billing_postal_code:null,billing_phone:e.customer_phone||(null==t?void 0:t.phone),billing_fax:null,is_abroad:!1,district:e.customer_district||"istanbul",city:e.customer_city||"beylikdüzü",country:null,tax_number:"corporate"===e.customer_type?e.tax_number||"1111111111":e.customer_tc||"11111111111",tax_office:null,contact_type:"corporate"===e.customer_type||"company"===e.customer_type||e.company_name?"company":"person",payer_tax_numbers:[],sharings_count:null,sharing_preview_url:null,printed_at:null,shipment_document_no:null,shipment_date:null,shipment_address:null,print_url:null,invoice_discount:"0.00",withholding_rate:"0.00",accommodation_tax_exemption_reason_code:null,total_paid:"0.00",payment_account_id:null,payment_amount:0,payment_description:null,order_no:e.order_number,shipment_included:!0,cash_sale:!1,invoice_note:null,append_contact_balance:!1,e_document_accounts:[],refund_document_no:null},relationships:{tags:{},category:{},contact:{data:{type:"contacts",id:n}},details:{data:Z6(r,a)},price_list:{data:null}},type:"sales_invoices"}}})(s,null,i,l,d),h=await(async e=>{try{const r=await F6();let a=await q6(),n=await fetch($6(`${z6}/${r.companyId}/sales_invoices`),{method:"POST",headers:a,body:JSON.stringify(e)});if(401===n.status)try{R6=null,I6=null,await B6(),a=await q6(),n=await fetch($6(`${z6}/${r.companyId}/sales_invoices`),{method:"POST",headers:a,body:JSON.stringify(e)})}catch(t){if(t instanceof Error){if(t.message.includes("COOKIE_EXPIRED"))throw new Error("⚠️ Cookie süresi dolmuş! Lütfen Admin Ayarlar > Entegrasyonlar bölümünden Paraşüt'te yeniden giriş yapıp yeni cookie verisi girin.");if(t.message.includes("COOKIE_DATA_MISSING"))throw new Error("⚠️ Cookie verisi bulunamadı! Lütfen Admin Ayarlar > Entegrasyonlar bölümünden Paraşüt cookie verisi girin.")}throw t}if(!n.ok){const e=await n.text();throw new Error(`Parasut fatura hatası (${n.status}): ${e}`)}return await n.json()}catch(r){throw r}})(m);a.status="completed",a.message="Fatura başarıyla oluşturuldu",a.data={invoiceId:h.data.id},a={step:"supabase_save",status:"in_progress",message:"Fatura bilgileri yerel veritabanına kaydediliyor..."},r.push(a);const p=await a8(e,h,d,n);return a.status="completed",a.message="Fatura bilgileri yerel veritabanına kaydedildi",a.data={supabaseInvoiceId:p.id},await n8(e,h.data.id,d),r.push({step:"completed",status:"completed",message:"Fatura işlemi tamamlandı"}),{success:!0,invoice:h,contact:u,steps:r}}catch(n){return r.push({step:"error",status:"error",message:`Hata oluştu: ${n.message||"Bilinmeyen hata"}`}),{success:!1,steps:r,error:n.message||"Bilinmeyen hata oluştu"}}},r8=async e=>{try{const{data:t,error:r}=await Wl.from("orders").select("*").eq("id",e).single();if(r||!t)throw new Error("Sipariş bulunamadı");const{data:a,error:n}=await Wl.from("order_items").select("\n        *,\n        product_variations(\n          *,\n          products(*)\n        )\n      ").eq("order_id",e);if(n)throw new Error("Sipariş öğeleri alınamadı");const{data:s,error:i}=await Wl.from("print_requests").select("\n        *,\n        print_regions(\n          id,\n          name,\n          description,\n          base_price\n        )\n      ").eq("order_id",e);return{order:t,orderItems:a||[],printRequests:s||[],customerProfile:null}}catch(t){throw t}},a8=async(e,t,r,a)=>{try{const n=t.data,s=n.attributes,{data:i,error:l}=await Wl.from("invoices").insert({order_id:e,customer_id:a.order.customer_id,invoice_number:s.invoice_no||`${a.order.customer_name}-PRS-${n.id}`,invoice_date:s.issue_date||(new Date).toISOString().split("T")[0],due_date:s.due_date,subtotal:s.net_total||0,tax_amount:s.total_vat||0,total_amount:s.gross_total||0,status:"sent",payment_method:null,payment_date:null,notes:`Paraşüt Fatura ID: ${n.id}`,parasut_invoice_id:n.id,parasut_contact_id:r,parasut_invoice_url:`https://uygulama.parasut.com/550402/satislar/${n.id}`}).select().single();if(l)throw l;return i}catch(n){throw n}},n8=async(e,t,r)=>{try{const{error:a}=await Wl.from("orders").update({parasut_invoice_id:t,parasut_contact_id:r,updated_at:(new Date).toISOString()}).eq("id",e)}catch(a){}},s8=[{code:"01",city:"Adana"},{code:"02",city:"Adıyaman"},{code:"03",city:"Afyonkarahisar"},{code:"04",city:"Ağrı"},{code:"05",city:"Amasya"},{code:"06",city:"Ankara"},{code:"07",city:"Antalya"},{code:"08",city:"Artvin"},{code:"09",city:"Aydın"},{code:"10",city:"Balıkesir"},{code:"11",city:"Bilecik"},{code:"12",city:"Bingöl"},{code:"13",city:"Bitlis"},{code:"14",city:"Bolu"},{code:"15",city:"Burdur"},{code:"16",city:"Bursa"},{code:"17",city:"Çanakkale"},{code:"18",city:"Çankırı"},{code:"19",city:"Çorum"},{code:"20",city:"Denizli"},{code:"21",city:"Diyarbakır"},{code:"22",city:"Edirne"},{code:"23",city:"Elazığ"},{code:"24",city:"Erzincan"},{code:"25",city:"Erzurum"},{code:"26",city:"Eskişehir"},{code:"27",city:"Gaziantep"},{code:"28",city:"Giresun"},{code:"29",city:"Gümüşhane"},{code:"30",city:"Hakkari"},{code:"31",city:"Hatay"},{code:"32",city:"Isparta"},{code:"33",city:"Mersin"},{code:"34",city:"İstanbul"},{code:"35",city:"İzmir"},{code:"36",city:"Kars"},{code:"37",city:"Kastamonu"},{code:"38",city:"Kayseri"},{code:"39",city:"Kırklareli"},{code:"40",city:"Kırşehir"},{code:"41",city:"Kocaeli"},{code:"42",city:"Konya"},{code:"43",city:"Kütahya"},{code:"44",city:"Malatya"},{code:"45",city:"Manisa"},{code:"46",city:"Kahramanmaraş"},{code:"47",city:"Mardin"},{code:"48",city:"Muğla"},{code:"49",city:"Muş"},{code:"50",city:"Nevşehir"},{code:"51",city:"Niğde"},{code:"52",city:"Ordu"},{code:"53",city:"Rize"},{code:"54",city:"Sakarya"},{code:"55",city:"Samsun"},{code:"56",city:"Siirt"},{code:"57",city:"Sinop"},{code:"58",city:"Sivas"},{code:"59",city:"Tekirdağ"},{code:"60",city:"Tokat"},{code:"61",city:"Trabzon"},{code:"62",city:"Tunceli"},{code:"63",city:"Şanlıurfa"},{code:"64",city:"Uşak"},{code:"65",city:"Van"},{code:"66",city:"Yozgat"},{code:"67",city:"Zonguldak"},{code:"68",city:"Aksaray"},{code:"69",city:"Bayburt"},{code:"70",city:"Karaman"},{code:"71",city:"Kırıkkale"},{code:"72",city:"Batman"},{code:"73",city:"Şırnak"},{code:"74",city:"Bartın"},{code:"75",city:"Ardahan"},{code:"76",city:"Iğdır"},{code:"77",city:"Yalova"},{code:"78",city:"Karabük"},{code:"79",city:"Kilis"},{code:"80",city:"Osmaniye"},{code:"81",city:"Düzce"}],i8=e=>{if(!e||0===e.length)return{totalPaid:0,totalDiscount:0,totalPayment:0};const t=e.reduce(((e,t)=>e+(t.amount||0)),0),r=e.reduce(((e,t)=>e+(t.discount||0)),0);return{totalPaid:t,totalDiscount:r,totalPayment:t+r}},l8=async(e,t,r="receiver")=>{var a,n,s,i;try{const o=((e,t)=>{var r,a,n;const s=t.customer_name||(null==(r=t.profiles)?void 0:r.full_name)||"",i=t.customer_phone||(null==(a=t.profiles)?void 0:a.phone)||"";let l="",o="",c=t.customer_address||"";if(t.customer_city&&t.customer_district)l=t.customer_city,o=t.customer_district;else{const t=e.match(/^(.*?)(?:\s*\|\|)\s*İl\s*:\s*([^\|]+)(?:\s*\|\|)\s*İlçe\s*:\s*([^\s].*)$/i);if(t)c=t[1].trim(),l=t[2].trim(),o=t[3].trim();else{const t=e.match(/([^\/\s]+)\/([^\/\s]+)\s+Tel:/i);t&&(o=t[1].trim(),l=t[2].trim())}}if(!c){const t=e.match(/TC:\s*\d+\s+([^]*?)\s+[^\/]+\/[^\/]+\s+Tel:/i);c=t?t[1].trim():e}return{customerName:s||"Müşteri",phone:i||"",cityId:(null==(n=s8.find((e=>e.city.toLowerCase()===l.toLowerCase())))?void 0:n.code)||"34",cityName:l,townName:o,address:c,formattedString:`${c}        ${l}        /        ${o}`}})(e.shipping_address||"",e),{totalPayment:c}=i8(e.payments),d=e.total_amount-c,u=Math.max(d,0),m=d>0;let h,p=null;const x={custName:o.customerName,cityId:o.cityId,townName:o.townName,address:o.address,emailAddress:"",countryTaxOfficeId:"",tckn:"",phone:"",mobilePhone:o.phone},g={address:"BEYLİKDÜZÜ OSB MH. 8. CD. No: 18 BEYLİKDÜZÜ İSTANBUL",custName:"BALTACI KUMAŞÇILIK TEKSTİL VE PAZARLAMA ANONİM ŞİRKETİ"},f=[{cargoType:"2",desi:0,weight:0,cargoCount:"1"}];if(m){p=Math.floor(1e9*Math.random()).toString();let t="nakit";const a=`${e.notes||""} ${e.shipping_address||""}`.toLowerCase();(a.includes("kredi kartı")||a.includes("kredi kart"))&&(t="kredi kartı");const n=[{complementaryProdId:"2",flag:"0"},{complementaryProdId:"4",flag:"0"},{complementaryProdId:"330",flag:"0"},{complementaryProdId:"277",flag:"1"},{complementaryProdId:"3",flag:"0"}];h={receiverAddress:x,cod:{collectionType:"cash"===e.payment_method?"0":"1",documentId:p,invoiceAmount:u,creditRule:"0"},ngiDocument:{cargoType:"2",paymentType:"sender"===r?"1":"0",documentType:"1",totalCargoCount:"1",departmentId:"130174",description:"Forma"},SenderAddress:g,waybillNumber:e.id,docCargoList:f,complementaryProductList:n,isPrint:!1}}else{const t=[{complementaryProdId:"2",flag:"0"},{complementaryProdId:"4",flag:"0"},{complementaryProdId:"330",flag:"0"},{complementaryProdId:"3",flag:"0"}];h={receiverAddress:x,cod:{collectionType:"",creditRule:"1"},ngiDocument:{cargoType:"2",paymentType:"sender"===r?"1":"0",documentType:"0",totalCargoCount:"1",departmentId:"130174",description:"Forma"},SenderAddress:g,waybillNumber:e.id,docCargoList:f,complementaryProductList:t,isPrint:!1}}const y=await fetch("https://api-ykss.yurticikargo.com/api/v1/Cargo/saveCargo",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.8",Authorization:`Bearer ${t}`,Connection:"keep-alive","Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify(h)});if(401===y.status)return{success:!1,error:"Token geçersiz, SMS doğrulama gerekiyor"};let v;try{v=await y.json()}catch(l){throw new Error("API yanıtı parse edilemedi")}if(200===y.status){const t=(null==v?void 0:v.data)??v,r=null==(n=null==(a=null==t?void 0:t.jobId)?void 0:a.toString)?void 0:n.call(a),l=null==(i=null==(s=null==t?void 0:t.ngiCargoKey)?void 0:s.toString)?void 0:i.call(s),o=[p?`Document ID: ${p}`:"Tahsilatsız Kargo",`Job ID: ${r}`,l?`Fatura Numarası: ${l}`:null].filter(Boolean).join(", "),c=`${e.notes||""}\n[${XC(new Date,"dd.MM.yyyy HH:mm")}] Yurtiçi Kargo oluşturuldu. ${o}`.trim();return await Wl.from("orders").update({notes:c,yurtici_fatura:l||null,updated_at:(new Date).toISOString()}).eq("id",e.id),{success:!0,jobId:r,cargoKey:l}}{const e=(null==v?void 0:v.data)??v;let t=`Kargo oluşturulurken bir hata oluştu (HTTP ${y.status}).`;return(null==e?void 0:e.errCode)&&0!==e.errCode?t=`Kargo hatası (${e.errCode}): ${e.message||"Bilinmeyen hata"}`:(null==e?void 0:e.message)&&(t=e.message),{success:!1,error:t}}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Kargo oluşturulurken bir hata oluştu."}}},o8=()=>{const{toast:e}=at(),t=$e(),[r,a]=ze.useState(""),[n,s]=ze.useState({username:"",password:""}),[i,l]=ze.useState({isOpen:!1,isLoading:!1,smsCode:"",phoneNumber:"",error:null,pendingRequest:null,pendingStatusUpdate:null}),[o,c]=ze.useState({isOpen:!1,order:null,onStatusUpdate:void 0,isLoading:!1});ze.useEffect((()=>{(async()=>{const e=await(async()=>{try{const{data:e,error:t}=await Wl.from("system_settings").select("setting_key, setting_value").in("setting_key",["yurtici_token","yurtici_username","yurtici_password"]);if(t)return{error:"Ayarlar çekilemedi"};const r=e.reduce(((e,t)=>(e[t.setting_key]=t.setting_value,e)),{}),a=r.yurtici_token,n=r.yurtici_username,s=r.yurtici_password;return n&&s?{token:a,credentials:{username:n,password:s}}:{error:"Kullanıcı adı veya şifre bulunamadı"}}catch(e){return{error:"Beklenmeyen hata"}}})();e.credentials&&s(e.credentials),e.token&&a(e.token)})()}),[]);const d=async()=>{const t=await(async e=>{try{const t=await fetch("https://api-ykss.yurticikargo.com/api/v1/auth",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.5","Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify({Username:e.username,Password:e.password,Language:"tr"})}),r=await t.json();if(!t.ok)throw new Error(r.message||"Token yenileme başarısız");if(r.data&&"requiredSmsVerification"===r.data.errors)return{success:!1,requiresSms:!0,phoneNumber:r.data.phoneNumber||""};if(r.data&&r.data.token){const e=r.data.token;return await Wl.from("system_settings").upsert({setting_key:"yurtici_token",setting_value:e,setting_type:"string",description:"Yurtiçi Kargo API auth token",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),{success:!0,token:e}}throw new Error("Token alınamadı")}catch(t){return{success:!1,error:t instanceof Error?t.message:"Token yenileme başarısız"}}})(n);return t.success&&t.token?(a(t.token),t.token):t.requiresSms?new Promise((e=>{l((r=>({...r,isOpen:!0,phoneNumber:t.phoneNumber||"",error:null,pendingRequest:e,pendingStatusUpdate:r.pendingStatusUpdate})))})):(t.error&&e({title:"Hata",description:t.error,variant:"destructive"}),null)},u=()=>{o.isLoading||c({isOpen:!1,order:null,onStatusUpdate:void 0,isLoading:!1})};return{yurticiToken:r,yurticiCredentials:n,smsDialog:i,cargoPaymentDialog:o,handleRefreshToken:d,handleSmsVerification:async t=>{try{l((e=>({...e,isLoading:!0,error:null})));const r=await(async(e,t)=>{try{const r=await fetch("https://api-ykss.yurticikargo.com/api/v1/auth",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.5","Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify({Username:e.username,Password:e.password,Language:"tr",smsCode:t})}),a=await r.json();if(!r.ok)throw new Error(a.message||"SMS doğrulama başarısız");if(a.data&&a.data.token){const e=a.data.token;return await Wl.from("system_settings").upsert({setting_key:"yurtici_token",setting_value:e,setting_type:"string",description:"Yurtiçi Kargo API auth token",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),await Wl.from("system_settings").upsert({setting_key:"yurtici_sms_code",setting_value:t,setting_type:"string",description:"Yurtiçi Kargo SMS doğrulama kodu",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),{success:!0,token:e}}throw new Error("Token alınamadı")}catch(r){return{success:!1,error:r instanceof Error?r.message:"SMS doğrulama başarısız"}}})(n,t);if(r.success&&r.token){if(a(r.token),l((e=>({...e,isOpen:!1,isLoading:!1,smsCode:"",error:null,pendingRequest:null}))),i.pendingStatusUpdate){const{orderId:t,newStatus:a,order:n}=i.pendingStatusUpdate;l((e=>({...e,pendingStatusUpdate:null})));const s=await l8(n,r.token);return s.success?(e({title:"Başarılı",description:`Sipariş #${n.order_number} için kargo oluşturuldu. Job ID: ${s.jobId}`}),r.token):(e({title:"Hata",description:s.error||"Kargo oluşturulamadı.",variant:"destructive"}),null)}return r.token}return r.error&&l((e=>({...e,isLoading:!1,error:r.error||"SMS doğrulama başarısız"}))),null}catch(r){const e=r instanceof Error?r.message:"SMS doğrulama başarısız";return l((t=>({...t,isLoading:!1,error:e}))),null}},handleCreateCargo:async(t,a)=>{if(!r||!n.username||!n.password)return void e({title:"Uyarı",description:"Yurtiçi Kargo ayarları eksik. Lütfen Admin Settings'ten API bağlantısını yapın.",variant:"destructive"});const{totalPayment:s}=i8(t.payments);t.total_amount-s<0?e({title:"Uyarı",description:"Bu sipariş için kalan tutar negatif. Lütfen ödeme bilgilerini kontrol edin.",variant:"destructive"}):c({isOpen:!0,order:t,onStatusUpdate:a,isLoading:!1})},handleCargoCreation:async a=>{if(!o.order||o.isLoading)return;const{order:n,onStatusUpdate:s}=o;c((e=>({...e,isLoading:!0})));const i=await(async(a,n,s)=>{var i;try{let o=r,c=await l8(a,o,n);if(!c.success&&(null==(i=c.error)?void 0:i.includes("Token geçersiz"))){const e=await d();if(!e)return s&&l((e=>({...e,pendingStatusUpdate:{orderId:a.id,newStatus:"shipped",order:a}}))),{success:!1,requiresSms:!0};o=e,c=await l8(a,o,n)}if(c.success){const r="sender"===n?"Gönderici Ödemeli":"Alıcı Ödemeli",{totalPayment:i}=i8(a.payments),l=a.total_amount-i>0?r:`${r} - Tahsilatsız`;return e({title:"Başarılı",description:`Sipariş #${a.order_number} için kargo oluşturuldu (${l}). Job ID: ${c.jobId}`}),s&&s(a.id,"shipped"),t.invalidateQueries({queryKey:["admin-orders"]}),{success:!0,jobId:c.jobId,cargoKey:c.cargoKey}}return e({title:"Hata",description:c.error||"Kargo oluşturulamadı.",variant:"destructive"}),{success:!1,error:c.error}}catch(o){const t=o instanceof Error?o.message:"Kargo oluşturulurken beklenmeyen bir hata oluştu.";return e({title:"Hata",description:t,variant:"destructive"}),{success:!1,error:t}}})(n,a,s);i.success?u():c((e=>({...e,isLoading:!1})))},closeSmsDialog:()=>{i.isLoading||l((e=>({...e,isOpen:!1,smsCode:"",error:null,pendingRequest:null,pendingStatusUpdate:null})))},closeCargoPaymentDialog:u,setSmsDialog:l,setCargoPaymentDialog:c}},c8=({smsDialog:e,onSmsCodeChange:t,onVerify:r,onClose:a})=>{const n=async()=>{const t=await r(e.smsCode);t&&e.pendingRequest&&e.pendingRequest(t)};return i.jsx(sd,{open:e.isOpen,onOpenChange:t=>{t||e.isLoading||a()},children:i.jsxs(cd,{className:"sm:max-w-md",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(pa,{className:"h-5 w-5"}),"SMS Doğrulama"]}),i.jsx(hd,{children:e.phoneNumber?`${e.phoneNumber} numaralı telefona gönderilen SMS kodunu girin.`:"Telefon numaranıza gönderilen SMS kodunu girin."})]}),i.jsxs("div",{className:"space-y-4",children:[e.error&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx(T5,{children:e.error})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"sms-code",children:"SMS Kodu"}),i.jsx(co,{id:"sms-code",type:"text",placeholder:"123456",maxLength:6,value:e.smsCode,onChange:e=>t(e.target.value.replace(/\D/g,"").slice(0,6)),disabled:e.isLoading,onKeyDown:async t=>{"Enter"===t.key&&6===e.smsCode.length&&e.pendingRequest&&await n()}}),i.jsx("p",{className:"text-sm text-gray-500",children:"6 haneli SMS kodunu girin"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(oo,{onClick:n,disabled:e.isLoading||6!==e.smsCode.length,className:"flex-1",children:e.isLoading?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Doğrulanıyor..."]}):"Doğrula"}),i.jsx(oo,{variant:"outline",onClick:a,disabled:e.isLoading,children:"İptal"})]})]})]})})},d8=({cargoPaymentDialog:e,onPaymentTypeSelect:t,onClose:r})=>{var a,n;const s=async r=>{e.isLoading||await t(r)},l=e.order,o=l?l.total_amount-((null==(a=l.payments)?void 0:a.reduce(((e,t)=>e+(t.amount||0)+(t.discount||0)),0))||0):0,c=e.isLoading||!1;return i.jsx(sd,{open:e.isOpen,onOpenChange:c?void 0:r,children:i.jsxs(cd,{className:"sm:max-w-md",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(sn,{className:"h-5 w-5"}),"Kargo Ödeme Türü Seçimi"]}),i.jsx(hd,{children:l?`Sipariş #${l.order_number} için kargo ödeme türünü seçin.`:"Kargo ödeme türünü seçin."})]}),i.jsxs("div",{className:"space-y-4",children:[l&&i.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Sipariş:"})," #",l.order_number]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Müşteri:"})," ",l.customer_name||(null==(n=l.profiles)?void 0:n.full_name)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Kalan Tutar:"}),i.jsxs("span",{className:"text-lg font-bold ml-2 "+(o>0?"text-orange-600":"text-green-600"),children:["₺",o.toFixed(2)]})]}),0===o&&i.jsx("p",{className:"text-sm text-green-600 font-medium",children:"💡 Tahsilatsız kargo oluşturulacak"})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(oo,{onClick:()=>s("receiver"),className:"w-full h-16 flex items-center justify-start gap-4 text-left p-4",variant:"outline",disabled:c,children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:c?i.jsx(oa,{className:"h-6 w-6 text-green-600 dark:text-green-400 animate-spin"}):i.jsx(fn,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Alıcı Ödemeli"}),i.jsx("div",{className:"text-sm text-gray-500",children:o>0?"Kargo ücreti alıcı tarafından ödenir":"Kargo ücreti alıcı tarafından ödenir (tahsilatsız)"})]})]}),i.jsxs(oo,{onClick:()=>s("sender"),className:"w-full h-16 flex items-center justify-start gap-4 text-left p-4",variant:"outline",disabled:c,children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:c?i.jsx(oa,{className:"h-6 w-6 text-blue-600 dark:text-blue-400 animate-spin"}):i.jsx(Ir,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Gönderici Ödemeli"}),i.jsx("div",{className:"text-sm text-gray-500",children:o>0?"Kargo ücreti gönderici tarafından ödenir":"Kargo ücreti gönderici tarafından ödenir (tahsilatsız)"})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(oo,{variant:"ghost",onClick:r,disabled:c,children:"İptal"})}),c&&i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 mt-2",children:[i.jsx(oa,{className:"h-4 w-4 animate-spin"}),"Kargo oluşturuluyor..."]})]})]})})},u8=()=>{const e=xl(),{userProfile:t}=Jl();return(r,a)=>{if("grafiker"===(null==t?void 0:t.role)&&r.startsWith("/admin/")){const t=r.replace("/admin/","/customer/admin/");e(t,a)}else e(r,a)}},m8=(e,t)=>"grafiker"===t&&e.startsWith("/admin/")?e.replace("/admin/","/customer/admin/"):e,h8=()=>{var e,t,r;const{toast:a}=at(),n=$e(),{theme:s}=Gl(),{userProfile:l}=Jl(),[o,c]=Hl(),{smsDialog:d,cargoPaymentDialog:u,handleSmsVerification:m,handleCreateCargo:h,handleCargoCreation:p,closeSmsDialog:x,closeCargoPaymentDialog:g,setSmsDialog:f}=o8(),[y,v]=ze.useState({search:"",status:"all",paymentStatus:"all",orderType:"all",dateFrom:"",dateTo:"",minAmount:"",maxAmount:""}),[b,j]=ze.useState(""),k=parseInt(o.get("page")||"1",10),w=20,N=e=>{const t=new URLSearchParams(o);t.set("page",e.toString()),c(t)};ze.useEffect((()=>{const e=setTimeout((()=>{v((e=>({...e,search:b})))}),500);return()=>clearTimeout(e)}),[b]),ze.useEffect((()=>{N(1)}),[y.orderType,y.status,y.paymentStatus]);const[_,S]=ze.useState([]),[C,T]=ze.useState(!1),[O,P]=ze.useState(!1),[A,E]=ze.useState(!1),[D,M]=ze.useState(null),[z,R]=ze.useState(null),[I,F]=ze.useState(null),[B,L]=ze.useState(!1),[q,$]=ze.useState(null),[K,U]=ze.useState({isProcessing:!1,success:!1,error:null}),H={customer:220,type:120,date:140,total:120,paid:120,discount:120,remaining:120,status:140,payment:140,actions:120},[Y,V]=ze.useState((()=>{try{const e=localStorage.getItem("adminOrdersColumnWidths");if(e)return{...H,...JSON.parse(e)}}catch(e){}return H}));ze.useEffect((()=>{try{localStorage.setItem("adminOrdersColumnWidths",JSON.stringify(Y))}catch(e){}}),[Y]);const G={pending:{bg:"#f3f4f6",text:"#6b7280",border:"#e5e7eb",hover:"#e5e7eb",darkBg:"#374151",darkText:"#d1d5db",darkBorder:"#4b5563"},confirmed:{bg:"#f3f4f6",text:"#111827",border:"#e5e7eb",hover:"#e5e7eb",darkBg:"#1f2937",darkText:"#f9fafb",darkBorder:"#374151"},processing:{bg:"#e0f2fe",text:"#0c4a6e",border:"#7dd3fc",hover:"#bae6fd",darkBg:"#0c4a6e",darkText:"#7dd3fc",darkBorder:"#0369a1"},in_production:{bg:"#dcfce7",text:"#166534",border:"#bbf7d0",hover:"#bbf7d0",darkBg:"#14532d",darkText:"#bbf7d0",darkBorder:"#166534"},shipped:{bg:"#e9d5ff",text:"#581c87",border:"#d8b4fe",hover:"#d8b4fe",darkBg:"#581c87",darkText:"#f3e8ff",darkBorder:"#7c3aed"},delivered:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d",hover:"#fcd34d",darkBg:"#92400e",darkText:"#fcd34d",darkBorder:"#d97706"},cancelled:{bg:"#fee2e2",text:"#dc2626",border:"#fca5a5",hover:"#fca5a5",darkBg:"#dc2626",darkText:"#fca5a5",darkBorder:"#b91c1c"}},[W,Q]=ze.useState((()=>{try{const e=localStorage.getItem("adminOrdersStatusColors");if(e)return{...G,...JSON.parse(e)}}catch(e){}return G}));ze.useEffect((()=>{try{localStorage.setItem("adminOrdersStatusColors",JSON.stringify(W))}catch(e){}}),[W]);const X={pending:{bg:"#fef3c7",text:"#92400e",border:"#fcd34d",hover:"#fcd34d",darkBg:"#92400e",darkText:"#fcd34d",darkBorder:"#d97706"},partial:{bg:"#fef2de",text:"#ea580c",border:"#fed7aa",hover:"#fed7aa",darkBg:"#ea580c",darkText:"#fed7aa",darkBorder:"#f97316"},paid:{bg:"#dcfce7",text:"#166534",border:"#bbf7d0",hover:"#bbf7d0",darkBg:"#14532d",darkText:"#bbf7d0",darkBorder:"#166534"},refunded:{bg:"#fee2e2",text:"#dc2626",border:"#fca5a5",hover:"#fca5a5",darkBg:"#dc2626",darkText:"#fca5a5",darkBorder:"#b91c1c"}},[Z,J]=ze.useState((()=>{try{const e=localStorage.getItem("adminOrdersPaymentColors");if(e)return{...X,...JSON.parse(e)}}catch(e){}return X}));ze.useEffect((()=>{try{localStorage.setItem("adminOrdersPaymentColors",JSON.stringify(Z))}catch(e){}}),[Z]);const ee={design:{bg:"#e0e7ff",text:"#3730a3",border:"#c7d2fe",hover:"#c7d2fe",darkBg:"#3730a3",darkText:"#c7d2fe",darkBorder:"#4338ca"},ready_stock:{bg:"#ecfdf5",text:"#065f46",border:"#a7f3d0",hover:"#a7f3d0",darkBg:"#065f46",darkText:"#a7f3d0",darkBorder:"#059669"},promotion:{bg:"#e0f7fa",text:"#006064",border:"#b2ebf2",hover:"#b2ebf2",darkBg:"#006064",darkText:"#b2ebf2",darkBorder:"#00838f"}},[te,re]=ze.useState((()=>{try{const e=localStorage.getItem("adminOrdersOrderTypeColors");if(e)return{...ee,...JSON.parse(e)}}catch(e){}return ee}));ze.useEffect((()=>{try{localStorage.setItem("adminOrdersOrderTypeColors",JSON.stringify(te))}catch(e){}}),[te]);const ae=e=>(y.search&&(e=e.or(`order_number.ilike.%${y.search}%,customer_name.ilike.%${y.search}%,company_name.ilike.%${y.search}%`)),"all"!==y.status&&(e=e.eq("status",y.status)),"all"!==y.paymentStatus&&(e=e.eq("payment_status",y.paymentStatus)),y.dateFrom&&(e=e.gte("created_at",ZS(new Date(y.dateFrom)).toISOString())),y.dateTo&&(e=e.lte("created_at",cC(new Date(y.dateTo)).toISOString())),y.minAmount&&(e=e.gte("total_amount",parseFloat(y.minAmount))),y.maxAmount&&(e=e.lte("total_amount",parseFloat(y.maxAmount))),e),ne=(e,t)=>{let r=e;if(t){const a=e=>null==e?void 0:e.toLowerCase().replace(/[-\s]+/g,""),n=a(t);r=null==e?void 0:e.filter((e=>{var t,r;return a(e.order_number||"").includes(n)||a(e.customer_name||"").includes(n)||a(e.company_name||"").includes(n)||a((null==(t=e.profiles)?void 0:t.full_name)||"").includes(n)||a((null==(r=e.profiles)?void 0:r.company)||"").includes(n)}))}let a=null==r?void 0:r.map((e=>{var t,r;return{...e,customer_name:e.customer_name||(null==(t=e.profiles)?void 0:t.full_name)||"",company_name:e.company_name||(null==(r=e.profiles)?void 0:r.company)||""}}));return"all"!==y.orderType&&(a=null==a?void 0:a.filter((e=>ge(e)===y.orderType))),a},{data:se,isLoading:ie}=qe({queryKey:["admin-orders",y,k],queryFn:async()=>{let e=Wl.from("orders").select("\n          *,\n          profiles!customer_id(full_name, company, phone),\n          payments (\n            id,\n            amount,\n            discount\n          ),\n          order_items (\n            id,\n            product_variation_id,\n            product_variations (\n              id,\n              product_id,\n              products (\n                id,\n                is_design_product,\n                category\n              )\n            )\n          ),\n          invoices (\n            id,\n            invoice_number\n          )\n        ",{count:"exact"});e=ae(e),e=e.order("created_at",{ascending:!1});const t="all"!==y.orderType;let r,a;if(t){const{data:t,error:n,count:s}=await e;if(n)throw n;r=t||[],a=s||0}else{const t=(k-1)*w,n=t+w-1;e=e.range(t,n);const{data:s,error:i,count:l}=await e;if(i)throw i;r=s||[],a=l||0}const n=ne(r,y.search);let s=n,i=n.length;if(t){i=n.length;const e=(k-1)*w,t=e+w;s=n.slice(e,t)}else i=a;return{orders:s,totalCount:i}}}),{data:le}=qe({queryKey:["admin-orders-summary",y],queryFn:async()=>{let e=Wl.from("orders").select("\n          *,\n          profiles!customer_id(full_name, company, phone),\n          payments (\n            id,\n            amount,\n            discount\n          ),\n          order_items (\n            id,\n            product_variation_id,\n            product_variations (\n              id,\n              product_id,\n              products (\n                id,\n                is_design_product,\n                category\n              )\n            )\n          )\n        ");e=ae(e),e=e.order("created_at",{ascending:!1});const{data:t,error:r}=await e;if(r)throw r;return ne(t||[],y.search)}}),oe=(null==se?void 0:se.orders)||[],ce=(null==se?void 0:se.totalCount)||0,de=Math.ceil(ce/w),ue=Ke({mutationFn:async({orderId:e,updates:t})=>{const{error:r}=await Wl.from("orders").update({...t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{a({title:"Başarılı",description:"Sipariş güncellendi."}),n.invalidateQueries({queryKey:["admin-orders"]}),M(null)},onError:()=>{a({title:"Hata",description:"Sipariş güncellenirken bir hata oluştu.",variant:"destructive"})}}),me=Ke({mutationFn:async e=>{const{error:t}=await Wl.from("orders").delete().eq("id",e);if(t)throw t},onSuccess:()=>{a({title:"Başarılı",description:"Sipariş silindi."}),n.invalidateQueries({queryKey:["admin-orders"]})},onError:()=>{a({title:"Hata",description:"Sipariş silinirken bir hata oluştu.",variant:"destructive"})}}),he=Ke({mutationFn:async({orderIds:e,updates:t})=>{const{error:r}=await Wl.from("orders").update({...t,updated_at:(new Date).toISOString()}).in("id",e);if(r)throw r},onSuccess:()=>{a({title:"Başarılı",description:"Seçili siparişler güncellendi."}),n.invalidateQueries({queryKey:["admin-orders"]}),S([])},onError:()=>{a({title:"Hata",description:"Siparişler güncellenirken bir hata oluştu.",variant:"destructive"})}}),pe=e=>{const t={pending:"Beklemede",confirmed:"Onaylandı",processing:"Hazırlanıyor",in_production:"Üretimde",shipped:"Kargoda",delivered:"Teslim Edildi",cancelled:"İptal"}[e]||"Beklemede",r=W[e]||W.pending,a="dark"===s||"system"===s&&window.matchMedia("(prefers-color-scheme: dark)").matches?{bg:r.darkBg,text:r.darkText,border:r.darkBorder}:{bg:r.bg,text:r.text,border:r.border};return i.jsx(Co,{variant:"outline",className:"border transition-colors hover:opacity-80",style:{backgroundColor:a.bg,color:a.text,borderColor:a.border},children:t})},xe=e=>{const t={pending:"Beklemede",partial:"Kısmi",paid:"Ödendi",refunded:"İade"}[e]||"Beklemede",r=Z[e]||Z.pending,a="dark"===s||"system"===s&&window.matchMedia("(prefers-color-scheme: dark)").matches?{bg:r.darkBg,text:r.darkText,border:r.darkBorder}:{bg:r.bg,text:r.text,border:r.border};return i.jsx(Co,{variant:"outline",className:"border transition-colors hover:opacity-80",style:{backgroundColor:a.bg,color:a.text,borderColor:a.border},children:t})},ge=e=>{if(e.order_items&&e.order_items.length>0){if(e.order_items.some((e=>{var t,r,a,n,s,i,l,o,c;return(null==(a=null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.category)?void 0:a.toLowerCase().includes("promotion"))||(null==(i=null==(s=null==(n=e.product_variations)?void 0:n.products)?void 0:s.category)?void 0:i.toLowerCase().includes("promosyon"))||(null==(c=null==(o=null==(l=e.product_variations)?void 0:l.products)?void 0:o.category)?void 0:c.toLowerCase().includes("promo"))})))return"promotion";if(e.order_items.some((e=>{var t,r;return!0===(null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.is_design_product)})))return"design";if(e.order_items.some((e=>{var t,r,a,n,s,i;return(null==(a=null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.category)?void 0:a.toLowerCase().includes("özel tasarım"))||(null==(i=null==(s=null==(n=e.product_variations)?void 0:n.products)?void 0:s.category)?void 0:i.toLowerCase().includes("design"))})))return"design"}if(e.order_type){if(e.order_type.trim().toLowerCase().includes("design"))return"design"}return"ready_stock"},fe=e=>{const t=ge(e);let r="Hazır Stok";"design"===t?r="Özel Tasarım":"promotion"===t&&(r="Promosyon");const a=te[t]||te.ready_stock,n="dark"===s||"system"===s&&window.matchMedia("(prefers-color-scheme: dark)").matches?{bg:a.darkBg,text:a.darkText,border:a.darkBorder}:{bg:a.bg,text:a.text,border:a.border};return i.jsx(Co,{variant:"outline",className:"border transition-colors hover:opacity-80",style:{backgroundColor:n.bg,color:n.text,borderColor:n.border},children:r})},ye=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),ve=async(e,t)=>{if("shipped"===t){const t=oe.find((t=>t.id===e));t&&await h(t,((e,t)=>{ue.mutate({orderId:e,updates:{status:t}})}))}else ue.mutate({orderId:e,updates:{status:t}})},be=e=>{$(e),je("skip"===e)},je=async e=>{if(I){U({isProcessing:!0,success:!1,error:null});try{await t8(I.id,e),U({isProcessing:!1,success:!0,error:null}),a({title:"Başarılı!",description:e?"Yerel fatura başarıyla oluşturuldu.":"Paraşüt faturası başarıyla oluşturuldu.",variant:"default"}),n.invalidateQueries({queryKey:["admin-orders"]}),setTimeout((()=>{ke()}),2e3)}catch(t){U({isProcessing:!1,success:!1,error:t instanceof Error?t.message:"Fatura oluşturulamadı"}),a({title:"Hata",description:t instanceof Error?t.message:"Fatura oluşturulamadı",variant:"destructive"})}}},ke=()=>{L(!1),F(null),$(null),U({isProcessing:!1,success:!1,error:null})},we=e=>{const t="reklamci"===(null==l?void 0:l.role),r="yonetici"===(null==l?void 0:l.role)||"muhasebeci"===(null==l?void 0:l.role);return i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{R(e)},title:"Hızlı Görüntüle",children:i.jsx(Vr,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"sm",asChild:!0,title:"Tam Detay",children:i.jsx(Ll,{to:m8(`/admin/orders/${e.id}`,null==l?void 0:l.role),children:i.jsx(Hr,{className:"h-4 w-4"})})}),!t&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>M(e),children:i.jsx(Va,{className:"h-4 w-4"})}),!t&&["confirmed","processing","in_production","shipped","delivered"].includes(e.status)&&(!e.invoices||0===e.invoices.length)&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>(e=>{F(e),L(!0),$(null),U({isProcessing:!1,success:!1,error:null})})(e),className:"text-purple-600 hover:text-purple-700",title:"Fatura Kes",children:i.jsx(Ea,{className:"h-4 w-4"})}),!t&&"pending"===e.status&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>ve(e.id,"confirmed"),className:"text-green-600 hover:text-green-700",title:"Onayla",children:i.jsx(Or,{className:"h-4 w-4"})}),!t&&"confirmed"===e.status&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>ve(e.id,"processing"),className:"text-blue-600 hover:text-blue-700",title:"Hazırlamaya Başla",children:i.jsx(Va,{className:"h-4 w-4"})}),!t&&"processing"===e.status&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>ve(e.id,"in_production"),className:"text-green-600 hover:text-green-700",title:"Üretime Gönder",children:i.jsx(ba,{className:"h-4 w-4"})}),!t&&"in_production"===e.status&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>ve(e.id,"shipped"),className:"text-orange-600 hover:text-orange-700",title:"Kargoya Ver",children:i.jsx(sn,{className:"h-4 w-4"})}),!t&&"shipped"===e.status&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>ve(e.id,"delivered"),className:"text-green-600 hover:text-green-700",title:"Teslim Edildi Olarak İşaretle",children:i.jsx(Or,{className:"h-4 w-4"})}),!t&&!["delivered","cancelled"].includes(e.status)&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>ve(e.id,"cancelled"),className:"text-orange-600 hover:text-orange-700",title:"İptal Et",children:i.jsx(Er,{className:"h-4 w-4"})}),r&&i.jsxs(o6,{children:[i.jsx(c6,{asChild:!0,children:i.jsx(oo,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:i.jsx(en,{className:"h-4 w-4"})})}),i.jsxs(m6,{children:[i.jsxs(h6,{children:[i.jsx(x6,{children:"Siparişi Sil"}),i.jsx(g6,{children:"Bu işlem geri alınamaz. Sipariş kalıcı olarak silinecektir."})]}),i.jsxs(p6,{children:[i.jsx(y6,{children:"İptal"}),i.jsx(f6,{onClick:()=>me.mutate(e.id),className:"bg-red-600 hover:bg-red-700",children:"Sil"})]})]})]})]})};return ie?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Sipariş Yönetimi"}),i.jsx("div",{children:i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Toplam ",ce," sipariş • ",_.length," seçili"]})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>{const e=[["Sipariş No","Müşteri","Şirket","Telefon","Tarih","Toplam Tutar","Ödenen Tutar","İskonto Tutar","Kalan Tutar","Durum","Ödeme Durumu"].join(","),...oe.map((e=>{var t,r,a;const{totalPaid:n,totalDiscount:s,totalPayment:i}=i8(e.payments),l=e.total_amount-i;return[e.order_number,(null==(t=e.profiles)?void 0:t.full_name)||"",(null==(r=e.profiles)?void 0:r.company)||"",(null==(a=e.profiles)?void 0:a.phone)||"",XC(new Date(e.created_at),"dd/MM/yyyy"),e.total_amount,n,s,l,e.status,e.payment_status||""].join(",")}))].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),a=URL.createObjectURL(t);r.setAttribute("href",a),r.setAttribute("download",`siparisler_${XC(new Date,"ddMMyyyy")}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},children:[i.jsx(qr,{className:"h-4 w-4 mr-2"}),"Excel İndir"]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>T(!C),children:[i.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Filtreler"]}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>P(!0),title:"Kolon Ayarları",children:i.jsx(wa,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>E(!0),title:"Durum Renk Ayarları",children:i.jsx("div",{className:"h-4 w-4 rounded-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"})})]})]}),_.length>0&&i.jsx(ro,{className:"border-blue-200 bg-blue-50",children:i.jsx(io,{className:"py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm font-medium",children:[_.length," sipariş seçildi"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(eO,{onValueChange:e=>he.mutate({orderIds:_,updates:{status:e}}),children:[i.jsx(rO,{className:"w-40",children:i.jsx(tO,{placeholder:"Durum Güncelle"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"confirmed",children:"Onayla"}),i.jsx(iO,{value:"processing",children:"Hazırlamaya Başla"}),i.jsx(iO,{value:"in_production",children:"Üretime Gönder"}),i.jsx(iO,{value:"shipped",children:"Kargoya Ver"}),i.jsx(iO,{value:"delivered",children:"Teslim Edildi"}),i.jsx(iO,{value:"cancelled",children:"İptal Et"})]})]}),i.jsxs(eO,{onValueChange:e=>he.mutate({orderIds:_,updates:{payment_status:e}}),children:[i.jsx(rO,{className:"w-40",children:i.jsx(tO,{placeholder:"Ödeme Durumu"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"pending",children:"Beklemede"}),i.jsx(iO,{value:"partial",children:"Kısmi Ödendi"}),i.jsx(iO,{value:"paid",children:"Ödendi"}),i.jsx(iO,{value:"refunded",children:"İade Edildi"})]})]}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>S([]),children:"Seçimi Temizle"})]})]})})}),C&&i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Xr,{className:"h-5 w-5"}),"Gelişmiş Filtreler"]})}),i.jsxs(io,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Başlangıç Tarihi"}),i.jsx(co,{type:"date",value:y.dateFrom,onChange:e=>v((t=>({...t,dateFrom:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Bitiş Tarihi"}),i.jsx(co,{type:"date",value:y.dateTo,onChange:e=>v((t=>({...t,dateTo:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Min. Tutar (₺)"}),i.jsx(co,{type:"number",placeholder:"0",value:y.minAmount,onChange:e=>v((t=>({...t,minAmount:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Max. Tutar (₺)"}),i.jsx(co,{type:"number",placeholder:"0",value:y.maxAmount,onChange:e=>v((t=>({...t,maxAmount:e.target.value})))})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{v({search:"",status:"all",paymentStatus:"all",orderType:"all",dateFrom:"",dateTo:"",minAmount:"",maxAmount:""}),j(""),N(1)},children:"Filtreleri Temizle"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>v((e=>({...e,dateFrom:XC(nT(new Date,7),"yyyy-MM-dd"),dateTo:XC(new Date,"yyyy-MM-dd")}))),children:"Son 7 Gün"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>v((e=>({...e,dateFrom:XC(nT(new Date,30),"yyyy-MM-dd"),dateTo:XC(new Date,"yyyy-MM-dd")}))),children:"Son 30 Gün"})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Ha,{className:"h-5 w-5"}),"Siparişler"]}),i.jsx(so,{children:"Sistemdeki tüm siparişler burada listelenir"})]}),i.jsxs(io,{children:[i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"Sipariş numarası, müşteri adı veya şirket adı ile arayın...",className:"pl-10",value:b,onChange:e=>j(e.target.value)})]}),i.jsxs(eO,{value:y.status,onValueChange:e=>v((t=>({...t,status:e}))),children:[i.jsx(rO,{className:"w-40",children:i.jsx(tO,{placeholder:"Durum"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm Durumlar"}),i.jsx(iO,{value:"pending",children:"Beklemede"}),i.jsx(iO,{value:"confirmed",children:"Onaylandı"}),i.jsx(iO,{value:"processing",children:"Hazırlanıyor"}),i.jsx(iO,{value:"in_production",children:"Üretimde"}),i.jsx(iO,{value:"shipped",children:"Kargoda"}),i.jsx(iO,{value:"delivered",children:"Teslim Edildi"}),i.jsx(iO,{value:"cancelled",children:"İptal"})]})]}),i.jsxs(eO,{value:y.paymentStatus,onValueChange:e=>v((t=>({...t,paymentStatus:e}))),children:[i.jsx(rO,{className:"w-40",children:i.jsx(tO,{placeholder:"Ödeme"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm Ödemeler"}),i.jsx(iO,{value:"pending",children:"Beklemede"}),i.jsx(iO,{value:"partial",children:"Kısmi"}),i.jsx(iO,{value:"paid",children:"Ödendi"}),i.jsx(iO,{value:"refunded",children:"İade"})]})]}),i.jsxs(eO,{value:y.orderType,onValueChange:e=>v((t=>({...t,orderType:e}))),children:[i.jsx(rO,{className:"w-40",children:i.jsx(tO,{placeholder:"Sipariş Türü"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm Türler"}),i.jsx(iO,{value:"ready_stock",children:"Hazır Stok"}),i.jsx(iO,{value:"design",children:"Özel Tasarım"}),i.jsx(iO,{value:"promotion",children:"Promosyon"})]})]})]}),i.jsxs("div",{className:"flex gap-4 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pr,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium",children:"Tarih Aralığı:"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(co,{type:"date",placeholder:"Başlangıç Tarihi",value:y.dateFrom,onChange:e=>v((t=>({...t,dateFrom:e.target.value}))),className:"w-40"}),i.jsx("span",{className:"text-gray-500 self-center",children:"-"}),i.jsx(co,{type:"date",placeholder:"Bitiş Tarihi",value:y.dateTo,onChange:e=>v((t=>({...t,dateTo:e.target.value}))),className:"w-40"})]}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>v((e=>({...e,dateFrom:XC(new Date,"yyyy-MM-dd"),dateTo:XC(new Date,"yyyy-MM-dd")}))),children:"Bugün"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>v((e=>({...e,dateFrom:XC(nT(new Date,7),"yyyy-MM-dd"),dateTo:XC(new Date,"yyyy-MM-dd")}))),children:"Son 7 Gün"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>v((e=>({...e,dateFrom:XC(nT(new Date,30),"yyyy-MM-dd"),dateTo:XC(new Date,"yyyy-MM-dd")}))),children:"Son 30 Gün"}),(y.dateFrom||y.dateTo)&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>v((e=>({...e,dateFrom:"",dateTo:""}))),className:"text-red-600 hover:text-red-700",children:"Tarihi Temizle"})]})]}),i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{className:"w-12",children:i.jsx(D6,{checked:_.length===oe.length&&oe.length>0,onCheckedChange:()=>{_.length===oe.length?S([]):S(oe.map((e=>e.id)))}})}),i.jsx(M5,{className:"hidden",children:"Sipariş No"}),i.jsx(M5,{style:{width:Y.customer},children:"Müşteri"}),i.jsx(M5,{style:{width:Y.type},children:"Tür"}),i.jsx(M5,{style:{width:Y.date},children:"Tarih"}),i.jsx(M5,{style:{width:Y.total},children:"Toplam"}),i.jsx(M5,{className:"hidden xl:table-cell",style:{width:Y.paid},children:"Ödenen"}),i.jsx(M5,{className:"hidden xl:table-cell",style:{width:Y.discount},children:"İskonto"}),i.jsx(M5,{style:{width:Y.remaining},children:"Kalan"}),i.jsx(M5,{style:{width:Y.status},children:"Durum"}),i.jsx(M5,{className:"hidden lg:table-cell",style:{width:Y.payment},children:"Ödeme"}),i.jsx(M5,{className:"text-right",style:{width:Y.actions},children:"İşlemler"})]})}),i.jsx(E5,{children:null==oe?void 0:oe.map((e=>{var t,r,a;const{totalPaid:n,totalDiscount:s,totalPayment:l}=i8(e.payments),o=e.total_amount-l;return i.jsxs(D5,{children:[i.jsx(z5,{children:i.jsx(D6,{checked:_.includes(e.id),onCheckedChange:()=>{return t=e.id,void S((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}})}),i.jsx(z5,{className:"hidden font-medium",children:e.order_number}),i.jsx(z5,{style:{width:Y.customer},children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.customer_name||(null==(t=e.profiles)?void 0:t.full_name)||"İsimsiz Müşteri"}),(e.company_name||(null==(r=e.profiles)?void 0:r.company))&&i.jsx("div",{className:"text-sm text-gray-500",children:e.company_name||e.profiles.company}),(e.customer_phone||(null==(a=e.profiles)?void 0:a.phone))&&i.jsx("div",{className:"text-sm text-gray-500",children:e.customer_phone||e.profiles.phone}),e.customer_type&&i.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full inline-block mt-1",children:"individual"===e.customer_type?"Bireysel":"corporate"===e.customer_type?"Şirket":e.customer_type})]})}),i.jsx(z5,{style:{width:Y.type},children:fe(e)}),i.jsx(z5,{style:{width:Y.date},children:i.jsxs("div",{children:[i.jsx("div",{children:XC(new Date(e.created_at),"dd MMM yyyy",{locale:ZT})}),i.jsx("div",{className:"text-sm text-gray-500",children:XC(new Date(e.created_at),"HH:mm",{locale:ZT})})]})}),i.jsx(z5,{style:{width:Y.total},children:ye(e.total_amount)}),i.jsx(z5,{className:"hidden xl:table-cell text-blue-600 dark:text-blue-400",style:{width:Y.paid},children:ye(n)}),i.jsx(z5,{className:"hidden xl:table-cell text-green-600 dark:text-green-400",style:{width:Y.discount},children:ye(s)}),i.jsx(z5,{className:"font-medium "+(o>0?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"),style:{width:Y.remaining},children:ye(o)}),i.jsx(z5,{style:{width:Y.status},children:pe(e.status)}),i.jsx(z5,{className:"hidden lg:table-cell",style:{width:Y.payment},children:xe(e.payment_status||"pending")}),i.jsx(z5,{className:"text-right",style:{width:Y.actions},children:we(e)})]},e.id)}))})]}),0===(null==oe?void 0:oe.length)&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ha,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Henüz sipariş bulunmuyor"})]}),(null==le?void 0:le.length)>0&&(()=>{const e=le,t=e.reduce(((e,t)=>e+t.total_amount),0),r=e.reduce(((e,t)=>{const{totalPaid:r}=i8(t.payments);return e+r}),0),a=e.reduce(((e,t)=>{const{totalDiscount:r}=i8(t.payments);return e+r}),0),n=e.reduce(((e,t)=>{const{totalPayment:r}=i8(t.payments);return e+(t.total_amount-r)}),0);return i.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"📊 Filtrelenen Siparişler Özeti"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam Sipariş"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:ye(t)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam Tutar"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:ye(r)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ödenen Tutar"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:ye(a)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"İskonto Tutar"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold "+(n>0?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"),children:ye(n)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Kalan Tutar"})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("h4",{className:"text-md font-medium mb-3 text-gray-800 dark:text-gray-200",children:"Durum Bazında Dağılım:"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:(()=>{const t=e.reduce(((e,t)=>(e[t.status]=(e[t.status]||0)+1,e)),{});return Object.entries(t).map((([e,t])=>i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-700 px-3 py-1 rounded-full border",children:[pe(e),i.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[t," adet"]})]},e)))})()})]})]})})(),de>1&&i.jsxs("div",{className:"flex items-center justify-between mt-6",children:[i.jsxs("div",{className:"text-sm text-gray-500",children:[ce," siparişten ",Math.min((k-1)*w+1,ce),"-",Math.min(k*w,ce)," arası gösteriliyor"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>N(Math.max(k-1,1)),disabled:1===k,children:"Önceki"}),i.jsx("div",{className:"flex items-center gap-1",children:(()=>{const e=[];let t=Math.max(1,k-Math.floor(2.5)),r=Math.min(de,t+5-1);r-t+1<5&&(t=Math.max(1,r-5+1)),t>1&&(e.push(i.jsx(oo,{variant:1===k?"default":"outline",size:"sm",onClick:()=>N(1),className:"w-8 h-8 p-0",children:"1"},1)),t>2&&e.push(i.jsx("span",{className:"px-2",children:"..."},"ellipsis1")));for(let a=t;a<=r;a++)e.push(i.jsx(oo,{variant:k===a?"default":"outline",size:"sm",onClick:()=>N(a),className:"w-8 h-8 p-0",children:a},a));return r<de&&(r<de-1&&e.push(i.jsx("span",{className:"px-2",children:"..."},"ellipsis2")),e.push(i.jsx(oo,{variant:k===de?"default":"outline",size:"sm",onClick:()=>N(de),className:"w-8 h-8 p-0",children:de},de))),e})()}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>N(Math.min(k+1,de)),disabled:k===de,children:"Sonraki"})]})]})]})]}),D&&i.jsx(sd,{open:!!D,onOpenChange:()=>M(null),children:i.jsxs(cd,{className:"max-w-2xl",children:[i.jsx(dd,{children:i.jsxs(md,{children:["Sipariş Düzenle - ",D.order_number]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Sipariş Durumu"}),i.jsxs(eO,{value:D.status,onValueChange:e=>M((t=>t?{...t,status:e}:null)),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"pending",children:"Beklemede"}),i.jsx(iO,{value:"confirmed",children:"Onaylandı"}),i.jsx(iO,{value:"processing",children:"Hazırlanıyor"}),i.jsx(iO,{value:"in_production",children:"Üretimde"}),i.jsx(iO,{value:"shipped",children:"Kargoda"}),i.jsx(iO,{value:"delivered",children:"Teslim Edildi"}),i.jsx(iO,{value:"cancelled",children:"İptal"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Ödeme Durumu"}),i.jsxs(eO,{value:D.payment_status||"pending",onValueChange:e=>M((t=>t?{...t,payment_status:e}:null)),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"pending",children:"Beklemede"}),i.jsx(iO,{value:"partial",children:"Kısmi Ödendi"}),i.jsx(iO,{value:"paid",children:"Ödendi"}),i.jsx(iO,{value:"refunded",children:"İade Edildi"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Admin Notları"}),i.jsx(v6,{placeholder:"Admin notları...",value:D.notes||"",onChange:e=>M((t=>t?{...t,notes:e.target.value}:null)),rows:3})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium mb-2",children:"Müşteri Bilgileri"}),i.jsx("div",{className:"text-sm space-y-1",children:(()=>{var e,t,r;const a=D.shipping_address||"",n=D.customer_type||(()=>{const e=a.match(/Tip:\s*(Bireysel|Kurumsal)/);return e?e[1]:"Bireysel"})(),s=D.company_name||(()=>{const e=a.match(/Firma:\s*([^]*?)\s+VKN:/);return e?e[1].trim():""})(),l=D.tax_number||(()=>{const e=a.match(/VKN:\s*(\d+)/);return e?e[1]:""})(),o=D.company_address||(()=>{const e=a.match(/Firma Adresi:\s*([^]*?)\s+(?:Fatura|Tel:|$)/);return e?e[1].trim():""})();D.billing_city||(()=>{const e=a.match(/Fatura İl\/İlçe:\s*([^]*?)\s+Fatura Adresi:/);e&&e[1].trim()})(),D.billing_district||(()=>{const e=a.match(/Fatura Adresi:\s*([^]*?)\s+Tel:/);e&&e[1].trim()})();const c=D.customer_name||(null==(e=D.profiles)?void 0:e.full_name)||(()=>{const e=a.match(/^([^]*?)\s+TC:/);return e?e[1].trim():""})(),d=D.customer_tc||(()=>{const e=a.match(/TC:\s*(\d+)/);return e?e[1]:""})(),u=D.customer_phone||(null==(t=D.profiles)?void 0:t.phone)||(()=>{const e=a.match(/Tel:\s*(.+?)$/);return e?e[1].trim():""})(),m=D.customer_address||(()=>{const e=a.match(/TC:\s*\d+\s+([^]*?)\s+[^\/]+\/[^\/]+\s+Tel:/);return e?e[1].trim():""})(),h=D.customer_city&&D.customer_district?`${D.customer_district}/${D.customer_city}`:(()=>{const e=a.match(/([^\/\s]+\/[^\/\s]+)\s+Tel:/);return e?e[1].trim():""})();return i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Müşteri Tipi:"})," ","corporate"===n||"Kurumsal"===n?"🏢 Şirket":"individual"===n?"👤 Bireysel":n]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Ad:"})," ",c]}),d&&i.jsxs("p",{children:[i.jsx("strong",{children:"TC:"})," ",d]}),u&&i.jsxs("p",{children:[i.jsx("strong",{children:"Telefon:"})," ",u]}),m&&i.jsxs("p",{children:[i.jsx("strong",{children:"Adres:"})," ",m]}),h&&i.jsxs("p",{children:[i.jsx("strong",{children:"İl/İlçe:"})," ",h]}),(null==(r=D.profiles)?void 0:r.company)&&i.jsxs("p",{children:[i.jsx("strong",{children:"Şirket:"})," ",D.profiles.company]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Teslimat Adresi:"})," ",D.shipping_address]}),D.customer_notes&&i.jsxs("p",{children:[i.jsx("strong",{children:"Müşteri Notları:"})," ",D.customer_notes]}),("corporate"===n||"Kurumsal"===n)&&(s||l||o)&&i.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded border-l-4 border-blue-400",children:[i.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Şirket Bilgileri:"}),s&&i.jsxs("p",{children:[i.jsx("strong",{children:"Firma Ünvanı:"})," ",s]}),l&&i.jsxs("p",{children:[i.jsx("strong",{children:"VKN:"})," ",l]}),o&&i.jsxs("p",{children:[i.jsx("strong",{children:"Firma Adresi:"})," ",o]})]}),(D.billing_city||D.billing_district||D.billing_address)&&D.is_billing_address_different&&i.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded border-l-4 border-green-400",children:[i.jsx("p",{className:"font-medium text-green-800 mb-2",children:"Kargo Adresi:"}),(D.billing_city||D.billing_district)&&i.jsxs("p",{children:[i.jsx("strong",{children:"Kargo İl/İlçe:"})," ",D.billing_city&&D.billing_district?`${D.billing_city}/${D.billing_district}`:D.billing_city||D.billing_district]}),D.billing_address&&i.jsxs("p",{children:[i.jsx("strong",{children:"Kargo Adresi:"})," ",D.billing_address]})]})]})})()})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(oo,{variant:"outline",onClick:()=>M(null),children:"İptal"}),i.jsx(oo,{onClick:()=>ue.mutate({orderId:D.id,updates:{status:D.status,payment_status:D.payment_status,notes:D.notes}}),disabled:ue.isPending,children:ue.isPending?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 mr-2 animate-spin"}),"Güncelleniyor..."]}):"Kaydet"})]})]})]})}),z&&i.jsx(sd,{open:!!z,onOpenChange:()=>R(null),children:i.jsxs(cd,{className:"max-w-4xl max-h-[85vh] overflow-y-auto bg-white dark:bg-gray-900",children:[i.jsx(dd,{className:"border-b pb-4",children:i.jsxs(md,{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-xl font-semibold",children:["Sipariş Özeti - #",z.order_number]}),i.jsx(oo,{variant:"outline",size:"sm",asChild:!0,children:i.jsxs(Ll,{to:m8(`/admin/orders/${z.id}`,null==l?void 0:l.role),children:[i.jsx(Hr,{className:"h-4 w-4 mr-2"}),"Detaylı Görünüm"]})})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Sipariş Veren Kişi"}),i.jsx("p",{className:"font-semibold",children:z.customer_name||(null==(e=z.profiles)?void 0:e.full_name)||"İsimsiz Müşteri"}),(z.company_name||(null==(t=z.profiles)?void 0:t.company))&&i.jsx("p",{className:"text-sm text-gray-600",children:z.company_name||z.profiles.company}),z.customer_type&&i.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full inline-block mt-1",children:"individual"===z.customer_type?"Bireysel":"corporate"===z.customer_type?"Şirket":z.customer_type})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Telefon"}),i.jsx("p",{children:z.customer_phone||(null==(r=z.profiles)?void 0:r.phone)||"Belirtilmemiş"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Sipariş Tarihi"}),i.jsx("p",{children:XC(new Date(z.created_at),"dd MMMM yyyy HH:mm",{locale:ZT})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Durum"}),i.jsx("div",{children:pe(z.status)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Ödeme Durumu"}),i.jsx("div",{children:xe(z.payment_status||"pending")})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Toplam Tutar"}),i.jsx("p",{className:"text-lg font-bold text-blue-600",children:ye(z.total_amount)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Teslimat Adresi"}),i.jsx("p",{className:"text-sm bg-gray-50 p-3 rounded",children:z.shipping_address})]}),z.customer_notes&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Müşteri Notları"}),i.jsx("p",{className:"text-sm bg-blue-50 p-3 rounded",children:z.customer_notes})]}),z.notes&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Admin Notları"}),i.jsx("p",{className:"text-sm bg-yellow-50 p-3 rounded",children:z.notes})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>{R(null),M(z)},children:[i.jsx(Va,{className:"h-4 w-4 mr-2"}),"Düzenle"]}),i.jsx(oo,{variant:"outline",size:"sm",asChild:!0,children:i.jsxs(Ll,{to:`/customer/orders/${z.id}`,children:[i.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Müşteri Görünümü"]})})]})]})]})}),i.jsx(sd,{open:B,onOpenChange:()=>{},children:i.jsxs(cd,{className:"max-w-md",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5"}),"Fatura Oluşturma"]}),i.jsxs(hd,{children:[null==I?void 0:I.order_number," numaralı sipariş için fatura oluşturmak istiyor musunuz?"]})]}),!K.isProcessing&&null===q&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center py-4",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Fatura Oluşturma Seçenekleri"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bu sipariş için nasıl devam etmek istiyorsunuz?"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:"outline",onClick:()=>be("skip"),className:"flex-1",children:"Fatura Kesildi"}),i.jsx(oo,{variant:"default",onClick:()=>be("create"),className:"flex-1 bg-green-600 hover:bg-green-700",children:"Fatura Oluştur"})]})]}),K.isProcessing&&i.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[i.jsx(oa,{className:"h-8 w-8 animate-spin mb-4"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Fatura oluşturuluyor..."})]}),K.success&&i.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[i.jsx("div",{className:"text-green-600 mb-4",children:i.jsx(Or,{className:"h-8 w-8"})}),i.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Fatura başarıyla oluşturuldu!"})]}),K.error&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[i.jsx("div",{className:"text-red-600 mb-4",children:i.jsx(Er,{className:"h-8 w-8"})}),i.jsx("p",{className:"text-sm text-red-600 text-center",children:K.error})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:"outline",onClick:ke,className:"flex-1",children:"Kapat"}),i.jsx(oo,{variant:"default",onClick:()=>{$(null),U({isProcessing:!1,success:!1,error:null})},className:"flex-1",children:"Tekrar Dene"})]})]}),!K.isProcessing&&!K.error&&null===q&&i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx(oo,{variant:"outline",onClick:ke,children:"İptal"})})]})}),O&&i.jsx(sd,{open:O,onOpenChange:P,children:i.jsxs(cd,{className:"max-w-lg",children:[i.jsxs(dd,{children:[i.jsx(md,{children:"Kolon Genişlik Ayarları"}),i.jsx(hd,{children:"Genişlikleri piksel cinsinden ayarlayın. Değişiklikler otomatik kaydedilir."})]}),i.jsxs("div",{className:"space-y-4",children:[Object.entries(Y).map((([e,t])=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("label",{className:"w-24 capitalize",children:e}),i.jsx(co,{type:"number",min:60,max:400,value:t,onChange:t=>V((r=>({...r,[e]:Number(t.target.value)}))),className:"w-24"}),i.jsx("span",{children:"px"})]},e))),i.jsx(oo,{variant:"secondary",onClick:()=>V(H),children:"Varsayılana Sıfırla"})]})]})}),A&&i.jsx(sd,{open:A,onOpenChange:E,children:i.jsxs(cd,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(dd,{children:[i.jsx(md,{children:"Durum Renk Ayarları"}),i.jsx(hd,{children:"Sipariş durumu, ödeme durumu ve sipariş türü renklerini özelleştirin. Değişiklikler otomatik kaydedilir."})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100 border-b pb-2",children:"📊 Sipariş Durumu Renkleri"}),i.jsx("div",{className:"space-y-4",children:Object.entries(W).map((([e,t])=>{const r={pending:"Beklemede",confirmed:"Onaylandı",processing:"Hazırlanıyor",in_production:"Üretimde",shipped:"Kargoda",delivered:"Teslim Edildi",cancelled:"İptal"}[e]||e;return i.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[i.jsx("div",{className:"flex items-center gap-4 mb-4",children:i.jsxs("h4",{className:"text-md font-semibold flex items-center gap-2",children:[pe(e),i.jsx("span",{children:r})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h5",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Açık Tema"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Arkaplan"}),i.jsx(M6,{value:t.bg,onChange:t=>Q((r=>({...r,[e]:{...r[e],bg:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Metin"}),i.jsx(M6,{value:t.text,onChange:t=>Q((r=>({...r,[e]:{...r[e],text:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Kenar"}),i.jsx(M6,{value:t.border,onChange:t=>Q((r=>({...r,[e]:{...r[e],border:t}})))})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h5",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Koyu Tema"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Arkaplan"}),i.jsx(M6,{value:t.darkBg,onChange:t=>Q((r=>({...r,[e]:{...r[e],darkBg:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Metin"}),i.jsx(M6,{value:t.darkText,onChange:t=>Q((r=>({...r,[e]:{...r[e],darkText:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Kenar"}),i.jsx(M6,{value:t.darkBorder,onChange:t=>Q((r=>({...r,[e]:{...r[e],darkBorder:t}})))})]})]}),i.jsxs("div",{className:"space-y-3 md:col-span-2",children:[i.jsx("h5",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Önizleme"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"p-3 bg-white rounded border",children:[i.jsx("p",{className:"text-xs mb-2",children:"Açık Tema:"}),pe(e)]}),i.jsxs("div",{className:"p-3 bg-gray-900 rounded border",children:[i.jsx("p",{className:"text-xs mb-2 text-white",children:"Koyu Tema:"}),i.jsx("div",{style:{backgroundColor:t.darkBg,color:t.darkText,borderColor:t.darkBorder},className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors",children:r})]})]})]})]})]},e)}))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100 border-b pb-2",children:"💳 Ödeme Durumu Renkleri"}),i.jsx("div",{className:"space-y-4",children:Object.entries(Z).map((([e,t])=>{const r={pending:"Beklemede",partial:"Kısmi",paid:"Ödendi",refunded:"İade"}[e]||e;return i.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[i.jsx("div",{className:"flex items-center gap-4 mb-4",children:i.jsxs("h4",{className:"text-md font-semibold flex items-center gap-2",children:[xe(e),i.jsx("span",{children:r})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h5",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Açık Tema"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Arkaplan"}),i.jsx(M6,{value:t.bg,onChange:t=>J((r=>({...r,[e]:{...r[e],bg:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Metin"}),i.jsx(M6,{value:t.text,onChange:t=>J((r=>({...r,[e]:{...r[e],text:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Kenar"}),i.jsx(M6,{value:t.border,onChange:t=>J((r=>({...r,[e]:{...r[e],border:t}})))})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h5",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Koyu Tema"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Arkaplan"}),i.jsx(M6,{value:t.darkBg,onChange:t=>J((r=>({...r,[e]:{...r[e],darkBg:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Metin"}),i.jsx(M6,{value:t.darkText,onChange:t=>J((r=>({...r,[e]:{...r[e],darkText:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Kenar"}),i.jsx(M6,{value:t.darkBorder,onChange:t=>J((r=>({...r,[e]:{...r[e],darkBorder:t}})))})]})]}),i.jsxs("div",{className:"space-y-3 md:col-span-2",children:[i.jsx("h5",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Önizleme"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"p-3 bg-white rounded border",children:[i.jsx("p",{className:"text-xs mb-2",children:"Açık Tema:"}),xe(e)]}),i.jsxs("div",{className:"p-3 bg-gray-900 rounded border",children:[i.jsx("p",{className:"text-xs mb-2 text-white",children:"Koyu Tema:"}),i.jsx("div",{style:{backgroundColor:t.darkBg,color:t.darkText,borderColor:t.darkBorder},className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors",children:r})]})]})]})]})]},e)}))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100 border-b pb-2",children:"🏷️ Sipariş Türü Renkleri"}),i.jsx("div",{className:"space-y-4",children:Object.entries(te).map((([e,t])=>{const r={design:"Özel Tasarım",ready_stock:"Hazır Stok",promotion:"Promosyon"}[e]||e;return i.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[i.jsx("div",{className:"flex items-center gap-4 mb-4",children:i.jsxs("h4",{className:"text-md font-semibold flex items-center gap-2",children:[i.jsx(Co,{variant:"outline",className:"border transition-colors hover:opacity-80",style:{backgroundColor:t.bg,color:t.text,borderColor:t.border},children:r}),i.jsx("span",{children:r})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h5",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Açık Tema"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Arkaplan"}),i.jsx(M6,{value:t.bg,onChange:t=>re((r=>({...r,[e]:{...r[e],bg:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Metin"}),i.jsx(M6,{value:t.text,onChange:t=>re((r=>({...r,[e]:{...r[e],text:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Kenar"}),i.jsx(M6,{value:t.border,onChange:t=>re((r=>({...r,[e]:{...r[e],border:t}})))})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h5",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Koyu Tema"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Arkaplan"}),i.jsx(M6,{value:t.darkBg,onChange:t=>re((r=>({...r,[e]:{...r[e],darkBg:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Metin"}),i.jsx(M6,{value:t.darkText,onChange:t=>re((r=>({...r,[e]:{...r[e],darkText:t}})))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-medium",children:"Kenar"}),i.jsx(M6,{value:t.darkBorder,onChange:t=>re((r=>({...r,[e]:{...r[e],darkBorder:t}})))})]})]}),i.jsxs("div",{className:"space-y-3 md:col-span-2",children:[i.jsx("h5",{className:"font-medium text-sm text-gray-600 dark:text-gray-400",children:"Önizleme"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"p-3 bg-white rounded border",children:[i.jsx("p",{className:"text-xs mb-2",children:"Açık Tema:"}),i.jsx(Co,{variant:"outline",className:"border transition-colors hover:opacity-80",style:{backgroundColor:t.bg,color:t.text,borderColor:t.border},children:r})]}),i.jsxs("div",{className:"p-3 bg-gray-900 rounded border",children:[i.jsx("p",{className:"text-xs mb-2 text-white",children:"Koyu Tema:"}),i.jsx("div",{style:{backgroundColor:t.darkBg,color:t.darkText,borderColor:t.darkBorder},className:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors",children:r})]})]})]})]})]},e)}))})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[i.jsx(oo,{variant:"secondary",onClick:()=>{Q(G),J(X),re(ee)},children:"Tümünü Varsayılana Sıfırla"}),i.jsx(oo,{variant:"outline",onClick:()=>E(!1),children:"Kapat"})]})]})]})}),i.jsx(d8,{cargoPaymentDialog:u,onPaymentTypeSelect:p,onClose:g}),i.jsx(c8,{smsDialog:d,onSmsCodeChange:e=>f((t=>({...t,smsCode:e}))),onVerify:m,onClose:x})]})},p8=()=>{var e;const{toast:t}=at(),r=$e();Gl(),Jl();const[a,n]=Hl(),[s,l]=ze.useState({search:"",remainingAmountMin:"0.01",remainingAmountMax:"",dateFrom:"",dateTo:"",orderType:"all",paymentStatus:"all"}),[o,c]=ze.useState(""),d=parseInt(a.get("page")||"1",10),u=e=>{const t=new URLSearchParams(a);t.set("page",e.toString()),n(t)};ze.useEffect((()=>{const e=setTimeout((()=>{l((e=>({...e,search:o})))}),500);return()=>clearTimeout(e)}),[o]);const[m,h]=ze.useState(!1),[p,x]=ze.useState(null),[g,f]=ze.useState(!1),[y,v]=ze.useState({orderId:"",amount:"",discount:"",paymentMethod:"cash",bankInfo:"",notes:""}),b=e=>(s.search&&(e=e.or(`order_number.ilike.%${s.search}%,customer_name.ilike.%${s.search}%,company_name.ilike.%${s.search}%`)),"all"!==s.paymentStatus&&(e=e.eq("payment_status",s.paymentStatus)),s.dateFrom&&(e=e.gte("created_at",ZS(new Date(s.dateFrom)).toISOString())),s.dateTo&&(e=e.lte("created_at",cC(new Date(s.dateTo)).toISOString())),e),j=(e,t)=>{let r=e;if(t){const a=e=>null==e?void 0:e.toLowerCase().replace(/[-\s]+/g,""),n=a(t);r=null==e?void 0:e.filter((e=>{var t,r;return a(e.order_number||"").includes(n)||a(e.customer_name||"").includes(n)||a(e.company_name||"").includes(n)||a((null==(t=e.profiles)?void 0:t.full_name)||"").includes(n)||a((null==(r=e.profiles)?void 0:r.company)||"").includes(n)}))}const a=null==r?void 0:r.map((e=>{var t,r;return{...e,customer_name:e.customer_name||(null==(t=e.profiles)?void 0:t.full_name)||"",company_name:e.company_name||(null==(r=e.profiles)?void 0:r.company)||""}})),n=null==a?void 0:a.filter((e=>{const{totalPayment:t}=i8(e.payments),r=e.total_amount-t;let a=!0,n=!0;if(s.remainingAmountMin){const e=parseFloat(s.remainingAmountMin);a=!isNaN(e)&&r>=e}if(s.remainingAmountMax){const e=parseFloat(s.remainingAmountMax);n=!isNaN(e)&&r<=e}return a&&n}));return"all"!==s.orderType?null==n?void 0:n.filter((e=>{var t,r;return"design"===s.orderType?null==(t=e.order_items)?void 0:t.some((e=>{var t,r,a,n,s,i,l,o;return!0===(null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.is_design_product)||(null==(s=null==(n=null==(a=e.product_variations)?void 0:a.products)?void 0:n.category)?void 0:s.toLowerCase().includes("özel tasarım"))||(null==(o=null==(l=null==(i=e.product_variations)?void 0:i.products)?void 0:l.category)?void 0:o.toLowerCase().includes("design"))})):"ready_stock"!==s.orderType||!(null==(r=e.order_items)?void 0:r.some((e=>{var t,r,a,n,s,i,l,o;return!0===(null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.is_design_product)||(null==(s=null==(n=null==(a=e.product_variations)?void 0:a.products)?void 0:n.category)?void 0:s.toLowerCase().includes("özel tasarım"))||(null==(o=null==(l=null==(i=e.product_variations)?void 0:i.products)?void 0:l.category)?void 0:o.toLowerCase().includes("design"))})))})):n},{data:k,isLoading:w}=qe({queryKey:["payment-management-orders",s,d],queryFn:async()=>{let e=Wl.from("orders").select("\n          *,\n          profiles!customer_id(full_name, company, phone),\n          payments (\n            id,\n            amount,\n            discount\n          ),\n          order_items (\n            id,\n            product_variation_id,\n            product_variations (\n              id,\n              product_id,\n              products (\n                id,\n                is_design_product,\n                category\n              )\n            )\n          )\n        ",{count:"exact"});e=b(e),e=e.order("created_at",{ascending:!1});const{data:t,error:r,count:a}=await e;if(r)throw r;const n=j(t||[],s.search),i=20*(d-1),l=i+20;return{orders:(null==n?void 0:n.slice(i,l))||[],totalCount:(null==n?void 0:n.length)||0}}}),{data:N}=qe({queryKey:["payment-management-summary",s],queryFn:async()=>{let e=Wl.from("orders").select("\n          *,\n          profiles!customer_id(full_name, company, phone),\n          payments (\n            id,\n            amount,\n            discount\n          ),\n          order_items (\n            id,\n            product_variation_id,\n            product_variations (\n              id,\n              product_id,\n              products (\n                id,\n                is_design_product,\n                category\n              )\n            )\n          )\n        ");e=b(e),e=e.order("created_at",{ascending:!1});const{data:t,error:r}=await e;if(r)throw r;return j(t||[],s.search)}}),_=(null==k?void 0:k.orders)||[],S=(null==k?void 0:k.totalCount)||0,C=Math.ceil(S/20),T=Ke({mutationFn:async e=>{const t=parseFloat(e.amount||"0"),r=parseFloat(e.discount||"0");if(t<=0&&r<=0)throw new Error("Tutar veya iskonto girilmelidir");const a=_.find((t=>t.id===e.orderId)),n=null==a?void 0:a.customer_id;if(!n)throw new Error("Müşteri bilgisi bulunamadı");const{error:s}=await Wl.from("payments").insert({order_id:e.orderId,customer_id:n,amount:t,discount:r,payment_method:e.paymentMethod,bank_info:e.bankInfo,notes:e.notes||null,status:"completed",created_at:(new Date).toISOString()});if(s)throw s;const i=_.find((t=>t.id===e.orderId));if(i){const{totalPayment:a}=i8(i.payments),n=a+t+r;let s="partial";s=n>=i.total_amount?"paid":n>0?"partial":"pending";const{error:l}=await Wl.from("orders").update({payment_status:s,updated_at:(new Date).toISOString()}).eq("id",e.orderId);if(l)throw l}},onSuccess:()=>{t({title:"Başarılı",description:"Ödeme başarıyla eklendi."}),r.invalidateQueries({queryKey:["payment-management-orders"]}),r.invalidateQueries({queryKey:["payment-management-summary"]}),r.invalidateQueries({queryKey:["admin-orders"]}),f(!1),O()},onError:e=>{t({title:"Hata",description:e instanceof Error?e.message:"Ödeme eklenirken bir hata oluştu.",variant:"destructive"})}}),O=()=>{v({orderId:"",amount:"",discount:"",paymentMethod:"cash",bankInfo:"",notes:""})},P=e=>{let t="ready_stock",r="Hazır Stok";if(e.order_items&&e.order_items.length>0){if(e.order_items.some((e=>{var t,r,a,n,s,i;return(null==(a=null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.category)?void 0:a.toLowerCase().includes("promotion"))||(null==(i=null==(s=null==(n=e.product_variations)?void 0:n.products)?void 0:s.category)?void 0:i.toLowerCase().includes("promosyon"))})))t="promotion";else{if(e.order_items.some((e=>{var t,r;return!0===(null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.is_design_product)})))t="design",r="O. Tasarım";else{e.order_items.some((e=>{var t,r,a,n,s,i;return(null==(a=null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.category)?void 0:a.toLowerCase().includes("özel tasarım"))||(null==(i=null==(s=null==(n=e.product_variations)?void 0:n.products)?void 0:s.category)?void 0:i.toLowerCase().includes("design"))}))&&(t="design",r="Özel Tasarım")}}}let a="bg-green-100 text-green-800";return"design"===t&&(a="bg-purple-100 text-purple-800"),"promotion"===t&&(a="bg-yellow-100 text-yellow-800"),i.jsx(Co,{className:a,children:r})},A=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e);return w?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Ödeme Yönetimi"}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Ödeme takibi ve hızlı ödeme ekleme • Toplam ",S," sipariş"]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>h(!m),children:[i.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Filtreler"]})})]}),m&&i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Xr,{className:"h-5 w-5"}),"Gelişmiş Filtreler"]})}),i.jsxs(io,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kalan Tutar Min. (₺)"}),i.jsx(co,{type:"number",placeholder:"0.01",value:s.remainingAmountMin,onChange:e=>l((t=>({...t,remainingAmountMin:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kalan Tutar Max. (₺)"}),i.jsx(co,{type:"number",placeholder:"Sınırsız",value:s.remainingAmountMax,onChange:e=>l((t=>({...t,remainingAmountMax:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Başlangıç Tarihi"}),i.jsx(co,{type:"date",value:s.dateFrom,onChange:e=>l((t=>({...t,dateFrom:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Bitiş Tarihi"}),i.jsx(co,{type:"date",value:s.dateTo,onChange:e=>l((t=>({...t,dateTo:e.target.value})))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Sipariş Türü"}),i.jsxs(eO,{value:s.orderType,onValueChange:e=>l((t=>({...t,orderType:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Tüm Türler"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm Türler"}),i.jsx(iO,{value:"design",children:"Özel Tasarım"}),i.jsx(iO,{value:"ready_stock",children:"Hazır Stok"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Ödeme Durumu"}),i.jsxs(eO,{value:s.paymentStatus,onValueChange:e=>l((t=>({...t,paymentStatus:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Tüm Durumlar"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm Durumlar"}),i.jsx(iO,{value:"pending",children:"Beklemede"}),i.jsx(iO,{value:"partial",children:"Kısmi"}),i.jsx(iO,{value:"paid",children:"Ödendi"})]})]})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{l({search:"",remainingAmountMin:"0.01",remainingAmountMax:"",dateFrom:"",dateTo:"",orderType:"all",paymentStatus:"all"}),c(""),u(1)},children:"Filtreleri Temizle"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>l((e=>({...e,dateFrom:XC(nT(new Date,7),"yyyy-MM-dd"),dateTo:XC(new Date,"yyyy-MM-dd")}))),children:"Son 7 Gün"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>l((e=>({...e,dateFrom:XC(nT(new Date,30),"yyyy-MM-dd"),dateTo:XC(new Date,"yyyy-MM-dd")}))),children:"Son 30 Gün"})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-5 w-5"}),"Ödeme Takip Listesi"]}),i.jsx(so,{children:"Ödenmemiş veya kısmi ödenmiş siparişler. Hızlıca ödeme ekleyebilirsiniz."})]}),i.jsxs(io,{children:[i.jsx("div",{className:"space-y-4 mb-6",children:i.jsx("div",{className:"flex gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"Sipariş numarası, müşteri adı veya şirket adı ile arayın...",className:"pl-10",value:o,onChange:e=>c(e.target.value)})]})})}),i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Tarih"}),i.jsx(M5,{children:"Tür"}),i.jsx(M5,{children:"Müşteri"}),i.jsx(M5,{children:"Toplam"}),i.jsx(M5,{children:"Ödenen"}),i.jsx(M5,{children:"İskonto"}),i.jsx(M5,{className:"font-bold",children:"Kalan"}),i.jsx(M5,{className:"text-right",children:"İşlemler"})]})}),i.jsx(E5,{children:null==_?void 0:_.map((e=>{var t,r,a;const{totalPaid:n,totalDiscount:s,totalPayment:l}=i8(e.payments),o=e.total_amount-l;return i.jsxs(D5,{className:o>50?"bg-red-50 dark:bg-red-950/30":o>0?"bg-yellow-50 dark:bg-yellow-950/30":"",children:[i.jsx(z5,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:XC(new Date(e.created_at),"dd MMM yyyy",{locale:ZT})}),i.jsx("div",{className:"text-sm text-gray-500",children:XC(new Date(e.created_at),"HH:mm",{locale:ZT})}),i.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["#",e.order_number]})]})}),i.jsx(z5,{children:P(e)}),i.jsx(z5,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.customer_name||(null==(t=e.profiles)?void 0:t.full_name)||"İsimsiz Müşteri"}),(e.company_name||(null==(r=e.profiles)?void 0:r.company))&&i.jsx("div",{className:"text-sm text-gray-500",children:e.company_name||e.profiles.company}),(e.customer_phone||(null==(a=e.profiles)?void 0:a.phone))&&i.jsx("div",{className:"text-sm text-gray-500",children:e.customer_phone||e.profiles.phone}),e.customer_type&&i.jsx("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full inline-block mt-1",children:"individual"===e.customer_type?"Bireysel":"corporate"===e.customer_type?"Şirket":e.customer_type})]})}),i.jsx(z5,{className:"font-medium",children:A(e.total_amount)}),i.jsx(z5,{className:"text-blue-600 dark:text-blue-400",children:A(n)}),i.jsx(z5,{className:"text-green-600 dark:text-green-400",children:A(s)}),i.jsx(z5,{className:"font-bold text-lg "+(o>50?"text-red-600 dark:text-red-400":o>0?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"),children:A(o)}),i.jsx(z5,{className:"text-right",children:i.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[o>0&&i.jsxs(oo,{variant:"default",size:"sm",onClick:()=>(e=>{x(e),v({orderId:e.id,amount:"",discount:"",paymentMethod:"cash",bankInfo:"",notes:""}),f(!0)})(e),className:"bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(Pa,{className:"h-4 w-4 mr-1"}),"Ödeme Ekle"]}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>window.open(`/admin/orders/${e.id}`,"_blank"),title:"Detay Görüntüle",children:i.jsx(Vr,{className:"h-4 w-4"})})]})})]},e.id)}))})]}),0===(null==_?void 0:_.length)&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Lr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Filtrelere uygun sipariş bulunamadı"})]}),(null==N?void 0:N.length)>0&&(()=>{const e=N,t=e.reduce(((e,t)=>e+t.total_amount),0),r=e.reduce(((e,t)=>{const{totalPaid:r}=i8(t.payments);return e+r}),0),a=e.reduce(((e,t)=>{const{totalDiscount:r}=i8(t.payments);return e+r}),0),n=e.reduce(((e,t)=>{const{totalPayment:r}=i8(t.payments);return e+(t.total_amount-r)}),0);return i.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"💰 Ödeme Özeti"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam Sipariş"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:A(t)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam Tutar"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:A(r)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ödenen Tutar"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:A(a)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"İskonto Tutar"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold "+(n>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"),children:A(n)}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.jsx("strong",{children:"Kalan Tutar"})})]})]})]})})(),C>1&&i.jsxs("div",{className:"flex items-center justify-between mt-6",children:[i.jsxs("div",{className:"text-sm text-gray-500",children:[S," siparişten ",Math.min(20*(d-1)+1,S),"-",Math.min(20*d,S)," arası gösteriliyor"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>u(Math.max(d-1,1)),disabled:1===d,children:"Önceki"}),i.jsx("div",{className:"flex items-center gap-1",children:(()=>{const e=[];let t=Math.max(1,d-Math.floor(2.5)),r=Math.min(C,t+5-1);r-t+1<5&&(t=Math.max(1,r-5+1)),t>1&&(e.push(i.jsx(oo,{variant:1===d?"default":"outline",size:"sm",onClick:()=>u(1),className:"w-8 h-8 p-0",children:"1"},1)),t>2&&e.push(i.jsx("span",{className:"px-2",children:"..."},"ellipsis1")));for(let a=t;a<=r;a++)e.push(i.jsx(oo,{variant:d===a?"default":"outline",size:"sm",onClick:()=>u(a),className:"w-8 h-8 p-0",children:a},a));return r<C&&(r<C-1&&e.push(i.jsx("span",{className:"px-2",children:"..."},"ellipsis2")),e.push(i.jsx(oo,{variant:d===C?"default":"outline",size:"sm",onClick:()=>u(C),className:"w-8 h-8 p-0",children:C},C))),e})()}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>u(Math.min(d+1,C)),disabled:d===C,children:"Sonraki"})]})]})]})]}),g&&p&&i.jsx(sd,{open:g,onOpenChange:f,children:i.jsxs(cd,{className:"max-w-md",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5"}),"Ödeme Ekle"]}),i.jsxs(hd,{children:["#",p.order_number," - ",p.customer_name||(null==(e=p.profiles)?void 0:e.full_name)]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:(()=>{const{totalPaid:e,totalDiscount:t,totalPayment:r}=i8(p.payments),a=p.total_amount-r;return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Toplam Tutar:"}),i.jsx("span",{className:"font-medium",children:A(p.total_amount)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Ödenen:"}),i.jsx("span",{className:"font-medium text-blue-600",children:A(e)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"İskonto:"}),i.jsx("span",{className:"font-medium text-green-600",children:A(t)})]}),i.jsxs("div",{className:"flex justify-between border-t pt-1",children:[i.jsx("span",{className:"font-bold",children:"Kalan:"}),i.jsx("span",{className:"font-bold text-red-600",children:A(a)})]})]})})})()}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"amount",children:"Ödeme Tutarı (₺)"}),i.jsx(co,{id:"amount",type:"number",placeholder:"0.00",value:y.amount,onChange:e=>v((t=>({...t,amount:e.target.value}))),min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"discount",children:"İskonto (₺)"}),i.jsx(co,{id:"discount",type:"number",placeholder:"0.00",value:y.discount,onChange:e=>v((t=>({...t,discount:e.target.value}))),min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"paymentMethod",children:"Ödeme Yöntemi"}),i.jsxs(eO,{value:y.paymentMethod,onValueChange:e=>v((t=>({...t,paymentMethod:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"cash",children:"Nakit"}),i.jsx(iO,{value:"credit_card",children:"Kredi Kartı"})]})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"bankInfo",children:"Banka Bilgisi (opsiyonel)"}),i.jsx(co,{id:"bankInfo",placeholder:"Banka adı veya açıklama",value:y.bankInfo,onChange:e=>v((t=>({...t,bankInfo:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"notes",children:"Notlar (opsiyonel)"}),i.jsx(v6,{id:"notes",placeholder:"Ödeme ile ilgili notlar...",value:y.notes,onChange:e=>v((t=>({...t,notes:e.target.value}))),rows:3})]}),(y.amount||y.discount)&&i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsx("div",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Ödeme Önizlemesi:"}),i.jsxs("div",{className:"text-sm space-y-1",children:[y.amount&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Ödeme Tutarı:"}),i.jsx("span",{className:"font-medium",children:A(parseFloat(y.amount)||0)})]}),y.discount&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"İskonto:"}),i.jsx("span",{className:"font-medium",children:A(parseFloat(y.discount)||0)})]}),i.jsxs("div",{className:"flex justify-between border-t pt-1",children:[i.jsx("span",{className:"font-bold",children:"Toplam:"}),i.jsx("span",{className:"font-bold",children:A((parseFloat(y.amount)||0)+(parseFloat(y.discount)||0))})]})]})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(oo,{onClick:()=>T.mutate(y),disabled:T.isPending||!y.amount&&!y.discount,className:"flex-1",children:T.isPending?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 mr-2 animate-spin"}),"Ekleniyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ir,{className:"h-4 w-4 mr-2"}),"Ödeme Ekle"]})}),i.jsx(oo,{variant:"outline",onClick:()=>f(!1),disabled:T.isPending,children:"İptal"})]})]})]})})]})},x8=({isOpen:e,onClose:t,order:r,onInvoiceCreated:a})=>{var n,s;const{toast:l}=at(),[o,c]=ze.useState(!1),[d,u]=ze.useState(null),[m,h]=ze.useState(null),[p,x]=ze.useState(0);ze.useEffect((()=>{e&&(c(!1),u(null),h(null),x(0))}),[e,null==r?void 0:r.id]);const g=e=>{switch(e.status){case"completed":return i.jsx(Or,{className:"h-4 w-4 text-green-500"});case"error":return i.jsx(Er,{className:"h-4 w-4 text-red-500"});case"in_progress":return i.jsx(oa,{className:"h-4 w-4 animate-spin text-blue-500"});default:return i.jsx(Tr,{className:"h-4 w-4 text-gray-400"})}},f=e=>{switch(e.status){case"completed":return"default";case"error":return"destructive";case"in_progress":return"secondary";default:return"outline"}},y=()=>{if(!(null==m?void 0:m.steps))return 0;return m.steps.filter((e=>"completed"===e.status)).length/m.steps.length*100},v=()=>{u(null),h(null),x(0),c(!1)},b=()=>{v(),t()};if(!r)return null;const j=r.company_name||r.customer_name||"Bilinmeyen Müşteri";return i.jsx(sd,{open:e,onOpenChange:b,children:i.jsxs(cd,{className:"max-w-2xl",children:[i.jsxs(dd,{children:[i.jsx(md,{className:"flex items-center gap-2",children:"📄 Paraşüt Fatura Oluştur"}),i.jsxs(hd,{className:"space-y-1",children:[i.jsxs("span",{className:"block",children:[i.jsx("strong",{children:"Sipariş:"})," ",r.order_number]}),i.jsxs("span",{className:"block",children:[i.jsx("strong",{children:"Müşteri:"})," ",j]}),i.jsxs("span",{className:"block",children:[i.jsx("strong",{children:"Tutar:"})," ",new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(r.total_amount)]})]})]}),i.jsxs("div",{className:"space-y-6",children:[!m&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Fatura Oluşturma Seçenekleri"}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsxs(oo,{onClick:async()=>{if(r)try{c(!0),h(null),x(0);const e=await e8(r.id);h(e),e.success?(l({title:"Başarılı!",description:"Yerel fatura başarıyla oluşturuldu."}),null==a||a(e)):l({title:"Hata",description:e.error||"Fatura oluşturulurken hata oluştu.",variant:"destructive"})}catch(e){l({title:"Hata",description:`Fatura oluşturma hatası: ${e.message}`,variant:"destructive"})}finally{c(!1)}},disabled:o,variant:"outline",className:"flex-1 max-w-xs",children:[o?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):null,"Fatura Kesildi"]}),i.jsxs(oo,{onClick:async()=>{if(r)try{c(!0),h(null),x(0);const e=await t8(r.id);h(e),e.success?(l({title:"Başarılı!",description:"Paraşüt faturası başarıyla oluşturuldu."}),null==a||a(e)):l({title:"Hata",description:e.error||"Fatura oluşturulurken hata oluştu.",variant:"destructive"})}catch(e){l({title:"Hata",description:`Fatura oluşturma hatası: ${e.message}`,variant:"destructive"})}finally{c(!1)}},disabled:o,className:"flex-1 max-w-xs bg-blue-600 hover:bg-blue-700 text-white",children:[o?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):null,"Fatura Oluştur"]})]})]})}),m&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Fatura Oluşturma Süreci"}),i.jsx(Co,{variant:m.success?"default":"destructive",children:m.success?"Başarılı":"Hatalı"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ad,{value:y(),className:"w-full"}),i.jsxs("div",{className:"text-sm text-gray-500 text-center",children:[Math.round(y()),"% Tamamlandı"]})]}),i.jsx("div",{className:"space-y-3",children:m.steps.map(((e,t)=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[g(e),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.message}),e.data&&i.jsxs("div",{className:"text-sm text-gray-500",children:[e.data.contactId&&`Müşteri ID: ${e.data.contactId}`,e.data.invoiceId&&`Fatura ID: ${e.data.invoiceId}`]})]})]}),i.jsx(Co,{variant:f(e),children:"completed"===e.status?"Tamamlandı":"error"===e.status?"Hata":"in_progress"===e.status?"Devam Ediyor":"Bekliyor"})]},t)))}),m.success&&m.invoice&&i.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-green-800",children:"Fatura Başarıyla Oluşturuldu!"}),i.jsxs("div",{className:"text-sm text-green-600",children:["Fatura ID: ",(null==(s=null==(n=m.invoice)?void 0:n.data)?void 0:s.id)||"N/A"]})]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>{var e,t;const r=null==(t=null==(e=m.invoice)?void 0:e.data)?void 0:t.id;r&&window.open(`https://uygulama.parasut.com/550402/satislar/${r}`,"_blank")},children:[i.jsx(Hr,{className:"h-4 w-4 mr-2"}),"Paraşüt'te Görüntüle"]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[i.jsx(oo,{variant:"outline",onClick:b,children:"Kapat"}),(null==m?void 0:m.success)&&i.jsx(oo,{onClick:()=>v(),children:"Yeni Fatura Oluştur"})]})]})]})})},g8=()=>{const{toast:e}=at(),t=$e(),[r,a]=ze.useState("pending-orders"),[n,s]=ze.useState(""),[l,o]=ze.useState(!1),[c,d]=ze.useState(null),[u,m]=ze.useState(null),[h,p]=ze.useState(null),[x,g]=ze.useState(!1),[f,y]=ze.useState([]),[v,b]=ze.useState(!1),[j,k]=ze.useState(null),[w,N]=ze.useState({isProcessing:!1,currentIndex:0,total:0,success:0,failed:0,results:[]}),[_,S]=ze.useState(1),[C,T]=ze.useState(1),[O,P]=ze.useState(1),A=20,{data:E,isLoading:D}=qe({queryKey:["pending-orders",n,_],queryFn:async()=>{const{data:e}=await Wl.from("invoices").select("order_id").not("order_id","is",null),t=(null==e?void 0:e.map((e=>e.order_id)))||[];let r=Wl.from("orders").select("*",{count:"exact"}).order("created_at",{ascending:!1});t.length>0&&(r=r.not("id","in",`(${t.join(",")})`)),n&&(r=r.or(`order_number.ilike.%${n}%,customer_name.ilike.%${n}%,company_name.ilike.%${n}%`));const a=(_-1)*A,s=a+A-1;r=r.range(a,s);const{data:i,error:l,count:o}=await r;if(l)throw l;return{data:i,count:o||0}},enabled:"pending-orders"===r}),{data:M,isLoading:z}=qe({queryKey:["invoiced-orders",n,C],queryFn:async()=>{let e=Wl.from("invoices").select("\n          *,\n          orders(\n            order_number,\n            customer_name,\n            company_name,\n            total_amount,\n            tax_amount\n          )\n        ",{count:"exact"}).not("order_id","is",null).order("created_at",{ascending:!1});n&&(e=e.or(`invoice_number.ilike.%${n}%,orders.order_number.ilike.%${n}%`));const t=(C-1)*A,r=t+A-1;e=e.range(t,r);const{data:a,error:s,count:i}=await e;if(s)throw s;return{data:a,count:i||0}},enabled:"invoiced-orders"===r}),{data:R,isLoading:I}=qe({queryKey:["customer-invoices",n,O],queryFn:async()=>{const{data:e,error:t}=await Wl.rpc("get_customer_invoice_summary",{search_term:n||""});if(t)throw t;const r=e,a=(O-1)*A,s=a+A;return{data:r.slice(a,s),count:r.length}},enabled:"customer-invoices"===r}),{data:F,isLoading:B}=qe({queryKey:["customer-invoices-detail",null==h?void 0:h.customer_name,null==h?void 0:h.parasut_contact_id],queryFn:async()=>{if(!h)return null;const e=h.customer_name,t=h.company_name||h.customer_name,r=[];e&&r.push(Wl.from("orders").select("id").ilike("customer_name",`%${e}%`)),t&&t!==e&&r.push(Wl.from("orders").select("id").ilike("company_name",`%${t}%`));const a=await Promise.all(r),n=new Set;if(a.forEach((e=>{if(e.data&&e.data.forEach((e=>n.add(e.id))),e.error)throw e.error})),0===n.size)return[];const{data:s,error:i}=await Wl.from("invoices").select("\n          *,\n          orders(\n            order_number,\n            customer_name,\n            company_name,\n            total_amount,\n            tax_amount\n          )\n        ").in("order_id",Array.from(n)).order("created_at",{ascending:!1});if(i)throw i;return s},enabled:!!h&&x});Ke({mutationFn:async e=>{m(e.id);try{return await t8(e.id)}finally{m(null)}},onSuccess:()=>{e({title:"Başarılı",description:"Paraşüt faturası başarıyla oluşturuldu"}),t.invalidateQueries({queryKey:["pending-orders"]}),t.invalidateQueries({queryKey:["invoiced-orders"]})},onError:t=>{e({title:"Hata",description:`Paraşüt faturası oluşturulamadı: ${t.message}`,variant:"destructive"})}});const L=e=>{S(e)},q=e=>{T(e)},$=e=>{P(e)},K=e=>{s(e),S(1),T(1),P(1)},U=({currentPage:e,totalCount:t,onPageChange:r,itemsPerPage:a=20})=>{const n=Math.ceil(t/a);if(n<=1)return null;return i.jsxs("div",{className:"flex items-center justify-between px-2 py-4",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Toplam ",t," kayıttan ",(e-1)*a+1," - ",Math.min(e*a,t)," arası gösteriliyor"]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>r(1),disabled:1===e,children:i.jsx(_r,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>r(e-1),disabled:1===e,children:i.jsx(kr,{className:"h-4 w-4"})}),(()=>{const t=[];if(n<=5)for(let e=1;e<=n;e++)t.push(e);else if(e<=3){for(let e=1;e<=4;e++)t.push(e);t.push("..."),t.push(n)}else if(e>=n-2){t.push(1),t.push("...");for(let e=n-3;e<=n;e++)t.push(e)}else{t.push(1),t.push("...");for(let r=e-1;r<=e+1;r++)t.push(r);t.push("..."),t.push(n)}return t})().map(((t,a)=>i.jsx(oo,{variant:t===e?"default":"outline",size:"sm",onClick:()=>"number"==typeof t?r(t):null,disabled:"..."===t,className:"min-w-[40px]",children:t},a))),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>r(e+1),disabled:e===n,children:i.jsx(wr,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>r(n),disabled:e===n,children:i.jsx(Sr,{className:"h-4 w-4"})})]})]})},H=e=>{switch(e){case"draft":return i.jsx(Co,{variant:"secondary",children:"Taslak"});case"sent":return i.jsx(Co,{variant:"default",children:"Gönderildi"});case"paid":return i.jsx(Co,{variant:"default",className:"bg-green-500",children:"Ödendi"});case"overdue":return i.jsx(Co,{variant:"destructive",children:"Vadesi Geçti"});default:return i.jsx(Co,{variant:"outline",children:e})}},Y=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),V=({invoice:e})=>{var t;const r=(null==(t=e.orders)?void 0:t.total_amount)||0,a=e.total_amount||0,n=r-a;return i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"font-medium text-sm",children:[Y(r),i.jsx("span",{className:"text-xs text-gray-500 ml-1"})]}),i.jsxs("div",{className:"text-xm text-green-600",children:[Y(a),i.jsx("span",{className:"text-gray-500 ml-1"})]}),n>0&&i.jsx("div",{className:"text-xs text-blue-600",children:Y(n)})]})},G=()=>{var e,t;f.length===(null==(e=null==E?void 0:E.data)?void 0:e.length)?y([]):y((null==(t=null==E?void 0:E.data)?void 0:t.map((e=>e.id)))||[])},W=()=>{0!==f.length?(b(!0),k(null),N({isProcessing:!1,currentIndex:0,total:f.length,success:0,failed:0,results:[]})):e({title:"Uyarı",description:"Lütfen en az bir sipariş seçin.",variant:"destructive"})},Q=async e=>{k(e),await X("skip"===e)},X=async(r=!1)=>{var a;N((e=>({...e,isProcessing:!0})));const n=(null==(a=null==E?void 0:E.data)?void 0:a.filter((e=>f.includes(e.id))))||[],s=[],i=r?"Yerel Fatura":"Paraşüt Faturası";for(let t=0;t<n.length;t++){const a=n[t];N((e=>({...e,currentIndex:t+1})));try{e({title:`${i} Oluşturuluyor (${t+1}/${n.length})`,description:`${a.order_number} - ${a.customer_name||"Bilinmeyen Müşteri"}`});const l=await t8(a.id,r);l.success?(s.push({orderId:a.id,orderNumber:a.order_number,success:!0}),N((e=>({...e,success:e.success+1}))),e({title:"Başarılı!",description:`${a.order_number} için ${r?"yerel":"Paraşüt"} faturası oluşturuldu.`})):(s.push({orderId:a.id,orderNumber:a.order_number,success:!1,error:l.error||"Bilinmeyen hata"}),N((e=>({...e,failed:e.failed+1}))))}catch(c){s.push({orderId:a.id,orderNumber:a.order_number,success:!1,error:c.message||"Bilinmeyen hata"}),N((e=>({...e,failed:e.failed+1}))),e({title:"Hata",description:`${a.order_number}: ${c.message}`,variant:"destructive"})}t<n.length-1&&await new Promise((e=>setTimeout(e,1e3)))}N((e=>({...e,results:s,isProcessing:!1}))),t.invalidateQueries({queryKey:["pending-orders"]}),t.invalidateQueries({queryKey:["invoiced-orders"]});const l=s.filter((e=>e.success)).length,o=s.filter((e=>!e.success)).length;e({title:`Toplu ${r?"Yerel":"Paraşüt"} Fatura İşlemi Tamamlandı`,description:`${l} başarılı, ${o} başarısız`,variant:l>0?"default":"destructive"})},Z=Ke({mutationFn:async e=>{let t=null;e.parasut_invoice_id&&(t=await(async e=>{try{const r=await F6();let a=await q6(),n=await fetch($6(`${z6}/${r.companyId}/sales_invoices/${e}`),{method:"DELETE",headers:a});if(404===n.status)return{success:!0,alreadyDeleted:!0};if(401===n.status)try{if(R6=null,I6=null,await B6(),a=await q6(),n=await fetch($6(`${z6}/${r.companyId}/sales_invoices/${e}`),{method:"DELETE",headers:a}),404===n.status)return{success:!0,alreadyDeleted:!0}}catch(t){if(t instanceof Error){if(t.message.includes("COOKIE_EXPIRED"))throw new Error("⚠️ Cookie süresi dolmuş! Lütfen Admin Ayarlar > Entegrasyonlar bölümünden Paraşüt'te yeniden giriş yapıp yeni cookie verisi girin.");if(t.message.includes("COOKIE_DATA_MISSING"))throw new Error("⚠️ Cookie verisi bulunamadı! Lütfen Admin Ayarlar > Entegrasyonlar bölümünden Paraşüt cookie verisi girin.")}throw t}if(!n.ok)throw new Error(`Fatura silinemedi (${n.status}): ${n.statusText}`);return{success:!0,alreadyDeleted:!1}}catch(r){throw r}})(e.parasut_invoice_id));const{error:r}=await Wl.from("invoices").delete().eq("id",e.id);if(r)throw r;return{invoice:e,parasutResult:t}},onSuccess:r=>{const{invoice:a,parasutResult:n}=r;let s=`Fatura ${a.invoice_number} başarıyla silindi.`;(null==n?void 0:n.alreadyDeleted)?s+=" (Paraşüt'te zaten silinmişti, sadece yerel kayıt silindi)":n&&(s+=" (Hem Paraşüt'ten hem yerel kayıttan silindi)"),e({title:"Başarılı!",description:s}),t.invalidateQueries({queryKey:["invoiced-orders"]}),t.invalidateQueries({queryKey:["pending-orders"]}),t.invalidateQueries({queryKey:["customer-invoices"]})},onError:t=>{e({title:"Hata!",description:`Fatura silinirken hata oluştu: ${t.message}`,variant:"destructive"})}}),J=e=>{confirm(`${e.invoice_number} numaralı faturayı silmek istediğinize emin misiniz? Bu işlem geri alınamaz.`)&&Z.mutate(e)},ee=async t=>{if(t.parasut_invoice_id)try{const{data:e}=await Wl.from("system_settings").select("setting_key, setting_value").eq("setting_key","parasut_company_id").single(),r=`https://uygulama.parasut.com/${(null==e?void 0:e.setting_value)||"550402"}/satislar/${t.parasut_invoice_id}`;window.open(r,"_blank")}catch(r){const e=`https://uygulama.parasut.com/550402/satislar/${t.parasut_invoice_id}`;window.open(e,"_blank")}else e({title:"Uyarı",description:"Bu faturanın Paraşüt ID'si bulunamadı.",variant:"destructive"})};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Fatura Yönetimi"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sipariş bazlı fatura sistemi"})]})}),i.jsxs(Yo,{value:r,onValueChange:a,children:[i.jsxs(Vo,{className:"grid w-full grid-cols-3",children:[i.jsxs(Go,{value:"pending-orders",className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-4 w-4"}),"Fatura Kesilecek Siparişler"]}),i.jsxs(Go,{value:"invoiced-orders",className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"h-4 w-4"}),"Fatura Kesilen Siparişler"]}),i.jsxs(Go,{value:"customer-invoices",className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4"}),"Fatura Kesilen Yerler"]})]}),i.jsx(Wo,{value:"pending-orders",children:i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5"}),"Fatura Kesilecek Siparişler"]}),i.jsx(so,{children:"Henüz faturası kesilmemiş siparişler"})]}),i.jsxs(io,{children:[i.jsxs("div",{className:"mb-4 space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(co,{placeholder:"Sipariş numarası, müşteri adı ile arayın...",value:n,onChange:e=>K(e.target.value),className:"pl-10"})]}),f.length>0&&i.jsx(ro,{className:"border-blue-200 bg-blue-50",children:i.jsx(io,{className:"py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm font-medium",children:[f.length," sipariş seçildi"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{variant:"default",size:"sm",onClick:W,className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Toplu Fatura Kes"]}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>y([]),children:"Seçimi Temizle"})]})]})})})]}),D?i.jsx("div",{className:"text-center py-8",children:i.jsx(oa,{className:"h-8 w-8 animate-spin mx-auto"})}):i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{className:"w-12",children:i.jsx(D6,{checked:f.length===(null==(te=null==E?void 0:E.data)?void 0:te.length)&&(null==(re=null==E?void 0:E.data)?void 0:re.length)>0,onCheckedChange:G})}),i.jsx(M5,{children:"Sipariş No"}),i.jsx(M5,{children:"Müşteri"}),i.jsx(M5,{children:"Tutar"}),i.jsx(M5,{children:"Durum"}),i.jsx(M5,{children:"Tarih"}),i.jsx(M5,{children:"İşlemler"})]})}),i.jsx(E5,{children:null==(ae=null==E?void 0:E.data)?void 0:ae.map((e=>i.jsxs(D5,{children:[i.jsx(z5,{children:i.jsx(D6,{checked:f.includes(e.id),onCheckedChange:()=>{return t=e.id,void y((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}})}),i.jsx(z5,{className:"font-medium",children:e.order_number}),i.jsx(z5,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.company_name||e.customer_name}),i.jsx("div",{className:"text-sm text-gray-500",children:e.customer_phone})]})}),i.jsx(z5,{children:Y(e.total_amount)}),i.jsx(z5,{children:i.jsx(Co,{variant:"outline",children:e.status})}),i.jsx(z5,{children:XC(new Date(e.created_at),"dd MMM yyyy",{locale:ZT})}),i.jsx(z5,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{size:"sm",variant:"outline",onClick:()=>window.open(`/admin/orders/${e.id}`,"_blank"),className:"text-white-600 hover:text-gray-700",children:[i.jsx(Vr,{className:"h-4 w-4 mr-1"}),"Görüntüle"]}),i.jsxs(oo,{size:"sm",onClick:()=>(e=>{d(e),o(!0)})(e),disabled:u===e.id,className:"bg-blue-600 hover:bg-blue-700",children:[u===e.id?i.jsx(oa,{className:"h-4 w-4 mr-1 animate-spin"}):i.jsx(bn,{className:"h-4 w-4 mr-1"}),"Paraşüt Fatura Kes"]})]})})]},e.id)))})]}),i.jsx(U,{currentPage:_,totalCount:(null==E?void 0:E.count)||0,onPageChange:L})]})]})}),i.jsx(Wo,{value:"invoiced-orders",children:(()=>{var e;return i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"h-5 w-5"}),"Fatura Kesilen Siparişler"]}),i.jsx(so,{children:"Faturası kesilmiş siparişler ve fatura detayları"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(co,{placeholder:"Fatura numarası, sipariş numarası ile arayın...",value:n,onChange:e=>K(e.target.value),className:"pl-10"})]})}),z?i.jsx("div",{className:"text-center py-8",children:i.jsx(oa,{className:"h-8 w-8 animate-spin mx-auto"})}):i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Fatura No"}),i.jsx(M5,{children:"Sipariş No"}),i.jsx(M5,{children:"Müşteri"}),i.jsx(M5,{children:"Tutar"}),i.jsx(M5,{children:"Durum"}),i.jsx(M5,{children:"Tarih"}),i.jsx(M5,{children:"İşlemler"})]})}),i.jsx(E5,{children:null==(e=null==M?void 0:M.data)?void 0:e.map((e=>{var t,r,a;return i.jsxs(D5,{children:[i.jsx(z5,{className:"font-medium",children:e.invoice_number}),i.jsx(z5,{children:null==(t=e.orders)?void 0:t.order_number}),i.jsx(z5,{children:i.jsx("div",{className:"font-medium",children:(null==(r=e.orders)?void 0:r.company_name)||(null==(a=e.orders)?void 0:a.customer_name)})}),i.jsx(z5,{children:i.jsx(V,{invoice:e})}),i.jsx(z5,{children:H(e.status)}),i.jsx(z5,{children:XC(new Date(e.created_at),"dd MMM yyyy",{locale:ZT})}),i.jsx(z5,{children:i.jsxs("div",{className:"flex gap-2",children:[e.parasut_invoice_id&&i.jsxs(oo,{size:"sm",variant:"outline",onClick:()=>ee(e),className:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300",children:[i.jsx(Hr,{className:"h-4 w-4 mr-1"}),"Paraşüt"]}),i.jsxs(oo,{size:"sm",variant:"outline",onClick:()=>J(e),disabled:Z.isPending,className:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300",children:[Z.isPending?i.jsx(oa,{className:"h-4 w-4 mr-1 animate-spin"}):i.jsx(en,{className:"h-4 w-4 mr-1"}),"Sil"]})]})})]},e.id)}))})]}),i.jsx(U,{currentPage:C,totalCount:(null==M?void 0:M.count)||0,onPageChange:q})]})]})})()}),i.jsx(Wo,{value:"customer-invoices",children:(()=>{var e;return i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-5 w-5"}),"Fatura Kesilen Yerler"]}),i.jsx(so,{children:"Müşteri bazında fatura özeti ve geçmişi"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(co,{placeholder:"Müşteri adı ile arayın...",value:n,onChange:e=>K(e.target.value),className:"pl-10"})]})}),I?i.jsx("div",{className:"text-center py-8",children:i.jsx(oa,{className:"h-8 w-8 animate-spin mx-auto"})}):i.jsx("div",{className:"grid gap-4",children:null==(e=null==R?void 0:R.data)?void 0:e.map(((e,t)=>i.jsx(ro,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>(e=>{p(e),g(!0)})(e),children:i.jsx(io,{className:"pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:e.company_name||e.customer_name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[e.invoice_count," adet fatura"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-semibold",children:Y(e.total_amount)}),i.jsxs(Co,{variant:"outline",children:[i.jsx(Ea,{className:"h-3 w-3 mr-1"}),"Toplam"]})]})]})})},t)))}),i.jsx(U,{currentPage:O,totalCount:(null==R?void 0:R.count)||0,onPageChange:$})]})]})})()})]}),i.jsx(x8,{isOpen:l,onClose:()=>o(!1),order:c,onInvoiceCreated:()=>{t.invalidateQueries({queryKey:["pending-orders"]}),t.invalidateQueries({queryKey:["invoiced-orders"]}),o(!1),d(null)}}),i.jsx(sd,{open:v,onOpenChange:()=>{},children:i.jsxs(cd,{className:"max-w-md",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5"}),"Toplu Fatura Oluşturma"]}),i.jsxs(hd,{children:[f.length," sipariş için fatura oluşturmak istiyor musunuz?"]})]}),!w.isProcessing&&null===j&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center py-4",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Fatura Oluşturma Seçenekleri"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bu siparişler için nasıl devam etmek istiyorsunuz?"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:"outline",onClick:()=>Q("skip"),className:"flex-1",children:"Yerel Fatura Kes"}),i.jsx(oo,{variant:"default",onClick:()=>Q("create"),className:"flex-1 bg-green-600 hover:bg-green-700",children:"Paraşüt Faturası Oluştur"})]})]}),w.isProcessing&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx(oa,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),i.jsx("h3",{className:"font-semibold",children:"Faturalar Oluşturuluyor..."}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[w.currentIndex," / ",w.total]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{children:["Başarılı: ",w.success]}),i.jsxs("span",{children:["Başarısız: ",w.failed]})]}),i.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:w.currentIndex/w.total*100+"%"}})})]})]}),!w.isProcessing&&w.results.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-8 w-8 text-green-500 mx-auto mb-4 flex items-center justify-center",children:"✅"}),i.jsx("h3",{className:"font-semibold",children:"Toplu Fatura İşlemi Tamamlandı!"}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[w.success," başarılı, ",w.failed," başarısız"]})]}),w.failed>0&&i.jsxs("div",{className:"max-h-40 overflow-y-auto border rounded p-2",children:[i.jsx("h4",{className:"font-medium text-sm mb-2",children:"Başarısız Faturalar:"}),w.results.filter((e=>!e.success)).map((e=>i.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 mb-1",children:[e.orderNumber,": ",e.error]},e.orderId)))]}),i.jsx(oo,{variant:"outline",onClick:()=>{b(!1),k(null),N({isProcessing:!1,currentIndex:0,total:0,success:0,failed:0,results:[]}),y([])},className:"w-full",children:"Kapat"})]})]})}),i.jsx(sd,{open:x,onOpenChange:()=>{g(!1),p(null)},children:i.jsxs(cd,{className:"max-w-6xl max-h-[80vh] overflow-y-auto",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-5 w-5"}),(null==h?void 0:h.company_name)||(null==h?void 0:h.customer_name)," - Faturalar"]}),i.jsx(hd,{children:"Bu müşterinin tüm faturalarını görüntüleyin ve yönetin."})]}),B?i.jsx("div",{className:"text-center py-8",children:i.jsx(oa,{className:"h-8 w-8 animate-spin mx-auto"})}):i.jsx("div",{className:"space-y-4",children:F&&F.length>0?i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Fatura No"}),i.jsx(M5,{children:"Sipariş No"}),i.jsx(M5,{children:"Tutar"}),i.jsx(M5,{children:"Durum"}),i.jsx(M5,{children:"Tarih"}),i.jsx(M5,{children:"İşlemler"})]})}),i.jsx(E5,{children:F.map((e=>{var t;return i.jsxs(D5,{children:[i.jsx(z5,{className:"font-medium",children:e.invoice_number}),i.jsx(z5,{children:null==(t=e.orders)?void 0:t.order_number}),i.jsx(z5,{children:i.jsx(V,{invoice:e})}),i.jsx(z5,{children:H(e.status)}),i.jsx(z5,{children:XC(new Date(e.created_at),"dd MMM yyyy",{locale:ZT})}),i.jsx(z5,{children:i.jsxs("div",{className:"flex gap-2",children:[e.parasut_invoice_id&&i.jsxs(oo,{size:"sm",variant:"outline",onClick:()=>ee(e),className:"text-blue-600 hover:text-blue-700 border-blue-200 hover:border-blue-300",children:[i.jsx(Hr,{className:"h-4 w-4 mr-1"}),"Paraşüt"]}),i.jsxs(oo,{size:"sm",variant:"outline",onClick:()=>J(e),disabled:Z.isPending,className:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300",children:[Z.isPending?i.jsx(oa,{className:"h-4 w-4 mr-1 animate-spin"}):i.jsx(en,{className:"h-4 w-4 mr-1"}),"Sil"]})]})})]},e.id)}))})]}):i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Bu müşterinin faturası bulunmamaktadır."})})]})})]});var te,re,ae},f8=()=>qe({queryKey:["ready-stock-products"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("products").select("\n          *,\n          product_variations(*)\n        ").eq("product_type","ready_stock").eq("status","active").eq("is_additional_product",!1);if(t)throw t;const r=[];return null==e||e.forEach((e=>{var t;null==(t=e.product_variations)||t.forEach((t=>{t.stock_quantity>0&&r.push({variation_id:t.id,id:e.id,name:e.name,code:e.code,category:e.category,brand:e.brand||"",color:t.color,size:t.size,sku:t.sku,stock_quantity:t.stock_quantity,final_price:t.variation_price||e.base_price,images:e.images?[e.images]:[],shorts_price:e.shorts_price||0,socks_price:e.socks_price||0,goalkeeper_price:e.goalkeeper_price||0})}))})),r}}),y8=()=>qe({queryKey:["design-products"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("products").select("\n          *,\n          product_variations(*)\n        ").eq("is_design_product",!0).eq("status","active").eq("is_additional_product",!1);if(t)throw t;const r=[];return null==e||e.forEach((e=>{var t;null==(t=e.product_variations)||t.forEach((t=>{t.stock_quantity>0&&r.push({variation_id:t.id,id:e.id,name:e.name,code:e.code,category:e.category,brand:e.brand||"",color:t.color,size:t.size,sku:t.sku,stock_quantity:t.stock_quantity,final_price:t.variation_price||e.design_base_price||e.base_price,images:e.images?[e.images]:[],shorts_price:e.shorts_price||0,socks_price:e.socks_price||0,goalkeeper_price:e.goalkeeper_price||0})}))})),r}});function v8(){const e=u8(),t=hl(),{data:r=[],isLoading:a,error:n}=qe({queryKey:["products"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("products").select("\n          *,\n          product_variations(*)\n        ").order("created_at",{ascending:!1});if(t)throw t;return e}}),{data:s=[],isLoading:l,error:o}=qe({queryKey:["print-regions"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("print_regions").select("*").order("display_order",{ascending:!0}).order("name",{ascending:!0});if(t)throw t;return e}}),c=(()=>{const e=$e();return Ke({mutationFn:async({id:e,updates:t})=>{const{data:r,error:a}=await Wl.from("print_regions").update(t).eq("id",e).select().single();if(a)throw a;return r},onSuccess:()=>{e.invalidateQueries({queryKey:["print-regions"]}),Fs.success("Baskı bölgesi başarıyla güncellendi")},onError:e=>{Fs.error("Baskı bölgesi güncellenirken hata oluştu")}})})(),d=(()=>{const e=$e();return Ke({mutationFn:async e=>{const{error:t}=await Wl.from("print_regions").delete().eq("id",e);if(t)throw t},onSuccess:()=>{e.invalidateQueries({queryKey:["print-regions"]}),Fs.success("Baskı bölgesi başarıyla silindi")},onError:e=>{Fs.error("Baskı bölgesi silinirken hata oluştu")}})})(),u=(()=>{const e=$e();return Ke({mutationFn:async e=>{const{data:t,error:r}=await Wl.from("print_regions").insert([e]).select().single();if(r)throw r;return t},onSuccess:()=>{e.invalidateQueries({queryKey:["print-regions"]}),Fs.success("Baskı bölgesi başarıyla eklendi")},onError:e=>{Fs.error("Baskı bölgesi eklenirken hata oluştu")}})})(),m=(()=>{const e=$e();return Ke({mutationFn:async e=>{const{error:t}=await Wl.from("product_variations").delete().eq("product_id",e);if(t)throw t;const{error:r}=await Wl.from("products").delete().eq("id",e);if(r)throw r;return{success:!0}},onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["ready-stock-products"]}),e.invalidateQueries({queryKey:["design-products"]}),e.invalidateQueries({queryKey:["promotion-products"]}),e.invalidateQueries({queryKey:["additional-products"]})}})})(),h=(()=>{const e=$e();return Ke({mutationFn:async e=>{const{data:t,error:r}=await Wl.from("products").insert({name:e.name,code:e.code,category:e.category,brand:e.brand,description:e.description,base_price:e.base_price,discount_price:e.discount_price,images:e.images,status:e.status||"active",design_base_price:e.design_base_price}).select().single();if(r)throw r;if(e.product_variations&&e.product_variations.length>0){const r=e.product_variations.map((e=>({product_id:t.id,color:e.color,size:e.size,sku:e.sku,stock_quantity:e.stock_quantity,final_price:e.final_price,shorts_price:e.shorts_price,socks_price:e.socks_price,goalkeeper_price:e.goalkeeper_price,is_lined:e.is_lined,is_mesh:e.is_mesh}))),{error:a}=await Wl.from("product_variations").insert(r);if(a)throw a}return t},onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),e.invalidateQueries({queryKey:["ready-stock-products"]}),e.invalidateQueries({queryKey:["design-products"]}),e.invalidateQueries({queryKey:["promotion-products"]}),e.invalidateQueries({queryKey:["additional-products"]})},onError:e=>{}})})(),[p,x]=ze.useState(""),[g,f]=ze.useState(""),[y,v]=ze.useState(""),[b,j]=ze.useState(null),[k,w]=ze.useState({name:"",description:"",base_price:0,display_order:0,status:"active"}),[N,_]=ze.useState(!1),[S,C]=ze.useState({name:"",description:"",base_price:0,display_order:0,status:"active"}),T=t.pathname.includes("/products/additional")?"additional":t.pathname.includes("/products/design")?"design":t.pathname.includes("/products/promotion")?"promotion":t.pathname.includes("/products/print-regions")?"print-regions":"/admin/products"===t.pathname?"main":"all",O=(()=>{switch(T){case"main":return{title:"Ana Ürünler",description:"Hazır Forma kategorisindeki ürünleri yönetin"};case"additional":return{title:"Ek Ürünler",description:"Ek Ürün kategorisindeki ürünleri yönetin"};case"design":return{title:"Özel Tasarım Ürünleri",description:"Özel tasarım ürünlerini yönetin"};case"promotion":return{title:"Promosyon Ürünleri",description:"Promosyon ürünlerini yönetin"};case"print-regions":return{title:"Baskı Bölgeleri",description:"Baskı bölgelerini yönetin ve düzenleyin"};default:return{title:"Ürün Yönetimi",description:"Tüm ürünlerinizi yönetin ve düzenleyin"}}})(),P=e=>0===e?"Tükendi":e<=10?"Az Kaldı":"Stokta Var",A=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";case"inactive":default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/50 dark:text-gray-300";case"draft":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},E=e=>{switch(e){case"active":return"Yayında";case"inactive":return"Pasif";case"draft":return"Taslak";default:return e}},D=r.filter((e=>{const t=e.name.toLowerCase().includes(p.toLowerCase())||e.code.toLowerCase().includes(p.toLowerCase()),r=!g||"all"===g||e.category===g,a=!y||"all"===y||e.status===y;let n=!0;return"main"===T?n="Hazır Forma"===e.category:"additional"===T?n="Ek Ürün"===e.category:"design"===T?n="Özel Tasarım"===e.category:"promotion"===T&&(n="Promosyon"===e.category),t&&r&&a&&n})),M=s.filter((e=>{const t=e.name.toLowerCase().includes(p.toLowerCase())||e.description&&e.description.toLowerCase().includes(p.toLowerCase()),r=!y||"all"===y||e.status===y;return t&&r})),z=async()=>{if(b)try{await c.mutateAsync({id:b,updates:k}),j(null),w({name:"",description:"",base_price:0,display_order:0,status:"active"})}catch(e){}},R=()=>{j(null),w({name:"",description:"",base_price:0,display_order:0,status:"active"})},I="print-regions"===T?o:n;return("print-regions"===T?l:a)?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):I?i.jsx("div",{className:"text-center py-8",children:i.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["print-regions"===T?"Baskı bölgeleri":"Ürünler"," yüklenirken bir hata oluştu: ",I.message]})}):i.jsxs("div",{className:"space-y-6 p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:O.title}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:O.description})]}),"print-regions"!==T&&i.jsxs("button",{onClick:()=>e("/admin/products/new"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[i.jsx(Pa,{className:"h-4 w-4"}),"Yeni Ürün Ekle"]}),"print-regions"===T&&i.jsxs("button",{onClick:()=>{_(!0),C({name:"",description:"",base_price:0,display_order:0,status:"active"})},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[i.jsx(Pa,{className:"h-4 w-4"}),"Yeni Baskı Bölgesi Ekle"]})]}),"main"===T&&i.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-0 shadow-lg rounded-lg",children:i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("button",{onClick:()=>e("/admin/products"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("/admin/products"===t.pathname?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:"Hazır Formalar"}),i.jsx("button",{onClick:()=>e("/admin/products/design"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("/admin/products/design"===t.pathname?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:"Özel Tasarımlar"}),i.jsx("button",{onClick:()=>e("/admin/products/promotion"),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors "+("/admin/products/promotion"===t.pathname?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:"Promosyon Formalar"})]})})}),i.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-0 shadow-lg rounded-lg",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[i.jsx(Xr,{className:"h-5 w-5"}),"Filtreler"]})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx("input",{type:"text",placeholder:"print-regions"===T?"Baskı bölgesi adı ara...":"Ürün adı veya kodu ara...",value:p,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),"print-regions"!==T&&i.jsxs("select",{value:g,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Kategori seçin"}),i.jsx("option",{value:"all",children:"Tüm Kategoriler"}),"main"===T&&i.jsx("option",{value:"Hazır Forma",children:"Hazır Forma"}),"additional"===T&&i.jsx("option",{value:"Ek Ürün",children:"Ek Ürün"}),"design"===T&&i.jsx("option",{value:"Özel Tasarım",children:"Özel Tasarım"}),"promotion"===T&&i.jsx("option",{value:"Promosyon",children:"Promosyon"}),"all"===T&&i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"Hazır Forma",children:"Hazır Forma"}),i.jsx("option",{value:"Özel Tasarım",children:"Özel Tasarım"}),i.jsx("option",{value:"Promosyon",children:"Promosyon"}),i.jsx("option",{value:"Ek Ürün",children:"Ek Ürün"}),i.jsx("option",{value:"Forma",children:"Forma"}),i.jsx("option",{value:"Şort",children:"Şort"}),i.jsx("option",{value:"Aksesuar",children:"Aksesuar"})]})]}),i.jsxs("select",{value:y,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Durum seçin"}),i.jsx("option",{value:"all",children:"Tüm Durumlar"}),i.jsx("option",{value:"active",children:"Yayında"}),i.jsx("option",{value:"inactive",children:"Pasif"}),i.jsx("option",{value:"draft",children:"Taslak"})]}),i.jsx("button",{onClick:()=>{x(""),f(""),v("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Filtreleri Temizle"})]})})]}),i.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-0 shadow-lg rounded-lg",children:[i.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:["print-regions"===T?i.jsx(Za,{className:"h-5 w-5"}):i.jsx(ba,{className:"h-5 w-5"}),O.title," (","print-regions"===T?M.length:D.length,")"]})}),i.jsx("div",{className:"p-6",children:"print-regions"===T?0===M.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Za,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Baskı bölgesi bulunamadı"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Henüz baskı bölgesi eklenmemiş veya aradığınız kriterlere uygun baskı bölgesi bulunmuyor."})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Bölge Adı"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Açıklama"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Temel Fiyat"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Sıralama"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Durum"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"İşlemler"})]})}),i.jsxs("tbody",{children:[N&&i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 bg-blue-50 dark:bg-blue-900/20",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("input",{type:"text",placeholder:"Bölge adı",value:S.name,onChange:e=>C({...S,name:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("input",{type:"text",placeholder:"Açıklama",value:S.description,onChange:e=>C({...S,description:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("input",{type:"number",step:"0.01",placeholder:"Fiyat",value:S.base_price,onChange:e=>C({...S,base_price:parseFloat(e.target.value)||0}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("input",{type:"number",placeholder:"Sıralama",value:S.display_order,onChange:e=>C({...S,display_order:parseInt(e.target.value)||0}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("select",{value:S.status,onChange:e=>C({...S,status:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[i.jsx("option",{value:"active",children:"Yayında"}),i.jsx("option",{value:"inactive",children:"Pasif"}),i.jsx("option",{value:"draft",children:"Taslak"})]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:async()=>{if(S.name.trim())try{await u.mutateAsync(S),_(!1),C({name:"",description:"",base_price:0,display_order:0,status:"active"})}catch(e){}},disabled:u.isPending||!S.name.trim(),className:"p-2 text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Ekle",children:u.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin"}):"✓"}),i.jsx("button",{onClick:()=>{_(!1),C({name:"",description:"",base_price:0,display_order:0,status:"active"})},className:"p-2 text-gray-600 hover:text-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/20 rounded-lg transition-colors",title:"İptal",children:"✕"})]})})]}),M.map((e=>i.jsx("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:b===e.id?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("input",{type:"text",value:k.name,onChange:e=>w({...k,name:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("input",{type:"text",value:k.description,onChange:e=>w({...k,description:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("input",{type:"number",step:"0.01",value:k.base_price,onChange:e=>w({...k,base_price:parseFloat(e.target.value)||0}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("input",{type:"number",value:k.display_order,onChange:e=>w({...k,display_order:parseInt(e.target.value)||0}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("select",{value:k.status,onChange:e=>w({...k,status:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[i.jsx("option",{value:"active",children:"Yayında"}),i.jsx("option",{value:"inactive",children:"Pasif"}),i.jsx("option",{value:"draft",children:"Taslak"})]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:z,disabled:c.isPending,className:"p-2 text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Kaydet",children:c.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin"}):"✓"}),i.jsx("button",{onClick:R,className:"p-2 text-gray-600 hover:text-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900/20 rounded-lg transition-colors",title:"İptal",children:"✕"})]})})]}):i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:e.name}),i.jsx("td",{className:"py-3 px-4 text-gray-600 dark:text-gray-400",children:e.description||"-"}),i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:["₺",e.base_price.toFixed(2)]}),i.jsx("td",{className:"py-3 px-4 text-gray-600 dark:text-gray-400",children:e.display_order||"-"}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A(e.status||"active")}`,children:E(e.status||"active")})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>(e=>{j(e.id),w({name:e.name,description:e.description||"",base_price:e.base_price,display_order:e.display_order||0,status:e.status||"active"})})(e),className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Baskı bölgesini düzenle",children:i.jsx(Va,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Bu baskı bölgesini silmek istediğinizden emin misiniz?"))try{await d.mutateAsync(e)}catch(t){}})(e.id),disabled:d.isPending,className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Baskı bölgesini sil",children:d.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin"}):i.jsx(en,{className:"h-4 w-4"})})]})})]})},e.id)))]})]})}):0===D.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ba,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Ürün bulunamadı"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Henüz ürün eklenmemiş veya aradığınız kriterlere uygun ürün bulunmuyor."}),i.jsxs("button",{onClick:()=>e("/admin/products/new"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 mx-auto transition-colors",children:[i.jsx(Pa,{className:"h-4 w-4"}),"İlk Ürünü Ekle"]})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Resim"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Ürün Adı"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Ürün Kodu"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Kategori"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Fiyat"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Stok Durumu"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"Durum"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:"İşlemler"})]})}),i.jsx("tbody",{children:D.map((t=>{const r=(null==(a=t.product_variations||[])?void 0:a.reduce(((e,t)=>e+(t.stock_quantity||0)),0))||0;var a,n;return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[i.jsx("td",{className:"py-3 px-4",children:t.images?i.jsx("img",{src:t.images,alt:t.name,className:"w-12 h-12 object-cover rounded-lg border"}):i.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-lg border flex items-center justify-center",children:i.jsx(ba,{className:"h-6 w-6 text-gray-400"})})}),i.jsx("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:t.name}),i.jsx("td",{className:"py-3 px-4 text-gray-600 dark:text-gray-400",children:t.code}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 border",children:t.category})}),i.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:["₺",t.discount_price?t.discount_price.toFixed(2):t.base_price.toFixed(2)]}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(n=r,0===n?"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":n<=10?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300":"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"),children:P(r)}),i.jsxs("span",{className:"text-xs text-gray-500",children:[r," adet"]})]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A(t.status)}`,children:E(t.status)})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>e(`/admin/products/${t.id}`),className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Ürünü görüntüle",children:i.jsx(Vr,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>e(`/admin/products/${t.id}/edit`),className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Ürünü düzenle",children:i.jsx(Va,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>(async e=>{const t=prompt(`"${e.name}" ürününün kopyası için yeni ürün adını girin:`,`${e.name} - Kopya`);if(t&&""!==t.trim())try{const r="SKU"+Math.random().toString(36).substr(2,8).toUpperCase(),a={...e,name:t.trim(),code:r,id:void 0,created_at:void 0,updated_at:void 0};e.product_variations&&e.product_variations.length>0&&(a.product_variations=e.product_variations.map((e=>({...e,id:void 0,product_id:void 0,sku:r+"-"+e.color+"-"+e.size,created_at:void 0,updated_at:void 0})))),await h.mutateAsync(a),alert(`Ürün "${t}" başarıyla kopyalandı! SKU: ${r}`)}catch(r){alert("Ürün kopyalanırken bir hata oluştu. Lütfen tekrar deneyin.")}})(t),className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Ürünü kopyala",children:i.jsx(Rr,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>(async(e,t)=>{if(window.confirm(`"${t}" ürününü silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.`))try{await m.mutateAsync(e)}catch(r){alert("Ürün silinirken bir hata oluştu. Lütfen tekrar deneyin.")}})(t.id,t.name),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Ürünü sil",children:i.jsx(en,{className:"h-4 w-4"})})]})})]},t.id)}))})]})})})]})]})}const b8=()=>{var e,t;const{id:r}=fl(),a=u8(),{data:n,isLoading:s,error:l}=qe({queryKey:["product",r],queryFn:async()=>{if(!r||!gs(r))throw new Error("Invalid product ID format");const{data:e,error:t}=await Wl.from("products").select("\n          *,\n          product_variations (*)\n        ").eq("id",r).single();if(t)throw t;return e},enabled:!!r&&gs(r||"")}),o=e=>0===e?"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":e<=10?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300":"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";if(!r||!gs(r))return i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-red-600 dark:text-red-400",children:"Geçersiz ürün ID formatı."}),i.jsxs(oo,{onClick:()=>a("/admin/products"),className:"mt-4",children:[i.jsx(ar,{className:"h-4 w-4 mr-2"}),"Ürünlere Dön"]})]});if(s)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})});if(l||!n)return i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-red-600 dark:text-red-400",children:"Ürün yüklenirken bir hata oluştu veya ürün bulunamadı."}),i.jsxs(oo,{onClick:()=>a("/admin/products"),className:"mt-4",children:[i.jsx(ar,{className:"h-4 w-4 mr-2"}),"Ürünlere Dön"]})]});const c=(null==(d=n.product_variations||[])?void 0:d.reduce(((e,t)=>e+(t.stock_quantity||0)),0))||0;var d,u;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(oo,{variant:"ghost",onClick:()=>a("/admin/products"),children:[i.jsx(ar,{className:"h-4 w-4 mr-2"}),"Geri"]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:n.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Ürün Detayları"})]}),i.jsxs(oo,{onClick:()=>a(`/admin/products/${n.id}/edit`),children:[i.jsx(Va,{className:"h-4 w-4 mr-2"}),"Düzenle"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Temel Bilgiler"})}),i.jsxs(io,{className:"space-y-4",children:[n.images&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Ürün Resmi"}),i.jsx("div",{className:"mt-2",children:i.jsx("img",{src:n.images,alt:n.name,className:"w-48 h-48 object-cover rounded-lg border shadow-sm"})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Ürün Adı"}),i.jsx("p",{className:"text-lg font-medium",children:n.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Ürün Kodu"}),i.jsx("p",{className:"text-lg",children:n.code})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Kategori"}),i.jsx(Co,{variant:"outline",children:n.category})]}),n.brand&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Marka"}),i.jsx("p",{className:"text-lg",children:n.brand})]}),n.description&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Açıklama"}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:n.description})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Fiyat ve Stok Bilgileri"})}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Birim Fiyatı"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₺",null==(e=n.base_price)?void 0:e.toFixed(2)]})]}),n.discount_price&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"İndirimli Fiyat"}),i.jsxs("p",{className:"text-xl font-bold text-red-600",children:["₺",n.discount_price.toFixed(2)]})]}),n.shorts_price&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Şort Fiyatı"}),i.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["₺",Number(n.shorts_price).toFixed(2)]})]}),n.socks_price&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Çorap Fiyatı"}),i.jsxs("p",{className:"text-xl font-bold text-purple-600",children:["₺",Number(n.socks_price).toFixed(2)]})]}),n.goalkeeper_price&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Kaleci Fiyatı"}),i.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["₺",Number(n.goalkeeper_price).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Vergi Oranı"}),i.jsxs("p",{className:"text-lg",children:["%",n.tax_rate]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Toplam Stok"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Co,{className:o(c),children:(u=c,0===u?"Tükendi":u<=10?"Az Kaldı":"Stokta Var")}),i.jsxs("span",{className:"text-lg font-medium",children:[c," adet"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Durum"}),i.jsx(Co,{variant:"active"===n.status?"default":"secondary",children:"active"===n.status?"Yayında":"inactive"===n.status?"Pasif":"Taslak"})]})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5"}),"Ürün Varyasyonları (",(null==(t=n.product_variations)?void 0:t.length)||0,")"]})}),i.jsx(io,{children:n.product_variations&&n.product_variations.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left py-3 px-4",children:"Renk"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Beden"}),i.jsx("th",{className:"text-left py-3 px-4",children:"SKU"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Stok"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Özel Fiyat"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Astarlı"}),i.jsx("th",{className:"text-left py-3 px-4",children:"Fileli"})]})}),i.jsx("tbody",{children:n.product_variations.map((e=>i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[i.jsx("td",{className:"py-3 px-4",children:e.color}),i.jsx("td",{className:"py-3 px-4",children:e.size}),i.jsx("td",{className:"py-3 px-4 font-mono text-sm",children:e.sku}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs(Co,{className:o(e.stock_quantity),children:[e.stock_quantity," adet"]})}),i.jsx("td",{className:"py-3 px-4",children:e.variation_price?`₺${e.variation_price.toFixed(2)}`:"-"}),i.jsx("td",{className:"py-3 px-4",children:i.jsx(Co,{variant:e.is_lined?"default":"secondary",children:e.is_lined?"Astarlı":"Astarsız"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx(Co,{variant:e.is_mesh?"default":"secondary",children:e.is_mesh?"Fileli":"Düz"})})]},e.id)))})]})}):i.jsx("p",{className:"text-gray-500 text-center py-8",children:"Bu ürün için henüz varyasyon eklenmemiş."})})]})]})};var j8="Switch",[k8,w8]=n(j8),[N8,_8]=k8(j8),S8=ze.forwardRef(((e,t)=>{const{__scopeSwitch:r,name:a,checked:n,defaultChecked:l,required:c,disabled:u,value:m="on",onCheckedChange:p,form:x,...g}=e,[f,y]=ze.useState(null),v=s(t,(e=>y(e))),b=ze.useRef(!1),j=!f||(x||!!f.closest("form")),[k=!1,w]=d({prop:n,defaultProp:l,onChange:p});return i.jsxs(N8,{scope:r,checked:k,disabled:u,children:[i.jsx(o.button,{type:"button",role:"switch","aria-checked":k,"aria-required":c,"data-state":P8(k),"data-disabled":u?"":void 0,disabled:u,value:m,...g,ref:v,onClick:h(e.onClick,(e=>{w((e=>!e)),j&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())}))}),j&&i.jsx(O8,{control:f,bubbles:!b.current,name:a,value:m,checked:k,required:c,disabled:u,form:x,style:{transform:"translateX(-100%)"}})]})}));S8.displayName=j8;var C8="SwitchThumb",T8=ze.forwardRef(((e,t)=>{const{__scopeSwitch:r,...a}=e,n=_8(C8,r);return i.jsx(o.span,{"data-state":P8(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:t})}));T8.displayName=C8;var O8=e=>{const{control:t,checked:r,bubbles:a=!0,...n}=e,s=ze.useRef(null),l=ke(r),o=we(t);return ze.useEffect((()=>{const e=s.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==r&&n){const t=new Event("click",{bubbles:a});n.call(e,r),e.dispatchEvent(t)}}),[l,r,a]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:s,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function P8(e){return e?"checked":"unchecked"}var A8=S8,E8=T8;const D8=ze.forwardRef((({className:e,...t},r)=>i.jsx(A8,{className:xs("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:i.jsx(E8,{className:xs("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})));D8.displayName=A8.displayName;const M8={DEKONT:"dekont",BASKILAR:"baskilar",URUNLER:"urunler"};class z8 extends Error{constructor(e,t){super(e),this.code=t,this.name="FileUploadError"}}async function R8(e,t,r){try{if(!e)throw new z8("Dosya gerekli");if(!Object.values(M8).includes(t))throw new z8("Geçersiz bucket adı");const a=e.name.split(".").pop(),n=r||`${Date.now()}-${Math.random().toString(36).substring(2)}.${a}`,s=new J_({region:"auto",endpoint:"https://d94a4504810cc7822034164a9de127f5.r2.cloudflarestorage.com",credentials:{accessKeyId:"ea2c75e2c09e7f26bb23fdac637b7b3b",secretAccessKey:"87a01b4cca85b01814fd553f9c8f4bca698154a83fdedd4de29b848996e34782"}}),i=await e.arrayBuffer(),l=new Uint8Array(i),o=new aS({Bucket:t,Key:n,Body:l,ContentType:e.type,ContentLength:e.size});let c;if(await s.send(o),t===M8.DEKONT){if(c="https://dekont.kilovermeyontemleri.online",!c)throw new z8("Cloudflare R2 dekont URL bulunamadı. Environment variables kontrol edin.")}else if(t===M8.URUNLER){if(c="https://urunler.kilovermeyontemleri.online",!c)throw new z8("Cloudflare R2 ürün URL bulunamadı. Environment variables kontrol edin.")}else if(c="https://baskilar.kilovermeyontemleri.online",!c)throw new z8("Cloudflare R2 public URL bulunamadı. Environment variables kontrol edin.");return{success:!0,data:{key:n,url:`${c}/${encodeURIComponent(n)}`,bucket:t,contentType:e.type,size:e.size,fileName:e.name}}}catch(a){if(a instanceof z8)throw a;if(a instanceof Error)throw new z8(`Yükleme hatası: ${a.message}`);throw new z8("Bilinmeyen bir hata oluştu")}}async function I8(e,t){if(!["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp","application/pdf"].includes(e.type))throw new z8("Desteklenen formatlar: JPEG, PNG, GIF, BMP, WebP, PDF");if(e.size>104857600)throw new z8("Dosya boyutu 100MB'dan küçük olmalıdır");let r;return r=t||`receipt_${Date.now()}`,"application/pdf"===e.type&&(r=`${r}-pdf`),await R8(e,M8.DEKONT,r)}async function F8(e,t){if(!["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp"].includes(e.type))throw new z8("Desteklenen formatlar: JPEG, PNG, GIF, BMP, WebP");if(e.size>104857600)throw new z8("Dosya boyutu 100MB'dan küçük olmalıdır");const r=t||`design_${Date.now()}`;return await R8(e,M8.BASKILAR,r)}async function B8(e,t){if(!["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp"].includes(e.type))throw new z8("Desteklenen formatlar: JPEG, PNG, GIF, BMP, WebP");if(e.size>104857600)throw new z8("Dosya boyutu 100MB'dan küçük olmalıdır");const r=t||`product_${Date.now()}`;return await R8(e,M8.URUNLER,r)}function L8(e){return new Promise(((t,r)=>{const a=new FileReader;a.onload=()=>{"string"==typeof a.result?t(a.result):r(new Error("Dosya okunamadı"))},a.onerror=()=>r(new Error("Dosya okuma hatası")),a.readAsDataURL(e)}))}function q8(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}function $8(e={}){const{bucket:t=M8.DEKONT,autoUpload:r=!1,maxFileSize:a=104857600,allowedTypes:n=["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp"]}=e,[s,i]=ze.useState({file:null,previewUrl:null,uploadedUrl:null,isUploading:!1,error:null,isValid:!1}),l=ze.useCallback((e=>n.includes(e.type)?!(e.size>a)||(i((e=>({...e,error:`Dosya boyutu ${Math.round(a/1048576)}MB'dan küçük olmalıdır`,isValid:!1}))),!1):(i((e=>({...e,error:`Desteklenen formatlar: ${n.map((e=>e.split("/")[1].toUpperCase())).join(", ")}`,isValid:!1}))),!1)),[n,a]),o=ze.useCallback((async e=>{if(e){if(i((e=>({...e,error:null,isUploading:!1}))),l(e)){i((t=>({...t,file:e,isValid:!0})));try{const t=await L8(e);i((e=>({...e,previewUrl:t})))}catch(t){i((e=>({...e,error:"Önizleme oluşturulamadı"})))}r&&await c(e)}}else i({file:null,previewUrl:null,uploadedUrl:null,isUploading:!1,error:null,isValid:!1})}),[l,r]),c=ze.useCallback((async e=>{const r=e||s.file;if(!r)return i((e=>({...e,error:"Yüklenecek dosya bulunamadı"}))),null;i((e=>({...e,isUploading:!0,error:null})));try{const e=await R8(r,t,`upload_${Date.now()}`);if(e.success&&e.data){const t=e.data.url;return i((e=>({...e,uploadedUrl:t,isUploading:!1,error:null}))),t}throw new Error("Upload failed")}catch(a){const e=a instanceof z8?a.message:"Yükleme sırasında bir hata oluştu";return i((t=>({...t,isUploading:!1,error:e}))),null}}),[s.file,t]),d=ze.useCallback((()=>{i({file:null,previewUrl:null,uploadedUrl:null,isUploading:!1,error:null,isValid:!1})}),[]),u=ze.useCallback((()=>{i((e=>({...e,error:null})))}),[]);return{...s,setFile:o,uploadFile:c,reset:d,clearError:u,hasR2Config:!0}}const K8=()=>{const{id:e}=fl(),{toast:t}=at(),r=u8(),a=$e(),[n,s]=ze.useState({name:"",code:"",category:"",brand:"",description:"",base_price:"",discount_price:"",shorts_price:"",socks_price:"",goalkeeper_price:"",tax_rate:"18",status:"active",meta_title:"",meta_description:"",images:""}),[l,o]=ze.useState([{color:"",size:"",sku:"",stock_quantity:0,variation_price:void 0,is_lined:!1,is_mesh:!1}]),c=$8({bucket:M8.URUNLER,maxFileSize:104857600,allowedTypes:["image/jpeg","image/jpg","image/png","image/webp"]}),[d,u]=ze.useState(!1),{data:m,isLoading:h}=qe({queryKey:["product",e],queryFn:async()=>{if(!e||!gs(e))throw new Error("Invalid product ID format");const{data:t,error:r}=await Wl.from("products").select("\n          *,\n          product_variations (*)\n        ").eq("id",e).single();if(r)throw r;return t},enabled:!!e&&gs(e||"")});ze.useEffect((()=>{var e,t,r,a,n,i;m&&(s({name:m.name||"",code:m.code||"",category:m.category||"",brand:m.brand||"",description:m.description||"",base_price:(null==(e=m.base_price)?void 0:e.toString())||"",discount_price:(null==(t=m.discount_price)?void 0:t.toString())||"",shorts_price:(null==(r=m.shorts_price)?void 0:r.toString())||"",socks_price:(null==(a=m.socks_price)?void 0:a.toString())||"",goalkeeper_price:(null==(n=m.goalkeeper_price)?void 0:n.toString())||"",tax_rate:(null==(i=m.tax_rate)?void 0:i.toString())||"18",status:m.status||"active",meta_title:m.meta_title||"",meta_description:m.meta_description||"",images:m.images||""}),m.product_variations&&m.product_variations.length>0?o(m.product_variations.map((e=>({id:e.id,color:e.color,size:e.size,sku:e.sku,stock_quantity:e.stock_quantity,variation_price:e.variation_price||void 0,is_lined:e.is_lined||!1,is_mesh:e.is_mesh||!1})))):o([{color:"",size:"",sku:"",stock_quantity:0,variation_price:void 0,is_lined:!1,is_mesh:!1}]))}),[m]);const p=Ke({mutationFn:async()=>{if(!e)throw new Error("Product ID is required");const{error:t}=await Wl.from("products").update({name:n.name,code:n.code,category:n.category,brand:n.brand||null,description:n.description||null,base_price:parseFloat(n.base_price),discount_price:n.discount_price?parseFloat(n.discount_price):null,shorts_price:n.shorts_price?parseFloat(n.shorts_price):null,socks_price:n.socks_price?parseFloat(n.socks_price):null,goalkeeper_price:n.goalkeeper_price?parseFloat(n.goalkeeper_price):null,tax_rate:parseFloat(n.tax_rate),status:n.status,meta_title:n.meta_title||null,meta_description:n.meta_description||null,images:n.images||null}).eq("id",e);if(t)throw t;const{error:r}=await Wl.from("product_variations").delete().eq("product_id",e);if(r)throw r;const a=l.filter((e=>e.color&&e.size&&e.sku)).map((t=>({product_id:e,color:t.color,size:t.size,sku:t.sku,stock_quantity:t.stock_quantity,variation_price:t.variation_price||null,is_lined:t.is_lined||!1,is_mesh:t.is_mesh||!1})));if(a.length>0){const{error:e}=await Wl.from("product_variations").insert(a);if(e)throw e}},onSuccess:()=>{t({title:"Başarılı",description:"Ürün başarıyla güncellendi."}),a.invalidateQueries({queryKey:["products"]}),a.invalidateQueries({queryKey:["product",e]}),r("/admin/products")},onError:e=>{t({title:"Hata",description:"Ürün güncellenirken bir hata oluştu.",variant:"destructive"})}}),x=e=>e.replace(/ğ/g,"g").replace(/Ğ/g,"G").replace(/ü/g,"u").replace(/Ü/g,"U").replace(/ş/g,"s").replace(/Ş/g,"S").replace(/ı/g,"i").replace(/İ/g,"I").replace(/ö/g,"o").replace(/Ö/g,"O").replace(/ç/g,"c").replace(/Ç/g,"C").replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),g=(e,t)=>{s((r=>({...r,[e]:t}))),["name","category","brand"].includes(e)&&setTimeout((()=>{(()=>{if(n.name&&n.category&&n.brand){const e=x(n.name.substring(0,3)),t=`${x(n.category.substring(0,2))}${x(n.brand.substring(0,2))}${e}${(Math.floor(99*Math.random())+1).toString().padStart(2,"0")}`;s((e=>({...e,code:t}))),setTimeout((()=>{l.forEach(((e,t)=>{y(t)}))}),100)}else if(n.name&&n.category){const e=x(n.name.substring(0,4)),t=`${x(n.category.substring(0,3))}${e}${(Math.floor(999*Math.random())+1).toString().padStart(3,"0")}`;s((e=>({...e,code:t}))),setTimeout((()=>{l.forEach(((e,t)=>{y(t)}))}),100)}})()}),300)},f=(e,t,r)=>{o((a=>a.map(((a,n)=>n===e?{...a,[t]:r}:a)))),["color","size","is_lined","is_mesh"].includes(t)&&setTimeout((()=>{y(e)}),100)},y=e=>{const t=l[e];if(n.code&&t.color&&t.size){const r=x(t.color.substring(0,3)),a=x(t.size.toString());let s="";t.is_lined&&(s+="L"),t.is_mesh&&(s+="M");const i=`${n.code}-${r}-${a}${s}`;o((t=>t.map(((t,r)=>r===e?{...t,sku:i}:t))))}};return e&&gs(e)?h?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):m?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(oo,{variant:"ghost",onClick:()=>r("/admin/products"),children:[i.jsx(ar,{className:"h-4 w-4 mr-2"}),"Geri"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Ürün Düzenle"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:m.name})]})]}),i.jsxs("form",{onSubmit:e=>{e.preventDefault(),n.name&&n.code&&n.category&&n.base_price?p.mutate():t({title:"Hata",description:"Lütfen tüm zorunlu alanları doldurun.",variant:"destructive"})},className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsx(no,{children:"Temel Bilgiler"}),i.jsx(so,{children:"Ürünün temel bilgilerini girin"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"name",children:"Ürün Adı *"}),i.jsx(co,{id:"name",value:n.name,onChange:e=>g("name",e.target.value),placeholder:"Ürün adını girin",required:!0})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"code",children:"Ürün Kodu * (Düzenlenemez)"}),i.jsx(co,{id:"code",value:n.code,placeholder:"Ürün kodu düzenlenemez",required:!0,readOnly:!0,className:"bg-gray-50 dark:bg-gray-800 cursor-not-allowed"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ürün kodu oluşturulduktan sonra değiştirilemez"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"category",children:"Kategori *"}),i.jsx(co,{id:"category",value:n.category,onChange:e=>g("category",e.target.value),placeholder:"Örn: Forma, Şort, Aksesuar",required:!0})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"brand",children:"Marka"}),i.jsx(co,{id:"brand",value:n.brand,onChange:e=>g("brand",e.target.value),placeholder:"Marka adı"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"description",children:"Açıklama"}),i.jsx(v6,{id:"description",value:n.description,onChange:e=>g("description",e.target.value),placeholder:"Ürün açıklaması",rows:3})]}),i.jsxs("div",{children:[i.jsx(po,{children:"Ürün Resmi"}),i.jsxs("div",{className:"space-y-4",children:[n.images&&i.jsxs("div",{className:"relative inline-block",children:[i.jsx("img",{src:n.images,alt:"Ürün resmi",className:"w-32 h-32 object-cover rounded-lg border"}),i.jsx(oo,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:()=>{g("images",""),c.reset()},children:i.jsx(vn,{className:"h-3 w-3"})})]}),!n.images&&i.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(aa,{className:"h-8 w-8 mx-auto text-gray-400"}),i.jsx("div",{className:"text-sm text-gray-600",children:i.jsxs("label",{htmlFor:"image-upload-edit",className:"cursor-pointer",children:[i.jsx("span",{className:"text-blue-600 hover:text-blue-500",children:"Resim yüklemek için tıklayın"}),i.jsx("input",{id:"image-upload-edit",type:"file",className:"hidden",accept:"image/*",onChange:e=>{var r;const a=null==(r=e.target.files)?void 0:r[0];a&&(async e=>{u(!0);try{const r=await B8(e,`product_${n.code}_${Date.now()}`);if(r.success&&r.data){const a=r.data.url;g("images",a),c.setFile(e),t({title:"Başarılı",description:"Ürün resmi başarıyla yüklendi."})}}catch(r){t({title:"Hata",description:"Resim yüklenirken bir hata oluştu.",variant:"destructive"})}finally{u(!1)}})(a)},disabled:d})]})}),i.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, WebP (max. 100MB)"})]})}),d&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx(oa,{className:"h-4 w-4 animate-spin"}),"Resim yükleniyor..."]}),c.error&&i.jsx("div",{className:"text-sm text-red-600",children:c.error})]})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsx(no,{children:"Fiyatlandırma"}),i.jsx(so,{children:"Ürün fiyat bilgilerini girin"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"base_price",children:"Birim Fiyatı (TL) *"}),i.jsx(co,{id:"base_price",type:"number",step:"0.01",value:n.base_price,onChange:e=>g("base_price",e.target.value),placeholder:"0.00",required:!0})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"discount_price",children:"İndirimli Fiyat (TL)"}),i.jsx(co,{id:"discount_price",type:"number",step:"0.01",value:n.discount_price,onChange:e=>g("discount_price",e.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"shorts_price",children:"Şort Fiyatı (TL)"}),i.jsx(co,{id:"shorts_price",type:"number",step:"0.01",value:n.shorts_price,onChange:e=>g("shorts_price",e.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"socks_price",children:"Çorap Fiyatı (TL)"}),i.jsx(co,{id:"socks_price",type:"number",step:"0.01",value:n.socks_price,onChange:e=>g("socks_price",e.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"goalkeeper_price",children:"Kaleci Fiyatı (TL)"}),i.jsx(co,{id:"goalkeeper_price",type:"number",step:"0.01",value:n.goalkeeper_price,onChange:e=>g("goalkeeper_price",e.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"tax_rate",children:"Vergi Oranı (%)"}),i.jsx(co,{id:"tax_rate",type:"number",step:"0.01",value:n.tax_rate,onChange:e=>g("tax_rate",e.target.value),placeholder:"18"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"status",children:"Durum"}),i.jsxs("select",{id:"status",value:n.status,onChange:e=>g("status",e.target.value),className:"w-full px-3 py-2 border rounded-md bg-background",children:[i.jsx("option",{value:"active",children:"Aktif"}),i.jsx("option",{value:"inactive",children:"Pasif"}),i.jsx("option",{value:"draft",children:"Taslak"})]})]})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center justify-between",children:["Ürün Varyasyonları",i.jsxs(oo,{type:"button",onClick:()=>{const e=l.length,t=e<4?["S","M","L","XL"][e]:"";o((e=>[...e,{color:"",size:t,sku:"",stock_quantity:0,variation_price:void 0,is_lined:!1,is_mesh:!1}]))},size:"sm",children:[i.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Varyasyon Ekle"]})]}),i.jsx(so,{children:"Ürünün farklı renk, beden ve stok bilgilerini ekleyin"})]}),i.jsx(io,{children:i.jsx("div",{className:"space-y-4",children:l.map(((e,t)=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:`color-${t}`,children:"Renk"}),i.jsx(co,{id:`color-${t}`,value:e.color,onChange:e=>f(t,"color",e.target.value),placeholder:"Kırmızı"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:`size-${t}`,children:"Beden"}),i.jsx(co,{id:`size-${t}`,value:e.size,onChange:e=>f(t,"size",e.target.value),placeholder:t<4?["S","M","L","XL"][t]:"Beden girin"}),t<4&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Otomatik: ",["S","M","L","XL"][t]," (değiştirilebilir)"]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:`sku-${t}`,children:"SKU (Otomatik oluşur)"}),i.jsx(co,{id:`sku-${t}`,value:e.sku,placeholder:"Otomatik oluşacak - Örn: HFADS01-KIR-M",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800 cursor-not-allowed"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:`stock-${t}`,children:"Stok Adedi"}),i.jsx(co,{id:`stock-${t}`,type:"number",value:e.stock_quantity,onChange:e=>f(t,"stock_quantity",parseInt(e.target.value)||0),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:`price-${t}`,children:"Özel Fiyat"}),i.jsx(co,{id:`price-${t}`,type:"number",step:"0.01",value:e.variation_price||"",onChange:e=>f(t,"variation_price",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Opsiyonel"})]}),i.jsxs("div",{className:"flex flex-col justify-between",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(po,{htmlFor:`is_lined-${t}`,children:"Astarlı"}),i.jsx(D8,{id:`is_lined-${t}`,checked:e.is_lined||!1,onCheckedChange:e=>f(t,"is_lined",e)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(po,{htmlFor:`is_mesh-${t}`,children:"Fileli"}),i.jsx(D8,{id:`is_mesh-${t}`,checked:e.is_mesh||!1,onCheckedChange:e=>f(t,"is_mesh",e)})]})]}),i.jsx(oo,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{o((t=>t.filter(((t,r)=>r!==e))))})(t),disabled:1===l.length,className:"self-end",children:i.jsx(en,{className:"h-4 w-4"})})]})]},t)))})})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(oo,{type:"button",variant:"outline",onClick:()=>r("/admin/products"),children:"İptal"}),i.jsxs(oo,{type:"submit",disabled:p.isPending,children:[p.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):i.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Ürünü Güncelle"]})]})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-red-600 dark:text-red-400",children:"Ürün bulunamadı."}),i.jsxs(oo,{onClick:()=>r("/admin/products"),className:"mt-4",children:[i.jsx(ar,{className:"h-4 w-4 mr-2"}),"Ürünlere Dön"]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-red-600 dark:text-red-400",children:"Geçersiz ürün ID formatı."}),i.jsxs(oo,{onClick:()=>r("/admin/products"),className:"mt-4",children:[i.jsx(ar,{className:"h-4 w-4 mr-2"}),"Ürünlere Dön"]})]})},U8=()=>{const{toast:e}=at(),t=u8(),r=$e(),[a,n]=ze.useState({name:"",code:"",category:"Hazır Forma",brand:"",description:"",base_price:"220",discount_price:"",shorts_price:"80",socks_price:"50",goalkeeper_price:"270",tax_rate:"0",status:"active",meta_title:"",meta_description:"",images:""}),[s,l]=ze.useState([{color:"",size:"S",sku:"",stock_quantity:250,variation_price:void 0,is_lined:!1,is_mesh:!1}]),o=$8({bucket:M8.URUNLER,maxFileSize:104857600,allowedTypes:["image/jpeg","image/jpg","image/png","image/webp"]}),[c,d]=ze.useState(!1),u=Ke({mutationFn:async()=>{const{data:e,error:t}=await Wl.from("products").insert({name:a.name,code:a.code,category:a.category,brand:a.brand||null,description:a.description||null,base_price:parseFloat(a.base_price),discount_price:a.discount_price?parseFloat(a.discount_price):null,shorts_price:a.shorts_price?parseFloat(a.shorts_price):null,socks_price:a.socks_price?parseFloat(a.socks_price):null,goalkeeper_price:a.goalkeeper_price?parseFloat(a.goalkeeper_price):null,tax_rate:parseFloat(a.tax_rate),status:a.status,meta_title:a.meta_title||null,meta_description:a.meta_description||null,images:a.images||null}).select().single();if(t)throw t;const r=s.filter((e=>e.color&&e.size&&e.sku)).map((t=>({product_id:e.id,color:t.color,size:t.size,sku:t.sku,stock_quantity:t.stock_quantity,variation_price:t.variation_price||null,is_lined:t.is_lined||!1,is_mesh:t.is_mesh||!1})));if(r.length>0){const{error:e}=await Wl.from("product_variations").insert(r);if(e)throw e}return e},onSuccess:()=>{e({title:"Başarılı",description:"Ürün başarıyla oluşturuldu."}),r.invalidateQueries({queryKey:["products"]}),t("/admin/products")},onError:t=>{e({title:"Hata",description:"Ürün oluşturulurken bir hata oluştu.",variant:"destructive"})}}),m=e=>e.replace(/ğ/g,"g").replace(/Ğ/g,"G").replace(/ü/g,"u").replace(/Ü/g,"U").replace(/ş/g,"s").replace(/Ş/g,"S").replace(/ı/g,"i").replace(/İ/g,"I").replace(/ö/g,"o").replace(/Ö/g,"O").replace(/ç/g,"c").replace(/Ç/g,"C").replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),h=(e,t)=>{n((r=>({...r,[e]:t}))),["name","category","brand"].includes(e)&&setTimeout((()=>{(()=>{if(a.name&&a.category&&a.brand){const e=m(a.name.substring(0,3)),t=`${m(a.category.substring(0,2))}${m(a.brand.substring(0,2))}${e}${(Math.floor(99*Math.random())+1).toString().padStart(2,"0")}`;n((e=>({...e,code:t}))),setTimeout((()=>{s.forEach(((e,t)=>{x(t)}))}),100)}else if(a.name&&a.category){const e=m(a.name.substring(0,4)),t=`${m(a.category.substring(0,3))}${e}${(Math.floor(999*Math.random())+1).toString().padStart(3,"0")}`;n((e=>({...e,code:t}))),setTimeout((()=>{s.forEach(((e,t)=>{x(t)}))}),100)}})()}),300)},p=(e,t,r)=>{l((a=>a.map(((a,n)=>n===e?{...a,[t]:r}:a)))),["color","size","is_lined","is_mesh"].includes(t)&&setTimeout((()=>{x(e)}),100)},x=e=>{const t=s[e];if(a.code&&t.color&&t.size){const r=m(t.color.substring(0,3)),n=m(t.size.toString());let s="";t.is_lined&&(s+="L"),t.is_mesh&&(s+="M");const i=`${a.code}-${r}-${n}${s}`;p(e,"sku",i)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(oo,{variant:"ghost",onClick:()=>t("/admin/products"),children:[i.jsx(ar,{className:"h-4 w-4 mr-2"}),"Geri"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Yeni Ürün Ekle"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sisteme yeni ürün ekleyin"})]})]}),i.jsxs("form",{onSubmit:t=>{t.preventDefault(),a.name&&a.code&&a.category&&a.base_price?u.mutate():e({title:"Hata",description:"Lütfen tüm zorunlu alanları doldurun.",variant:"destructive"})},className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsx(no,{children:"Temel Bilgiler"}),i.jsx(so,{children:"Ürünün temel bilgilerini girin"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"name",children:"Ürün Adı *"}),i.jsx(co,{id:"name",value:a.name,onChange:e=>h("name",e.target.value),placeholder:"Ürün adını girin",required:!0})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"code",children:"Ürün Kodu * (Otomatik oluşur)"}),i.jsx(co,{id:"code",value:a.code,placeholder:"Otomatik oluşacak - Örn: HFADS01",required:!0,readOnly:!0,className:"bg-gray-50 dark:bg-gray-800 cursor-not-allowed"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: [Kategori][Marka][Ürün][Numara] - İsim ve marka girince otomatik oluşur"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"category",children:"Kategori *"}),i.jsxs("select",{id:"category",value:a.category,onChange:e=>h("category",e.target.value),className:"w-full px-3 py-2 border rounded-md bg-background",required:!0,children:[i.jsx("option",{value:"Hazır Forma",children:"Hazır Forma"}),i.jsx("option",{value:"Özel Tasarım",children:"Özel Tasarım"}),i.jsx("option",{value:"Promosyon",children:"Promosyon"})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"brand",children:"Marka"}),i.jsx(co,{id:"brand",value:a.brand,onChange:e=>h("brand",e.target.value),placeholder:"Marka adı"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"description",children:"Açıklama"}),i.jsx(v6,{id:"description",value:a.description,onChange:e=>h("description",e.target.value),placeholder:"Ürün açıklaması",rows:3})]}),i.jsxs("div",{children:[i.jsx(po,{children:"Ürün Resmi"}),i.jsxs("div",{className:"space-y-4",children:[a.images&&i.jsxs("div",{className:"relative inline-block",children:[i.jsx("img",{src:a.images,alt:"Ürün resmi",className:"w-32 h-32 object-cover rounded-lg border"}),i.jsx(oo,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:()=>{h("images",""),o.reset()},children:i.jsx(vn,{className:"h-3 w-3"})})]}),!a.images&&i.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(aa,{className:"h-8 w-8 mx-auto text-gray-400"}),i.jsx("div",{className:"text-sm text-gray-600",children:i.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[i.jsx("span",{className:"text-blue-600 hover:text-blue-500",children:"Resim yüklemek için tıklayın"}),i.jsx("input",{id:"image-upload",type:"file",className:"hidden",accept:"image/*",onChange:t=>{var r;const n=null==(r=t.target.files)?void 0:r[0];n&&(async t=>{d(!0);try{const r=await B8(t,`product_${a.code}_${Date.now()}`);if(r.success&&r.data){const a=r.data.url;h("images",a),o.setFile(t),e({title:"Başarılı",description:"Ürün resmi başarıyla yüklendi."})}}catch(r){e({title:"Hata",description:"Resim yüklenirken bir hata oluştu.",variant:"destructive"})}finally{d(!1)}})(n)},disabled:c})]})}),i.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, WebP (max. 100MB)"})]})}),c&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx(oa,{className:"h-4 w-4 animate-spin"}),"Resim yükleniyor..."]}),o.error&&i.jsx("div",{className:"text-sm text-red-600",children:o.error})]})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsx(no,{children:"Fiyatlandırma"}),i.jsx(so,{children:"Ürün fiyat bilgilerini girin"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"base_price",children:"Birim Fiyatı (TL) *"}),i.jsx(co,{id:"base_price",type:"number",step:"0.01",value:a.base_price,onChange:e=>h("base_price",e.target.value),placeholder:"0.00",required:!0})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"discount_price",children:"İndirimli Fiyat (TL)"}),i.jsx(co,{id:"discount_price",type:"number",step:"0.01",value:a.discount_price,onChange:e=>h("discount_price",e.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"shorts_price",children:"Şort Fiyatı (TL)"}),i.jsx(co,{id:"shorts_price",type:"number",step:"0.01",value:a.shorts_price,onChange:e=>h("shorts_price",e.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"socks_price",children:"Çorap Fiyatı (TL)"}),i.jsx(co,{id:"socks_price",type:"number",step:"0.01",value:a.socks_price,onChange:e=>h("socks_price",e.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"goalkeeper_price",children:"Kaleci Fiyatı (TL)"}),i.jsx(co,{id:"goalkeeper_price",type:"number",step:"0.01",value:a.goalkeeper_price,onChange:e=>h("goalkeeper_price",e.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"tax_rate",children:"Vergi Oranı (%)"}),i.jsx(co,{id:"tax_rate",type:"number",step:"0.01",value:a.tax_rate,onChange:e=>h("tax_rate",e.target.value),placeholder:"18"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"status",children:"Durum"}),i.jsxs("select",{id:"status",value:a.status,onChange:e=>h("status",e.target.value),className:"w-full px-3 py-2 border rounded-md bg-background",children:[i.jsx("option",{value:"active",children:"Aktif"}),i.jsx("option",{value:"inactive",children:"Pasif"}),i.jsx("option",{value:"draft",children:"Taslak"})]})]})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center justify-between",children:["Ürün Varyasyonları",i.jsxs(oo,{type:"button",onClick:()=>{const e=s.length,t=e<4?["S","M","L","XL"][e]:"";l((e=>[...e,{color:"",size:t,sku:"",stock_quantity:250,variation_price:void 0,is_lined:!1,is_mesh:!1}]))},size:"sm",children:[i.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Varyasyon Ekle"]})]}),i.jsx(so,{children:"Ürünün farklı renk, beden ve stok bilgilerini ekleyin"})]}),i.jsx(io,{children:i.jsx("div",{className:"space-y-4",children:s.map(((e,t)=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:`color-${t}`,children:"Renk"}),i.jsx(co,{id:`color-${t}`,value:e.color,onChange:e=>p(t,"color",e.target.value),placeholder:"Kırmızı"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:`size-${t}`,children:"Beden"}),i.jsx(co,{id:`size-${t}`,value:e.size,onChange:e=>p(t,"size",e.target.value),placeholder:t<4?["S","M","L","XL"][t]:"Beden girin"}),t<4&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Otomatik: ",["S","M","L","XL"][t]," (değiştirilebilir)"]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:`sku-${t}`,children:"SKU (Otomatik oluşur)"}),i.jsx(co,{id:`sku-${t}`,value:e.sku,placeholder:"Otomatik oluşacak - Örn: HFADS01-KIR-M",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800 cursor-not-allowed"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:`stock-${t}`,children:"Stok Adedi"}),i.jsx(co,{id:`stock-${t}`,type:"number",value:e.stock_quantity,onChange:e=>p(t,"stock_quantity",parseInt(e.target.value)||0),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:`price-${t}`,children:"Özel Fiyat"}),i.jsx(co,{id:`price-${t}`,type:"number",step:"0.01",value:e.variation_price||"",onChange:e=>p(t,"variation_price",e.target.value?parseFloat(e.target.value):void 0),placeholder:"Opsiyonel"})]}),i.jsxs("div",{className:"flex flex-col justify-between",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(po,{htmlFor:`is_lined-${t}`,children:"Astarlı"}),i.jsx(D8,{id:`is_lined-${t}`,checked:e.is_lined||!1,onCheckedChange:e=>p(t,"is_lined",e)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(po,{htmlFor:`is_mesh-${t}`,children:"Fileli"}),i.jsx(D8,{id:`is_mesh-${t}`,checked:e.is_mesh||!1,onCheckedChange:e=>p(t,"is_mesh",e)})]})]}),i.jsx(oo,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{l((t=>t.filter(((t,r)=>r!==e))))})(t),disabled:1===s.length,className:"self-end",children:i.jsx(en,{className:"h-4 w-4"})})]})]},t)))})})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(oo,{type:"button",variant:"outline",onClick:()=>t("/admin/products"),children:"İptal"}),i.jsxs(oo,{type:"submit",disabled:u.isPending,children:[u.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):i.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Ürünü Kaydet"]})]})]})]})},H8=()=>{const{toast:e}=at(),t=$e(),[r,a]=ze.useState(""),[n,s]=ze.useState("all"),[l,o]=ze.useState(!1),[c,d]=ze.useState(!1),[u,m]=ze.useState(null),[h,p]=ze.useState({email:"",password:"",full_name:"",phone:"",tc_kimlik:"",company:"",address:"",role:"toptanci"}),[x,g]=ze.useState({full_name:"",phone:"",tc_kimlik:"",company:"",address:"",role:"toptanci"}),{data:f,isLoading:y}=qe({queryKey:["users",r,n],queryFn:async()=>{let e=Wl.from("profiles").select("*").order("created_at",{ascending:!1});r&&(e=e.or(`full_name.ilike.%${r}%,company.ilike.%${r}%,phone.ilike.%${r}%,customer_code.ilike.%${r}%`)),"all"!==n&&(e="pending"===n?e.is("role",null):e.eq("role",n));const{data:t,error:a}=await e;if(a)throw a;return t}}),v=Ke({mutationFn:async({userId:e,role:t})=>{const{error:r}=await Wl.from("profiles").update({role:t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{e({title:"Başarılı",description:"Kullanıcı rolü güncellendi."}),t.invalidateQueries({queryKey:["users"]})},onError:t=>{e({title:"Hata",description:"Kullanıcı rolü güncellenirken bir hata oluştu.",variant:"destructive"})}}),b=Ke({mutationFn:async e=>{const{data:t,error:r}=await Wl.auth.signUp({email:e.email,password:e.password,options:{data:{full_name:e.full_name,phone:e.phone,tc_kimlik:e.tc_kimlik,company:e.company,address:e.address,role:e.role}}});if(r)throw new Error(`Kullanıcı oluşturulamadı: ${r.message}`);if(!t.user)throw new Error("Kullanıcı verisi alınamadı");const{error:a}=await Wl.from("profiles").upsert({id:t.user.id,full_name:e.full_name,phone:e.phone,tc_kimlik:e.tc_kimlik,company:e.company,address:e.address,role:e.role,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()});if(a)throw new Error(`Profil oluşturulamadı: ${a.message}`);return t.user},onSuccess:()=>{e({title:"Başarılı",description:"Kullanıcı başarıyla oluşturuldu. Müşteri kodu otomatik atandı."}),t.invalidateQueries({queryKey:["users"]}),o(!1),p({email:"",password:"",full_name:"",phone:"",tc_kimlik:"",company:"",address:"",role:"toptanci"})},onError:t=>{e({title:"Hata",description:t.message||"Kullanıcı oluşturulurken bir hata oluştu.",variant:"destructive"})}}),j=Ke({mutationFn:async e=>{const{error:t}=await Wl.from("profiles").delete().eq("id",e);if(t)throw new Error(`Kullanıcı silinemedi: ${t.message}`);return e},onSuccess:()=>{e({title:"Başarılı",description:"Kullanıcı başarıyla silindi."}),t.invalidateQueries({queryKey:["users"]})},onError:t=>{e({title:"Hata",description:t.message||"Kullanıcı silinirken bir hata oluştu.",variant:"destructive"})}}),k=Ke({mutationFn:async({userId:e,userData:t})=>{const{error:r}=await Wl.from("profiles").update({full_name:t.full_name,phone:t.phone,tc_kimlik:t.tc_kimlik,company:t.company,address:t.address,role:t.role,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw new Error(`Kullanıcı güncellenemedi: ${r.message}`);return e},onSuccess:()=>{e({title:"Başarılı",description:"Kullanıcı bilgileri güncellendi."}),t.invalidateQueries({queryKey:["users"]}),_()},onError:t=>{e({title:"Hata",description:t.message||"Kullanıcı güncellenirken bir hata oluştu.",variant:"destructive"})}}),w=(e,t)=>{p((r=>({...r,[e]:t})))},N=(e,t)=>{g((r=>({...r,[e]:t})))},_=()=>{d(!1),m(null),g({full_name:"",phone:"",tc_kimlik:"",company:"",address:"",role:"toptanci"})},S=e=>{if(!e)return"secondary";switch(e){case"yonetici":return"destructive";case"muhasebeci":return"default";case"toptanci":case"grafiker":return"outline";default:return"secondary"}},C=e=>{if(!e)return"Onay Bekliyor";switch(e){case"yonetici":return"Yönetici";case"muhasebeci":return"Muhasebeci";case"toptanci":return"Toptancı";case"reklamci":return"Reklamcı";case"grafiker":return"Grafiker";default:return e}};return y?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Kullanıcı Yönetimi"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sisteme kayıtlı kullanıcıları yönetin"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(sd,{open:l,onOpenChange:o,children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{className:"flex items-center gap-2",children:[i.jsx(dn,{className:"h-4 w-4"}),"Kullanıcı Ekle"]})}),i.jsxs(cd,{className:"sm:max-w-[500px]",children:[i.jsxs(dd,{children:[i.jsx(md,{children:"Yeni Kullanıcı Ekle"}),i.jsx(hd,{children:"Sisteme yeni bir kullanıcı ekleyin. Kullanıcı bu bilgilerle giriş yapabilecek."})]}),i.jsxs("form",{onSubmit:t=>{t.preventDefault(),h.email&&h.password&&h.full_name?h.password.length<6?e({title:"Hata",description:"Şifre en az 6 karakter olmalıdır.",variant:"destructive"}):b.mutate(h):e({title:"Hata",description:"E-posta, şifre ve ad soyad alanları zorunludur.",variant:"destructive"})},className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"email",children:"E-posta *"}),i.jsx(co,{id:"email",type:"email",placeholder:"ornek@email.com",value:h.email,onChange:e=>w("email",e.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"password",children:"Şifre *"}),i.jsx(co,{id:"password",type:"password",placeholder:"En az 6 karakter",value:h.password,onChange:e=>w("password",e.target.value),required:!0,minLength:6})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"full_name",children:"Ad Soyad *"}),i.jsx(co,{id:"full_name",placeholder:"Kullanıcının tam adı",value:h.full_name,onChange:e=>w("full_name",e.target.value),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"phone",children:"Telefon"}),i.jsx(co,{id:"phone",placeholder:"0555 123 45 67",value:h.phone,onChange:e=>w("phone",e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"tc_kimlik",children:"TC Kimlik"}),i.jsx(co,{id:"tc_kimlik",placeholder:"12345678901",value:h.tc_kimlik,onChange:e=>w("tc_kimlik",e.target.value)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"company",children:"Şirket"}),i.jsx(co,{id:"company",placeholder:"Şirket adı",value:h.company,onChange:e=>w("company",e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"address",children:"Adres"}),i.jsx(co,{id:"address",placeholder:"Tam adres",value:h.address,onChange:e=>w("address",e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"role",children:"Rol *"}),i.jsxs(eO,{value:h.role,onValueChange:e=>w("role",e),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Kullanıcı rolü seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"toptanci",children:"Toptancı"}),i.jsx(iO,{value:"muhasebeci",children:"Muhasebeci"}),i.jsx(iO,{value:"yonetici",children:"Yönetici"}),i.jsx(iO,{value:"reklamci",children:"Reklamcı"}),i.jsx(iO,{value:"grafiker",children:"Grafiker"})]})]})]}),i.jsxs(ud,{children:[i.jsx(oo,{type:"button",variant:"outline",onClick:()=>o(!1),disabled:b.isPending,children:"İptal"}),i.jsxs(oo,{type:"submit",disabled:b.isPending,className:"flex items-center gap-2",children:[b.isPending&&i.jsx(oa,{className:"h-4 w-4 animate-spin"}),"Kullanıcı Oluştur"]})]})]})]})]}),i.jsxs(Co,{variant:"secondary",className:"text-lg px-3 py-1",children:[(null==f?void 0:f.length)||0," kullanıcı"]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-5 w-5"}),"Kullanıcı Listesi"]}),i.jsx(so,{children:"Tüm kayıtlı kullanıcıları görüntüleyin ve rollerini yönetin"})]}),i.jsxs(io,{children:[i.jsxs("div",{className:"flex gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"İsim, şirket, telefon veya müşteri kodu ile arayın...",className:"pl-10",value:r,onChange:e=>a(e.target.value)})]}),i.jsxs(eO,{value:n,onValueChange:e=>s(e),children:[i.jsx(rO,{className:"w-48",children:i.jsx(tO,{placeholder:"Role göre filtrele"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm Roller"}),i.jsx(iO,{value:"pending",children:"Onay Bekleyen"}),i.jsx(iO,{value:"yonetici",children:"Yönetici"}),i.jsx(iO,{value:"muhasebeci",children:"Muhasebeci"}),i.jsx(iO,{value:"toptanci",children:"Toptancı"}),i.jsx(iO,{value:"reklamci",children:"Reklamcı"}),i.jsx(iO,{value:"grafiker",children:"Grafiker"})]})]})]}),i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Ad Soyad"}),i.jsx(M5,{children:"Şirket"}),i.jsx(M5,{children:"Telefon"}),i.jsx(M5,{children:"Müşteri Kodu"}),i.jsx(M5,{children:"TC Kimlik"}),i.jsx(M5,{children:"Rol"}),i.jsx(M5,{children:"Kayıt Tarihi"}),i.jsx(M5,{className:"text-right",children:"İşlemler"})]})}),i.jsx(E5,{children:null==f?void 0:f.map((e=>{return i.jsxs(D5,{children:[i.jsx(z5,{className:"font-medium",children:e.full_name||"-"}),i.jsx(z5,{children:e.company||"-"}),i.jsx(z5,{children:e.phone||"-"}),i.jsx(z5,{children:e.customer_code?i.jsx(Co,{variant:"outline",className:"bg-blue-50 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300",children:e.customer_code}):"-"}),i.jsx(z5,{children:e.tc_kimlik||"-"}),i.jsx(z5,{children:i.jsx(Co,{variant:S(e.role),children:C(e.role)})}),i.jsx(z5,{children:XC(new Date(e.created_at),"dd MMM yyyy",{locale:ZT})}),i.jsx(z5,{className:"text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsxs(eO,{value:(t=e.role,t||"pending"),onValueChange:t=>((e,t)=>{if(t){const r="pending"===t?null:t;v.mutate({userId:e,role:r})}})(e.id,t),disabled:v.isPending,children:[i.jsx(rO,{className:"w-32",children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"pending",children:"Onay Bekleyen"}),i.jsx(iO,{value:"yonetici",children:"Yönetici"}),i.jsx(iO,{value:"muhasebeci",children:"Muhasebeci"}),i.jsx(iO,{value:"toptanci",children:"Toptancı"}),i.jsx(iO,{value:"reklamci",children:"Reklamcı"}),i.jsx(iO,{value:"grafiker",children:"Grafiker"})]})]}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>(e=>{m(e),g({full_name:e.full_name||"",phone:e.phone||"",tc_kimlik:e.tc_kimlik||"",company:e.company||"",address:e.address||"",role:e.role||"toptanci"}),d(!0)})(e),children:i.jsx(Vr,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,r=e.full_name,void(window.confirm(`"${r}" kullanıcısını silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.`)&&j.mutate(t));var t,r},disabled:j.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:i.jsx(en,{className:"h-4 w-4"})})]})})]},e.id);var t}))})]}),0===(null==f?void 0:f.length)&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(hn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Kullanıcı bulunamadı"}),i.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Arama kriterlerinizi değiştirmeyi deneyin"})]})]})]}),i.jsx(sd,{open:c,onOpenChange:_,children:i.jsxs(cd,{className:"sm:max-w-[500px]",children:[i.jsxs(dd,{children:[i.jsx(md,{children:"Kullanıcı Düzenle"}),i.jsx(hd,{children:"Kullanıcı bilgilerini düzenleyin"})]}),i.jsxs("form",{onSubmit:t=>{t.preventDefault(),u&&(x.full_name?k.mutate({userId:u.id,userData:x}):e({title:"Hata",description:"Ad soyad alanı zorunludur.",variant:"destructive"}))},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"full_name",children:"Ad Soyad *"}),i.jsx(co,{id:"full_name",placeholder:"Kullanıcının tam adı",value:x.full_name,onChange:e=>N("full_name",e.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"phone",children:"Telefon"}),i.jsx(co,{id:"phone",placeholder:"0555 123 45 67",value:x.phone,onChange:e=>N("phone",e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"tc_kimlik",children:"TC Kimlik"}),i.jsx(co,{id:"tc_kimlik",placeholder:"12345678901",value:x.tc_kimlik,onChange:e=>N("tc_kimlik",e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"company",children:"Şirket"}),i.jsx(co,{id:"company",placeholder:"Şirket adı",value:x.company,onChange:e=>N("company",e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"address",children:"Adres"}),i.jsx(co,{id:"address",placeholder:"Tam adres",value:x.address,onChange:e=>N("address",e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"role",children:"Rol *"}),i.jsxs(eO,{value:x.role,onValueChange:e=>N("role",e),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Kullanıcı rolü seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"toptanci",children:"Toptancı"}),i.jsx(iO,{value:"muhasebeci",children:"Muhasebeci"}),i.jsx(iO,{value:"yonetici",children:"Yönetici"}),i.jsx(iO,{value:"reklamci",children:"Reklamcı"}),i.jsx(iO,{value:"grafiker",children:"Grafiker"})]})]})]}),i.jsxs(ud,{children:[i.jsx(oo,{type:"button",variant:"outline",onClick:_,disabled:k.isPending,children:"İptal"}),i.jsxs(oo,{type:"submit",disabled:k.isPending,className:"flex items-center gap-2",children:[k.isPending&&i.jsx(oa,{className:"h-4 w-4 animate-spin"}),"Kullanıcı Güncelle"]})]})]})]})})]})},Y8=()=>{const{toast:e}=at(),t=$e(),[r,a]=ze.useState(""),{data:n,isLoading:s}=qe({queryKey:["pending-users",r],queryFn:async()=>{let e=Wl.from("profiles").select("*").is("role",null).order("created_at",{ascending:!1});r&&(e=e.or(`full_name.ilike.%${r}%,company.ilike.%${r}%,phone.ilike.%${r}%`));const{data:t,error:a}=await e;if(a)throw a;return t}}),l=Ke({mutationFn:async({userId:e,role:t})=>{const{error:r}=await Wl.from("profiles").update({role:t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{e({title:"Başarılı",description:"Kullanıcı onaylandı."}),t.invalidateQueries({queryKey:["pending-users"]}),t.invalidateQueries({queryKey:["users"]})},onError:()=>{e({title:"Hata",description:"Kullanıcı onaylanırken bir hata oluştu.",variant:"destructive"})}}),o=Ke({mutationFn:async e=>{const{error:t}=await Wl.auth.admin.deleteUser(e);if(t)throw t},onSuccess:()=>{e({title:"Başarılı",description:"Kullanıcı reddedildi."}),t.invalidateQueries({queryKey:["pending-users"]})},onError:()=>{e({title:"Hata",description:"Kullanıcı reddedilirken bir hata oluştu.",variant:"destructive"})}});return s?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Onay Bekleyen Kullanıcılar"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sisteme kayıt olmuş ancak henüz onaylanmamış kullanıcılar"})]}),i.jsxs(Co,{variant:"secondary",className:"text-lg px-3 py-1",children:[(null==n?void 0:n.length)||0," bekleyen kullanıcı"]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(zr,{className:"h-5 w-5"}),"Onay Bekleyen Kullanıcılar"]}),i.jsx(so,{children:"Bu kullanıcılar sisteme kayıt olmuş ancak henüz yönetici onayından geçmemiştir"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"flex gap-4 mb-6",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"İsim, şirket veya telefon ile arayın...",className:"pl-10",value:r,onChange:e=>a(e.target.value)})]})}),i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Ad Soyad"}),i.jsx(M5,{children:"Şirket"}),i.jsx(M5,{children:"Telefon"}),i.jsx(M5,{children:"TC Kimlik"}),i.jsx(M5,{children:"Kayıt Tarihi"}),i.jsx(M5,{className:"text-right",children:"İşlemler"})]})}),i.jsx(E5,{children:null==n?void 0:n.map((e=>i.jsxs(D5,{children:[i.jsx(z5,{className:"font-medium",children:e.full_name}),i.jsx(z5,{children:e.company||"-"}),i.jsx(z5,{children:e.phone||"-"}),i.jsx(z5,{children:e.tc_kimlik||"-"}),i.jsx(z5,{children:XC(new Date(e.created_at),"dd MMM yyyy HH:mm",{locale:ZT})}),i.jsx(z5,{className:"text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>((e,t="toptanci")=>{l.mutate({userId:e,role:t})})(e.id),disabled:l.isPending,className:"text-green-600 hover:text-green-700",children:i.jsx(cn,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{return t=e.id,void(confirm("Bu kullanıcıyı reddetmek istediğinizden emin misiniz? Bu işlem geri alınamaz.")&&o.mutate(t));var t},disabled:o.isPending,className:"text-red-600 hover:text-red-700",children:i.jsx(un,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"sm",children:i.jsx(Vr,{className:"h-4 w-4"})})]})})]},e.id)))})]}),0===(null==n?void 0:n.length)&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(cn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Onay bekleyen kullanıcı bulunmuyor"}),i.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Tüm yeni kayıtlar burada görünecektir"})]})]})]})]})};var V8=["PageUp","PageDown"],G8=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],W8={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Q8="Slider",[X8,Z8,J8]=a(Q8),[e9,t9]=n(Q8,[J8]),[r9,a9]=e9(Q8),n9=ze.forwardRef(((e,t)=>{const{name:r,min:a=0,max:n=100,step:s=1,orientation:l="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[a],value:m,onValueChange:p=()=>{},onValueCommit:x=()=>{},inverted:g=!1,form:f,...y}=e,v=ze.useRef(new Set),b=ze.useRef(0),j="horizontal"===l?l9:o9,[k=[],w]=d({prop:m,defaultProp:u,onChange:e=>{var t;null==(t=[...v.current][b.current])||t.focus(),p(e)}}),N=ze.useRef(k);function _(e,t,{commit:r}={commit:!1}){const i=function(e){return(String(e).split(".")[1]||"").length}(s),l=function(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}(Math.round((e-a)/s)*s+a,i),o=E(l,[a,n]);w(((e=[])=>{const a=function(e=[],t,r){const a=[...e];return a[r]=t,a.sort(((e,t)=>e-t))}(e,o,t);if(function(e,t){if(t>0){const r=function(e){return e.slice(0,-1).map(((t,r)=>e[r+1]-t))}(e);return Math.min(...r)>=t}return!0}(a,c*s)){b.current=a.indexOf(o);const t=String(a)!==String(e);return t&&r&&x(a),t?a:e}return e}))}return i.jsx(r9,{scope:e.__scopeSlider,name:r,disabled:o,min:a,max:n,valueIndexToChangeRef:b,thumbs:v.current,values:k,orientation:l,form:f,children:i.jsx(X8.Provider,{scope:e.__scopeSlider,children:i.jsx(X8.Slot,{scope:e.__scopeSlider,children:i.jsx(j,{"aria-disabled":o,"data-disabled":o?"":void 0,...y,ref:t,onPointerDown:h(y.onPointerDown,(()=>{o||(N.current=k)})),min:a,max:n,inverted:g,onSlideStart:o?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const r=e.map((e=>Math.abs(e-t))),a=Math.min(...r);return r.indexOf(a)}(k,e);_(e,t)},onSlideMove:o?void 0:function(e){_(e,b.current)},onSlideEnd:o?void 0:function(){const e=N.current[b.current];k[b.current]!==e&&x(k)},onHomeKeyDown:()=>!o&&_(a,0,{commit:!0}),onEndKeyDown:()=>!o&&_(n,k.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){const r=V8.includes(e.key)||e.shiftKey&&G8.includes(e.key)?10:1,a=b.current;_(k[a]+s*r*t,a,{commit:!0})}}})})})})}));n9.displayName=Q8;var[s9,i9]=e9(Q8,{startEdge:"left",endEdge:"right",size:"width",direction:1}),l9=ze.forwardRef(((e,t)=>{const{min:r,max:a,dir:n,inverted:l,onSlideStart:o,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...m}=e,[h,p]=ze.useState(null),x=s(t,(e=>p(e))),g=ze.useRef(),f=O(n),y="ltr"===f,v=y&&!l||!y&&l;function b(e){const t=g.current||h.getBoundingClientRect(),n=v9([0,t.width],v?[r,a]:[a,r]);return g.current=t,n(e-t.left)}return i.jsx(s9,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:i.jsx(c9,{dir:f,"data-orientation":"horizontal",...m,ref:x,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=b(e.clientX);null==o||o(t)},onSlideMove:e=>{const t=b(e.clientX);null==c||c(t)},onSlideEnd:()=>{g.current=void 0,null==d||d()},onStepKeyDown:e=>{const t=W8[v?"from-left":"from-right"].includes(e.key);null==u||u({event:e,direction:t?-1:1})}})})})),o9=ze.forwardRef(((e,t)=>{const{min:r,max:a,inverted:n,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d,...u}=e,m=ze.useRef(null),h=s(t,m),p=ze.useRef(),x=!n;function g(e){const t=p.current||m.current.getBoundingClientRect(),n=v9([0,t.height],x?[a,r]:[r,a]);return p.current=t,n(e-t.top)}return i.jsx(s9,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:i.jsx(c9,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=g(e.clientY);null==l||l(t)},onSlideMove:e=>{const t=g(e.clientY);null==o||o(t)},onSlideEnd:()=>{p.current=void 0,null==c||c()},onStepKeyDown:e=>{const t=W8[x?"from-bottom":"from-top"].includes(e.key);null==d||d({event:e,direction:t?-1:1})}})})})),c9=ze.forwardRef(((e,t)=>{const{__scopeSlider:r,onSlideStart:a,onSlideMove:n,onSlideEnd:s,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:d,...u}=e,m=a9(Q8,r);return i.jsx(o.span,{...u,ref:t,onKeyDown:h(e.onKeyDown,(e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(c(e),e.preventDefault()):V8.concat(G8).includes(e.key)&&(d(e),e.preventDefault())})),onPointerDown:h(e.onPointerDown,(e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),m.thumbs.has(t)?t.focus():a(e)})),onPointerMove:h(e.onPointerMove,(e=>{e.target.hasPointerCapture(e.pointerId)&&n(e)})),onPointerUp:h(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))}))})})),d9="SliderTrack",u9=ze.forwardRef(((e,t)=>{const{__scopeSlider:r,...a}=e,n=a9(d9,r);return i.jsx(o.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...a,ref:t})}));u9.displayName=d9;var m9="SliderRange",h9=ze.forwardRef(((e,t)=>{const{__scopeSlider:r,...a}=e,n=a9(m9,r),l=i9(m9,r),c=ze.useRef(null),d=s(t,c),u=n.values.length,m=n.values.map((e=>y9(e,n.min,n.max))),h=u>1?Math.min(...m):0,p=100-Math.max(...m);return i.jsx(o.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...a,ref:d,style:{...e.style,[l.startEdge]:h+"%",[l.endEdge]:p+"%"}})}));h9.displayName=m9;var p9="SliderThumb",x9=ze.forwardRef(((e,t)=>{const r=Z8(e.__scopeSlider),[a,n]=ze.useState(null),l=s(t,(e=>n(e))),o=ze.useMemo((()=>a?r().findIndex((e=>e.ref.current===a)):-1),[r,a]);return i.jsx(g9,{...e,ref:l,index:o})})),g9=ze.forwardRef(((e,t)=>{const{__scopeSlider:r,index:a,name:n,...l}=e,c=a9(p9,r),d=i9(p9,r),[u,m]=ze.useState(null),p=s(t,(e=>m(e))),x=!u||(c.form||!!u.closest("form")),g=we(u),f=c.values[a],y=void 0===f?0:y9(f,c.min,c.max),v=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(a,c.values.length),b=null==g?void 0:g[d.size],j=b?function(e,t,r){const a=e/2,n=v9([0,50],[0,a]);return(a-n(t)*r)*r}(b,y,d.direction):0;return ze.useEffect((()=>{if(u)return c.thumbs.add(u),()=>{c.thumbs.delete(u)}}),[u,c.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${y}% + ${j}px)`},children:[i.jsx(X8.ItemSlot,{scope:e.__scopeSlider,children:i.jsx(o.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":c.min,"aria-valuenow":f,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...l,ref:p,style:void 0===f?{display:"none"}:e.style,onFocus:h(e.onFocus,(()=>{c.valueIndexToChangeRef.current=a}))})}),x&&i.jsx(f9,{name:n??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:f},a)]})}));x9.displayName=p9;var f9=e=>{const{value:t,...r}=e,a=ze.useRef(null),n=ke(t);return ze.useEffect((()=>{const e=a.current,r=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(r,"value").set;if(n!==t&&s){const r=new Event("input",{bubbles:!0});s.call(e,t),e.dispatchEvent(r)}}),[n,t]),i.jsx("input",{style:{display:"none"},...r,ref:a,defaultValue:t})};function y9(e,t,r){return E(100/(r-t)*(e-t),[0,100])}function v9(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(r-e[0])}}var b9=n9,j9=u9,k9=h9,w9=x9;const N9=ze.forwardRef((({className:e,...t},r)=>i.jsxs(b9,{ref:r,className:xs("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(j9,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:i.jsx(k9,{className:"absolute h-full bg-primary"})}),i.jsx(w9,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})));N9.displayName=b9.displayName;const _9=()=>{const{toast:e}=at(),t=$e();ze.useState(!1);const[r,a]=ze.useState([]),[n,s]=ze.useState({sales_cost_percentage:"60",sales_margin_calculation_method:"revenue_based",sales_operational_expense_rate:"15",sales_shipping_cost_percentage:"5",customer_segment_vip_threshold:"5000",customer_segment_churned_days:"90",customer_lifetime_value_multiplier:"1.2",customer_acquisition_cost_percentage:"15",commission_seller_id:"",commission_amount_per_unit:"2",commission_products:"",wholesaler_role_filter:"toptanci",exchange_rate_usd_buying:"39.9738",exchange_rate_usd_selling:"40.0338",exchange_rate_eur_buying:"46.9146",exchange_rate_eur_selling:"46.9850",economic_cpi_yearly:"35.05",economic_cpi_monthly:"1.37",economic_ppi_yearly:"24.45",economic_ppi_monthly:"2.46",economic_data_date:"Haziran 2025",ready_products_list:"",custom_designs_list:"",promotion_products_list:"",dealer_names:"",dealer_control_rules:JSON.stringify([{dealerName:"HOCA",customerNamePatterns:["HOCA"],orderNumberPatterns:["HOCA"]},{dealerName:"SPOR EVI",customerNamePatterns:["SPOR EVI"],orderNumberPatterns:["SPOR-EV","SPOR_EV","SPOREV"]},{dealerName:"Turanspor",customerNamePatterns:["TURANSPOR"],orderNumberPatterns:["TURANSPOR","TURAN"]}]),default_unknown_seller:"Bilinmeyen Satıcı",default_unknown_product:"Bilinmeyen Ürün",default_unknown_region:"Bilinmeyen Bölge",default_unknown_customer:"Bilinmeyen Müşteri",default_conversion_rate:"85",fixed_profit_margin:"40",inventory_turnover_multiplier:"0.3",turkey_timezone_offset:"3",sales_top_products_limit:"10",sales_monthly_trends_limit:"12",sales_performance_products_limit:"5",sales_product_analytics_limit:"6",api_refetch_interval_minutes:"60",api_cache_stale_time_minutes:"30",financial_health_good_margin:"10",financial_health_acceptable_margin:"5",financial_optimal_personnel_ratio:"30"}),{data:l,isLoading:o}=qe({queryKey:["sales-data-settings"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("system_settings").select("*").in("setting_key",Object.keys(n));if(t)throw t;return e}});ze.useEffect((()=>{if(l){const t=l.reduce(((e,t)=>(e[t.setting_key]=t.setting_value,e)),{});if(s((e=>({...e,...t}))),t.dealer_control_rules)try{const e=JSON.parse(t.dealer_control_rules);a(e)}catch(e){a([])}}}),[l]);const c=Ke({mutationFn:async e=>{const t=e.map((({setting_key:e,setting_value:t})=>Wl.from("system_settings").upsert({setting_key:e,setting_value:t,updated_at:(new Date).toISOString()},{onConflict:"setting_key"})));if((await Promise.all(t)).filter((e=>e.error)).length>0)throw new Error("Ayarlar güncellenirken hata oluştu")},onSuccess:()=>{e({title:"Başarılı",description:"Satış verileri ayarları başarıyla güncellendi."}),t.invalidateQueries({queryKey:["sales-data-settings"]}),t.invalidateQueries({queryKey:["system-settings"]})},onError:t=>{e({title:"Hata",description:"Ayarlar güncellenirken bir hata oluştu.",variant:"destructive"})}}),d=(e,t)=>{s((r=>({...r,[e]:t})))},u=(e,t)=>{a((r=>r.map(((r,a)=>a===e?{...r,[t]:[...r[t],""]}:r))))},m=(e,t,r)=>{a((a=>a.map(((a,n)=>n===e?{...a,[t]:a[t].filter(((e,t)=>t!==r))}:a))))},h=(e,t,r,n)=>{a((a=>a.map(((a,s)=>s===e?{...a,[t]:a[t].map(((e,t)=>t===r?n:e))}:a))))},p=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e);return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsx(yi,{children:i.jsxs(Yo,{defaultValue:"costs",className:"space-y-6",children:[i.jsxs(Vo,{className:"grid w-full grid-cols-7",children:[i.jsxs(Go,{value:"costs",className:"flex items-center gap-1",children:[i.jsx(hr,{className:"h-3 w-3"}),"Maliyetler"]}),i.jsxs(Go,{value:"customers",className:"flex items-center gap-1",children:[i.jsx(hn,{className:"h-3 w-3"}),"Müşteriler"]}),i.jsxs(Go,{value:"commission",className:"flex items-center gap-1",children:[i.jsx(Lr,{className:"h-3 w-3"}),"Komisyon"]}),i.jsxs(Go,{value:"dealers",className:"flex items-center gap-1",children:[i.jsx(Qa,{className:"h-3 w-3"}),"Bayiler"]}),i.jsxs(Go,{value:"economy",className:"flex items-center gap-1",children:[i.jsx(Jr,{className:"h-3 w-3"}),"Ekonomi"]}),i.jsxs(Go,{value:"products",className:"flex items-center gap-1",children:[i.jsx(ba,{className:"h-3 w-3"}),"Ürünler"]}),i.jsxs(Go,{value:"display",className:"flex items-center gap-1",children:[i.jsx(La,{className:"h-3 w-3"}),"Görünüm"]})]}),i.jsx(Wo,{value:"costs",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(ro,{className:"overflow-hidden",children:[i.jsx(ao,{className:"bg-gray-50 dark:bg-gray-800/50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(yn,{className:"h-5 w-5 text-green-600"}),i.jsxs("div",{children:[i.jsx(no,{children:"Temel Maliyetler"}),i.jsx(so,{children:"Ürün maliyeti ve kar hesaplama yöntemi"})]})]})}),i.jsxs(io,{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(po,{className:"font-medium",children:"Ürün Maliyet Oranı (%)"}),i.jsx(co,{type:"number",value:n.sales_cost_percentage,onChange:e=>d("sales_cost_percentage",e.target.value),className:"w-24 text-center font-bold"})]}),i.jsx(N9,{value:[parseFloat(n.sales_cost_percentage)||0],onValueChange:e=>d("sales_cost_percentage",e[0].toString()),max:100,step:1})]}),i.jsx(vo,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(po,{className:"font-medium",children:"Kar Hesaplama Yöntemi"}),i.jsxs(eO,{value:n.sales_margin_calculation_method,onValueChange:e=>d("sales_margin_calculation_method",e),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Yöntem seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"revenue_based",children:"Satış Fiyatı Üzerinden"}),i.jsx(iO,{value:"cost_based",children:"Maliyet Üzerinden"})]})]})]}),i.jsx(vo,{}),i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(po,{className:"font-medium",children:"Sabit Kar Marjı (%)"}),i.jsx(co,{type:"number",value:n.fixed_profit_margin,onChange:e=>d("fixed_profit_margin",e.target.value),className:"w-24 text-center font-bold"})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rn,{className:"h-5 w-5 text-purple-600"}),i.jsx(no,{children:"Operasyonel Giderler"})]})}),i.jsxs(io,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(po,{className:"font-medium",children:"Gider Oranı (%)"}),i.jsx(co,{type:"number",value:n.sales_operational_expense_rate,onChange:e=>d("sales_operational_expense_rate",e.target.value),className:"w-24 text-center font-bold"})]}),i.jsx(N9,{value:[parseFloat(n.sales_operational_expense_rate)||0],onValueChange:e=>d("sales_operational_expense_rate",e[0].toString()),max:50,step:1})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx($a,{className:"h-5 w-5 text-orange-600"}),i.jsx(no,{children:"Lojistik Giderleri"})]})}),i.jsxs(io,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(po,{className:"font-medium",children:"Kargo Oranı (%)"}),i.jsx(co,{type:"number",value:n.sales_shipping_cost_percentage,onChange:e=>d("sales_shipping_cost_percentage",e.target.value),className:"w-24 text-center font-bold"})]}),i.jsx(N9,{value:[parseFloat(n.sales_shipping_cost_percentage)||0],onValueChange:e=>d("sales_shipping_cost_percentage",e[0].toString()),max:30,step:1})]})]})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs(ro,{className:"sticky top-6",children:[i.jsxs(ao,{className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Lr,{className:"h-6 w-6"}),i.jsx(no,{children:"Finansal Etki"})]}),i.jsx(so,{className:"text-blue-200",children:"10.000 TL'lik satış örneği"})]}),i.jsxs(io,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center text-lg",children:[i.jsx("span",{className:"font-medium",children:"Satış Geliri"}),i.jsx("span",{className:"font-bold text-green-600",children:p(1e4)})]}),i.jsx(vo,{}),i.jsxs("ul",{className:"space-y-3 text-sm",children:[i.jsxs("li",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Ürün Maliyeti (%",n.sales_cost_percentage,")"]}),i.jsxs("span",{children:["-",p(parseFloat(n.sales_cost_percentage)/100*1e4)]})]}),i.jsxs("li",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Operasyonel (%",n.sales_operational_expense_rate,")"]}),i.jsxs("span",{children:["-",p(parseFloat(n.sales_operational_expense_rate)/100*1e4)]})]}),i.jsxs("li",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Kargo (%",n.sales_shipping_cost_percentage,")"]}),i.jsxs("span",{children:["-",p(parseFloat(n.sales_shipping_cost_percentage)/100*1e4)]})]})]}),i.jsx(vo,{}),i.jsxs("div",{className:"flex justify-between items-center text-xl",children:[i.jsx("span",{className:"font-semibold",children:"Net Kar"}),i.jsx("span",{className:"font-extrabold text-indigo-600",children:p(1e4-parseFloat(n.sales_cost_percentage)/100*1e4-parseFloat(n.sales_operational_expense_rate)/100*1e4-parseFloat(n.sales_shipping_cost_percentage)/100*1e4)})]})]})]})})]})}),i.jsx(Wo,{value:"customers",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-5 w-5"}),"Müşteri Segmentasyonu"]}),i.jsx(so,{children:"Müşteri gruplandırma kriterleri"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"vip-threshold",children:"VIP Müşteri Eşiği (TRY)"}),i.jsx(co,{id:"vip-threshold",type:"number",value:n.customer_segment_vip_threshold,onChange:e=>d("customer_segment_vip_threshold",e.target.value),placeholder:"5000"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Bu tutardan fazla alışveriş yapan müşteriler VIP olarak işaretlenir"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"churned-days",children:"Kaybedilen Müşteri Süresi (Gün)"}),i.jsx(co,{id:"churned-days",type:"number",value:n.customer_segment_churned_days,onChange:e=>d("customer_segment_churned_days",e.target.value),placeholder:"90"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Bu süre boyunca alışveriş yapmayan müşteriler kaybedilmiş sayılır"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"ltv-multiplier",children:"Yaşam Boyu Değer Çarpanı"}),i.jsx(co,{id:"ltv-multiplier",type:"number",step:"0.1",value:n.customer_lifetime_value_multiplier,onChange:e=>d("customer_lifetime_value_multiplier",e.target.value),placeholder:"1.2"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"acquisition-cost",children:"Müşteri Kazanma Maliyeti (%)"}),i.jsx(co,{id:"acquisition-cost",type:"number",value:n.customer_acquisition_cost_percentage,onChange:e=>d("customer_acquisition_cost_percentage",e.target.value),placeholder:"15"})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"h-5 w-5"}),"Performans Metrikleri"]}),i.jsx(so,{children:"Satış performans göstergeleri"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"conversion-rate",children:"Varsayılan Dönüşüm Oranı (%)"}),i.jsx(co,{id:"conversion-rate",type:"number",value:n.default_conversion_rate,onChange:e=>d("default_conversion_rate",e.target.value),placeholder:"85"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"inventory-turnover",children:"Stok Devir Hızı Çarpanı"}),i.jsx(co,{id:"inventory-turnover",type:"number",step:"0.1",value:n.inventory_turnover_multiplier,onChange:e=>d("inventory_turnover_multiplier",e.target.value),placeholder:"0.3"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"role-filter",children:"Toptancı Rol Filtresi"}),i.jsx(co,{id:"role-filter",value:n.wholesaler_role_filter,onChange:e=>d("wholesaler_role_filter",e.target.value),placeholder:"toptanci"})]})]})]})]})}),i.jsx(Wo,{value:"commission",className:"space-y-6",children:i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-5 w-5"}),"Komisyon Ayarları"]}),i.jsx(so,{children:"Satıcı komisyon tanımlamaları"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"seller-id",children:"Komisyon Alacak Satıcı ID"}),i.jsx(co,{id:"seller-id",value:n.commission_seller_id,onChange:e=>d("commission_seller_id",e.target.value),placeholder:"1|2|3 veya e3b57c35-2c08-4a20-8d8c-c5bdb98d9472"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Komisyon alacak satıcıların benzersiz kimlikleri. Birden fazla satıcı için | karakteri ile ayırın. Örn: 1|2|3"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"commission-amount",children:"Birim Başına Komisyon (TRY)"}),i.jsx(co,{id:"commission-amount",type:"number",value:n.commission_amount_per_unit,onChange:e=>d("commission_amount_per_unit",e.target.value),placeholder:"2"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"commission-products",children:"Komisyon Uygulanacak Ürünler"}),i.jsx(v6,{id:"commission-products",value:n.commission_products,onChange:e=>d("commission_products",e.target.value),placeholder:"HAZIR FORMA TEK ÜST,TASARIM OYUNCU TEK ÜST",rows:3}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Virgülle ayrılmış ürün adları"})]})]})]})}),i.jsx(Wo,{value:"economy",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Jr,{className:"h-5 w-5"}),"Döviz Kurları"]}),i.jsx(so,{children:"TCMB döviz kuru bilgileri"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"usd-buying",children:"USD Alış"}),i.jsx(co,{id:"usd-buying",type:"number",step:"0.0001",value:n.exchange_rate_usd_buying,onChange:e=>d("exchange_rate_usd_buying",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"usd-selling",children:"USD Satış"}),i.jsx(co,{id:"usd-selling",type:"number",step:"0.0001",value:n.exchange_rate_usd_selling,onChange:e=>d("exchange_rate_usd_selling",e.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"eur-buying",children:"EUR Alış"}),i.jsx(co,{id:"eur-buying",type:"number",step:"0.0001",value:n.exchange_rate_eur_buying,onChange:e=>d("exchange_rate_eur_buying",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"eur-selling",children:"EUR Satış"}),i.jsx(co,{id:"eur-selling",type:"number",step:"0.0001",value:n.exchange_rate_eur_selling,onChange:e=>d("exchange_rate_eur_selling",e.target.value)})]})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(gr,{className:"h-5 w-5"}),"Ekonomik Göstergeler"]}),i.jsx(so,{children:"Enflasyon ve ekonomik veriler"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"cpi-yearly",children:"TÜFE Yıllık (%)"}),i.jsx(co,{id:"cpi-yearly",type:"number",step:"0.01",value:n.economic_cpi_yearly,onChange:e=>d("economic_cpi_yearly",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"cpi-monthly",children:"TÜFE Aylık (%)"}),i.jsx(co,{id:"cpi-monthly",type:"number",step:"0.01",value:n.economic_cpi_monthly,onChange:e=>d("economic_cpi_monthly",e.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"ppi-yearly",children:"Yİ-ÜFE Yıllık (%)"}),i.jsx(co,{id:"ppi-yearly",type:"number",step:"0.01",value:n.economic_ppi_yearly,onChange:e=>d("economic_ppi_yearly",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"ppi-monthly",children:"Yİ-ÜFE Aylık (%)"}),i.jsx(co,{id:"ppi-monthly",type:"number",step:"0.01",value:n.economic_ppi_monthly,onChange:e=>d("economic_ppi_monthly",e.target.value)})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"data-date",children:"Veri Tarihi"}),i.jsx(co,{id:"data-date",value:n.economic_data_date,onChange:e=>d("economic_data_date",e.target.value),placeholder:"Haziran 2025"})]})]})]})]})}),i.jsx(Wo,{value:"products",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5"}),"Ürün Listeleri"]}),i.jsx(so,{children:"Sistem genelinde kullanılan ürün tanımlamaları"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"ready-products",children:"Hazır Ürünler"}),i.jsx(v6,{id:"ready-products",value:n.ready_products_list,onChange:e=>d("ready_products_list",e.target.value),placeholder:"HAZIR FORMA TEK ÜST,HAZIR FORMA KALECİ TEK ÜST...",rows:3})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"custom-designs",children:"Özel Tasarımlar"}),i.jsx(v6,{id:"custom-designs",value:n.custom_designs_list,onChange:e=>d("custom_designs_list",e.target.value),placeholder:"TASARIM OYUNCU TEK ÜST,TASARIM KALECİ TEK ÜST...",rows:3})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"promotion-products",children:"Promosyon Ürünleri"}),i.jsx(v6,{id:"promotion-products",value:n.promotion_products_list,onChange:e=>d("promotion_products_list",e.target.value),placeholder:"PROMOSYON FORMA TEK ÜST,PROMOSYON KALECİ TEK ÜST,PROMOSYON ŞORT,PROMOSYON ÇORAP",rows:3})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"dealer-names",children:"Bayi İsimleri"}),i.jsx(v6,{id:"dealer-names",value:n.dealer_names,onChange:e=>d("dealer_names",e.target.value),placeholder:"HOCA\nSPOR EVI\nTuranspor",rows:4}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Her satıra bir bayi ismi"})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(La,{className:"h-5 w-5"}),"Varsayılan Değerler"]}),i.jsx(so,{children:"Bilinmeyen veriler için kullanılan değerler"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"unknown-seller",children:"Bilinmeyen Satıcı"}),i.jsx(co,{id:"unknown-seller",value:n.default_unknown_seller,onChange:e=>d("default_unknown_seller",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"unknown-product",children:"Bilinmeyen Ürün"}),i.jsx(co,{id:"unknown-product",value:n.default_unknown_product,onChange:e=>d("default_unknown_product",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"unknown-region",children:"Bilinmeyen Bölge"}),i.jsx(co,{id:"unknown-region",value:n.default_unknown_region,onChange:e=>d("default_unknown_region",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"unknown-customer",children:"Bilinmeyen Müşteri"}),i.jsx(co,{id:"unknown-customer",value:n.default_unknown_customer,onChange:e=>d("default_unknown_customer",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"timezone-offset",children:"Türkiye Saat Dilimi (UTC+)"}),i.jsx(co,{id:"timezone-offset",type:"number",value:n.turkey_timezone_offset,onChange:e=>d("turkey_timezone_offset",e.target.value)})]})]})]})]})}),i.jsx(Wo,{value:"dealers",className:"space-y-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Qa,{className:"h-5 w-5"}),"Bayi Kontrol Kuralları"]}),i.jsx(so,{children:"Siparişlerin hangi bayilere ait olduğunu belirlemek için kullanılan kurallar. Müşteri adı ve sipariş numarası bazında kontrol yapılır."})]}),i.jsxs(io,{className:"space-y-4",children:[r.map(((e,t)=>i.jsxs(ro,{className:"border-l-4 border-l-blue-500",children:[i.jsxs(ao,{className:"pb-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qa,{className:"h-4 w-4"}),i.jsx(po,{htmlFor:`dealer-name-${t}`,children:"Bayi Adı"})]}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{return e=t,void a((t=>t.filter(((t,r)=>r!==e))));var e},className:"text-red-600 hover:text-red-700",children:i.jsx(vn,{className:"h-4 w-4"})})]}),i.jsx(co,{id:`dealer-name-${t}`,value:e.dealerName,onChange:e=>{return r=t,n="dealerName",s=e.target.value,void a((e=>e.map(((e,t)=>t===r?{...e,[n]:s}:e))));var r,n,s},placeholder:"Bayi adını girin (örn: HOCA, SPOR EVI)"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(po,{className:"text-sm font-medium",children:"Müşteri Adı Kontrolleri"}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>u(t,"customerNamePatterns"),children:[i.jsx(Pa,{className:"h-3 w-3 mr-1"}),"Ekle"]})]}),i.jsx("div",{className:"space-y-2",children:e.customerNamePatterns.map(((e,r)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(co,{value:e,onChange:e=>h(t,"customerNamePatterns",r,e.target.value),placeholder:"Müşteri adında aranacak kelime",className:"flex-1"}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>m(t,"customerNamePatterns",r),className:"text-red-600",children:i.jsx(vn,{className:"h-3 w-3"})})]},r)))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Müşteri adında bu kelimelerden herhangi biri geçerse sipariş bu bayiye atanır"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(po,{className:"text-sm font-medium",children:"Sipariş Numarası Kontrolleri"}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>u(t,"orderNumberPatterns"),children:[i.jsx(Pa,{className:"h-3 w-3 mr-1"}),"Ekle"]})]}),i.jsx("div",{className:"space-y-2",children:e.orderNumberPatterns.map(((e,r)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(co,{value:e,onChange:e=>h(t,"orderNumberPatterns",r,e.target.value),placeholder:"Sipariş numarasında aranacak kelime (örn: SPOR-EV)",className:"flex-1"}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>m(t,"orderNumberPatterns",r),className:"text-red-600",children:i.jsx(vn,{className:"h-3 w-3"})})]},r)))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sipariş numarasında bu kelimelerden herhangi biri geçerse sipariş bu bayiye atanır"})]})]})]},t))),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[i.jsxs(oo,{variant:"outline",onClick:()=>{a((e=>[...e,{dealerName:"",customerNamePatterns:[""],orderNumberPatterns:[""]}]))},className:"gap-2",children:[i.jsx(Pa,{className:"h-4 w-4"}),"Yeni Bayi Kuralı Ekle"]}),i.jsxs(oo,{onClick:async()=>{try{const t=JSON.stringify(r);await c.mutateAsync([{setting_key:"dealer_control_rules",setting_value:t}]),e({title:"Başarılı",description:"Bayi kontrol kuralları kaydedildi."})}catch(t){e({title:"Hata",description:"Bayi kuralları kaydedilirken bir hata oluştu.",variant:"destructive"})}},disabled:c.isPending,className:"gap-2",children:[c.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin"}):i.jsx(Ra,{className:"h-4 w-4"}),"Kuralları Kaydet"]})]})]})]}),i.jsxs(ro,{className:"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",children:[i.jsx(ao,{children:i.jsxs(no,{className:"text-blue-800 dark:text-blue-200 flex items-center gap-2",children:[i.jsx(na,{className:"h-5 w-5"}),"Nasıl Çalışır?"]})}),i.jsxs(io,{className:"text-blue-700 dark:text-blue-300 space-y-2",children:[i.jsx("p",{children:"• Sistem her siparişi kontrol ederken önce müşteri adına, sonra sipariş numarasına bakar"}),i.jsx("p",{children:"• Herhangi bir kural eşleşirse sipariş o bayiye atanır"}),i.jsx("p",{children:'• Örnek: "SPOR-EV-05346375466-1321" sipariş numarası "SPOR-EV" kuralı ile SPOR EVI bayisine atanır'}),i.jsx("p",{children:"• Büyük/küçük harf duyarlı değildir, tüm kontroller büyük harfle yapılır"})]})]})]})}),i.jsx(Wo,{value:"display",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Br,{className:"h-5 w-5"}),"Veri Limitleri"]}),i.jsx(so,{children:"Görüntülenecek maksimum kayıt sayıları"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"top-products-limit",children:"En Çok Satan Ürün Limiti"}),i.jsx(co,{id:"top-products-limit",type:"number",value:n.sales_top_products_limit,onChange:e=>d("sales_top_products_limit",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"monthly-trends-limit",children:"Aylık Trend Limiti"}),i.jsx(co,{id:"monthly-trends-limit",type:"number",value:n.sales_monthly_trends_limit,onChange:e=>d("sales_monthly_trends_limit",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"performance-limit",children:"Performans Ürün Limiti"}),i.jsx(co,{id:"performance-limit",type:"number",value:n.sales_performance_products_limit,onChange:e=>d("sales_performance_products_limit",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"analytics-limit",children:"Ürün Analitik Kart Limiti"}),i.jsx(co,{id:"analytics-limit",type:"number",value:n.sales_product_analytics_limit,onChange:e=>d("sales_product_analytics_limit",e.target.value)})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"h-5 w-5"}),"API ve Performans"]}),i.jsx(so,{children:"Önbellek ve yenileme ayarları"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"refetch-interval",children:"API Yenileme Aralığı (Dakika)"}),i.jsx(co,{id:"refetch-interval",type:"number",value:n.api_refetch_interval_minutes,onChange:e=>d("api_refetch_interval_minutes",e.target.value)}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Döviz kurları gibi verilerin yenileme sıklığı"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"cache-time",children:"Önbellek Süresi (Dakika)"}),i.jsx(co,{id:"cache-time",type:"number",value:n.api_cache_stale_time_minutes,onChange:e=>d("api_cache_stale_time_minutes",e.target.value)})]}),i.jsx(vo,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(po,{className:"font-medium",children:"Finansal Sağlık Göstergeleri"}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"good-margin",children:"İyi Net Kar Marjı (%)"}),i.jsx(co,{id:"good-margin",type:"number",value:n.financial_health_good_margin,onChange:e=>d("financial_health_good_margin",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"acceptable-margin",children:"Kabul Edilebilir Kar Marjı (%)"}),i.jsx(co,{id:"acceptable-margin",type:"number",value:n.financial_health_acceptable_margin,onChange:e=>d("financial_health_acceptable_margin",e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"personnel-ratio",children:"Optimal Personel Maliyet Oranı (%)"}),i.jsx(co,{id:"personnel-ratio",type:"number",value:n.financial_optimal_personnel_ratio,onChange:e=>d("financial_optimal_personnel_ratio",e.target.value)})]})]})]})]})]})}),i.jsx("div",{className:"flex justify-end pt-6",children:i.jsxs(oo,{onClick:()=>{const e=Object.entries(n).map((([e,t])=>({setting_key:e,setting_value:t.toString()})));c.mutate(e)},disabled:c.isPending,size:"lg",className:"gap-2",children:[c.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin"}):i.jsx(Ra,{className:"h-4 w-4"}),"Tüm Ayarları Kaydet"]})})]})})},S9=()=>{const{rooms:e,selectedRoom:t,roomPermissions:r,roomMessages:a,roomsLoading:n,permissionsLoading:s,messagesLoading:l,setSelectedRoom:o,createRoom:c,updateRoom:d,deleteRoom:u,updatePermissions:m,deleteMessage:h,isCreating:p,isUpdating:x,isDeleting:g,isUpdatingPermissions:f,isDeletingMessage:y}=(()=>{const{toast:e}=at(),t=$e(),[r,a]=ze.useState(null),{data:n,isLoading:s}=qe({queryKey:["admin-chat-rooms"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("chat_rooms").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}}),{data:i,isLoading:l}=qe({queryKey:["chat-room-permissions",null==r?void 0:r.id],queryFn:async()=>{if(!r)return[];const{data:e,error:t}=await Wl.from("chat_room_permissions").select("*").eq("room_id",r.id);if(t)throw t;return e},enabled:!!r}),{data:o,isLoading:c}=qe({queryKey:["chat-room-messages",null==r?void 0:r.id],queryFn:async()=>{if(!r)return[];const{data:e,error:t}=await Wl.from("chat_messages").select("*").eq("room_id",r.id).order("created_at",{ascending:!1}).limit(50);if(t)throw t;const a=[...new Set(e.map((e=>e.user_id)))],{data:n,error:s}=await Wl.from("profiles").select("id, full_name, role").in("id",a);if(s)throw s;const i=n.reduce(((e,t)=>(e[t.id]=t,e)),{});return e.map((e=>{const t=i[e.user_id]||{full_name:"Bilinmeyen Kullanıcı",role:"toptanci"};return{...e,user_name:t.full_name,user_role:t.role,room_name:r.name}})).reverse()},enabled:!!r}),d=Ke({mutationFn:async e=>{const t=e.name.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),{data:r,error:a}=await Wl.from("chat_rooms").insert([{...e,slug:t}]).select().single();if(a)throw a;return r},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-chat-rooms"]}),e({title:"Başarılı",description:"Sohbet odası başarıyla oluşturuldu."})},onError:t=>{e({title:"Hata",description:"Sohbet odası oluşturulurken bir hata oluştu.",variant:"destructive"})}}),u=Ke({mutationFn:async({roomId:e,updates:t})=>{const{data:r,error:a}=await Wl.from("chat_rooms").update(t).eq("id",e).select().single();if(a)throw a;return r},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-chat-rooms"]}),e({title:"Başarılı",description:"Sohbet odası başarıyla güncellendi."})},onError:t=>{e({title:"Hata",description:"Sohbet odası güncellenirken bir hata oluştu.",variant:"destructive"})}}),m=Ke({mutationFn:async e=>{const{error:t}=await Wl.from("chat_rooms").delete().eq("id",e);if(t)throw t},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-chat-rooms"]}),a(null),e({title:"Başarılı",description:"Sohbet odası başarıyla silindi."})},onError:t=>{e({title:"Hata",description:"Sohbet odası silinirken bir hata oluştu.",variant:"destructive"})}}),h=Ke({mutationFn:async e=>{var t;const r=null==(t=e[0])?void 0:t.room_id;if(!r)throw new Error("Room ID required");await Wl.from("chat_room_permissions").delete().eq("room_id",r);const{error:a}=await Wl.from("chat_room_permissions").insert(e);if(a)throw a},onSuccess:()=>{t.invalidateQueries({queryKey:["chat-room-permissions"]}),e({title:"Başarılı",description:"Oda izinleri başarıyla güncellendi."})},onError:t=>{e({title:"Hata",description:"İzinler güncellenirken bir hata oluştu.",variant:"destructive"})}}),p=Ke({mutationFn:async e=>{const{error:t}=await Wl.functions.invoke("delete-message",{body:{messageId:e}});if(t)throw t},onSuccess:()=>{t.invalidateQueries({queryKey:["chat-room-messages"]}),e({title:"Başarılı",description:"Mesaj başarıyla silindi."})},onError:t=>{e({title:"Hata",description:"Mesaj silinirken bir hata oluştu.",variant:"destructive"})}});return{rooms:n,selectedRoom:r,roomPermissions:i,roomMessages:o,roomsLoading:s,permissionsLoading:l,messagesLoading:c,setSelectedRoom:a,createRoom:d.mutate,updateRoom:u.mutate,deleteRoom:m.mutate,updatePermissions:h.mutate,deleteMessage:p.mutate,isCreating:d.isPending,isUpdating:u.isPending,isDeleting:m.isPending,isUpdatingPermissions:h.isPending,isDeletingMessage:p.isPending}})(),[v,b]=ze.useState({name:"",description:"",room_type:"general"}),[j,k]=ze.useState(null),[w,N]=ze.useState({yonetici:{can_read:!0,can_write:!0},toptanci:{can_read:!0,can_write:!0},grafiker:{can_read:!0,can_write:!0}}),[_,S]=ze.useState(!1),[C,T]=ze.useState(!1),[O,P]=ze.useState(!1),A=e=>{switch(e){case"announcement":return i.jsx(Co,{variant:"destructive",children:"Duyuru"});case"general":return i.jsx(Co,{variant:"default",children:"Genel"});case"design":return i.jsx(Co,{variant:"secondary",children:"Tasarım"});default:return i.jsx(Co,{variant:"outline",children:e})}},E=e=>{switch(e){case"text":default:return i.jsx(ha,{className:"h-4 w-4"});case"image":return i.jsx(Vr,{className:"h-4 w-4"});case"file":return i.jsx(er,{className:"h-4 w-4"});case"system":return i.jsx(La,{className:"h-4 w-4"})}};return n?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Sohbet Yönetimi"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sohbet odalarını yönetin, izinleri düzenleyin ve mesaj loglarını görüntüleyin"})]}),i.jsxs(sd,{open:_,onOpenChange:S,children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{children:[i.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Yeni Oda"]})}),i.jsxs(cd,{children:[i.jsxs(dd,{children:[i.jsx(md,{children:"Yeni Sohbet Odası"}),i.jsx(hd,{children:"Yeni bir sohbet odası oluşturun ve ayarlarını yapılandırın."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"room-name",children:"Oda Adı"}),i.jsx(co,{id:"room-name",value:v.name,onChange:e=>b((t=>({...t,name:e.target.value}))),placeholder:"Oda adını girin"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"room-description",children:"Açıklama"}),i.jsx(v6,{id:"room-description",value:v.description,onChange:e=>b((t=>({...t,description:e.target.value}))),placeholder:"Oda açıklamasını girin",rows:3})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"room-type",children:"Oda Tipi"}),i.jsxs(eO,{value:v.room_type,onValueChange:e=>b((t=>({...t,room_type:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"general",children:"Genel"}),i.jsx(iO,{value:"announcement",children:"Duyuru"}),i.jsx(iO,{value:"design",children:"Tasarım"})]})]})]})]}),i.jsxs(ud,{children:[i.jsx(oo,{variant:"outline",onClick:()=>S(!1),children:"İptal"}),i.jsx(oo,{onClick:()=>{c(v),b({name:"",description:"",room_type:"general"}),S(!1)},disabled:!v.name||p,children:p?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}),"Oluşturuluyor..."]}):"Oluştur"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(pa,{className:"h-5 w-5"}),"Sohbet Odaları",e&&i.jsx(Co,{variant:"secondary",children:e.length})]})}),i.jsx(io,{className:"space-y-2 max-h-96 overflow-auto",children:null==e?void 0:e.map((e=>i.jsxs("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors "+((null==t?void 0:t.id)===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"),onClick:()=>o(e),children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"font-medium",children:e.name}),i.jsxs("div",{className:"flex items-center gap-1",children:[A(e.room_type),!e.is_active&&i.jsxs(Co,{variant:"outline",children:[i.jsx(er,{className:"h-3 w-3 mr-1"}),"Pasif"]})]})]}),e.description&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:e.description}),i.jsxs("div",{className:"flex justify-between items-center mt-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("tr-TR")}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),k({id:e.id,name:e.name,description:e.description,room_type:e.room_type,is_active:e.is_active}),T(!0)},children:i.jsx(Va,{className:"h-3 w-3"})}),i.jsxs(o6,{children:[i.jsx(c6,{asChild:!0,children:i.jsx(oo,{variant:"ghost",size:"sm",onClick:e=>e.stopPropagation(),children:i.jsx(en,{className:"h-3 w-3"})})}),i.jsxs(m6,{children:[i.jsxs(h6,{children:[i.jsx(x6,{children:"Odayı Sil"}),i.jsxs(g6,{children:['"',e.name,'" odasını silmek istediğinizden emin misiniz? Bu işlem geri alınamaz ve tüm mesajlar silinecektir.']})]}),i.jsxs(p6,{children:[i.jsx(y6,{children:"İptal"}),i.jsx(f6,{onClick:()=>u(e.id),className:"bg-red-600 hover:bg-red-700",children:"Sil"})]})]})]})]})]})]},e.id)))})]})}),i.jsx("div",{className:"lg:col-span-2",children:t?i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[t.name,A(t.room_type),t.is_active?i.jsxs(Co,{variant:"default",children:[i.jsx(Or,{className:"h-3 w-3 mr-1"}),"Aktif"]}):i.jsxs(Co,{variant:"secondary",children:[i.jsx(Er,{className:"h-3 w-3 mr-1"}),"Pasif"]})]}),i.jsx(so,{children:t.description})]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>{(()=>{if(r&&r.length>0){const e=r.reduce(((e,t)=>(e[t.role]={can_read:t.can_read,can_write:t.can_write},e)),{});N({yonetici:e.yonetici||{can_read:!0,can_write:!0},toptanci:e.toptanci||{can_read:!0,can_write:!0},grafiker:e.grafiker||{can_read:!0,can_write:!0}})}else N({yonetici:{can_read:!0,can_write:!0},toptanci:{can_read:!0,can_write:!0},grafiker:{can_read:!0,can_write:!0}})})(),P(!0)},children:[i.jsx(qa,{className:"h-4 w-4 mr-2"}),"İzinleri Düzenle"]})]})}),i.jsx(io,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Oluşturulma:"}),i.jsx("p",{children:new Date(t.created_at).toLocaleString("tr-TR")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Son Güncelleme:"}),i.jsx("p",{children:new Date(t.updated_at).toLocaleString("tr-TR")})]})]})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-5 w-5"}),"Oda İzinleri"]})}),i.jsx(io,{children:s?i.jsx("div",{className:"flex justify-center py-4",children:i.jsx(oa,{className:"h-6 w-6 animate-spin"})}):i.jsx("div",{className:"space-y-3",children:["yonetici","toptanci","grafiker"].map((e=>{const t=null==r?void 0:r.find((t=>t.role===e));return i.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium capitalize",children:e}),i.jsx("p",{className:"text-sm text-gray-500",children:"yonetici"===e?"Yönetici":"toptanci"===e?"Toptancı":"Grafiker"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vr,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"Okuma:"}),i.jsx(Co,{variant:(null==t?void 0:t.can_read)?"default":"secondary",children:(null==t?void 0:t.can_read)?"Evet":"Hayır"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Va,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm",children:"Yazma:"}),i.jsx(Co,{variant:(null==t?void 0:t.can_write)?"default":"secondary",children:(null==t?void 0:t.can_write)?"Evet":"Hayır"})]})]})]},e)}))})})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ha,{className:"h-5 w-5"}),"Mesaj Logu",a&&i.jsx(Co,{variant:"secondary",children:a.length})]}),i.jsx(so,{children:"Son 50 mesaj gösteriliyor"})]}),i.jsx(io,{children:l?i.jsx("div",{className:"flex justify-center py-4",children:i.jsx(oa,{className:"h-6 w-6 animate-spin"})}):a&&a.length>0?i.jsx("div",{className:"space-y-3 max-h-96 overflow-auto",children:a.map((e=>i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[E(e.message_type),i.jsx("span",{className:"font-medium",children:e.user_name}),i.jsx(Co,{variant:"outline",className:"text-xs",children:e.user_role}),e.is_deleted&&i.jsx(Co,{variant:"destructive",className:"text-xs",children:"Silindi"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleString("tr-TR")}),!e.is_deleted&&i.jsxs(o6,{children:[i.jsx(c6,{asChild:!0,children:i.jsx(oo,{variant:"ghost",size:"sm",children:i.jsx(en,{className:"h-3 w-3"})})}),i.jsxs(m6,{children:[i.jsxs(h6,{children:[i.jsx(x6,{children:"Mesajı Sil"}),i.jsx(g6,{children:"Bu mesajı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz."})]}),i.jsxs(p6,{children:[i.jsx(y6,{children:"İptal"}),i.jsx(f6,{onClick:()=>h(e.id),className:"bg-red-600 hover:bg-red-700",children:"Sil"})]})]})]})]})]}),i.jsx("p",{className:"text-sm "+(e.is_deleted?"text-gray-400 italic":""),children:e.is_deleted?"Bu mesaj silindi":e.content})]},e.id)))}):i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Bu odada henüz mesaj bulunmamaktadır."})})]})]}):i.jsx(ro,{children:i.jsxs(io,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(pa,{className:"h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Bir oda seçin"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"Oda detaylarını ve mesaj logunu görüntülemek için sol taraftan bir oda seçin."})]})})})]}),i.jsx(sd,{open:C,onOpenChange:T,children:i.jsxs(cd,{children:[i.jsxs(dd,{children:[i.jsx(md,{children:"Oda Düzenle"}),i.jsx(hd,{children:"Oda bilgilerini güncelleyin."})]}),j&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"edit-room-name",children:"Oda Adı"}),i.jsx(co,{id:"edit-room-name",value:j.name,onChange:e=>k((t=>t?{...t,name:e.target.value}:null))})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"edit-room-description",children:"Açıklama"}),i.jsx(v6,{id:"edit-room-description",value:j.description,onChange:e=>k((t=>t?{...t,description:e.target.value}:null)),rows:3})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"edit-room-type",children:"Oda Tipi"}),i.jsxs(eO,{value:j.room_type,onValueChange:e=>k((t=>t?{...t,room_type:e}:null)),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"general",children:"Genel"}),i.jsx(iO,{value:"announcement",children:"Duyuru"}),i.jsx(iO,{value:"design",children:"Tasarım"})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(D8,{id:"edit-room-active",checked:j.is_active,onCheckedChange:e=>k((t=>t?{...t,is_active:e}:null))}),i.jsx(po,{htmlFor:"edit-room-active",children:"Oda Aktif"})]})]}),i.jsxs(ud,{children:[i.jsx(oo,{variant:"outline",onClick:()=>T(!1),children:"İptal"}),i.jsx(oo,{onClick:()=>{j&&(d({roomId:j.id,updates:{name:j.name,description:j.description,room_type:j.room_type,is_active:j.is_active}}),k(null),T(!1))},disabled:!(null==j?void 0:j.name)||x,children:x?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}),"Güncelleniyor..."]}):"Güncelle"})]})]})}),i.jsx(sd,{open:O,onOpenChange:P,children:i.jsxs(cd,{className:"max-w-2xl",children:[i.jsxs(dd,{children:[i.jsx(md,{children:"Oda İzinlerini Düzenle"}),i.jsx(hd,{children:"Her rol için okuma ve yazma izinlerini belirleyin."})]}),i.jsx("div",{className:"space-y-6",children:Object.entries(w).map((([e,t])=>i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("h3",{className:"font-medium mb-3 capitalize",children:"yonetici"===e?"Yönetici":"toptanci"===e?"Toptancı":"Grafiker"}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(D8,{id:`${e}-read`,checked:t.can_read,onCheckedChange:t=>N((r=>({...r,[e]:{...r[e],can_read:t}})))}),i.jsx(po,{htmlFor:`${e}-read`,children:"Okuma İzni"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(D8,{id:`${e}-write`,checked:t.can_write,onCheckedChange:t=>N((r=>({...r,[e]:{...r[e],can_write:t}})))}),i.jsx(po,{htmlFor:`${e}-write`,children:"Yazma İzni"})]})]})]},e)))}),i.jsxs(ud,{children:[i.jsx(oo,{variant:"outline",onClick:()=>P(!1),children:"İptal"}),i.jsx(oo,{onClick:()=>{if(!t)return;const e=Object.entries(w).map((([e,r])=>({room_id:t.id,role:e,can_read:r.can_read,can_write:r.can_write})));m(e),P(!1)},disabled:f,children:f?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}),"Güncelleniyor..."]}):"İzinleri Güncelle"})]})]})})]})},C9=()=>{const{toast:e}=at(),t=$e(),[r,a]=ze.useState("company"),[n,s]=ze.useState({stock_threshold:"20",tax_rate:"0",company_name:"",company_address:"",company_phone:"",company_email:"",company_tax_number:"",invoice_prefix:"INV",order_prefix:"ORD",currency:"TRY",email_notifications:!0,low_stock_notifications:!0,auto_backup:!1,yurtici_username:"",yurtici_password:"",yurtici_token:"",yurtici_sms_code:"",parasut_username:"",parasut_password:"",parasut_token:"",parasut_token_expires_at:"",parasut_company_id:"550402"}),[l,o]=ze.useState({client_secret:!1,password:!1,yurtici_password:!1,parasut_password:!1}),[c,d]=ze.useState({isLoading:!1,step:"credentials",error:null,smsRequired:!1}),[u,m]=ze.useState({isLoading:!1,step:"initial",error:null,isRunning:!1,lastUpdated:null,timeToNext:null,nextUpdateTime:null,bearerToken:null,tokensMatch:!1,uptime:0,platform:"",nodeVersion:"",totalOldTokens:0,isAutoUpdateRunning:!1,oldTokens:[],currentToken:null}),[h,p]=ze.useState({target:"user",userId:"",title:"",message:"",type:"info"}),[x,g]=ze.useState(!1);Jl();const{data:f}=qe({queryKey:["notify-users"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("profiles").select("id, full_name, company, role").order("full_name",{ascending:!0});if(t)throw t;return e||[]}}),[y,v]=ze.useState("");ze.useState(!1);const{data:b,isLoading:j}=qe({queryKey:["system-settings"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("system_settings").select("*");if(t)throw t;return e}}),{data:k,isLoading:w}=qe({queryKey:["low-stock-products",n.stock_threshold],queryFn:async()=>{const e=parseInt(n.stock_threshold)||10,{data:t,error:r}=await Wl.from("product_variations").select("\n          *,\n          products (name, code)\n        ").lt("stock_quantity",e);if(r)throw r;return t}}),N=Ke({mutationFn:async e=>{const t=e.map((({setting_key:e,setting_value:t})=>Wl.from("system_settings").upsert({setting_key:e,setting_value:t,updated_at:(new Date).toISOString()},{onConflict:"setting_key"})));if((await Promise.all(t)).filter((e=>e.error)).length>0)throw new Error("Ayarlar güncellenirken hata oluştu")},onSuccess:()=>{e({title:"Başarılı",description:"Ayarlar başarıyla güncellendi."}),t.invalidateQueries({queryKey:["system-settings"]})},onError:t=>{e({title:"Hata",description:"Ayarlar güncellenirken bir hata oluştu.",variant:"destructive"})}});ze.useEffect((()=>{if(b){const e=b.reduce(((e,t)=>(e[t.setting_key]=t.setting_value,e)),{});s({stock_threshold:e.stock_threshold||"10",tax_rate:e.tax_rate||"18",company_name:e.company_name||"",company_address:e.company_address||"",company_phone:e.company_phone||"",company_email:e.company_email||"",company_tax_number:e.company_tax_number||"",invoice_prefix:e.invoice_prefix||"INV",order_prefix:e.order_prefix||"ORD",currency:e.currency||"TRY",email_notifications:"false"!==e.email_notifications,low_stock_notifications:"false"!==e.low_stock_notifications,auto_backup:"true"===e.auto_backup,yurtici_username:e.yurtici_username||"",yurtici_password:e.yurtici_password||"",yurtici_token:e.yurtici_token||"",yurtici_sms_code:e.yurtici_sms_code||"",parasut_username:e.parasut_username||"",parasut_password:e.parasut_password||"",parasut_token:e.parasut_token||"",parasut_token_expires_at:e.parasut_token_expires_at||"",parasut_company_id:e.parasut_company_id||"550402"})}}),[b]),ze.useEffect((()=>{if(b){const e=b.reduce(((e,t)=>(e[t.setting_key]=t.setting_value,e)),{});e.parasut_cookie_data&&v(e.parasut_cookie_data)}}),[b]);const _=(e,t)=>{s((r=>({...r,[e]:t})))},S=async()=>{try{const r=await fetch("https://cors-bypass.redexdatabase.workers.dev/https://parasute.baltacikurumsal.com/api/bearer");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const a=await r.text();let n;try{n=JSON.parse(a)}catch(die){throw new Error(`API geçersiz JSON döndürdü: ${a.substring(0,100)}...`)}let s=await(async e=>{try{const{data:t}=await Wl.from("system_settings").select("setting_value").eq("setting_key","parasut_token").single();return(null==t?void 0:t.setting_value)===e}catch(t){return!1}})(n.bearerToken);if(!s&&n.bearerToken)try{await Wl.from("system_settings").upsert({setting_key:"parasut_token",setting_value:n.bearerToken,setting_type:"string",description:"Paraşüt API Bearer Token",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),s=!0}catch(t){e({title:"Hata",description:"Token Supabase'e kaydedilemedi.",variant:"destructive"})}m((e=>({...e,bearerToken:n.bearerToken,lastUpdated:n.lastUpdated,isRunning:n.isRunning,timeToNext:n.timeToNext,tokensMatch:s}))),e({title:"Token Alındı",description:s?"Güncel bearer token başarıyla alındı ve kaydedildi.":"Token alındı fakat kaydedilemedi.",variant:s?"default":"destructive"})}catch(t){m((e=>({...e,error:"Token alınamadı: "+(t instanceof Error?t.message:"Bilinmeyen hata")})))}},C=async e=>{try{const t=await fetch("https://cors-bypass.redexdatabase.workers.dev/https://parasute.baltacikurumsal.com/api/status",{signal:null==e?void 0:e.signal});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if("running"===r.status){const t=await fetch("https://cors-bypass.redexdatabase.workers.dev/https://parasute.baltacikurumsal.com/api/bearer",{signal:null==e?void 0:e.signal});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();if(a.bearerToken){const{data:e}=await Wl.from("system_settings").select("setting_value").eq("setting_key","parasut_token").single();(null==e?void 0:e.setting_value)!==a.bearerToken&&await Wl.from("system_settings").upsert({setting_key:"parasut_token",setting_value:a.bearerToken,setting_type:"string",description:"Paraşüt API Bearer Token",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),m((e=>({...e,step:"running",isRunning:!0,lastUpdated:r.lastUpdated,timeToNext:r.nextUpdate,uptime:r.uptime,platform:r.platform,nodeVersion:r.nodeVersion,totalOldTokens:r.totalOldTokens,isAutoUpdateRunning:r.isAutoUpdateRunning,bearerToken:a.bearerToken,tokensMatch:!0,error:null})))}}else m((e=>({...e,step:"stopped",isRunning:!1,lastUpdated:r.lastUpdated,timeToNext:null,error:null})))}catch(t){if(t instanceof Error&&"AbortError"===t.name)return;m((e=>({...e,error:"Servis durumu alınamadı: "+(t instanceof Error?t.message:"Bilinmeyen hata")})))}};ze.useEffect((()=>{const e=new AbortController;return C(e),()=>{e.abort()}}),[]);return j?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6 p-6",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[i.jsx(La,{className:"h-8 w-8"}),"Sistem Ayarları"]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Sistem genelindeki ayarları yönetin"})]}),i.jsxs(Yo,{defaultValue:"company",className:"space-y-6",value:r,onValueChange:a,children:[i.jsxs(Vo,{className:"grid w-full grid-cols-6",children:[i.jsxs(Go,{value:"company",className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4"}),"Şirket"]}),i.jsxs(Go,{value:"general",className:"flex items-center gap-2",children:[i.jsx(La,{className:"h-4 w-4"}),"Genel"]}),i.jsxs(Go,{value:"chat",className:"flex items-center gap-2",children:[i.jsx(pa,{className:"h-4 w-4"}),"Sohbet"]}),i.jsxs(Go,{value:"sales",className:"flex items-center gap-2",children:[i.jsx(gr,{className:"h-4 w-4"}),"Satış Verileri"]}),i.jsxs(Go,{value:"notifications",className:"flex items-center gap-2",children:[i.jsx(cr,{className:"h-4 w-4"}),"Bildirimler"]}),i.jsxs(Go,{value:"integrations",className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-4 w-4"}),"Entegrasyonlar"]})]}),i.jsx(Wo,{value:"company",className:"space-y-6",children:i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-5 w-5"}),"Şirket Bilgileri"]}),i.jsx(so,{children:"Şirket bilgilerini ve iletişim detaylarını yönetin"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"company-name",children:"Şirket Adı"}),i.jsx(co,{id:"company-name",value:n.company_name,onChange:e=>_("company_name",e.target.value),placeholder:"Şirket adınızı girin"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"company-address",children:"Şirket Adresi"}),i.jsx(v6,{id:"company-address",value:n.company_address,onChange:e=>_("company_address",e.target.value),placeholder:"Şirket adresinizi girin",rows:3})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"company-phone",children:"Şirket Telefonu"}),i.jsx(co,{id:"company-phone",value:n.company_phone,onChange:e=>_("company_phone",e.target.value),placeholder:"+90 XXX XXX XX XX"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"company-email",children:"Şirket E-posta"}),i.jsx(co,{id:"company-email",type:"email",value:n.company_email,onChange:e=>_("company_email",e.target.value),placeholder:"info@sirket.com"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"company-tax-number",children:"Vergi Numarası"}),i.jsx(co,{id:"company-tax-number",value:n.company_tax_number,onChange:e=>_("company_tax_number",e.target.value),placeholder:"1234567890"})]})]})]})}),i.jsx(Wo,{value:"general",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(La,{className:"h-5 w-5"}),"Genel Ayarlar"]}),i.jsx(so,{children:"Temel sistem ayarlarını yapılandırın"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"tax-rate",children:"Varsayılan KDV Oranı (%)"}),i.jsx(co,{id:"tax-rate",type:"number",value:n.tax_rate,onChange:e=>_("tax_rate",e.target.value),placeholder:"18",min:"0",max:"100"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"currency",children:"Para Birimi"}),i.jsx(co,{id:"currency",value:n.currency,onChange:e=>_("currency",e.target.value),placeholder:"TRY"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"invoice-prefix",children:"Fatura Numarası Ön Eki"}),i.jsx(co,{id:"invoice-prefix",value:n.invoice_prefix,onChange:e=>_("invoice_prefix",e.target.value),placeholder:"INV"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"order-prefix",children:"Sipariş Numarası Ön Eki"}),i.jsx(co,{id:"order-prefix",value:n.order_prefix,onChange:e=>_("order_prefix",e.target.value),placeholder:"ORD"})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(nn,{className:"h-5 w-5"}),"Stok Uyarı Ayarları"]}),i.jsx(so,{children:"Düşük stok seviyesi için uyarı limitini belirleyin"})]}),i.jsx(io,{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(po,{htmlFor:"stock-threshold",children:"Stok Uyarı Limiti"}),i.jsx(co,{id:"stock-threshold",type:"number",value:n.stock_threshold,onChange:e=>_("stock_threshold",e.target.value),placeholder:"10",min:"0"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Bu sayıdan az stok olduğunda uyarı verilecek"})]})})]})]})}),i.jsx(Wo,{value:"chat",className:"space-y-6",children:i.jsx(S9,{})}),i.jsx(Wo,{value:"sales",className:"space-y-6",children:i.jsx(_9,{})}),i.jsxs(Wo,{value:"notifications",className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(cr,{className:"h-5 w-5"}),"Bildirim Ayarları"]}),i.jsx(so,{children:"Sistem bildirimlerini yönetin"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(po,{children:"E-posta Bildirimleri"}),i.jsx(D8,{checked:n.email_notifications,onCheckedChange:e=>_("email_notifications",e)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(po,{children:"Düşük Stok Bildirimleri"}),i.jsx(D8,{checked:n.low_stock_notifications,onCheckedChange:e=>_("low_stock_notifications",e)})]}),i.jsx(vo,{className:"my-2"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"text-sm font-medium",children:"Bildirim Gönder"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(po,{children:"Hedef"}),i.jsxs(eO,{value:h.target,onValueChange:e=>p((t=>({...t,target:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Hedef seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"user",children:"Tek Kullanıcı"}),i.jsx(iO,{value:"all",children:"Tüm Kullanıcılar"})]})]})]}),"user"===h.target&&i.jsxs("div",{className:"space-y-1",children:[i.jsx(po,{children:"Kullanıcı"}),i.jsxs(eO,{value:h.userId,onValueChange:e=>p((t=>({...t,userId:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Kullanıcı seçin"})}),i.jsx(sO,{className:"max-h-72 overflow-auto",children:null==f?void 0:f.map((e=>i.jsxs(iO,{value:e.id,children:[e.full_name||e.id," ",e.company?`- ${e.company}`:""]},e.id)))})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(po,{children:"Başlık"}),i.jsx(co,{value:h.title,onChange:e=>p((t=>({...t,title:e.target.value}))),placeholder:"Örn: Sistem Duyurusu"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(po,{children:"Tür"}),i.jsxs(eO,{value:h.type,onValueChange:e=>p((t=>({...t,type:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Tür seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"info",children:"Bilgi"}),i.jsx(iO,{value:"warning",children:"Uyarı"}),i.jsx(iO,{value:"success",children:"Başarı"}),i.jsx(iO,{value:"error",children:"Hata"})]})]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(po,{children:"Mesaj"}),i.jsx(v6,{value:h.message,onChange:e=>p((t=>({...t,message:e.target.value}))),rows:4,placeholder:"Kullanıcılara iletilecek mesaj"})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(oo,{onClick:async()=>{try{if(!h.title||!h.message)return void e({title:"Uyarı",description:"Başlık ve mesaj zorunludur",variant:"destructive"});if(g(!0),"all"===h.target){const{data:e,error:t}=await Wl.from("profiles").select("id");if(t)throw t;const r=(e||[]).map((e=>({user_id:e.id,title:h.title,message:h.message,type:h.type,is_read:!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})));if(r.length>0){const{error:e}=await Wl.from("notifications").insert(r);if(e)throw e}}else{if(!h.userId)return e({title:"Uyarı",description:"Lütfen kullanıcı seçin",variant:"destructive"}),void g(!1);const{error:t}=await Wl.from("notifications").insert({user_id:h.userId,title:h.title,message:h.message,type:h.type,is_read:!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()});if(t)throw t}e({title:"Başarılı",description:"Bildirim gönderildi"}),p({target:"user",userId:"",title:"",message:"",type:"info"})}catch(t){e({title:"Hata",description:t.message||"Bildirim gönderilemedi",variant:"destructive"})}finally{g(!1)}},disabled:x,children:[x?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):null,"Gönder"]})})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5"}),"Düşük Stoklu Ürünler",k&&i.jsx(Co,{variant:"destructive",children:k.length})]}),i.jsxs(so,{children:["Stok seviyesi ",n.stock_threshold," adetten az olan ürünler"]})]}),i.jsx(io,{children:w?i.jsx("div",{className:"flex justify-center py-4",children:i.jsx(oa,{className:"h-6 w-6 animate-spin"})}):k&&k.length>0?i.jsx("div",{className:"space-y-2",children:k.map((e=>{var t,r;return i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[null==(t=e.products)?void 0:t.name," - ",e.color," (",e.size,")"]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",e.sku," | Kod: ",null==(r=e.products)?void 0:r.code]})]}),i.jsxs(Co,{variant:0===e.stock_quantity?"destructive":"secondary",children:[e.stock_quantity," adet"]})]},e.id)}))}):i.jsx("p",{className:"text-gray-500 text-center py-8",children:"Düşük stoklu ürün bulunmamaktadır."})})]})]}),i.jsxs(Wo,{value:"integrations",className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5"}),"Paraşüt API"]}),i.jsx(so,{children:"Paraşüt Otomatik Token Yönetimi"})]}),i.jsxs(io,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(po,{children:"Token Servisi Durumu"}),i.jsx(Co,{variant:"error"===u.step?"destructive":"outline",className:"running"===u.step?"bg-green-50":"",children:i.jsxs("div",{className:"flex items-center gap-2",children:["running"===u.step&&i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"stopped"===u.step?"Durduruldu":"running"===u.step?"Aktif":"error"===u.step?"Hata":"Başlatılmadı"]})})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(po,{children:"Token Durumu"}),i.jsx(yi,{children:i.jsxs(vi,{children:[i.jsx(bi,{children:i.jsx(Co,{variant:u.tokensMatch?"outline":"destructive",className:u.tokensMatch?"bg-green-50":"",children:i.jsxs("div",{className:"flex items-center gap-2",children:[u.tokensMatch?i.jsx(Or,{className:"h-4 w-4 text-green-500"}):i.jsx(nn,{className:"h-4 w-4"}),u.tokensMatch?"Token Eşleşiyor":"Token Eşleşmiyor"]})})}),i.jsx(ji,{children:i.jsxs("p",{children:["Supabase ve API tokenları ",u.tokensMatch?"eşleşiyor":"eşleşmiyor"]})})]})})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(po,{children:"Sonraki Yenilenme"}),i.jsx(Co,{variant:"secondary",children:u.timeToNext?u.timeToNext.formatted:"--:--"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(po,{children:"Son Güncellenme"}),i.jsx("span",{className:"text-sm text-gray-500",children:u.lastUpdated?new Date(u.lastUpdated).toLocaleString("tr-TR"):"--"})]}),u.nextUpdateTime&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(po,{children:"Yenilenme Zamanı"}),i.jsx("span",{className:"text-sm text-gray-500",children:new Date(u.nextUpdateTime).toLocaleString("tr-TR")})]})]}),i.jsx(vo,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(po,{children:"API Kontrol Araçları"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs(oo,{variant:"outline",className:"w-full",onClick:S,disabled:u.isLoading,children:[i.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Güncel Token"]}),i.jsxs(oo,{variant:"outline",className:"w-full",onClick:async()=>{try{const t=await fetch("https://cors-bypass.redexdatabase.workers.dev/https://parasute.baltacikurumsal.com/api/time");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.text();let a;try{a=JSON.parse(r)}catch(die){throw new Error(`API geçersiz JSON döndürdü: ${r.substring(0,100)}...`)}m((e=>({...e,isRunning:a.isRunning,lastUpdated:a.lastUpdated,timeToNext:a.timeToNextUpdate,nextUpdateTime:a.nextUpdateTime}))),e({title:"Süre Bilgisi Alındı",description:`Sonraki yenilenmeye ${a.timeToNextUpdate.minutes} dakika ${a.timeToNextUpdate.seconds} saniye var.`})}catch(t){m((e=>({...e,error:"Süre bilgisi alınamadı: "+(t instanceof Error?t.message:"Bilinmeyen hata")})))}},disabled:u.isLoading,children:[i.jsx(zr,{className:"h-4 w-4 mr-2"}),"Yenileme Süresi"]}),i.jsxs(sd,{children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{variant:"outline",className:"w-full",onClick:async()=>{try{const t=await fetch("https://cors-bypass.redexdatabase.workers.dev/https://parasute.baltacikurumsal.com/api/old-bearer");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.text();let a;try{a=JSON.parse(r)}catch(die){throw new Error(`API geçersiz JSON döndürdü: ${r.substring(0,100)}...`)}if(!a.oldTokens||!Array.isArray(a.oldTokens))throw new Error("API yanıtında token geçmişi bulunamadı");m((e=>({...e,oldTokens:a.oldTokens.map((e=>({...e,token:e.fullToken}))),currentToken:a.currentToken}))),e({title:"Eski Tokenlar",description:`${a.oldTokens.length} adet token geçmişi alındı.`})}catch(t){m((e=>({...e,error:"Eski tokenlar alınamadı: "+(t instanceof Error?t.message:"Bilinmeyen hata")})))}},disabled:u.isLoading,children:[i.jsx(ta,{className:"h-4 w-4 mr-2"}),"Eski Tokenlar"]})}),i.jsxs(cd,{children:[i.jsxs(dd,{children:[i.jsx(md,{children:"Önceki Token Geçmişi"}),i.jsx(hd,{children:"Son 5 token ve güncellenme zamanları"})]}),i.jsxs("div",{className:"space-y-4 mt-4 max-h-[400px] overflow-auto",children:[u.oldTokens.map(((t,r)=>i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-medium",children:["Token #",u.oldTokens.length-r]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[new Date(t.createdAt).toLocaleString("tr-TR")," - ",new Date(t.replacedAt).toLocaleString("tr-TR")]})]}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(t.fullToken),e({title:"Kopyalandı",description:"Token panoya kopyalandı."})},children:i.jsx(Rr,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"text-sm text-muted-foreground break-all bg-muted p-2 rounded",children:[t.token,"..."]}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Kullanım süresi: ",t.age," dakika"]})]},r))),u.currentToken&&i.jsxs("div",{className:"p-4 border border-green-200 bg-green-50 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-green-700",children:"Güncel Token"}),i.jsx("div",{className:"text-xs text-green-600",children:new Date(u.currentToken.createdAt).toLocaleString("tr-TR")})]}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{u.bearerToken&&(navigator.clipboard.writeText(u.bearerToken),e({title:"Kopyalandı",description:"Güncel token panoya kopyalandı."}))},children:i.jsx(Rr,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"text-sm text-green-700 break-all bg-green-100 p-2 rounded",children:[u.currentToken.preview,"..."]})]})]})]})]}),i.jsx(yi,{children:i.jsxs(vi,{children:[i.jsx(bi,{asChild:!0,children:i.jsx("div",{className:"w-full",children:i.jsxs(oo,{variant:"outline",className:"w-full",disabled:!u.bearerToken,onClick:()=>{u.bearerToken&&(navigator.clipboard.writeText(u.bearerToken),e({title:"Kopyalandı",description:"Bearer token panoya kopyalandı."}))},children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),"Token Kopyala"]})})}),i.jsx(ji,{children:i.jsx("p",{children:"Güncel token'ı panoya kopyalar"})})]})})]})]}),i.jsx(vo,{}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(po,{children:"Servis Kontrolleri"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs(oo,{variant:"default",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{try{const t=await fetch("https://cors-bypass.redexdatabase.workers.dev/https://parasute.baltacikurumsal.com/api/start",{method:"POST"});await t.json();await C(),e({title:"Servis Başlatıldı",description:"Token yenileme servisi başarıyla başlatıldı."}),S()}catch(t){m((e=>({...e,error:"Servis başlatılamadı: "+(t instanceof Error?t.message:"Bilinmeyen hata")})))}},disabled:"running"===u.step||u.isLoading,children:[i.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Servisi Başlat"]}),i.jsxs(oo,{variant:"destructive",className:"flex-1",onClick:async()=>{try{const t=await fetch("https://cors-bypass.redexdatabase.workers.dev/https://parasute.baltacikurumsal.com/api/stop",{method:"POST"});await t.json();await C(),e({title:"Servis Durduruldu",description:"Token yenileme servisi başarıyla durduruldu."})}catch(t){m((e=>({...e,error:"Servis durdurulamadı: "+(t instanceof Error?t.message:"Bilinmeyen hata")})))}},disabled:"running"!==u.step||u.isLoading,children:[i.jsx(Ar,{className:"h-4 w-4 mr-2"}),"Servisi Durdur"]})]})]}),u.error&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(nn,{className:"h-4 w-4"}),i.jsx(T5,{children:u.error})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(sn,{className:"h-5 w-5"}),"Yurtiçi Kargo API"]}),i.jsx(so,{children:"Yurtiçi Kargo sistemine entegrasyon için gerekli bilgileri girin"})]}),i.jsxs(io,{className:"space-y-4",children:[c.error&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(nn,{className:"h-4 w-4"}),i.jsx(T5,{children:c.error})]}),"credentials"===c.step&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"yurtici-username",children:"Kullanıcı Adı"}),i.jsx(co,{id:"yurtici-username",value:n.yurtici_username,onChange:e=>_("yurtici_username",e.target.value),placeholder:"Yurtiçi Kargo kullanıcı adı",disabled:c.isLoading})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"yurtici-password",children:"Şifre"}),i.jsxs("div",{className:"relative",children:[i.jsx(co,{id:"yurtici-password",type:l.yurtici_password?"text":"password",value:n.yurtici_password,onChange:e=>_("yurtici_password",e.target.value),placeholder:"Yurtiçi Kargo şifresi",disabled:c.isLoading}),i.jsxs(oo,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>{return e="yurtici_password",void o((t=>({...t,[e]:!t[e]})));var e},disabled:c.isLoading,children:[l.yurtici_password?i.jsx(Yr,{className:"h-4 w-4"}):i.jsx(Vr,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:l.yurtici_password?"Şifreyi gizle":"Şifreyi göster"})]})]})]})]}),i.jsx(oo,{onClick:async()=>{if(n.yurtici_username&&n.yurtici_password){d((e=>({...e,isLoading:!0,error:null})));try{await Promise.all([Wl.from("system_settings").upsert({setting_key:"yurtici_username",setting_value:n.yurtici_username,setting_type:"string",description:"Yurtiçi Kargo API kullanıcı adı",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),Wl.from("system_settings").upsert({setting_key:"yurtici_password",setting_value:n.yurtici_password,setting_type:"string",description:"Yurtiçi Kargo API şifresi",updated_at:(new Date).toISOString()},{onConflict:"setting_key"})]);const t=await fetch("https://api-ykss.yurticikargo.com/api/v1/auth",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.5","Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify({Username:n.yurtici_username,Password:n.yurtici_password,Language:"tr"})}),r=await t.json();if(!t.ok)throw new Error(r.message||"Giriş başarısız");if(r.data&&"requiredSmsVerification"===r.data.errors)d((e=>({...e,step:"sms",smsRequired:!0,isLoading:!1}))),e({title:"SMS Doğrulama",description:`Telefon numaranıza (${r.data.phoneNumber}) gönderilen SMS kodunu girin.`});else if(r.data&&r.data.token){const t=r.data.token;_("yurtici_token",t),await Wl.from("system_settings").upsert({setting_key:"yurtici_token",setting_value:t,setting_type:"string",description:"Yurtiçi Kargo API auth token",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),d((e=>({...e,step:"success",isLoading:!1}))),e({title:"Başarılı",description:"Yurtiçi Kargo API'ye başarıyla bağlanıldı."})}}catch(t){d((e=>({...e,error:t instanceof Error?t.message:"Bilinmeyen bir hata oluştu",isLoading:!1})))}}else d((e=>({...e,error:"Lütfen kullanıcı adı ve şifre girin"})))},disabled:c.isLoading||!n.yurtici_username||!n.yurtici_password,className:"w-full",children:c.isLoading?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}),"Bağlanılıyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(sn,{className:"h-4 w-4 mr-2"}),"Yurtiçi Kargo API'ye Bağlan"]})})]}),"sms"===c.step&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center py-4",children:[i.jsx(pa,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"SMS Doğrulama"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Telefon numaranıza gönderilen 6 haneli SMS kodunu girin"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"yurtici-sms",children:"SMS Doğrulama Kodu"}),i.jsx(co,{id:"yurtici-sms",value:n.yurtici_sms_code,onChange:e=>_("yurtici_sms_code",e.target.value),placeholder:"6 haneli SMS kodu",maxLength:6,disabled:c.isLoading,className:"text-center text-lg tracking-widest"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:"outline",onClick:()=>d((e=>({...e,step:"credentials"}))),disabled:c.isLoading,className:"flex-1",children:"Geri Dön"}),i.jsx(oo,{onClick:async()=>{if(n.yurtici_sms_code){d((e=>({...e,isLoading:!0,error:null})));try{n.yurtici_sms_code&&await Wl.from("system_settings").upsert({setting_key:"yurtici_sms_code",setting_value:n.yurtici_sms_code,setting_type:"string",description:"Yurtiçi Kargo SMS doğrulama kodu",updated_at:(new Date).toISOString()},{onConflict:"setting_key"});const t=await fetch("https://api-ykss.yurticikargo.com/api/v1/auth",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.5","Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify({Username:n.yurtici_username,Password:n.yurtici_password,Language:"tr",smsCode:n.yurtici_sms_code})}),r=await t.json();if(!t.ok)throw new Error(r.message||"SMS doğrulama başarısız");if(!r.data||!r.data.token)throw new Error("Token alınamadı");{const t=r.data.token;_("yurtici_token",t),await Wl.from("system_settings").upsert({setting_key:"yurtici_token",setting_value:t,setting_type:"string",description:"Yurtiçi Kargo API auth token",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),d((e=>({...e,step:"success",isLoading:!1}))),e({title:"Başarılı",description:"Yurtiçi Kargo API'ye başarıyla bağlanıldı ve token kaydedildi."})}}catch(t){d((e=>({...e,error:t instanceof Error?t.message:"SMS doğrulama başarısız",isLoading:!1})))}}else d((e=>({...e,error:"Lütfen SMS kodunu girin"})))},disabled:c.isLoading||!n.yurtici_sms_code,className:"flex-1",children:c.isLoading?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}),"Doğrulanıyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),"Doğrula"]})})]})]}),"success"===c.step&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Or,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-green-700 dark:text-green-400",children:"Bağlantı Başarılı!"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Yurtiçi Kargo API'ye başarıyla bağlanıldı. Artık kargo işlemlerini kullanabilirsiniz."}),i.jsx(oo,{variant:"outline",onClick:()=>d((e=>({...e,step:"credentials",error:null}))),className:"mt-4",children:"Yeniden Yapılandır"})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(qa,{className:"h-5 w-5"}),"Sistem Güvenliği"]}),i.jsx(so,{children:"Güvenlik ve yedekleme ayarları"})]}),i.jsx(io,{className:"space-y-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(po,{children:"Otomatik Yedekleme"}),i.jsx(D8,{checked:n.auto_backup,onCheckedChange:e=>_("auto_backup",e)})]})})]})]}),"sales"!==r&&"chat"!==r&&i.jsx("div",{className:"flex justify-end",children:i.jsxs(oo,{onClick:()=>{const e=Object.entries(n).map((([e,t])=>({setting_key:e,setting_value:t.toString()})));N.mutate(e)},disabled:N.isPending,size:"lg",children:[N.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):i.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Ayarları Kaydet"]})})]})]})},T9=()=>{const[e,t]=ze.useState((()=>{const e=new Date;return{from:e,to:e}})),[r,a]=ze.useState((()=>{const e=new Date;return{from:e,to:e}})),[n,s]=ze.useState("all"),[i,l]=ze.useState("all"),[o,c]=ze.useState("all"),[d,u]=ze.useState(""),[m,h]=ze.useState(""),[p,x]=ze.useState(!1),[g,f]=ze.useState(!1),y=e=>{const t=new Date(e),r=t.getDay(),a=t.getDate()-r+(0===r?-6:1);return new Date(t.setDate(a))};return{dateRange:e,tempDateRange:r,productFilter:n,customerFilter:i,statusFilter:o,searchTerm:d,selectedCustomerName:m,datePickerOpen:p,showZeroRevenue:g,setDateRange:t,setTempDateRange:a,setProductFilter:s,setCustomerFilter:l,setStatusFilter:c,setSearchTerm:u,setSelectedCustomerName:h,setDatePickerOpen:x,setShowZeroRevenue:f,datePresets:[{label:"Bugün",type:"today"},{label:"Dün",type:"yesterday"},{label:"Bu hafta",type:"this_week"},{label:"Geçen hafta",type:"last_week"},{label:"Bu ay",type:"this_month"},{label:"Son 14 gün",type:"days",days:14},{label:"Tüm Zamanlar",type:"all_time"}],handleDatePreset:e=>{const r=new Date;let n={};switch(e.type){case"today":n={from:r,to:r};break;case"yesterday":const t=new Date(r);t.setDate(r.getDate()-1),n={from:t,to:t};break;case"this_week":n={from:y(r),to:r};break;case"last_week":const a=y(r);a.setDate(a.getDate()-7);n={from:a,to:(e=>{const t=y(e),r=new Date(t);return r.setDate(t.getDate()+6),r})(a)};break;case"this_month":n={from:new Date(r.getFullYear(),r.getMonth(),1),to:r};break;case"days":if(e.days){const t=new Date(r);t.setDate(r.getDate()-e.days),n={from:t,to:r}}break;case"all_time":n={from:new Date(2025,0,1),to:void 0}}a(n),t(n),x(!1)},handleDatePickerOpen:t=>{t&&a(e),x(t)},applyDateRange:()=>{t(r),x(!1)}}},O9=(e,t,r)=>{if(r)switch(e){case"promotion":case"ready_stock":return"PROMOSYON OYUNCU TEK ÜST";case"goalkeeper":return"PROMOSYON KALECİ TEK ÜST";case"goalkeeper_shorts":return"PROMOSYON KALECİ ŞORT";case"player_shorts":case"shorts":return"PROMOSYON OYUNCU ŞORT";case"goalkeeper_socks":return"PROMOSYON KALECİ ÇORAP";case"player_socks":case"socks":return"PROMOSYON OYUNCU ÇORAP";case"print":case"printing":return"PROMOSYON Baskı";case"product":return"PROMOSYON AKSESUAR";default:return`PROMOSYON ${e||"Diğer"}`}if(t)switch(e){case"ready_stock":case"design":return"TASARIM OYUNCU TEK ÜST";case"goalkeeper":return"TASARIM KALECİ TEK ÜST";case"goalkeeper_shorts":return"TASARIM KALECİ ŞORT";case"player_shorts":case"shorts":return"TASARIM OYUNCU ŞORT";case"goalkeeper_socks":return"TASARIM KALECİ ÇORAP";case"player_socks":case"socks":return"TASARIM ÇORAP";case"print":case"printing":return"Baskı";case"product":return"AKSESUAR";default:return e||"Diğer"}switch(e){case"ready_stock":return"HAZIR FORMA TEK ÜST";case"goalkeeper":return"HAZIR FORMA KALECİ TEK ÜST";case"goalkeeper_shorts":return"HAZIR FORMA KALECİ ŞORT";case"player_shorts":case"shorts":return"HAZIR FORMA OYUNCU ŞORT";case"goalkeeper_socks":return"HAZIR FORMA KALECİ ÇORAP";case"player_socks":case"socks":return"HAZIR FORMA OYUNCU ÇORAP";case"print":case"printing":return"Baskı";case"product":return"AKSESUAR";default:return e||"Diğer"}},P9=e=>{switch(e){case"ready_stock":return"👕";case"goalkeeper":return"🥅";case"shorts":return"🩳";case"socks":return"🧦";case"print":case"printing":return"🖨️";default:return"📦"}},A9=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),E9=e=>`${e>=0?"+":""}${e.toFixed(1)}%`;function D9({salesMetrics:e,orderItemsData:t,salesSettings:r,showZeroRevenue:a}){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-blue-950/20",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5 text-blue-600"}),"Hazır Ürünler Satış Özeti"]})}),i.jsx(io,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:((null==r?void 0:r.readyProductsList)||["HAZIR FORMA TEK ÜST","HAZIR FORMA KALECİ TEK ÜST","HAZIR FORMA KALECİ ŞORT","HAZIR FORMA OYUNCU ŞORT","HAZIR FORMA OYUNCU ÇORAP"]).map((t=>{const r=e.readyProducts.find((e=>e.type===t))||{type:t,quantity:0,revenue:0,profit:0,cost:0,percentage:0,averagePrice:0,orders:0};return{productType:t,productData:r}})).filter((({productData:e})=>a||e.revenue>0)).map((({productType:e,productData:t})=>i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border-blue-200 dark:border-blue-800 hover:shadow-lg transition-shadow",children:[i.jsx(ao,{className:"pb-3",children:i.jsx(no,{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.type})}),i.jsxs(io,{className:"space-y-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.quantity.toLocaleString("tr-TR")}),i.jsx("p",{className:"text-xs text-gray-500",children:"adet"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg font-bold text-green-600",children:A9(t.revenue)}),i.jsx("p",{className:"text-xs text-gray-500",children:"Brüt Ücret"})]}),i.jsx("div",{className:"text-center pt-2 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Birim Fiyat: ",A9(t.averagePrice)]})})]})]},t.type)))})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-white to-orange-50 dark:from-gray-800 dark:to-orange-950/20",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(bn,{className:"h-5 w-5 text-orange-600"}),"Özel Tasarımlar Satış Özeti"]})}),i.jsx(io,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:((null==r?void 0:r.customDesignsList)||["TASARIM OYUNCU TEK ÜST","TASARIM KALECİ TEK ÜST","TASARIM KALECİ ŞORT","TASARIM OYUNCU ŞORT","TASARIM ÇORAP"]).map((t=>{const r=e.customDesigns.find((e=>e.type===t))||{type:t,quantity:0,revenue:0,profit:0,cost:0,percentage:0,averagePrice:0,orders:0};return{productType:t,productData:r}})).filter((({productData:e})=>a||e.revenue>0)).map((({productType:e,productData:t})=>i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border-orange-200 dark:border-orange-800 hover:shadow-lg transition-shadow",children:[i.jsx(ao,{className:"pb-3",children:i.jsx(no,{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.type})}),i.jsxs(io,{className:"space-y-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.quantity.toLocaleString("tr-TR")}),i.jsx("p",{className:"text-xs text-gray-500",children:"adet"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg font-bold text-green-600",children:A9(t.revenue)}),i.jsx("p",{className:"text-xs text-gray-500",children:"Brüt Ücret"})]}),i.jsx("div",{className:"text-center pt-2 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Birim Fiyat: ",A9(t.averagePrice)]})})]})]},t.type)))})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-green-950/20",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5 text-green-600"}),"Promosyon Ürünleri Satış Özeti"]})}),i.jsx(io,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:((null==r?void 0:r.promotionProductsList)||["PROMOSYON OYUNCU TEK ÜST","PROMOSYON KALECİ TEK ÜST","PROMOSYON OYUNCU ŞORT","PROMOSYON KALECİ ŞORT","PROMOSYON OYUNCU ÇORAP"]).map((t=>{var r;const a=(null==(r=e.promotionProducts)?void 0:r.find((e=>e.type===t)))||{type:t,quantity:0,revenue:0,profit:0,cost:0,percentage:0,averagePrice:0,orders:0};return{productType:t,productData:a}})).filter((({productData:e})=>a||e.revenue>0)).map((({productType:e,productData:t})=>i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border-green-200 dark:border-green-800 hover:shadow-lg transition-shadow",children:[i.jsx(ao,{className:"pb-3",children:i.jsx(no,{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.type})}),i.jsxs(io,{className:"space-y-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.quantity.toLocaleString("tr-TR")}),i.jsx("p",{className:"text-xs text-gray-500",children:"adet"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg font-bold text-green-600",children:A9(t.revenue)}),i.jsx("p",{className:"text-xs text-gray-500",children:"Brüt Ücret"})]}),i.jsx("div",{className:"text-center pt-2 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Birim Fiyat: ",A9(t.averagePrice)]})})]})]},t.type)))})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-white to-teal-50 dark:from-gray-800 dark:to-teal-950/20",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5 text-teal-600"}),"Ek Ürünler Satış Özeti"]})}),i.jsx(io,{children:(()=>{const e=null==t?void 0:t.filter((e=>{const t=["tekmelik","eldiven","yağmurluk","kaptan bandı","yelek"];if(e.is_additional_product){if(e.product_name){const r=e.product_name.toLowerCase();return t.some((e=>r.includes(e)))}if(e.notes){const r=e.notes.toLowerCase();return t.some((e=>r.includes(e)))}}if("product"===e.item_type&&e.product_name){const r=e.product_name.toLowerCase();return t.some((e=>r.includes(e)))}return!1})).reduce(((e,t)=>{let a=t.product_name;if(!a&&t.notes){const e=t.notes.split(" - ");e.length>0&&(a=e[0].trim())}return a=a||t.item_type||(null==r?void 0:r.unknownProduct)||"Bilinmeyen Ürün",e[a]||(e[a]={quantity:0,revenue:0,cost:0,orders:new Set}),e[a].quantity+=t.quantity,e[a].revenue+=t.total_price,e[a].cost+=t.cost_price*t.quantity,e[a].orders.add(t.order_id),e}),{}),n=Object.entries(e||{}).map((([e,t])=>({name:e,quantity:t.quantity,revenue:t.revenue,profit:t.revenue-t.cost,cost:t.cost,averagePrice:t.quantity>0?t.revenue/t.quantity:0,orders:t.orders.size}))).sort(((e,t)=>t.revenue-e.revenue));return 0===n.length?i.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[i.jsx(ba,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"text-lg font-medium",children:"Henüz ek ürün satışı bulunmamaktadır"}),i.jsx("p",{className:"text-sm",children:"Eldiven, çanta, şapka gibi ek ürün satışları burada görünecektir."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.filter((e=>a||e.revenue>0)).map(((e,t)=>i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border-teal-200 dark:border-teal-800 hover:shadow-lg transition-shadow",children:[i.jsx(ao,{className:"pb-3",children:i.jsx(no,{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name})}),i.jsxs(io,{className:"space-y-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-teal-600",children:e.quantity.toLocaleString("tr-TR")}),i.jsx("p",{className:"text-xs text-gray-500",children:"adet"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg font-bold text-green-600",children:A9(e.revenue)}),i.jsx("p",{className:"text-xs text-gray-500",children:"Brüt Ücret"})]}),i.jsx("div",{className:"text-center pt-2 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Birim Fiyat: ",A9(e.averagePrice)]})})]})]},t)))})})()})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-white to-purple-50 dark:from-gray-800 dark:to-purple-950/20",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5 text-purple-600"}),"Baskı Satış Özeti"]})}),i.jsx(io,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:(e.printProducts.length>0?e.printProducts.slice(0,7):Array(7).fill({type:"Baskı Yok",quantity:0,revenue:0,averagePrice:0})).filter((e=>a||e.revenue>0)).map(((e,t)=>i.jsxs(ro,{className:"bg-white dark:bg-gray-800 border-purple-200 dark:border-purple-800 hover:shadow-lg transition-shadow",children:[i.jsx(ao,{className:"pb-3",children:i.jsx(no,{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.type})}),i.jsxs(io,{className:"space-y-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.quantity.toLocaleString("tr-TR")}),i.jsx("p",{className:"text-xs text-gray-500",children:"adet"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg font-bold text-green-600",children:A9(e.revenue)}),i.jsx("p",{className:"text-xs text-gray-500",children:"Brüt Ücret"})]}),i.jsx("div",{className:"text-center pt-2 border-t border-gray-200 dark:border-gray-700",children:i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.basePrice&&e.basePrice>0&&e.basePrice!==e.averagePrice?i.jsxs(i.Fragment,{children:["Liste Fiyatı: ",A9(e.basePrice),i.jsx("br",{}),i.jsxs("span",{className:"text-xs text-orange-500",children:["Ortalama: ",A9(e.averagePrice)]})]}):`Birim Fiyat: ${A9(e.averagePrice)}`})})]})]},e.type+t)))})})]})]})}const M9=({totalRevenue:e,totalCost:t,totalProfit:r,monthlyTrends:a})=>{const[n,s]=ze.useState({USD:{buying:0,selling:0},EUR:{buying:0,selling:0},lastUpdate:(new Date).toISOString()}),{data:l,refetch:o}=qe({queryKey:["economic-settings"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("system_settings").select("setting_key, setting_value").in("setting_key",["exchange_rate_usd_buying","exchange_rate_usd_selling","exchange_rate_eur_buying","exchange_rate_eur_selling","economic_cpi_yearly","economic_cpi_monthly","economic_ppi_yearly","economic_ppi_monthly","economic_data_date","api_refetch_interval_minutes","api_cache_stale_time_minutes"]);if(t)throw t;const r={};return null==e||e.forEach((e=>{r[e.setting_key]=e.setting_value})),{USD:{buying:parseFloat(r.exchange_rate_usd_buying)||39.9738,selling:parseFloat(r.exchange_rate_usd_selling)||40.0338},EUR:{buying:parseFloat(r.exchange_rate_eur_buying)||46.9146,selling:parseFloat(r.exchange_rate_eur_selling)||46.985},CPI:{yearly:parseFloat(r.economic_cpi_yearly)||35.05,monthly:parseFloat(r.economic_cpi_monthly)||1.37},PPI:{yearly:parseFloat(r.economic_ppi_yearly)||24.45,monthly:parseFloat(r.economic_ppi_monthly)||2.46},dataDate:r.economic_data_date||"Haziran 2025",refetchInterval:60*(parseInt(r.api_refetch_interval_minutes)||60)*1e3,staleTime:60*(parseInt(r.api_cache_stale_time_minutes)||30)*1e3}}});ze.useEffect((()=>{l&&s({USD:l.USD,EUR:l.EUR,lastUpdate:(new Date).toISOString()})}),[l]);const c=e/(n.USD.selling||1),d=e/(n.EUR.selling||1),u=r/(n.USD.selling||1),m=r/(n.EUR.selling||1),h=e/(1+((null==l?void 0:l.CPI.yearly)||35.05)/100);null==l||l.CPI.yearly;const p=[{name:"TRY",revenue:e,profit:r,currency:"₺"},{name:"USD",revenue:c,profit:u,currency:"$"},{name:"EUR",revenue:d,profit:m,currency:"€"}],x="#10b981",g="#3b82f6",f=t*(((null==l?void 0:l.PPI.monthly)||2.46)/100),y=t*(1+((null==l?void 0:l.PPI.yearly)||24.45)/100),v=100-((null==l?void 0:l.CPI.yearly)||35.05),b=r/e*100-(((null==l?void 0:l.CPI.yearly)||35.05)-((null==l?void 0:l.PPI.yearly)||24.45));return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Jr,{className:"h-5 w-5"}),"Döviz Kurları"]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>o(),className:"gap-2",children:[i.jsx(Da,{className:"h-4 w-4"}),"Güncelle"]})]})}),i.jsx(io,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Lr,{className:"h-8 w-8 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:"USD/TRY"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amerikan Doları"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-lg font-bold text-blue-600",children:n.USD.selling.toFixed(4)}),i.jsx("p",{className:"text-sm text-gray-600",children:"Satış"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ur,{className:"h-8 w-8 text-purple-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:"EUR/TRY"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Euro"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-lg font-bold text-purple-600",children:n.EUR.selling.toFixed(4)}),i.jsx("p",{className:"text-sm text-gray-600",children:"Satış"})]})]})]}),i.jsx("div",{className:"h-64",children:i.jsx(XL,{width:"100%",height:"100%",children:i.jsxs(g5,{data:p,children:[i.jsx(H2,{strokeDasharray:"3 3"}),i.jsx(i3,{dataKey:"name"}),i.jsx(f3,{}),i.jsx(kL,{formatter:(e,t)=>[A9(e),"revenue"===t?"Ciro":"Kar"]}),i.jsx($F,{}),i.jsx(B0,{dataKey:"revenue",fill:x,name:"Ciro"}),i.jsx(B0,{dataKey:"profit",fill:g,name:"Kar"})]})})})]})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(gr,{className:"h-5 w-5"}),"Ekonomik Göstergeler Analizi"]}),i.jsx(Co,{variant:"secondary",className:"text-xs",children:null==l?void 0:l.dataDate})]})}),i.jsxs(io,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx(ro,{className:"bg-orange-50 dark:bg-orange-950/20 border-orange-200",children:i.jsx(io,{className:"p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"TÜFE (Yıllık)"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600 flex items-center justify-center gap-1",children:[i.jsx(sr,{className:"h-5 w-5"}),"%",null==l?void 0:l.CPI.yearly]})]})})}),i.jsx(ro,{className:"bg-orange-50 dark:bg-orange-950/20 border-orange-200",children:i.jsx(io,{className:"p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"TÜFE (Aylık)"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600 flex items-center justify-center gap-1",children:[i.jsx(sr,{className:"h-5 w-5"}),"%",null==l?void 0:l.CPI.monthly]})]})})}),i.jsx(ro,{className:"bg-purple-50 dark:bg-purple-950/20 border-purple-200",children:i.jsx(io,{className:"p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Yİ-ÜFE (Yıllık)"}),i.jsxs("p",{className:"text-2xl font-bold text-purple-600 flex items-center justify-center gap-1",children:[i.jsx(sr,{className:"h-5 w-5"}),"%",null==l?void 0:l.PPI.yearly]})]})})}),i.jsx(ro,{className:"bg-purple-50 dark:bg-purple-950/20 border-purple-200",children:i.jsx(io,{className:"p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Yİ-ÜFE (Aylık)"}),i.jsxs("p",{className:"text-2xl font-bold text-purple-600 flex items-center justify-center gap-1",children:[i.jsx(sr,{className:"h-5 w-5"}),"%",null==l?void 0:l.PPI.monthly]})]})})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(ro,{className:"bg-gray-50 dark:bg-gray-800/50",children:[i.jsx(ao,{children:i.jsx(no,{className:"text-sm",children:"Enflasyon Etkisi"})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-sm",children:"Nominal Ciro"}),i.jsx("span",{className:"text-sm font-bold",children:A9(e)})]}),i.jsx(Ad,{value:100,className:"h-2"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-sm",children:"Reel Ciro"}),i.jsx("span",{className:"text-sm font-bold",children:A9(h)})]}),i.jsx(Ad,{value:h/e*100,className:"h-2"})]}),i.jsxs(C5,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20",children:[i.jsx(Tr,{className:"h-4 w-4 text-orange-600"}),i.jsxs(T5,{children:["Enflasyon nedeniyle satın alma gücü kaybı: %",(100-v).toFixed(1)]})]})]})})]}),i.jsxs(ro,{className:"bg-gray-50 dark:bg-gray-800/50",children:[i.jsx(ao,{children:i.jsx(no,{className:"text-sm",children:"Maliyet Projeksiyonu"})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300 mb-2",children:"Tahmini Aylık Maliyet Artışı"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-300",children:A9(f)})]}),i.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2",children:"Yıllık Projeksiyon"}),i.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:A9(y)})]})]})})]})]}),i.jsxs(ro,{className:"bg-blue-50 dark:bg-blue-950/20 border-blue-200",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[i.jsx(Za,{className:"h-5 w-5"}),"Stratejik Öneriler"]})}),i.jsx(io,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-3 text-blue-700 dark:text-blue-300",children:"Fiyatlama Stratejisi"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-green-500 mt-0.5",children:"✓"}),i.jsxs("span",{children:["Reel kar marjı: %",b.toFixed(1)]})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-red-500 mt-0.5",children:"⚠"}),i.jsxs("span",{children:["Maliyet artışları kar marjını baskılayabilir (%",null==l?void 0:l.PPI.monthly," aylık)"]})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-500 mt-0.5",children:"→"}),i.jsxs("span",{children:["Fiyatları aylık %",((((null==l?void 0:l.CPI.monthly)||1.37)+((null==l?void 0:l.PPI.monthly)||2.46))/2).toFixed(1)," artırın"]})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-blue-500 mt-0.5",children:"💡"}),i.jsx("span",{children:"Döviz bazlı fiyatlama düşünün"})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium mb-3 text-blue-700 dark:text-blue-300",children:"Maliyet Yönetimi"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-green-500 mt-0.5",children:"✓"}),i.jsx("span",{children:"Verimliliği artırın"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-500 mt-0.5",children:"→"}),i.jsx("span",{children:"Alternatif tedarikçiler bulun"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-blue-500 mt-0.5",children:"💡"}),i.jsx("span",{children:"Toplu alımlarla stok yapın"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-purple-500 mt-0.5",children:"📊"}),i.jsx("span",{children:"Aylık maliyet analizi yapın"})]})]})]})]})})]}),i.jsxs(ro,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-950/20 dark:to-purple-950/20",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Jt,{className:"h-5 w-5"}),"Ekonomik Durum Özeti"]})}),i.jsx(io,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Enflasyon Baskısı"}),i.jsxs("p",{className:"text-3xl font-bold text-yellow-700 dark:text-yellow-300",children:["%",((((null==l?void 0:l.CPI.monthly)||1.37)+((null==l?void 0:l.PPI.monthly)||2.46))/2).toFixed(1)]}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Aylık ortalama"})]}),i.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Reel Kar Marjı"}),i.jsxs("p",{className:"text-3xl font-bold text-green-700 dark:text-green-300",children:["%",b.toFixed(1)]}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Enflasyon düzeltmeli"})]}),i.jsxs("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"USD Bazlı Kar"}),i.jsxs("p",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:["$",u.toFixed(0)]}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"Döviz cinsinden"})]})]})})]})]})]})]})},z9=ze.memo((({topPerforming:e,worstPerforming:t,mostProfitable:r})=>{var a,n,s,l;qe({queryKey:["product-analytics"],queryFn:async()=>{const e=new Date,t=new Date(e);t.setUTCHours(0,0,0,0);const r=new Date(e);r.setUTCHours(23,59,59,999);const{data:a,error:n}=await Wl.from("order_items").select("\n          *,\n          orders!inner(created_at, customer_id),\n          product_variations!inner(\n            color,\n            size,\n            products!inner(name, is_design_product)\n          )\n        ").gte("orders.created_at",t.toISOString()).lte("orders.created_at",r.toISOString());if(n)throw n;const s=(null==a?void 0:a.reduce(((e,t)=>{var r,a,n,s,i,l,o;const c=(null==(a=null==(r=t.product_variations)?void 0:r.products)?void 0:a.name)||"Unknown",d=(null==(s=null==(n=t.product_variations)?void 0:n.products)?void 0:s.is_design_product)||!1;e[c]||(e[c]={name:c,isDesign:d,totalQuantity:0,totalRevenue:0,uniqueCustomers:new Set,sizes:{},colors:{},orders:0}),e[c].totalQuantity+=t.quantity,e[c].totalRevenue+=t.total_price,e[c].uniqueCustomers.add(null==(i=t.orders)?void 0:i.customer_id),e[c].orders+=1;const u=null==(l=t.product_variations)?void 0:l.size;u&&(e[c].sizes[u]=(e[c].sizes[u]||0)+t.quantity);const m=null==(o=t.product_variations)?void 0:o.color;return m&&(e[c].colors[m]=(e[c].colors[m]||0)+t.quantity),e}),{}))||{};return Object.values(s).map((e=>({...e,uniqueCustomers:e.uniqueCustomers.size,topSize:Object.entries(e.sizes).sort(((e,t)=>t[1]-e[1]))[0],topColor:Object.entries(e.colors).sort(((e,t)=>t[1]-e[1]))[0]})))}});const o=e.reduce(((e,t)=>Math.max(e,t.revenue)),0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/20 dark:to-green-900/20",children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Or,{className:"h-4 w-4 text-green-600"}),"En Başarılı Ürün"]})}),i.jsxs(io,{children:[i.jsx("p",{className:"text-lg font-bold text-green-800 dark:text-green-200",children:(null==(a=e[0])?void 0:a.name)||"-"}),i.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:A9((null==(n=e[0])?void 0:n.revenue)||0)})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20",children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Lr,{className:"h-4 w-4 text-blue-600"}),"En Kârlı Ürün"]})}),i.jsxs(io,{children:[i.jsx("p",{className:"text-lg font-bold text-blue-800 dark:text-blue-200",children:(null==(s=r[0])?void 0:s.name)||"-"}),i.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:[A9((null==(l=r[0])?void 0:l.profit)||0)," kar"]})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-950/20 dark:to-orange-900/20",children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Ua,{className:"h-4 w-4 text-orange-600"}),"Toplam Ürün Çeşidi"]})}),i.jsxs(io,{children:[i.jsx("p",{className:"text-2xl font-bold text-orange-800 dark:text-orange-200",children:new Set([...e,...t,...r].map((e=>e.name))).size}),i.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:"aktif ürün"})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/20 dark:to-purple-900/20",children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(gr,{className:"h-4 w-4 text-purple-600"}),"Ortalama Kar Marjı"]})}),i.jsxs(io,{children:[i.jsx("p",{className:"text-2xl font-bold text-purple-800 dark:text-purple-200",children:"%40.0"}),i.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"tüm ürünlerde sabit"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(an,{className:"h-5 w-5 text-green-500"}),"En Çok Ciro Getirenler"]})}),i.jsx(io,{children:i.jsx("ul",{className:"space-y-4",children:e.map(((e,t)=>i.jsxs("li",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-lg font-bold text-gray-400",children:["#",t+1]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:e.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[e.quantity," adet"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold text-green-600",children:A9(e.revenue)}),i.jsxs(Co,{variant:"secondary",className:"text-xs",children:[i.jsx(sr,{className:"h-3 w-3 mr-1"}),E9(e.margin)]})]})]}),i.jsx(Ad,{value:e.revenue/o*100,className:"h-2"})]},e.name)))})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-5 w-5 text-red-500"}),"En Düşük Ciro Getirenler"]})}),i.jsx(io,{children:i.jsx("ul",{className:"space-y-4",children:t.map(((e,t)=>i.jsxs("li",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-lg font-bold text-gray-400",children:["#",t+1]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:e.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[e.quantity," adet"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold text-red-600",children:A9(e.revenue)}),i.jsxs(Co,{variant:"destructive",className:"text-xs",children:[i.jsx(tr,{className:"h-3 w-3 mr-1"}),E9(e.margin)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tr,{className:"h-4 w-4 text-yellow-500"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Stok optimizasyonu öneriliyor"})]})]},e.name)))})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-5 w-5 text-blue-500"}),"En Kârlı Ürünler (Marj)"]})}),i.jsx(io,{children:i.jsx("ul",{className:"space-y-4",children:r.map(((e,t)=>i.jsxs("li",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-lg font-bold text-gray-400",children:["#",t+1]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:e.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[e.quantity," adet"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold text-blue-600",children:A9(e.profit)}),i.jsx(Co,{className:"bg-blue-100 text-blue-800 text-xs",children:E9(e.margin)})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsxs("span",{children:["Maliyet: ",A9(e.revenue-e.profit)]}),i.jsxs("span",{children:["Birim kar: ",A9(e.profit/e.quantity)]})]})]},e.name)))})})]})]})]})}));function R9({salesMetrics:e}){const[t,r]=ze.useState("month"),{data:a,isLoading:n}=qe({queryKey:["system-settings-financial"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("system_settings").select("setting_key, setting_value").in("setting_key",["sales_cost_percentage","sales_margin_calculation_method","sales_operational_expense_rate","sales_shipping_cost_percentage"]);if(t)throw t;const r=(null==e?void 0:e.reduce(((e,t)=>{const r=t.setting_value;return"sales_margin_calculation_method"===t.setting_key?e[t.setting_key]=r:e[t.setting_key]=parseFloat(r)||0,e}),{}))||{};return{sales_cost_percentage:r.sales_cost_percentage,sales_margin_calculation_method:r.sales_margin_calculation_method,sales_operational_expense_rate:r.sales_operational_expense_rate,sales_shipping_cost_percentage:r.sales_shipping_cost_percentage}}}),{data:s,isLoading:l}=qe({queryKey:["employee-salaries"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("employees").select("salary, is_active").eq("is_active",!0);if(t)throw t;const r=((null==e?void 0:e.map((e=>e.salary)))||[]).reduce(((e,t)=>e+t),0),a=null==e?void 0:e.length;return{totalSalaries:r,employeeCount:a,averageSalary:a?r/a:0,activeEmployees:a}}}),o=a?a.sales_operational_expense_rate/100:.15,c=a?a.sales_shipping_cost_percentage/100:.05,d={totalRevenue:e.totalRevenue,grossProfit:e.totalProfit,totalCosts:e.totalRevenue-e.totalProfit,employeeSalaries:null==s?void 0:s.totalSalaries,operationalExpenses:e.totalRevenue*o,shippingCosts:e.totalRevenue*c,netProfit:e.totalProfit-(null==s?void 0:s.totalSalaries)-e.totalRevenue*o-e.totalRevenue*c,netProfitMargin:e.totalRevenue>0?(e.totalProfit-(null==s?void 0:s.totalSalaries)-e.totalRevenue*o-e.totalRevenue*c)/e.totalRevenue*100:0,breakEvenPoint:(null==s?void 0:s.totalSalaries)+e.totalRevenue*o+e.totalRevenue*c,employeeProductivity:(null==s?void 0:s.employeeCount)?e.totalRevenue/s.employeeCount:0,revenuePerEmployee:(null==s?void 0:s.employeeCount)?e.totalRevenue/s.employeeCount:0};return null==s||s.totalSalaries,e.totalRevenue,l||n?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Finansal veriler yükleniyor..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0 shadow-lg",children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam Ciro"}),i.jsx(Lr,{className:"h-4 w-4 opacity-90"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:A9(d.totalRevenue)}),i.jsx("p",{className:"text-xs opacity-90",children:"Brüt satış geliri"})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 shadow-lg",children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Brüt Kar"}),i.jsx(an,{className:"h-4 w-4 opacity-90"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:A9(d.grossProfit)}),i.jsxs("p",{className:"text-xs opacity-90",children:["%",e.profitMargin.toFixed(1)," kar marjı"]})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-red-500 to-red-600 text-white border-0 shadow-lg",children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Çalışan Maaşları"}),i.jsx(hn,{className:"h-4 w-4 opacity-90"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:A9(d.employeeSalaries)}),i.jsxs("p",{className:"text-xs opacity-90",children:[null==s?void 0:s.employeeCount," aktif çalışan"]})]})]}),i.jsxs(ro,{className:`bg-gradient-to-br ${d.netProfit>0?"from-purple-500 to-purple-600":"from-gray-500 to-gray-600"} text-white border-0 shadow-lg`,children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Net Kar"}),d.netProfit>0?i.jsx(an,{className:"h-4 w-4 opacity-90"}):i.jsx(rn,{className:"h-4 w-4 opacity-90"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:A9(d.netProfit)}),i.jsxs("p",{className:"text-xs opacity-90",children:["%",d.netProfitMargin.toFixed(1)," net marj"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(yr,{className:"h-5 w-5 text-blue-600"}),"Gelir Dağılımı"]})}),i.jsx(io,{className:"space-y-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"Brüt Kar"}),i.jsx("span",{className:"font-bold text-green-600",children:A9(d.grossProfit)})]}),i.jsx(Ad,{value:d.grossProfit/d.totalRevenue*100,className:"h-2"}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"Ürün Maliyetleri"}),i.jsx("span",{className:"font-bold text-orange-600",children:A9(d.totalCosts)})]}),i.jsx(Ad,{value:d.totalCosts/d.totalRevenue*100,className:"h-2"})]})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(hr,{className:"h-5 w-5 text-purple-600"}),"Gider Analizi"]})}),i.jsx(io,{className:"space-y-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"Çalışan Maaşları"}),i.jsx("span",{className:"font-bold text-red-600",children:A9(d.employeeSalaries)})]}),i.jsx(Ad,{value:d.totalRevenue>0?d.employeeSalaries/d.totalRevenue*100:0,className:"h-2"}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"Operasyonel Giderler"}),i.jsx("span",{className:"font-bold text-yellow-600",children:A9(d.operationalExpenses)})]}),i.jsx(Ad,{value:d.totalRevenue>0?d.operationalExpenses/d.totalRevenue*100:0,className:"h-2"}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"Kargo Maliyetleri"}),i.jsx("span",{className:"font-bold text-orange-600",children:A9(d.shippingCosts)})]}),i.jsx(Ad,{value:d.totalRevenue>0?d.shippingCosts/d.totalRevenue*100:0,className:"h-2"})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"text-lg flex items-center gap-2",children:[i.jsx(Za,{className:"h-5 w-5 text-indigo-600"}),"Başabaş Noktası"]})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:A9(d.breakEvenPoint)}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aylık başabaş noktası"})]}),i.jsxs("div",{className:"p-3 rounded-lg "+(d.totalRevenue>d.breakEvenPoint?"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800":"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800"),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[d.totalRevenue>d.breakEvenPoint?i.jsx(Or,{className:"h-4 w-4 text-green-600"}):i.jsx(nn,{className:"h-4 w-4 text-yellow-600"}),i.jsx("span",{className:"text-sm font-medium",children:d.totalRevenue>d.breakEvenPoint?"Hedef aşıldı":"Hedefe ulaşılmadı"})]}),i.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Mevcut ciro: ",A9(d.totalRevenue)]})]})]})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"text-lg flex items-center gap-2",children:[i.jsx(hn,{className:"h-5 w-5 text-green-600"}),"Çalışan Verimliliği"]})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:A9(d.revenuePerEmployee)}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Çalışan başına ciro"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[i.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[i.jsx("p",{className:"text-lg font-semibold",children:null==s?void 0:s.employeeCount}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Toplam Çalışan"})]}),i.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[i.jsx("p",{className:"text-lg font-semibold",children:A9(null==s?void 0:s.averageSalary)}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Ortalama Maaş"})]})]})]})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"text-lg flex items-center gap-2",children:[i.jsx(mr,{className:"h-5 w-5 text-orange-600"}),"Maliyet Analizi"]})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm",children:"Personel Maliyeti"}),i.jsxs(Co,{variant:"outline",children:["%",d.totalRevenue>0?(d.employeeSalaries/d.totalRevenue*100).toFixed(1):0]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm",children:"Operasyonel Giderler"}),i.jsxs(Co,{variant:"outline",children:["%",d.totalRevenue>0?(d.operationalExpenses/d.totalRevenue*100).toFixed(1):0]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm",children:"Ürün Maliyetleri"}),i.jsxs(Co,{variant:"outline",children:["%",d.totalRevenue>0?(d.totalCosts/d.totalRevenue*100).toFixed(1):0]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm",children:"Kargo Maliyetleri"}),i.jsxs(Co,{variant:"outline",children:["%",d.totalRevenue>0?(d.shippingCosts/d.totalRevenue*100).toFixed(1):0]})]}),i.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[i.jsx("span",{className:"text-sm",children:"Toplam Maliyet"}),i.jsx(Co,{variant:"secondary",children:A9(d.totalCosts+d.employeeSalaries+d.operationalExpenses+d.shippingCosts)})]})})]})})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(bn,{className:"h-5 w-5 text-yellow-600"}),"Finansal Sağlık Göstergeleri"]})}),i.jsx(io,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[d.netProfitMargin>10?i.jsx(Or,{className:"h-5 w-5 text-green-600"}):d.netProfitMargin>5?i.jsx(na,{className:"h-5 w-5 text-yellow-600"}):i.jsx(nn,{className:"h-5 w-5 text-red-600"}),i.jsx("span",{className:"font-medium",children:"Net Kar Marjı"})]}),i.jsxs("p",{className:"text-2xl font-bold",children:["%",d.netProfitMargin.toFixed(1)]}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:d.netProfitMargin>10?"Mükemmel":d.netProfitMargin>5?"İyi":"Geliştirilmeli"})]}),i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[d.employeeSalaries/d.totalRevenue<.3?i.jsx(Or,{className:"h-5 w-5 text-green-600"}):i.jsx(nn,{className:"h-5 w-5 text-yellow-600"}),i.jsx("span",{className:"font-medium",children:"Personel Maliyet Oranı"})]}),i.jsxs("p",{className:"text-2xl font-bold",children:["%",d.totalRevenue>0?(d.employeeSalaries/d.totalRevenue*100).toFixed(1):0]}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:d.employeeSalaries/d.totalRevenue<.3?"Optimal":"Yüksek"})]}),i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[i.jsx(an,{className:"h-5 w-5 text-blue-600"}),i.jsx("span",{className:"font-medium",children:"Çalışan Verimliliği"})]}),i.jsx("p",{className:"text-2xl font-bold",children:A9(d.revenuePerEmployee)}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Aylık çalışan başına"})]}),i.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[d.netProfit>0?i.jsx(Or,{className:"h-5 w-5 text-green-600"}):i.jsx(ga,{className:"h-5 w-5 text-red-600"}),i.jsx("span",{className:"font-medium",children:"Kârlılık Durumu"})]}),i.jsx("p",{className:"text-2xl font-bold",children:d.netProfit>0?"Kârlı":"Zararlı"}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:A9(Math.abs(d.netProfit))})]})]})})]}),i.jsxs(ro,{className:"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[i.jsx(La,{className:"h-5 w-5"}),"Hesaplama Bilgileri"]})}),i.jsxs(io,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-900 rounded-lg",children:[i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["%",null==a?void 0:a.sales_cost_percentage]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Ürün Maliyet Oranı"})]}),i.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-900 rounded-lg",children:[i.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["%",null==a?void 0:a.sales_operational_expense_rate]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Operasyonel Giderler"})]}),i.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-900 rounded-lg",children:[i.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["%",null==a?void 0:a.sales_shipping_cost_percentage]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Kargo Maliyetleri"})]}),i.jsxs("div",{className:"text-center p-3 bg-white dark:bg-gray-900 rounded-lg",children:[i.jsx("p",{className:"text-lg font-bold text-purple-600",children:(null==a?void 0:a.sales_margin_calculation_method)?"Satış Üzerinden":"Maliyet Üzerinden"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Kar Hesaplama"})]})]}),i.jsxs(C5,{className:"mt-4 border-blue-200 bg-blue-50 dark:bg-blue-950/20",children:[i.jsx(na,{className:"h-4 w-4"}),i.jsxs(T5,{className:"text-sm",children:["Maliyet oranını ",i.jsx("strong",{children:"Sistem Ayarları → Satış Verileri"})," bölümünden değiştirebilirsiniz."]})]})]})]})]})}function I9({salesMetrics:e,orderItemsData:t}){return i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsxs(ro,{className:"bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-green-950/20",children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Or,{className:"h-5 w-5 text-green-600"}),"Hazır Ürünler - Detaylı Analiz"]}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Stoktan satılan hazır ürünlerin (is_design_product = false) detaylı analizi"})]}),i.jsx(io,{children:e.readyProducts.length>0?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Toplam Ciro"}),i.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:A9(e.readyProducts.reduce(((e,t)=>e+t.revenue),0))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"Toplam Adet"}),i.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:e.readyProducts.reduce(((e,t)=>e+t.quantity),0).toLocaleString("tr-TR")})]}),i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:"Toplam Sipariş"}),i.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:(()=>{const e=new Set;return null==t||t.filter((e=>!e.is_design_product)).forEach((t=>e.add(t.order_id))),e.size})()})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.readyProducts.map(((e,t)=>{const r="Forma"===e.type?"ready_stock":"Kaleci"===e.type?"goalkeeper":"Şort"===e.type?"shorts":"Çorap"===e.type?"socks":"Baskı"===e.type?"print":"other",a=P9(r),n=e.revenue>0?e.profit/e.revenue*100:0;return i.jsxs(ro,{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 border-2 hover:shadow-lg transition-shadow",children:[i.jsxs(ao,{className:"text-center pb-3",children:[i.jsx("div",{className:"text-4xl mb-2",children:a}),i.jsx(no,{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:e.type}),i.jsx("div",{className:"text-xs text-gray-500",children:"Hazır Stok"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Toplam Ciro"}),i.jsx("p",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:A9(e.revenue)}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["%",e.percentage.toFixed(1)," hazır ürün cirosunda"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:"Satış Adedi"}),i.jsx("p",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:e.quantity.toLocaleString("tr-TR")})]}),i.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-300 font-medium",children:"İçeren Sipariş"}),i.jsx("p",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:e.orders})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[i.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300 font-medium",children:"Net Kar"}),i.jsx("p",{className:"text-lg font-bold text-orange-900 dark:text-orange-100",children:A9(e.profit)}),i.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:["%",n.toFixed(1)," marj"]})]}),i.jsxs("div",{className:"text-center p-3 bg-indigo-50 dark:bg-indigo-950/20 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[i.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 font-medium",children:"Ort. Fiyat"}),i.jsx("p",{className:"text-lg font-bold text-indigo-900 dark:text-indigo-100",children:A9(e.averagePrice)})]})]})]})]},t)}))}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Hazır Ürünler - Detaylı Tablo"})}),i.jsx(io,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-4 font-medium",children:"Ürün Tipi"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Adet"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Ciro"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Kar"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Marj"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Ort. Fiyat"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Sipariş"})]})}),i.jsxs("tbody",{children:[e.readyProducts.map(((e,t)=>{const r="Forma"===e.type?"ready_stock":"Kaleci"===e.type?"goalkeeper":"Şort"===e.type?"shorts":"Çorap"===e.type?"socks":"Baskı"===e.type?"print":"other",a=P9(r),n=e.revenue>0?e.profit/e.revenue*100:0;return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:a}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.type}),i.jsx("p",{className:"text-xs text-gray-500",children:"Hazır Stok"})]})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-blue-600 dark:text-blue-400 text-lg",children:e.quantity.toLocaleString("tr-TR")})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:A9(e.revenue)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-orange-600 dark:text-orange-400 text-lg",children:A9(e.profit)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsxs("p",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:["%",n.toFixed(1)]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-indigo-600 dark:text-indigo-400 text-lg",children:A9(e.averagePrice)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-gray-600 dark:text-gray-400 text-lg",children:e.orders})})]},t)})),i.jsxs("tr",{className:"border-t-2 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",children:[i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:"📊"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 dark:text-gray-100",children:"TOPLAM"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Tüm Hazır Ürünler"})]})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-blue-700 dark:text-blue-300 text-lg",children:e.readyProducts.reduce(((e,t)=>e+t.quantity),0).toLocaleString("tr-TR")})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-green-700 dark:text-green-300 text-lg",children:A9(e.readyProducts.reduce(((e,t)=>e+t.revenue),0))})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-orange-700 dark:text-orange-300 text-lg",children:A9(e.readyProducts.reduce(((e,t)=>e+t.profit),0))})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-purple-700 dark:text-purple-300 text-lg",children:"%40.0"})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-indigo-700 dark:text-indigo-300 text-lg",children:"-"})}),i.jsxs("td",{className:"p-4 text-center",children:[i.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300 text-lg",children:(()=>{const e=new Set;return null==t||t.filter((e=>!e.is_design_product)).forEach((t=>e.add(t.order_id))),e.size})()}),i.jsx("p",{className:"text-xs text-gray-500",children:"Benzersiz"})]})]})]})]})})})]})]}):i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Henüz hazır ürün satışı bulunmamaktadır."})})]})})}function F9({salesMetrics:e,orderItemsData:t}){return i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsxs(ro,{className:"bg-gradient-to-br from-white to-orange-50 dark:from-gray-800 dark:to-orange-950/20",children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(bn,{className:"h-5 w-5 text-orange-600"}),"Özel Tasarımlar - Detaylı Analiz"]}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Özel tasarım ürünlerin (is_design_product = true) detaylı analizi"})]}),i.jsx(io,{children:e.customDesigns.length>0?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:"Toplam Ciro"}),i.jsx("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:A9(e.customDesigns.reduce(((e,t)=>e+t.revenue),0))})]}),i.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800",children:[i.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Toplam Adet"}),i.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:e.customDesigns.reduce(((e,t)=>e+t.quantity),0).toLocaleString("tr-TR")})]}),i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:"Toplam Sipariş"}),i.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:(()=>{const e=new Set;return null==t||t.filter((e=>e.is_design_product)).forEach((t=>e.add(t.order_id))),e.size})()}),i.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Benzersiz sipariş sayısı"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.customDesigns.map(((e,t)=>{const r="Forma"===e.type?"ready_stock":"Kaleci"===e.type?"goalkeeper":"Şort"===e.type?"shorts":"Çorap"===e.type?"socks":"Baskı"===e.type?"print":"other",a=P9(r),n=e.revenue>0?e.profit/e.revenue*100:0;return i.jsxs(ro,{className:"bg-gradient-to-br from-white to-orange-50 dark:from-gray-800 dark:to-orange-900 border-2 border-orange-200 dark:border-orange-800 hover:shadow-lg transition-shadow",children:[i.jsxs(ao,{className:"text-center pb-3",children:[i.jsx("div",{className:"text-4xl mb-2",children:a}),i.jsx(no,{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:e.type}),i.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:"Özel Tasarım"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:"Toplam Ciro"}),i.jsx("p",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:A9(e.revenue)}),i.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:["%",e.percentage.toFixed(1)," özel tasarım cirosunda"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-3 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800",children:[i.jsx("p",{className:"text-xs text-red-700 dark:text-red-300 font-medium",children:"Satış Adedi"}),i.jsx("p",{className:"text-lg font-bold text-red-900 dark:text-red-100",children:e.quantity.toLocaleString("tr-TR")})]}),i.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-300 font-medium",children:"İçeren Sipariş"}),i.jsx("p",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:e.orders})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-3 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[i.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 font-medium",children:"Net Kar"}),i.jsx("p",{className:"text-lg font-bold text-yellow-900 dark:text-yellow-100",children:A9(e.profit)}),i.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:["%",n.toFixed(1)," marj"]})]}),i.jsxs("div",{className:"text-center p-3 bg-indigo-50 dark:bg-indigo-950/20 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[i.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 font-medium",children:"Ort. Fiyat"}),i.jsx("p",{className:"text-lg font-bold text-indigo-900 dark:text-indigo-100",children:A9(e.averagePrice)})]})]})]})]},t)}))}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Özel Tasarımlar - Detaylı Tablo"})}),i.jsx(io,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-4 font-medium",children:"Ürün Tipi"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Adet"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Ciro"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Kar"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Marj"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Ort. Fiyat"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"İçeren Sipariş"})]})}),i.jsxs("tbody",{children:[e.customDesigns.map(((e,t)=>{const r="Forma"===e.type?"ready_stock":"Kaleci"===e.type?"goalkeeper":"Şort"===e.type?"shorts":"Çorap"===e.type?"socks":"Baskı"===e.type?"print":"other",a=P9(r),n=e.revenue>0?e.profit/e.revenue*100:0;return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-orange-50 dark:hover:bg-orange-950/10 transition-colors",children:[i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:a}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.type}),i.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Özel Tasarım"})]})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-red-600 dark:text-red-400 text-lg",children:e.quantity.toLocaleString("tr-TR")})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-orange-600 dark:text-orange-400 text-lg",children:A9(e.revenue)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-yellow-600 dark:text-yellow-400 text-lg",children:A9(e.profit)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsxs("p",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:["%",n.toFixed(1)]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-indigo-600 dark:text-indigo-400 text-lg",children:A9(e.averagePrice)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-gray-600 dark:text-gray-400 text-lg",children:e.orders})})]},t)})),i.jsxs("tr",{className:"border-t-2 border-gray-300 dark:border-gray-600 bg-orange-50 dark:bg-orange-900/20",children:[i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:"📊"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 dark:text-gray-100",children:"TOPLAM"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Tüm Özel Tasarımlar"})]})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-red-700 dark:text-red-300 text-lg",children:e.customDesigns.reduce(((e,t)=>e+t.quantity),0).toLocaleString("tr-TR")})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-orange-700 dark:text-orange-300 text-lg",children:A9(e.customDesigns.reduce(((e,t)=>e+t.revenue),0))})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-yellow-700 dark:text-yellow-300 text-lg",children:A9(e.customDesigns.reduce(((e,t)=>e+t.profit),0))})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-purple-700 dark:text-purple-300 text-lg",children:"%40.0"})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-indigo-700 dark:text-indigo-300 text-lg",children:"-"})}),i.jsxs("td",{className:"p-4 text-center",children:[i.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300 text-lg",children:(()=>{const e=new Set;return null==t||t.filter((e=>e.is_design_product)).forEach((t=>e.add(t.order_id))),e.size})()}),i.jsx("p",{className:"text-xs text-gray-500",children:"Benzersiz"})]})]})]})]})})})]})]}):i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Henüz özel tasarım ürün satışı bulunmamaktadır."})})]})})}function B9({salesMetrics:e,orderItemsData:t}){return i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsxs(ro,{className:"bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-green-950/20",children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Zr,{className:"h-5 w-5 text-green-600"}),"Promosyon Ürünleri - Detaylı Analiz"]}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Promosyon kategorisindeki ürünlerin (category = 'Promosyon') detaylı analizi"})]}),i.jsx(io,{children:e.promotionProducts&&e.promotionProducts.length>0?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Toplam Ciro"}),i.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:A9(e.promotionProducts.reduce(((e,t)=>e+t.revenue),0))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"Toplam Adet"}),i.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:e.promotionProducts.reduce(((e,t)=>e+t.quantity),0).toLocaleString("tr-TR")})]}),i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:"Toplam Sipariş"}),i.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:(()=>{const e=new Set;return null==t||t.filter((e=>{var t,r,a;const n="promotion"===e.item_type,s=(null==(t=e.color)?void 0:t.toLowerCase().includes("promosyon"))||(null==(r=e.color)?void 0:r.toLowerCase().includes("promasyon")),i="shorts"===e.item_type&&(null==(a=e.notes)?void 0:a.toLowerCase().includes("kaleci:"));return n||s||i})).forEach((t=>e.add(t.order_id))),e.size})()}),i.jsx("p",{className:"text-xs text-purple-500 dark:text-purple-400",children:"Benzersiz"})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Ürün Tipi"}),i.jsx("th",{className:"text-right p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Miktar"}),i.jsx("th",{className:"text-right p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Ciro"}),i.jsx("th",{className:"text-right p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Kar"}),i.jsx("th",{className:"text-right p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Ort. Fiyat"}),i.jsx("th",{className:"text-right p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Sipariş"}),i.jsx("th",{className:"text-right p-3 font-semibold text-gray-700 dark:text-gray-300",children:"Pay %"})]})}),i.jsx("tbody",{children:e.promotionProducts.sort(((e,t)=>t.revenue-e.revenue)).map(((e,t)=>i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 "+(t<3?"bg-green-50/30 dark:bg-green-950/10":""),children:[i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:P9(e.type)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.type}),t<3&&i.jsxs(Co,{variant:"outline",className:"text-xs mt-1",children:["Top ",t+1]})]})]})}),i.jsx("td",{className:"text-right p-3 font-mono",children:e.quantity.toLocaleString("tr-TR")}),i.jsx("td",{className:"text-right p-3 font-mono font-semibold",children:A9(e.revenue)}),i.jsx("td",{className:"text-right p-3 font-mono",children:i.jsx("span",{className:e.profit>=0?"text-green-600":"text-red-600",children:A9(e.profit)})}),i.jsx("td",{className:"text-right p-3 font-mono",children:A9(e.averagePrice)}),i.jsx("td",{className:"text-right p-3 font-mono",children:e.orders}),i.jsx("td",{className:"text-right p-3",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(e.percentage,100)}%`}})}),i.jsxs("span",{className:"text-sm font-medium min-w-[3rem]",children:[e.percentage.toFixed(1),"%"]})]})})]},e.type)))}),i.jsx("tfoot",{children:i.jsxs("tr",{className:"border-t-2 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50",children:[i.jsx("td",{className:"p-3 font-bold text-gray-900 dark:text-gray-100",children:"TOPLAM"}),i.jsx("td",{className:"text-right p-3 font-bold font-mono",children:e.promotionProducts.reduce(((e,t)=>e+t.quantity),0).toLocaleString("tr-TR")}),i.jsx("td",{className:"text-right p-3 font-bold font-mono",children:A9(e.promotionProducts.reduce(((e,t)=>e+t.revenue),0))}),i.jsx("td",{className:"text-right p-3 font-bold font-mono",children:A9(e.promotionProducts.reduce(((e,t)=>e+t.profit),0))}),i.jsx("td",{className:"text-right p-3 font-bold font-mono",children:A9(e.promotionProducts.reduce(((e,t)=>e+t.revenue),0)/Math.max(e.promotionProducts.reduce(((e,t)=>e+t.quantity),0),1))}),i.jsx("td",{className:"text-right p-3 font-bold font-mono",children:(()=>{const e=new Set;return null==t||t.filter((e=>{var t,r;return(null==(t=e.product_name)?void 0:t.toLowerCase().includes("promosyon"))||(null==(r=e.item_type)?void 0:r.toLowerCase().includes("promosyon"))})).forEach((t=>e.add(t.order_id))),e.size})()}),i.jsx("td",{className:"text-right p-3 font-bold",children:"100.0%"})]})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(ro,{children:[i.jsx(ao,{className:"pb-3",children:i.jsx(no,{className:"text-base",children:"📈 En Karlı Promosyon Ürünü"})}),i.jsx(io,{children:(()=>{const t=e.promotionProducts.sort(((e,t)=>t.profit-e.profit))[0];return t?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-semibold text-green-700 dark:text-green-300",children:t.type}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Kar:"}),i.jsx("span",{className:"ml-1 font-semibold text-green-600",children:A9(t.profit)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Miktar:"}),i.jsx("span",{className:"ml-1 font-semibold",children:t.quantity.toLocaleString("tr-TR")})]})]})]}):i.jsx("p",{className:"text-gray-500",children:"Veri bulunamadı"})})()})]}),i.jsxs(ro,{children:[i.jsx(ao,{className:"pb-3",children:i.jsx(no,{className:"text-base",children:"🎯 En Çok Satan Promosyon Ürünü"})}),i.jsx(io,{children:(()=>{const t=e.promotionProducts.sort(((e,t)=>t.quantity-e.quantity))[0];return t?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-semibold text-blue-700 dark:text-blue-300",children:t.type}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Miktar:"}),i.jsx("span",{className:"ml-1 font-semibold text-blue-600",children:t.quantity.toLocaleString("tr-TR")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Ciro:"}),i.jsx("span",{className:"ml-1 font-semibold",children:A9(t.revenue)})]})]})]}):i.jsx("p",{className:"text-gray-500",children:"Veri bulunamadı"})})()})]})]})]}):i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Henüz promosyon ürün satışı bulunmamaktadır."})})]})})}function L9({salesMetrics:e,printRequestsData:t}){return i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsxs(ro,{className:"bg-gradient-to-br from-white to-purple-50 dark:from-gray-800 dark:to-purple-950/20",children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5 text-purple-600"}),"Baskı Bölgeleri - Detaylı Analiz"]}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ürünlere uygulanan baskıların bölge bazında detaylı analizi"})]}),i.jsx(io,{children:e.printProducts.length>0?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:"Toplam Ciro"}),i.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:A9(e.printProducts.reduce(((e,t)=>e+t.revenue),0))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"Toplam Adet"}),i.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:e.printProducts.reduce(((e,t)=>e+t.quantity),0).toLocaleString("tr-TR")})]}),i.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:"Toplam Sipariş"}),i.jsx("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:(()=>{const e=new Set;return(t||[]).forEach((t=>e.add(t.order_id))),e.size})()})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.printProducts.map(((e,t)=>{const r=e.revenue>0?e.profit/e.revenue*100:0;return i.jsxs(ro,{className:"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 border-2 hover:shadow-lg transition-shadow",children:[i.jsxs(ao,{className:"text-center pb-3",children:[i.jsx("div",{className:"text-4xl mb-2",children:i.jsx(Aa,{})}),i.jsx(no,{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:e.type}),i.jsx("div",{className:"text-xs text-gray-500",children:"Baskı Bölgesi"})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Toplam Ciro"}),i.jsx("p",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:A9(e.revenue)}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["%",e.percentage.toFixed(1)," baskı cirosunda"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:"Satış Adedi"}),i.jsx("p",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:e.quantity.toLocaleString("tr-TR")})]}),i.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-300 font-medium",children:"İçeren Sipariş"}),i.jsx("p",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:e.orders})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[i.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300 font-medium",children:"Net Kar"}),i.jsx("p",{className:"text-lg font-bold text-orange-900 dark:text-orange-100",children:A9(e.profit)}),i.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:["%",r.toFixed(1)," marj"]})]}),i.jsxs("div",{className:"text-center p-3 bg-indigo-50 dark:bg-indigo-950/20 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[i.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 font-medium",children:"Ort. Fiyat"}),i.jsx("p",{className:"text-lg font-bold text-indigo-900 dark:text-indigo-100",children:A9(e.averagePrice)})]})]})]})]},t)}))}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Baskı Bölgeleri - Detaylı Tablo"})}),i.jsx(io,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-4 font-medium",children:"Baskı Bölgesi"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Adet"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Ciro"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Kar"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Marj"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Ort. Fiyat"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Sipariş"})]})}),i.jsxs("tbody",{children:[e.printProducts.map(((e,t)=>{const r=e.revenue>0?e.profit/e.revenue*100:0;return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:i.jsx(Aa,{})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.type}),i.jsx("p",{className:"text-xs text-gray-500",children:"Baskı"})]})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-blue-600 dark:text-blue-400 text-lg",children:e.quantity.toLocaleString("tr-TR")})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:A9(e.revenue)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-orange-600 dark:text-orange-400 text-lg",children:A9(e.profit)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsxs("p",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:["%",r.toFixed(1)]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-indigo-600 dark:text-indigo-400 text-lg",children:A9(e.averagePrice)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-gray-600 dark:text-gray-400 text-lg",children:e.orders})})]},t)})),i.jsxs("tr",{className:"border-t-2 border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",children:[i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:"📊"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-gray-900 dark:text-gray-100",children:"TOPLAM"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Tüm Baskılar"})]})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-blue-700 dark:text-blue-300 text-lg",children:e.printProducts.reduce(((e,t)=>e+t.quantity),0).toLocaleString("tr-TR")})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-green-700 dark:text-green-300 text-lg",children:A9(e.printProducts.reduce(((e,t)=>e+t.revenue),0))})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-orange-700 dark:text-orange-300 text-lg",children:A9(e.printProducts.reduce(((e,t)=>e+t.profit),0))})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-purple-700 dark:text-purple-300 text-lg",children:"%40.0"})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-indigo-700 dark:text-indigo-300 text-lg",children:"-"})}),i.jsxs("td",{className:"p-4 text-center",children:[i.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300 text-lg",children:(()=>{const e=new Set;return(t||[]).forEach((t=>e.add(t.order_id))),e.size})()}),i.jsx("p",{className:"text-xs text-gray-500",children:"Benzersiz"})]})]})]})]})})})]})]}):i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Henüz baskı ürün satışı bulunmamaktadır."})})]})})}function q9(){const[e,t]=ze.useState({}),[r,a]=ze.useState(!0),{toast:n}=at(),s=async()=>{try{const{data:e,error:r}=await Wl.from("system_settings").select("*");if(r)throw r;const a={};null==e||e.forEach((e=>{a[e.setting_key]=e.setting_value})),t(a)}catch(e){n({title:"Hata",description:"Ayarlar yüklenemedi",variant:"destructive"})}finally{a(!1)}};return ze.useEffect((()=>{s()}),[]),{settings:e,loading:r,updateSetting:async(e,t)=>{try{const{data:r}=await Wl.from("system_settings").select("*").eq("setting_key",e).single();if(r){const{error:r}=await Wl.from("system_settings").update({setting_value:t,updated_at:(new Date).toISOString()}).eq("setting_key",e);if(r)throw r}else{const{error:r}=await Wl.from("system_settings").insert({setting_key:e,setting_value:t,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()});if(r)throw r}await s(),n({title:"Başarılı",description:"Ayarlar kaydedildi"})}catch(r){n({title:"Hata",description:"Ayarlar kaydedilemedi",variant:"destructive"})}},refetch:s}}function $9({salesMetrics:e,ordersData:t,orderItemsData:r,printRequestsData:a}){const[n,s]=ze.useState(null),[l,o]=ze.useState(!1),[c,d]=ze.useState(""),[u,m]=ze.useState(!1),{settings:h,loading:p,updateSetting:x}=q9();ze.useEffect((()=>{h.dealer_names?d(h.dealer_names):d("HOCA\nSPOR EVI\nTuranspor")}),[h]);const g=ze.useMemo((()=>{if(!t||!r)return[];const e=(c||"HOCA\nSPOR EVI\nTuranspor").split("\n").map((e=>e.trim().toUpperCase())).filter((e=>e.length>0)),a=new Map;let n=[];try{h.dealer_control_rules&&(n=JSON.parse(h.dealer_control_rules))}catch(s){}return e.forEach((e=>{const s=t.filter((t=>((e,t)=>{const r=(e.customer_name||"").toUpperCase(),a=(e.order_number||"").toUpperCase(),s=n.find((e=>e.dealerName&&e.dealerName.toUpperCase()===t.toUpperCase()));if(s){if(s.customerNamePatterns)for(const e of s.customerNamePatterns)if(e&&r.includes(e.toUpperCase()))return!0;if(s.orderNumberPatterns)for(const e of s.orderNumberPatterns)if(e&&a.includes(e.toUpperCase()))return!0}return!!r.includes(t)})(t,e)));if(s.length>0){const t=e,n=s[0],i=n.customer_name||"";n.customer_company||n.company_name;const l=n.customer_phone||"";a.set(t,{id:t,name:e,company:i,phone:l,role:"dealer",orders:s,orderItems:[]});const o=a.get(t);s.forEach((e=>{const t=r.filter((t=>t.order_id===e.id));o.orderItems.push(...t)}))}})),Array.from(a.values()).map((e=>{var t;const r=e.orders.reduce(((e,t)=>e+t.total_amount),0),a=e.orderItems.reduce(((e,t)=>{const r=O9(t.item_type,t.is_design_product);return"HAZIR FORMA TEK ÜST"===r||"TASARIM OYUNCU TEK ÜST"===r?e+t.quantity:e}),0),n=r-e.orderItems.reduce(((e,t)=>e+t.cost_price*t.quantity),0),s=r>0?n/r*100:0,i=e.orderItems.reduce(((e,t)=>{const r=O9(t.item_type,t.is_design_product);return e[r]||(e[r]={productType:r,quantity:0,revenue:0,cost:0,profit:0,orders:new Set,is_design_product:t.is_design_product}),e[r].quantity+=t.quantity,e[r].revenue+=t.total_price,e[r].cost+=t.cost_price*t.quantity,e[r].profit+=t.total_price-t.cost_price*t.quantity,e[r].orders.add(t.order_id),e}),{}),l=Object.values(i).map((e=>({productType:e.productType,quantity:e.quantity,revenue:e.revenue,profit:e.profit,cost:e.cost,orders:e.orders.size,is_design_product:e.is_design_product}))),o=e.orderItems.filter((e=>!e.is_design_product)).reduce(((e,t)=>e+t.total_price),0),c=e.orderItems.filter((e=>e.is_design_product)).reduce(((e,t)=>e+t.total_price),0),d=e.orders.map((e=>new Date(e.created_at))),u=new Date(Math.min(...d.map((e=>e.getTime())))).toISOString(),m=new Date(Math.max(...d.map((e=>e.getTime())))).toISOString();let p="Regular";const x=parseFloat(h.customer_segment_vip_threshold)||5e3,g=parseInt(h.customer_segment_churned_days)||90;r>x?p="En Çok Satış Yapan":1===e.orders.length?p="New":(new Date).getTime()-new Date(m).getTime()>24*g*60*60*1e3&&(p="Churned");let f=0;const y=(h.commission_seller_id||"").split("|").map((e=>e.trim())).filter((e=>e)),v=parseFloat(h.commission_amount_per_unit)||2,b=(null==(t=h.commission_products)?void 0:t.split(",").map((e=>e.trim())))||[];return y.includes(e.id)&&e.orderItems.forEach((e=>{const t=O9(e.item_type,e.is_design_product);b.includes(t)&&(f+=e.quantity*v)})),{id:e.id,name:e.name,company:e.company,phone:e.phone,role:e.role,totalOrders:e.orders.length,totalRevenue:r,totalProfit:n,totalQuantity:a,averageOrderValue:e.orders.length>0?r/e.orders.length:0,lastOrderDate:m,firstOrderDate:u,segment:p,productBreakdown:l,readyStockRevenue:o,customDesignRevenue:c,profitMargin:s,commission:f}})).sort(((e,t)=>t.totalRevenue-e.totalRevenue))}),[t,r,c,h]),f={totalRevenue:g.reduce(((e,t)=>e+t.totalRevenue),0),totalProfit:g.reduce(((e,t)=>e+t.totalProfit),0),totalOrders:g.reduce(((e,t)=>e+t.totalOrders),0),totalQuantity:g.reduce(((e,t)=>e+t.totalQuantity),0),averageProfitMargin:g.length>0?g.reduce(((e,t)=>e+t.profitMargin),0)/g.length:0};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-950/30 dark:to-indigo-900/30 border-2 border-indigo-300 dark:border-indigo-700",children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(no,{className:"flex items-center gap-3 text-2xl",children:[i.jsx(Qa,{className:"h-8 w-8 text-indigo-600"}),"Bayiler - Detaylı Satış Analizi"]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Bayilerimizin hazır stok ve özel tasarım ürün satış performansları"})]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>o(!l),className:"gap-2",children:[i.jsx(La,{className:"h-4 w-4"}),"Bayi Ayarları"]})]})}),l&&i.jsx(io,{className:"border-t border-indigo-200 dark:border-indigo-800",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"dealer-names",className:"text-sm font-medium mb-2 block",children:"Bayi İsimleri (Her satıra bir isim)"}),i.jsx(v6,{id:"dealer-names",value:c,onChange:e=>d(e.target.value),placeholder:"HOCA\nSPOR EVI\nTuranspor",className:"min-h-[120px] font-mono text-sm"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Sistemde aranacak bayi isimlerini girin. Büyük/küçük harf duyarlı değildir."})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{d(h.dealer_names||"HOCA\nSPOR EVI\nTuranspor"),o(!1)},children:"İptal"}),i.jsx(oo,{size:"sm",onClick:async()=>{m(!0),await x("dealer_names",c),m(!1),o(!1)},disabled:u,className:"gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 animate-spin"}),"Kaydediliyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ra,{className:"h-4 w-4"}),"Kaydet"]})})]})]})})]}),g.length>0?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 shadow-lg col-span-2 md:col-span-1",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Bulunan Bayiler"})}),i.jsxs(io,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[g.length," Bayi"]}),i.jsx("div",{className:"text-xs opacity-90 mt-1",children:g.map((e=>e.name)).join(", ")})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0 shadow-lg",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam Ciro"})}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:A9(f.totalRevenue)})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0 shadow-lg",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam Kar"})}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:A9(f.totalProfit)}),i.jsxs("p",{className:"text-xs opacity-90 mt-1",children:["Ort. %",f.averageProfitMargin.toFixed(1)," marj"]})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white border-0 shadow-lg",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam Sipariş"})}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:f.totalOrders}),i.jsxs("p",{className:"text-xs opacity-90 mt-1",children:[f.totalQuantity.toLocaleString("tr-TR")," adet"]})]})]})]}),i.jsx("div",{className:"grid gap-4 "+(1===g.length?"grid-cols-1 max-w-md mx-auto":2===g.length?"grid-cols-1 sm:grid-cols-2 max-w-2xl mx-auto":3===g.length?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 max-w-4xl mx-auto":4===g.length?"grid-cols-1 sm:grid-cols-2 md:grid-cols-4":"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"),children:g.map(((e,t)=>{const r={"En Çok Satış Yapan":"from-yellow-50 to-yellow-100 dark:from-yellow-950/20 dark:to-yellow-900/20 border-yellow-300 dark:border-yellow-700",Regular:"from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20 border-blue-300 dark:border-blue-700",New:"from-green-50 to-green-100 dark:from-green-950/20 dark:to-green-900/20 border-green-300 dark:border-green-700",Churned:"from-red-50 to-red-100 dark:from-red-950/20 dark:to-red-900/20 border-red-300 dark:border-red-700"},a=r[e.segment]||r.Regular;return i.jsxs(ro,{className:`bg-gradient-to-br ${a} border hover:shadow-lg transition-shadow cursor-pointer`,onClick:()=>s(e),children:[i.jsx(ao,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-600 text-white flex items-center justify-center font-bold text-sm shadow-lg flex-shrink-0",children:e.name.split(" ")[0].substring(0,2).toUpperCase()}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx(no,{className:"text-sm font-bold text-gray-900 dark:text-gray-100 truncate",children:e.name}),e.company&&i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium truncate",children:e.company})]})]}),i.jsx(Vr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]})}),i.jsxs(io,{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-2 bg-white/70 dark:bg-gray-800/70 rounded-lg shadow-sm",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Ciro"}),i.jsx("p",{className:"text-sm font-bold text-indigo-900 dark:text-indigo-100",children:A9(e.totalRevenue)})]}),i.jsxs("div",{className:"text-center p-2 bg-white/70 dark:bg-gray-800/70 rounded-lg shadow-sm",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Kar"}),i.jsx("p",{className:"text-sm font-bold text-green-900 dark:text-green-100",children:A9(e.totalProfit)}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["%",e.profitMargin.toFixed(1)]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-2 bg-white/70 dark:bg-gray-800/70 rounded-lg shadow-sm",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Sipariş"}),i.jsx("p",{className:"text-sm font-bold text-blue-900 dark:text-blue-100",children:e.totalOrders})]}),i.jsxs("div",{className:"text-center p-2 bg-white/70 dark:bg-gray-800/70 rounded-lg shadow-sm",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Adet"}),i.jsx("p",{className:"text-sm font-bold text-orange-900 dark:text-orange-100",children:e.totalQuantity.toLocaleString("tr-TR")})]})]}),i.jsxs("div",{className:"pt-2 border-t border-gray-300 dark:border-gray-600",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-1",children:"Ürün Dağılımı"}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs(Co,{variant:"secondary",className:"text-xs py-0.5",children:[i.jsx(Or,{className:"h-3 w-3 mr-1"}),"Hazır"]}),i.jsx("span",{className:"text-xs font-bold",children:A9(e.readyStockRevenue)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs(Co,{variant:"secondary",className:"text-xs py-0.5",children:[i.jsx(bn,{className:"h-3 w-3 mr-1"}),"Özel"]}),i.jsx("span",{className:"text-xs font-bold",children:A9(e.customDesignRevenue)})]})]})]}),e.commission>0&&i.jsx("div",{className:"pt-2 border-t border-yellow-300 dark:border-yellow-600",children:i.jsxs("div",{className:"flex items-center justify-between bg-yellow-100 dark:bg-yellow-900/30 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Wa,{className:"h-4 w-4 text-yellow-600"}),i.jsx("span",{className:"text-xs font-medium",children:"Prim"})]}),i.jsx("span",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200",children:A9(e.commission)})]})})]})]},t)}))}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Qa,{className:"h-5 w-5 text-indigo-600"}),"Bayiler - Detaylı Tablo"]})}),i.jsx(io,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-4 font-medium",children:"Bayi"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Segment"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Ciro"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Kar"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Marj"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Sipariş"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Adet"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Hazır Stok"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Özel Tasarım"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Son Sipariş"})]})}),i.jsx("tbody",{children:g.map(((e,t)=>{const r={"En Çok Satış Yapan":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",Regular:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",New:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",Churned:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-indigo-50 dark:hover:bg-indigo-950/10 transition-colors cursor-pointer",onClick:()=>s(e),children:[i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-600 text-white flex items-center justify-center font-bold text-sm",children:e.name.split(" ")[0].substring(0,2).toUpperCase()}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.name}),e.company&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.company})]})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx(Co,{className:r[e.segment]||r.Regular,children:e.segment})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:A9(e.totalRevenue)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-green-600 dark:text-green-400",children:A9(e.totalProfit)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsxs("p",{className:"font-bold text-blue-600 dark:text-blue-400",children:["%",e.profitMargin.toFixed(1)]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-gray-600 dark:text-gray-400",children:e.totalOrders})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-orange-600 dark:text-orange-400",children:e.totalQuantity.toLocaleString("tr-TR")})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-purple-600 dark:text-purple-400",children:A9(e.readyStockRevenue)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-pink-600 dark:text-pink-400",children:A9(e.customDesignRevenue)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:XC(new Date(e.lastOrderDate),"dd MMM yyyy",{locale:ZT})})})]},t)}))})]})})})]})]}):i.jsx(ro,{className:"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700",children:i.jsxs(io,{className:"text-center py-12",children:[i.jsx(Qa,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Bayi Bulunamadı"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Sistemde ayarlanan bayi isimlerine uygun kayıt bulunmamaktadır."}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>o(!0),className:"mt-4 gap-2",children:[i.jsx(La,{className:"h-4 w-4"}),"Bayi Ayarlarını Düzenle"]})]})}),n&&i.jsx(sd,{open:!!n,onOpenChange:()=>s(null),children:i.jsxs(cd,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"text-2xl font-bold flex items-center gap-3",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-600 text-white flex items-center justify-center font-bold text-2xl shadow-lg",children:n.name.split(" ")[0].substring(0,2).toUpperCase()}),i.jsxs("div",{children:[i.jsx("div",{children:n.name}),n.company&&i.jsx("div",{className:"text-sm font-normal text-gray-600 dark:text-gray-400",children:n.company})]})]}),i.jsxs(hd,{children:["Bayinin detaylı satış analizi ve ürün dağılımı",n.phone&&i.jsxs("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:[i.jsx(Ta,{className:"inline h-4 w-4 mr-1"}),n.phone]})]})]}),i.jsxs("div",{className:"space-y-6 mt-6",children:[n.commission>0&&i.jsxs(ro,{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 dark:from-yellow-950/30 dark:to-yellow-800/30 border-2 border-yellow-400 dark:border-yellow-600",children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"flex items-center gap-3 text-yellow-800 dark:text-yellow-200",children:[i.jsx(Wa,{className:"h-6 w-6"}),i.jsx("span",{className:"text-xl font-bold",children:"Prim Kazancı"})]})}),i.jsxs(io,{children:[i.jsx("p",{className:"text-4xl font-bold text-yellow-900 dark:text-yellow-100",children:A9(n.commission)}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Oyuncu forması ve özel tasarımlardan kazanılan prim."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-950/20 dark:to-indigo-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-indigo-700 dark:text-indigo-300",children:"Toplam Ciro"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:A9(n.totalRevenue)})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/20 dark:to-green-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-green-700 dark:text-green-300",children:"Toplam Kar"})}),i.jsxs(io,{children:[i.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:A9(n.totalProfit)}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["%",n.profitMargin.toFixed(1)," marj"]})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-blue-700 dark:text-blue-300",children:"Toplam Sipariş"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:n.totalOrders})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-950/20 dark:to-orange-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-orange-700 dark:text-orange-300",children:"Ortalama Sepet"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:A9(n.averageOrderValue)})})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-white to-purple-50 dark:from-gray-800 dark:to-purple-950/20",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2 text-sm",children:[i.jsx(Aa,{className:"h-4 w-4 text-purple-600"}),"Baskı Satış Özeti"]})}),i.jsx(io,{children:(()=>{const e=(t||[]).filter((e=>e.customer_name===n.name)).map((e=>e.id)),r=(a||[]).filter((t=>e.includes(t.order_id)));if(0===r.length)return i.jsx("p",{className:"text-xs text-gray-500",children:"Henüz baskı satışı bulunmamaktadır."});const s=r.reduce(((e,t)=>{const r=t.region_name||"Bilinmeyen Bölge";return e[r]||(e[r]={quantity:0,revenue:0,orders:new Set}),e[r].quantity+=1,e[r].revenue+=t.is_free?0:t.price,e[r].orders.add(t.order_id),e}),{}),l=Object.values(s).reduce(((e,t)=>e+t.revenue),0);return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[i.jsxs("div",{className:"text-center p-2 bg-purple-100 dark:bg-purple-900/20 rounded",children:[i.jsx("p",{className:"text-[10px] text-purple-600 dark:text-purple-400",children:"Toplam Baskı"}),i.jsx("p",{className:"text-sm font-bold text-purple-900 dark:text-purple-100",children:r.length})]}),i.jsxs("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/20 rounded",children:[i.jsx("p",{className:"text-[10px] text-green-600 dark:text-green-400",children:"Baskı Geliri"}),i.jsx("p",{className:"text-sm font-bold text-green-900 dark:text-green-100",children:A9(l)})]}),i.jsxs("div",{className:"text-center p-2 bg-blue-100 dark:bg-blue-900/20 rounded",children:[i.jsx("p",{className:"text-[10px] text-blue-600 dark:text-blue-400",children:"Ortalama"}),i.jsx("p",{className:"text-sm font-bold text-blue-900 dark:text-blue-100",children:A9(l/Math.max(r.length,1))})]})]}),i.jsx("div",{className:"space-y-1",children:Object.entries(s).sort((([,e],[,t])=>t.revenue-e.revenue)).slice(0,5).map((([e,t])=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-3 w-3 text-purple-500"}),i.jsx("span",{className:"text-xs",children:e})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Co,{variant:"secondary",className:"text-[10px]",children:[t.quantity," adet"]}),i.jsx("span",{className:"text-xs font-semibold text-green-600",children:A9(t.revenue)})]})]},e)))})]})})()})]}),n.productBreakdown&&n.productBreakdown.length>0&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{className:"border-2 border-blue-200 dark:border-blue-800",children:[i.jsxs(ao,{className:"bg-blue-50 dark:bg-blue-950/30",children:[i.jsxs(no,{className:"text-lg flex items-center gap-2",children:[i.jsx(Or,{className:"h-5 w-5 text-blue-600"}),"Hazır Stok Satışları"]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Toplam: ",A9(n.readyStockRevenue)]})]}),i.jsx(io,{className:"pt-4",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-3",children:"Ürün"}),i.jsx("th",{className:"text-center p-3",children:"Adet"}),i.jsx("th",{className:"text-center p-3",children:"Ciro"}),i.jsx("th",{className:"text-center p-3",children:"Kar"})]})}),i.jsx("tbody",{children:n.productBreakdown.filter((e=>!e.is_design_product)).map(((e,t)=>i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-blue-50 dark:hover:bg-blue-950/10 transition-colors",children:[i.jsx("td",{className:"p-3 font-medium",children:e.productType}),i.jsx("td",{className:"p-3 text-center font-semibold",children:e.quantity.toLocaleString("tr-TR")}),i.jsx("td",{className:"p-3 text-center font-semibold text-blue-600 dark:text-blue-400",children:A9(e.revenue)}),i.jsx("td",{className:"p-3 text-center font-semibold text-green-600 dark:text-green-400",children:A9(e.profit)})]},t)))})]})})})]}),i.jsxs(ro,{className:"border-2 border-orange-200 dark:border-orange-800",children:[i.jsxs(ao,{className:"bg-orange-50 dark:bg-orange-950/30",children:[i.jsxs(no,{className:"text-lg flex items-center gap-2",children:[i.jsx(bn,{className:"h-5 w-5 text-orange-600"}),"Özel Tasarım Satışları"]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Toplam: ",A9(n.customDesignRevenue)]})]}),i.jsx(io,{className:"pt-4",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-3",children:"Ürün"}),i.jsx("th",{className:"text-center p-3",children:"Adet"}),i.jsx("th",{className:"text-center p-3",children:"Ciro"}),i.jsx("th",{className:"text-center p-3",children:"Kar"})]})}),i.jsx("tbody",{children:n.productBreakdown.filter((e=>e.is_design_product)).map(((e,t)=>i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-orange-50 dark:hover:bg-orange-950/10 transition-colors",children:[i.jsx("td",{className:"p-3 font-medium",children:e.productType}),i.jsx("td",{className:"p-3 text-center font-semibold",children:e.quantity.toLocaleString("tr-TR")}),i.jsx("td",{className:"p-3 text-center font-semibold text-orange-600 dark:text-orange-400",children:A9(e.revenue)}),i.jsx("td",{className:"p-3 text-center font-semibold text-green-600 dark:text-green-400",children:A9(e.profit)})]},t)))})]})})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-950/20 dark:to-gray-900/20",children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"text-sm flex items-center gap-2",children:[i.jsx(zr,{className:"h-4 w-4"}),"İlk Sipariş"]})}),i.jsx(io,{children:i.jsx("p",{className:"text-lg font-semibold",children:XC(new Date(n.firstOrderDate),"dd MMMM yyyy",{locale:ZT})})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-950/20 dark:to-gray-900/20",children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"text-sm flex items-center gap-2",children:[i.jsx(zr,{className:"h-4 w-4"}),"Son Sipariş"]})}),i.jsx(io,{children:i.jsx("p",{className:"text-lg font-semibold",children:XC(new Date(n.lastOrderDate),"dd MMMM yyyy",{locale:ZT})})})]})]})]})]})})]})}function K9({salesMetrics:e,ordersData:t=[],orderItemsData:r=[],printRequestsData:a=[],salesSettings:n}){const[s,l]=ze.useState(null);return i.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-white to-purple-50 dark:from-gray-800 dark:to-purple-950/20",children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-5 w-5 text-purple-600"}),"Satıcılar - Detaylı Analiz"]}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toptancıların ve satıcıların satış performansı analizi"})]}),i.jsx(io,{children:e.sellers&&e.sellers.length>0?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:"Toplam Ciro"}),i.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:A9(e.sellers.reduce(((e,t)=>e+t.totalRevenue),0))})]}),i.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:"Toplam İskonto"}),i.jsx("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:A9(e.sellers.reduce(((e,t)=>e+(t.totalDiscount||0)),0))})]}),i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Toplam Kar"}),i.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:A9(e.sellers.reduce(((e,t)=>e+t.totalProfit),0))})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"Toplam Sipariş"}),i.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:e.sellers.reduce(((e,t)=>e+t.totalOrders),0).toLocaleString("tr-TR")})]}),i.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-950/20 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[i.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-300 font-medium",children:"Toplam Adet"}),i.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:e.sellers.reduce(((e,t)=>e+t.totalQuantity),0).toLocaleString("tr-TR")})]}),i.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-950/20 rounded-lg border border-pink-200 dark:border-pink-800",children:[i.jsx("p",{className:"text-sm text-pink-700 dark:text-pink-300 font-medium",children:"Promosyon Ciro"}),i.jsx("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100",children:A9(e.sellers.reduce(((e,t)=>e+(t.promotionRevenue||0)),0))})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.sellers.map(((e,t)=>{const r={"En Çok Satış Yapan":"from-yellow-50 to-yellow-100 dark:from-yellow-950/20 dark:to-yellow-900/20 border-yellow-300 dark:border-yellow-700",Regular:"from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20 border-blue-300 dark:border-blue-700",New:"from-green-50 to-green-100 dark:from-green-950/20 dark:to-green-900/20 border-green-300 dark:border-green-700",Churned:"from-red-50 to-red-100 dark:from-red-950/20 dark:to-red-900/20 border-red-300 dark:border-red-700"},a=r[e.segment]||r.Regular;return i.jsxs(ro,{className:`bg-gradient-to-br ${a} border-2 hover:shadow-lg transition-shadow cursor-pointer`,onClick:()=>l(e),children:[i.jsx(ao,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-lg",children:e.name.substring(0,2).toUpperCase()}),i.jsxs("div",{children:[i.jsx(no,{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:e.name}),e.company&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.company}),i.jsx(Co,{variant:"outline",className:"text-xs mt-1",children:e.segment})]})]}),i.jsx(Vr,{className:"h-5 w-5 text-gray-400"})]})}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-3 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Ciro"}),i.jsx("p",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:A9(e.totalRevenue)}),e.totalDiscount&&e.totalDiscount>0&&i.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:["-",A9(e.totalDiscount)," iskonto"]})]}),i.jsxs("div",{className:"text-center p-3 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Kar"}),i.jsx("p",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:A9(e.totalProfit)}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["%",e.profitMargin.toFixed(1)]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"text-center p-3 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Sipariş"}),i.jsx("p",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:e.totalOrders})]}),i.jsxs("div",{className:"text-center p-3 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Adet"}),i.jsx("p",{className:"text-lg font-bold text-orange-900 dark:text-orange-100",children:e.totalQuantity.toLocaleString("tr-TR")})]})]}),i.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Ürün Dağılımı"}),i.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.jsxs(Co,{variant:"secondary",className:"text-xs",children:["Hazır: ",A9(e.readyStockRevenue)]}),i.jsxs(Co,{variant:"secondary",className:"text-xs",children:["Özel: ",A9(e.customDesignRevenue)]}),i.jsxs(Co,{variant:"secondary",className:"text-xs",children:["Promosyon: ",A9(e.promotionRevenue||0)]})]})]})]})]},t)}))}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Satıcılar - Detaylı Tablo"})}),i.jsx(io,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-4 font-medium",children:"Satıcı"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Segment"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Ciro"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"İskonto"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Kar"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Marj"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Sipariş"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Adet"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Ort. Sepet"}),i.jsx("th",{className:"text-center p-4 font-medium",children:"Son Sipariş"})]})}),i.jsx("tbody",{children:e.sellers.map(((e,t)=>{const r={"En Çok Satış Yapan":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",Regular:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",New:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",Churned:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-purple-50 dark:hover:bg-purple-950/10 transition-colors cursor-pointer",onClick:()=>l(e),children:[i.jsx("td",{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-sm",children:e.name.substring(0,2).toUpperCase()}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.name}),e.company&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.company})]})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx(Co,{className:r[e.segment]||r.Regular,children:e.segment})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:A9(e.totalRevenue)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-orange-600 dark:text-orange-400 text-lg",children:A9(e.totalDiscount||0)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:A9(e.totalProfit)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsxs("p",{className:"font-bold text-blue-600 dark:text-blue-400 text-lg",children:["%",e.profitMargin.toFixed(1)]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-gray-600 dark:text-gray-400 text-lg",children:e.totalOrders})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-orange-600 dark:text-orange-400 text-lg",children:e.totalQuantity.toLocaleString("tr-TR")})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"font-bold text-indigo-600 dark:text-indigo-400 text-lg",children:A9(e.averageOrderValue)})}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:XC(new Date(e.lastOrderDate),"dd MMM yyyy",{locale:ZT})})})]},t)}))})]})})})]})]}):i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Henüz satıcı bulunmamaktadır."})})]}),s&&i.jsx(sd,{open:!!s,onOpenChange:()=>l(null),children:i.jsxs(cd,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"text-2xl font-bold flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-lg",children:s.name.substring(0,2).toUpperCase()}),i.jsxs("div",{children:[i.jsx("div",{children:s.name}),s.company&&i.jsx("div",{className:"text-sm font-normal text-gray-600 dark:text-gray-400",children:s.company})]})]}),i.jsxs(hd,{children:["Satıcının detaylı satış analizi ve ürün dağılımı",s.phone&&i.jsxs("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:["• Tel: ",s.phone]})]})]}),i.jsxs("div",{className:"space-y-6 mt-6",children:[s.commission>0&&i.jsxs(ro,{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 dark:from-yellow-950/30 dark:to-yellow-800/30 border-2 border-yellow-400 dark:border-yellow-600",children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"flex items-center gap-3 text-yellow-800 dark:text-yellow-200",children:[i.jsx(Wa,{className:"h-6 w-6"}),i.jsx("span",{className:"text-xl font-bold",children:"Prim Kazancı"})]})}),i.jsxs(io,{children:[i.jsx("p",{className:"text-4xl font-bold text-yellow-900 dark:text-yellow-100",children:A9(s.commission)}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Oyuncu forması ve özel tasarımlardan kazanılan prim."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Toplam Ciro"}),i.jsx("p",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:A9(s.totalRevenue||0)})]}),i.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Verilen İskonto"}),i.jsx("p",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:A9(s.totalDiscount||0)})]}),i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Toplam Kar"}),i.jsx("p",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:A9(s.totalProfit||0)}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["%",(s.profitMargin||0).toFixed(1)," marj"]})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Toplam Sipariş"}),i.jsx("p",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:s.totalOrders||0})]}),i.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-950/20 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[i.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:"Ortalama Sepet"}),i.jsx("p",{className:"text-xl font-bold text-indigo-900 dark:text-indigo-100",children:A9(s.averageOrderValue||0)})]}),i.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-950/20 rounded-lg border border-pink-200 dark:border-pink-800",children:[i.jsx("p",{className:"text-sm text-pink-700 dark:text-pink-300",children:"Promosyon Ciro"}),i.jsx("p",{className:"text-xl font-bold text-pink-900 dark:text-pink-100",children:A9(s.promotionRevenue||0)})]})]}),i.jsxs(ro,{className:"border-2 border-purple-200 dark:border-purple-800",children:[i.jsx(ao,{className:"bg-purple-50 dark:bg-purple-950/30",children:i.jsxs(no,{className:"text-lg flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5 text-purple-600"}),"Baskı Satış Özeti"]})}),i.jsx(io,{className:"pt-4",children:(()=>{const e=s.id,r=t.filter((t=>{var r;return t.customer_id===e||(null==(r=t.profiles)?void 0:r.id)===e})).map((e=>e.id)),n=a.filter((e=>r.includes(e.order_id)));if(0===n.length)return i.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[i.jsx(Aa,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"Henüz baskı satışı bulunmamaktadır"})]});const l=n.reduce(((e,t)=>e+(t.is_free?0:t.price)),0);return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"text-center p-3 bg-purple-100 dark:bg-purple-900/20 rounded",children:[i.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Toplam Baskı"}),i.jsx("p",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:n.length})]}),i.jsxs("div",{className:"text-center p-3 bg-green-100 dark:bg-green-900/20 rounded",children:[i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Baskı Geliri"}),i.jsx("p",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:A9(l)})]}),i.jsxs("div",{className:"text-center p-3 bg-blue-100 dark:bg-blue-900/20 rounded",children:[i.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Ortalama"}),i.jsx("p",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:A9(l/Math.max(n.length,1))})]})]}),i.jsx("div",{className:"space-y-2",children:n.slice(0,5).map(((e,t)=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-4 w-4 text-purple-500"}),i.jsx("span",{className:"text-sm",children:e.region_name})]}),i.jsx("div",{className:"text-right",children:i.jsx("div",{className:"text-sm font-semibold text-green-600",children:A9(e.price)})})]},t)))})]})})()})]}),s.productBreakdown&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"text-lg flex items-center gap-2",children:[i.jsx(Or,{className:"h-5 w-5 text-green-600"}),"Hazır Stok Satışları"]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:A9(s.readyStockRevenue||0)})]}),i.jsx(io,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-2",children:"Ürün"}),i.jsx("th",{className:"text-center p-2",children:"Adet"}),i.jsx("th",{className:"text-center p-2",children:"Ciro"})]})}),i.jsx("tbody",{children:s.productBreakdown.filter((e=>!e.is_design_product&&!e.is_promotion_product)).map(((e,t)=>i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[i.jsx("td",{className:"p-2 font-medium",children:e.productType}),i.jsx("td",{className:"p-2 text-center",children:e.quantity.toLocaleString("tr-TR")}),i.jsx("td",{className:"p-2 text-center font-semibold",children:A9(e.revenue)})]},t)))})]})})})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"text-lg flex items-center gap-2",children:[i.jsx(bn,{className:"h-5 w-5 text-orange-600"}),"Özel Tasarım Satışları"]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:A9(s.customDesignRevenue||0)})]}),i.jsx(io,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-2",children:"Ürün"}),i.jsx("th",{className:"text-center p-2",children:"Adet"}),i.jsx("th",{className:"text-center p-2",children:"Ciro"})]})}),i.jsx("tbody",{children:s.productBreakdown.filter((e=>e.is_design_product&&!e.is_promotion_product)).map(((e,t)=>i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[i.jsx("td",{className:"p-2 font-medium",children:e.productType}),i.jsx("td",{className:"p-2 text-center",children:e.quantity.toLocaleString("tr-TR")}),i.jsx("td",{className:"p-2 text-center font-semibold",children:A9(e.revenue)})]},t)))})]})})})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"text-lg flex items-center gap-2",children:[i.jsx(Za,{className:"h-5 w-5 text-purple-600"}),"Promosyon Satışları"]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:A9(s.promotionRevenue||0)})]}),i.jsx(io,{children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[i.jsx("th",{className:"text-left p-2",children:"Ürün"}),i.jsx("th",{className:"text-center p-2",children:"Adet"}),i.jsx("th",{className:"text-center p-2",children:"Ciro"})]})}),i.jsxs("tbody",{children:[s.productBreakdown.filter((e=>e.is_promotion_product)).map(((e,t)=>i.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[i.jsx("td",{className:"p-2 font-medium",children:e.productType}),i.jsx("td",{className:"p-2 text-center",children:e.quantity.toLocaleString("tr-TR")}),i.jsx("td",{className:"p-2 text-center font-semibold",children:A9(e.revenue)})]},t))),0===s.productBreakdown.filter((e=>e.is_promotion_product)).length&&i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"Promosyon satışı bulunmamaktadır"})})]})]})})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs(ro,{children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"text-sm flex items-center gap-2",children:[i.jsx(zr,{className:"h-4 w-4"}),"İlk Sipariş"]})}),i.jsx(io,{children:i.jsx("p",{className:"text-lg font-semibold",children:XC(new Date(s.firstOrderDate||new Date),"dd MMMM yyyy",{locale:ZT})})})]}),i.jsxs(ro,{children:[i.jsx(ao,{className:"pb-3",children:i.jsxs(no,{className:"text-sm flex items-center gap-2",children:[i.jsx(zr,{className:"h-4 w-4"}),"Son Sipariş"]})}),i.jsx(io,{children:i.jsx("p",{className:"text-lg font-semibold",children:XC(new Date(s.lastOrderDate||new Date),"dd MMMM yyyy",{locale:ZT})})})]})]})]})]})})]})}function U9(){var e,t,r;const a=T9(),n=(({dateRange:e,statusFilter:t})=>{var r,a,n,s;const{data:i,isLoading:l}=qe({queryKey:["sales-settings"],queryFn:async()=>{var e,t,r,a;const{data:n,error:s}=await Wl.from("system_settings").select("setting_key, setting_value").in("setting_key",["sales_cost_percentage","sales_margin_calculation_method","customer_segment_vip_threshold","customer_segment_churned_days","customer_lifetime_value_multiplier","customer_acquisition_cost_percentage","inventory_turnover_multiplier","default_conversion_rate","fixed_profit_margin","turkey_timezone_offset","commission_seller_id","commission_amount_per_unit","commission_products","wholesaler_role_filter","ready_products_list","custom_designs_list","promotion_products_list","default_unknown_seller","default_unknown_product","default_unknown_region","sales_top_products_limit","sales_monthly_trends_limit","sales_performance_products_limit"]);if(s)throw s;const i={};return null==n||n.forEach((e=>{i[e.setting_key]=e.setting_value})),{costPercentage:parseFloat(i.sales_cost_percentage),marginCalculationMethod:i.sales_margin_calculation_method||"revenue_based",vipThreshold:parseFloat(i.customer_segment_vip_threshold),churnedDays:parseInt(i.customer_segment_churned_days),lifetimeValueMultiplier:parseFloat(i.customer_lifetime_value_multiplier),acquisitionCostPercentage:parseFloat(i.customer_acquisition_cost_percentage),inventoryTurnoverMultiplier:parseFloat(i.inventory_turnover_multiplier),conversionRate:parseFloat(i.default_conversion_rate),fixedProfitMargin:parseFloat(i.fixed_profit_margin),timezoneOffset:parseInt(i.turkey_timezone_offset),commissionSellerId:i.commission_seller_id||"",commissionAmountPerUnit:parseFloat(i.commission_amount_per_unit),commissionProducts:(null==(e=i.commission_products)?void 0:e.split(",").map((e=>e.trim())))||[],wholesalerRoleFilter:i.wholesaler_role_filter||"toptanci",readyProductsList:(null==(t=i.ready_products_list)?void 0:t.split(",").map((e=>e.trim())))||["HAZIR FORMA TEK ÜST","HAZIR FORMA KALECİ TEK ÜST","HAZIR FORMA KALECİ ŞORT","HAZIR FORMA OYUNCU ŞORT","HAZIR FORMA OYUNCU ÇORAP"],customDesignsList:(null==(r=i.custom_designs_list)?void 0:r.split(",").map((e=>e.trim())))||["TASARIM OYUNCU TEK ÜST","TASARIM KALECİ TEK ÜST","TASARIM KALECİ ŞORT","TASARIM OYUNCU ŞORT","TASARIM ÇORAP"],promotionProductsList:(null==(a=i.promotion_products_list)?void 0:a.split(",").map((e=>e.trim())))||["PROMOSYON OYUNCU TEK ÜST","PROMOSYON KALECİ TEK ÜST","PROMOSYON OYUNCU ŞORT","PROMOSYON KALECİ ŞORT","PROMOSYON OYUNCU ÇORAP"],unknownSeller:i.default_unknown_seller||"Bilinmeyen Satıcı",unknownProduct:i.default_unknown_product||"Bilinmeyen Ürün",unknownRegion:i.default_unknown_region||"Bilinmeyen Bölge",topProductsLimit:parseInt(i.sales_top_products_limit),monthlyTrendsLimit:parseInt(i.sales_monthly_trends_limit),performanceProductsLimit:parseInt(i.sales_performance_products_limit)}},staleTime:9e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:o,isLoading:c,refetch:d}=qe({queryKey:["sales-orders",null==(r=e.from)?void 0:r.toISOString(),null==(a=e.to)?void 0:a.toISOString(),t],queryFn:async()=>{let r=Wl.from("orders").select("\n          id,\n          created_at,\n          total_amount,\n          status,\n          order_type,\n          customer_name,\n          company_name,\n          customer_phone,\n          customer_id,\n          profiles:customer_id(\n            id, \n            full_name,\n            company,\n            phone,\n            role\n          )\n        ");if(e.from){const t=new Date(e.from);t.setHours(0,0,0,0);const a=new Date(t.getTime()-60*((null==i?void 0:i.timezoneOffset)||3)*60*1e3);r=r.gte("created_at",a.toISOString())}if(e.to){const t=new Date(e.to);t.setHours(23,59,59,999);const a=new Date(t.getTime()-60*((null==i?void 0:i.timezoneOffset)||3)*60*1e3);r=r.lte("created_at",a.toISOString())}"all"!==t&&(r=r.eq("status",t));const{data:a,error:n}=await r.order("created_at",{ascending:!1});if(n)throw n;return null==a?void 0:a.map((e=>{var t,r,a,n,s;return{...e,customer_name:e.customer_name||(null==(t=e.profiles)?void 0:t.full_name)||"Bilinmeyen Satıcılar",customer_id:null==(r=e.profiles)?void 0:r.id,customer_company:e.company_name||(null==(a=e.profiles)?void 0:a.company),customer_phone:e.customer_phone||(null==(n=e.profiles)?void 0:n.phone),customer_role:null==(s=e.profiles)?void 0:s.role}}))},enabled:!!i,staleTime:6e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:u,isLoading:m}=qe({queryKey:["sales-order-items",null==o?void 0:o.length,null==i?void 0:i.costPercentage],queryFn:async()=>{if(!(null==o?void 0:o.length)||!i)return[];const e=o.map((e=>e.id)),t=[];for(let r=0;r<e.length;r+=90){const a=e.slice(r,r+90),{data:n,error:s}=await Wl.from("order_items").select("\n            id,\n            order_id,\n            item_type,\n            quantity,\n            unit_price,\n            total_price,\n            notes,\n            product_variations!inner(\n              id,\n              color,\n              size,\n              products!inner(\n                name,\n                category,\n                is_design_product\n              )\n            )\n          ").in("order_id",a);if(s)throw s;n&&t.push(...n)}return t.map((e=>{const t=e.product_variations,r=null==t?void 0:t.products,a=i.costPercentage/100,n=e.unit_price*a;let s=e.item_type||"unknown";return e.notes&&"string"==typeof e.notes&&e.notes.toLowerCase().includes("kaleci")&&("shorts"===s?s="goalkeeper_shorts":"socks"===s&&(s="goalkeeper_socks")),{id:e.id,order_id:e.order_id,item_type:s,quantity:e.quantity,unit_price:e.unit_price,total_price:e.total_price,product_name:(null==r?void 0:r.name)||e.item_type||(null==i?void 0:i.unknownProduct)||"Bilinmeyen Ürün",size:null==t?void 0:t.size,color:null==t?void 0:t.color,cost_price:n,is_design_product:(null==r?void 0:r.is_design_product)||!1,notes:e.notes}}))},enabled:!!(null==o?void 0:o.length)&&!!i,staleTime:6e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:h,isLoading:p}=qe({queryKey:["sales-print-requests",null==o?void 0:o.length],queryFn:async()=>{if(!(null==o?void 0:o.length))return[];const e=o.map((e=>e.id)),t=[];for(let r=0;r<e.length;r+=90){const a=e.slice(r,r+90),{data:n,error:s}=await Wl.from("print_requests").select("\n            id,\n            order_id,\n            print_region_id,\n            content,\n            price,\n            is_free,\n            created_at,\n            print_regions!inner(\n              id,\n              name,\n              description,\n              base_price\n            )\n          ").in("order_id",a);if(s)throw s;n&&t.push(...n)}return(null==t?void 0:t.map((e=>{var t,r,a;return{id:e.id,order_id:e.order_id,region_name:(null==(t=e.print_regions)?void 0:t.name)||"Bilinmeyen Bölge",region_description:null==(r=e.print_regions)?void 0:r.description,content:e.content,price:e.price,is_free:e.is_free,base_price:(null==(a=e.print_regions)?void 0:a.base_price)||0}})))||[]},enabled:!!(null==o?void 0:o.length),staleTime:9e5,gcTime:27e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:x,isLoading:g}=qe({queryKey:["sales-customers",null==(n=e.from)?void 0:n.toISOString(),null==(s=e.to)?void 0:s.toISOString()],queryFn:async()=>{if(!i)return[];let t=Wl.from("orders").select("\n          id,\n          customer_name,\n          customer_phone,\n          customer_city,\n          company_name,\n          customer_type,\n          total_amount,\n          created_at\n        ").not("customer_name","is",null).neq("customer_name","").neq("customer_name","undefined");if(e.from){const r=new Date(e.from);r.setHours(0,0,0,0);const a=new Date(r.getTime()-60*((null==i?void 0:i.timezoneOffset)||3)*60*1e3);t=t.gte("created_at",a.toISOString())}if(e.to){const r=new Date(e.to);r.setHours(23,59,59,999);const a=new Date(r.getTime()-60*((null==i?void 0:i.timezoneOffset)||3)*60*1e3);t=t.lte("created_at",a.toISOString())}const{data:r,error:a}=await t.order("created_at",{ascending:!1});if(a)throw a;const n=(null==r?void 0:r.map((e=>e.id)))||[],s=[];for(let e=0;e<n.length;e+=90){const t=n.slice(e,e+90),{data:r,error:a}=await Wl.from("order_items").select("order_id, total_price").in("order_id",t);if(a)throw a;r&&s.push(...r)}const l=s.reduce(((e,t)=>(e[t.order_id]||(e[t.order_id]=0),e[t.order_id]+=Number(t.total_price),e)),{}),o=null==r?void 0:r.reduce(((e,t)=>{const r=t.customer_name;e[r]||(e[r]={name:t.customer_name,phone:t.customer_phone,city:t.customer_city,company:t.company_name,type:t.customer_type,totalSpent:0,orderCount:0,firstOrder:t.created_at,lastOrder:t.created_at});const a=l[t.id]||0;return e[r].totalSpent+=a,e[r].orderCount+=1,new Date(t.created_at)>new Date(e[r].lastOrder)&&(e[r].lastOrder=t.created_at),new Date(t.created_at)<new Date(e[r].firstOrder)&&(e[r].firstOrder=t.created_at),e}),{});return Object.values(o||{}).sort(((e,t)=>t.totalSpent-e.totalSpent))},enabled:!!i,staleTime:12e5,gcTime:36e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:f,isLoading:y}=qe({queryKey:["sales-payments",null==o?void 0:o.length],queryFn:async()=>{if(!(null==o?void 0:o.length))return[];const e=o.map((e=>e.id)),t=[];for(let r=0;r<e.length;r+=90){const a=e.slice(r,r+90),{data:n,error:s}=await Wl.from("payments").select("\n            order_id,\n            amount,\n            discount\n          ").in("order_id",a);if(s)throw s;n&&t.push(...n)}return t},enabled:!!(null==o?void 0:o.length),staleTime:6e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1});return{salesSettings:i,ordersData:o,orderItemsData:u,printRequestsData:h,customersData:x,paymentsData:f,isLoading:l||c&&!o||m&&!u,refetchOrders:d}})({dateRange:a.dateRange,statusFilter:a.statusFilter}),[s,l]=ze.useState(null),o=ze.useMemo((()=>n.ordersData&&n.orderItemsData&&n.salesSettings?((e,t,r,a,n,s,i)=>{if(!e||!t||!r)return{totalRevenue:0,totalOrders:0,totalQuantity:0,averageOrderValue:0,totalProfit:0,profitMargin:0,growthRate:0,conversionRate:0,shippingRevenue:0,discountAdjustedRevenue:0,totalDiscount:0,topProducts:[],salesByType:[],monthlyTrends:[],customerSegments:[],profitabilityData:[],readyProducts:[],customDesigns:[],promotionProducts:[],printProducts:[],sellers:[],topPerformingProducts:[],worstPerformingProducts:[],mostProfitableProducts:[],kpis:{returnCustomerRate:0,averageItemsPerOrder:0,orderFulfillmentRate:0,customerAcquisitionCost:0,inventoryTurnover:0}};let l=e,o=t;if(i&&e&&t){l=e.filter((e=>e.customer_name===i));const r=l.map((e=>e.id));o=t.filter((e=>r.includes(e.order_id)))}const c=l.reduce(((e,t)=>e+t.total_amount),0),d=l.length,u=o.reduce(((e,t)=>e+t.quantity),0),m=d>0?c/d:0,h=o.reduce(((e,t)=>e+t.total_price),0),p=c-h,x=((null==s?void 0:s.filter((e=>l.some((t=>t.id===e.order_id)))))||[]).reduce(((e,t)=>e+(t.discount||0)),0),g=c-x,f=o.reduce(((e,t)=>e+t.cost_price*t.quantity),0),y=c-f,v=c>0&&"cost_based"===(null==r?void 0:r.marginCalculationMethod)?f>0?y/f*100:0:y/c*100,b=l.reduce(((e,t)=>{const a=t.customer_id||t.customer_name||"unknown";return e[a]||(e[a]={id:a,name:t.customer_name||(null==r?void 0:r.unknownSeller)||"Bilinmeyen",orders:[],totalSpent:0,totalOrders:0}),e[a].orders.push(t),e[a].totalSpent+=t.total_amount,e[a].totalOrders+=1,e}),{}),j=Object.values(b).map((e=>{var t;const a=e.totalSpent/e.totalOrders,n=null==(t=e.orders.sort(((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()))[0])?void 0:t.created_at;let s="Regular";return e.totalSpent>((null==r?void 0:r.vipThreshold)||5e3)?s="En Çok Satış Yapan":1===e.totalOrders?s="New":(new Date).getTime()-new Date(n).getTime()>24*((null==r?void 0:r.churnedDays)||90)*60*60*1e3&&(s="Churned"),{id:e.id,name:e.name,totalOrders:e.totalOrders,totalSpent:e.totalSpent,averageOrderValue:a,lastOrderDate:n,segment:s,lifetimeValue:e.totalSpent*((null==r?void 0:r.lifetimeValueMultiplier)||1.2)}})).sort(((e,t)=>t.totalSpent-e.totalSpent)),k=o.reduce(((e,t)=>{const r=t.product_name||t.item_type;return e[r]||(e[r]={quantity:0,revenue:0,cost:0}),e[r].quantity+=t.quantity,e[r].revenue+=t.total_price,e[r].cost+=t.cost_price*t.quantity,e}),{}),w=Object.entries(k).map((([e,t])=>({name:e,quantity:t.quantity,revenue:t.revenue,profit:t.revenue-t.cost,margin:t.revenue>0?(t.revenue-t.cost)/t.revenue*100:0,cost:t.cost}))).sort(((e,t)=>t.revenue-e.revenue)).slice(0,(null==r?void 0:r.topProductsLimit)||10),N=Object.entries(k).map((([e,t])=>({name:e,revenue:t.revenue,cost:t.cost,profit:t.revenue-t.cost,margin:t.revenue>0?(t.revenue-t.cost)/t.revenue*100:0,quantity:t.quantity}))).sort(((e,t)=>t.margin-e.margin)),_=o.reduce(((e,t)=>{var r,a,n,s;const i=(null==(r=t.color)?void 0:r.toLowerCase().includes("promasyon"))||(null==(a=t.product_name)?void 0:a.toLowerCase().includes("promosyon"))||(null==(n=t.item_type)?void 0:n.toLowerCase().includes("promosyon"))||(null==(s=t.notes)?void 0:s.toLowerCase().includes("promosyon"))||"promotion"===t.item_type,l=O9(t.item_type,t.is_design_product,i);return e[l]||(e[l]={quantity:0,revenue:0,cost:0}),e[l].quantity+=t.quantity,e[l].revenue+=t.total_price,e[l].cost+=t.cost_price*t.quantity,e}),{}),S=Object.entries(_).map((([e,t])=>({type:e,quantity:t.quantity,revenue:t.revenue,percentage:c>0?t.revenue/c*100:0,profit:t.revenue-t.cost,cost:t.cost}))).sort(((e,t)=>t.revenue-e.revenue)),C=l.reduce(((e,t)=>{const r=new Date(t.created_at),a=`${r.getFullYear()}-${(r.getMonth()+1).toString().padStart(2,"0")}`,n=r.toLocaleDateString("tr-TR",{year:"numeric",month:"long"});e[a]||(e[a]={key:a,month:n,revenue:0,orders:0,cost:0}),e[a].revenue+=t.total_amount,e[a].orders+=1;const s=o.filter((e=>e.order_id===t.id)).reduce(((e,t)=>e+t.cost_price*t.quantity),0);return e[a].cost+=s,e}),{}),T=Object.values(C).sort(((e,t)=>e.key.localeCompare(t.key))).slice(-((null==r?void 0:r.monthlyTrendsLimit)||12)).map(((e,t,r)=>{const a=e.revenue-e.cost,n=t>0?r[t-1]:null,s=n&&n.revenue>0?(e.revenue-n.revenue)/n.revenue*100:0;return{month:e.month,revenue:e.revenue,orders:e.orders,profit:a,growth:s}})),O=new Set(l.map((e=>e.customer_name))).size,P=j.filter((e=>e.totalOrders>1)).length,A=O>0?P/O*100:0,E=d>0?u/d:0,D=l.filter((e=>"delivered"===e.status)).length,M=d>0?D/d*100:0,z=c>0?c*((null==r?void 0:r.acquisitionCostPercentage)||15)/100/O:0,R=c>0?f/(c*((null==r?void 0:r.inventoryTurnoverMultiplier)||.3)):0,I=a.from||new Date(0),F=a.to||new Date,B=F.getTime()-I.getTime(),L=new Date(I.getTime()-B),q=I,$=l.filter((e=>{const t=new Date(e.created_at);return t>=I&&t<=F})).reduce(((e,t)=>e+t.total_amount),0),K=l.filter((e=>{const t=new Date(e.created_at);return t>=L&&t<q})).reduce(((e,t)=>e+t.total_amount),0),U=K>0?($-K)/K*100:0,H=o.filter((e=>!e.is_design_product)).reduce(((e,t)=>{var r,a,n,s;const i=(null==(r=t.color)?void 0:r.toLowerCase().includes("promasyon"))||(null==(a=t.product_name)?void 0:a.toLowerCase().includes("promosyon"))||(null==(n=t.item_type)?void 0:n.toLowerCase().includes("promosyon"))||(null==(s=t.notes)?void 0:s.toLowerCase().includes("promosyon"))||"promotion"===t.item_type,l=O9(t.item_type,!1,i);if("AKSESUAR"===l||"Diğer"===l||"Ek Ürün"===l)return e;let o=l,c=t.quantity;if("shorts"===t.item_type&&t.notes&&"string"==typeof t.notes){const r=t.notes.toLowerCase().match(/kaleci:\s*(\d+)\s*adet/);if(r){const a=parseInt(r[1]),n=i?"PROMOSYON KALECİ ŞORT":"HAZIR FORMA KALECİ ŞORT";if(e[n]||(e[n]={quantity:0,revenue:0,cost:0,orders:new Set}),e[n].quantity+=a,e[n].revenue+=t.unit_price*a,e[n].cost+=t.cost_price*a,e[n].orders.add(t.order_id),c=t.quantity-a,c<=0)return e}}return e[o]||(e[o]={quantity:0,revenue:0,cost:0,orders:new Set}),e[o].quantity+=c,e[o].revenue+=t.unit_price*c,e[o].cost+=t.cost_price*c,e[o].orders.add(t.order_id),e}),{}),Y=Object.values(H).reduce(((e,t)=>e+t.revenue),0),V=Object.entries(H).map((([e,t])=>({type:e,quantity:t.quantity,revenue:t.revenue,profit:t.revenue-t.cost,cost:t.cost,percentage:Y>0?t.revenue/Y*100:0,averagePrice:t.quantity>0?t.revenue/t.quantity:0,orders:t.orders.size}))).sort(((e,t)=>t.revenue-e.revenue)),G=o.filter((e=>e.is_design_product)).reduce(((e,t)=>{var r,a,n,s;const i=(null==(r=t.color)?void 0:r.toLowerCase().includes("promasyon"))||(null==(a=t.product_name)?void 0:a.toLowerCase().includes("promosyon"))||(null==(n=t.item_type)?void 0:n.toLowerCase().includes("promosyon"))||(null==(s=t.notes)?void 0:s.toLowerCase().includes("promosyon"))||"promotion"===t.item_type,l=O9(t.item_type,!0,i);return e[l]||(e[l]={quantity:0,revenue:0,cost:0,orders:new Set}),e[l].quantity+=t.quantity,e[l].revenue+=t.total_price,e[l].cost+=t.cost_price*t.quantity,e[l].orders.add(t.order_id),e}),{}),W=Object.values(G).reduce(((e,t)=>e+t.revenue),0),Q=Object.entries(G).map((([e,t])=>({type:e,quantity:t.quantity,revenue:t.revenue,profit:t.revenue-t.cost,cost:t.cost,percentage:W>0?t.revenue/W*100:0,averagePrice:t.quantity>0?t.revenue/t.quantity:0,orders:t.orders.size}))).sort(((e,t)=>t.revenue-e.revenue)),X=o.filter((e=>{var t,r,a;const n="promotion"===e.item_type,s=(null==(t=e.color)?void 0:t.toLowerCase().includes("promosyon"))||(null==(r=e.color)?void 0:r.toLowerCase().includes("promasyon")),i="shorts"===e.item_type&&(null==(a=e.notes)?void 0:a.toLowerCase().includes("kaleci:"));return n||s||i})).reduce(((e,t)=>{var r;let a="";if("promotion"===t.item_type)a="PROMOSYON OYUNCU TEK ÜST";else if("shorts"===t.item_type&&(null==(r=t.notes)?void 0:r.toLowerCase().includes("kaleci:"))){const r=t.notes.match(/kaleci:\s*(\d+)\s*adet/i);if(r){const n=parseInt(r[1]),s="PROMOSYON KALECİ ŞORT";e[s]||(e[s]={quantity:0,revenue:0,cost:0,orders:new Set}),e[s].quantity+=n,e[s].revenue+=(t.unit_price||0)*n,e[s].cost+=(t.cost_price||0)*n,e[s].orders.add(t.order_id);const i=t.quantity-n;return i>0&&(a="PROMOSYON OYUNCU ŞORT",e[a]||(e[a]={quantity:0,revenue:0,cost:0,orders:new Set}),e[a].quantity+=i,e[a].revenue+=(t.unit_price||0)*i,e[a].cost+=(t.cost_price||0)*i,e[a].orders.add(t.order_id)),e}}else a=O9(t.item_type,t.is_design_product,!0);return a&&""!==a&&(e[a]||(e[a]={quantity:0,revenue:0,cost:0,orders:new Set}),e[a].quantity+=t.quantity,e[a].revenue+=t.total_price||0,e[a].cost+=(t.cost_price||0)*t.quantity,e[a].orders.add(t.order_id)),e}),{}),Z=Object.values(X).reduce(((e,t)=>e+t.revenue),0),J=Object.entries(X).map((([e,t])=>({type:e,quantity:t.quantity,revenue:t.revenue,profit:t.revenue-t.cost,cost:t.cost,percentage:Z>0?t.revenue/Z*100:0,averagePrice:t.quantity>0?t.revenue/t.quantity:0,orders:t.orders.size}))).sort(((e,t)=>t.revenue-e.revenue)),ee=i&&n?n.filter((e=>{const t=l.find((t=>t.id===e.order_id));return t&&t.customer_name===i})):n,te=(ee||[]).reduce(((e,t)=>{const a=t.region_name||(null==r?void 0:r.unknownRegion)||"Bilinmeyen Bölge";e[a]||(e[a]={quantity:0,revenue:0,cost:0,orders:new Set,freeCount:0});let n=1;if(l.find((e=>e.id===t.order_id))){const e=o.filter((e=>e.order_id===t.order_id)),r={"Şort Sol Numara":["shorts"],"Şort Sağ Logo":["shorts"],"Şort Arka Numara":["shorts"],"Şort Ön Görsel":["shorts"],"Forma Ön Görsel":["jersey","ready_stock","goalkeeper"],"Forma Arka Görsel":["jersey","ready_stock","goalkeeper"],"Sol Kol":["jersey","ready_stock","goalkeeper"],"Sağ Kol":["jersey","ready_stock","goalkeeper"],"Çorap Logo":["socks"],"Çorap Numara":["socks"]}[a]||[];r.length>0&&(n=e.filter((e=>r.includes(e.item_type))).reduce(((e,t)=>e+t.quantity),0))}return e[a].quantity+=n,e[a].revenue+=t.is_free?0:t.price,e[a].cost+=t.is_free?0:t.price*((null==r?void 0:r.costPercentage)||60)/100,e[a].orders.add(t.order_id),t.is_free&&(e[a].freeCount+=n),e}),{}),re=Object.values(te).reduce(((e,t)=>e+t.revenue),0),ae=Object.entries(te).map((([e,t])=>{const r=(ee||[]).find((t=>t.region_name===e)),a=(null==r?void 0:r.base_price)||0;return{type:e,quantity:t.quantity,revenue:t.revenue,profit:t.revenue-t.cost,cost:t.cost,percentage:re>0?t.revenue/re*100:0,averagePrice:a>0&&0===t.freeCount?a:t.quantity-t.freeCount>0?t.revenue/(t.quantity-t.freeCount):0,orders:t.orders.size,is_free:t.freeCount>0,basePrice:a}})).sort(((e,t)=>t.revenue-e.revenue)),ne=new Map;e.forEach((e=>{var a,n,s,i;const l=e.customer_id||"unknown",o=(null==(a=e.profiles)?void 0:a.full_name)||(null==r?void 0:r.unknownSeller)||"Bilinmeyen Satıcı",c=null==(n=e.profiles)?void 0:n.company,d=null==(s=e.profiles)?void 0:s.phone,u=null==(i=e.profiles)?void 0:i.role;ne.has(l)||ne.set(l,{id:l,name:o,company:c,phone:d,role:u,orders:[],orderItems:[]});const m=ne.get(l);m.orders.push(e);const h=t.filter((t=>t.order_id===e.id));m.orderItems.push(...h)}));const se=Array.from(ne.values()).map((e=>{const t=e.orders.reduce(((e,t)=>e+t.total_amount),0),a=e.orderItems.reduce(((e,t)=>{var r,a,n,s;const i=(null==(r=t.color)?void 0:r.toLowerCase().includes("promasyon"))||(null==(a=t.product_name)?void 0:a.toLowerCase().includes("promosyon"))||(null==(n=t.item_type)?void 0:n.toLowerCase().includes("promosyon"))||(null==(s=t.notes)?void 0:s.toLowerCase().includes("promosyon"))||"promotion"===t.item_type,l=O9(t.item_type,t.is_design_product,i);return"HAZIR FORMA TEK ÜST"===l||"HAZIR FORMA KALECİ TEK ÜST"===l||"TASARIM KALECİ TEK ÜST"===l||"TASARIM OYUNCU TEK ÜST"===l||"PROMOSYON OYUNCU TEK ÜST"===l||"PROMOSYON KALECİ TEK ÜST"===l?e+t.quantity:e}),0),n=e.orderItems.reduce(((e,t)=>e+t.cost_price*t.quantity),0),i=((null==s?void 0:s.filter((t=>e.orders.some((e=>e.id===t.order_id)))))||[]).reduce(((e,t)=>e+(t.discount||0)),0),l=t-i,o=l-n,c=l>0?o/l*100:0,d=e.orderItems.reduce(((e,t)=>{var r,a,n,s;const i=(null==(r=t.color)?void 0:r.toLowerCase().includes("promasyon"))||(null==(a=t.product_name)?void 0:a.toLowerCase().includes("promosyon"))||(null==(n=t.item_type)?void 0:n.toLowerCase().includes("promosyon"))||(null==(s=t.notes)?void 0:s.toLowerCase().includes("promosyon"))||"promotion"===t.item_type,l=O9(t.item_type,t.is_design_product,i);return e[l]||(e[l]={productType:l,quantity:0,revenue:0,cost:0,profit:0,orders:new Set,is_design_product:t.is_design_product,is_promotion_product:i}),e[l].quantity+=t.quantity,e[l].revenue+=t.total_price,e[l].cost+=t.cost_price*t.quantity,e[l].profit+=t.total_price-t.cost_price*t.quantity,e[l].orders.add(t.order_id),e}),{}),u=Object.values(d).map((e=>({productType:e.productType,quantity:e.quantity,revenue:e.revenue,profit:e.profit,cost:e.cost,orders:e.orders.size,is_design_product:e.is_design_product,is_promotion_product:e.is_promotion_product}))),m=e.orderItems.filter((e=>!e.is_design_product)).reduce(((e,t)=>e+t.total_price),0),h=e.orderItems.filter((e=>e.is_design_product)).reduce(((e,t)=>e+t.total_price),0),p=e.orderItems.filter((e=>{var t,r,a;return(null==(t=e.product_name)?void 0:t.toLowerCase().includes("promosyon"))||(null==(r=e.item_type)?void 0:r.toLowerCase().includes("promosyon"))||(null==(a=e.notes)?void 0:a.toLowerCase().includes("promosyon"))||"promotion"===e.item_type})).reduce(((e,t)=>e+t.total_price),0),x=e.orders.map((e=>new Date(e.created_at))),g=new Date(Math.min(...x.map((e=>e.getTime())))).toISOString(),f=new Date(Math.max(...x.map((e=>e.getTime())))).toISOString();let y="Regular";t>((null==r?void 0:r.vipThreshold)||5e3)?y="En Çok Satış Yapan":1===e.orders.length?y="New":(new Date).getTime()-new Date(f).getTime()>24*((null==r?void 0:r.churnedDays)||90)*60*60*1e3&&(y="Churned");let v=0;return((null==r?void 0:r.commissionSellerId)||"").split("|").map((e=>e.trim())).filter((e=>e)).includes(e.id)&&e.orderItems.forEach((e=>{var t,a,n,s,i;const l=(null==(t=e.color)?void 0:t.toLowerCase().includes("promasyon"))||(null==(a=e.product_name)?void 0:a.toLowerCase().includes("promosyon"))||(null==(n=e.item_type)?void 0:n.toLowerCase().includes("promosyon"))||(null==(s=e.notes)?void 0:s.toLowerCase().includes("promosyon"))||"promotion"===e.item_type,o=O9(e.item_type,e.is_design_product,l);(null==(i=null==r?void 0:r.commissionProducts)?void 0:i.includes(o))&&(v+=e.quantity*((null==r?void 0:r.commissionAmountPerUnit)||2))})),{id:e.id,name:e.name,company:e.company,phone:e.phone,role:e.role,totalOrders:e.orders.length,totalRevenue:t,totalDiscount:i,totalProfit:o,totalQuantity:a,averageOrderValue:e.orders.length>0?t/e.orders.length:0,lastOrderDate:f,firstOrderDate:g,segment:y,productBreakdown:u,readyStockRevenue:m,customDesignRevenue:h,promotionRevenue:p,profitMargin:c,commission:v}})).filter((e=>e.role===(null==r?void 0:r.wholesalerRoleFilter)||"toptanci"===e.role||"grafiker"===e.role)).sort(((e,t)=>t.totalRevenue-e.totalRevenue)),ie=N,le=[...ie].sort(((e,t)=>t.revenue-e.revenue)).slice(0,(null==r?void 0:r.performanceProductsLimit)||5),oe=[...ie].sort(((e,t)=>e.revenue-t.revenue)).slice(0,(null==r?void 0:r.performanceProductsLimit)||5),ce=[...ie].sort(((e,t)=>t.margin-e.margin)).slice(0,(null==r?void 0:r.performanceProductsLimit)||5);return{totalRevenue:c,totalOrders:d,totalQuantity:u,averageOrderValue:m,totalProfit:y,profitMargin:v,growthRate:U,conversionRate:(null==r?void 0:r.conversionRate)||85,shippingRevenue:p,discountAdjustedRevenue:g,totalDiscount:x,topProducts:w,salesByType:S,monthlyTrends:T,customerSegments:j,profitabilityData:N,readyProducts:V,customDesigns:Q,promotionProducts:J,printProducts:ae,sellers:se,kpis:{returnCustomerRate:A,averageItemsPerOrder:E,orderFulfillmentRate:M,customerAcquisitionCost:z,inventoryTurnover:R},topPerformingProducts:le,worstPerformingProducts:oe,mostProfitableProducts:ce}})(n.ordersData,n.orderItemsData,n.salesSettings,a.dateRange,n.printRequestsData,n.paymentsData,a.selectedCustomerName):{totalRevenue:0,totalOrders:0,totalQuantity:0,averageOrderValue:0,totalProfit:0,profitMargin:0,growthRate:0,conversionRate:0,shippingRevenue:0,discountAdjustedRevenue:0,totalDiscount:0,topProducts:[],salesByType:[],readyProducts:[],customDesigns:[],promotionProducts:[],printProducts:[],profitabilityData:[],customerSegments:[],sellers:[],kpis:{returnCustomerRate:0,averageItemsPerOrder:0,orderFulfillmentRate:0,customerAcquisitionCost:0,inventoryTurnover:0},topPerformingProducts:[],worstPerformingProducts:[],mostProfitableProducts:[],monthlyTrends:[]}),[n.ordersData,n.orderItemsData,n.salesSettings,null==(e=a.dateRange.from)?void 0:e.toISOString(),null==(t=a.dateRange.to)?void 0:t.toISOString(),n.printRequestsData,n.paymentsData,a.selectedCustomerName]);return!n.isLoading||n.ordersData&&n.orderItemsData&&n.salesSettings?i.jsxs("div",{className:"space-y-6 p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[i.jsx(Jt,{className:"h-8 w-8 text-blue-600"}),"Gelişmiş Satış Analizi"]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Kapsamlı satış raporları, karlılık analizi ve Satıcılar segmentasyonu"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[a.selectedCustomerName&&i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>a.setSelectedCustomerName(""),className:"gap-2 text-orange-600 border-orange-300 hover:bg-orange-50",children:[i.jsx(Er,{className:"h-4 w-4"}),"Müşteri Filtresi Kaldır"]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>n.refetchOrders(),className:"gap-2",children:[i.jsx(Da,{className:"h-4 w-4"}),"Yenile"]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>((e,t)=>{if(!e||!t)return;const r=t.map((t=>{const r=e.find((e=>e.id===t.order_id));return{"Sipariş ID":t.order_id,Tarih:new Date((null==r?void 0:r.created_at)||"").toLocaleDateString("tr-TR"),"Satıcı":(null==r?void 0:r.customer_name)||"","Ürün Tipi":O9(t.item_type),"Ürün Adı":t.product_name||"",Beden:t.size||"",Renk:t.color||"",Miktar:t.quantity,"Birim Fiyat":t.unit_price,"Toplam Fiyat":t.total_price,Maliyet:t.cost_price,Kar:t.total_price-t.cost_price*t.quantity,"Sipariş Durumu":(null==r?void 0:r.status)||""}})),a=[Object.keys(r[0]||{}).join(","),...r.map((e=>Object.values(e).join(",")))].join("\n"),n=new Blob([a],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),i=URL.createObjectURL(n);s.setAttribute("href",i),s.setAttribute("download",`satis_analizi_${(new Date).toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)})(n.ordersData||[],n.orderItemsData||[]),className:"gap-2",children:[i.jsx(qr,{className:"h-4 w-4"}),"CSV İndir"]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>(e=>{const t=e.map((e=>({"Ürün":e.product,Ciro:e.revenue,Maliyet:e.cost,Kar:e.profit,"Kar Marjı (%)":e.margin.toFixed(2),Miktar:e.quantity}))),r=[Object.keys(t[0]||{}).join(","),...t.map((e=>Object.values(e).join(",")))].join("\n"),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),s=URL.createObjectURL(a);n.setAttribute("href",s),n.setAttribute("download",`karlilik_raporu_${(new Date).toISOString().split("T")[0]}.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)})(o.profitabilityData),className:"gap-2",children:[i.jsx(Wr,{className:"h-4 w-4"}),"Kar Raporu"]})]})]}),i.jsxs(ro,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Xr,{className:"h-5 w-5"}),"Gelişmiş Filtreler"]})}),i.jsxs(io,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Tarih Aralığı"}),i.jsxs(nu,{open:a.datePickerOpen,onOpenChange:a.handleDatePickerOpen,children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{id:"date",variant:"outline",className:xs("w-full justify-start text-left font-normal",!a.dateRange.from&&"text-muted-foreground"),children:[i.jsx(pr,{className:"mr-2 h-4 w-4"}),a.dateRange.from?a.dateRange.to&&a.dateRange.from.getTime()!==a.dateRange.to.getTime()?i.jsxs(i.Fragment,{children:[XC(a.dateRange.from,"dd MMM",{locale:ZT})," - ",XC(a.dateRange.to,"dd MMM yyyy",{locale:ZT})]}):XC(a.dateRange.from,"dd MMM yyyy",{locale:ZT}):i.jsx("span",{children:"Tarih seçin"})]})}),i.jsx(iu,{className:"w-80 p-0",align:"start",children:i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Hızlı Seçim"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.datePresets.map((e=>i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>a.handleDatePreset(e),className:"justify-start text-xs",children:e.label},e.label)))})]}),i.jsxs("div",{className:"space-y-3 pt-2 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Özel Tarih Aralığı"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Başlangıç"}),i.jsx(co,{type:"date",value:a.tempDateRange.from?XC(a.tempDateRange.from,"yyyy-MM-dd"):"",onChange:e=>{if(e.target.value){const t=new Date(e.target.value);a.setTempDateRange((e=>({...e,from:t})))}},className:"text-xs"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Bitiş"}),i.jsx(co,{type:"date",value:a.tempDateRange.to?XC(a.tempDateRange.to,"yyyy-MM-dd"):"",onChange:e=>{if(e.target.value){const t=new Date(e.target.value);a.setTempDateRange((e=>({...e,to:t})))}},className:"text-xs"})]})]})]}),i.jsxs("div",{className:"flex justify-end pt-2 gap-2",children:[i.jsx(oo,{size:"sm",variant:"outline",onClick:()=>a.setDatePickerOpen(!1),className:"text-xs",children:"İptal"}),i.jsx(oo,{size:"sm",onClick:()=>a.applyDateRange(),className:"text-xs",children:"Uygula"})]})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Sipariş Durumu"}),i.jsxs(eO,{value:a.statusFilter,onValueChange:a.setStatusFilter,children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Durum seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tümü"}),i.jsx(iO,{value:"pending",children:"Beklemede"}),i.jsx(iO,{value:"processing",children:"İşleniyor"}),i.jsx(iO,{value:"delivered",children:"Teslim Edildi"}),i.jsx(iO,{value:"cancelled",children:"İptal Edildi"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Satıcılar Segmenti"}),i.jsxs(eO,{value:a.customerFilter,onValueChange:a.setCustomerFilter,children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Segment seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tümü"}),i.jsx(iO,{value:"En Çok Satış Yapan",children:"En Çok Satış Yapan Satıcılar"}),i.jsx(iO,{value:"Regular",children:"Düzenli Satıcılar"}),i.jsx(iO,{value:"New",children:"Yeni Satıcılar"}),i.jsx(iO,{value:"Churned",children:"Kaybedilen Satıcılar"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Arama"}),i.jsx(co,{placeholder:"Satıcı, müşteri veya ürün ara...",value:a.searchTerm,onChange:e=>a.setSearchTerm(e.target.value),className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Müşteri Seçimi"}),i.jsxs(eO,{value:a.selectedCustomerName||"all",onValueChange:e=>a.setSelectedCustomerName("all"===e?"":e),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Müşteri seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm Müşteriler"}),null==(r=n.customersData)?void 0:r.slice(0,50).map((e=>i.jsx(iO,{value:e.name,children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium",children:e.name}),i.jsxs("span",{className:"text-xs text-gray-500",children:[e.city," • ",e.orderCount," sipariş • ",A9(e.totalSpent)]})]})},e.name)))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Görünüm Seçenekleri"}),i.jsx("div",{className:"flex items-center space-x-3 mt-1",children:i.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer select-none",children:[i.jsx("input",{type:"checkbox",checked:a.showZeroRevenue,onChange:()=>a.setShowZeroRevenue(!a.showZeroRevenue),className:"form-checkbox h-5 w-5 text-blue-600 bg-gray-200 border-gray-300 rounded focus:ring-blue-500 transition-all",style:{minWidth:20,minHeight:40}}),i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:"₺0 ürünleri göster"})]})})]})]})]}),a.selectedCustomerName&&i.jsxs(ro,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 border-2 border-blue-200 dark:border-blue-800",children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-5 w-5 text-blue-600"}),"Seçilen Müşteri: ",a.selectedCustomerName]})}),i.jsx(io,{children:(()=>{var e;const t=null==(e=n.customersData)?void 0:e.find((e=>e.name===a.selectedCustomerName));return t?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.orderCount}),i.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Sipariş"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:A9(t.totalSpent)}),i.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Harcama"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:A9(t.totalSpent/t.orderCount)}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ortalama Sipariş"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg font-bold text-orange-600",children:t.city}),i.jsx("p",{className:"text-sm text-gray-600",children:"Şehir"})]})]}):i.jsx("div",{children:"Müşteri bulunamadı"})})()})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0 shadow-lg",children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Brüt Ciro"}),i.jsx(Lr,{className:"h-4 w-4 opacity-90"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:A9(o.totalRevenue)}),i.jsxs("p",{className:"text-xs opacity-90 flex items-center gap-1",children:[o.growthRate>0?i.jsx(sr,{className:"h-3 w-3"}):i.jsx(tr,{className:"h-3 w-3"}),E9(o.growthRate)]})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white border-0 shadow-lg",children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium opacity-90",children:"İskonto Sonrası Net Ciro"}),i.jsx(Ca,{className:"h-4 w-4 opacity-90"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:A9(o.discountAdjustedRevenue||0)}),i.jsxs("p",{className:"text-xs opacity-90",children:["İskonto: ",A9(o.totalDiscount||0)]})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0 shadow-lg",children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Girilen Form Sayısı"}),i.jsx(Ha,{className:"h-4 w-4 opacity-90"})]}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:o.totalOrders.toLocaleString("tr-TR")})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-pink-500 to-pink-600 text-white border-0 shadow-lg",children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Satıcılar Sayısı"}),i.jsx(hn,{className:"h-4 w-4 opacity-90"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:o.customerSegments.length}),i.jsxs("p",{className:"text-xs opacity-90",children:["%",o.kpis.returnCustomerRate.toFixed(1)," geri dönüş"]})]})]})]}),i.jsxs(Yo,{defaultValue:"overview",className:"space-y-6",children:[i.jsxs(Vo,{className:"grid w-full grid-cols-4",children:[i.jsxs(Go,{value:"overview",className:"flex items-center gap-2",children:[i.jsx(gr,{className:"h-4 w-4"}),"Genel Bakış"]}),i.jsxs(Go,{value:"sellers",className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4"}),"Satıcılar"]}),i.jsxs(Go,{value:"dealers",className:"flex items-center gap-2",children:[i.jsx(Qa,{className:"h-4 w-4"}),"Bayiler"]}),i.jsxs(Go,{value:"product-performance",className:"flex items-center gap-2",children:[i.jsx(gr,{className:"h-4 w-4"}),"Ürün Performansı"]})]}),i.jsx(Wo,{value:"overview",className:"space-y-6",children:i.jsx(D9,{salesMetrics:o,orderItemsData:n.orderItemsData,salesSettings:n.salesSettings,showZeroRevenue:a.showZeroRevenue})}),i.jsx(Wo,{value:"financial-breakdown",className:"space-y-6",children:i.jsx(R9,{salesMetrics:o})}),i.jsx(Wo,{value:"readyproducts",className:"space-y-6",children:i.jsx(I9,{salesMetrics:o,orderItemsData:n.orderItemsData})}),i.jsx(Wo,{value:"customdesigns",className:"space-y-6",children:i.jsx(F9,{salesMetrics:o,orderItemsData:n.orderItemsData})}),i.jsx(Wo,{value:"promotion",className:"space-y-6",children:i.jsx(B9,{salesMetrics:o,orderItemsData:n.orderItemsData})}),i.jsx(Wo,{value:"prints",className:"space-y-6",children:i.jsx(L9,{salesMetrics:o,printRequestsData:n.printRequestsData})}),i.jsx(Wo,{value:"sellers",className:"space-y-6",children:i.jsx(K9,{salesMetrics:o,ordersData:n.ordersData,orderItemsData:n.orderItemsData,printRequestsData:n.printRequestsData,salesSettings:n.salesSettings})}),i.jsx(Wo,{value:"old-sellers",className:"space-y-6",children:i.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Eski satıcılar analizi henüz implement edilmemiştir."})}),i.jsx(Wo,{value:"product-performance",className:"space-y-6",children:i.jsx(z9,{topPerforming:o.topPerformingProducts,worstPerforming:o.worstPerformingProducts,mostProfitable:o.mostProfitableProducts})}),i.jsx(Wo,{value:"economic",className:"space-y-6",children:i.jsx(M9,{totalRevenue:o.totalRevenue,totalCost:o.totalRevenue-o.totalProfit,totalProfit:o.totalProfit,monthlyTrends:o.monthlyTrends||[]})}),i.jsx(Wo,{value:"dealers",className:"space-y-6",children:i.jsx($9,{salesMetrics:o,ordersData:n.ordersData,orderItemsData:n.orderItemsData,printRequestsData:n.printRequestsData})})]}),s&&i.jsx(sd,{open:!!s,onOpenChange:()=>l(null),children:i.jsxs(cd,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"text-2xl font-bold flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold text-lg",children:s.name.substring(0,2).toUpperCase()}),i.jsx("div",{children:i.jsx("div",{children:s.name})})]}),i.jsx(hd,{children:"Müşterinin detaylı satış analizi"})]}),i.jsx("div",{className:"space-y-6 mt-6",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[i.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Toplam Ciro"}),i.jsx("p",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:A9(s.totalSpent)})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Toplam Sipariş"}),i.jsx("p",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:s.totalOrders})]}),i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Ortalama Sepet"}),i.jsx("p",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:A9(s.averageOrderValue)})]}),i.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[i.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Segment"}),i.jsx("p",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:s.segment})]})]})})]})})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(oa,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Satış verileri yükleniyor..."})]})})}const H9=({kpiData:e,loading:t})=>{if(t)return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:Array.from({length:8}).map(((e,t)=>i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Fc,{className:"h-4 w-20"}),i.jsx(Fc,{className:"h-4 w-4 rounded"})]}),i.jsxs(io,{children:[i.jsx(Fc,{className:"h-8 w-24 mb-2"}),i.jsx(Fc,{className:"h-3 w-16"})]})]},t)))});const r=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),a=e=>`${e.toFixed(1)}%`,n=e=>e<=20?"text-green-600":e<=40?"text-yellow-600":e<=60?"text-orange-600":"text-red-600";return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium text-gray-600",children:"Toplam Gelir"}),i.jsx(Lr,{className:"h-4 w-4 text-blue-600"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r(e.totalRevenue)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sipariş tutarları toplamı"})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium text-gray-600",children:"Tahsil Edilen"}),i.jsx(fn,{className:"h-4 w-4 text-green-600"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:r(e.totalCollected)}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx(an,{className:"h-3 w-3 text-green-600 mr-1"}),i.jsxs("p",{className:"text-xs text-green-600",children:[a(e.collectionRate)," tahsilat oranı"]})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium text-gray-600",children:"Kalan Tutarlar"}),i.jsx(zr,{className:"h-4 w-4 text-orange-600"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r(e.totalPending)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sipariş - Ödeme farkı"})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium text-gray-600",children:"Toplam İskonto"}),i.jsx(rn,{className:"h-4 w-4 text-red-600"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:r(e.totalDiscount)}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Verilen iskonto toplamı"})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium text-gray-600",children:"Tahsilat Oranı"}),i.jsx(Jt,{className:"h-4 w-4 text-blue-600"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a(e.collectionRate)}),i.jsxs("div",{className:"flex items-center mt-1",children:[e.collectionRate>=80?i.jsx(an,{className:"h-3 w-3 text-green-600 mr-1"}):i.jsx(rn,{className:"h-3 w-3 text-red-600 mr-1"}),i.jsx("p",{className:"text-xs "+(e.collectionRate>=80?"text-green-600":"text-red-600"),children:e.collectionRate>=80?"İyi performans":"Gelişim gerekli"})]})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium text-gray-600",children:"Ort. Tahsilat Süresi"}),i.jsx(zr,{className:"h-4 w-4 text-purple-600"})]}),i.jsxs(io,{children:[i.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[e.averageCollectionTime.toFixed(1)," gün"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sipariş - ödeme arası süre"})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium text-gray-600",children:"Risk Skoru"}),i.jsx(nn,{className:`h-4 w-4 ${n(e.riskScore)}`})]}),i.jsxs(io,{children:[i.jsx("div",{className:`text-2xl font-bold ${n(e.riskScore)}`,children:e.riskScore.toFixed(0)}),i.jsx("p",{className:`text-xs mt-1 ${n(e.riskScore)}`,children:(s=e.riskScore,s<=20?"Düşük Risk":s<=40?"Orta Risk":s<=60?"Yüksek Risk":"Kritik Risk")})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium text-gray-600",children:"Nakit Akışı Sağlığı"}),i.jsx(Ir,{className:`h-4 w-4 ${(e=>{switch(e){case"excellent":return"text-green-600";case"good":return"text-blue-600";case"warning":return"text-yellow-600";case"critical":return"text-red-600";default:return"text-gray-600"}})(e.cashFlowHealth)}`})]}),i.jsx(io,{children:i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsx(Co,{variant:(e=>{switch(e){case"excellent":return"default";case"good":return"secondary";case"warning":default:return"outline";case"critical":return"destructive"}})(e.cashFlowHealth),className:"w-fit",children:(e=>{switch(e){case"excellent":return"Mükemmel";case"good":return"İyi";case"warning":return"Dikkat";case"critical":return"Kritik";default:return"Bilinmiyor"}})(e.cashFlowHealth)}),i.jsx("p",{className:"text-xs text-gray-500",children:"Genel finansal durum"})]})})]})]});var s},Y9=({data:e,height:t=400,loading:r=!1,title:a="Nakit Akışı Analizi",showDetailed:n=!1})=>{if(r)return i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:a})}),i.jsx(io,{children:i.jsx(Fc,{className:"w-full h-"+t/4})})]});if(!e||0===e.length)return i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:a})}),i.jsx(io,{children:i.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Veri bulunamadı"})})]});const s=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),l=e=>{try{return XC(sT(e),"dd MMM",{locale:ZT})}catch{return e}},o=e=>{try{return XC(sT(e),"dd MMMM yyyy EEEE",{locale:ZT})}catch{return e}},c=e.map((e=>"cashIn"in e?{date:e.date,formattedDate:l(e.date),"Nakit Girişi":e.cashIn,"Kredi Kartı Girişi":e.creditCardIn,"Toplam Giriş":e.totalIn,"İskonto":e.discount,"Net Nakit Akışı":e.netCashFlow,"Sipariş Sayısı":e.orderCount}:{date:e.date,formattedDate:l(e.date),"Nakit Girişi":e.cashAmount,"Kredi Kartı Girişi":e.creditCardAmount,"Toplam Giriş":e.totalAmount,"İskonto":e.discountAmount,"Net Nakit Akışı":e.netAmount,"Sipariş Sayısı":e.orderCount,"Ortalama Sipariş Değeri":e.averageOrderValue})),d=({active:e,payload:t,label:r})=>e&&t&&t.length?i.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[i.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:o(r)}),t.map(((e,t)=>i.jsxs("p",{className:"text-sm",style:{color:e.color},children:[i.jsxs("span",{className:"font-medium",children:[e.dataKey,":"]})," ",s(e.value)]},t)))]}):null;return n?i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Günlük Nakit Akışı Trendi"})}),i.jsx(io,{children:i.jsx(XL,{width:"100%",height:t,children:i.jsxs(v5,{data:c,children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"cashFlow",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),i.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.1})]}),i.jsxs("linearGradient",{id:"totalFlow",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),i.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.1})]})]}),i.jsx(H2,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),i.jsx(i3,{dataKey:"formattedDate",stroke:"#6B7280",fontSize:12}),i.jsx(f3,{stroke:"#6B7280",fontSize:12,tickFormatter:s}),i.jsx(kL,{content:i.jsx(d,{})}),i.jsx($F,{}),i.jsx(N4,{type:"monotone",dataKey:"Net Nakit Akışı",stroke:"#10B981",strokeWidth:2,fill:"url(#cashFlow)"}),i.jsx(N4,{type:"monotone",dataKey:"Toplam Giriş",stroke:"#3B82F6",strokeWidth:2,fill:"url(#totalFlow)"})]})})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Ödeme Yöntemi Dağılımı"})}),i.jsx(io,{children:i.jsx(XL,{width:"100%",height:300,children:i.jsxs(b5,{data:c,children:[i.jsx(H2,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),i.jsx(i3,{dataKey:"formattedDate",stroke:"#6B7280",fontSize:12}),i.jsx(f3,{stroke:"#6B7280",fontSize:12,tickFormatter:s}),i.jsx(kL,{content:i.jsx(d,{})}),i.jsx($F,{}),i.jsx(B0,{dataKey:"Nakit Girişi",fill:"#10B981",name:"Nakit",radius:[2,2,0,0]}),i.jsx(B0,{dataKey:"Kredi Kartı Girişi",fill:"#3B82F6",name:"Kredi Kartı",radius:[2,2,0,0]}),i.jsx(o4,{type:"monotone",dataKey:"İskonto",stroke:"#EF4444",strokeWidth:2,name:"İskonto",strokeDasharray:"5 5"})]})})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Sipariş Hacmi ve Ortalama Değer"})}),i.jsx(io,{children:i.jsx(XL,{width:"100%",height:250,children:i.jsxs(b5,{data:c,children:[i.jsx(H2,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),i.jsx(i3,{dataKey:"formattedDate",stroke:"#6B7280",fontSize:12}),i.jsx(f3,{yAxisId:"left",stroke:"#6B7280",fontSize:12}),i.jsx(f3,{yAxisId:"right",orientation:"right",stroke:"#6B7280",fontSize:12,tickFormatter:s}),i.jsx(kL,{formatter:(e,t)=>"Sipariş Sayısı"===t?[e,t]:[s(e),t]}),i.jsx($F,{}),i.jsx(B0,{yAxisId:"left",dataKey:"Sipariş Sayısı",fill:"#8B5CF6",name:"Sipariş Sayısı",radius:[2,2,0,0]}),n&&i.jsx(o4,{yAxisId:"right",type:"monotone",dataKey:"Ortalama Sipariş Değeri",stroke:"#F59E0B",strokeWidth:3,name:"Ort. Sipariş Değeri"})]})})})]})]}):i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:a})}),i.jsx(io,{children:i.jsx(XL,{width:"100%",height:t,children:i.jsxs(b5,{data:c,children:[i.jsx(H2,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),i.jsx(i3,{dataKey:"formattedDate",stroke:"#6B7280",fontSize:12}),i.jsx(f3,{stroke:"#6B7280",fontSize:12,tickFormatter:s}),i.jsx(kL,{content:i.jsx(d,{})}),i.jsx($F,{}),i.jsx(B0,{dataKey:"Nakit Girişi",fill:"#10B981",name:"Nakit",radius:[2,2,0,0]}),i.jsx(B0,{dataKey:"Kredi Kartı Girişi",fill:"#3B82F6",name:"Kredi Kartı",radius:[2,2,0,0]}),i.jsx(o4,{type:"monotone",dataKey:"Net Nakit Akışı",stroke:"#059669",strokeWidth:3,name:"Net Akış"}),i.jsx(o4,{type:"monotone",dataKey:"İskonto",stroke:"#EF4444",strokeWidth:2,name:"İskonto",strokeDasharray:"5 5"})]})})})]})},V9=({data:e,height:t=300,loading:r=!1,showDetailed:a=!1})=>{if(r)return i.jsx("div",{className:"space-y-6",children:i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Ödeme Yöntemi Dağılımı"})}),i.jsx(io,{children:i.jsx(Fc,{className:"w-full h-"+t/4})})]})});if(!e||0===e.length)return i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Ödeme Yöntemi Dağılımı"})}),i.jsx(io,{children:i.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Veri bulunamadı"})})]});const n=e.length>1,s=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),l=e=>`${e.toFixed(1)}%`,o=e.map((e=>({name:e.label,value:e.amount,percentage:e.percentage,color:e.color,orderCount:e.orderCount}))),c=e.map((e=>({method:e.label,"Toplam Tutar":e.amount,"Sipariş Sayısı":e.orderCount,"Ort. Sipariş Değeri":e.averageOrderValue,"İskonto Oranı":e.discountRate,color:e.color}))),d=({active:e,payload:t,label:r})=>e&&t&&t.length?i.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[i.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:r}),t.map(((e,t)=>i.jsxs("p",{className:"text-sm",style:{color:e.color},children:[i.jsxs("span",{className:"font-medium",children:[e.dataKey,":"]})," ","Sipariş Sayısı"===e.dataKey?e.value:"İskonto Oranı"===e.dataKey?l(e.value):s(e.value)]},t)))]}):null,u=({active:e,payload:t})=>{if(e&&t&&t.length){const e=t[0].payload;return i.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[i.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:e.name}),i.jsxs("p",{className:"text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium",children:"Tutar:"})," ",s(e.value)]}),i.jsxs("p",{className:"text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium",children:"Oran:"})," ",l(e.percentage)]}),i.jsxs("p",{className:"text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium",children:"Sipariş:"})," ",e.orderCount," adet"]})]})}return null},m=({cx:e,cy:t,midAngle:r,innerRadius:a,outerRadius:n,percent:s})=>{const l=Math.PI/180,o=a+.5*(n-a),c=e+o*Math.cos(-r*l),d=t+o*Math.sin(-r*l);return i.jsx("text",{x:c,y:d,fill:"white",textAnchor:c>e?"start":"end",dominantBaseline:"central",fontSize:12,fontWeight:"bold",children:`${(100*s).toFixed(1)}%`})};return a?i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Ödeme Yöntemi Dağılımı"})}),i.jsx(io,{children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-center space-y-4 lg:space-y-0 lg:space-x-8",children:[i.jsx("div",{className:"flex-1",children:i.jsx(XL,{width:"100%",height:300,children:i.jsxs(f5,{children:[i.jsx(jJ,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:m,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o.map(((e,t)=>i.jsx(ZL,{fill:e.color},`cell-${t}`)))}),i.jsx(kL,{content:i.jsx(u,{})})]})})}),i.jsx("div",{className:"flex-1 space-y-4",children:e.map(((e,t)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),i.jsx("span",{className:"font-medium text-gray-900",children:e.label})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-semibold text-gray-900",children:s(e.amount)}),i.jsxs("div",{className:"text-sm text-gray-500",children:[e.orderCount," sipariş"]})]})]},t)))})]})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Ödeme Yöntemi Detay Analizi"})}),i.jsx(io,{children:i.jsx(XL,{width:"100%",height:350,children:i.jsxs(b5,{data:c,children:[i.jsx(H2,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),i.jsx(i3,{dataKey:"method",stroke:"#6B7280",fontSize:12}),i.jsx(f3,{yAxisId:"left",stroke:"#6B7280",fontSize:12}),i.jsx(f3,{yAxisId:"right",orientation:"right",stroke:"#6B7280",fontSize:12,tickFormatter:s}),i.jsx(kL,{content:i.jsx(d,{})}),i.jsx($F,{}),i.jsx(B0,{yAxisId:"left",dataKey:"Sipariş Sayısı",fill:"#8B5CF6",name:"Sipariş Sayısı",radius:[2,2,0,0]}),i.jsx(o4,{yAxisId:"right",type:"monotone",dataKey:"Ort. Sipariş Değeri",stroke:"#F59E0B",strokeWidth:3,name:"Ort. Sipariş Değeri"}),i.jsx(o4,{yAxisId:"left",type:"monotone",dataKey:"İskonto Oranı",stroke:"#EF4444",strokeWidth:2,name:"İskonto Oranı (%)",strokeDasharray:"5 5"})]})})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Ödeme Yöntemi Performans Karşılaştırması"})}),i.jsx(io,{children:i.jsx(XL,{width:"100%",height:250,children:i.jsxs(g5,{data:c,children:[i.jsx(H2,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),i.jsx(i3,{dataKey:"method",stroke:"#6B7280",fontSize:12}),i.jsx(f3,{stroke:"#6B7280",fontSize:12,tickFormatter:s}),i.jsx(kL,{content:i.jsx(d,{})}),i.jsx($F,{}),i.jsx(B0,{dataKey:"Toplam Tutar",fill:"#10B981",name:"Toplam Tutar",radius:[2,2,0,0]}),i.jsx(B0,{dataKey:"Ort. Sipariş Değeri",fill:"#3B82F6",name:"Ort. Sipariş Değeri",radius:[2,2,0,0]})]})})})]})]}):i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Ödeme Yöntemi Dağılımı"})}),i.jsx(io,{children:n?i.jsxs("div",{className:"flex flex-col lg:flex-row items-center space-y-4 lg:space-y-0 lg:space-x-8",children:[i.jsx("div",{className:"flex-1",children:i.jsx(XL,{width:"100%",height:t,children:i.jsxs(f5,{children:[i.jsx(jJ,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:m,outerRadius:100,fill:"#8884d8",dataKey:"value",children:o.map(((e,t)=>i.jsx(ZL,{fill:e.color},`cell-${t}`)))}),i.jsx(kL,{content:i.jsx(u,{})})]})})}),i.jsx("div",{className:"flex-1 space-y-3",children:e.map(((e,t)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),i.jsx("span",{className:"font-medium text-gray-900",children:e.label})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-semibold text-gray-900",children:s(e.amount)}),i.jsxs("div",{className:"text-sm text-gray-500",children:[e.orderCount," sipariş • ",l(e.percentage)]})]})]},t)))})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-lg",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:e[0].label}),i.jsx("div",{className:"text-lg text-blue-500",children:"Tüm ödemeler bu yöntemle yapılmış"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-green-50 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:s(e[0].amount)}),i.jsx("div",{className:"text-sm text-green-700",children:"Toplam Tutar"})]}),i.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e[0].orderCount}),i.jsx("div",{className:"text-sm text-purple-700",children:"Sipariş Sayısı"})]}),i.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s(e[0].averageOrderValue)}),i.jsx("div",{className:"text-sm text-orange-700",children:"Ortalama Sipariş"})]})]}),e[0].discountRate>0&&i.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg text-center",children:[i.jsxs("div",{className:"text-xl font-bold text-yellow-600",children:[l(e[0].discountRate)," İskonto Oranı"]}),i.jsx("div",{className:"text-sm text-yellow-700",children:"Bu ödeme yöntemi için"})]})]})})]})},G9=({customerData:e,riskMetrics:t,height:r=400,loading:a=!1,showDetailed:n=!1})=>{const[s,l]=ze.useState("all");if(a)return i.jsx("div",{className:"space-y-6",children:i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Müşteri Risk Analizi"})}),i.jsx(io,{children:i.jsx(Fc,{className:"w-full h-"+r/4})})]})});if(!e||0===e.length)return i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Müşteri Risk Analizi"})}),i.jsx(io,{children:i.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Müşteri verisi bulunamadı"})})]});const o=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),c=e=>`${e.toFixed(1)}%`,d=e=>{switch(e){case"excellent":return"#10B981";case"good":return"#3B82F6";case"fair":return"#F59E0B";case"poor":return"#EF4444";default:return"#6B7280"}},u=e=>{switch(e){case"excellent":return"Mükemmel";case"good":return"İyi";case"fair":return"Orta";case"poor":return"Kötü";default:return"Bilinmiyor"}},m=e.filter((e=>"all"===s||("low"===s?e.riskScore<=30:"medium"===s?e.riskScore>30&&e.riskScore<=60:"high"!==s||e.riskScore>60))).map((e=>{return{x:e.averagePaymentTime,y:e.onTimePaymentRate,z:e.totalPaid,riskScore:e.riskScore,customerName:e.customerName,company:e.company,totalOrders:e.totalOrders,color:(t=e.riskScore,t<=30?"#10B981":t<=60?"#F59E0B":"#EF4444")};var t})),h=e.filter((e=>e.riskScore>30)).sort(((e,t)=>t.riskScore-e.riskScore)).slice(0,10),p=e.sort(((e,t)=>t.totalPaid-e.totalPaid)).slice(0,10),x=({active:e,payload:t})=>{if(e&&t&&t.length){const e=t[0].payload;return i.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg max-w-xs",children:[i.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:e.customerName}),e.company&&i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.company}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Risk Skoru:"})," ",e.riskScore.toFixed(0)]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Ort. Ödeme Süresi:"})," ",e.x.toFixed(1)," gün"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Zamanında Ödeme:"})," ",c(e.y)]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Toplam Ödeme:"})," ",o(e.z)]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Sipariş Sayısı:"})," ",e.totalOrders]})]})]})}return null},g=()=>i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[i.jsxs(oo,{variant:"all"===s?"default":"outline",size:"sm",onClick:()=>l("all"),children:["Tümü (",e.length,")"]}),i.jsxs(oo,{variant:"low"===s?"default":"outline",size:"sm",onClick:()=>l("low"),className:"low"===s?"bg-green-600 hover:bg-green-700":"",children:["Düşük Risk (",t.lowRiskCustomers,")"]}),i.jsxs(oo,{variant:"medium"===s?"default":"outline",size:"sm",onClick:()=>l("medium"),className:"medium"===s?"bg-yellow-600 hover:bg-yellow-700":"",children:["Orta Risk (",t.mediumRiskCustomers,")"]}),i.jsxs(oo,{variant:"high"===s?"default":"outline",size:"sm",onClick:()=>l("high"),className:"high"===s?"bg-red-600 hover:bg-red-700":"",children:["Yüksek Risk (",t.highRiskCustomers,")"]})]});return n?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium",children:"Toplam Risk"}),i.jsx(nn,{className:"h-4 w-4 text-red-600"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:o(t.totalAtRisk)}),i.jsx("p",{className:"text-xs text-gray-500",children:"Riskli müşterilerden alacak"})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium",children:"Yüksek Risk"}),i.jsx(hn,{className:"h-4 w-4 text-red-600"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.highRiskCustomers}),i.jsx("p",{className:"text-xs text-gray-500",children:"Müşteri sayısı"})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium",children:"Ortalama Risk"}),i.jsx(an,{className:"h-4 w-4 text-yellow-600"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.averageRiskScore.toFixed(0)}),i.jsx("p",{className:"text-xs text-gray-500",children:"Risk skoru ortalaması"})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium",children:"Güvenli Müşteri"}),i.jsx(hn,{className:"h-4 w-4 text-green-600"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.lowRiskCustomers}),i.jsx("p",{className:"text-xs text-gray-500",children:"Düşük riskli müşteri"})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Risk Seviyesi Dağılımı"})}),i.jsx(io,{children:i.jsxs("div",{className:"flex flex-col lg:flex-row items-center space-y-4 lg:space-y-0 lg:space-x-8",children:[i.jsx("div",{className:"flex-1",children:i.jsx(XL,{width:"100%",height:250,children:i.jsxs(f5,{children:[i.jsx(jJ,{data:t.riskDistribution,cx:"50%",cy:"50%",labelLine:!1,label:({value:e})=>`${e.toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"percentage",children:t.riskDistribution.map(((e,t)=>i.jsx(ZL,{fill:e.color},`cell-${t}`)))}),i.jsx(kL,{formatter:(e,t)=>[`${"number"==typeof e?e.toFixed(1):e}%`,t]})]})})}),i.jsx("div",{className:"flex-1 space-y-3",children:t.riskDistribution.map(((e,t)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),i.jsx("span",{className:"font-medium text-gray-900",children:e.label})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-gray-900",children:[e.count," müşteri"]}),i.jsx("div",{className:"text-sm text-gray-500",children:c(e.percentage)})]})]},t)))})]})})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsx(no,{children:"Müşteri Risk Haritası"}),i.jsx("p",{className:"text-sm text-gray-600",children:"X: Ortalama Ödeme Süresi (gün), Y: Zamanında Ödeme Oranı (%), Bubble: Toplam Ödeme"})]}),i.jsxs(io,{children:[i.jsx(g,{}),i.jsx(XL,{width:"100%",height:400,children:i.jsxs(y5,{children:[i.jsx(H2,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),i.jsx(i3,{type:"number",dataKey:"x",name:"Ort. Ödeme Süresi",stroke:"#6B7280",fontSize:12,label:{value:"Ortalama Ödeme Süresi (gün)",position:"insideBottom",offset:-5}}),i.jsx(f3,{type:"number",dataKey:"y",name:"Zamanında Ödeme Oranı",stroke:"#6B7280",fontSize:12,label:{value:"Zamanında Ödeme Oranı (%)",angle:-90,position:"insideLeft"}}),i.jsx(kL,{content:i.jsx(x,{})}),i.jsx(W4,{name:"Müşteriler",data:m,fill:"#8884d8"})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center space-x-2",children:[i.jsx(nn,{className:"h-5 w-5 text-red-600"}),i.jsx("span",{children:"En Riskli Müşteriler"})]})}),i.jsx(io,{children:i.jsx("div",{className:"space-y-3",children:h.map(((e,t)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900",children:e.customerName}),e.company&&i.jsx("div",{className:"text-sm text-gray-600",children:e.company}),i.jsxs("div",{className:"text-sm text-gray-500",children:[e.totalOrders," sipariş • ",o(e.totalPaid)]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs(Co,{variant:"destructive",children:["Risk: ",e.riskScore.toFixed(0)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[e.averagePaymentTime.toFixed(1)," gün ort."]})]})]},t)))})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center space-x-2",children:[i.jsx(Lr,{className:"h-5 w-5 text-green-600"}),i.jsx("span",{children:"En Değerli Müşteriler"})]})}),i.jsx(io,{children:i.jsx("div",{className:"space-y-3",children:p.map(((e,t)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900",children:e.customerName}),e.company&&i.jsx("div",{className:"text-sm text-gray-600",children:e.company}),i.jsxs("div",{className:"text-sm text-gray-500",children:[e.totalOrders," sipariş • ",c(e.onTimePaymentRate)," zamanında"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-semibold text-green-600",children:o(e.totalPaid)}),i.jsx(Co,{style:{backgroundColor:d(e.paymentBehavior)},className:"text-white",children:u(e.paymentBehavior)})]})]},t)))})})]})]})]}):i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Müşteri Risk Analizi"})}),i.jsx(io,{children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Risk Seviyesi Dağılımı"}),i.jsx(XL,{width:"100%",height:250,children:i.jsxs(f5,{children:[i.jsx(jJ,{data:t.riskDistribution,cx:"50%",cy:"50%",labelLine:!1,label:({value:e})=>`${e.toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"percentage",children:t.riskDistribution.map(((e,t)=>i.jsx(ZL,{fill:e.color},`cell-${t}`)))}),i.jsx(kL,{formatter:(e,t)=>[`${"number"==typeof e?e.toFixed(1):e}%`,t]})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:"Risk Özeti"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[i.jsx("span",{className:"text-red-700 font-medium",children:"Yüksek Risk"}),i.jsxs("span",{className:"text-red-600 font-semibold",children:[t.highRiskCustomers," müşteri"]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[i.jsx("span",{className:"text-yellow-700 font-medium",children:"Orta Risk"}),i.jsxs("span",{className:"text-yellow-600 font-semibold",children:[t.mediumRiskCustomers," müşteri"]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[i.jsx("span",{className:"text-green-700 font-medium",children:"Düşük Risk"}),i.jsxs("span",{className:"text-green-600 font-semibold",children:[t.lowRiskCustomers," müşteri"]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border-t border-gray-200",children:[i.jsx("span",{className:"text-gray-700 font-medium",children:"Toplam Risk Tutarı"}),i.jsx("span",{className:"text-red-600 font-semibold",children:o(t.totalAtRisk)})]})]})]})]})})]})},W9=({filters:e,onFiltersChange:t,customersData:r,loading:a=!1,onExport:n,onRefresh:s})=>{const l=(r,a)=>{t({...e,[r]:a})},o=()=>{let t=0;return e.customerId&&t++,e.paymentMethod&&"all"!==e.paymentMethod&&t++,e.paymentStatus&&"all"!==e.paymentStatus&&t++,e.riskLevel&&"all"!==e.riskLevel&&t++,e.bankFilter&&t++,t},c=r.find((t=>t.id===e.customerId));return i.jsxs(ro,{className:"mb-6",children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(no,{className:"flex items-center space-x-2",children:[i.jsx(Xr,{className:"h-5 w-5"}),i.jsx("span",{children:"Analiz Filtreleri"}),o()>0&&i.jsxs(Co,{variant:"secondary",children:[o()," filtre aktif"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[s&&i.jsxs(oo,{variant:"outline",size:"sm",onClick:s,disabled:a,className:"flex items-center space-x-2",children:[i.jsx(Da,{className:"h-4 w-4 "+(a?"animate-spin":"")}),i.jsx("span",{children:"Yenile"})]}),n&&i.jsxs(oo,{variant:"outline",size:"sm",onClick:n,disabled:a,className:"flex items-center space-x-2",children:[i.jsx(qr,{className:"h-4 w-4"}),i.jsx("span",{children:"Dışa Aktar"})]}),o()>0&&i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>{const e=new Date,r=new Date(e.getTime()-2592e6);t({dateFrom:XC(r,"yyyy-MM-dd"),dateTo:XC(e,"yyyy-MM-dd"),customerId:void 0,paymentMethod:"all",paymentStatus:"all",riskLevel:"all",bankFilter:void 0})},className:"flex items-center space-x-2",children:[i.jsx(vn,{className:"h-4 w-4"}),i.jsx("span",{children:"Temizle"})]})]})]})}),i.jsxs(io,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"dateFrom",className:"text-sm font-medium",children:"Başlangıç Tarihi"}),i.jsxs("div",{className:"relative",children:[i.jsx(co,{id:"dateFrom",type:"date",value:e.dateFrom,onChange:e=>l("dateFrom",e.target.value),className:"pr-10"}),i.jsx(pr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"dateTo",className:"text-sm font-medium",children:"Bitiş Tarihi"}),i.jsxs("div",{className:"relative",children:[i.jsx(co,{id:"dateTo",type:"date",value:e.dateTo,onChange:e=>l("dateTo",e.target.value),className:"pr-10"}),i.jsx(pr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{className:"text-sm font-medium",children:"Müşteri"}),i.jsxs(eO,{value:e.customerId||"all",onValueChange:e=>l("customerId","all"===e?void 0:e),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Müşteri seç",children:c?i.jsxs("span",{className:"truncate",children:[c.full_name,c.company&&` (${c.company})`]}):"Tüm müşteriler"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm müşteriler"}),r.map((e=>i.jsxs(iO,{value:e.id,children:[e.full_name,e.company&&` (${e.company})`]},e.id)))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{className:"text-sm font-medium",children:"Ödeme Yöntemi"}),i.jsxs(eO,{value:e.paymentMethod||"all",onValueChange:e=>l("paymentMethod",e),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tümü"}),i.jsx(iO,{value:"cash",children:"Nakit"}),i.jsx(iO,{value:"credit_card",children:"Kredi Kartı"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{className:"text-sm font-medium",children:"Ödeme Durumu"}),i.jsxs(eO,{value:e.paymentStatus||"all",onValueChange:e=>l("paymentStatus",e),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tümü"}),i.jsx(iO,{value:"completed",children:"Tamamlandı"}),i.jsx(iO,{value:"pending",children:"Beklemede"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{className:"text-sm font-medium",children:"Risk Seviyesi"}),i.jsxs(eO,{value:e.riskLevel||"all",onValueChange:e=>l("riskLevel",e),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tümü"}),i.jsx(iO,{value:"low",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),i.jsx("span",{children:"Düşük Risk"})]})}),i.jsx(iO,{value:"medium",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),i.jsx("span",{children:"Orta Risk"})]})}),i.jsx(iO,{value:"high",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),i.jsx("span",{children:"Yüksek Risk"})]})})]})]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(po,{htmlFor:"bankFilter",className:"text-sm font-medium",children:"Banka Filtresi"}),i.jsx(co,{id:"bankFilter",type:"text",placeholder:"Banka adı ile filtrele...",value:e.bankFilter||"",onChange:e=>l("bankFilter",e.target.value||void 0),className:"mt-2"})]}),o()>0&&i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Aktif filtreler:"}),c&&i.jsxs(Co,{variant:"outline",className:"flex items-center space-x-1",children:[i.jsxs("span",{children:["Müşteri: ",c.full_name]}),i.jsx("button",{onClick:()=>l("customerId",void 0),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:i.jsx(vn,{className:"h-3 w-3"})})]}),e.paymentMethod&&"all"!==e.paymentMethod&&i.jsxs(Co,{variant:"outline",className:"flex items-center space-x-1",children:[i.jsxs("span",{children:["Yöntem: ","cash"===e.paymentMethod?"Nakit":"Kredi Kartı"]}),i.jsx("button",{onClick:()=>l("paymentMethod","all"),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:i.jsx(vn,{className:"h-3 w-3"})})]}),e.paymentStatus&&"all"!==e.paymentStatus&&i.jsxs(Co,{variant:"outline",className:"flex items-center space-x-1",children:[i.jsxs("span",{children:["Durum: ","completed"===e.paymentStatus?"Tamamlandı":"Beklemede"]}),i.jsx("button",{onClick:()=>l("paymentStatus","all"),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:i.jsx(vn,{className:"h-3 w-3"})})]}),e.riskLevel&&"all"!==e.riskLevel&&i.jsxs(Co,{variant:"outline",className:"flex items-center space-x-1",children:[i.jsxs("span",{children:["Risk: ","low"===e.riskLevel?"Düşük":"medium"===e.riskLevel?"Orta":"Yüksek"]}),i.jsx("button",{onClick:()=>l("riskLevel","all"),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:i.jsx(vn,{className:"h-3 w-3"})})]}),e.bankFilter&&i.jsxs(Co,{variant:"outline",className:"flex items-center space-x-1",children:[i.jsxs("span",{children:["Banka: ",e.bankFilter]}),i.jsx("button",{onClick:()=>l("bankFilter",void 0),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:i.jsx(vn,{className:"h-3 w-3"})})]})]})}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[i.jsxs("span",{children:["Analiz dönem: "," ",i.jsxs("strong",{children:[XC(new Date(e.dateFrom),"dd MMMM yyyy",{locale:ZT})," - "," ",XC(new Date(e.dateTo),"dd MMMM yyyy",{locale:ZT})]})]}),i.jsxs("span",{children:["Toplam: "," ",i.jsxs("strong",{children:[Math.ceil((new Date(e.dateTo).getTime()-new Date(e.dateFrom).getTime())/864e5)," gün"]})]})]})})]})]})},Q9=(e,t)=>{let r=0,a=0;return e.forEach((e=>{const n=sT(e.created_at);t.filter((t=>t.order_id===e.id&&"completed"===t.status)).forEach((e=>{const t=lC(e.processed_at?sT(e.processed_at):sT(e.created_at),n);t>=0&&(r+=t,a++)}))})),a>0?r/a:0},X9=(e,t)=>{const r=new Map;return e.forEach((e=>{const t=XC(sT(e.created_at),"yyyy-MM-dd");r.has(t)||r.set(t,{date:t,cashIn:0,creditCardIn:0,totalIn:0,discount:0,netCashFlow:0,orderCount:0});const a=r.get(t);"cash"===e.payment_method?a.cashIn+=e.amount:"credit_card"===e.payment_method&&(a.creditCardIn+=e.amount),a.totalIn+=e.amount,a.discount+=e.discount||0,a.netCashFlow=a.totalIn-a.discount,a.orderCount++})),Array.from(r.values()).sort(((e,t)=>e.date.localeCompare(t.date)))},Z9=(e,t)=>{const r=new Map;e.forEach((e=>{var t,a,n;let s=null==(t=e.payment_method)?void 0:t.toLowerCase();s="credit_card"===s||"creditcard"===s||"card"===s?"credit_card":"cash",r.has(s)||r.set(s,{amount:0,orderCount:0,discount:0});const i=r.get(s);i.amount+=parseFloat((null==(a=e.amount)?void 0:a.toString())||"0"),i.orderCount++,i.discount+=parseFloat((null==(n=e.discount)?void 0:n.toString())||"0")}));const a=t.filter((e=>{var t;const r=null==(t=e.payment_method)?void 0:t.toLowerCase();return"credit_card"===r||"creditcard"===r||"card"===r}));a.forEach((e=>{var t;const a="credit_card";r.has(a)||r.set(a,{amount:0,orderCount:0,discount:0});const n=r.get(a);n.amount+=parseFloat((null==(t=e.total_amount)?void 0:t.toString())||"0"),n.orderCount++}));const n=t.filter((t=>{var r;const a=null==(r=t.payment_method)?void 0:r.toLowerCase(),n="cash"===a||"nakit"===a,s=e.some((e=>e.order_id===t.id));return n&&!s}));n.forEach((e=>{var t;const a="cash";r.has(a)||r.set(a,{amount:0,orderCount:0,discount:0});const n=r.get(a);n.amount+=parseFloat((null==(t=e.total_amount)?void 0:t.toString())||"0"),n.orderCount++}));const s=e.reduce(((e,t)=>{var r;return e+parseFloat((null==(r=t.amount)?void 0:r.toString())||"0")}),0)+a.reduce(((e,t)=>{var r;return e+parseFloat((null==(r=t.total_amount)?void 0:r.toString())||"0")}),0)+n.reduce(((e,t)=>{var r;return e+parseFloat((null==(r=t.total_amount)?void 0:r.toString())||"0")}),0),i=[];return r.forEach(((e,t)=>{const r=s>0?e.amount/s*100:0,a=e.orderCount>0?e.amount/e.orderCount:0,n=e.amount>0?e.discount/e.amount*100:0;i.push({method:t,label:"cash"===t?"Nakit":"Kredi Kartı",amount:e.amount,percentage:r,averageOrderValue:a,discountRate:n,orderCount:e.orderCount,color:"cash"===t?"#10B981":"#3B82F6"})})),i.sort(((e,t)=>t.amount-e.amount))},J9=(e,t,r)=>{const a=new Map;e.forEach((e=>{const r=t.filter((t=>t.order_id===e.id));a.has(e.customer_id)||a.set(e.customer_id,{totalPaid:0,totalDiscount:0,totalOrders:0,paymentTimes:[],onTimeCount:0,cashCount:0,creditCardCount:0,lastPaymentDate:e.created_at});const n=a.get(e.customer_id);n.totalOrders++,r.forEach((t=>{n.totalPaid+=t.amount,n.totalDiscount+=t.discount||0,"cash"===t.payment_method?n.cashCount++:n.creditCardCount++,t.created_at>n.lastPaymentDate&&(n.lastPaymentDate=t.created_at);const r=lC(t.processed_at?sT(t.processed_at):sT(t.created_at),sT(e.created_at));r>=0&&(n.paymentTimes.push(r),r<=7&&n.onTimeCount++)}))}));const n=[];return a.forEach(((t,a)=>{var s,i;let l="Bilinmeyen Müşteri",o="";const c=e.find((e=>e.customer_id===a));if(c&&(l=c.customer_name||(null==(s=c.profiles)?void 0:s.full_name)||"Bilinmeyen Müşteri",o=c.company_name||(null==(i=c.profiles)?void 0:i.company)||""),"Bilinmeyen Müşteri"===l){const e=r.find((e=>e.id===a));e&&(l=e.full_name||"Bilinmeyen Müşteri",o=e.company||"")}const d=t.paymentTimes.length>0?t.paymentTimes.reduce(((e,t)=>e+t),0)/t.paymentTimes.length:0,u=t.paymentTimes.length>0?t.onTimeCount/t.paymentTimes.length*100:100;let m=0;d>30?m+=40:d>14?m+=20:d>7&&(m+=10),u<50?m+=30:u<75?m+=15:u<90&&(m+=5);let h="excellent";m>60?h="poor":m>30?h="fair":m>10&&(h="good");let p="mixed";t.cashCount>2*t.creditCardCount?p="cash":t.creditCardCount>2*t.cashCount&&(p="credit_card"),n.push({customerId:a,customerName:l,company:o,totalPaid:t.totalPaid,totalDiscount:t.totalDiscount,totalOrders:t.totalOrders,averagePaymentTime:d,riskScore:m,paymentBehavior:h,lastPaymentDate:t.lastPaymentDate,onTimePaymentRate:u,preferredPaymentMethod:p})})),n.sort(((e,t)=>t.totalPaid-e.totalPaid))},e7=e=>{const t=new Map;e.forEach((e=>{if("credit_card"===e.payment_method&&e.bank_info){const r=e.bank_info.trim();t.has(r)||t.set(r,{amount:0,count:0});const a=t.get(r);a.amount+=e.amount,a.count++}}));const r=Array.from(t.values()).reduce(((e,t)=>e+t.amount),0),a=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"],n=[];let s=0;return t.forEach(((e,t)=>{const i=r>0?e.amount/r*100:0,l=e.count>0?e.amount/e.count:0;n.push({bankName:t,totalAmount:e.amount,transactionCount:e.count,averageTransaction:l,percentage:i,color:a[s%a.length]}),s++})),n.sort(((e,t)=>t.totalAmount-e.totalAmount))},t7=e=>{let t=0,r=0,a=0,n=0;e.forEach((e=>{e.riskScore>60?(r++,t+=.3*e.totalPaid):e.riskScore>30?a++:n++}));const s=e.length>0?e.reduce(((e,t)=>e+t.riskScore),0)/e.length:0,i=e.length;return{totalAtRisk:t,highRiskCustomers:r,mediumRiskCustomers:a,lowRiskCustomers:n,averageRiskScore:s,riskDistribution:[{riskLevel:"low",label:"Düşük Risk",count:n,percentage:i>0?n/i*100:0,color:"#10B981"},{riskLevel:"medium",label:"Orta Risk",count:a,percentage:i>0?a/i*100:0,color:"#F59E0B"},{riskLevel:"high",label:"Yüksek Risk",count:r,percentage:i>0?r/i*100:0,color:"#EF4444"}]}},r7=(e,t)=>{const r=new Map;e.forEach((e=>{const t=XC(sT(e.created_at),"yyyy-MM-dd");r.has(t)||r.set(t,{cashAmount:0,creditCardAmount:0,totalAmount:0,discountAmount:0,orderCount:0});const a=r.get(t);"cash"===e.payment_method?a.cashAmount+=e.amount:"credit_card"===e.payment_method&&(a.creditCardAmount+=e.amount),a.totalAmount+=e.amount,a.discountAmount+=e.discount||0,a.orderCount++}));const a=[];return r.forEach(((e,t)=>{const r=sT(t),n=e.orderCount>0?e.totalAmount/e.orderCount:0,s=e.totalAmount-e.discountAmount;a.push({date:t,day:XC(r,"EEEE",{locale:ZT}),cashAmount:e.cashAmount,creditCardAmount:e.creditCardAmount,totalAmount:e.totalAmount,discountAmount:e.discountAmount,netAmount:s,orderCount:e.orderCount,averageOrderValue:n})})),a.sort(((e,t)=>e.date.localeCompare(t.date)))},a7=(e,t)=>{const r=new Map;e.forEach((e=>{const t=sT(e.created_at),a=XC(t,"yyyy-MM");XC(t,"MMMM",{locale:ZT});const n=t.getFullYear();r.has(a)||r.set(a,{totalCollected:0,totalDiscount:0,orderCount:0,cashCount:0,creditCardCount:0,year:n});const s=r.get(a);s.totalCollected+=e.amount,s.totalDiscount+=e.discount||0,s.orderCount++,"cash"===e.payment_method?s.cashCount++:s.creditCardCount++}));const a=[];return r.forEach(((e,t)=>{const r=XC(sT(t+"-01"),"MMMM",{locale:ZT}),n=e.totalCollected-e.totalDiscount,s=e.orderCount>0?e.totalCollected/e.orderCount:0,i=e.cashCount+e.creditCardCount,l=i>0?e.cashCount/i*100:0,o=i>0?e.creditCardCount/i*100:0;a.push({month:r,year:e.year,totalCollected:e.totalCollected,totalDiscount:e.totalDiscount,netCollection:n,orderCount:e.orderCount,averageOrderValue:s,cashPercentage:l,creditCardPercentage:o})})),a.sort(((e,t)=>`${e.year}-${e.month}`.localeCompare(`${t.year}-${t.month}`)))},n7=(e,t)=>{const r=new Map;e.forEach((e=>{const t=XC(sT(e.created_at),"yyyy-MM-dd");r.has(t)||r.set(t,{totalDiscount:0,totalAmount:0,orderCount:0});const a=r.get(t);a.totalDiscount+=e.discount||0,a.totalAmount+=e.amount,a.orderCount++}));const a=[];return r.forEach(((e,t)=>{const r=e.totalAmount>0?e.totalDiscount/e.totalAmount*100:0,n=e.orderCount>0?e.totalDiscount/e.orderCount:0;a.push({date:t,totalDiscount:e.totalDiscount,discountRate:r,orderCount:e.orderCount,averageDiscount:n})})),a.sort(((e,t)=>e.date.localeCompare(t.date)))},s7=(e,t)=>{const r=e.reduce(((e,t)=>e+t.total_amount),0),a=t.filter((e=>"completed"===e.status)).reduce(((e,t)=>e+t.amount),0);if(0===r)return 0;const n=(r-a)/r*100;let s=0;return s=n>50?80:n>30?60:n>15?40:n>5?20:10,s},i7=()=>{var e,t;const r={from:XC(nT(new Date,30),"yyyy-MM-dd"),to:XC(new Date,"yyyy-MM-dd")},[a,n]=ze.useState({dateFrom:r.from,dateTo:r.to,paymentMethod:"all",paymentStatus:"all",riskLevel:"all"}),[s,l]=ze.useState("overview"),{data:o}=qe({queryKey:["payment-date-range"],queryFn:async()=>{var e,t,r,a;const{data:n,error:s}=await Wl.from("payments").select("created_at").order("created_at",{ascending:!0}).limit(1),{data:i,error:l}=await Wl.from("payments").select("created_at").order("created_at",{ascending:!1}).limit(1),{data:o,error:c}=await Wl.from("orders").select("created_at").order("created_at",{ascending:!0}).limit(1),{data:d,error:u}=await Wl.from("orders").select("created_at").order("created_at",{ascending:!1}).limit(1);if(s||l||c||u)throw new Error("Tarih aralığı alınamadı");const m=null==(e=null==n?void 0:n[0])?void 0:e.created_at,h=null==(t=null==i?void 0:i[0])?void 0:t.created_at,p=null==(r=null==o?void 0:o[0])?void 0:r.created_at,x=null==(a=null==d?void 0:d[0])?void 0:a.created_at,g=m&&p?m<p?m:p:m||p,f=h&&x?h>x?h:x:h||x;return{earliest:g?XC(new Date(g),"yyyy-MM-dd"):null,latest:f?XC(new Date(f),"yyyy-MM-dd"):null,earliestPayment:m,latestPayment:h,earliestOrder:p,latestOrder:x}}});Re.useEffect((()=>{(null==o?void 0:o.earliest)&&(null==o||o.latest)}),[o]);const{data:c,isLoading:d,refetch:u}=qe({queryKey:["payment-analytics-main",a.dateFrom,a.dateTo],queryFn:async()=>{const{data:e,error:t}=await Wl.from("orders").select("\n          id,\n          order_number,\n          customer_id,\n          total_amount,\n          payment_status,\n          payment_method,\n          status,\n          created_at,\n          updated_at,\n          customer_name,\n          customer_phone,\n          customer_address,\n          customer_city,\n          customer_district,\n          profiles:customer_id (\n            id,\n            full_name,\n            company,\n            phone,\n            role\n          )\n        ").gte("created_at",a.dateFrom).lte("created_at",a.dateTo+"T23:59:59.999Z").order("created_at",{ascending:!1});if(t)throw t;const{data:r,error:n}=await Wl.from("payments").select("*").gte("created_at",a.dateFrom).lte("created_at",a.dateTo+"T23:59:59.999Z").order("created_at",{ascending:!1});if(n)throw n;const{data:s,error:i}=await Wl.from("profiles").select("*").order("full_name");if(i)throw i;return(e||[]).forEach((e=>{var t;const a=(r||[]).filter((t=>t.order_id===e.id));a.reduce(((e,t)=>{var r;return e+parseFloat((null==(r=t.amount)?void 0:r.toString())||"0")}),0),a.reduce(((e,t)=>{var r;return e+parseFloat((null==(r=t.discount)?void 0:r.toString())||"0")}),0),parseFloat((null==(t=e.total_amount)?void 0:t.toString())||"0")})),{payments:r||[],orders:e||[],customers:s||[]}}}),m=ze.useMemo((()=>{if(!c)return{};return((e,t,r)=>{const a=t,n=e;let s=0,i=0,l=0;n.forEach((e=>{var t;const r=a.filter((t=>t.order_id===e.id)),n=r.reduce(((e,t)=>{var r;return e+parseFloat((null==(r=t.amount)?void 0:r.toString())||"0")}),0),o=r.reduce(((e,t)=>{var r;return e+parseFloat((null==(r=t.discount)?void 0:r.toString())||"0")}),0),c=parseFloat((null==(t=e.total_amount)?void 0:t.toString())||"0")-(n+o);s+=n,i+=o,l+=Math.max(0,c)}));const o=Q9(n,a),c=X9(a),d=Z9(a,n),u=J9(n,a,r),m=e7(a),h=t7(u),p=r7(a),x=a7(a),g=n7(a);return{totalCollected:s,totalPending:l,totalDiscount:i,averageCollectionTime:o,cashFlowTrend:c,paymentMethodDistribution:d,customerPaymentBehavior:u,bankAnalysis:m,riskMetrics:h,dailyCashFlow:p,monthlyTrends:x,discountTrends:g}})(c.orders.map((e=>({...e,payment_status:e.payment_status}))),c.payments.map((e=>({...e,payment_method:e.payment_method,payment_type:e.payment_type,status:e.status}))),c.customers)}),[c,a]),h=ze.useMemo((()=>{if(!c)return{};return((e,t)=>{const r=t,a=e;let n=0,s=0,i=0,l=0;a.forEach((e=>{var t;const a=r.filter((t=>t.order_id===e.id)),o=a.reduce(((e,t)=>{var r;return e+parseFloat((null==(r=t.amount)?void 0:r.toString())||"0")}),0),c=a.reduce(((e,t)=>{var r;return e+parseFloat((null==(r=t.discount)?void 0:r.toString())||"0")}),0),d=parseFloat((null==(t=e.total_amount)?void 0:t.toString())||"0"),u=d-(o+c);n+=d,s+=o,i+=c,l+=Math.max(0,u)}));const o=n>0?(s+i)/n*100:0,c=Q9(a,r),d=s7(a,r);let u="excellent";return o<60?u="critical":o<75?u="warning":o<90&&(u="good"),{totalRevenue:n,totalCollected:s,totalPending:l,totalDiscount:i,collectionRate:o,averageCollectionTime:c,riskScore:d,cashFlowHealth:u}})(c.orders.map((e=>({...e,payment_status:e.payment_status}))),c.payments.map((e=>({...e,payment_method:e.payment_method,payment_type:e.payment_type,status:e.status}))))}),[c,a]);return(null==(e=null==c?void 0:c.payments)?void 0:e.length)||(null==(t=null==c?void 0:c.orders)?void 0:t.length)?i.jsxs("div",{className:"space-y-6",children:[o&&i.jsxs(C5,{className:"bg-blue-50 border-blue-200",children:[i.jsx(nn,{className:"h-4 w-4 text-blue-600"}),i.jsxs(T5,{className:"text-blue-800",children:[i.jsx("strong",{children:"Veritabanı Tarih Aralığı:"})," "," ",o.earliest?XC(new Date(o.earliest),"dd MMMM yyyy",{locale:ZT}):"Bilinmiyor"," - "," ",o.latest?XC(new Date(o.latest),"dd MMMM yyyy",{locale:ZT}):"Bilinmiyor",(new Date(a.dateFrom)<new Date(o.earliest)||new Date(a.dateTo)>new Date(o.latest))&&i.jsx("span",{className:"block mt-1 text-amber-700",children:"⚠️ Seçilen tarih aralığı veritabanındaki veriler dışında. Gerçek veriler gösteriliyor."})]})]}),i.jsx(W9,{filters:a,onFiltersChange:n,customersData:(null==c?void 0:c.customers)||[],loading:d,onExport:()=>{if(!c)return;const e=c.payments.map((e=>({...e,payment_method:e.payment_method,payment_type:e.payment_type,status:e.status}))),t=c.orders.map((e=>({...e,payment_status:e.payment_status}))),r=(a=e,n=t,s=c.customers,a.map((e=>{const t=n.find((t=>t.id===e.order_id)),r=s.find((t=>t.id===e.customer_id));return{date:XC(sT(e.created_at),"dd/MM/yyyy"),customerName:(null==r?void 0:r.full_name)||"Bilinmiyor",orderNumber:(null==t?void 0:t.id)||e.order_id,paymentAmount:e.amount,discountAmount:e.discount||0,paymentMethod:"cash"===e.payment_method?"Nakit":"Kredi Kartı",bankInfo:e.bank_info||"-",status:"completed"===e.status?"Tamamlandı":"Beklemede"}})));var a,n,s;const i=[["Tarih","Müşteri","Sipariş No","Ödeme Tutarı","İskonto","Ödeme Yöntemi","Banka","Durum"].join(","),...r.map((e=>[e.date,`"${e.customerName}"`,e.orderNumber,e.paymentAmount,e.discountAmount,e.paymentMethod,`"${e.bankInfo}"`,e.status].join(",")))].join("\n"),l=new Blob([i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),d=URL.createObjectURL(l);o.setAttribute("href",d),o.setAttribute("download",`odeme-analizi-${XC(new Date,"yyyy-MM-dd")}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},onRefresh:()=>{u()}}),i.jsx(H9,{kpiData:h,loading:d}),i.jsxs(Yo,{value:s,onValueChange:l,children:[i.jsxs(Vo,{className:"grid w-full grid-cols-4",children:[i.jsxs(Go,{value:"overview",className:"flex items-center space-x-2",children:[i.jsx(gr,{className:"h-4 w-4"}),i.jsx("span",{children:"Genel Bakış"})]}),i.jsxs(Go,{value:"cashflow",className:"flex items-center space-x-2",children:[i.jsx(an,{className:"h-4 w-4"}),i.jsx("span",{children:"Nakit Akışı"})]}),i.jsxs(Go,{value:"payments",className:"flex items-center space-x-2",children:[i.jsx(yr,{className:"h-4 w-4"}),i.jsx("span",{children:"Ödeme Yöntemleri"})]}),i.jsxs(Go,{value:"customers",className:"flex items-center space-x-2",children:[i.jsx(hn,{className:"h-4 w-4"}),i.jsx("span",{children:"Müşteri Analizi"})]})]}),i.jsxs(Wo,{value:"overview",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx(Y9,{data:m.dailyCashFlow,loading:d,title:"Son 7 Günlük Nakit Akışı",height:300}),i.jsx(V9,{data:m.paymentMethodDistribution,loading:d,height:300})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Aylık Trend Özeti"})}),i.jsx(io,{children:d?i.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map(((e,t)=>i.jsx(Fc,{className:"h-16 w-full"},t)))}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:m.monthlyTrends.slice(-3).map(((e,t)=>i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h4",{className:"font-medium text-gray-900",children:[e.month," ",e.year]}),i.jsxs(Co,{variant:"outline",children:[e.orderCount," sipariş"]})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Toplam Tahsilat:"}),i.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0}).format(e.totalCollected)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Ort. Sipariş:"}),i.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0}).format(e.averageOrderValue)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Nakit Oranı:"}),i.jsxs("span",{className:"font-medium",children:[e.cashPercentage.toFixed(1),"%"]})]})]})]},t)))})})]})]}),i.jsxs(Wo,{value:"cashflow",className:"space-y-6",children:[i.jsx(Y9,{data:m.dailyCashFlow,loading:d,title:"Detaylı Nakit Akışı Analizi",height:400,showDetailed:!0}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"İskonto Trend Analizi"})}),i.jsx(io,{children:d?i.jsx(Fc,{className:"h-64 w-full"}):i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0}).format(m.totalDiscount)}),i.jsx("div",{className:"text-sm text-blue-700",children:"Toplam İskonto"})]}),i.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[m.discountTrends.length>0?(m.totalDiscount/m.discountTrends.length).toFixed(0):0," ₺"]}),i.jsx("div",{className:"text-sm text-green-700",children:"Günlük Ort. İskonto"})]}),i.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[i.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[m.discountTrends.length>0?(m.discountTrends.reduce(((e,t)=>e+t.discountRate),0)/m.discountTrends.length).toFixed(1):0,"%"]}),i.jsx("div",{className:"text-sm text-yellow-700",children:"Ort. İskonto Oranı"})]}),i.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[i.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.max(...m.discountTrends.map((e=>e.discountRate))||[0]).toFixed(1),"%"]}),i.jsx("div",{className:"text-sm text-purple-700",children:"En Yüksek İskonto"})]})]})})})]})]}),i.jsxs(Wo,{value:"payments",className:"space-y-6",children:[i.jsx(V9,{data:m.paymentMethodDistribution,loading:d,showDetailed:!0}),m.bankAnalysis.length>0&&i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Banka Bazlı Analiz"})}),i.jsx(io,{children:d?i.jsx(Fc,{className:"h-48 w-full"}):i.jsx("div",{className:"space-y-3",children:m.bankAnalysis.map(((e,t)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:e.bankName}),i.jsxs("div",{className:"text-sm text-gray-500",children:[e.transactionCount," işlem"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0}).format(e.totalAmount)}),i.jsxs("div",{className:"text-sm text-gray-500",children:["%",e.percentage.toFixed(1)," - Ort: ",new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0}).format(e.averageTransaction)]})]})]},t)))})})]})]}),i.jsx(Wo,{value:"customers",className:"space-y-6",children:i.jsx(G9,{customerData:m.customerPaymentBehavior,riskMetrics:m.riskMetrics,loading:d,showDetailed:!0,height:400})})]})]}):i.jsxs(C5,{children:[i.jsx(nn,{className:"h-4 w-4"}),i.jsx(T5,{children:"Analiz için yeterli veri bulunamadı. Lütfen tarih aralığını kontrol edin."})]})},l7=()=>{var e;const{toast:t}=at(),r=$e(),[a,n]=Hl(),[s,l]=ze.useState(""),[o,c]=ze.useState("all"),[d,u]=ze.useState(""),[m,h]=ze.useState(""),[p,x]=ze.useState(null),[g,f]=ze.useState(null),[y,v]=ze.useState([]),b=parseInt(a.get("page")||"1",20);ze.useEffect((()=>{const e=localStorage.getItem("payment_approved_orders");if(e)try{v(JSON.parse(e))}catch(die){}}),[]);const[j,k]=ze.useState("");ze.useEffect((()=>{const e=setTimeout((()=>{k(s)}),500);return()=>clearTimeout(e)}),[s]);const{data:w,isLoading:N}=qe({queryKey:["payment-receipts",j,o,d,m,b],queryFn:async()=>{let e=Wl.from("orders").select("\n          *,\n          profiles!customer_id(full_name, company, phone),\n          payments (\n            id,\n            amount,\n            discount,\n            receipt_url,\n            status,\n            payment_method,\n            created_at,\n            notes\n          )\n        ",{count:"exact"});e=e.not("payments.receipt_url","is",null),j&&(e=e.or(`order_number.ilike.%${j}%,customer_name.ilike.%${j}%,company_name.ilike.%${j}%`)),"all"!==o&&(e=e.eq("status",o)),d&&(e=e.gte("created_at",ZS(new Date(d)).toISOString())),m&&(e=e.lte("created_at",cC(new Date(m)).toISOString()));const t=20*(b-1),r=t+20-1;e=e.range(t,r),e=e.order("created_at",{ascending:!1});const{data:a,error:n,count:s}=await e;if(n)throw n;return{orders:(null==a?void 0:a.filter((e=>e.payments&&e.payments.some((e=>e.receipt_url)))))||[],totalCount:s||0}}}),_=Ke({mutationFn:async({orderId:e,updates:t})=>{const{data:r,error:a}=await Wl.from("orders").update(t).eq("id",e).select().single();if(a)throw new Error(a.message);return r},onSuccess:()=>{t({title:"Başarılı",description:"Sipariş onaylandı."}),r.invalidateQueries({queryKey:["payment-receipts"]}),r.invalidateQueries({queryKey:["admin-orders"]}),x(null)},onError:e=>{t({title:"Hata",description:`Sipariş güncellenirken bir hata oluştu: ${e.message}`,variant:"destructive"})}}),S=(null==w?void 0:w.orders)||[],C=(null==w?void 0:w.totalCount)||0,T=Math.ceil(C/20),O=e=>{const t=new URLSearchParams(a);t.set("page",e.toString()),n(t)},P=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),A=e=>{const t={pending:"Beklemede",confirmed:"Onaylandı",processing:"Hazırlanıyor",in_production:"Üretimde",shipped:"Kargoda",delivered:"Teslim Edildi",cancelled:"İptal"}[e]||e,r={pending:"bg-gray-100 text-gray-800",confirmed:"bg-blue-100 text-blue-800",processing:"bg-yellow-100 text-yellow-800",in_production:"bg-purple-100 text-purple-800",shipped:"bg-orange-100 text-orange-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800";return i.jsx(Co,{className:r,children:t})};return N?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Ödeme Dekontları"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Siparişlere ait ödeme dekontlarını görüntüleyin ve indirin"})]})}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5"}),"Dekont Listesi"]}),i.jsx(so,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{children:"Ödeme dekontu bulunan siparişler listelenir"}),i.jsxs("div",{className:"text-xs flex items-center gap-4 mt-2",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 bg-green-100 dark:bg-green-900/30 rounded"}),"Onaylanmış"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 bg-red-100 dark:bg-red-900/30 rounded"}),"Onaylanmamış"]})]})]})})]}),i.jsxs(io,{children:[i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"Sipariş numarası veya müşteri adı ile arayın...",className:"pl-10",value:s,onChange:e=>l(e.target.value)})]}),i.jsxs(eO,{value:o,onValueChange:c,children:[i.jsx(rO,{className:"w-40",children:i.jsx(tO,{placeholder:"Durum"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm Durumlar"}),i.jsx(iO,{value:"pending",children:"Beklemede"}),i.jsx(iO,{value:"confirmed",children:"Onaylandı"}),i.jsx(iO,{value:"processing",children:"Hazırlanıyor"}),i.jsx(iO,{value:"in_production",children:"Üretimde"}),i.jsx(iO,{value:"shipped",children:"Kargoda"}),i.jsx(iO,{value:"delivered",children:"Teslim Edildi"}),i.jsx(iO,{value:"cancelled",children:"İptal"})]})]})]}),i.jsxs("div",{className:"flex gap-4 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pr,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-sm font-medium",children:"Tarih Aralığı:"})]}),i.jsx(co,{type:"date",value:d,onChange:e=>u(e.target.value),className:"w-40"}),i.jsx("span",{className:"text-gray-500",children:"-"}),i.jsx(co,{type:"date",value:m,onChange:e=>h(e.target.value),className:"w-40"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{u(XC(nT(new Date,7),"yyyy-MM-dd")),h(XC(new Date,"yyyy-MM-dd"))},children:"Son 7 Gün"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{u(XC(nT(new Date,30),"yyyy-MM-dd")),h(XC(new Date,"yyyy-MM-dd"))},children:"Son 30 Gün"}),(d||m||s||"all"!==o)&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{l(""),c("all"),u(""),h(""),O(1)},className:"text-red-600 hover:text-red-700",children:"Filtreleri Temizle"})]})]}),i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Sipariş No"}),i.jsx(M5,{children:"Müşteri"}),i.jsx(M5,{children:"Tarih"}),i.jsx(M5,{children:"Toplam Tutar"}),i.jsx(M5,{children:"Durum"}),i.jsx(M5,{children:"Dekont Sayısı"}),i.jsx(M5,{className:"text-right",children:"İşlemler"}),i.jsx(M5,{className:"text-center",children:"Onay"})]})}),i.jsx(E5,{children:S.map((e=>{var t,r;const a=e.payments.filter((e=>e.receipt_url)).length,n=e.payments.filter((e=>e.receipt_url)).reduce(((e,t)=>e+t.amount),0),s=y.includes(e.id);return i.jsxs(D5,{className:s?"bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30":"bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30",children:[i.jsx(z5,{className:"font-medium",children:e.order_number}),i.jsx(z5,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.customer_name||(null==(t=e.profiles)?void 0:t.full_name)||"İsimsiz Müşteri"}),(e.company_name||(null==(r=e.profiles)?void 0:r.company))&&i.jsx("div",{className:"text-sm text-gray-500",children:e.company_name||e.profiles.company})]})}),i.jsx(z5,{children:XC(new Date(e.created_at),"dd MMM yyyy",{locale:ZT})}),i.jsx(z5,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:P(e.total_amount)}),i.jsxs("div",{className:"text-sm text-gray-500",children:["Dekont: ",P(n)]})]})}),i.jsx(z5,{children:A(e.status)}),i.jsx(z5,{children:i.jsxs(Co,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[a," Dekont"]})}),i.jsx(z5,{className:"text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>x(e),children:[i.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Dekontları Gör"]}),i.jsx(oo,{variant:"ghost",size:"sm",asChild:!0,children:i.jsx("a",{href:`/admin/orders/${e.id}`,target:"_blank",rel:"noopener noreferrer",children:i.jsx(Hr,{className:"h-4 w-4"})})})]})}),i.jsx(z5,{className:"text-center",children:i.jsx("div",{className:"flex justify-center",children:i.jsx(D6,{checked:s,onCheckedChange:()=>{return t=e.id,void v((e=>{const r=e.includes(t)?e.filter((e=>e!==t)):[...e,t];return localStorage.setItem("payment_approved_orders",JSON.stringify(r)),r}));var t},className:`\n                            border-2 transition-all\n                            ${s?"bg-green-600 border-green-600 hover:bg-green-700 hover:border-green-700":"bg-white border-gray-300 hover:border-gray-400"}\n                          `})})})]},e.id)}))})]}),0===S.length&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ea,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Dekont bulunan sipariş yok"})]}),T>1&&i.jsxs("div",{className:"flex items-center justify-between mt-6",children:[i.jsxs("div",{className:"text-sm text-gray-500",children:[C," siparişten ",Math.min(20*(b-1)+1,C),"-",Math.min(20*b,C)," arası gösteriliyor"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>O(Math.max(b-1,1)),disabled:1===b,children:"Önceki"}),i.jsx("div",{className:"flex items-center gap-1",children:(()=>{const e=[];let t=Math.max(1,b-Math.floor(2.5)),r=Math.min(T,t+5-1);r-t+1<5&&(t=Math.max(1,r-5+1)),t>1&&(e.push(i.jsx(oo,{variant:1===b?"default":"outline",size:"sm",onClick:()=>O(1),className:"w-8 h-8 p-0",children:"1"},1)),t>2&&e.push(i.jsx("span",{className:"px-2",children:"..."},"ellipsis1")));for(let a=t;a<=r;a++)e.push(i.jsx(oo,{variant:b===a?"default":"outline",size:"sm",onClick:()=>O(a),className:"w-8 h-8 p-0",children:a},a));return r<T&&(r<T-1&&e.push(i.jsx("span",{className:"px-2",children:"..."},"ellipsis2")),e.push(i.jsx(oo,{variant:b===T?"default":"outline",size:"sm",onClick:()=>O(T),className:"w-8 h-8 p-0",children:T},T))),e})()}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>O(Math.min(b+1,T)),disabled:b===T,children:"Sonraki"})]})]})]})]}),p&&i.jsx(sd,{open:!!p,onOpenChange:()=>x(null),children:i.jsxs(cd,{className:"max-w-4xl max-h-[85vh] overflow-y-auto",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Sipariş Dekontları - #",p.order_number]}),i.jsx(Co,{variant:"outline",children:A(p.status)})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:i.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[i.jsx("span",{className:"font-medium",children:p.customer_name||(null==(e=p.profiles)?void 0:e.full_name)}),i.jsx("span",{className:"text-gray-500",children:"•"}),i.jsx("span",{children:XC(new Date(p.created_at),"dd MMMM yyyy",{locale:ZT})}),i.jsx("span",{className:"text-gray-500",children:"•"}),i.jsx("span",{className:"font-medium",children:P(p.total_amount)})]})})]}),i.jsx("div",{className:"space-y-4 mt-6",children:p.payments.filter((e=>e.receipt_url)).map(((e,r)=>i.jsx(ro,{className:"border-l-4 border-l-blue-500",children:i.jsx(io,{className:"pt-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(Co,{variant:"secondary",className:"bg-green-100 text-green-800",children:["Dekont #",r+1]}),i.jsx("span",{className:"text-sm text-gray-500",children:XC(new Date(e.created_at),"dd MMM yyyy HH:mm",{locale:ZT})})]}),i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Tutar:"}),i.jsx("span",{className:"ml-2 font-medium",children:P(e.amount)})]}),e.discount>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"İskonto:"}),i.jsx("span",{className:"ml-2 font-medium text-green-600",children:P(e.discount)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Ödeme Yöntemi:"}),i.jsx("span",{className:"ml-2",children:i.jsx(Co,{variant:"outline",children:"cash"===e.payment_method?"Nakit":"Kredi Kartı"})})]})]}),e.notes&&i.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[i.jsx("span",{className:"font-medium",children:"Not:"})," ",e.notes]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(oo,{variant:"outline",size:"sm",className:"h-8 px-2",onClick:()=>{return t=e.receipt_url,void f(t);var t},children:[i.jsx(Vr,{className:"h-4 w-4 mr-1"}),"Görüntüle"]}),i.jsxs(oo,{variant:"default",size:"sm",className:"h-8 px-2",onClick:()=>((e,r,a)=>{const n=document.createElement("a");n.href=e,n.download=`dekont_${r}_${a+1}.pdf`,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n),t({title:"İndirme Başlatıldı",description:"Dekont indiriliyor..."})})(e.receipt_url,p.order_number,r),children:[i.jsx(qr,{className:"h-4 w-4 mr-1"}),"İndir"]}),"pending"===p.status&&i.jsx(oo,{size:"sm",className:"h-8 px-2 bg-green-600 hover:bg-green-700 text-white",onClick:()=>{return e=p.id,void _.mutate({orderId:e,updates:{status:"confirmed"}});var e},disabled:_.isPending,children:_.isPending?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 mr-1 animate-spin"}),"Onaylanıyor"]}):i.jsxs(i.Fragment,{children:[i.jsx(Or,{className:"h-4 w-4 mr-1"}),"Onayla"]})})]})]})})},e.id)))})]})}),g&&i.jsx(sd,{open:!!g,onOpenChange:()=>f(null),children:i.jsxs(cd,{className:"max-w-6xl max-h-[90vh]",children:[i.jsx(dd,{children:i.jsxs(md,{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Dekont Görüntüleyici"}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>window.open(g,"_blank"),children:[i.jsx(Hr,{className:"h-4 w-4 mr-2"}),"Yeni Sekmede Aç"]})]})}),i.jsx("div",{className:"mt-4 border rounded-lg overflow-hidden bg-gray-50",children:i.jsx("iframe",{src:g,className:"w-full h-[70vh]",title:"Dekont Görüntüleyici"})})]})})]})};function o7(){const{toast:e}=at(),[t,r]=ze.useState(XC(new Date,"dd.MM.yyyy")),[a,n]=ze.useState(XC(new Date,"dd.MM.yyyy")),[s,l]=ze.useState(!1),[o,c]=ze.useState(!1),[d,u]=ze.useState(null),[m,h]=ze.useState(""),[p,x]=ze.useState({username:"",password:""}),[g,f]=ze.useState({isOpen:!1,isLoading:!1,smsCode:"",phoneNumber:"",error:null,pendingRequest:null}),[y,v]=ze.useState({cancelled:[],active:[],delivered:[]}),[b,j]=ze.useState([]);ze.useEffect((()=>{(async()=>{try{const{data:e,error:t}=await Wl.from("system_settings").select("setting_key, setting_value").in("setting_key",["yurtici_token","yurtici_username","yurtici_password"]);if(t)return void u("Yurtiçi Kargo ayarları bulunamadı. Lütfen Admin Settings > Entegrasyonlar kısmından API bağlantısını yapın.");const r=e.reduce(((e,t)=>(e[t.setting_key]=t.setting_value,e)),{}),a=r.yurtici_token,n=r.yurtici_username,s=r.yurtici_password;if(!a||!n||!s)return void u("Yurtiçi Kargo bilgileri eksik. Lütfen Admin Settings > Entegrasyonlar kısmından API bağlantısını yapın.");h(a),x({username:n,password:s})}catch(e){u("Sistem ayarları okunurken hata oluştu.")}})()}),[]);const k=e=>{const t=e.split(".");return 3===t.length?`${t[2]}-${t[1]}-${t[0]}`:e},w=async()=>{try{const e=await fetch("https://api-ykss.yurticikargo.com/api/v1/auth",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.5","Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify({Username:p.username,Password:p.password,Language:"tr"})}),t=await e.json();if(!e.ok)throw new Error(t.message||"Token yenileme başarısız");if(t.data&&"requiredSmsVerification"===t.data.errors)return new Promise((e=>{f((r=>({...r,isOpen:!0,phoneNumber:t.data.phoneNumber||"",error:null,pendingRequest:e})))}));if(t.data&&t.data.token){const e=t.data.token;return h(e),await Wl.from("system_settings").upsert({setting_key:"yurtici_token",setting_value:e,setting_type:"string",description:"Yurtiçi Kargo API auth token",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),e}throw new Error("Token alınamadı")}catch(e){return null}},N=async e=>{try{f((e=>({...e,isLoading:!0,error:null})));const t=await fetch("https://api-ykss.yurticikargo.com/api/v1/auth",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.5","Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify({Username:p.username,Password:p.password,Language:"tr",smsCode:e})}),r=await t.json();if(!t.ok)throw new Error(r.message||"SMS doğrulama başarısız");if(r.data&&r.data.token){const t=r.data.token;return h(t),await Wl.from("system_settings").upsert({setting_key:"yurtici_token",setting_value:t,setting_type:"string",description:"Yurtiçi Kargo API auth token",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),await Wl.from("system_settings").upsert({setting_key:"yurtici_sms_code",setting_value:e,setting_type:"string",description:"Yurtiçi Kargo SMS doğrulama kodu",updated_at:(new Date).toISOString()},{onConflict:"setting_key"}),f((e=>({...e,isOpen:!1,isLoading:!1,smsCode:"",error:null,pendingRequest:null}))),t}throw new Error("Token alınamadı")}catch(t){const e=t instanceof Error?t.message:"SMS doğrulama başarısız";return f((t=>({...t,isLoading:!1,error:e}))),null}},_=(e,t)=>({no:t+1,receiverName:e.receiverCustName,address:e.receiverAddress,city:e.cityName,district:e.townName,paymentType:e.paymentType,collectionType:e.ttCollectionType||"",collectionAmount:e.ttInvoiceAmount||0,hasCollection:(e.ttInvoiceAmount||0)>0,tempListOrderSeq:String(e.tempListOrderSeq)}),S=async(e,r=0)=>{if(!m)throw new Error("Yurtiçi Kargo token'ı bulunamadı. Lütfen önce API bağlantısını yapın.");if(!p.username||!p.password)throw new Error("Yurtiçi Kargo kullanıcı bilgileri bulunamadı. Lütfen önce API bağlantısını yapın.");const n=`https://api-ykss.yurticikargo.com/api/v1/Cargo/getDeliveryList?BeginDate=${k(t)}&EndDate=${k(a)}&OrderType=1&Tab=${e}&ApiFlag=0`,s=await fetch(n,{method:"GET",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.5",Authorization:`Bearer ${m}`,"Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}});if(401===s.status&&0===r){if(await w())return S(e,r+1);throw new Error("Token yenilenemedi. Lütfen Admin Settings'ten yeniden bağlantı yapın.")}if(!s.ok)throw new Error(`API çağrısı başarısız: ${s.status} ${s.statusText}`);const i=await s.json();return Array.isArray(i.data)?i.data:[]},C=async()=>{l(!0),u(null),j([]);try{const[e,t,r]=await Promise.all([S(3),S(1),S(2)]),a={cancelled:e.map(((e,t)=>_(e,t))),active:t.map(((e,t)=>_(e,t))),delivered:r.map(((e,t)=>_(e,t)))};v(a)}catch(e){u(e instanceof Error?e.message:"Bilinmeyen bir hata oluştu"),v({cancelled:[],active:[],delivered:[]})}finally{l(!1)}},T=async(e,t=0)=>{var r,a;if(!m)throw new Error("Yurtiçi Kargo token'ı bulunamadı.");const n={documentCancel:e.map((e=>({tempListOrderSeq:e,cancellationDescription:"MÜŞTERİ İSTEĞİ İLE SSW İPTAL İŞLEMİ"})))},s=await fetch("https://api-ykss.yurticikargo.com/api/v1/Cargo/cancel",{method:"POST",headers:{Accept:"application/json, text/plain, */*",Authorization:`Bearer ${m}`,"Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify(n)});if(401===s.status&&0===t){if(await w())return T(e,t+1);throw new Error("Token yenilenemedi. Lütfen Admin Settings'ten yeniden bağlantı yapın.")}if(!s.ok)try{const e=await s.json();throw new Error((null==(r=e.Messages)?void 0:r[0])||`API çağrısı başarısız: ${s.status}`)}catch(die){throw new Error(`API çağrısı başarısız: ${s.status} ${s.statusText}`)}try{return{success:!0,message:(null==(a=(await s.json()).Messages)?void 0:a[0])||"Seçili kargolar başarıyla iptal edildi."}}catch(die){return{success:!0,message:"Seçili kargolar başarıyla iptal edildi."}}},O=()=>{const e=y.active.map((e=>e.tempListOrderSeq));b.length===e.length&&b.every((t=>e.includes(t)))?j([]):j(e)},P=({data:e,showCheckbox:t=!1})=>i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{className:"w-[50px]",children:"No"}),t&&i.jsx(M5,{className:"w-[50px]",children:i.jsx("input",{type:"checkbox",className:"w-4 h-4",onChange:O,checked:e.length>0&&b.length===e.length})}),i.jsx(M5,{className:"w-[50px]",children:"Tahsilat"}),i.jsx(M5,{children:"Alıcı Adı"}),i.jsx(M5,{children:"Adres"}),i.jsx(M5,{children:"Şehir"}),i.jsx(M5,{children:"İlçe"}),i.jsx(M5,{children:"Ödeme Tipi"}),i.jsx(M5,{children:"Tahsilat Tipi"}),i.jsx(M5,{children:"Tahsilat Tutarı"})]})}),i.jsx(E5,{children:0===e.length?i.jsx(D5,{children:i.jsx(z5,{colSpan:t?10:9,className:"text-center py-8 text-gray-500",children:s?"Yükleniyor...":"Bu tarih aralığında veri bulunamadı"})}):e.map((e=>i.jsxs(D5,{children:[i.jsx(z5,{children:e.no}),t&&i.jsx(z5,{children:i.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:b.includes(e.tempListOrderSeq),onChange:()=>{return t=e.tempListOrderSeq,void j((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}})}),i.jsx(z5,{children:e.hasCollection&&i.jsx("span",{title:"Tahsilatlı Gönderi",className:"text-orange-500",children:"💰"})}),i.jsx(z5,{className:"font-medium",children:e.receiverName}),i.jsx(z5,{className:"max-w-[200px] truncate",title:e.address,children:e.address}),i.jsx(z5,{children:e.city}),i.jsx(z5,{children:e.district}),i.jsx(z5,{children:e.paymentType}),i.jsx(z5,{children:e.collectionType||"-"}),i.jsx(z5,{children:e.collectionAmount>0?`₺${e.collectionAmount}`:"-"})]},e.tempListOrderSeq)))})]});return i.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/50 rounded-lg",children:i.jsx(sn,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Kargo Teslim Listesi"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Yurtiçi Kargo gönderi durumlarını takip edin"})]})]}),d&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx(T5,{children:d})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Fa,{className:"h-5 w-5"}),"Arama Kriterleri"]})}),i.jsx(io,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"startDate",children:"Başlangıç Tarihi"}),i.jsx(co,{id:"startDate",type:"text",placeholder:"gg.aa.yyyy",value:t,onChange:e=>r(e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"endDate",children:"Bitiş Tarihi"}),i.jsx(co,{id:"endDate",type:"text",placeholder:"gg.aa.yyyy",value:a,onChange:e=>n(e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Masraf Merkezi"}),i.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[i.jsx("option",{value:"-1",children:"Hepsi"}),i.jsx("option",{value:"130174",children:"GENEL"})]})]}),i.jsx(oo,{onClick:C,disabled:s,className:"bg-orange-500 hover:bg-orange-600",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Yükleniyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Sorgula"]})})]})})]}),i.jsx(ro,{children:i.jsx(io,{className:"p-0",children:i.jsxs(Yo,{defaultValue:"delivered",className:"w-full",children:[i.jsx("div",{className:"p-6 pb-0",children:i.jsxs(Vo,{className:"grid w-full grid-cols-3",children:[i.jsxs(Go,{value:"cancelled",className:"flex items-center gap-2",children:["❌ Gönderi İptal Edildi (",y.cancelled.length,")"]}),i.jsxs(Go,{value:"active",className:"flex items-center gap-2",children:["📦 Aktif Gönderiler (",y.active.length,")"]}),i.jsxs(Go,{value:"delivered",className:"flex items-center gap-2",children:["✅ Teslim Edilen Gönderiler (",y.delivered.length,")"]})]})}),i.jsx(Wo,{value:"cancelled",className:"mt-0",children:i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"rounded-md border",children:i.jsx(P,{data:y.cancelled})})})}),i.jsx(Wo,{value:"active",className:"mt-0",children:i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"rounded-md border",children:i.jsx(P,{data:y.active,showCheckbox:!0})})})}),i.jsx(Wo,{value:"delivered",className:"mt-0",children:i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"rounded-md border",children:i.jsx(P,{data:y.delivered})})})})]})})}),i.jsx(ro,{children:i.jsx(io,{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:"Barkod Yazdırma"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(oo,{variant:"outline",className:"w-full justify-start",children:[i.jsx(Aa,{className:"w-4 h-4 mr-2"}),"A4 Barkod Yazıcı"]}),i.jsxs(oo,{variant:"outline",className:"w-full justify-start",children:[i.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Zebra Barkod Yazıcı"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:"Teslim Listesi"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(oo,{className:"w-full justify-start bg-green-600 hover:bg-green-700",children:[i.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Teslim Listesi Oluştur"]}),i.jsxs(oo,{className:"w-full justify-start bg-green-600 hover:bg-green-700",children:[i.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Teslim Listesini Oluştur & Onayla"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:"Onaylama"}),i.jsxs(oo,{className:"w-full justify-start bg-green-600 hover:bg-green-700",children:[i.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Teslim Listesini Onayla"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:"İptal İşlemleri"}),i.jsxs(o6,{children:[i.jsx(c6,{asChild:!0,children:i.jsx(oo,{variant:"destructive",className:"w-full justify-start",disabled:0===b.length||o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"İptal Ediliyor..."]}):`❌ İptal Et (${b.length})`})}),i.jsxs(m6,{children:[i.jsxs(h6,{children:[i.jsx(x6,{children:"Emin misiniz?"}),i.jsxs(g6,{children:["Seçili ",b.length," kargoyu iptal etmek üzeresiniz. Bu işlem geri alınamaz."]})]}),i.jsxs(p6,{children:[i.jsx(y6,{children:"Vazgeç"}),i.jsx(f6,{onClick:async()=>{if(0!==b.length){c(!0);try{const r=await T(b);r.success&&(e({title:"Başarılı",description:r.message||`${b.length} kargo başarıyla iptal edildi.`,className:"bg-green-500 text-white"}),await(t=1e3,new Promise((e=>setTimeout(e,t)))),await C())}catch(r){e({title:"Hata",description:r instanceof Error?r.message:"Kargolar iptal edilirken bir hata oluştu.",variant:"destructive"})}finally{c(!1)}var t}else e({title:"Uyarı",description:"Lütfen iptal etmek için en az bir kargo seçin.",variant:"default"})},className:"bg-red-600 hover:bg-red-700",children:"Evet, İptal Et"})]})]})]})]})]})})}),i.jsx(sd,{open:g.isOpen,onOpenChange:e=>{e||g.isLoading||f((e=>({...e,isOpen:!1,smsCode:"",error:null,pendingRequest:null})))},children:i.jsxs(cd,{className:"sm:max-w-md",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(pa,{className:"h-5 w-5"}),"SMS Doğrulama"]}),i.jsx(hd,{children:g.phoneNumber?`${g.phoneNumber} numaralı telefona gönderilen SMS kodunu girin.`:"Telefon numaranıza gönderilen SMS kodunu girin."})]}),i.jsxs("div",{className:"space-y-4",children:[g.error&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx(T5,{children:g.error})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"sms-code",children:"SMS Kodu"}),i.jsx(co,{id:"sms-code",type:"text",placeholder:"123456",maxLength:6,value:g.smsCode,onChange:e=>f((t=>({...t,smsCode:e.target.value.replace(/\D/g,"").slice(0,6)}))),disabled:g.isLoading,onKeyDown:async e=>{if("Enter"===e.key&&6===g.smsCode.length&&g.pendingRequest){const e=await N(g.smsCode);g.pendingRequest(e)}}}),i.jsx("p",{className:"text-sm text-gray-500",children:"6 haneli SMS kodunu girin"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(oo,{onClick:async()=>{const e=await N(g.smsCode);e&&g.pendingRequest&&g.pendingRequest(e)},disabled:g.isLoading||6!==g.smsCode.length,className:"flex-1",children:g.isLoading?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Doğrulanıyor..."]}):"Doğrula"}),i.jsx(oo,{variant:"outline",onClick:()=>{g.isLoading||f((e=>({...e,isOpen:!1,smsCode:"",error:null,pendingRequest:null})))},disabled:g.isLoading,children:"İptal"})]})]})]})})]})}var c7=.999,d7=/[\\\/_+.#"@\[\(\{&]/,u7=/[\\\/_+.#"@\[\(\{&]/g,m7=/[\s-]/,h7=/[\s-]/g;function p7(e,t,r,a,n,s,i){if(s===t.length)return n===e.length?1:.99;var l=`${n},${s}`;if(void 0!==i[l])return i[l];for(var o,c,d,u,m=a.charAt(s),h=r.indexOf(m,n),p=0;h>=0;)(o=p7(e,t,r,a,h+1,s+1,i))>p&&(h===n?o*=1:d7.test(e.charAt(h-1))?(o*=.8,(d=e.slice(n,h-1).match(u7))&&n>0&&(o*=Math.pow(c7,d.length))):m7.test(e.charAt(h-1))?(o*=.9,(u=e.slice(n,h-1).match(h7))&&n>0&&(o*=Math.pow(c7,u.length))):(o*=.17,n>0&&(o*=Math.pow(c7,h-n))),e.charAt(h)!==t.charAt(s)&&(o*=.9999)),(o<.1&&r.charAt(h-1)===a.charAt(s+1)||a.charAt(s+1)===a.charAt(s)&&r.charAt(h-1)!==a.charAt(s))&&(.1*(c=p7(e,t,r,a,h+1,s+2,i))>o&&(o=.1*c)),o>p&&(p=o),h=r.indexOf(m,h+1);return i[l]=p,p}function x7(e){return e.toLowerCase().replace(h7," ")}function g7(e,t,r){return p7(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,x7(e),x7(t),0,0,{})}function f7(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(null==e||e(a),!1===r||!a.defaultPrevented)return null==t?void 0:t(a)}}function y7(...e){return t=>e.forEach((e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t)))}function v7(...e){return ze.useCallback(y7(...e),e)}function b7(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const a=r.reduce(((t,{useScope:r,scopeName:a})=>({...t,...r(e)[`__scope${a}`]})),{});return ze.useMemo((()=>({[`__scope${t.scopeName}`]:a})),[a])}};return r.scopeName=t.scopeName,r}const j7=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?ze.useLayoutEffect:()=>{},k7=Fe["useId".toString()]||(()=>{});let w7=0;function N7(e){const[t,r]=ze.useState(k7());return j7((()=>{e||r((e=>null!=e?e:String(w7++)))}),[e]),e||(t?`radix-${t}`:"")}function _7(e){const t=ze.useRef(e);return ze.useEffect((()=>{t.current=e})),ze.useMemo((()=>(...e)=>{var r;return null===(r=t.current)||void 0===r?void 0:r.call(t,...e)}),[])}function S7({prop:e,defaultProp:t,onChange:r=()=>{}}){const[a,n]=function({defaultProp:e,onChange:t}){const r=ze.useState(e),[a]=r,n=ze.useRef(a),s=_7(t);return ze.useEffect((()=>{n.current!==a&&(s(a),n.current=a)}),[a,n,s]),r}({defaultProp:t,onChange:r}),s=void 0!==e,i=s?e:a,l=_7(r);return[i,ze.useCallback((t=>{if(s){const r="function"==typeof t?t(e):t;r!==e&&l(r)}else n(t)}),[s,e,n,l])]}const C7=ze.forwardRef(((e,t)=>{const{children:r,...a}=e,n=ze.Children.toArray(r),s=n.find(P7);if(s){const e=s.props.children,r=n.map((t=>t===s?ze.Children.count(e)>1?ze.Children.only(null):ze.isValidElement(e)?e.props.children:null:t));return ze.createElement(T7,uX({},a,{ref:t}),ze.isValidElement(e)?ze.cloneElement(e,void 0,r):null)}return ze.createElement(T7,uX({},a,{ref:t}),r)}));C7.displayName="Slot";const T7=ze.forwardRef(((e,t)=>{const{children:r,...a}=e;return ze.isValidElement(r)?ze.cloneElement(r,{...A7(a,r.props),ref:t?y7(t,r.ref):r.ref}):ze.Children.count(r)>1?ze.Children.only(null):null}));T7.displayName="SlotClone";const O7=({children:e})=>ze.createElement(ze.Fragment,null,e);function P7(e){return ze.isValidElement(e)&&e.type===O7}function A7(e,t){const r={...t};for(const a in t){const n=e[a],s=t[a];/^on[A-Z]/.test(a)?n&&s?r[a]=(...e)=>{s(...e),n(...e)}:n&&(r[a]=n):"style"===a?r[a]={...n,...s}:"className"===a&&(r[a]=[n,s].filter(Boolean).join(" "))}return{...e,...r}}const E7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const r=ze.forwardRef(((e,r)=>{const{asChild:a,...n}=e,s=a?C7:t;return ze.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),ze.createElement(s,uX({},n,{ref:r}))}));return r.displayName=`Primitive.${t}`,{...e,[t]:r}}),{});const D7="dismissableLayer.update",M7="dismissableLayer.pointerDownOutside",z7="dismissableLayer.focusOutside";let R7;const I7=ze.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),F7=ze.forwardRef(((e,t)=>{var r;const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=e,d=ze.useContext(I7),[u,m]=ze.useState(null),h=null!==(r=null==u?void 0:u.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,p]=ze.useState({}),x=v7(t,(e=>m(e))),g=Array.from(d.layers),[f]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(f),v=u?g.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=v>=y,k=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=_7(e),a=ze.useRef(!1),n=ze.useRef((()=>{}));return ze.useEffect((()=>{const e=e=>{if(e.target&&!a.current){let a=function(){L7(M7,r,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",n.current),n.current=a,t.addEventListener("click",n.current,{once:!0})):a()}else t.removeEventListener("click",n.current);a.current=!1},s=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",n.current)}}),[t,r]),{onPointerDownCapture:()=>a.current=!0}}((e=>{const t=e.target,r=[...d.branches].some((e=>e.contains(t)));j&&!r&&(null==s||s(e),null==l||l(e),e.defaultPrevented||null==o||o())}),h),w=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=_7(e),a=ze.useRef(!1);return ze.useEffect((()=>{const e=e=>{if(e.target&&!a.current){L7(z7,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}((e=>{const t=e.target;[...d.branches].some((e=>e.contains(t)))||(null==i||i(e),null==l||l(e),e.defaultPrevented||null==o||o())}),h);return function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=_7(e);ze.useEffect((()=>{const e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)}),[r,t])}((e=>{v===d.layers.size-1&&(null==n||n(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))}),h),ze.useEffect((()=>{if(u)return a&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(R7=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),B7(),()=>{a&&1===d.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=R7)}}),[u,h,a,d]),ze.useEffect((()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),B7())}),[u,d]),ze.useEffect((()=>{const e=()=>p({});return document.addEventListener(D7,e),()=>document.removeEventListener(D7,e)}),[]),ze.createElement(E7.div,uX({},c,{ref:x,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:f7(e.onFocusCapture,w.onFocusCapture),onBlurCapture:f7(e.onBlurCapture,w.onBlurCapture),onPointerDownCapture:f7(e.onPointerDownCapture,k.onPointerDownCapture)}))}));function B7(){const e=new CustomEvent(D7);document.dispatchEvent(e)}function L7(e,t,r,{discrete:a}){const n=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),a?function(e,t){e&&Me.flushSync((()=>e.dispatchEvent(t)))}(n,s):n.dispatchEvent(s)}const q7="focusScope.autoFocusOnMount",$7="focusScope.autoFocusOnUnmount",K7={bubbles:!1,cancelable:!0},U7=ze.forwardRef(((e,t)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:n,onUnmountAutoFocus:s,...i}=e,[l,o]=ze.useState(null),c=_7(n),d=_7(s),u=ze.useRef(null),m=v7(t,(e=>o(e))),h=ze.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ze.useEffect((()=>{if(a){let e=function(e){if(h.paused||!l)return;const t=e.target;l.contains(t)?u.current=t:G7(u.current,{select:!0})},t=function(e){if(h.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||G7(u.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&G7(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const a=new MutationObserver(r);return l&&a.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),a.disconnect()}}}),[a,l,h.paused]),ze.useEffect((()=>{if(l){W7.add(h);const t=document.activeElement;if(!l.contains(t)){const r=new CustomEvent(q7,K7);l.addEventListener(q7,c),l.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const a of e)if(G7(a,{select:t}),document.activeElement!==r)return}((e=H7(l),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&G7(l))}return()=>{l.removeEventListener(q7,c),setTimeout((()=>{const e=new CustomEvent($7,K7);l.addEventListener($7,d),l.dispatchEvent(e),e.defaultPrevented||G7(null!=t?t:document.body,{select:!0}),l.removeEventListener($7,d),W7.remove(h)}),0)}}var e}),[l,c,d,h]);const p=ze.useCallback((e=>{if(!r&&!a)return;if(h.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[a,s]=function(e){const t=H7(e),r=Y7(t,e),a=Y7(t.reverse(),e);return[r,a]}(t);a&&s?e.shiftKey||n!==s?e.shiftKey&&n===a&&(e.preventDefault(),r&&G7(s,{select:!0})):(e.preventDefault(),r&&G7(a,{select:!0})):n===t&&e.preventDefault()}}),[r,a,h.paused]);return ze.createElement(E7.div,uX({tabIndex:-1},i,{ref:m,onKeyDown:p}))}));function H7(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Y7(e,t){for(const r of e)if(!V7(r,{upTo:t}))return r}function V7(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function G7(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const W7=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=Q7(e,t),e.unshift(t)},remove(t){var r;e=Q7(e,t),null===(r=e[0])||void 0===r||r.resume()}}}();function Q7(e,t){const r=[...e],a=r.indexOf(t);return-1!==a&&r.splice(a,1),r}const X7=ze.forwardRef(((e,t)=>{var r;const{container:a=(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body),...n}=e;return a?Ie.createPortal(ze.createElement(E7.div,uX({},n,{ref:t})),a):null}));const Z7=e=>{const{present:t,children:r}=e,a=function(e){const[t,r]=ze.useState(),a=ze.useRef({}),n=ze.useRef(e),s=ze.useRef("none"),i=e?"mounted":"unmounted",[l,o]=function(e,t){return ze.useReducer(((e,r)=>{const a=t[e][r];return null!=a?a:e}),e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ze.useEffect((()=>{const e=J7(a.current);s.current="mounted"===l?e:"none"}),[l]),j7((()=>{const t=a.current,r=n.current;if(r!==e){const a=s.current,i=J7(t);if(e)o("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))o("UNMOUNT");else{o(r&&a!==i?"ANIMATION_OUT":"UNMOUNT")}n.current=e}}),[e,o]),j7((()=>{if(t){const e=e=>{const r=J7(a.current).includes(e.animationName);e.target===t&&r&&Me.flushSync((()=>o("ANIMATION_END")))},r=e=>{e.target===t&&(s.current=J7(a.current))};return t.addEventListener("animationstart",r),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",r),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}o("ANIMATION_END")}),[t,o]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:ze.useCallback((e=>{e&&(a.current=getComputedStyle(e)),r(e)}),[])}}(t),n="function"==typeof r?r({present:a.isPresent}):ze.Children.only(r),s=v7(a.ref,n.ref);return"function"==typeof r||a.isPresent?ze.cloneElement(n,{ref:s}):null};function J7(e){return(null==e?void 0:e.animationName)||"none"}Z7.displayName="Presence";let eee=0;function tee(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var ree=Ne(),aee=function(){},nee=ze.forwardRef((function(e,t){var r=ze.useRef(null),a=ze.useState({onScrollCapture:aee,onWheelCapture:aee,onTouchMoveCapture:aee}),n=a[0],s=a[1],i=e.forwardProps,l=e.children,o=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,m=e.sideCar,h=e.noIsolation,p=e.inert,x=e.allowPinchZoom,g=e.as,f=void 0===g?"div":g,y=_e(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),v=m,b=Se([r,t]),j=Ce(Ce({},y),n);return ze.createElement(ze.Fragment,null,d&&ze.createElement(v,{sideCar:ree,removeScrollBar:c,shards:u,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!x,lockRef:r}),i?ze.cloneElement(ze.Children.only(l),Ce(Ce({},j),{ref:b})):ze.createElement(f,Ce({},j,{className:o,ref:b}),l))}));nee.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},nee.classNames={fullWidth:Te,zeroRight:Oe};var see=!1;if("undefined"!=typeof window)try{var iee=Object.defineProperty({},"passive",{get:function(){return see=!0,!0}});window.addEventListener("test",iee,iee),window.removeEventListener("test",iee,iee)}catch(uie){see=!1}var lee=!!see&&{passive:!1},oee=function(e,t){var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},cee=function(e,t){var r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),dee(e,r)){var a=uee(e,r);if(a[1]>a[2])return!0}r=r.parentNode}while(r&&r!==document.body);return!1},dee=function(e,t){return"v"===e?function(e){return oee(e,"overflowY")}(t):function(e){return oee(e,"overflowX")}(t)},uee=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},mee=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},hee=function(e){return[e.deltaX,e.deltaY]},pee=function(e){return e&&"current"in e?e.current:e},xee=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},gee=0,fee=[];const yee=De(ree,(function(e){var t=ze.useRef([]),r=ze.useRef([0,0]),a=ze.useRef(),n=ze.useState(gee++)[0],s=ze.useState((function(){return Pe()}))[0],i=ze.useRef(e);ze.useEffect((function(){i.current=e}),[e]),ze.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var t=Ae([e.lockRef.current],(e.shards||[]).map(pee),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(n))})),function(){document.body.classList.remove("block-interactivity-".concat(n)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(n))}))}}}),[e.inert,e.lockRef.current,e.shards]);var l=ze.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!i.current.allowPinchZoom;var n,s=mee(e),l=r.current,o="deltaX"in e?e.deltaX:l[0]-s[0],c="deltaY"in e?e.deltaY:l[1]-s[1],d=e.target,u=Math.abs(o)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=cee(u,d);if(!m)return!0;if(m?n=u:(n="v"===u?"h":"v",m=cee(u,d)),!m)return!1;if(!a.current&&"changedTouches"in e&&(o||c)&&(a.current=n),!n)return!0;var h=a.current||n;return function(e,t,r,a,n){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=s*a,l=r.target,o=t.contains(l),c=!1,d=i>0,u=0,m=0;do{var h=uee(e,l),p=h[0],x=h[1]-h[2]-s*p;(p||x)&&dee(e,l)&&(u+=x,m+=p),l=l.parentNode}while(!o&&l!==document.body||o&&(t.contains(l)||t===l));return(!d||0!==u&&n)&&(d||0!==m&&n)||(c=!0),c}(h,t,e,"h"===h?o:c,!0)}),[]),o=ze.useCallback((function(e){var r=e;if(fee.length&&fee[fee.length-1]===s){var a="deltaY"in r?hee(r):mee(r),n=t.current.filter((function(e){return e.name===r.type&&e.target===r.target&&(t=e.delta,n=a,t[0]===n[0]&&t[1]===n[1]);var t,n}))[0];if(n&&n.should)r.cancelable&&r.preventDefault();else if(!n){var o=(i.current.shards||[]).map(pee).filter(Boolean).filter((function(e){return e.contains(r.target)}));(o.length>0?l(r,o[0]):!i.current.noIsolation)&&r.cancelable&&r.preventDefault()}}}),[]),c=ze.useCallback((function(e,r,a,n){var s={name:e,delta:r,target:a,should:n};t.current.push(s),setTimeout((function(){t.current=t.current.filter((function(e){return e!==s}))}),1)}),[]),d=ze.useCallback((function(e){r.current=mee(e),a.current=void 0}),[]),u=ze.useCallback((function(t){c(t.type,hee(t),t.target,l(t,e.lockRef.current))}),[]),m=ze.useCallback((function(t){c(t.type,mee(t),t.target,l(t,e.lockRef.current))}),[]);ze.useEffect((function(){return fee.push(s),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",o,lee),document.addEventListener("touchmove",o,lee),document.addEventListener("touchstart",d,lee),function(){fee=fee.filter((function(e){return e!==s})),document.removeEventListener("wheel",o,lee),document.removeEventListener("touchmove",o,lee),document.removeEventListener("touchstart",d,lee)}}),[]);var h=e.removeScrollBar,p=e.inert;return ze.createElement(ze.Fragment,null,p?ze.createElement(s,{styles:xee(n)}):null,h?ze.createElement(Ee,{gapMode:"margin"}):null)}));var vee=ze.forwardRef((function(e,t){return ze.createElement(nee,Ce({},e,{ref:t,sideCar:yee}))}));vee.classNames=nee.classNames;const bee="Dialog",[jee,kee]=function(e,t=[]){let r=[];const a=()=>{const t=r.map((e=>ze.createContext(e)));return function(r){const a=(null==r?void 0:r[e])||t;return ze.useMemo((()=>({[`__scope${e}`]:{...r,[e]:a}})),[r,a])}};return a.scopeName=e,[function(t,a){const n=ze.createContext(a),s=r.length;function i(t){const{scope:r,children:a,...i}=t,l=(null==r?void 0:r[e][s])||n,o=ze.useMemo((()=>i),Object.values(i));return ze.createElement(l.Provider,{value:o},a)}return r=[...r,a],i.displayName=t+"Provider",[i,function(r,i){const l=(null==i?void 0:i[e][s])||n,o=ze.useContext(l);if(o)return o;if(void 0!==a)return a;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},b7(a,...t)]}(bee),[wee,Nee]=jee(bee),_ee="DialogPortal",[See,Cee]=jee(_ee,{forceMount:void 0}),Tee="DialogOverlay",Oee=ze.forwardRef(((e,t)=>{const r=Cee(Tee,e.__scopeDialog),{forceMount:a=r.forceMount,...n}=e,s=Nee(Tee,e.__scopeDialog);return s.modal?ze.createElement(Z7,{present:a||s.open},ze.createElement(Pee,uX({},n,{ref:t}))):null})),Pee=ze.forwardRef(((e,t)=>{const{__scopeDialog:r,...a}=e,n=Nee(Tee,r);return ze.createElement(vee,{as:C7,allowPinchZoom:!0,shards:[n.contentRef]},ze.createElement(E7.div,uX({"data-state":Ree(n.open)},a,{ref:t,style:{pointerEvents:"auto",...a.style}})))})),Aee="DialogContent",Eee=ze.forwardRef(((e,t)=>{const r=Cee(Aee,e.__scopeDialog),{forceMount:a=r.forceMount,...n}=e,s=Nee(Aee,e.__scopeDialog);return ze.createElement(Z7,{present:a||s.open},s.modal?ze.createElement(Dee,uX({},n,{ref:t})):ze.createElement(Mee,uX({},n,{ref:t})))})),Dee=ze.forwardRef(((e,t)=>{const r=Nee(Aee,e.__scopeDialog),a=ze.useRef(null),n=v7(t,r.contentRef,a);return ze.useEffect((()=>{const e=a.current;if(e)return J(e)}),[]),ze.createElement(zee,uX({},e,{ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:f7(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:f7(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()})),onFocusOutside:f7(e.onFocusOutside,(e=>e.preventDefault()))}))})),Mee=ze.forwardRef(((e,t)=>{const r=Nee(Aee,e.__scopeDialog),a=ze.useRef(!1),n=ze.useRef(!1);return ze.createElement(zee,uX({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,i;(null===(s=e.onCloseAutoFocus)||void 0===s||s.call(e,t),t.defaultPrevented)||(a.current||null===(i=r.triggerRef.current)||void 0===i||i.focus(),t.preventDefault());a.current=!1,n.current=!1},onInteractOutside:t=>{var s,i;null===(s=e.onInteractOutside)||void 0===s||s.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));const l=t.target;(null===(i=r.triggerRef.current)||void 0===i?void 0:i.contains(l))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}}))})),zee=ze.forwardRef(((e,t)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:s,...i}=e,l=Nee(Aee,r),o=v7(t,ze.useRef(null));return ze.useEffect((()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=r[0])&&void 0!==e?e:tee()),document.body.insertAdjacentElement("beforeend",null!==(t=r[1])&&void 0!==t?t:tee()),eee++,()=>{1===eee&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),eee--}}),[]),ze.createElement(ze.Fragment,null,ze.createElement(U7,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:s},ze.createElement(F7,uX({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Ree(l.open)},i,{ref:o,onDismiss:()=>l.onOpenChange(!1)}))),!1)}));function Ree(e){return e?"open":"closed"}const Iee=e=>{const{__scopeDialog:t,children:r,open:a,defaultOpen:n,onOpenChange:s,modal:i=!0}=e,l=ze.useRef(null),o=ze.useRef(null),[c=!1,d]=S7({prop:a,defaultProp:n,onChange:s});return ze.createElement(wee,{scope:t,triggerRef:l,contentRef:o,contentId:N7(),titleId:N7(),descriptionId:N7(),open:c,onOpenChange:d,onOpenToggle:ze.useCallback((()=>d((e=>!e))),[d]),modal:i},r)},Fee=e=>{const{__scopeDialog:t,forceMount:r,children:a,container:n}=e,s=Nee(_ee,t);return ze.createElement(See,{scope:t,forceMount:r},ze.Children.map(a,(e=>ze.createElement(Z7,{present:r||s.open},ze.createElement(X7,{asChild:!0,container:n},e)))))},Bee=Oee,Lee=Eee;var qee='[cmdk-group=""]',$ee='[cmdk-group-items=""]',Kee='[cmdk-item=""]',Uee=`${Kee}:not([aria-disabled="true"])`,Hee="cmdk-item-select",Yee="data-value",Vee=(e,t,r)=>g7(e,t,r),Gee=ze.createContext(void 0),Wee=()=>ze.useContext(Gee),Qee=ze.createContext(void 0),Xee=()=>ze.useContext(Qee),Zee=ze.createContext(void 0),Jee=ze.forwardRef(((e,t)=>{let r=hte((()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",filtered:{count:0,items:new Map,groups:new Set}}})),a=hte((()=>new Set)),n=hte((()=>new Map)),s=hte((()=>new Map)),i=hte((()=>new Set)),l=ute(e),{label:o,children:c,value:d,onValueChange:u,filter:m,shouldFilter:h,loop:p,disablePointerSelection:x=!1,vimBindings:g=!0,...f}=e,y=ze.useId(),v=ze.useId(),b=ze.useId(),j=ze.useRef(null),k=fte();mte((()=>{if(void 0!==d){let e=d.trim();r.current.value=e,w.emit()}}),[d]),mte((()=>{k(6,O)}),[]);let w=ze.useMemo((()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>r.current,setState:(e,t,a)=>{var n,s,i;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)T(),S(),k(1,C);else if("value"===e&&(a||k(5,O),void 0!==(null==(n=l.current)?void 0:n.value))){let e=null!=t?t:"";return void(null==(i=(s=l.current).onValueChange)||i.call(s,e))}w.emit()}},emit:()=>{i.current.forEach((e=>e()))}})),[]),N=ze.useMemo((()=>({value:(e,t,a)=>{var n;t!==(null==(n=s.current.get(e))?void 0:n.value)&&(s.current.set(e,{value:t,keywords:a}),r.current.filtered.items.set(e,_(t,a)),k(2,(()=>{S(),w.emit()})))},item:(e,t)=>(a.current.add(e),t&&(n.current.has(t)?n.current.get(t).add(e):n.current.set(t,new Set([e]))),k(3,(()=>{T(),S(),r.current.value||C(),w.emit()})),()=>{s.current.delete(e),a.current.delete(e),r.current.filtered.items.delete(e);let t=P();k(4,(()=>{T(),(null==t?void 0:t.getAttribute("id"))===e&&C(),w.emit()}))}),group:e=>(n.current.has(e)||n.current.set(e,new Set),()=>{s.current.delete(e),n.current.delete(e)}),filter:()=>l.current.shouldFilter,label:o||e["aria-label"],disablePointerSelection:x,listId:y,inputId:b,labelId:v,listInnerRef:j})),[]);function _(e,t){var a,n;let s=null!=(n=null==(a=l.current)?void 0:a.filter)?n:Vee;return e?s(e,r.current.search,t):0}function S(){if(!r.current.search||!1===l.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach((r=>{let a=n.current.get(r),s=0;a.forEach((t=>{let r=e.get(t);s=Math.max(r,s)})),t.push([r,s])}));let a=j.current;A().sort(((t,r)=>{var a,n;let s=t.getAttribute("id"),i=r.getAttribute("id");return(null!=(a=e.get(i))?a:0)-(null!=(n=e.get(s))?n:0)})).forEach((e=>{let t=e.closest($ee);t?t.appendChild(e.parentElement===t?e:e.closest(`${$ee} > *`)):a.appendChild(e.parentElement===a?e:e.closest(`${$ee} > *`))})),t.sort(((e,t)=>t[1]-e[1])).forEach((e=>{let t=j.current.querySelector(`${qee}[${Yee}="${encodeURIComponent(e[0])}"]`);null==t||t.parentElement.appendChild(t)}))}function C(){let e=A().find((e=>"true"!==e.getAttribute("aria-disabled"))),t=null==e?void 0:e.getAttribute(Yee);w.setState("value",t||void 0)}function T(){var e,t,i,o;if(!r.current.search||!1===l.current.shouldFilter)return void(r.current.filtered.count=a.current.size);r.current.filtered.groups=new Set;let c=0;for(let n of a.current){let a=_(null!=(t=null==(e=s.current.get(n))?void 0:e.value)?t:"",null!=(o=null==(i=s.current.get(n))?void 0:i.keywords)?o:[]);r.current.filtered.items.set(n,a),a>0&&c++}for(let[a,s]of n.current)for(let e of s)if(r.current.filtered.items.get(e)>0){r.current.filtered.groups.add(a);break}r.current.filtered.count=c}function O(){var e,t,r;let a=P();a&&((null==(e=a.parentElement)?void 0:e.firstChild)===a&&(null==(r=null==(t=a.closest(qee))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function P(){var e;return null==(e=j.current)?void 0:e.querySelector(`${Kee}[aria-selected="true"]`)}function A(){var e;return Array.from(null==(e=j.current)?void 0:e.querySelectorAll(Uee))}function E(e){let t=A()[e];t&&w.setState("value",t.getAttribute(Yee))}function D(e){var t;let r=P(),a=A(),n=a.findIndex((e=>e===r)),s=a[n+e];null!=(t=l.current)&&t.loop&&(s=n+e<0?a[a.length-1]:n+e===a.length?a[0]:a[n+e]),s&&w.setState("value",s.getAttribute(Yee))}function M(e){let t,r=P(),a=null==r?void 0:r.closest(qee);for(;a&&!t;)a=e>0?cte(a,qee):dte(a,qee),t=null==a?void 0:a.querySelector(Uee);t?w.setState("value",t.getAttribute(Yee)):D(e)}let z=()=>E(A().length-1),R=e=>{e.preventDefault(),e.metaKey?z():e.altKey?M(1):D(1)},I=e=>{e.preventDefault(),e.metaKey?E(0):e.altKey?M(-1):D(-1)};return ze.createElement(E7.div,{ref:t,tabIndex:-1,...f,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=f.onKeyDown)||t.call(f,e),!e.defaultPrevented)switch(e.key){case"n":case"j":g&&e.ctrlKey&&R(e);break;case"ArrowDown":R(e);break;case"p":case"k":g&&e.ctrlKey&&I(e);break;case"ArrowUp":I(e);break;case"Home":e.preventDefault(),E(0);break;case"End":e.preventDefault(),z();break;case"Enter":if(!e.nativeEvent.isComposing&&229!==e.keyCode){e.preventDefault();let t=P();if(t){let e=new Event(Hee);t.dispatchEvent(e)}}}}},ze.createElement("label",{"cmdk-label":"",htmlFor:N.inputId,id:N.labelId,style:vte},o),yte(e,(e=>ze.createElement(Qee.Provider,{value:w},ze.createElement(Gee.Provider,{value:N},e)))))})),ete=ze.forwardRef(((e,t)=>{var r,a;let n=ze.useId(),s=ze.useRef(null),i=ze.useContext(Zee),l=Wee(),o=ute(e),c=null!=(a=null==(r=o.current)?void 0:r.forceMount)?a:null==i?void 0:i.forceMount;mte((()=>{if(!c)return l.item(n,null==i?void 0:i.id)}),[c]);let d=gte(n,s,[e.value,e.children,s],e.keywords),u=Xee(),m=xte((e=>e.value&&e.value===d.current)),h=xte((e=>!(!c&&!1!==l.filter())||(!e.search||e.filtered.items.get(n)>0)));function p(){var e,t;x(),null==(t=(e=o.current).onSelect)||t.call(e,d.current)}function x(){u.setState("value",d.current,!0)}if(ze.useEffect((()=>{let t=s.current;if(t&&!e.disabled)return t.addEventListener(Hee,p),()=>t.removeEventListener(Hee,p)}),[h,e.onSelect,e.disabled]),!h)return null;let{disabled:g,value:f,onSelect:y,forceMount:v,keywords:b,...j}=e;return ze.createElement(E7.div,{ref:pte([s,t]),...j,id:n,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!m,"data-disabled":!!g,"data-selected":!!m,onPointerMove:g||l.disablePointerSelection?void 0:x,onClick:g?void 0:p},e.children)})),tte=ze.forwardRef(((e,t)=>{let{heading:r,children:a,forceMount:n,...s}=e,i=ze.useId(),l=ze.useRef(null),o=ze.useRef(null),c=ze.useId(),d=Wee(),u=xte((e=>!(!n&&!1!==d.filter())||(!e.search||e.filtered.groups.has(i))));mte((()=>d.group(i)),[]),gte(i,l,[e.value,e.heading,o]);let m=ze.useMemo((()=>({id:i,forceMount:n})),[n]);return ze.createElement(E7.div,{ref:pte([l,t]),...s,"cmdk-group":"",role:"presentation",hidden:!u||void 0},r&&ze.createElement("div",{ref:o,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),yte(e,(e=>ze.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},ze.createElement(Zee.Provider,{value:m},e)))))})),rte=ze.forwardRef(((e,t)=>{let{alwaysRender:r,...a}=e,n=ze.useRef(null),s=xte((e=>!e.search));return r||s?ze.createElement(E7.div,{ref:pte([n,t]),...a,"cmdk-separator":"",role:"separator"}):null})),ate=ze.forwardRef(((e,t)=>{let{onValueChange:r,...a}=e,n=null!=e.value,s=Xee(),i=xte((e=>e.search)),l=xte((e=>e.value)),o=Wee(),c=ze.useMemo((()=>{var e;let t=null==(e=o.listInnerRef.current)?void 0:e.querySelector(`${Kee}[${Yee}="${encodeURIComponent(l)}"]`);return null==t?void 0:t.getAttribute("id")}),[]);return ze.useEffect((()=>{null!=e.value&&s.setState("search",e.value)}),[e.value]),ze.createElement(E7.input,{ref:t,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":o.listId,"aria-labelledby":o.labelId,"aria-activedescendant":c,id:o.inputId,type:"text",value:n?e.value:i,onChange:e=>{n||s.setState("search",e.target.value),null==r||r(e.target.value)}})})),nte=ze.forwardRef(((e,t)=>{let{children:r,label:a="Suggestions",...n}=e,s=ze.useRef(null),i=ze.useRef(null),l=Wee();return ze.useEffect((()=>{if(i.current&&s.current){let e,t=i.current,r=s.current,a=new ResizeObserver((()=>{e=requestAnimationFrame((()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")}))}));return a.observe(t),()=>{cancelAnimationFrame(e),a.unobserve(t)}}}),[]),ze.createElement(E7.div,{ref:pte([s,t]),...n,"cmdk-list":"",role:"listbox","aria-label":a,id:l.listId},yte(e,(e=>ze.createElement("div",{ref:pte([i,l.listInnerRef]),"cmdk-list-sizer":""},e))))})),ste=ze.forwardRef(((e,t)=>{let{open:r,onOpenChange:a,overlayClassName:n,contentClassName:s,container:i,...l}=e;return ze.createElement(Iee,{open:r,onOpenChange:a},ze.createElement(Fee,{container:i},ze.createElement(Bee,{"cmdk-overlay":"",className:n}),ze.createElement(Lee,{"aria-label":e.label,"cmdk-dialog":"",className:s},ze.createElement(Jee,{ref:t,...l}))))})),ite=ze.forwardRef(((e,t)=>xte((e=>0===e.filtered.count))?ze.createElement(E7.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null)),lte=ze.forwardRef(((e,t)=>{let{progress:r,children:a,label:n="Loading...",...s}=e;return ze.createElement(E7.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},yte(e,(e=>ze.createElement("div",{"aria-hidden":!0},e))))})),ote=Object.assign(Jee,{List:nte,Item:ete,Input:ate,Group:tte,Separator:rte,Dialog:ste,Empty:ite,Loading:lte});function cte(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function dte(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function ute(e){let t=ze.useRef(e);return mte((()=>{t.current=e})),t}var mte="undefined"==typeof window?ze.useEffect:ze.useLayoutEffect;function hte(e){let t=ze.useRef();return void 0===t.current&&(t.current=e()),t}function pte(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function xte(e){let t=Xee(),r=()=>e(t.snapshot());return ze.useSyncExternalStore(t.subscribe,r,r)}function gte(e,t,r,a=[]){let n=ze.useRef(),s=Wee();return mte((()=>{var i;let l=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():n.current}})(),o=a.map((e=>e.trim()));s.value(e,l,o),null==(i=t.current)||i.setAttribute(Yee,l),n.current=l})),n}var fte=()=>{let[e,t]=ze.useState(),r=hte((()=>new Map));return mte((()=>{r.current.forEach((e=>e())),r.current=new Map}),[e]),(e,a)=>{r.current.set(e,a),t({})}};function yte({asChild:e,children:t},r){return e&&ze.isValidElement(t)?ze.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},r(t.props.children)):r(t)}var vte={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const bte=ze.forwardRef((({className:e,...t},r)=>i.jsx(ote,{ref:r,className:xs("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t})));bte.displayName=ote.displayName;const jte=ze.forwardRef((({className:e,...t},r)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(Fa,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(ote.Input,{ref:r,className:xs("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})));jte.displayName=ote.Input.displayName;const kte=ze.forwardRef((({className:e,...t},r)=>i.jsx(ote.List,{ref:r,className:xs("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t})));kte.displayName=ote.List.displayName;const wte=ze.forwardRef(((e,t)=>i.jsx(ote.Empty,{ref:t,className:"py-6 text-center text-sm",...e})));wte.displayName=ote.Empty.displayName;const Nte=ze.forwardRef((({className:e,...t},r)=>i.jsx(ote.Group,{ref:r,className:xs("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t})));Nte.displayName=ote.Group.displayName;ze.forwardRef((({className:e,...t},r)=>i.jsx(ote.Separator,{ref:r,className:xs("-mx-1 h-px bg-border",e),...t}))).displayName=ote.Separator.displayName;const _te=ze.forwardRef((({className:e,...t},r)=>i.jsx(ote.Item,{ref:r,className:xs("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t})));_te.displayName=ote.Item.displayName;const Ste=[{id:1,name:"Adana",plateCode:"01"},{id:2,name:"Adıyaman",plateCode:"02"},{id:3,name:"Afyonkarahisar",plateCode:"03"},{id:4,name:"Ağrı",plateCode:"04"},{id:5,name:"Amasya",plateCode:"05"},{id:6,name:"Ankara",plateCode:"06"},{id:7,name:"Antalya",plateCode:"07"},{id:8,name:"Artvin",plateCode:"08"},{id:9,name:"Aydın",plateCode:"09"},{id:10,name:"Balıkesir",plateCode:"10"},{id:11,name:"Bilecik",plateCode:"11"},{id:12,name:"Bingöl",plateCode:"12"},{id:13,name:"Bitlis",plateCode:"13"},{id:14,name:"Bolu",plateCode:"14"},{id:15,name:"Burdur",plateCode:"15"},{id:16,name:"Bursa",plateCode:"16"},{id:17,name:"Çanakkale",plateCode:"17"},{id:18,name:"Çankırı",plateCode:"18"},{id:19,name:"Çorum",plateCode:"19"},{id:20,name:"Denizli",plateCode:"20"},{id:21,name:"Diyarbakır",plateCode:"21"},{id:22,name:"Edirne",plateCode:"22"},{id:23,name:"Elazığ",plateCode:"23"},{id:24,name:"Erzincan",plateCode:"24"},{id:25,name:"Erzurum",plateCode:"25"},{id:26,name:"Eskişehir",plateCode:"26"},{id:27,name:"Gaziantep",plateCode:"27"},{id:28,name:"Giresun",plateCode:"28"},{id:29,name:"Gümüşhane",plateCode:"29"},{id:30,name:"Hakkâri",plateCode:"30"},{id:31,name:"Hatay",plateCode:"31"},{id:32,name:"Isparta",plateCode:"32"},{id:33,name:"Mersin",plateCode:"33"},{id:34,name:"İstanbul",plateCode:"34"},{id:35,name:"İzmir",plateCode:"35"},{id:36,name:"Kars",plateCode:"36"},{id:37,name:"Kastamonu",plateCode:"37"},{id:38,name:"Kayseri",plateCode:"38"},{id:39,name:"Kırklareli",plateCode:"39"},{id:40,name:"Kırşehir",plateCode:"40"},{id:41,name:"Kocaeli",plateCode:"41"},{id:42,name:"Konya",plateCode:"42"},{id:43,name:"Kütahya",plateCode:"43"},{id:44,name:"Malatya",plateCode:"44"},{id:45,name:"Manisa",plateCode:"45"},{id:46,name:"Kahramanmaraş",plateCode:"46"},{id:47,name:"Mardin",plateCode:"47"},{id:48,name:"Muğla",plateCode:"48"},{id:49,name:"Muş",plateCode:"49"},{id:50,name:"Nevşehir",plateCode:"50"},{id:51,name:"Niğde",plateCode:"51"},{id:52,name:"Ordu",plateCode:"52"},{id:53,name:"Rize",plateCode:"53"},{id:54,name:"Sakarya",plateCode:"54"},{id:55,name:"Samsun",plateCode:"55"},{id:56,name:"Siirt",plateCode:"56"},{id:57,name:"Sinop",plateCode:"57"},{id:58,name:"Sivas",plateCode:"58"},{id:59,name:"Tekirdağ",plateCode:"59"},{id:60,name:"Tokat",plateCode:"60"},{id:61,name:"Trabzon",plateCode:"61"},{id:62,name:"Tunceli",plateCode:"62"},{id:63,name:"Şanlıurfa",plateCode:"63"},{id:64,name:"Uşak",plateCode:"64"},{id:65,name:"Van",plateCode:"65"},{id:66,name:"Yozgat",plateCode:"66"},{id:67,name:"Zonguldak",plateCode:"67"},{id:68,name:"Aksaray",plateCode:"68"},{id:69,name:"Bayburt",plateCode:"69"},{id:70,name:"Karaman",plateCode:"70"},{id:71,name:"Kırıkkale",plateCode:"71"},{id:72,name:"Batman",plateCode:"72"},{id:73,name:"Şırnak",plateCode:"73"},{id:74,name:"Bartın",plateCode:"74"},{id:75,name:"Ardahan",plateCode:"75"},{id:76,name:"Iğdır",plateCode:"76"},{id:77,name:"Yalova",plateCode:"77"},{id:78,name:"Karabük",plateCode:"78"},{id:79,name:"Kilis",plateCode:"79"},{id:80,name:"Osmaniye",plateCode:"80"},{id:81,name:"Düzce",plateCode:"81"}];function Cte(){const{toast:e}=at(),[t,r]=ze.useState(!1),[a,n]=ze.useState(!1),[s,l]=ze.useState(""),[o,c]=ze.useState(null),[d,u]=ze.useState({receiverName:"",receiverGsm:"",receiverAddress:"",receiverCity:"",townOrArea:"",dispatchNumber:"",invoiceAmount:"",description:""}),m=(e=>{if(!e)return Ste;const t=e.toLowerCase();return Ste.filter((e=>e.name.toLowerCase().includes(t)||e.plateCode.includes(t)))})(s),h=(e,t)=>{u((r=>({...r,[e]:t})))},p=e=>({receiverName:"Alıcı Adı",receiverGsm:"Telefon",receiverAddress:"Adres",receiverCity:"Şehir",townOrArea:"İlçe",dispatchNumber:"İrsaliye No",invoiceAmount:"Tahsilat Tutarı"}[e]||e);return i.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:i.jsx(ba,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Yeni Gönderi Oluştur"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Yurtiçi Kargo ile yeni gönderi oluşturun"})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Gönderi Bilgileri"})}),i.jsxs(io,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"receiverName",children:"Alıcı Adı Soyadı *"}),i.jsx(co,{id:"receiverName",value:d.receiverName,onChange:e=>h("receiverName",e.target.value),placeholder:"Alıcının tam adı"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"receiverGsm",children:"Telefon Numarası *"}),i.jsx(co,{id:"receiverGsm",value:d.receiverGsm,onChange:e=>h("receiverGsm",e.target.value),placeholder:"5xxxxxxxxx",maxLength:11})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"receiverAddress",children:"Adres *"}),i.jsx(v6,{id:"receiverAddress",value:d.receiverAddress,onChange:e=>h("receiverAddress",e.target.value),placeholder:"Detaylı adres bilgisi",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Şehir *"}),i.jsxs(nu,{open:a,onOpenChange:n,children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",role:"combobox","aria-expanded":a,className:"w-full justify-between",children:[o?o.name:"Şehir seçin...",i.jsx(Cr,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(iu,{className:"w-full p-0",children:i.jsxs(bte,{children:[i.jsx(jte,{placeholder:"Şehir ara...",value:s,onValueChange:l}),i.jsx(wte,{children:"Şehir bulunamadı."}),i.jsx(Nte,{className:"max-h-60 overflow-auto",children:m.map((e=>i.jsxs(_te,{value:e.name,onSelect:()=>(e=>{c(e),u((t=>({...t,receiverCity:e.plateCode}))),l(e.name),n(!1)})(e),children:[i.jsx(br,{className:xs("mr-2 h-4 w-4",(null==o?void 0:o.id)===e.id?"opacity-100":"opacity-0")}),e.name," (",e.plateCode,")"]},e.id)))})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"townOrArea",children:"İlçe *"}),i.jsx(co,{id:"townOrArea",value:d.townOrArea,onChange:e=>h("townOrArea",e.target.value),placeholder:"İlçe adı"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"dispatchNumber",children:"İrsaliye Numarası *"}),i.jsx(co,{id:"dispatchNumber",value:d.dispatchNumber,onChange:e=>h("dispatchNumber",e.target.value),placeholder:"İrsaliye no"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"invoiceAmount",children:"Tahsilat Tutarı (₺) *"}),i.jsx(co,{id:"invoiceAmount",type:"number",step:"0.01",min:"0",value:d.invoiceAmount,onChange:e=>h("invoiceAmount",e.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"description",children:"Kargo İçeriği"}),i.jsx(co,{id:"description",value:d.description,onChange:e=>h("description",e.target.value),placeholder:"FORMA"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[i.jsx(oo,{variant:"outline",onClick:()=>{u({receiverName:"",receiverGsm:"",receiverAddress:"",receiverCity:"",townOrArea:"",dispatchNumber:"",invoiceAmount:"",description:""}),c(null),l("")},children:"Temizle"}),i.jsx(oo,{onClick:async()=>{if((()=>{const t=["receiverName","receiverGsm","receiverAddress","receiverCity","townOrArea","dispatchNumber","invoiceAmount"];for(const r of t)if(!d[r])return e({title:"Eksik Bilgi",description:`${p(r)} alanı zorunludur.`,variant:"destructive"}),!1;return/^[0-9]{10,11}$/.test(d.receiverGsm.replace(/\D/g,""))?!(isNaN(Number(d.invoiceAmount))||Number(d.invoiceAmount)<=0)||(e({title:"Geçersiz Tutar",description:"Geçerli bir tahsilat tutarı giriniz.",variant:"destructive"}),!1):(e({title:"Geçersiz Telefon",description:"Geçerli bir telefon numarası giriniz.",variant:"destructive"}),!1)})()){r(!0);try{await new Promise((e=>setTimeout(e,1e3)));const t=`YK${Date.now().toString().slice(-6)}`;e({title:"Gönderi Oluşturuldu (Demo)",description:`Demo gönderi oluşturuldu. Takip numarası: ${t}`}),u({receiverName:"",receiverGsm:"",receiverAddress:"",receiverCity:"",townOrArea:"",dispatchNumber:"",invoiceAmount:"",description:""}),c(null),l("")}catch(t){e({title:"Hata",description:"Gönderi oluşturulurken bir hata oluştu.",variant:"destructive"})}finally{r(!1)}}},disabled:t,className:"bg-blue-600 hover:bg-blue-700",children:t?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Gönderiliyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ba,{className:"w-4 h-4 mr-2"}),"Gönderi Oluştur"]})})]})]})]}),i.jsx(ro,{className:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800",children:i.jsx(io,{className:"pt-6",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-yellow-400 flex items-center justify-center mt-0.5",children:i.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Önemli Bilgiler"}),i.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[i.jsx("li",{children:"• Telefon numarasını başında 0 olmadan giriniz (5xxxxxxxxx)"}),i.jsx("li",{children:'• Şehir seçiminde arama yapabilirsiniz (örn: "ist" yazıp İstanbul\'u bulabilirsiniz)'}),i.jsx("li",{children:"• Tahsilatlı gönderi için tahsilat tutarını mutlaka giriniz"}),i.jsx("li",{children:"• Tüm zorunlu alanları (*) doldurmayı unutmayınız"})]})]})]})})})]})}const Tte=e=>(e||"").toLowerCase(),Ote=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e||0),Pte=e=>{const{name:t,category:r,itemType:a,notes:n}=e,s=`${t} ${r} ${a} ${n}`;return a.replace(/[^a-zğüşiöç]/g,"").includes("short")||s.includes("şort")||s.includes("sort")||s.includes("short")||s.includes("shorts")},Ate=()=>{const[e,t]=ze.useState(""),[r,a]=ze.useState(""),[n,s]=ze.useState(""),[l,o]=ze.useState({search:"",dateFrom:"",dateTo:""}),[c,d]=ze.useState(1),[u,m]=ze.useState(1),[h,p]=ze.useState(1),x=()=>{o({search:e.trim(),dateFrom:r,dateTo:n}),d(1),m(1),p(1)},{data:g,isLoading:f,error:y}=qe({queryKey:["production-orders",l.search,l.dateFrom,l.dateTo],queryFn:async()=>{let e=Wl.from("orders").select("id, created_at, customer_name, order_number, customer_id, order_type,\n           profiles!customer_id(full_name),\n           order_items(\n             id, quantity, item_type, notes,\n             product_variations(\n               id,\n               products(id, name, category, is_design_product)\n             )\n           )",{count:"exact"});if(l.search){const t=l.search.replace(/%/g,"");e=e.or(`customer_name.ilike.%${t}%,order_number.ilike.%${t}%`)}l.dateFrom&&(e=e.gte("created_at",ZS(new Date(l.dateFrom)).toISOString())),l.dateTo&&(e=e.lte("created_at",cC(new Date(l.dateTo)).toISOString())),e=e.order("created_at",{ascending:!1});const{data:t,error:r}=await e;if(r)throw r;return{rows:t||[]}}}),v=ze.useMemo((()=>((null==g?void 0:g.rows)||[]).map((e=>{var t,r;let a=0,n=0,s=0,i=0,l=0,o=0,c=0,d=0;null==(t=e.order_items)||t.forEach((t=>{var r,u,m,h,p,x;const g=Tte(null==(u=null==(r=t.product_variations)?void 0:r.products)?void 0:u.name),f=Tte(null==(h=null==(m=t.product_variations)?void 0:m.products)?void 0:h.category),y=!0===(null==(x=null==(p=t.product_variations)?void 0:p.products)?void 0:x.is_design_product),v=Number(t.quantity||0),b=Tte(t.item_type),j=Tte(e.order_type),k=Tte(t.notes),w=y||f.includes("özel tasarım")||f.includes("design")||j.includes("design"),N=(e=>{const{name:t,category:r,itemType:a,notes:n}=e;return r.toLowerCase().includes("promosyon")||r.toLowerCase().includes("promotion")||a.toLowerCase().includes("promotion")||t.toLowerCase().includes("promosyon")||t.toLowerCase().includes("promotion")})({name:g,category:f,itemType:b,notes:k});return Pte({name:g,category:f,itemType:b,notes:k})?(n+=v,void(N?d+=v:w?i+=v:o+=v)):(e=>{const{name:t,category:r,itemType:a,notes:n,isDesign:s}=e,i=`${t} ${r} ${a} ${n}`,l=a.replace(/[^a-zğüşiöç]/g,"");return!Pte({name:t,category:r,itemType:a,notes:n})&&!(e=>{const{name:t,category:r,itemType:a,notes:n}=e,s=`${t} ${r} ${a} ${n}`;return s.includes("çorap")||s.includes("socks")})({name:t,category:r,itemType:a,notes:n})&&(i.includes("forma")||i.includes("üst")||i.includes("tek üst")||i.includes("jersey")||l.includes("readystock")||l.includes("goalkeeper")||l.includes("design")||r.includes("forma")||s&&!Pte({name:t,category:r,itemType:a,notes:n}))})({name:g,category:f,itemType:b,notes:k,isDesign:w})?(a+=v,void(N?c+=v:w?s+=v:l+=v)):void 0}));const u=20*a,m=5*a,h=10*n,p=u+m+h,x=20*s,g=5*s,f=10*i,y=x+g+f,v=20*l,b=5*l,j=10*o,k=v+b+j,w=20*c,N=5*c,_=10*d,S=w+N+_;return{id:e.id,date:e.created_at,orderNumber:e.order_number||"",customer:e.customer_name||(null==(r=e.profiles)?void 0:r.full_name)||"",formaCount:a,shortCount:n,formaDikim:u,formaUtu:m,sortDikim:h,toplamUcret:p,formaCountDesign:s,shortCountDesign:i,formaDikimDesign:x,formaUtuDesign:g,sortDikimDesign:f,toplamUcretDesign:y,formaCountReady:l,shortCountReady:o,formaDikimReady:v,formaUtuReady:b,sortDikimReady:j,toplamUcretReady:k,formaCountPromotion:c,shortCountPromotion:d,formaDikimPromotion:w,formaUtuPromotion:N,sortDikimPromotion:_,toplamUcretPromotion:S}})).filter((e=>e.formaCount>0||e.shortCount>0))),[g]),[b,j]=ze.useState("design"),k=ze.useMemo((()=>"design"===b?v.filter((e=>e.formaCountDesign>0||e.shortCountDesign>0)):"promotion"===b?v.filter((e=>e.formaCountPromotion>0||e.shortCountPromotion>0)):v.filter((e=>e.formaCountReady>0||e.shortCountReady>0))),[v,b]),w="design"===b?c:"promotion"===b?h:u,N=e=>{"design"===b?d(e):"promotion"===b?p(e):m(e)},_=k.length,S=Math.max(1,Math.ceil(_/20)),C=ze.useMemo((()=>{const e=20*(w-1),t=e+20;return k.slice(e,t)}),[k,w]),T=ze.useMemo((()=>C.reduce(((e,t)=>{let r,a,n,s,i,l;return"design"===b?(r=t.formaCountDesign,a=t.shortCountDesign,n=t.formaDikimDesign,s=t.formaUtuDesign,i=t.sortDikimDesign,l=t.toplamUcretDesign):"promotion"===b?(r=t.formaCountPromotion,a=t.shortCountPromotion,n=t.formaDikimPromotion,s=t.formaUtuPromotion,i=t.sortDikimPromotion,l=t.toplamUcretPromotion):(r=t.formaCountReady,a=t.shortCountReady,n=t.formaDikimReady,s=t.formaUtuReady,i=t.sortDikimReady,l=t.toplamUcretReady),e.formaCount+=r,e.shortCount+=a,e.formaDikim+=n,e.formaUtu+=s,e.sortDikim+=i,e.toplamUcret+=l,e}),{formaCount:0,shortCount:0,formaDikim:0,formaUtu:0,sortDikim:0,toplamUcret:0})),[C,b]);ze.useMemo((()=>v.reduce(((e,t)=>(e.forma+=t.formaCountDesign,e.short+=t.shortCountDesign,e)),{forma:0,short:0})),[v]),ze.useMemo((()=>v.reduce(((e,t)=>(e.forma+=t.formaCountReady,e.short+=t.shortCountReady,e)),{forma:0,short:0})),[v]),ze.useMemo((()=>v.reduce(((e,t)=>(e.forma+=t.formaCountPromotion,e.short+=t.shortCountPromotion,e)),{forma:0,short:0})),[v]);const[O,P]=ze.useState({isOpen:!1,isLoading:!1,orderId:"",orderNumber:"",items:[]}),A=async(e,t)=>{P({isOpen:!0,isLoading:!0,orderId:e,orderNumber:t,items:[]});const{data:r,error:a}=await Wl.from("print_requests").select("id, file_url, print_regions(name)").eq("order_id",e);P(a?e=>({...e,isLoading:!1}):e=>({...e,isLoading:!1,items:r||[]}))},E=_;return f?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):y?i.jsx("div",{className:"p-4 text-red-600",children:"Veri yüklenirken bir hata oluştu."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Filtreler"})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex gap-3 items-center",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"Müşteri adı veya sipariş no ile ara",className:"pl-9",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x()}})]})}),i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx(pr,{className:"h-4 w-4"})," Tarih Aralığı"]}),i.jsx(co,{type:"date",className:"w-40",value:r,onChange:e=>a(e.target.value)}),i.jsx("span",{className:"text-gray-400",children:"-"}),i.jsx(co,{type:"date",className:"w-40",value:n,onChange:e=>s(e.target.value)}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{a(XC(new Date,"yyyy-MM-dd")),s(XC(new Date,"yyyy-MM-dd"))},children:"Bugün"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{a(XC(nT(new Date,7),"yyyy-MM-dd")),s(XC(new Date,"yyyy-MM-dd"))},children:"Son 7 Gün"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{a(XC(nT(new Date,30),"yyyy-MM-dd")),s(XC(new Date,"yyyy-MM-dd"))},children:"Son 30 Gün"}),(r||n)&&i.jsx(oo,{variant:"ghost",size:"sm",className:"text-red-600",onClick:()=>{a(""),s("")},children:"Tarihi Temizle"}),i.jsx(oo,{variant:"default",size:"sm",onClick:x,children:"Filtreleri Uygula"})]})]})})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs(no,{children:["Üretim Sipariş Özeti"," ",i.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(Toplam ",E,")"]})]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>{const e=[...k].sort(((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())),t=[["Sipariş Tarihi","Müşteri","Forma Adeti","Şort Adeti","Forma Dikim Ücreti","Forma Ütü Ücreti","Şort Dikim Ücreti","Toplam Ücret"].join(";")];let r=0,a=0,n=0,s=0,i=0,l=0;for(const m of e){const e="design"===b,o=e?m.formaCountDesign:m.formaCountReady,c=e?m.shortCountDesign:m.shortCountReady,d=e?m.formaDikimDesign:m.formaDikimReady,u=e?m.formaUtuDesign:m.formaUtuReady,h=e?m.sortDikimDesign:m.sortDikimReady,p=e?m.toplamUcretDesign:m.toplamUcretReady;r+=o,a+=c,n+=d,s+=u,i+=h,l+=p;const x=XC(new Date(m.date),"dd.MM.yyyy HH:mm"),g=m.orderNumber||"",f='"'+(m.customer||"").replace(/"/g,'""')+'"';t.push([x,'"'+String(g).replace(/"/g,'""')+'"',f,String(o),String(c),Ote(d),Ote(u),Ote(h),Ote(p)].join(";"))}e.length>0&&(t.push(""),t.push(["","","TOPLAM",String(r),String(a),Ote(n),Ote(s),Ote(i),Ote(l)].join(";")));const o=t.join("\r\n"),c=new Blob(["\ufeff"+o],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(c),u=document.createElement("a");u.href=d,u.download=`uretim_${b}_${XC(new Date,"yyyyMMdd_HHmm")}.csv`,u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d)},children:[i.jsx(qr,{className:"h-4 w-4 mr-2"})," Excel İndir"]})]}),i.jsx(Yo,{value:b,onValueChange:e=>j(e),children:i.jsxs(Vo,{className:"w-full justify-start gap-2",children:[i.jsxs(Go,{value:"design",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:["Özel Tasarımlar",i.jsx("span",{className:"ml-2 text-xs rounded-full bg-blue-100 text-blue-700 px-2 py-0.5"})]}),i.jsxs(Go,{value:"ready",className:"data-[state=active]:bg-emerald-600 data-[state=active]:text-white",children:["Hazır Formalar",i.jsx("span",{className:"ml-2 text-xs rounded-full bg-emerald-100 text-emerald-700 px-2 py-0.5"})]}),i.jsxs(Go,{value:"promotion",className:"data-[state=active]:bg-purple-600 data-[state=active]:text-white",children:["Promosyonlar",i.jsx("span",{className:"ml-2 text-xs rounded-full bg-purple-100 text-purple-700 px-2 py-0.5"})]})]})})]}),i.jsxs(io,{children:[i.jsxs(Yo,{value:b,onValueChange:e=>j(e),children:[i.jsx(Wo,{value:"design",children:i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Sipariş Tarihi"}),i.jsx(M5,{children:"Müşteri Adı Soyadı"}),i.jsx(M5,{children:"Forma Adeti"}),i.jsx(M5,{children:"Şort Adeti"}),i.jsx(M5,{children:"Forma Dikim Ücreti"}),i.jsx(M5,{children:"Forma Ütü Ücreti"}),i.jsx(M5,{children:"Şort Dikim Ücreti"}),i.jsx(M5,{children:"Toplam Ücret"}),i.jsx(M5,{children:"Baskılar"})]})}),i.jsxs(E5,{children:[C.map((e=>i.jsxs(D5,{children:[i.jsx(z5,{children:XC(new Date(e.date),"dd MMM yyyy HH:mm",{locale:ZT})}),i.jsx(z5,{className:"font-medium",children:e.customer}),i.jsx(z5,{children:e.formaCountDesign}),i.jsx(z5,{children:e.shortCountDesign}),i.jsx(z5,{className:"text-right",children:Ote(e.formaDikimDesign)}),i.jsx(z5,{className:"text-right",children:Ote(e.formaUtuDesign)}),i.jsx(z5,{className:"text-right",children:Ote(e.sortDikimDesign)}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(e.toplamUcretDesign)}),i.jsx(z5,{children:i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>A(e.id,e.orderNumber),children:[i.jsx(Vr,{className:"h-4 w-4 mr-2"})," Gör"]})})]},e.id))),0===C.length&&i.jsx(D5,{children:i.jsx(z5,{colSpan:9,className:"text-center text-gray-500",children:"Gösterilecek sipariş bulunamadı"})}),C.length>0&&i.jsxs(D5,{children:[i.jsx(z5,{colSpan:3,className:"font-semibold",children:"Sayfa Toplamları"}),i.jsx(z5,{className:"font-semibold",children:T.formaCount}),i.jsx(z5,{className:"font-semibold",children:T.shortCount}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(T.formaDikim)}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(T.formaUtu)}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(T.sortDikim)}),i.jsx(z5,{className:"text-right font-bold",children:Ote(T.toplamUcret)})]})]})]})}),i.jsx(Wo,{value:"ready",children:i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Sipariş Tarihi"}),i.jsx(M5,{children:"Müşteri Adı Soyadı"}),i.jsx(M5,{children:"Forma Adeti"}),i.jsx(M5,{children:"Şort Adeti"}),i.jsx(M5,{children:"Forma Dikim Ücreti"}),i.jsx(M5,{children:"Forma Ütü Ücreti"}),i.jsx(M5,{children:"Şort Dikim Ücreti"}),i.jsx(M5,{children:"Toplam Ücret"}),i.jsx(M5,{children:"Baskılar"})]})}),i.jsxs(E5,{children:[C.map((e=>i.jsxs(D5,{children:[i.jsx(z5,{children:XC(new Date(e.date),"dd MMM yyyy HH:mm",{locale:ZT})}),i.jsx(z5,{className:"font-medium",children:e.customer}),i.jsx(z5,{children:e.formaCountReady}),i.jsx(z5,{children:e.shortCountReady}),i.jsx(z5,{className:"text-right",children:Ote(e.formaDikimReady)}),i.jsx(z5,{className:"text-right",children:Ote(e.formaUtuReady)}),i.jsx(z5,{className:"text-right",children:Ote(e.sortDikimReady)}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(e.toplamUcretReady)}),i.jsx(z5,{children:i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>A(e.id,e.orderNumber),children:[i.jsx(Vr,{className:"h-4 w-4 mr-2"})," Gör"]})})]},e.id))),0===C.length&&i.jsx(D5,{children:i.jsx(z5,{colSpan:9,className:"text-center text-gray-500",children:"Gösterilecek sipariş bulunamadı"})}),C.length>0&&i.jsxs(D5,{children:[i.jsx(z5,{colSpan:3,className:"font-semibold",children:"Sayfa Toplamları"}),i.jsx(z5,{className:"font-semibold",children:T.formaCount}),i.jsx(z5,{className:"font-semibold",children:T.shortCount}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(T.formaDikim)}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(T.formaUtu)}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(T.sortDikim)}),i.jsx(z5,{className:"text-right font-bold",children:Ote(T.toplamUcret)})]})]})]})}),i.jsx(Wo,{value:"promotion",children:i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Sipariş Tarihi"}),i.jsx(M5,{children:"Müşteri Adı Soyadı"}),i.jsx(M5,{children:"Forma Adeti"}),i.jsx(M5,{children:"Şort Adeti"}),i.jsx(M5,{children:"Forma Dikim Ücreti"}),i.jsx(M5,{children:"Forma Ütü Ücreti"}),i.jsx(M5,{children:"Şort Dikim Ücreti"}),i.jsx(M5,{children:"Toplam Ücret"}),i.jsx(M5,{children:"Baskılar"})]})}),i.jsxs(E5,{children:[C.map((e=>i.jsxs(D5,{children:[i.jsx(z5,{children:XC(new Date(e.date),"dd MMM yyyy HH:mm",{locale:ZT})}),i.jsx(z5,{className:"font-medium",children:e.customer}),i.jsx(z5,{children:e.formaCountPromotion}),i.jsx(z5,{children:e.shortCountPromotion}),i.jsx(z5,{className:"text-right",children:Ote(e.formaDikimPromotion)}),i.jsx(z5,{className:"text-right",children:Ote(e.formaUtuPromotion)}),i.jsx(z5,{className:"text-right",children:Ote(e.sortDikimPromotion)}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(e.toplamUcretPromotion)}),i.jsx(z5,{children:i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>A(e.id,e.orderNumber),children:[i.jsx(Vr,{className:"h-4 w-4 mr-2"})," Gör"]})})]},e.id))),0===C.length&&i.jsx(D5,{children:i.jsx(z5,{colSpan:9,className:"text-center text-gray-500",children:"Gösterilecek sipariş bulunamadı"})}),C.length>0&&i.jsxs(D5,{children:[i.jsx(z5,{colSpan:3,className:"font-semibold",children:"Sayfa Toplamları"}),i.jsx(z5,{className:"font-semibold",children:T.formaCount}),i.jsx(z5,{className:"font-semibold",children:T.shortCount}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(T.formaDikim)}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(T.formaUtu)}),i.jsx(z5,{className:"text-right font-semibold",children:Ote(T.sortDikim)}),i.jsx(z5,{className:"text-right font-bold",children:Ote(T.toplamUcret)})]})]})]})})]}),i.jsx(sd,{open:O.isOpen,onOpenChange:e=>!O.isLoading&&(e?null:P((e=>({...e,isOpen:!1})))),children:i.jsxs(cd,{className:"max-w-4xl",children:[i.jsx(dd,{children:i.jsxs(md,{children:["Baskı Görselleri ",O.orderNumber?`(Sipariş #${O.orderNumber})`:""]})}),O.isLoading?i.jsx("div",{className:"flex items-center justify-center h-48",children:i.jsx(oa,{className:"h-6 w-6 animate-spin"})}):i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[0===O.items.length&&i.jsx("div",{className:"col-span-full text-center text-gray-500",children:"Baskı görseli bulunamadı"}),O.items.map((e=>{var t,r;return i.jsxs("div",{className:"border rounded-lg p-2",children:[e.file_url?i.jsx("a",{href:e.file_url,target:"_blank",rel:"noreferrer",children:i.jsx("img",{src:e.file_url,alt:(null==(t=e.print_regions)?void 0:t.name)||"Baskı görseli",className:"w-full h-32 object-cover rounded"})}):i.jsx("div",{className:"w-full h-32 bg-gray-100 rounded flex items-center justify-center",children:i.jsx(Wr,{className:"h-8 w-8 text-gray-400"})}),i.jsx("div",{className:"mt-2 text-sm text-gray-600 truncate",children:(null==(r=e.print_regions)?void 0:r.name)||"Baskı"})]},e.id)}))]})]})}),S>1&&i.jsxs("div",{className:"flex items-center justify-between mt-6",children:[i.jsxs("div",{className:"text-sm text-gray-500",children:[E," kayıttan ",Math.min(20*(w-1)+1,E),"-",Math.min(20*w,E)," arası gösteriliyor"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>N(Math.max(1,w-1)),disabled:1===w,children:"Önceki"}),i.jsx("div",{className:"flex items-center gap-1",children:(()=>{const e=[];let t=Math.max(1,w-Math.floor(2.5)),r=Math.min(S,t+5-1);r-t+1<5&&(t=Math.max(1,r-5+1)),t>1&&e.push(1);for(let a=t;a<=r;a++)e.push(a);return r<S&&e.push(S),e.map(((t,r)=>{const a=r>0&&e[r-1]!==t-1;return i.jsxs("div",{children:[a&&i.jsx("span",{className:"px-1",children:"…"},`ellipsis-${t}`),i.jsx(oo,{variant:w===t?"default":"outline",size:"sm",onClick:()=>N(t),className:"w-8 h-8 p-0",children:t},`button-${t}`)]},`page-group-${t}`)}))})()}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>N(Math.min(S,w+1)),disabled:w===S,children:"Sonraki"})]})]})]})]})]})},Ete=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Dte=e=>new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"});function Mte({payment:e,onClose:t}){return i.jsx(sd,{open:!0,onOpenChange:t,children:i.jsxs(cd,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"text-2xl font-bold flex items-center gap-3",children:[i.jsx(Ea,{className:"h-6 w-6"}),"Ödeme Detayı"]}),i.jsxs(hd,{children:[e.dealer_name," bayisine yapılan ödemenin detaylı dağıtım bilgileri"]})]}),i.jsxs("div",{className:"space-y-6 mt-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(na,{className:"h-5 w-5"}),"Ödeme Özeti"]}),(e=>{switch(e){case"completed":return i.jsx(Co,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:"Tamamlandı"});case"pending":return i.jsx(Co,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:"Beklemede"});case"cancelled":return i.jsx(Co,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:"İptal"});default:return i.jsx(Co,{variant:"secondary",children:e})}})(e.status)]})}),i.jsxs(io,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 mb-1",children:[i.jsx(Lr,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Ödeme Tutarı"})]}),i.jsx("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:Ete(e.total_payment_amount)})]}),i.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-950/20 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-orange-600 dark:text-orange-400 mb-1",children:[i.jsx(na,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Kalan Borç"})]}),i.jsx("div",{className:"text-xl font-bold text-orange-900 dark:text-orange-100",children:Ete(e.remaining_debt)})]}),i.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-950/20 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400 mb-1",children:[i.jsx(mn,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Ekleyen"})]}),i.jsx("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:e.added_by_name||"Bilinmiyor"})]}),i.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[i.jsx(pr,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"Tarih"})]}),i.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:Dte(e.created_at)})]})]}),e.notes&&i.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Wr,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),i.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Notlar"})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.notes})]}),e.receipt_url&&i.jsx("div",{className:"mt-4",children:i.jsxs(oo,{variant:"outline",onClick:()=>{e.receipt_url&&window.open(e.receipt_url,"_blank")},className:"gap-2",children:[i.jsx(Ea,{className:"h-4 w-4"}),"Dekont Görüntüle",i.jsx(Hr,{className:"h-3 w-3"})]})})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5"}),"Sipariş Dağıtımları"]}),i.jsx(so,{children:"Bu ödemenin hangi siparişlere ne kadar dağıtıldığı"})]}),i.jsx(io,{children:e.distributions&&e.distributions.length>0?i.jsx("div",{className:"space-y-4",children:e.distributions.map((t=>{var r;return i.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("h4",{className:"font-semibold",children:["Sipariş #",(null==(r=t.order)?void 0:r.order_number)||"Bilinmiyor"]}),t.order&&i.jsx(Co,{variant:"outline",children:t.order.status})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-4 w-4 text-green-500"}),i.jsxs("span",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Dağıtılan: "}),i.jsx("span",{className:"font-medium",children:Ete(t.distributed_amount)})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(na,{className:"h-4 w-4 text-red-500"}),i.jsxs("span",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bayinin Toplam Borcu: "}),i.jsx("span",{className:"font-medium text-red-600 dark:text-red-400",children:Ete(e.remaining_debt)})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pr,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:Dte(t.created_at)})]})]}),t.order&&i.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsx("span",{children:"Müşteri: "}),i.jsx("span",{className:"font-medium",children:t.order.customer_name}),t.order.company_name&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:" - "}),i.jsx("span",{className:"font-medium",children:t.order.company_name})]})]})]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>{var e,r;return r=t.order_id,null==(e=t.order)||e.order_number,void window.open(`/admin/orders/${r}`,"_blank")},className:"gap-2",children:[i.jsx(Hr,{className:"h-3 w-3"}),"Sipariş Detayı"]})]})},t.id)}))}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ba,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Dağıtım bilgisi bulunamadı"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Bu ödeme için sipariş dağıtım bilgileri bulunmuyor."})]})})]})]})]})})}function zte({dealerName:e,onClose:t,isModal:r=!0}){const[a,n]=ze.useState(""),[s,l]=ze.useState(1),[o,c]=ze.useState(null),{data:d,isLoading:u}=qe({queryKey:["dealer-payment-history",e],queryFn:async()=>{let t=Wl.from("dealer_payments").select("\n          *,\n          profiles!dealer_payments_added_by_fkey(full_name)\n        ").order("created_at",{ascending:!1});e&&(t=t.eq("dealer_name",e));const{data:r,error:a}=await t;if(a)throw a;return(r||[]).map((e=>{var t;return{...e,added_by_name:(null==(t=e.profiles)?void 0:t.full_name)||"Bilinmiyor"}}))}}),{data:m}=qe({queryKey:["dealer-payment-distributions"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("dealer_payment_distributions").select("\n          *,\n          orders(\n            id,\n            order_number,\n            customer_name,\n            total_amount,\n            status,\n            payment_status,\n            created_at\n          )\n        ").order("created_at",{ascending:!1});if(t)throw t;return e||[]}}),h=ze.useMemo((()=>{if(!d)return[];if(!a.trim())return d;const e=a.toLowerCase();return d.filter((t=>t.dealer_name.toLowerCase().includes(e)||t.added_by_name&&t.added_by_name.toLowerCase().includes(e)||t.notes&&t.notes.toLowerCase().includes(e)))}),[d,a]),p=Math.ceil(h.length/10),x=h.slice(10*(s-1),10*s),g=ze.useMemo((()=>{if(!d)return{totalPayments:0,totalAmount:0,averageAmount:0};const e=d.length,t=d.reduce(((e,t)=>e+t.total_payment_amount),0);return{totalPayments:e,totalAmount:t,averageAmount:e>0?t/e:0}}),[d]),f=e=>{switch(e){case"completed":return i.jsx(Co,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:"Tamamlandı"});case"pending":return i.jsx(Co,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:"Beklemede"});case"cancelled":return i.jsx(Co,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:"İptal"});default:return i.jsx(Co,{variant:"secondary",children:e})}};if(u)return r?i.jsx(sd,{open:!0,onOpenChange:t,children:i.jsx(cd,{className:"max-w-6xl max-h-[90vh]",children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})})})}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})});const y=i.jsxs("div",{className:"space-y-6",children:[!r&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[i.jsx(Ea,{className:"h-6 w-6"}),e?`${e} - Ödeme Geçmişi`:"Tüm Bayi Ödemeleri"]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Bayi ödemelerinin detaylı geçmişi ve dağıtım bilgileri"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-blue-700 dark:text-blue-300",children:"Toplam Ödeme"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:g.totalPayments})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/20 dark:to-green-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-green-700 dark:text-green-300",children:"Toplam Tutar"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:Ete(g.totalAmount)})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/20 dark:to-purple-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-purple-700 dark:text-purple-300",children:"Ortalama Ödeme"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:Ete(g.averageAmount)})})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Fa,{className:"h-5 w-5"}),"Ödeme Arama"]})}),i.jsx(io,{children:i.jsx("div",{className:"flex gap-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx(po,{htmlFor:"search",children:"Bayi adı, kullanıcı adı veya notlara göre arama yapın"}),i.jsx(co,{id:"search",placeholder:"Arama...",value:a,onChange:e=>{n(e.target.value),l(1)},className:"mt-1"})]})})})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsx(no,{children:"Ödeme Geçmişi"}),i.jsxs(so,{children:[h.length," ödeme bulundu"]})]}),i.jsxs(io,{children:[i.jsx("div",{className:"space-y-4",children:x.map((e=>i.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors",onClick:()=>(e=>{const t=((null==m?void 0:m.filter((t=>t.dealer_payment_id===e.id)))||[]).map((e=>({...e,order:e.orders})));c({...e,distributions:t})})(e),children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.dealer_name}),f(e.status)]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-4 w-4 text-green-500"}),i.jsx("span",{className:"font-medium",children:Ete(e.total_payment_amount)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(mn,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{children:e.added_by_name})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pr,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{children:Dte(e.created_at)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(na,{className:"h-4 w-4 text-orange-500"}),i.jsxs("span",{className:"text-orange-600 font-medium",children:["Kalan: ",Ete(e.remaining_debt)]})]})]}),e.notes&&i.jsx("div",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-sm",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"h-3 w-3"}),i.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:e.notes})]})})]}),i.jsxs(oo,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(Vr,{className:"h-4 w-4"}),"Detay"]})]})},e.id)))}),p>1&&i.jsxs("div",{className:"flex items-center justify-between mt-6",children:[i.jsxs(oo,{variant:"outline",onClick:()=>l((e=>Math.max(1,e-1))),disabled:1===s,className:"gap-2",children:[i.jsx(kr,{className:"h-4 w-4"}),"Önceki"]}),i.jsxs("span",{className:"text-sm text-gray-500",children:["Sayfa ",s," / ",p," (",h.length," ödeme)"]}),i.jsxs(oo,{variant:"outline",onClick:()=>l((e=>Math.min(p,e+1))),disabled:s===p,className:"gap-2",children:["Sonraki",i.jsx(wr,{className:"h-4 w-4"})]})]}),0===h.length&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ea,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:a?"Arama sonucu bulunamadı":"Henüz ödeme bulunmamaktadır"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Farklı arama terimleri deneyebilirsiniz.":"İlk ödemeyi ekleyerek başlayın."})]})]})]})]});return r?i.jsxs(i.Fragment,{children:[i.jsx(sd,{open:!0,onOpenChange:t,children:i.jsxs(cd,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"text-2xl font-bold flex items-center gap-3",children:[i.jsx(Ea,{className:"h-6 w-6"}),e?`${e} - Ödeme Geçmişi`:"Tüm Bayi Ödemeleri"]}),i.jsx(hd,{children:"Bayi ödemelerinin detaylı geçmişi ve dağıtım bilgileri"})]}),i.jsx("div",{className:"mt-6",children:y})]})}),o&&i.jsx(Mte,{payment:o,onClose:()=>c(null)})]}):i.jsxs(i.Fragment,{children:[y,o&&i.jsx(Mte,{payment:o,onClose:()=>c(null)})]})}function Rte({dealer:e,onClose:t}){const{toast:r}=at(),a=$e(),[n,s]=ze.useState(!1);ze.useState(!1);const[l,o]=ze.useState("overview"),[c,d]=ze.useState(""),[u,m]=ze.useState("");ze.useState(0);const[h,p]=ze.useState(0),x=$8({allowedTypes:["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp","application/pdf"],maxFileSize:104857600}),g=Ke({mutationFn:async({amount:t,receiptUrl:r})=>{const{data:{user:a}}=await Wl.auth.getUser();if(!a)throw new Error("Kullanıcı bulunamadı");const n=e.orders.filter((e=>"paid"!==e.payment_status)).sort(((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()));let s=t;const i=[],l=[],o=e.totalUnpaid,c=Math.max(0,o-t),d=u.trim()?`${u.trim()} | Bayi Ödeme Sistemi`:"Bayi Ödeme Sistemi",{data:m,error:h}=await Wl.from("dealer_payments").insert([{dealer_name:e.name,total_payment_amount:t,remaining_debt:c,added_by:a.id,notes:d,receipt_url:r||null,status:"pending"}]).select().single();if(h)throw h;for(const p of n){if(s<=0)break;const t=e.payments.filter((e=>e.order_id===p.id&&e.amount>0)).reduce(((e,t)=>e+t.amount),0),a=e.payments.filter((e=>e.order_id===p.id)).reduce(((e,t)=>e+(t.discount||0)),0),n=p.total_amount-t-a;if(n>0){const t=Math.min(s,n),a={order_id:p.id,customer_id:p.customer_id,amount:t,discount:0,status:"pending",notes:`Bayi Ödeme - ${e.name}${u.trim()?` | ${u.trim()}`:""}`,receipt_url:r||null},{data:o,error:c}=await Wl.from("payments").insert([a]).select().single();if(c)throw c;const d={dealer_payment_id:m.id,order_id:p.id,payment_id:o.id,distributed_amount:t,order_remaining_debt:n-t},{error:h}=await Wl.from("dealer_payment_distributions").insert([d]);if(h)throw h;s-=t,i.push(o),l.push(d)}}return{dealerPayment:m,paymentsToCreate:i,distributionsToCreate:l,totalDistributed:t-s}},onSuccess:e=>{const{dealerPayment:t,paymentsToCreate:n,totalDistributed:i}=e;a.invalidateQueries({queryKey:["dealer-orders"]}),a.invalidateQueries({queryKey:["dealer-payments"]}),a.invalidateQueries({queryKey:["dealer-payment-history"]}),a.invalidateQueries({queryKey:["pending-payments"]}),r({title:"Başarılı",description:`${Ete(parseFloat(c))} ödeme beklemede olarak eklendi (${n.length} siparişe dağıtıldı)`,variant:"default"}),s(!1),d(""),m(""),x.reset()},onError:e=>{r({title:"Hata",description:"Ödeme eklenirken bir hata oluştu",variant:"destructive"})}});return i.jsxs(i.Fragment,{children:[i.jsx(sd,{open:!0,onOpenChange:t,children:i.jsxs(cd,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"text-2xl font-bold flex items-center gap-3",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white flex items-center justify-center font-bold text-2xl",children:e.name.substring(0,2)}),i.jsxs("div",{children:[i.jsx("div",{children:e.name}),e.company&&i.jsxs("div",{className:"text-lg font-normal text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4"}),e.company]})]})]}),i.jsx(hd,{children:"Bayinin detaylı cari hesap bilgileri ve sipariş geçmişi"})]}),i.jsxs("div",{className:"space-y-6 mt-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-blue-700 dark:text-blue-300",children:"Toplam Sipariş"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:e.orderCount})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/20 dark:to-green-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-green-700 dark:text-green-300",children:"Toplam Tutar"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:Ete(e.totalRevenue)})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-950/20 dark:to-emerald-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-emerald-700 dark:text-emerald-300",children:"Ödenen Tutar"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100",children:Ete(e.totalPaid)})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-950/20 dark:to-yellow-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"İskonto Tutar"})}),i.jsx(io,{children:i.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:Ete(e.totalDiscount)})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-950/20 dark:to-red-900/20",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm text-red-700 dark:text-red-300",children:"Kalan Tutar"})}),i.jsxs(io,{children:[i.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:Ete(e.totalUnpaid)}),i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"İskonto düşülmüş"})]})]})]}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"flex space-x-8",children:[i.jsx("button",{onClick:()=>o("overview"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("overview"===l?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:"Genel Bakış"}),i.jsx("button",{onClick:()=>o("payments"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("payments"===l?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:"Ödeme Geçmişi"})]})}),"overview"===l&&i.jsxs("div",{className:"space-y-6",children:[(e.phone||e.address)&&i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(mn,{className:"h-5 w-5"}),"İletişim Bilgileri"]})}),i.jsxs(io,{className:"space-y-3",children:[e.phone&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ta,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{children:e.phone})]}),e.address&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ma,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{children:e.city?`${e.address}, ${e.city}`:e.address})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2 justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-5 w-5"}),"Ödeme Yönetimi"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{size:"sm",variant:"outline",onClick:()=>o("payments"),className:"gap-2",children:[i.jsx(ta,{className:"h-4 w-4"}),"Ödeme Geçmişi"]}),i.jsxs(oo,{size:"sm",onClick:()=>s(!0),className:"gap-2",children:[i.jsx(Lr,{className:"h-4 w-4"}),"Ödeme Ekle"]})]})]})}),i.jsx(io,{children:i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:'Yeni ödeme ekleyebilir, ödeme geçmişini görüntüleyebilir ve mevcut ödemeleri "Bekleyen Ödemeler" sekmesinden onaylayabilirsiniz.'})})]})]}),"payments"===l&&i.jsx(zte,{dealerName:e.name,onClose:()=>{},isModal:!1}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5"}),"Son Siparişler"]}),i.jsxs(so,{children:["Toplam ",e.orders.length," sipariş - Sayfa ",h+1]})]}),i.jsxs(io,{children:[i.jsx("div",{className:"space-y-3",children:e.orders.slice(10*h,10*(h+1)).map((t=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"font-medium",children:["#",t.order_number]}),i.jsx(Co,{variant:"delivered"===t.status?"default":"secondary",children:t.status})]}),i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:Dte(t.created_at)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-bold text-green-600",children:Ete(t.total_amount)}),i.jsx("div",{className:"text-xs text-gray-500",children:"paid"===t.payment_status?"Ödendi":"Bekliyor"})]}),i.jsxs(oo,{size:"sm",variant:"outline",onClick:a=>{a.stopPropagation(),(t=>{const a=e.orders.find((e=>e.id===t));a?(window.open(`/admin/orders/${t}`,"_blank"),r({title:"Sipariş Detayı",description:`Sipariş #${a.order_number} detayı açılıyor...`,variant:"default"})):r({title:"Hata",description:"Sipariş bulunamadı",variant:"destructive"})})(t.id)},className:"gap-1",children:[i.jsx(Vr,{className:"h-3 w-3"}),"Detay"]})]})]},t.id)))}),i.jsxs("div",{className:"flex justify-between items-center mt-4",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>p((e=>Math.max(0,e-1))),disabled:0===h,children:"Önceki"}),i.jsxs("span",{className:"text-sm text-gray-500",children:[10*h+1," - ",Math.min(10*(h+1),e.orders.length)," / ",e.orders.length]}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>p((e=>e+1)),disabled:10*(h+1)>=e.orders.length,children:"Sonraki"})]})]})]})]})]})}),i.jsx(sd,{open:n,onOpenChange:s,children:i.jsxs(cd,{className:"max-w-md",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-5 w-5"}),"Ödeme Ekle"]}),i.jsx(hd,{children:`${e.name} için ödeme ekleyin. Tutar en eski siparişten başlayarak dağıtılacak ve beklemede olarak kaydedilecek.`})]}),i.jsxs("div",{className:"space-y-4 mt-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"payment-amount",children:"Ödeme Tutarı (TL)"}),i.jsx(co,{id:"payment-amount",type:"number",placeholder:"0.00",value:c,onChange:e=>d(e.target.value),className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"payment-notes",children:"Not (Opsiyonel)"}),i.jsx(v6,{id:"payment-notes",placeholder:"Örn: Elden verildi, Banka transferi, vb.",value:u,onChange:e=>m(e.target.value),className:"mt-1 min-h-[80px]",maxLength:500}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Bu not "| Bayi Ödeme Sistemi" ile birlikte kaydedilecek'})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"receipt-upload",children:"Dekont/Makbuz (Opsiyonel)"}),i.jsxs("div",{className:"mt-1 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(co,{id:"receipt-upload",type:"file",accept:"image/*,.pdf",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];r&&x.setFile(r)},disabled:x.isUploading,className:"flex-1"}),x.isUploading&&i.jsx(oa,{className:"h-5 w-5 animate-spin text-blue-500"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Ödeme dekontunu yükleyin. JPEG, PNG, GIF, BMP, WebP, PDF formatında (max 100MB)."}),x.file&&i.jsx("div",{className:"border rounded-lg p-3 bg-gray-50 dark:bg-gray-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 border rounded overflow-hidden bg-white flex-shrink-0",children:"application/pdf"===x.file.type?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(Wr,{className:"h-6 w-6 text-red-600"})}):x.previewUrl?i.jsx("img",{src:x.previewUrl,alt:"Dekont önizleme",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:i.jsx(on,{className:"h-4 w-4 text-gray-400"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",children:x.file.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[(x.file.size/1048576).toFixed(2)," MB"]})]})]}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{x.reset();const e=document.getElementById("receipt-upload");e&&(e.value="")},className:"h-8 w-8 p-0",children:i.jsx(vn,{className:"h-4 w-4"})})]})}),x.error&&i.jsx("div",{className:"text-sm text-red-600",children:x.error})]})]}),i.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg text-sm",children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Toplam Borç:"}),i.jsx("span",{className:"font-bold text-red-600",children:Ete(e.totalUnpaid)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Ödenmemiş Sipariş:"}),i.jsxs("span",{children:[e.orders.filter((e=>"paid"!==e.payment_status)).length," adet"]})]})]})}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx(oo,{variant:"outline",onClick:()=>{s(!1),m("")},children:"İptal"}),i.jsxs(oo,{onClick:async()=>{const e=parseFloat(c);if(isNaN(e)||e<=0)return void r({title:"Hata",description:"Geçerli bir tutar girin",variant:"destructive"});let t;if(x.file)try{if(t=await x.uploadFile(),!t)return void r({title:"Hata",description:"Dekont yüklenirken bir hata oluştu",variant:"destructive"})}catch(a){return void r({title:"Hata",description:"Dekont yüklenirken bir hata oluştu",variant:"destructive"})}g.mutate({amount:e,receiptUrl:t})},disabled:!c||parseFloat(c)<=0||g.isPending||x.isUploading,className:"flex items-center gap-2",children:[(g.isPending||x.isUploading)&&i.jsx(oa,{className:"h-4 w-4 animate-spin"}),x.isUploading?"Yükleniyor...":"Beklemede Ekle"]})]})]})]})})]})}function Ite(){const{settings:e}=q9(),[t,r]=ze.useState(""),[a,n]=ze.useState(null),[s,l]=ze.useState("list"),{data:o,isLoading:c}=qe({queryKey:["dealer-orders"],queryFn:async()=>{let e=[],t=0;let r=!0;for(;r&&t<20;){const{data:a,error:n}=await Wl.from("orders").select("*, customer_id").order("created_at",{ascending:!1}).range(90*t,90*(t+1)-1);if(n)throw n;a&&a.length>0?(e=[...e,...a],r=90===a.length,t++):r=!1}return e}}),{data:d,isLoading:u}=qe({queryKey:["dealer-payments"],queryFn:async()=>{let e=[],t=0;let r=!0;for(;r&&t<30;){const{data:a,error:n}=await Wl.from("payments").select("*").order("created_at",{ascending:!1}).range(90*t,90*(t+1)-1);if(n)throw n;a&&a.length>0?(e=[...e,...a],r=90===a.length,t++):r=!1}return e}}),m=ze.useMemo((()=>{if(!o||!d||!e.dealer_names)return[];const t=e.dealer_names.split("\n").map((e=>e.trim().toUpperCase())).filter((e=>e.length>0)),r=new Map;let a=[];try{e.dealer_control_rules&&(a=JSON.parse(e.dealer_control_rules))}catch(n){}return t.forEach((e=>{const t=o.filter((t=>((e,t)=>{const r=(e.customer_name||"").toUpperCase(),n=(e.order_number||"").toUpperCase(),s=a.find((e=>e.dealerName&&e.dealerName.toUpperCase()===t.toUpperCase()));if(s){if(s.customerNamePatterns)for(const e of s.customerNamePatterns)if(e&&r.includes(e.toUpperCase()))return!0;if(s.orderNumberPatterns)for(const e of s.orderNumberPatterns)if(e&&n.includes(e.toUpperCase()))return!0}return!!r.includes(t)})(t,e)));if(t.length>0){const a=t[0],n=t.reduce(((e,t)=>e+t.total_amount),0),s=n/t.length,i=t[0].created_at,l=t.map((e=>e.id)),o=d.filter((e=>l.includes(e.order_id))),c=o.filter((e=>e.amount>0)).reduce(((e,t)=>e+t.amount),0),u=o.reduce(((e,t)=>e+(t.discount||0)),0),m=Math.max(0,n-c-u),h=new Date;h.setDate(h.getDate()-30);const p=t.some((e=>new Date(e.created_at)>h));r.set(e,{name:e,company:a.company_name||"",phone:a.customer_phone||"",address:a.customer_address||"",city:a.customer_city||"",orderCount:t.length,totalRevenue:n,totalDiscount:u,totalPaid:c,totalUnpaid:m,averageOrderValue:s,lastOrderDate:i,orders:t,payments:o,status:p?"active":"inactive"})}})),Array.from(r.values()).sort(((e,t)=>t.totalRevenue-e.totalRevenue))}),[o,d,e.dealer_names]),h=ze.useMemo((()=>{if(!t.trim())return m;const e=t.toLowerCase();return m.filter((r=>r.name.toLowerCase().includes(e)||r.company&&r.company.toLowerCase().includes(e)||r.phone&&r.phone.includes(t)))}),[m,t]),p=ze.useMemo((()=>{const e=m.length,t=m.filter((e=>"active"===e.status)).length,r=m.reduce(((e,t)=>e+t.totalRevenue),0);return{totalDealers:e,activeDealers:t,totalRevenue:r,totalOrders:m.reduce(((e,t)=>e+t.orderCount),0),averageRevenuePerDealer:e>0?r/e:0}}),[m]);return c||u?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam Bayi"})}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:p.totalDealers})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Aktif Bayi"})}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:p.activeDealers}),i.jsx("p",{className:"text-xs opacity-90 mt-1",children:"Son 30 gün"})]})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam Ciro"})}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:Ete(p.totalRevenue)})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white border-0",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam Sipariş"})}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:p.totalOrders})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white border-0",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Ort. Bayi Cirosu"})}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:Ete(p.averageRevenuePerDealer)})})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Fa,{className:"h-5 w-5"}),"Bayi Arama"]})}),i.jsx(io,{children:i.jsx("div",{className:"flex gap-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx(po,{htmlFor:"search",children:"Bayi adı, firma adı veya telefon ile arama yapın"}),i.jsx(co,{id:"search",placeholder:"Arama...",value:t,onChange:e=>r(e.target.value),className:"mt-1"})]})})})]}),i.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs("nav",{className:"flex space-x-8",children:[i.jsx("button",{onClick:()=>l("list"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("list"===s?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:"Bayi Listesi"}),i.jsx("button",{onClick:()=>l("payments"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("payments"===s?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:"Ödeme Geçmişi"})]})}),"list"===s&&i.jsxs("div",{children:[i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:h.map((e=>{return i.jsxs(ro,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n(e),children:[i.jsx(ao,{className:"pb-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white flex items-center justify-center font-bold text-lg",children:e.name.substring(0,2)}),i.jsxs("div",{children:[i.jsx(no,{className:"text-lg",children:e.name}),e.company&&i.jsxs(so,{className:"flex items-center gap-1 mt-1",children:[i.jsx(ur,{className:"h-3 w-3"}),e.company]})]})]}),(t=e.status,"active"===t?i.jsx(Co,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:"Aktif"}):i.jsx(Co,{variant:"secondary",children:"Pasif"}))]})}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2 text-sm",children:[e.phone&&i.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[i.jsx(Ta,{className:"h-3 w-3"}),e.phone]}),e.address&&i.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[i.jsx(ma,{className:"h-3 w-3"}),e.city?`${e.address}, ${e.city}`:e.address]})]}),i.jsx(vo,{}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 text-blue-600 dark:text-blue-400 mb-1",children:i.jsx(Ha,{className:"h-3 w-3"})}),i.jsx("div",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:e.orderCount}),i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Sipariş"})]}),i.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 text-green-600 dark:text-green-400 mb-1",children:i.jsx(Lr,{className:"h-3 w-3"})}),i.jsx("div",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:Ete(e.totalRevenue)}),i.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"Toplam Ciro"})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[i.jsxs("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-950/20 rounded",children:[i.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-100",children:Ete(e.totalPaid)}),i.jsx("div",{className:"text-emerald-600 dark:text-emerald-400",children:"Ödenen"})]}),i.jsxs("div",{className:"p-2 bg-yellow-50 dark:bg-yellow-950/20 rounded",children:[i.jsx("div",{className:"font-bold text-yellow-900 dark:text-yellow-100",children:Ete(e.totalDiscount)}),i.jsx("div",{className:"text-yellow-600 dark:text-yellow-400",children:"İskonto"})]}),i.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-950/20 rounded",children:[i.jsx("div",{className:"font-bold text-red-900 dark:text-red-100",children:Ete(e.totalUnpaid)}),i.jsx("div",{className:"text-red-600 dark:text-red-400",children:"Borç"})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Son Sipariş:"}),i.jsx("span",{className:"font-medium",children:Dte(e.lastOrderDate)})]}),i.jsxs(oo,{variant:"outline",className:"w-full gap-2",children:[i.jsx(Vr,{className:"h-4 w-4"}),"Detayları Görüntüle",i.jsx(wr,{className:"h-4 w-4 ml-auto"})]})]})]},e.name);var t}))}),0===h.length&&i.jsx(ro,{className:"text-center py-12",children:i.jsxs(io,{children:[i.jsx(Ha,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:t?"Arama sonucu bulunamadı":"Henüz bayi bulunmamaktadır"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t?"Farklı arama terimleri deneyebilirsiniz.":"Sistem ayarlarından bayi isimlerini tanımlayın."})]})})]}),"payments"===s&&i.jsx(zte,{onClose:()=>{},isModal:!1}),a&&i.jsx(Rte,{dealer:a,onClose:()=>n(null)})]})}function Fte(){const{toast:e}=at(),t=$e(),[r,a]=ze.useState(""),[n,s]=ze.useState(0),[l,o]=ze.useState(null),{data:c,isLoading:d}=qe({queryKey:["pending-payments"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("payments").select("\n          *,\n          orders!inner(\n            id,\n            order_number,\n            customer_name,\n            total_amount,\n            payment_status\n          )\n        ").eq("status","pending").order("created_at",{ascending:!1});if(t)throw t;return e.map((e=>({id:e.id,order_id:e.order_id,customer_id:e.customer_id,customer_name:e.orders.customer_name,order_number:e.orders.order_number,total_amount:e.orders.total_amount,amount:e.amount,discount:e.discount||0,status:e.status,notes:e.notes,receipt_url:e.receipt_url,created_at:e.created_at,updated_at:e.updated_at})))}}),u=Ke({mutationFn:async({paymentId:e,status:t,notes:r})=>{const a={status:t,processed_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};r&&(a.notes=r);const{error:n}=await Wl.from("payments").update(a).eq("id",e);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["pending-payments"]}),t.invalidateQueries({queryKey:["dealer-orders"]}),t.invalidateQueries({queryKey:["dealer-payments"]})}}),m=ze.useMemo((()=>{if(!c)return[];if(!r.trim())return c;const e=r.toLowerCase();return c.filter((t=>t.customer_name.toLowerCase().includes(e)||t.order_number.toLowerCase().includes(e)||t.notes&&t.notes.toLowerCase().includes(e)))}),[c,r]),h=m.slice(10*n,10*(n+1));return d?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(ro,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam Bekleyen"})}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white border-0",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam Tutar"})}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:Ete(m.reduce(((e,t)=>e+t.amount),0))})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Toplam İskonto"})}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:Ete(m.reduce(((e,t)=>e+t.discount),0))})})]}),i.jsxs(ro,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0",children:[i.jsx(ao,{className:"pb-2",children:i.jsx(no,{className:"text-sm font-medium opacity-90",children:"Benzersiz Müşteri"})}),i.jsx(io,{children:i.jsx("div",{className:"text-2xl font-bold",children:new Set(m.map((e=>e.customer_name))).size})})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Fa,{className:"h-5 w-5"}),"Ödeme Arama"]})}),i.jsx(io,{children:i.jsx("div",{className:"flex gap-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx(po,{htmlFor:"search",children:"Müşteri adı, sipariş numarası veya notlarla arama yapın"}),i.jsx(co,{id:"search",placeholder:"Arama...",value:r,onChange:e=>a(e.target.value),className:"mt-1"})]})})})]}),h.length>0?i.jsxs("div",{className:"space-y-4",children:[h.map((r=>{return i.jsx(ro,{className:"hover:shadow-lg transition-shadow",children:i.jsx(io,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs(Co,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[i.jsx(zr,{className:"h-3 w-3 mr-1"}),"Bekliyor"]}),i.jsxs("span",{className:"font-medium",children:["#",r.order_number]}),i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:r.customer_name})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Ödeme Tutarı:"}),i.jsx("div",{className:"font-bold text-green-600",children:Ete(r.amount)})]}),r.discount>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"İskonto:"}),i.jsx("div",{className:"font-bold text-yellow-600",children:Ete(r.discount)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Sipariş Tutarı:"}),i.jsx("div",{className:"font-bold text-blue-600",children:Ete(r.total_amount)})]})]}),r.notes&&i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Not:"}),i.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:r.notes})]}),r.receipt_url&&i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 border rounded overflow-hidden bg-gray-50 flex-shrink-0",children:r.receipt_url.includes("-pdf")?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(Wr,{className:"h-4 w-4 text-red-600"})}):i.jsx("img",{src:r.receipt_url,alt:"Dekont önizleme",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[i.jsx(Ea,{className:"h-3 w-3"}),i.jsx("span",{className:"text-xs",children:"Dekont mevcut"})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Oluşturulma: ",(a=r.created_at,new Date(a).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(oo,{size:"sm",variant:"outline",onClick:()=>{return t=r.order_id,a=r.order_number,window.open(`/admin/orders/${t}`,"_blank"),void e({title:"Sipariş Detayı",description:`Sipariş #${a} detayı açılıyor...`,variant:"default"});var t,a},className:"gap-1",children:[i.jsx(Vr,{className:"h-3 w-3"}),"Sipariş"]}),r.receipt_url&&i.jsxs(oo,{size:"sm",variant:"outline",onClick:()=>{return e=r.receipt_url,void o(e);var e},className:"gap-1 text-green-600 border-green-200 hover:bg-green-50",children:[i.jsx(Ea,{className:"h-3 w-3"}),"Dekont"]}),i.jsxs(oo,{size:"sm",variant:"default",onClick:()=>(async t=>{try{await u.mutateAsync({paymentId:t.id,status:"completed",notes:t.notes?`${t.notes} - Onaylandı`:"Onaylandı"}),window.open(`/admin/orders/${t.order_id}`,"_blank"),e({title:"Ödeme Onaylandı",description:`${t.order_number} siparişi için ${Ete(t.amount)} ödeme onaylandı.`,variant:"default"})}catch(r){e({title:"Hata",description:"Ödeme onaylanırken bir hata oluştu",variant:"destructive"})}})(r),disabled:u.isPending,className:"gap-1 bg-green-600 hover:bg-green-700",children:[i.jsx(Or,{className:"h-3 w-3"}),"Onayla"]}),i.jsxs(oo,{size:"sm",variant:"destructive",onClick:()=>(async r=>{try{const{data:a,error:n}=await Wl.from("dealer_payment_distributions").select("dealer_payment_id, distributed_amount").eq("payment_id",r.id);if(n)throw new Error(`Dealer payment distributions kontrol hatası: ${n.message}`);if(a&&a.length>0){const e=[...new Set(a.map((e=>e.dealer_payment_id)))];for(const t of e){const{error:e}=await Wl.from("dealer_payments").delete().eq("id",t);if(e)throw new Error(`Dealer payment silme hatası: ${e.message}`)}}const{error:s}=await Wl.from("payments").delete().eq("id",r.id);if(s)throw new Error(`Payment silme hatası: ${s.message}`);t.invalidateQueries({queryKey:["pending-payments"]}),t.invalidateQueries({queryKey:["dealer-orders"]}),t.invalidateQueries({queryKey:["dealer-payments"]}),t.invalidateQueries({queryKey:["dealer-payment-history"]}),e({title:"Ödeme Silindi",description:`${r.order_number} siparişi için ${Ete(r.amount)} ödeme kaydı silindi.`,variant:"default"})}catch(a){e({title:"Hata",description:"Ödeme silinirken bir hata oluştu",variant:"destructive"})}})(r),disabled:u.isPending,className:"gap-1",children:[i.jsx(Er,{className:"h-3 w-3"}),"Reddet"]})]})]})})},r.id);var a})),i.jsxs("div",{className:"flex justify-between items-center mt-6",children:[i.jsx(oo,{variant:"outline",onClick:()=>s((e=>Math.max(0,e-1))),disabled:0===n,children:"Önceki"}),i.jsxs("span",{className:"text-sm text-gray-500",children:[10*n+1," - ",Math.min(10*(n+1),m.length)," / ",m.length]}),i.jsx(oo,{variant:"outline",onClick:()=>s((e=>e+1)),disabled:10*(n+1)>=m.length,children:"Sonraki"})]})]}):i.jsx(ro,{className:"text-center py-12",children:i.jsxs(io,{children:[i.jsx(Ir,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:r?"Arama sonucu bulunamadı":"Bekleyen ödeme bulunmamaktadır"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r?"Farklı arama terimleri deneyebilirsiniz.":"Tüm ödemeler işlenmiş durumda."})]})}),i.jsx(sd,{open:!!l,onOpenChange:()=>o(null),children:i.jsxs(cd,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[i.jsxs(dd,{children:[i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-5 w-5"}),"Dekont Görüntüle"]}),i.jsx(hd,{children:"Ödeme dekontu detayları"})]}),i.jsx("div",{className:"flex-1 overflow-auto",children:l&&i.jsx("div",{className:"flex justify-center",children:l.includes("-pdf")?i.jsxs("div",{className:"text-center p-8",children:[i.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-lg flex items-center justify-center mx-auto mb-4",children:i.jsx(Wr,{className:"h-8 w-8 text-red-600"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"PDF Dosyası"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"PDF dosyasını görüntülemek için aşağıdaki bağlantıya tıklayın."}),i.jsxs(oo,{onClick:()=>window.open(l,"_blank"),className:"inline-flex items-center gap-2",children:[i.jsx(Wr,{className:"h-4 w-4"}),"PDF'i Aç"]})]}):i.jsx("img",{src:l,alt:"Dekont",className:"w-full h-auto max-h-[70vh] object-contain"})})})]})})]})}function Bte(){const[e,t]=ze.useState("list");return i.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[i.jsx("div",{className:"flex justify-between items-start",children:i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[i.jsx(Qa,{className:"h-8 w-8 text-blue-600"}),"Bayi Cari Hesapları"]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Bayilerinizin sipariş geçmişi, cari hesap bilgileri ve bekleyen ödemeler"})]})}),i.jsxs(Yo,{value:e,onValueChange:t,children:[i.jsxs(Vo,{className:"grid w-full grid-cols-2",children:[i.jsxs(Go,{value:"list",className:"flex items-center gap-2",children:[i.jsx(Qa,{className:"h-4 w-4"}),"Bayi Listesi"]}),i.jsxs(Go,{value:"pending",className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-4 w-4"}),"Bekleyen Ödemeler"]})]}),i.jsx(Wo,{value:"list",className:"mt-6",children:i.jsx(Ite,{})}),i.jsx(Wo,{value:"pending",className:"mt-6",children:i.jsx(Fte,{})})]})]})}const Lte=()=>{const[e,t]=ze.useState([]),[r,a]=ze.useState(!0),n=async()=>{try{a(!0);const{data:e,error:r}=await Wl.from("positions").select("*").order("name");if(r)throw r;t(e||[])}catch(e){rt({title:"Hata",description:"Mevkiler yüklenirken hata oluştu: "+e.message,variant:"destructive"})}finally{a(!1)}};return ze.useEffect((()=>{n()}),[]),{positions:e,loading:r,createPosition:async e=>{try{const{data:t,error:r}=await Wl.from("positions").insert([e]).select().single();if(r)throw r;return rt({title:"Başarılı",description:"Mevki başarıyla eklendi"}),await n(),t}catch(t){throw rt({title:"Hata",description:"Mevki eklenirken hata oluştu: "+t.message,variant:"destructive"}),t}},updatePosition:async(e,t)=>{try{const{data:r,error:a}=await Wl.from("positions").update(t).eq("id",e).select().single();if(a)throw a;return rt({title:"Başarılı",description:"Mevki başarıyla güncellendi"}),await n(),r}catch(r){throw rt({title:"Hata",description:"Mevki güncellenirken hata oluştu: "+r.message,variant:"destructive"}),r}},deletePosition:async e=>{try{const{error:t}=await Wl.from("positions").delete().eq("id",e);if(t)throw t;rt({title:"Başarılı",description:"Mevki başarıyla silindi"}),await n()}catch(t){throw rt({title:"Hata",description:"Mevki silinirken hata oluştu: "+t.message,variant:"destructive"}),t}},refetch:n}},qte=()=>{const[e,t]=ze.useState([]),[r,a]=ze.useState(!0),n=async()=>{try{a(!0);const{data:e,error:r}=await Wl.from("employees").select("\n          *,\n          position:positions(*)\n        ").order("first_name");if(r)throw r;t(e||[])}catch(e){rt({title:"Hata",description:"Çalışanlar yüklenirken hata oluştu: "+e.message,variant:"destructive"})}finally{a(!1)}};return ze.useEffect((()=>{n()}),[]),{employees:e,loading:r,createEmployee:async e=>{try{const{data:t,error:r}=await Wl.from("employees").insert([{...e,is_active:e.is_active??!0}]).select("\n          *,\n          position:positions(*)\n        ").single();if(r)throw r;return rt({title:"Başarılı",description:"Çalışan başarıyla eklendi"}),await n(),t}catch(t){throw rt({title:"Hata",description:"Çalışan eklenirken hata oluştu: "+t.message,variant:"destructive"}),t}},updateEmployee:async(e,t)=>{try{const{data:r,error:a}=await Wl.from("employees").update(t).eq("id",e).select("\n          *,\n          position:positions(*)\n        ").single();if(a)throw a;return rt({title:"Başarılı",description:"Çalışan başarıyla güncellendi"}),await n(),r}catch(r){throw rt({title:"Hata",description:"Çalışan güncellenirken hata oluştu: "+r.message,variant:"destructive"}),r}},deleteEmployee:async e=>{try{const{error:t}=await Wl.from("employees").delete().eq("id",e);if(t)throw t;rt({title:"Başarılı",description:"Çalışan başarıyla silindi"}),await n()}catch(t){throw rt({title:"Hata",description:"Çalışan silinirken hata oluştu: "+t.message,variant:"destructive"}),t}},refetch:n}},$te=({onSelectEmployee:e,onEditEmployee:t})=>{const r=xl(),{employees:a,loading:n,deleteEmployee:s}=qte(),[l,o]=ze.useState(""),c=a.filter((e=>{var t,r,a,n,s;const i=l.toLowerCase();return e.first_name.toLowerCase().includes(i)||e.last_name.toLowerCase().includes(i)||(null==(t=e.email)?void 0:t.toLowerCase().includes(i))||(null==(r=e.phone)?void 0:r.includes(l))||(null==(a=e.tc_kimlik)?void 0:a.includes(l))||(null==(n=e.department)?void 0:n.toLowerCase().includes(i))||(null==(s=e.position)?void 0:s.name.toLowerCase().includes(i))}));return i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(no,{children:"Çalışan Listesi"}),i.jsxs(oo,{onClick:()=>r("/admin/employees/new"),children:[i.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Yeni Çalışan Ekle"]})]})}),i.jsxs(io,{children:[i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),i.jsx(co,{placeholder:"Çalışan ara...",value:l,onChange:e=>o(e.target.value),className:"pl-10"})]})}),n?i.jsx("div",{className:"text-center py-4",children:"Yükleniyor..."}):0===c.length?i.jsx("div",{className:"text-center py-4 text-muted-foreground",children:l?"Arama kriterlerine uygun çalışan bulunamadı":"Henüz çalışan eklenmemiş"}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Ad Soyad"}),i.jsx(M5,{children:"Mevki"}),i.jsx(M5,{children:"Departman"}),i.jsx(M5,{children:"Telefon"}),i.jsx(M5,{children:"E-posta"}),i.jsx(M5,{children:"Maaş"}),i.jsx(M5,{children:"İşe Giriş"}),i.jsx(M5,{children:"Durum"}),i.jsx(M5,{className:"text-right",children:"İşlemler"})]})}),i.jsx(E5,{children:c.map((a=>{var n,l,o;return i.jsxs(D5,{children:[i.jsxs(z5,{className:"font-medium",children:[a.first_name," ",a.last_name]}),i.jsx(z5,{children:(null==(n=a.position)?void 0:n.name)||"-"}),i.jsx(z5,{children:a.department||"-"}),i.jsx(z5,{children:a.phone||"-"}),i.jsx(z5,{children:a.email||"-"}),i.jsx(z5,{children:(o=a.salary,o?new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(o):"-")}),i.jsx(z5,{children:(l=a.hire_date,l?new Date(l).toLocaleDateString("tr-TR"):"-")}),i.jsx(z5,{children:i.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium "+(a.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:a.is_active?"Aktif":"Pasif"})}),i.jsxs(z5,{className:"text-right",children:[i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>e?e(a):r(`/admin/employees/${a.id}`),children:i.jsx(Vr,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>t?t(a):r(`/admin/employees/${a.id}/edit`),children:i.jsx(Sa,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>(async e=>{if(confirm("Bu çalışanı silmek istediğinizden emin misiniz?"))try{await s(e)}catch(t){}})(a.id),children:i.jsx(en,{className:"h-4 w-4"})})]})]},a.id)}))})]})})]})]})},Kte=e=>{const[t,r]=ze.useState([]),[a,n]=ze.useState(!0);ze.useEffect((()=>{e&&s()}),[e]);const s=async()=>{try{n(!0);let t=Wl.from("employee_notes").select("*");e&&(t=t.eq("employee_id",e));const{data:a,error:s}=await t.order("created_at",{ascending:!1});if(s)throw s;r(a||[])}catch(t){rt({title:"Hata",description:"Notlar yüklenemedi.",variant:"destructive"})}finally{n(!1)}};return{notes:t,loading:a,fetchNotes:s,createNote:async e=>{try{const{data:a,error:n}=await Wl.from("employee_notes").insert([e]).select().single();if(n)throw n;return r([a,...t]),a}catch(a){throw rt({title:"Hata",description:"Not oluşturulamadı.",variant:"destructive"}),a}},updateNote:async(e,a)=>{try{const{data:n,error:s}=await Wl.from("employee_notes").update(a).eq("id",e).select().single();if(s)throw s;return r(t.map((t=>t.id===e?n:t))),n}catch(n){throw rt({title:"Hata",description:"Not güncellenemedi.",variant:"destructive"}),n}},deleteNote:async e=>{try{const{error:a}=await Wl.from("employee_notes").delete().eq("id",e);if(a)throw a;r(t.filter((t=>t.id!==e)))}catch(a){throw rt({title:"Hata",description:"Not silinemedi.",variant:"destructive"}),a}}}},Ute=e=>{const[t,r]=ze.useState([]),[a,n]=ze.useState(!0);ze.useEffect((()=>{e&&s()}),[e]);const s=async()=>{try{n(!0);let t=Wl.from("employee_leaves").select("*");e&&(t=t.eq("employee_id",e));const{data:a,error:s}=await t.order("start_date",{ascending:!1});if(s)throw s;r(a||[])}catch(t){rt({title:"Hata",description:"İzin kayıtları yüklenemedi.",variant:"destructive"})}finally{n(!1)}};return{leaves:t,loading:a,fetchLeaves:s,createLeave:async e=>{try{const{data:a,error:n}=await Wl.from("employee_leaves").insert([e]).select().single();if(n)throw n;return r([a,...t]),a}catch(a){throw rt({title:"Hata",description:"İzin kaydı oluşturulamadı.",variant:"destructive"}),a}},updateLeave:async(e,a)=>{try{const{data:n,error:s}=await Wl.from("employee_leaves").update(a).eq("id",e).select().single();if(s)throw s;return r(t.map((t=>t.id===e?n:t))),n}catch(n){throw rt({title:"Hata",description:"İzin kaydı güncellenemedi.",variant:"destructive"}),n}},deleteLeave:async e=>{try{const{error:a}=await Wl.from("employee_leaves").delete().eq("id",e);if(a)throw a;r(t.filter((t=>t.id!==e)))}catch(a){throw rt({title:"Hata",description:"İzin kaydı silinemedi.",variant:"destructive"}),a}}}},Hte=()=>{const e=xl(),{user:t}=Jl(),{employees:r,loading:a}=qte(),[n,s]=ze.useState(""),[l,o]=ze.useState(null),[c,d]=ze.useState(!1),[u,m]=ze.useState({title:"",content:"",note_type:"genel",is_confidential:!1}),h=r.filter((e=>{var t;return`${e.first_name} ${e.last_name} ${null==(t=e.position)?void 0:t.name}`.toLowerCase().includes(n.toLowerCase())}));return a?i.jsx("div",{className:"text-center py-8",children:"Yükleniyor..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),i.jsx(co,{placeholder:"Çalışan ara...",value:n,onChange:e=>s(e.target.value),className:"pl-10"})]}),i.jsxs(oo,{onClick:()=>e("/admin/employees/new"),children:[i.jsx(Pa,{className:"mr-2 h-4 w-4"}),"Yeni Çalışan"]})]}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:h.map((t=>i.jsx(Yte,{employee:t,onViewDetails:()=>e(`/admin/employees/${t.id}`),onAddNote:()=>{o(t),d(!0)}},t.id)))}),0===h.length&&i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n?"Aradığınız kriterlere uygun çalışan bulunamadı.":"Henüz çalışan bulunmuyor."}),i.jsx(sd,{open:c,onOpenChange:d,children:i.jsxs(cd,{className:"sm:max-w-[500px]",children:[i.jsxs(dd,{children:[i.jsx(md,{children:"Not Ekle"}),i.jsxs(hd,{children:[null==l?void 0:l.first_name," ",null==l?void 0:l.last_name," için not ekleyin."]})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Başlık"}),i.jsx(co,{value:u.title,onChange:e=>m({...u,title:e.target.value}),placeholder:"Not başlığı..."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Not Türü"}),i.jsxs(eO,{value:u.note_type,onValueChange:e=>m({...u,note_type:e}),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"genel",children:"Genel"}),i.jsx(iO,{value:"performans",children:"Performans"}),i.jsx(iO,{value:"disiplin",children:"Disiplin"}),i.jsx(iO,{value:"egitim",children:"Eğitim"}),i.jsx(iO,{value:"saglik",children:"Sağlık"}),i.jsx(iO,{value:"odul",children:"Ödül"}),i.jsx(iO,{value:"uyari",children:"Uyarı"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"İçerik"}),i.jsx(v6,{value:u.content,onChange:e=>m({...u,content:e.target.value}),placeholder:"Not içeriği...",rows:4})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(D6,{id:"confidential",checked:u.is_confidential,onCheckedChange:e=>m({...u,is_confidential:!!e})}),i.jsx("label",{htmlFor:"confidential",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Gizli not"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(oo,{variant:"outline",onClick:()=>d(!1),children:"İptal"}),i.jsx(oo,{onClick:async()=>{if(l&&u.title&&u.content)try{const{error:e}=await Wl.from("employee_notes").insert([{employee_id:l.id,title:u.title,content:u.content,note_type:u.note_type,is_confidential:u.is_confidential,created_by:(null==t?void 0:t.id)||""}]);if(e)throw e;d(!1),m({title:"",content:"",note_type:"genel",is_confidential:!1}),rt({title:"Başarılı",description:"Not eklendi."})}catch(e){rt({title:"Hata",description:"Not eklenirken hata oluştu.",variant:"destructive"})}else rt({title:"Hata",description:"Lütfen tüm alanları doldurunuz.",variant:"destructive"})},children:"Kaydet"})]})]})})]})},Yte=({employee:e,onViewDetails:t,onAddNote:r})=>{var a;const{notes:n,loading:s}=Kte(e.id),{leaves:l,loading:o}=Ute(e.id),c=n.slice(0,2),d=l.filter((e=>"beklemede"===e.status)),u=l.filter((e=>"onaylandi"===e.status)),m={performans:"bg-blue-100 text-blue-800",disiplin:"bg-red-100 text-red-800",egitim:"bg-purple-100 text-purple-800",saglik:"bg-green-100 text-green-800",genel:"bg-gray-100 text-gray-800",odul:"bg-yellow-100 text-yellow-800",uyari:"bg-orange-100 text-orange-800"};return i.jsxs(ro,{className:"hover:shadow-md transition-shadow",children:[i.jsxs(ao,{className:"pb-3",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Jc,{children:i.jsx(ed,{className:"bg-primary text-primary-foreground",children:(h=e.first_name,p=e.last_name,`${h.charAt(0)}${p.charAt(0)}`.toUpperCase())})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-lg",children:[e.first_name," ",e.last_name]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(a=e.position)?void 0:a.name)||"Pozisyon belirtilmemiş"})]})]}),i.jsxs(td,{children:[i.jsx(rd,{asChild:!0,children:i.jsx(oo,{variant:"ghost",size:"icon",children:i.jsx($r,{className:"h-4 w-4"})})}),i.jsxs(ad,{align:"end",children:[i.jsxs(nd,{onClick:t,children:[i.jsx(Vr,{className:"mr-2 h-4 w-4"}),"Detay Görüntüle"]}),i.jsxs(nd,{onClick:r,children:[i.jsx(Wr,{className:"mr-2 h-4 w-4"}),"Not Ekle"]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Co,{variant:e.is_active?"default":"secondary",className:"text-xs",children:e.is_active?"Aktif":"Pasif"}),e.department&&i.jsx(Co,{variant:"outline",className:"text-xs",children:e.department})]})]}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(pr,{className:"h-4 w-4"}),"İzin Durumu"]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[d.length>0&&i.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[i.jsx(zr,{className:"h-3 w-3"}),i.jsxs("span",{children:[d.length," bekliyor"]})]}),u.length>0&&i.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[i.jsx(Or,{className:"h-3 w-3"}),i.jsxs("span",{children:[u.length," onaylı"]})]}),0===d.length&&0===u.length&&i.jsx("span",{className:"text-muted-foreground",children:"İzin yok"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Wr,{className:"h-4 w-4"}),"Son Notlar"]}),s?i.jsx("div",{className:"text-xs text-muted-foreground",children:"Yükleniyor..."}):c.length>0?i.jsx("div",{className:"space-y-2",children:c.map((e=>{return i.jsxs("div",{className:"p-2 bg-muted rounded-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-xs font-medium truncate",children:e.title}),i.jsx(Co,{className:`text-xs ${m[e.note_type]}`,children:e.note_type})]}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.content}),e.created_at&&i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:(t=e.created_at,XC(new Date(t),"dd MMM",{locale:ZT}))})]},e.id);var t}))}):i.jsx("div",{className:"text-xs text-muted-foreground",children:"Henüz not yok"})]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:t,className:"w-full",children:[i.jsx(Vr,{className:"mr-2 h-4 w-4"}),"Detay Görüntüle"]})]})]});var h,p},Vte=()=>i.jsxs("div",{className:"container mx-auto py-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Personel Yönetimi"}),i.jsx("p",{className:"text-muted-foreground",children:"Çalışanları yönetin, izinlerini takip edin ve notları görüntüleyin."})]}),i.jsxs(Yo,{defaultValue:"employees",className:"space-y-4",children:[i.jsxs(Vo,{children:[i.jsxs(Go,{value:"employees",className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4"}),"Çalışanlar"]}),i.jsxs(Go,{value:"overview",className:"flex items-center gap-2",children:[i.jsx(la,{className:"h-4 w-4"}),"Çalışan Listesi"]})]}),i.jsx(Wo,{value:"employees",children:i.jsx($te,{})}),i.jsx(Wo,{value:"overview",children:i.jsx(Hte,{})})]})]});var Gte=function(){return Gte=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Gte.apply(this,arguments)};function Wte(e,t,r){for(var a,n=0,s=t.length;n<s;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function Qte(e){return"multiple"===e.mode}function Xte(e){return"range"===e.mode}function Zte(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var Jte={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var ere=Object.freeze({__proto__:null,formatCaption:function(e,t){return XC(e,"LLLL y",t)},formatDay:function(e,t){return XC(e,"d",t)},formatMonthCaption:function(e,t){return XC(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return XC(e,"cccccc",t)},formatYearCaption:function(e,t){return XC(e,"yyyy",t)}}),tre=Object.freeze({__proto__:null,labelDay:function(e,t,r){return XC(e,"do MMMM (EEEE)",r)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return XC(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});var rre=ze.createContext(void 0);function are(e){var t,r,a=e.initialProps,n={captionLayout:"buttons",classNames:Jte,formatters:ere,labels:tre,locale:NC,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},s=function(e){var t=e.fromYear,r=e.toYear,a=e.fromMonth,n=e.toMonth,s=e.fromDate,i=e.toDate;return a?s=hC(a):t&&(s=new Date(t,0,1)),n?i=dC(n):r&&(i=new Date(r,11,31)),{fromDate:s?ZS(s):void 0,toDate:i?ZS(i):void 0}}(a),l=s.fromDate,o=s.toDate,c=null!==(t=a.captionLayout)&&void 0!==t?t:n.captionLayout;"buttons"===c||l&&o||(c="buttons"),(Zte(a)||Qte(a)||Xte(a))&&(r=a.onSelect);var d=Gte(Gte(Gte({},n),a),{captionLayout:c,classNames:Gte(Gte({},n.classNames),a.classNames),components:Gte({},a.components),formatters:Gte(Gte({},n.formatters),a.formatters),fromDate:l,labels:Gte(Gte({},n.labels),a.labels),mode:a.mode||n.mode,modifiers:Gte(Gte({},n.modifiers),a.modifiers),modifiersClassNames:Gte(Gte({},n.modifiersClassNames),a.modifiersClassNames),onSelect:r,styles:Gte(Gte({},n.styles),a.styles),toDate:o});return i.jsx(rre.Provider,{value:d,children:e.children})}function nre(){var e=ze.useContext(rre);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function sre(e){var t=nre(),r=t.locale,a=t.classNames,n=t.styles,s=t.formatters.formatCaption;return i.jsx("div",{className:a.caption_label,style:n.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:r})})}function ire(e){return i.jsx("svg",Gte({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function lre(e){var t,r,a=e.onChange,n=e.value,s=e.children,l=e.caption,o=e.className,c=e.style,d=nre(),u=null!==(r=null===(t=d.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==r?r:ire;return i.jsxs("div",{className:o,style:c,children:[i.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),i.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:n,onChange:a,children:s}),i.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[l,i.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function ore(e){var t,r=nre(),a=r.fromDate,n=r.toDate,s=r.styles,l=r.locale,o=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!a)return i.jsx(i.Fragment,{});if(!n)return i.jsx(i.Fragment,{});var m=[];if(function(e,t){const r=BS(e),a=BS(t);return r.getFullYear()===a.getFullYear()}(a,n))for(var h=hC(a),p=a.getMonth();p<=n.getMonth();p++)m.push(pT(h,p));else for(h=hC(new Date),p=0;p<=11;p++)m.push(pT(h,p));var x=null!==(t=null==d?void 0:d.Dropdown)&&void 0!==t?t:lre;return i.jsx(x,{name:"months","aria-label":u(),className:c.dropdown_month,style:s.dropdown_month,onChange:function(t){var r=Number(t.target.value),a=pT(hC(e.displayMonth),r);e.onChange(a)},value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:l}),children:m.map((function(e){return i.jsx("option",{value:e.getMonth(),children:o(e,{locale:l})},e.getMonth())}))})}function cre(e){var t,r=e.displayMonth,a=nre(),n=a.fromDate,s=a.toDate,l=a.locale,o=a.styles,c=a.classNames,d=a.components,u=a.formatters.formatYearCaption,m=a.labels.labelYearDropdown,h=[];if(!n)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});for(var p=n.getFullYear(),x=s.getFullYear(),g=p;g<=x;g++)h.push(xT(pC(new Date),g));var f=null!==(t=null==d?void 0:d.Dropdown)&&void 0!==t?t:lre;return i.jsx(f,{name:"years","aria-label":m(),className:c.dropdown_year,style:o.dropdown_year,onChange:function(t){var a=xT(hC(r),Number(t.target.value));e.onChange(a)},value:r.getFullYear(),caption:u(r,{locale:l}),children:h.map((function(e){return i.jsx("option",{value:e.getFullYear(),children:u(e,{locale:l})},e.getFullYear())}))})}function dre(){var e=nre(),t=function(e){var t=e.month,r=e.defaultMonth,a=e.today,n=t||r||a||new Date,s=e.toDate,i=e.fromDate,l=e.numberOfMonths,o=void 0===l?1:l;return s&&iC(s,n)<0&&(n=$S(s,-1*(o-1))),i&&iC(n,i)<0&&(n=i),hC(n)}(e),r=function(e,t){var r=ze.useState(e),a=r[0];return[void 0===t?a:t,r[1]]}(t,e.month),a=r[0],n=r[1];return[a,function(t){var r;if(!e.disableNavigation){var a=hC(t);n(a),null===(r=e.onMonthChange)||void 0===r||r.call(e,a)}}]}var ure=ze.createContext(void 0);function mre(e){var t=nre(),r=dre(),a=r[0],n=r[1],s=function(e,t){for(var r=t.reverseMonths,a=t.numberOfMonths,n=hC(e),s=iC(hC($S(n,a)),n),i=[],l=0;l<s;l++){var o=$S(n,l);i.push(o)}return r&&(i=i.reverse()),i}(a,t),l=function(e,t){if(!t.disableNavigation){var r=t.toDate,a=t.pagedNavigation,n=t.numberOfMonths,s=void 0===n?1:n,i=a?s:1,l=hC(e);if(!r)return $S(l,i);if(!(iC(r,e)<s))return $S(l,i)}}(a,t),o=function(e,t){if(!t.disableNavigation){var r=t.fromDate,a=t.pagedNavigation,n=t.numberOfMonths,s=a?void 0===n?1:n:1,i=hC(e);if(!r)return $S(i,-s);if(!(iC(i,r)<=0))return $S(i,-s)}}(a,t),c=function(e){return s.some((function(t){return aT(e,t)}))},d={currentMonth:a,displayMonths:s,goToMonth:n,goToDate:function(e,r){c(e)||(r&&rT(e,r)?n($S(e,1+-1*t.numberOfMonths)):n(e))},previousMonth:o,nextMonth:l,isDateDisplayed:c};return i.jsx(ure.Provider,{value:d,children:e.children})}function hre(){var e=ze.useContext(ure);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function pre(e){var t,r=nre(),a=r.classNames,n=r.styles,s=r.components,l=hre().goToMonth,o=function(t){l($S(t,e.displayIndex?-e.displayIndex:0))},c=null!==(t=null==s?void 0:s.CaptionLabel)&&void 0!==t?t:sre,d=i.jsx(c,{id:e.id,displayMonth:e.displayMonth});return i.jsxs("div",{className:a.caption_dropdowns,style:n.caption_dropdowns,children:[i.jsx("div",{className:a.vhidden,children:d}),i.jsx(ore,{onChange:o,displayMonth:e.displayMonth}),i.jsx(cre,{onChange:o,displayMonth:e.displayMonth})]})}function xre(e){return i.jsx("svg",Gte({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function gre(e){return i.jsx("svg",Gte({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var fre=ze.forwardRef((function(e,t){var r=nre(),a=r.classNames,n=r.styles,s=[a.button_reset,a.button];e.className&&s.push(e.className);var l=s.join(" "),o=Gte(Gte({},n.button_reset),n.button);return e.style&&Object.assign(o,e.style),i.jsx("button",Gte({},e,{ref:t,type:"button",className:l,style:o}))}));function yre(e){var t,r,a=nre(),n=a.dir,s=a.locale,l=a.classNames,o=a.styles,c=a.labels,d=c.labelPrevious,u=c.labelNext,m=a.components;if(!e.nextMonth&&!e.previousMonth)return i.jsx(i.Fragment,{});var h=d(e.previousMonth,{locale:s}),p=[l.nav_button,l.nav_button_previous].join(" "),x=u(e.nextMonth,{locale:s}),g=[l.nav_button,l.nav_button_next].join(" "),f=null!==(t=null==m?void 0:m.IconRight)&&void 0!==t?t:gre,y=null!==(r=null==m?void 0:m.IconLeft)&&void 0!==r?r:xre;return i.jsxs("div",{className:l.nav,style:o.nav,children:[!e.hidePrevious&&i.jsx(fre,{name:"previous-month","aria-label":h,className:p,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===n?i.jsx(f,{className:l.nav_icon,style:o.nav_icon}):i.jsx(y,{className:l.nav_icon,style:o.nav_icon})}),!e.hideNext&&i.jsx(fre,{name:"next-month","aria-label":x,className:g,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===n?i.jsx(y,{className:l.nav_icon,style:o.nav_icon}):i.jsx(f,{className:l.nav_icon,style:o.nav_icon})})]})}function vre(e){var t=nre().numberOfMonths,r=hre(),a=r.previousMonth,n=r.nextMonth,s=r.goToMonth,l=r.displayMonths,o=l.findIndex((function(t){return aT(e.displayMonth,t)})),c=0===o,d=o===l.length-1,u=t>1&&(c||!d),m=t>1&&(d||!c);return i.jsx(yre,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:m,nextMonth:n,previousMonth:a,onPreviousClick:function(){a&&s(a)},onNextClick:function(){n&&s(n)}})}function bre(e){var t,r,a=nre(),n=a.classNames,s=a.disableNavigation,l=a.styles,o=a.captionLayout,c=a.components,d=null!==(t=null==c?void 0:c.CaptionLabel)&&void 0!==t?t:sre;return r=s?i.jsx(d,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===o?i.jsx(pre,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===o?i.jsxs(i.Fragment,{children:[i.jsx(pre,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),i.jsx(vre,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):i.jsxs(i.Fragment,{children:[i.jsx(d,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(vre,{displayMonth:e.displayMonth,id:e.id})]}),i.jsx("div",{className:n.caption,style:l.caption,children:r})}function jre(e){var t=nre(),r=t.footer,a=t.styles,n=t.classNames.tfoot;return r?i.jsx("tfoot",{className:n,style:a.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:r})})}):i.jsx(i.Fragment,{})}function kre(){var e=nre(),t=e.classNames,r=e.styles,a=e.showWeekNumber,n=e.locale,s=e.weekStartsOn,l=e.ISOWeek,o=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=function(e,t,r){for(var a=r?QS(new Date):WS(new Date,{locale:e,weekStartsOn:t}),n=[],s=0;s<7;s++){var i=qS(a,s);n.push(i)}return n}(n,s,l);return i.jsxs("tr",{style:r.head_row,className:t.head_row,children:[a&&i.jsx("td",{style:r.head_cell,className:t.head_cell}),d.map((function(e,a){return i.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(e,{locale:n}),children:o(e,{locale:n})},a)}))]})}function wre(){var e,t=nre(),r=t.classNames,a=t.styles,n=t.components,s=null!==(e=null==n?void 0:n.HeadRow)&&void 0!==e?e:kre;return i.jsx("thead",{style:a.head,className:r.head,children:i.jsx(s,{})})}function Nre(e){var t=nre(),r=t.locale,a=t.formatters.formatDay;return i.jsx(i.Fragment,{children:a(e.date,{locale:r})})}var _re=ze.createContext(void 0);function Sre(e){if(!Qte(e.initialProps)){return i.jsx(_re.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:e.children})}return i.jsx(Cre,{initialProps:e.initialProps,children:e.children})}function Cre(e){var t=e.initialProps,r=e.children,a=t.selected,n=t.min,s=t.max,l={disabled:[]};a&&l.disabled.push((function(e){var t=s&&a.length>s-1,r=a.some((function(t){return nC(t,e)}));return Boolean(t&&!r)}));var o={selected:a,onDayClick:function(e,r,i){var l,o;if((null===(l=t.onDayClick)||void 0===l||l.call(t,e,r,i),!Boolean(r.selected&&n&&(null==a?void 0:a.length)===n))&&!Boolean(!r.selected&&s&&(null==a?void 0:a.length)===s)){var c=a?Wte([],a):[];if(r.selected){var d=c.findIndex((function(t){return nC(e,t)}));c.splice(d,1)}else c.push(e);null===(o=t.onSelect)||void 0===o||o.call(t,c,e,r,i)}},modifiers:l};return i.jsx(_re.Provider,{value:o,children:r})}function Tre(){var e=ze.useContext(_re);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var Ore,Pre,Are=ze.createContext(void 0);function Ere(e){if(!Xte(e.initialProps)){return i.jsx(Are.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:e.children})}return i.jsx(Dre,{initialProps:e.initialProps,children:e.children})}function Dre(e){var t=e.initialProps,r=e.children,a=t.selected,n=a||{},s=n.from,l=n.to,o=t.min,c=t.max,d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],l?(d.range_end=[l],nC(s,l)||(d.range_middle=[{after:s,before:l}])):d.range_end=[s]):l&&(d.range_start=[l],d.range_end=[l]),o&&(s&&!l&&d.disabled.push({after:nT(s,o-1),before:qS(s,o-1)}),s&&l&&d.disabled.push({after:s,before:qS(s,o-1)}),!s&&l&&d.disabled.push({after:nT(l,o-1),before:qS(l,o-1)})),c){if(s&&!l&&(d.disabled.push({before:qS(s,1-c)}),d.disabled.push({after:qS(s,c-1)})),s&&l){var u=c-(eC(l,s)+1);d.disabled.push({before:nT(s,u)}),d.disabled.push({after:qS(l,u)})}!s&&l&&(d.disabled.push({before:qS(l,1-c)}),d.disabled.push({after:qS(l,c-1)}))}return i.jsx(Are.Provider,{value:{selected:a,onDayClick:function(e,r,n){var s,i;null===(s=t.onDayClick)||void 0===s||s.call(t,e,r,n);var l=function(e,t){var r=t||{},a=r.from,n=r.to;if(a&&n){if(nC(n,e)&&nC(a,e))return;if(nC(n,e))return{from:n,to:void 0};if(nC(a,e))return;return tT(a,e)?{from:e,to:n}:{from:a,to:e}}return n?tT(e,n)?{from:n,to:e}:{from:e,to:n}:a?rT(e,a)?{from:e,to:a}:{from:a,to:e}:{from:e,to:void 0}}(e,a);null===(i=t.onSelect)||void 0===i||i.call(t,l,e,r,n)},modifiers:d},children:r})}function Mre(){var e=ze.useContext(Are);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function zre(e){return Array.isArray(e)?Wte([],e):void 0!==e?[e]:[]}(Pre=Ore||(Ore={})).Outside="outside",Pre.Disabled="disabled",Pre.Selected="selected",Pre.Hidden="hidden",Pre.Today="today",Pre.RangeStart="range_start",Pre.RangeEnd="range_end",Pre.RangeMiddle="range_middle";var Rre=Ore.Selected,Ire=Ore.Disabled,Fre=Ore.Hidden,Bre=Ore.Today,Lre=Ore.RangeEnd,qre=Ore.RangeMiddle,$re=Ore.RangeStart,Kre=Ore.Outside;var Ure=ze.createContext(void 0);function Hre(e){var t=nre(),r=function(e,t,r){var a,n=((a={})[Rre]=zre(e.selected),a[Ire]=zre(e.disabled),a[Fre]=zre(e.hidden),a[Bre]=[e.today],a[Lre]=[],a[qre]=[],a[$re]=[],a[Kre]=[],a);return e.fromDate&&n[Ire].push({before:e.fromDate}),e.toDate&&n[Ire].push({after:e.toDate}),Qte(e)?n[Ire]=n[Ire].concat(t.modifiers[Ire]):Xte(e)&&(n[Ire]=n[Ire].concat(r.modifiers[Ire]),n[$re]=r.modifiers[$re],n[qre]=r.modifiers[qre],n[Lre]=r.modifiers[Lre]),n}(t,Tre(),Mre()),a=function(e){var t={};return Object.entries(e).forEach((function(e){var r=e[0],a=e[1];t[r]=zre(a)})),t}(t.modifiers),n=Gte(Gte({},r),a);return i.jsx(Ure.Provider,{value:n,children:e.children})}function Yre(){var e=ze.useContext(Ure);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Vre(e,t){return t.some((function(t){if("boolean"==typeof t)return t;if(sC(t))return nC(e,t);var r,a,n,s,i;if(function(e){return Array.isArray(e)&&e.every(sC)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"==typeof e&&"from"in e)}(t))return r=e,s=(a=t).from,i=a.to,s&&i?(eC(i,s)<0&&(s=(n=[i,s])[0],i=n[1]),eC(r,s)>=0&&eC(i,r)>=0):i?nC(i,r):!!s&&nC(s,r);if(function(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}(t)){var l=eC(t.before,e)>0,o=eC(t.after,e)<0;return tT(t.before,t.after)?o&&l:l||o}return function(e){return Boolean(e&&"object"==typeof e&&"after"in e)}(t)?eC(e,t.after)>0:function(e){return Boolean(e&&"object"==typeof e&&"before"in e)}(t)?eC(t.before,e)>0:"function"==typeof t&&t(e)}))}function Gre(e,t,r){var a=Object.keys(t).reduce((function(r,a){var n=t[a];return Vre(e,n)&&r.push(a),r}),[]),n={};return a.forEach((function(e){return n[e]=!0})),r&&!aT(e,r)&&(n.outside=!0),n}function Wre(e,t){var r=t.moveBy,a=t.direction,n=t.context,s=t.modifiers,i=t.retry,l=void 0===i?{count:0,lastFocused:e}:i,o=n.weekStartsOn,c=n.fromDate,d=n.toDate,u=n.locale,m={day:qS,week:tC,month:$S,year:rC,startOfWeek:function(e){return n.ISOWeek?QS(e):WS(e,{locale:u,weekStartsOn:o})},endOfWeek:function(e){return n.ISOWeek?gC(e):xC(e,{locale:u,weekStartsOn:o})}}[r](e,"after"===a?1:-1);"before"===a&&c?m=function(e){let t;return e.forEach((function(e){const r=BS(e);(void 0===t||t<r||isNaN(Number(r)))&&(t=r)})),t||new Date(NaN)}([c,m]):"after"===a&&d&&(m=function(e){let t;return e.forEach((e=>{const r=BS(e);(!t||t>r||isNaN(+r))&&(t=r)})),t||new Date(NaN)}([d,m]));var h=!0;if(s){var p=Gre(m,s);h=!p.disabled&&!p.hidden}return h?m:l.count>365?l.lastFocused:Wre(m,{moveBy:r,direction:a,context:n,modifiers:s,retry:Gte(Gte({},l),{count:l.count+1})})}var Qre=ze.createContext(void 0);function Xre(e){var t=hre(),r=Yre(),a=ze.useState(),n=a[0],s=a[1],l=ze.useState(),o=l[0],c=l[1],d=function(e,t){for(var r,a,n=hC(e[0]),s=dC(e[e.length-1]),i=n;i<=s;){var l=Gre(i,t);if(l.disabled||l.hidden)i=qS(i,1);else{if(l.selected)return i;l.today&&!a&&(a=i),r||(r=i),i=qS(i,1)}}return a||r}(t.displayMonths,r),u=(null!=n?n:o&&t.isDateDisplayed(o))?o:d,m=function(e){s(e)},h=nre(),p=function(e,a){if(n){var s=Wre(n,{moveBy:e,direction:a,context:h,modifiers:r});nC(n,s)||(t.goToDate(s,n),m(s))}},x={focusedDay:n,focusTarget:u,blur:function(){c(n),s(void 0)},focus:m,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return i.jsx(Qre.Provider,{value:x,children:e.children})}function Zre(){var e=ze.useContext(Qre);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var Jre=ze.createContext(void 0);function eae(e){if(!Zte(e.initialProps)){return i.jsx(Jre.Provider,{value:{selected:void 0},children:e.children})}return i.jsx(tae,{initialProps:e.initialProps,children:e.children})}function tae(e){var t=e.initialProps,r=e.children,a={selected:t.selected,onDayClick:function(e,r,a){var n,s,i;null===(n=t.onDayClick)||void 0===n||n.call(t,e,r,a),!r.selected||t.required?null===(i=t.onSelect)||void 0===i||i.call(t,e,e,r,a):null===(s=t.onSelect)||void 0===s||s.call(t,void 0,e,r,a)}};return i.jsx(Jre.Provider,{value:a,children:r})}function rae(){var e=ze.useContext(Jre);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function aae(e,t){var r=[e.classNames.day];return Object.keys(t).forEach((function(t){var a=e.modifiersClassNames[t];if(a)r.push(a);else if(function(e){return Object.values(Ore).includes(e)}(t)){var n=e.classNames["day_".concat(t)];n&&r.push(n)}})),r}function nae(e,t,r){var a,n,s,l=nre(),o=Zre(),c=function(e,t){return Gre(e,Yre(),t)}(e,t),d=function(e,t){var r=nre(),a=rae(),n=Tre(),s=Mre(),i=Zre(),l=i.focusDayAfter,o=i.focusDayBefore,c=i.focusWeekAfter,d=i.focusWeekBefore,u=i.blur,m=i.focus,h=i.focusMonthBefore,p=i.focusMonthAfter,x=i.focusYearBefore,g=i.focusYearAfter,f=i.focusStartOfWeek,y=i.focusEndOfWeek;return{onClick:function(i){var l,o,c,d;Zte(r)?null===(l=a.onDayClick)||void 0===l||l.call(a,e,t,i):Qte(r)?null===(o=n.onDayClick)||void 0===o||o.call(n,e,t,i):Xte(r)?null===(c=s.onDayClick)||void 0===c||c.call(s,e,t,i):null===(d=r.onDayClick)||void 0===d||d.call(r,e,t,i)},onFocus:function(a){var n;m(e),null===(n=r.onDayFocus)||void 0===n||n.call(r,e,t,a)},onBlur:function(a){var n;u(),null===(n=r.onDayBlur)||void 0===n||n.call(r,e,t,a)},onKeyDown:function(a){var n;switch(a.key){case"ArrowLeft":a.preventDefault(),a.stopPropagation(),"rtl"===r.dir?l():o();break;case"ArrowRight":a.preventDefault(),a.stopPropagation(),"rtl"===r.dir?o():l();break;case"ArrowDown":a.preventDefault(),a.stopPropagation(),c();break;case"ArrowUp":a.preventDefault(),a.stopPropagation(),d();break;case"PageUp":a.preventDefault(),a.stopPropagation(),a.shiftKey?x():h();break;case"PageDown":a.preventDefault(),a.stopPropagation(),a.shiftKey?g():p();break;case"Home":a.preventDefault(),a.stopPropagation(),f();break;case"End":a.preventDefault(),a.stopPropagation(),y()}null===(n=r.onDayKeyDown)||void 0===n||n.call(r,e,t,a)},onKeyUp:function(a){var n;null===(n=r.onDayKeyUp)||void 0===n||n.call(r,e,t,a)},onMouseEnter:function(a){var n;null===(n=r.onDayMouseEnter)||void 0===n||n.call(r,e,t,a)},onMouseLeave:function(a){var n;null===(n=r.onDayMouseLeave)||void 0===n||n.call(r,e,t,a)},onPointerEnter:function(a){var n;null===(n=r.onDayPointerEnter)||void 0===n||n.call(r,e,t,a)},onPointerLeave:function(a){var n;null===(n=r.onDayPointerLeave)||void 0===n||n.call(r,e,t,a)},onTouchCancel:function(a){var n;null===(n=r.onDayTouchCancel)||void 0===n||n.call(r,e,t,a)},onTouchEnd:function(a){var n;null===(n=r.onDayTouchEnd)||void 0===n||n.call(r,e,t,a)},onTouchMove:function(a){var n;null===(n=r.onDayTouchMove)||void 0===n||n.call(r,e,t,a)},onTouchStart:function(a){var n;null===(n=r.onDayTouchStart)||void 0===n||n.call(r,e,t,a)}}}(e,c),u=function(){var e=nre(),t=rae(),r=Tre(),a=Mre();return Zte(e)?t.selected:Qte(e)?r.selected:Xte(e)?a.selected:void 0}(),m=Boolean(l.onDayClick||"default"!==l.mode);ze.useEffect((function(){var t;c.outside||o.focusedDay&&m&&nC(o.focusedDay,e)&&(null===(t=r.current)||void 0===t||t.focus())}),[o.focusedDay,e,r,m,c.outside]);var h=aae(l,c).join(" "),p=function(e,t){var r=Gte({},e.styles.day);return Object.keys(t).forEach((function(t){var a;r=Gte(Gte({},r),null===(a=e.modifiersStyles)||void 0===a?void 0:a[t])})),r}(l,c),x=Boolean(c.outside&&!l.showOutsideDays||c.hidden),g=null!==(s=null===(n=l.components)||void 0===n?void 0:n.DayContent)&&void 0!==s?s:Nre,f={style:p,className:h,children:i.jsx(g,{date:e,displayMonth:t,activeModifiers:c}),role:"gridcell"},y=o.focusTarget&&nC(o.focusTarget,e)&&!c.outside,v=o.focusedDay&&nC(o.focusedDay,e),b=Gte(Gte(Gte({},f),((a={disabled:c.disabled,role:"gridcell"})["aria-selected"]=c.selected,a.tabIndex=v||y?0:-1,a)),d);return{isButton:m,isHidden:x,activeModifiers:c,selectedDays:u,buttonProps:b,divProps:f}}function sae(e){var t=ze.useRef(null),r=nae(e.date,e.displayMonth,t);return r.isHidden?i.jsx("div",{role:"gridcell"}):r.isButton?i.jsx(fre,Gte({name:"day",ref:t},r.buttonProps)):i.jsx("div",Gte({},r.divProps))}function iae(e){var t=e.number,r=e.dates,a=nre(),n=a.onWeekNumberClick,s=a.styles,l=a.classNames,o=a.locale,c=a.labels.labelWeekNumber,d=(0,a.formatters.formatWeekNumber)(Number(t),{locale:o});if(!n)return i.jsx("span",{className:l.weeknumber,style:s.weeknumber,children:d});var u=c(Number(t),{locale:o});return i.jsx(fre,{name:"week-number","aria-label":u,className:l.weeknumber,style:s.weeknumber,onClick:function(e){n(t,r,e)},children:d})}function lae(e){var t,r,a,n=nre(),s=n.styles,l=n.classNames,o=n.showWeekNumber,c=n.components,d=null!==(t=null==c?void 0:c.Day)&&void 0!==t?t:sae,u=null!==(r=null==c?void 0:c.WeekNumber)&&void 0!==r?r:iae;return o&&(a=i.jsx("td",{className:l.cell,style:s.cell,children:i.jsx(u,{number:e.weekNumber,dates:e.dates})})),i.jsxs("tr",{className:l.row,style:s.row,children:[a,e.dates.map((function(t){return i.jsx("td",{className:l.cell,style:s.cell,role:"presentation",children:i.jsx(d,{displayMonth:e.displayMonth,date:t})},function(e){return Math.trunc(+BS(e)/1e3)}(t))}))]})}function oae(e,t,r){for(var a=(null==r?void 0:r.ISOWeek)?gC(t):xC(t,r),n=(null==r?void 0:r.ISOWeek)?QS(e):WS(e,r),s=eC(a,n),i=[],l=0;l<=s;l++)i.push(qS(n,l));return i.reduce((function(e,t){var a=(null==r?void 0:r.ISOWeek)?_C(t):CC(t,r),n=e.find((function(e){return e.weekNumber===a}));return n?(n.dates.push(t),e):(e.push({weekNumber:a,dates:[t]}),e)}),[])}function cae(e){var t,r,a,n=nre(),s=n.locale,l=n.classNames,o=n.styles,c=n.hideHead,d=n.fixedWeeks,u=n.components,m=n.weekStartsOn,h=n.firstWeekContainsDate,p=n.ISOWeek,x=function(e,t){var r=oae(hC(e),dC(e),t);if(null==t?void 0:t.useFixedWeeks){var a=eT(e,t);if(a<6){var n=r[r.length-1],s=n.dates[n.dates.length-1],i=tC(s,6-a),l=oae(tC(s,1),i,t);r.push.apply(r,l)}}return r}(e.displayMonth,{useFixedWeeks:Boolean(d),ISOWeek:p,locale:s,weekStartsOn:m,firstWeekContainsDate:h}),g=null!==(t=null==u?void 0:u.Head)&&void 0!==t?t:wre,f=null!==(r=null==u?void 0:u.Row)&&void 0!==r?r:lae,y=null!==(a=null==u?void 0:u.Footer)&&void 0!==a?a:jre;return i.jsxs("table",{id:e.id,className:l.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&i.jsx(g,{}),i.jsx("tbody",{className:l.tbody,style:o.tbody,children:x.map((function(t){return i.jsx(f,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)}))}),i.jsx(y,{displayMonth:e.displayMonth})]})}var dae="undefined"!=typeof window&&window.document&&window.document.createElement?ze.useLayoutEffect:ze.useEffect,uae=!1,mae=0;function hae(){return"react-day-picker-".concat(++mae)}function pae(e){var t,r,a=nre(),n=a.dir,s=a.classNames,l=a.styles,o=a.components,c=hre().displayMonths,d=function(e){var t,r=null!=e?e:uae?hae():null,a=ze.useState(r),n=a[0],s=a[1];return dae((function(){null===n&&s(hae())}),[]),ze.useEffect((function(){!1===uae&&(uae=!0)}),[]),null!==(t=null!=e?e:n)&&void 0!==t?t:void 0}(a.id?"".concat(a.id,"-").concat(e.displayIndex):void 0),u=a.id?"".concat(a.id,"-grid-").concat(e.displayIndex):void 0,m=[s.month],h=l.month,p=0===e.displayIndex,x=e.displayIndex===c.length-1,g=!p&&!x;"rtl"===n&&(x=(t=[p,x])[0],p=t[1]),p&&(m.push(s.caption_start),h=Gte(Gte({},h),l.caption_start)),x&&(m.push(s.caption_end),h=Gte(Gte({},h),l.caption_end)),g&&(m.push(s.caption_between),h=Gte(Gte({},h),l.caption_between));var f=null!==(r=null==o?void 0:o.Caption)&&void 0!==r?r:bre;return i.jsxs("div",{className:m.join(" "),style:h,children:[i.jsx(f,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(cae,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function xae(e){var t=nre(),r=t.classNames,a=t.styles;return i.jsx("div",{className:r.months,style:a.months,children:e.children})}function gae(e){var t,r,a=e.initialProps,n=nre(),s=Zre(),l=hre(),o=ze.useState(!1),c=o[0],d=o[1];ze.useEffect((function(){n.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),d(!0)))}),[n.initialFocus,c,s.focus,s.focusTarget,s]);var u=[n.classNames.root,n.className];n.numberOfMonths>1&&u.push(n.classNames.multiple_months),n.showWeekNumber&&u.push(n.classNames.with_weeknumber);var m=Gte(Gte({},n.styles.root),n.style),h=Object.keys(a).filter((function(e){return e.startsWith("data-")})).reduce((function(e,t){var r;return Gte(Gte({},e),((r={})[t]=a[t],r))}),{}),p=null!==(r=null===(t=a.components)||void 0===t?void 0:t.Months)&&void 0!==r?r:xae;return i.jsx("div",Gte({className:u.join(" "),style:m,dir:n.dir,id:n.id,nonce:a.nonce,title:a.title,lang:a.lang},h,{children:i.jsx(p,{children:l.displayMonths.map((function(e,t){return i.jsx(pae,{displayIndex:t,displayMonth:e},t)}))})}))}function fae(e){var t=e.children,r=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r}(e,["children"]);return i.jsx(are,{initialProps:r,children:i.jsx(mre,{children:i.jsx(eae,{initialProps:r,children:i.jsx(Sre,{initialProps:r,children:i.jsx(Ere,{initialProps:r,children:i.jsx(Hre,{children:i.jsx(Xre,{children:t})})})})})})})}function yae(e){return i.jsx(fae,Gte({},e,{children:i.jsx(gae,{initialProps:e})}))}function vae({className:e,classNames:t,showOutsideDays:r=!0,...a}){return i.jsx(yae,{showOutsideDays:r,className:xs("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:xs(lo({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:xs(lo({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>i.jsx(kr,{className:"h-4 w-4"}),IconRight:({...e})=>i.jsx(wr,{className:"h-4 w-4"})},...a})}vae.displayName="Calendar";const bae=({employee:e,onSuccess:t})=>{const r=xl(),{createEmployee:a,updateEmployee:n}=qte(),{positions:s}=Lte(),[l,o]=ze.useState(!1),[c,d]=ze.useState({first_name:"",last_name:"",position_id:"",phone:"",email:"",tc_kimlik:"",address:"",salary:"",hire_date:new Date,birth_date:null,department:"",is_active:!0,emergency_contact_name:"",emergency_contact_phone:"",bank_name:"",iban:"",account_holder:""});ze.useEffect((()=>{var t,r,a,n;e&&d({first_name:e.first_name,last_name:e.last_name,position_id:e.position_id||"",phone:e.phone||"",email:e.email||"",tc_kimlik:e.tc_kimlik||"",address:e.address||"",salary:(null==(t=e.salary)?void 0:t.toString())||"",hire_date:e.hire_date?new Date(e.hire_date):new Date,birth_date:e.birth_date?new Date(e.birth_date):null,department:e.department||"",is_active:e.is_active??!0,emergency_contact_name:e.emergency_contact_name||"",emergency_contact_phone:e.emergency_contact_phone||"",bank_name:(null==(r=e.bank_account_info)?void 0:r.bank_name)||"",iban:(null==(a=e.bank_account_info)?void 0:a.iban)||"",account_holder:(null==(n=e.bank_account_info)?void 0:n.account_holder)||""})}),[e]);return i.jsx("form",{onSubmit:async s=>{s.preventDefault(),o(!0);const i={first_name:c.first_name,last_name:c.last_name,position_id:c.position_id||null,phone:c.phone||null,email:c.email||null,tc_kimlik:c.tc_kimlik||null,address:c.address||null,salary:c.salary?parseFloat(c.salary):null,hire_date:XC(c.hire_date,"yyyy-MM-dd"),birth_date:c.birth_date?XC(c.birth_date,"yyyy-MM-dd"):null,department:c.department||null,is_active:c.is_active,emergency_contact_name:c.emergency_contact_name||null,emergency_contact_phone:c.emergency_contact_phone||null,bank_account_info:c.bank_name||c.iban||c.account_holder?{bank_name:c.bank_name||null,iban:c.iban||null,account_holder:c.account_holder||null}:null};try{e?await n(e.id,i):await a(i),t?t():r("/admin/employees")}catch(l){}finally{o(!1)}},children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Kişisel Bilgiler"})}),i.jsxs(io,{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"first_name",children:"Ad *"}),i.jsx(co,{id:"first_name",value:c.first_name,onChange:e=>d({...c,first_name:e.target.value}),required:!0})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"last_name",children:"Soyad *"}),i.jsx(co,{id:"last_name",value:c.last_name,onChange:e=>d({...c,last_name:e.target.value}),required:!0})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"tc_kimlik",children:"TC Kimlik No"}),i.jsx(co,{id:"tc_kimlik",value:c.tc_kimlik,onChange:e=>d({...c,tc_kimlik:e.target.value}),maxLength:11})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"birth_date",children:"Doğum Tarihi"}),i.jsxs(nu,{children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",className:xs("w-full justify-start text-left font-normal",!c.birth_date&&"text-muted-foreground"),children:[i.jsx(pr,{className:"mr-2 h-4 w-4"}),c.birth_date?XC(c.birth_date,"dd MMMM yyyy",{locale:ZT}):"Tarih seçin"]})}),i.jsx(iu,{className:"w-auto p-0",children:i.jsx(vae,{mode:"single",selected:c.birth_date||void 0,onSelect:e=>d({...c,birth_date:e||null}),initialFocus:!0})})]})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"phone",children:"Telefon"}),i.jsx(co,{id:"phone",type:"tel",value:c.phone,onChange:e=>d({...c,phone:e.target.value})})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"email",children:"E-posta"}),i.jsx(co,{id:"email",type:"email",value:c.email,onChange:e=>d({...c,email:e.target.value})})]}),i.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[i.jsx(po,{htmlFor:"address",children:"Adres"}),i.jsx(v6,{id:"address",value:c.address,onChange:e=>d({...c,address:e.target.value}),rows:3})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"İş Bilgileri"})}),i.jsxs(io,{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"position_id",children:"Mevki"}),i.jsxs(eO,{value:c.position_id,onValueChange:e=>d({...c,position_id:e}),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Mevki seçin"})}),i.jsx(sO,{children:s.map((e=>i.jsx(iO,{value:e.id,children:e.name},e.id)))})]})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"department",children:"Departman"}),i.jsx(co,{id:"department",value:c.department,onChange:e=>d({...c,department:e.target.value})})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"salary",children:"Maaş"}),i.jsx(co,{id:"salary",type:"number",value:c.salary,onChange:e=>d({...c,salary:e.target.value}),placeholder:"0.00",step:"0.01"})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"hire_date",children:"İşe Giriş Tarihi"}),i.jsxs(nu,{children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",className:xs("w-full justify-start text-left font-normal",!c.hire_date&&"text-muted-foreground"),children:[i.jsx(pr,{className:"mr-2 h-4 w-4"}),c.hire_date?XC(c.hire_date,"dd MMMM yyyy",{locale:ZT}):"Tarih seçin"]})}),i.jsx(iu,{className:"w-auto p-0",children:i.jsx(vae,{mode:"single",selected:c.hire_date,onSelect:e=>d({...c,hire_date:e||new Date}),initialFocus:!0})})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(D8,{id:"is_active",checked:c.is_active,onCheckedChange:e=>d({...c,is_active:e})}),i.jsx(po,{htmlFor:"is_active",children:"Aktif Çalışan"})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Acil Durum Bilgileri"})}),i.jsxs(io,{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"emergency_contact_name",children:"Acil Durum Kişisi"}),i.jsx(co,{id:"emergency_contact_name",value:c.emergency_contact_name,onChange:e=>d({...c,emergency_contact_name:e.target.value})})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"emergency_contact_phone",children:"Acil Durum Telefonu"}),i.jsx(co,{id:"emergency_contact_phone",type:"tel",value:c.emergency_contact_phone,onChange:e=>d({...c,emergency_contact_phone:e.target.value})})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Banka Bilgileri"})}),i.jsxs(io,{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"bank_name",children:"Banka Adı"}),i.jsx(co,{id:"bank_name",value:c.bank_name,onChange:e=>d({...c,bank_name:e.target.value})})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"iban",children:"IBAN"}),i.jsx(co,{id:"iban",value:c.iban,onChange:e=>d({...c,iban:e.target.value})})]}),i.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[i.jsx(po,{htmlFor:"account_holder",children:"Hesap Sahibi"}),i.jsx(co,{id:"account_holder",value:c.account_holder,onChange:e=>d({...c,account_holder:e.target.value})})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(oo,{type:"button",variant:"outline",onClick:()=>r("/admin/employees"),children:"İptal"}),i.jsx(oo,{type:"submit",disabled:l,children:l?"Kaydediliyor...":e?"Güncelle":"Kaydet"})]})]})})},jae=()=>{const e=xl();return i.jsxs("div",{className:"container mx-auto py-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs(oo,{variant:"ghost",onClick:()=>e("/admin/employees"),className:"mb-4",children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"Geri Dön"]}),i.jsx("h1",{className:"text-3xl font-bold",children:"Yeni Çalışan Ekle"})]}),i.jsx(bae,{})]})},kae=({employeeId:e})=>{const{leaves:t,loading:r,createLeave:a,updateLeave:n,deleteLeave:s}=Ute(e),[l,o]=ze.useState(!1),[c,d]=ze.useState(null),[u,m]=ze.useState({leave_type:"yillik",start_date:"",end_date:"",reason:"",status:"beklemede"}),[h,p]=ze.useState(),[x,g]=ze.useState(),f={yillik:"Yıllık İzin",hastalik:"Hastalık İzni",dogum:"Doğum İzni",olum:"Ölüm İzni",evlilik:"Evlilik İzni",ucretsiz:"Ücretsiz İzin",idari:"İdari İzin",diger:"Diğer"},y={beklemede:"bg-yellow-100 text-yellow-800",onaylandi:"bg-green-100 text-green-800",reddedildi:"bg-red-100 text-red-800",iptal_edildi:"bg-gray-100 text-gray-800"},v={beklemede:"Bekliyor",onaylandi:"Onaylandı",reddedildi:"Reddedildi",iptal_edildi:"İptal Edildi"},b=async(e,t)=>{try{await n(e,{status:t}),rt({title:"Başarılı",description:`İzin durumu ${v[t]} olarak güncellendi.`})}catch(r){}},j=()=>{m({leave_type:"yillik",start_date:"",end_date:"",reason:"",status:"beklemede"}),p(void 0),g(void 0)};return i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between",children:[i.jsx(no,{children:"İzin Kayıtları"}),i.jsxs(sd,{open:l,onOpenChange:o,children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{onClick:()=>{d(null),j()},children:[i.jsx(Pa,{className:"mr-2 h-4 w-4"}),"Yeni İzin Ekle"]})}),i.jsxs(cd,{className:"sm:max-w-[600px]",children:[i.jsxs(dd,{children:[i.jsx(md,{children:c?"İzin Düzenle":"Yeni İzin Ekle"}),i.jsxs(hd,{children:["Personel için izin kaydı ",c?"düzenleyin":"oluşturun","."]})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"İzin Türü"}),i.jsxs(eO,{value:u.leave_type,onValueChange:e=>m({...u,leave_type:e}),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsx(sO,{children:Object.entries(f).map((([e,t])=>i.jsx(iO,{value:e,children:t},e)))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Durum"}),i.jsxs(eO,{value:u.status,onValueChange:e=>m({...u,status:e}),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsx(sO,{children:Object.entries(v).map((([e,t])=>i.jsx(iO,{value:e,children:t},e)))})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Başlangıç Tarihi"}),i.jsxs(nu,{children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",className:xs("w-full justify-start text-left font-normal",!h&&"text-muted-foreground"),children:[i.jsx(pr,{className:"mr-2 h-4 w-4"}),h?XC(h,"dd MMMM yyyy",{locale:ZT}):i.jsx("span",{children:"Tarih seçin"})]})}),i.jsx(iu,{className:"w-auto p-0",children:i.jsx(vae,{mode:"single",selected:h,onSelect:p,initialFocus:!0})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Bitiş Tarihi"}),i.jsxs(nu,{children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",className:xs("w-full justify-start text-left font-normal",!x&&"text-muted-foreground"),children:[i.jsx(pr,{className:"mr-2 h-4 w-4"}),x?XC(x,"dd MMMM yyyy",{locale:ZT}):i.jsx("span",{children:"Tarih seçin"})]})}),i.jsx(iu,{className:"w-auto p-0",children:i.jsx(vae,{mode:"single",selected:x,onSelect:g,disabled:e=>!!h&&e<h,initialFocus:!0})})]})]})]}),h&&x&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Toplam: ",(()=>{if(h&&x){const e=Math.abs(x.getTime()-h.getTime());return Math.ceil(e/864e5)+1}return 0})()," gün"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Açıklama"}),i.jsx(v6,{value:u.reason,onChange:e=>m({...u,reason:e.target.value}),placeholder:"İzin açıklaması...",rows:3})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(oo,{variant:"outline",onClick:()=>{o(!1),d(null),j()},children:"İptal"}),i.jsx(oo,{onClick:async()=>{if(h&&x)try{const t={leave_type:u.leave_type,start_date:XC(h,"yyyy-MM-dd"),end_date:XC(x,"yyyy-MM-dd"),reason:u.reason,status:u.status,employee_id:e};c?(await n(c.id,t),rt({title:"Başarılı",description:"İzin kaydı güncellendi."})):(await a(t),rt({title:"Başarılı",description:"İzin kaydı oluşturuldu."})),o(!1),d(null),j()}catch(t){}else rt({title:"Hata",description:"Lütfen başlangıç ve bitiş tarihlerini seçiniz.",variant:"destructive"})},children:c?"Güncelle":"Kaydet"})]})]})]})]}),i.jsx(io,{children:r?i.jsx("div",{className:"text-center py-4",children:"Yükleniyor..."}):0===t.length?i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Henüz izin kaydı bulunmuyor."}):i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"İzin Türü"}),i.jsx(M5,{children:"Başlangıç"}),i.jsx(M5,{children:"Bitiş"}),i.jsx(M5,{children:"Gün"}),i.jsx(M5,{children:"Açıklama"}),i.jsx(M5,{children:"Durum"}),i.jsx(M5,{className:"text-right",children:"İşlemler"})]})}),i.jsx(E5,{children:t.map((e=>{const t=Math.ceil((new Date(e.end_date).getTime()-new Date(e.start_date).getTime())/864e5)+1;return i.jsxs(D5,{children:[i.jsx(z5,{children:f[e.leave_type]}),i.jsx(z5,{children:XC(new Date(e.start_date),"dd.MM.yyyy")}),i.jsx(z5,{children:XC(new Date(e.end_date),"dd.MM.yyyy")}),i.jsx(z5,{children:t}),i.jsx(z5,{className:"max-w-[200px] truncate",children:e.reason||"-"}),i.jsx(z5,{children:i.jsx(Co,{className:xs(y[e.status]),children:v[e.status]})}),i.jsx(z5,{className:"text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:["beklemede"===e.status&&i.jsxs(i.Fragment,{children:[i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>b(e.id,"onaylandi"),title:"Onayla",children:i.jsx(br,{className:"h-4 w-4 text-green-600"})}),i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>b(e.id,"reddedildi"),title:"Reddet",children:i.jsx(vn,{className:"h-4 w-4 text-red-600"})})]}),i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>(e=>{d(e),m({leave_type:e.leave_type,start_date:e.start_date,end_date:e.end_date,reason:e.reason||"",status:e.status||"beklemede"}),p(new Date(e.start_date)),g(new Date(e.end_date)),o(!0)})(e),children:i.jsx(Va,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>(async e=>{if(confirm("Bu izin kaydını silmek istediğinizden emin misiniz?"))try{await s(e),rt({title:"Başarılı",description:"İzin kaydı silindi."})}catch(t){}})(e.id),children:i.jsx(en,{className:"h-4 w-4"})})]})})]},e.id)}))})]})})]})},wae=({employeeId:e})=>{const{notes:t,loading:r,createNote:a,updateNote:n,deleteNote:s}=Kte(e),{user:l}=Jl(),[o,c]=ze.useState(!1),[d,u]=ze.useState(null),[m,h]=ze.useState({title:"",content:"",note_type:"genel",is_confidential:!1}),p={performans:"Performans",disiplin:"Disiplin",egitim:"Eğitim",saglik:"Sağlık",genel:"Genel",odul:"Ödül",uyari:"Uyarı"},x={performans:"bg-blue-100 text-blue-800",disiplin:"bg-red-100 text-red-800",egitim:"bg-purple-100 text-purple-800",saglik:"bg-green-100 text-green-800",genel:"bg-gray-100 text-gray-800",odul:"bg-yellow-100 text-yellow-800",uyari:"bg-orange-100 text-orange-800"},g=()=>{h({title:"",content:"",note_type:"genel",is_confidential:!1})};return i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between",children:[i.jsx(no,{children:"Çalışan Notları"}),i.jsxs(sd,{open:o,onOpenChange:c,children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{onClick:()=>{u(null),g()},children:[i.jsx(Pa,{className:"mr-2 h-4 w-4"}),"Yeni Not Ekle"]})}),i.jsxs(cd,{className:"sm:max-w-[600px]",children:[i.jsxs(dd,{children:[i.jsx(md,{children:d?"Not Düzenle":"Yeni Not Ekle"}),i.jsxs(hd,{children:["Çalışan için not ",d?"düzenleyin":"ekleyin","."]})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Başlık"}),i.jsx(co,{value:m.title,onChange:e=>h({...m,title:e.target.value}),placeholder:"Not başlığı..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Not Türü"}),i.jsxs(eO,{value:m.note_type,onValueChange:e=>h({...m,note_type:e}),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsx(sO,{children:Object.entries(p).map((([e,t])=>i.jsx(iO,{value:e,children:t},e)))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"Gizlilik"}),i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx(D6,{id:"confidential",checked:m.is_confidential,onCheckedChange:e=>h({...m,is_confidential:!!e})}),i.jsx("label",{htmlFor:"confidential",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Gizli not"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{children:"İçerik"}),i.jsx(v6,{value:m.content,onChange:e=>h({...m,content:e.target.value}),placeholder:"Not içeriği...",rows:5})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(oo,{variant:"outline",onClick:()=>{c(!1),u(null),g()},children:"İptal"}),i.jsx(oo,{onClick:async()=>{if(m.title&&m.content)try{const t={...m,employee_id:e,created_by:(null==l?void 0:l.id)||""};d?(await n(d.id,{title:m.title,content:m.content,note_type:m.note_type,is_confidential:m.is_confidential}),rt({title:"Başarılı",description:"Not güncellendi."})):(await a(t),rt({title:"Başarılı",description:"Not eklendi."})),c(!1),u(null),g()}catch(t){}else rt({title:"Hata",description:"Lütfen başlık ve içerik alanlarını doldurunuz.",variant:"destructive"})},children:d?"Güncelle":"Kaydet"})]})]})]})]}),i.jsx(io,{children:r?i.jsx("div",{className:"text-center py-4",children:"Yükleniyor..."}):0===t.length?i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Henüz not bulunmuyor."}):i.jsx(Rc,{className:"h-[400px]",children:i.jsx("div",{className:"space-y-4",children:t.map((e=>i.jsx(ro,{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:e.title}),i.jsx(Co,{className:xs(x[e.note_type]),children:p[e.note_type]}),e.is_confidential&&i.jsxs(Co,{variant:"secondary",children:[i.jsx(ca,{className:"h-3 w-3 mr-1"}),"Gizli"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.content}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(mn,{className:"h-3 w-3"}),i.jsxs("span",{children:["Ekleyen: ",e.created_by]})]}),i.jsx("span",{children:e.created_at&&XC(new Date(e.created_at),"dd MMMM yyyy HH:mm",{locale:ZT})})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:e.created_by===(null==l?void 0:l.id)&&i.jsxs(i.Fragment,{children:[i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>(e=>{u(e),h({title:e.title,content:e.content,note_type:e.note_type,is_confidential:e.is_confidential||!1}),c(!0)})(e),children:i.jsx(Va,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>(async e=>{if(confirm("Bu notu silmek istediğinizden emin misiniz?"))try{await s(e),rt({title:"Başarılı",description:"Not silindi."})}catch(t){}})(e.id),children:i.jsx(en,{className:"h-4 w-4"})})]})})]})},e.id)))})})})]})},Nae=()=>{var e,t,r,a;const{id:n}=fl(),s=xl(),[l,o]=ze.useState(!1),[c,d]=ze.useState(null),[u,m]=ze.useState(!0);qte(),ze.useEffect((()=>{n&&h()}),[n]);const h=async()=>{try{m(!0);const{data:e,error:t}=await Wl.from("employees").select("\n          *,\n          position:positions(*)\n        ").eq("id",n).single();if(t)throw t;d(e)}catch(e){rt({title:"Hata",description:"Çalışan bilgileri yüklenirken hata oluştu",variant:"destructive"}),s("/admin/employees")}finally{m(!1)}};if(!n)return i.jsx("div",{children:"Employee ID not found"});const p=e=>e?new Date(e).toLocaleDateString("tr-TR"):"-";return u?i.jsx("div",{className:"container mx-auto py-6",children:"Yükleniyor..."}):c?i.jsxs("div",{className:"container mx-auto py-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs(oo,{variant:"ghost",onClick:()=>s("/admin/employees"),className:"mb-4",children:[i.jsx(ar,{className:"mr-2 h-4 w-4"}),"Geri Dön"]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h1",{className:"text-3xl font-bold",children:[c.first_name," ",c.last_name]}),!l&&i.jsxs(oo,{onClick:()=>o(!0),children:[i.jsx(Va,{className:"mr-2 h-4 w-4"}),"Düzenle"]})]})]}),l?i.jsx(bae,{employee:c,onSuccess:()=>{o(!1),h()}}):i.jsxs(Yo,{defaultValue:"info",className:"space-y-4",children:[i.jsxs(Vo,{children:[i.jsxs(Go,{value:"info",className:"flex items-center gap-2",children:[i.jsx(cn,{className:"h-4 w-4"}),"Genel Bilgiler"]}),i.jsxs(Go,{value:"leaves",className:"flex items-center gap-2",children:[i.jsx(pr,{className:"h-4 w-4"}),"İzinler"]}),i.jsxs(Go,{value:"notes",className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"h-4 w-4"}),"Notlar"]})]}),i.jsxs(Wo,{value:"info",className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Kişisel Bilgiler"})}),i.jsxs(io,{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Ad Soyad"}),i.jsxs("p",{className:"font-medium",children:[c.first_name," ",c.last_name]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"TC Kimlik No"}),i.jsx("p",{className:"font-medium",children:c.tc_kimlik||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Doğum Tarihi"}),i.jsx("p",{className:"font-medium",children:p(c.birth_date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Telefon"}),i.jsx("p",{className:"font-medium",children:c.phone||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"E-posta"}),i.jsx("p",{className:"font-medium",children:c.email||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Adres"}),i.jsx("p",{className:"font-medium",children:c.address||"-"})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"İş Bilgileri"})}),i.jsxs(io,{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Mevki"}),i.jsx("p",{className:"font-medium",children:(null==(e=c.position)?void 0:e.name)||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Departman"}),i.jsx("p",{className:"font-medium",children:c.department||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Maaş"}),i.jsx("p",{className:"font-medium",children:(x=c.salary,x?new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(x):"-")})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"İşe Giriş Tarihi"}),i.jsx("p",{className:"font-medium",children:p(c.hire_date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Durum"}),i.jsx("p",{className:"font-medium",children:i.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium "+(c.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:c.is_active?"Aktif":"Pasif"})})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Acil Durum Bilgileri"})}),i.jsxs(io,{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Acil Durum Kişisi"}),i.jsx("p",{className:"font-medium",children:c.emergency_contact_name||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Acil Durum Telefonu"}),i.jsx("p",{className:"font-medium",children:c.emergency_contact_phone||"-"})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Banka Bilgileri"})}),i.jsxs(io,{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Banka Adı"}),i.jsx("p",{className:"font-medium",children:(null==(t=c.bank_account_info)?void 0:t.bank_name)||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"IBAN"}),i.jsx("p",{className:"font-medium",children:(null==(r=c.bank_account_info)?void 0:r.iban)||"-"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Hesap Sahibi"}),i.jsx("p",{className:"font-medium",children:(null==(a=c.bank_account_info)?void 0:a.account_holder)||"-"})]})]})]})]}),i.jsx(Wo,{value:"leaves",children:i.jsx(kae,{employeeId:n})}),i.jsx(Wo,{value:"notes",children:i.jsx(wae,{employeeId:n})})]})]}):i.jsx("div",{className:"container mx-auto py-6",children:"Çalışan bulunamadı"});var x},_ae=()=>{const{positions:e,loading:t,createPosition:r,updatePosition:a,deletePosition:n}=Lte(),[s,l]=ze.useState(!1),[o,c]=ze.useState(null),[d,u]=ze.useState({name:"",description:"",base_salary:"",is_active:!0}),m=e=>{var t;e?(c(e),u({name:e.name,description:e.description||"",base_salary:(null==(t=e.base_salary)?void 0:t.toString())||"",is_active:e.is_active??!0})):(c(null),u({name:"",description:"",base_salary:"",is_active:!0})),l(!0)},h=()=>{l(!1),c(null),u({name:"",description:"",base_salary:"",is_active:!0})};return i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(no,{children:"Mevki Yönetimi"}),i.jsxs(oo,{onClick:()=>m(),children:[i.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Yeni Mevki Ekle"]})]})}),i.jsxs(io,{children:[t?i.jsx("div",{className:"text-center py-4",children:"Yükleniyor..."}):0===e.length?i.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Henüz mevki eklenmemiş"}):i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Mevki Adı"}),i.jsx(M5,{children:"Açıklama"}),i.jsx(M5,{children:"Taban Maaş"}),i.jsx(M5,{children:"Durum"}),i.jsx(M5,{className:"text-right",children:"İşlemler"})]})}),i.jsx(E5,{children:e.map((e=>{return i.jsxs(D5,{children:[i.jsx(z5,{className:"font-medium",children:e.name}),i.jsx(z5,{children:e.description||"-"}),i.jsx(z5,{children:(t=e.base_salary,t?new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(t):"-")}),i.jsx(z5,{children:i.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium "+(e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.is_active?"Aktif":"Pasif"})}),i.jsxs(z5,{className:"text-right",children:[i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>m(e),children:i.jsx(Sa,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"ghost",size:"icon",onClick:()=>(async e=>{if(confirm("Bu mevkiyi silmek istediğinizden emin misiniz?"))try{await n(e)}catch(t){}})(e.id),children:i.jsx(en,{className:"h-4 w-4"})})]})]},e.id);var t}))})]}),i.jsx(sd,{open:s,onOpenChange:l,children:i.jsxs(cd,{children:[i.jsx(dd,{children:i.jsx(md,{children:o?"Mevki Düzenle":"Yeni Mevki Ekle"})}),i.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t={name:d.name,description:d.description||null,base_salary:d.base_salary?parseFloat(d.base_salary):null,is_active:d.is_active};try{o?await a(o.id,t):await r(t),h()}catch(n){}},children:[i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"name",children:"Mevki Adı"}),i.jsx(co,{id:"name",value:d.name,onChange:e=>u({...d,name:e.target.value}),required:!0})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"description",children:"Açıklama"}),i.jsx(v6,{id:"description",value:d.description,onChange:e=>u({...d,description:e.target.value}),rows:3})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(po,{htmlFor:"base_salary",children:"Taban Maaş"}),i.jsx(co,{id:"base_salary",type:"number",value:d.base_salary,onChange:e=>u({...d,base_salary:e.target.value}),placeholder:"0.00",step:"0.01"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(D8,{id:"is_active",checked:d.is_active,onCheckedChange:e=>u({...d,is_active:e})}),i.jsx(po,{htmlFor:"is_active",children:"Aktif"})]})]}),i.jsxs(ud,{children:[i.jsx(oo,{type:"button",variant:"outline",onClick:h,children:"İptal"}),i.jsx(oo,{type:"submit",children:o?"Güncelle":"Ekle"})]})]})]})})]})]})},Sae=()=>i.jsxs("div",{className:"container mx-auto py-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Pozisyon Yönetimi"}),i.jsx("p",{className:"text-muted-foreground",children:"Şirket pozisyonlarını yönetin, maaş tabanlarını belirleyin."})]}),i.jsx(_ae,{})]});var Cae={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Tae=Re.createContext&&Re.createContext(Cae),Oae=["attr","size","title"];function Pae(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Aae(){return Aae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Aae.apply(this,arguments)}function Eae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Dae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Eae(Object(r),!0).forEach((function(t){Mae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mae(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zae(e){return e&&e.map(((e,t)=>Re.createElement(e.tag,Dae({key:t},e.attr),zae(e.child))))}function Rae(e){return t=>Re.createElement(Iae,Aae({attr:Dae({},e.attr)},t),zae(e.child))}function Iae(e){var t=t=>{var r,{attr:a,size:n,title:s}=e,i=Pae(e,Oae),l=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),Re.createElement("svg",Aae({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,i,{className:r,style:Dae(Dae({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Re.createElement("title",null,s),e.children)};return void 0!==Tae?Re.createElement(Tae.Consumer,null,(e=>t(e))):t(Cae)}function Fae(e){return Rae({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function Bae(){var e;const t=hl(),{userProfile:r,signOut:a}=Jl(),n=[{title:"Anasayfa",icon:ia,href:"/customer/dashboard"},..."grafiker"===(null==r?void 0:r.role)?[{title:"Ürün Yönetimi",icon:dr,href:"/customer/admin/products"},{title:"Sipariş Listesi (Admin)",icon:Mr,href:"/customer/admin/orders"}]:[],{title:"Siparişlerim",icon:Ha,href:"/customer/orders"},{title:"Yeni Sipariş",icon:ba,href:"/customer/orders/new"},{title:"Kargo Takip",icon:sn,href:"/customer/cargo-tracking"},{title:"Hesap Bilgilerim",icon:mn,href:"/customer/profile"}];return i.jsxs(NS,{collapsible:"icon",className:"border-r",children:[i.jsx(CS,{className:"border-b p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-6 w-6 text-blue-600"}),i.jsx("span",{className:"font-semibold text-lg group-data-[collapsible=icon]:hidden",children:"BALTACI KURUMSAL"})]})}),i.jsx(OS,{children:i.jsx(ES,{children:n.map((e=>i.jsx(DS,{children:i.jsx(zS,{asChild:!0,isActive:t.pathname===e.href,children:i.jsxs(Ll,{to:e.href,className:"flex items-center gap-2",children:[i.jsx(e.icon,{className:"h-4 w-4"}),i.jsx("span",{children:e.title})]})})},e.href)))})}),i.jsx(TS,{children:i.jsxs(ES,{children:[i.jsx(DS,{children:i.jsx(zS,{asChild:!0,size:"lg",children:i.jsxs("a",{href:"https://wa.me/+905397607630",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-6",children:[i.jsx(Fae,{className:"text-green-500 scale-150"}),i.jsx("span",{children:"Grafikçi ile İletişime Geç"})]})})}),i.jsx(DS,{children:i.jsxs(td,{children:[i.jsx(rd,{asChild:!0,children:i.jsxs(zS,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[i.jsx(Jc,{className:"h-8 w-8 rounded-lg",children:i.jsx(ed,{className:"rounded-lg",children:(null==(e=null==r?void 0:r.full_name)?void 0:e.charAt(0))||"T"})}),i.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[i.jsx("span",{className:"truncate font-semibold",children:(null==r?void 0:r.full_name)||"Toptancı"}),i.jsx("span",{className:"truncate text-xs",children:(null==r?void 0:r.company)||"Müşteri"})]}),i.jsx(Nr,{className:"ml-auto size-4"})]})}),i.jsxs(ad,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:"bottom",align:"end",sideOffset:4,children:[i.jsx(nd,{asChild:!0,children:i.jsxs(Ll,{to:"/customer/profile",className:"cursor-pointer",children:[i.jsx(mn,{className:"mr-2 h-4 w-4"}),"Hesap Bilgilerim"]})}),i.jsxs(nd,{onClick:async()=>{await a()},children:[i.jsx(da,{className:"mr-2 h-4 w-4"}),"Çıkış Yap"]})]})]})}),i.jsx(DS,{children:i.jsx("div",{className:"flex items-center gap-2 w-full justify-between",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(RS,{}),i.jsx(zS,{size:"sm",asChild:!0,children:i.jsx(bo,{})})]})})})]})}),i.jsx(_S,{})]})}function Lae(){const{user:e,userProfile:t,loading:r}=Jl(),a=xl();return ze.useEffect((()=>{r||(e?t&&("toptanci"===t.role||"grafiker"===t.role||a("/dashboard",{replace:!0})):a("/",{replace:!0}))}),[e,t,r,a]),r?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-12 w-12 text-blue-600 dark:text-blue-400 mx-auto mb-4 animate-spin rounded-full border-4 border-blue-200 border-t-blue-600 dark:border-gray-600 dark:border-t-blue-400"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Yükleniyor..."})]})}):!e||!t||"toptanci"!==t.role&&"grafiker"!==t.role?null:i.jsx(wS,{children:i.jsxs("div",{className:"min-h-screen flex w-full bg-gray-50 dark:bg-gray-900",children:[i.jsx(Bae,{}),i.jsx(SS,{className:"flex-1",children:i.jsx("main",{className:"p-6 space-y-6",children:i.jsx(Tl,{})})})]})})}const qae=()=>{var e;const{userProfile:t}=Jl(),r=XC(new Date,"yyyy-MM-dd"),[a,n]=ze.useState(r),[s,l]=ze.useState(r),[o,c]=ze.useState("today"),[d,u]=ze.useState(!1),m=()=>{c("")},{data:h,isLoading:p}=qe({queryKey:["customer-order-stats",null==t?void 0:t.id,a,s],queryFn:async()=>{if(!(null==t?void 0:t.id))return null;let e=Wl.from("orders").select("\n          id, \n          status, \n          total_amount, \n          payment_status, \n          created_at, \n          order_number,\n          payments (\n            amount,\n            discount\n          )\n        ").eq("customer_id",t.id);a&&(e=e.gte("created_at",a)),s&&(e=e.lte("created_at",s+"T23:59:59"));const{data:r,error:n}=await e;if(n)throw n;const i=(null==r?void 0:r.filter((e=>["pending","confirmed","processing"].includes(e.status))))||[],l=i.reduce(((e,t)=>e+t.total_amount),0),o=(null==r?void 0:r.reduce(((e,t)=>e+t.total_amount),0))||0,c=(null==r?void 0:r.reduce(((e,t)=>{var r;return e+((null==(r=t.payments)?void 0:r.reduce(((e,t)=>e+(t.discount||0)),0))||0)}),0))||0,{data:d,error:u}=await Wl.from("system_settings").select("setting_key, setting_value").in("setting_key",["commission_seller_id","commission_amount_per_unit","commission_products"]);if(u)throw u;const m={};null==d||d.forEach((e=>{m[e.setting_key]=e.setting_value}));const h=(m.commission_seller_id||"").split("|").map((e=>e.trim())).filter(Boolean),p=parseFloat(m.commission_amount_per_unit)||0,x=(m.commission_products||"").split(",").map((e=>e.trim())).filter(Boolean);let g=0;if(r&&r.length>0&&h.includes(t.id)){const e=r.map((e=>e.id)),{data:t,error:a}=await Wl.from("order_items").select("\n            order_id,\n            item_type,\n            quantity,\n            product_variations!inner(\n              products!inner(\n                is_design_product\n              )\n            )\n          ").in("order_id",e);if(a)throw a;(t||[]).forEach((e=>{var t,r;const a=!!(null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.is_design_product),n=O9(e.item_type,a);x.includes(n)&&(g+=(e.quantity||0)*p)}))}return{totalOrders:(null==r?void 0:r.length)||0,pendingOrders:i.length,pendingAmount:l,lastOrder:(null==r?void 0:r[0])||null,totalSales:o,totalDiscounts:c,commission:g}},enabled:!!(null==t?void 0:t.id)}),{data:x,isLoading:g}=qe({queryKey:["customer-recent-orders",null==t?void 0:t.id],queryFn:async()=>{if(!(null==t?void 0:t.id))return[];const{data:e,error:r}=await Wl.from("orders").select("\n          id,\n          order_number,\n          status,\n          total_amount,\n          order_type,\n          created_at\n        ").eq("customer_id",t.id).order("created_at",{ascending:!1}).limit(5);if(r)throw r;return e||[]},enabled:!!(null==t?void 0:t.id)}),{data:f,isLoading:y}=qe({queryKey:["customer-notifications",null==t?void 0:t.id],queryFn:async()=>{if(!(null==t?void 0:t.id))return[];const{data:e,error:r}=await Wl.from("notifications").select("*").eq("user_id",t.id).eq("is_read",!1).order("created_at",{ascending:!1}).limit(3);if(r)throw r;return e||[]},enabled:!!(null==t?void 0:t.id)}),v=e=>{const t={pending:{label:"Beklemede",variant:"secondary",className:""},confirmed:{label:"Onaylandı",variant:"default",className:""},processing:{label:"Hazırlanıyor",variant:"default",className:"bg-sky-100 text-sky-800 border-sky-200 hover:bg-sky-200 dark:bg-sky-900 dark:text-sky-200 dark:border-sky-800"},in_production:{label:"Üretimde",variant:"default",className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200 dark:bg-green-900 dark:text-green-200 dark:border-green-800"},shipped:{label:"Kargoda",variant:"default",className:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-800 dark:border-purple-800"},delivered:{label:"Teslim Edildi",variant:"default",className:"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-200 dark:border-yellow-800"},cancelled:{label:"İptal",variant:"destructive",className:""}},r=t[e]||t.pending;return i.jsx(Co,{variant:r.variant,className:r.className,children:r.label})},b=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e);return p||g||y?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Hoş Geldiniz, ",null==t?void 0:t.full_name,"!"]}),i.jsx("p",{className:"text-muted-foreground",children:"Müşteri panelinizden siparişlerinizi yönetebilir ve hesap durumunuzu takip edebilirsiniz."})]}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>u(!d),className:"mb-4",children:"Tarih Aralığı"}),d&&i.jsxs(ro,{className:"mb-6",children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(zr,{className:"h-5 w-5"}),"Tarih Aralığı Filtresi"]}),i.jsx(so,{children:"Belirli bir tarih aralığındaki performansınızı görüntüleyin"})]}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"today",label:"Bugün"},{key:"yesterday",label:"Dün"},{key:"thisweek",label:"Bu hafta"},{key:"14days",label:"14 Gün"},{key:"thismonth",label:"Bu ay"},{key:"all",label:"Tüm zamanlar"}].map((e=>i.jsx(oo,{variant:o===e.key?"default":"outline",size:"sm",onClick:()=>(e=>{c(e);const t=new Date;switch(e){case"today":n(XC(ZS(t),"yyyy-MM-dd")),l(XC(cC(t),"yyyy-MM-dd"));break;case"yesterday":const e=nT(t,1);n(XC(ZS(e),"yyyy-MM-dd")),l(XC(cC(e),"yyyy-MM-dd"));break;case"thisweek":n(XC(WS(t,{locale:ZT}),"yyyy-MM-dd")),l(XC(xC(t,{locale:ZT}),"yyyy-MM-dd"));break;case"14days":n(XC(nT(t,14),"yyyy-MM-dd")),l(XC(t,"yyyy-MM-dd"));break;case"thismonth":n(XC(hC(t),"yyyy-MM-dd")),l(XC(dC(t),"yyyy-MM-dd"));break;case"all":n(""),l("")}})(e.key),className:"text-xs",children:e.label},e.key)))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"start-date",children:"Başlangıç Tarihi"}),i.jsx(co,{id:"start-date",type:"date",value:a,onChange:e=>{n(e.target.value),m()},className:"text-sm"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"end-date",children:"Bitiş Tarihi"}),i.jsx(co,{id:"end-date",type:"date",value:s,onChange:e=>{l(e.target.value),m()},className:"text-sm"})]}),i.jsx("div",{children:i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{n(""),l(""),c("all")},className:"w-full",children:"Temizle"})})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium",children:"Bekleyen Siparişlerim"}),i.jsx(Ha,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:(null==h?void 0:h.pendingOrders)||0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:b((null==h?void 0:h.pendingAmount)||0)})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium",children:"Toplam Satışım"}),i.jsx(an,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:b((null==h?void 0:h.totalSales)||0)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Tüm siparişlerim"})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium",children:"Son Sipariş Durumu"}),i.jsx(ba,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-lg font-bold",children:(null==(e=null==h?void 0:h.lastOrder)?void 0:e.order_number)||"Henüz sipariş yok"}),(null==h?void 0:h.lastOrder)&&i.jsx("div",{className:"mt-1",children:v(h.lastOrder.status)})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium",children:"Verdiğim İskonto"}),i.jsx(Zr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:b((null==h?void 0:h.totalDiscounts)||0)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Toplam iskonto tutarı"})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(no,{className:"text-sm font-medium",children:"Prim Kazancım"}),i.jsx(lr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(io,{children:[i.jsx("div",{className:"text-2xl font-bold",children:b((null==h?void 0:h.commission)||0)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Satış analiz ile aynı hesap"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsx(no,{children:"Hızlı İşlemler"}),i.jsx(so,{children:"Sık kullanılan işlemlere hızlı erişim"})]}),i.jsxs(io,{className:"space-y-3",children:[i.jsx(oo,{asChild:!0,className:"w-full",children:i.jsxs(Ll,{to:"/customer/orders/new",children:[i.jsx(ba,{className:"mr-2 h-4 w-4"}),"Yeni Sipariş Oluştur"]})}),i.jsx(oo,{variant:"outline",asChild:!0,className:"w-full",children:i.jsxs(Ll,{to:"/customer/profile",children:[i.jsx(nr,{className:"mr-2 h-4 w-4"}),"Hesap Bilgilerimi Düzenle"]})})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(an,{className:"h-5 w-5"}),"Satış Performansım"]}),i.jsx(so,{children:"Son dönem satış özetiniz"})]}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center p-2 bg-green-50 dark:bg-green-900/20 rounded",children:[i.jsx("span",{className:"text-sm font-medium",children:"Toplam Satışım:"}),i.jsx("span",{className:"font-bold text-green-600",children:b((null==h?void 0:h.totalSales)||0)})]}),i.jsxs("div",{className:"flex justify-between items-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[i.jsx("span",{className:"text-sm font-medium",children:"Verdiğim İskonto:"}),i.jsx("span",{className:"font-bold text-blue-600",children:b((null==h?void 0:h.totalDiscounts)||0)})]}),i.jsxs("div",{className:"flex justify-between items-center p-2 bg-purple-50 dark:bg-purple-900/20 rounded",children:[i.jsx("span",{className:"text-sm font-medium",children:"Prim Kazancım:"}),i.jsx("span",{className:"font-bold text-purple-600",children:b((null==h?void 0:h.commission)||0)})]})]})})]})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Son Siparişlerim"}),i.jsx(oo,{variant:"outline",size:"sm",asChild:!0,children:i.jsxs(Ll,{to:"/customer/orders",children:["Tüm Siparişlerimi Gör",i.jsx(nr,{className:"ml-2 h-4 w-4"})]})})]}),i.jsx(so,{children:"En son verdiğiniz siparişler"})]}),i.jsx(io,{children:x&&x.length>0?i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Sipariş No"}),i.jsx(M5,{children:"Tarih"}),i.jsx(M5,{children:"Forma Cinsi"}),i.jsx(M5,{children:"Toplam Tutar"}),i.jsx(M5,{children:"Durum"})]})}),i.jsx(E5,{children:x.map((e=>{return i.jsxs(D5,{children:[i.jsx(z5,{className:"font-medium",children:e.order_number}),i.jsx(z5,{children:XC(new Date(e.created_at),"dd MMM yyyy",{locale:ZT})}),i.jsx(z5,{children:(t=e.order_type,"design"===t?"Tasarım Forma":"Hazır Stok")}),i.jsx(z5,{children:b(e.total_amount)}),i.jsx(z5,{children:v(e.status)})]},e.id);var t}))})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ha,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Henüz sipariş vermediniz"}),i.jsx(oo,{asChild:!0,className:"mt-4",children:i.jsx(Ll,{to:"/customer/orders/new",children:"İlk Siparişinizi Verin"})})]})})]})]})};function $ae({onSelect:e,selectedType:t}){return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[i.jsxs(ro,{className:"cursor-pointer transition-all hover:shadow-lg "+("ready_stock"===t?"ring-2 ring-blue-500":""),children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:i.jsx(ba,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),"Hazır Stok Ürünleri"]}),i.jsx(so,{children:"Stoktaki mevcut ürünlerden sipariş oluşturun. Hızlı teslimat süresi."})]}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Teslimat Süresi:"}),i.jsx(Co,{variant:"outline",children:"3-5 İş Günü"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Minimum Sipariş:"}),i.jsx(Co,{variant:"outline",children:"Yok"})]}),i.jsx("div",{className:"pt-3",children:i.jsxs(oo,{className:"w-full",onClick:()=>e("ready_stock"),variant:"ready_stock"===t?"default":"outline",children:[i.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Hazır Stok Siparişi"]})})]})})]}),i.jsxs(ro,{className:"cursor-pointer transition-all hover:shadow-lg "+("design"===t?"ring-2 ring-purple-500":""),children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:i.jsx(ja,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),"Özel Tasarım Forma"]}),i.jsx(so,{children:"Tamemen Size özel tasarlanacak formalar. Takım logonuz ve renkleri ile."})]}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Teslimat Süresi:"}),i.jsx(Co,{variant:"outline",children:"10-15 İş Günü"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Minimum Sipariş:"}),i.jsx(Co,{variant:"outline",children:"15 Takım"})]}),i.jsx("div",{className:"pt-3",children:i.jsxs(oo,{className:"w-full",onClick:()=>e("design"),variant:"design"===t?"default":"outline",children:[i.jsx(ja,{className:"mr-2 h-4 w-4"}),"Tasarım Siparişi"]})})]})})]}),i.jsxs(ro,{className:"cursor-pointer transition-all hover:shadow-lg "+("promotion"===t?"ring-2 ring-green-500":""),children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:i.jsx(Zr,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),"Promosyon Forma"]}),i.jsx(so,{children:"Promosyon amaçlı formalar. Özel fiyatlarla toplu siparişler."})]}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Teslimat Süresi:"}),i.jsx(Co,{variant:"outline",children:"8-12 İş Günü"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Minimum Sipariş:"}),i.jsx(Co,{variant:"outline",children:"10 Takım"})]}),i.jsx("div",{className:"pt-3",children:i.jsxs(oo,{className:"w-full",onClick:()=>e("promotion"),variant:"promotion"===t?"default":"outline",children:[i.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Promosyon Siparişi"]})})]})})]})]})}function Kae({orderItems:e,setOrderItems:t,onContinue:r}){const[a,n]=ze.useState(""),[s,l]=ze.useState("Tümü"),[o,c]=ze.useState("Tümü"),[d,u]=ze.useState(!1),[m,h]=ze.useState(null),[p,x]=ze.useState(1),[g]=ze.useState(5),{data:f,isLoading:y}=f8(),v=e=>{if(!e)return"/placeholder.svg";if(Array.isArray(e)&&e.length>0)return e[0];if("string"==typeof e)try{const t=JSON.parse(e);return Array.isArray(t)&&t.length>0?t[0]:e}catch(die){return e}return"/placeholder.svg"},b=(null==f?void 0:f.filter((e=>"Hazır Forma"===e.category)))||[],j=b.reduce(((e,t)=>{const r=e.find((e=>e.name===t.name));return r?(r.colors.includes(t.color)||r.colors.push(t.color),r.sizes.includes(t.size)||r.sizes.push(t.size),r.variations.push(t),t.final_price!==r.basePrice&&(r.basePrice=Math.min(r.basePrice,t.final_price))):e.push({id:t.id,name:t.name,code:t.code,category:t.category,brand:t.brand,colors:[t.color],sizes:[t.size],basePrice:t.final_price,image:v(t.images),variations:[t]}),e}),[]).filter((e=>{var t;const r=e.name.toLowerCase().includes(a.toLowerCase())||e.code.toLowerCase().includes(a.toLowerCase())||(null==(t=e.brand)?void 0:t.toLowerCase().includes(a.toLowerCase())),n="Tümü"===s||e.colors.includes(s),i="Tümü"===o||e.brand===o;return r&&n&&i})),k=["Tümü",...Array.from(new Set(b.map((e=>e.color))))],w=["Tümü",...Array.from(new Set(b.map((e=>e.brand)).filter(Boolean)))],N=Math.ceil(j.length/g),_=(p-1)*g,S=_+g,C=j.slice(_,S),T=e=>{c(e),x(1)},O=(e,t)=>{h({url:e,name:t}),u(!0)},P=(r,a,n,s,i,l,o,c,d,u,m,h,p,x,g,f,y,b,j,k,w)=>{if(s<=0&&!((l||0)>0||(o||0)>0||(h||0)>0||(g||0)>0||(f||0)>0))return;const N=Date.now(),_=Math.random().toString(36).substr(2,9),S=`${r.name}-${a}-${n}-${N}-${_}`,C=s>0?e.find((e=>e.name===r.name&&e.color===a&&e.size===n&&e.quantity>0)):null,T=(l||0)*(i.shorts_price||0),O=(o||0)*(i.socks_price||0),P=(g||0)*(i.shorts_price||0),A=(f||0)*(i.socks_price||0),E=(h||0)*(i.goalkeeper_price||0),D=(i.final_price||0)*s;if(C&&s>0){const r=C.quantity+s;let a=C.sizes||[];if(s>0){const e=a.findIndex((e=>e.size===n));e>=0?a[e].quantity+=s:a.push({size:n,quantity:s,variation_id:i.variation_id})}let v=C.goalkeeperDetails||[];if(h&&h>0&&p&&x){const e=v.findIndex((e=>e.color===p&&e.size===x));e>=0?v[e].quantity+=h:v.push({quantity:h,color:p,size:x,unitPrice:i.goalkeeper_price||0})}let N=C.playerShortsDetails||[];if(l&&l>0&&c&&u){const e=N.findIndex((e=>e.color===c&&e.type===u));e>=0?N[e].quantity+=l:N.push({quantity:l,color:c,type:u,unitPrice:i.shorts_price||0})}let _=C.playerSocksDetails||[];if(o&&o>0&&m&&d){const e=_.findIndex((e=>e.color===m&&e.type===d));e>=0?_[e].quantity+=o:_.push({quantity:o,color:m,type:d,unitPrice:i.socks_price||0})}let S=C.goalkeeperShortsDetails||[];if(g&&g>0&&y&&j){const e=w?`${j} - Uzun`:j,t=S.findIndex((t=>t.color===y&&t.type===e));t>=0?S[t].quantity+=g:S.push({quantity:g,color:y,type:e,unitPrice:i.shorts_price||0})}let T=C.goalkeeperSocksDetails||[];if(f&&f>0&&k&&b){const e=T.findIndex((e=>e.color===k&&e.type===b));e>=0?T[e].quantity+=f:T.push({quantity:f,color:k,type:b,unitPrice:i.socks_price||0})}const O=N.reduce(((e,t)=>e+t.quantity),0),P=_.reduce(((e,t)=>e+t.quantity),0),A=v.reduce(((e,t)=>e+t.quantity),0),E=S.reduce(((e,t)=>e+t.quantity),0),D=T.reduce(((e,t)=>e+t.quantity),0);let M=C.size;s>0?1===a.length?M=a[0].size:a.length>1&&(M=`${a.length} farklı beden`):r<=0&&(a=[],M=""),t(e.map((e=>e.id===C.id?{...e,quantity:r,totalPrice:r*(e.unitPrice||0),sizes:a,size:M,goalkeeperQuantity:A,goalkeeperTotalPrice:v.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperDetails:v,playerShortsDetails:N,playerSocksDetails:_,goalkeeperShortsDetails:S,goalkeeperSocksDetails:T,playerShortsTotalPrice:N.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),playerSocksTotalPrice:_.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperShortsTotalPrice:S.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperSocksTotalPrice:T.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),shortsQuantity:O+E,socksQuantity:P+D,shortsTotalPrice:N.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)+S.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),socksTotalPrice:_.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)+T.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperColor:p||e.goalkeeperColor,goalkeeperSize:x||e.goalkeeperSize}:e)))}else{const N=[];h&&h>0&&p&&x&&N.push({quantity:h,color:p,size:x,unitPrice:i.goalkeeper_price||0});const _=[];l&&l>0&&c&&u&&_.push({quantity:l,color:c,type:u,unitPrice:i.shorts_price||0});const C=[];o&&o>0&&m&&d&&C.push({quantity:o,color:m,type:d,unitPrice:i.socks_price||0});const M=[];if(g&&g>0&&y&&j){const e=w?`${j} - Uzun`:j;M.push({quantity:g,color:y,type:e,unitPrice:i.shorts_price||0})}const z=[];f&&f>0&&k&&b&&z.push({quantity:f,color:k,type:b,unitPrice:i.socks_price||0});const R={id:S,name:r.name,type:"ready_stock",category:r.category,color:a,size:s>0?n:"",sizes:s>0?[{size:n,quantity:s,variation_id:i.variation_id}]:[],quantity:s>0?s:0,unitPrice:i.final_price||0,totalPrice:D,variationId:i.variation_id,sku:i.sku,image:v(i.images),goalkeeperDetails:N,playerShortsDetails:_,playerSocksDetails:C,goalkeeperShortsDetails:M,goalkeeperSocksDetails:z,playerShortsTotalPrice:T,playerSocksTotalPrice:O,goalkeeperShortsTotalPrice:P,goalkeeperSocksTotalPrice:A,shortsQuantity:(l||0)+(g||0),socksQuantity:(o||0)+(f||0),goalkeeperQuantity:h||0,shortsUnitPrice:i.shorts_price,socksUnitPrice:i.socks_price,goalkeeperUnitPrice:i.goalkeeper_price,shortsTotalPrice:T+P,socksTotalPrice:O+A,goalkeeperTotalPrice:E,goalkeeperColor:p||"",goalkeeperSize:x||""};(s>0||l&&l>0||o&&o>0||h&&h>0||g&&g>0||f&&f>0)&&t([...e,R])}},A=r=>{t(e.filter((e=>e.id!==r)))},E=(r,a)=>{const n=e.find((e=>e.id===r));if(!n)return;const s=n.playerShortsDetails&&n.playerShortsDetails.length>0||n.playerSocksDetails&&n.playerSocksDetails.length>0||n.goalkeeperDetails&&n.goalkeeperDetails.length>0||n.goalkeeperShortsDetails&&n.goalkeeperShortsDetails.length>0||n.goalkeeperSocksDetails&&n.goalkeeperSocksDetails.length>0||(n.shortsQuantity||0)>0||(n.socksQuantity||0)>0||(n.goalkeeperQuantity||0)>0;if(a<=0&&!s)return void A(r);let i=n.sizes||[],l=n.size;if(a<=0)i=[],l="";else if(1===i.length)i[0].quantity=a,l=i[0].size;else if(i.length>1){const e=i.reduce(((e,t)=>e+t.quantity),0);e>0&&(i=i.map((t=>({...t,quantity:Math.round(t.quantity/e*a)})))),l=`${i.length} farklı beden`}t(e.map((e=>e.id===r?{...e,quantity:a>0?a:0,totalPrice:(a>0?a:0)*(e.unitPrice||0),sizes:i,size:l}:e)))},D=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.goalkeeperDetails)return;const i=[...s.goalkeeperDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,goalkeeperDetails:i,goalkeeperTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperQuantity:i.reduce(((e,t)=>e+t.quantity),0)}:e))):A(r)},M=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.playerShortsDetails)return;const i=[...s.playerShortsDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,playerShortsDetails:i,playerShortsTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},z=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.playerSocksDetails)return;const i=[...s.playerSocksDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,playerSocksDetails:i,playerSocksTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},R=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.goalkeeperShortsDetails)return;const i=[...s.goalkeeperShortsDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,goalkeeperShortsDetails:i,goalkeeperShortsTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},I=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.goalkeeperSocksDetails)return;const i=[...s.goalkeeperSocksDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,goalkeeperSocksDetails:i,goalkeeperSocksTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)};return i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:y?i.jsx(ro,{children:i.jsxs(io,{className:"py-8 text-center",children:[i.jsx(oa,{className:"h-8 w-8 animate-spin mx-auto"}),i.jsx("p",{className:"text-gray-500 mt-2",children:"Ürünler yükleniyor..."})]})}):i.jsxs(i.Fragment,{children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Hazır Forma Ürünleri"})}),i.jsx(io,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"Ürün adı veya kodu ara...",className:"pl-10",value:a,onChange:e=>{return t=e.target.value,n(t),void x(1);var t}})]}),i.jsxs(eO,{value:s,onValueChange:e=>{l(e),x(1)},children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:k.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Takım Seçimi"})}),i.jsx(io,{children:i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-1.5",children:[...w].sort(((e,t)=>e.localeCompare(t,"tr"))).map((e=>i.jsx(oo,{variant:o===e?"default":"outline",onClick:()=>T(e),size:"sm",className:"w-full h-7 text-ms",children:e},e)))})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-1 gap-4",children:C.map((r=>i.jsx(Uae,{product:r,onAddToOrder:P,orderItems:e,setOrderItems:t,getProductImage:v,onImageClick:O},r.id)))}),N>1&&i.jsx(ro,{children:i.jsx(io,{className:"py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[j.length," üründen ",_+1,"-",Math.min(S,j.length)," arası gösteriliyor"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>x(p-1),disabled:1===p,children:"Önceki"}),[...Array(N)].map(((e,t)=>{const r=t+1;return i.jsx(oo,{variant:p===r?"default":"outline",size:"sm",className:"w-8 h-8 p-0",onClick:()=>x(r),children:r},r)})),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>x(p+1),disabled:p===N,children:"Sonraki"})]})]})})})]}),0===j.length&&i.jsx(ro,{children:i.jsxs(io,{className:"py-8 text-center",children:[i.jsx("p",{className:"text-gray-500",children:0===b.length?"Hazır forma kategorisinde ürün bulunamadı.":"Aradığınız kriterlere uygun ürün bulunamadı."}),"Tümü"!==o&&i.jsx(oo,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>T("Tümü"),children:"Tüm markaları göster"})]})})]})}),i.jsxs("div",{className:"space-y-4 sticky top-4 h-fit",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Sipariş Özeti"})}),i.jsx(io,{children:0===e.length?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Henüz ürün eklenmedi"}):i.jsxs("div",{className:"space-y-4",children:[e.filter((e=>(e.quantity||0)>0||(e.goalkeeperQuantity||0)>0||(e.shortsQuantity||0)>0||(e.socksQuantity||0)>0)).reduce(((e,t)=>{const r=e.find((e=>e.name===t.name));return r?r.items.push(t):e.push({name:t.name,items:[t]}),e}),[]).map((e=>{const t=e.items.map((e=>e.color)).filter(((e,t,r)=>r.indexOf(e)===t)),r=[],a=[],n=[],s=[],l=[],o=[];let c=0,d=0,u=0,m=0,h=0,p=0,x=0;return e.items.forEach((e=>{c+=e.quantity||0,d+=e.totalPrice||0,e.sizes&&e.sizes.forEach((t=>{r.push({size:t.size,quantity:t.quantity,variation_id:t.variation_id,color:e.color})})),e.goalkeeperDetails&&(a.push(...e.goalkeeperDetails),u+=e.goalkeeperDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.playerShortsDetails&&(n.push(...e.playerShortsDetails),m+=e.playerShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.playerSocksDetails&&(s.push(...e.playerSocksDetails),h+=e.playerSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.goalkeeperShortsDetails&&(l.push(...e.goalkeeperShortsDetails),p+=e.goalkeeperShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.goalkeeperSocksDetails&&(o.push(...e.goalkeeperSocksDetails),x+=e.goalkeeperSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),!e.playerShortsDetails&&!e.goalkeeperShortsDetails&&(e.shortsTotalPrice||0)>0&&(m+=e.shortsTotalPrice||0),!e.playerSocksDetails&&!e.goalkeeperSocksDetails&&(e.socksTotalPrice||0)>0&&(h+=e.socksTotalPrice||0),!e.goalkeeperDetails&&(e.goalkeeperTotalPrice||0)>0&&(u+=e.goalkeeperTotalPrice||0)})),i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-base text-gray-900 dark:text-gray-100",children:e.name}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.join(", ")})]}),i.jsxs("div",{className:"space-y-2",children:[r.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-gray-200",children:"📏 Bedenler"}),r.map(((t,r)=>{var a;const n=e.items.find((e=>{var r;return e.color===t.color&&(null==(r=e.sizes)?void 0:r.some((e=>e.size===t.size)))}));return i.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:[t.color," - ",t.size]}),i.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[t.quantity," x ₺",(null==(a=null==n?void 0:n.unitPrice)?void 0:a.toFixed(2))||"0.00"," = ₺",(t.quantity*((null==n?void 0:n.unitPrice)||0)).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{n&&E(n.id,(n.quantity||0)-1)},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{n&&E(n.id,(n.quantity||0)+1)},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`${t.color}-${t.size}`)}))]}),a.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-orange-800 dark:text-orange-200",children:"🥅 Kaleci Forması"}),a.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.goalkeeperDetails)?void 0:r.some((e=>e.color===t.color&&e.size===t.size))}));return i.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3 border border-orange-200 dark:border-orange-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[t.color," - ",t.size]}),i.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.size===t.size)))||0;D(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.size===t.size)))||0;D(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`goalkeeper-${r}`)}))]}),(n.length>0||l.length>0)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-blue-800 dark:text-blue-200",children:"🩳 Şortlar"}),n.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.playerShortsDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Oyuncu • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;M(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;M(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`player-shorts-${r}`)})),l.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.goalkeeperShortsDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Kaleci • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;R(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;R(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`goalkeeper-shorts-${r}`)}))]}),(s.length>0||o.length>0)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-green-800 dark:text-green-200",children:"🧦 Çoraplar"}),s.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.playerSocksDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:["Oyuncu • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;z(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;z(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`player-socks-${r}`)})),o.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.goalkeeperSocksDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:["Kaleci • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;I(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;I(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`goalkeeper-socks-${r}`)}))]})]}),i.jsx("div",{className:"border-t pt-3 mt-3",children:i.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[i.jsx("span",{children:"Ürün Toplamı:"}),i.jsxs("span",{children:["₺",(d+u+m+h+p+x).toFixed(2)]})]})})]},e.name)})),i.jsx("div",{className:"border-t pt-3",children:i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:"Toplam:"}),i.jsxs("span",{children:["₺",e.reduce(((e,t)=>{let r=t.totalPrice||0;return t.goalkeeperDetails?r+=t.goalkeeperDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0):t.goalkeeperTotalPrice&&(r+=t.goalkeeperTotalPrice),t.playerShortsDetails?r+=t.playerShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0):t.shortsTotalPrice&&(r+=t.shortsTotalPrice),t.playerSocksDetails?r+=t.playerSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0):t.socksTotalPrice&&(r+=t.socksTotalPrice),t.goalkeeperShortsDetails&&(r+=t.goalkeeperShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),t.goalkeeperSocksDetails&&(r+=t.goalkeeperSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e+r}),0).toFixed(2)]})]})})]})})]}),e.length>0&&i.jsx(ro,{children:i.jsx(io,{className:"p-4",children:i.jsx(oo,{className:"w-full",size:"lg",onClick:()=>{r&&r()},children:"Devam Et"})})})]}),i.jsx(sd,{open:d,onOpenChange:u,children:i.jsxs(cd,{className:"max-w-4xl max-h-[90vh] p-0",children:[i.jsx(dd,{className:"p-4 pb-2",children:i.jsxs(md,{className:"flex items-center justify-between",children:[i.jsx("span",{children:null==m?void 0:m.name}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>u(!1),className:"h-8 w-8 p-0",children:i.jsx(vn,{className:"h-4 w-4"})})]})}),i.jsx("div",{className:"p-4 pt-0",children:m&&i.jsx("img",{src:m.url,alt:m.name,className:"w-full h-auto max-h-[70vh] object-contain rounded-lg",onError:e=>{e.currentTarget.src="/placeholder.svg"}})})]})})]})}function Uae({product:e,onAddToOrder:t,orderItems:r,setOrderItems:a,getProductImage:n,onImageClick:s}){const[l,o]=ze.useState(e.colors[0]||""),[c,d]=ze.useState(e.sizes[0]||""),[u,m]=ze.useState(0),[h,p]=ze.useState(!1),[x,g]=ze.useState(""),[f,y]=ze.useState(""),[v,b]=ze.useState(null),[j,k]=ze.useState(!1),[w,N]=ze.useState(0),[_,S]=ze.useState(0),[C,T]=ze.useState(0),[O,P]=ze.useState("Siyah"),[A,E]=ze.useState("5"),[D,M]=ze.useState("Yetişkin"),[z,R]=ze.useState("Beyaz"),[I,F]=ze.useState("Siyah"),[B,L]=ze.useState(e.sizes[0]||""),[q,$]=ze.useState(0),[K,U]=ze.useState(0),[H,Y]=ze.useState("Siyah"),[V,G]=ze.useState("5"),[W,Q]=ze.useState("Yetişkin"),[X,Z]=ze.useState("Beyaz"),[J,ee]=ze.useState(!1),te=["3","5","7"],re=["Yetişkin","Çocuk"],ae=["Beyaz","Siyah","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz","Sarı","Turuncu"],ne=["Fosfor Turuncu","Fosfor Yeşil","Saks Mavi","Kırmızı","Yeşil","Sarı","Pembe","Turkuaz","Gri"],se=e.variations.find((e=>e.color===l&&e.size===c)),ie="Hazır Forma"===e.category||e.name.toLowerCase().includes("forma")||e.name.toLowerCase().includes("jersey")||e.name.toLowerCase().includes("üniforma"),le=()=>{g(""),y(""),b(null),k(!1),p(!1)},oe=()=>1===e.colors.length?`1 - ${e.sizes[0]||"L"}`:`1 - ${e.sizes[0]||"L"} - ${e.colors[0]||"Siyah"}`,ce=()=>1===ne.length?`1 - ${e.sizes[0]||"L"}`:`1 - ${e.sizes[0]||"L"} - ${ne[0]||"Fosfor Turuncu"}`,de=(e,t)=>{const r=e.toLowerCase().replace(/ş/g,"s").replace(/ç/g,"c").replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ö/g,"o").replace(/ı/g,"i");return t.find((e=>{const t=e.toLowerCase().replace(/ş/g,"s").replace(/ç/g,"c").replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ö/g,"o").replace(/ı/g,"i");return t===r||t.includes(r)||r.includes(t)}))},ue=e=>{var t,r,a;const n=e.trim();if(!n)return null;const s=n.match(/\s*[-|,;]\s*/g)||[];if(s.length>=1){const e=n.split(/\s*[-|,;]\s*/);return{quantity:(null==(t=e[0])?void 0:t.trim())||"",size:(null==(r=e[1])?void 0:r.trim())||"",color:(null==(a=e[2])?void 0:a.trim())||"",separator:s[0]||" - "}}{const e=n.split(/\s+/);if(e.length>=2){return{quantity:e[0],size:e[1],color:e.slice(2).join(" "),separator:" "}}}return null},me=(t,r)=>{const a=ue(t);if(!a)return t;const n=e.sizes.indexOf(a.size);if(-1===n)return t;let s;s="up"===r?n<e.sizes.length-1?n+1:0:n>0?n-1:e.sizes.length-1;const i=e.sizes[s];return a.color?`${a.quantity}${a.separator}${i}${a.separator}${a.color}`:`${a.quantity}${a.separator}${i}`},he=(e,t,r)=>{const a=ue(e);if(!a||!a.color)return e;const n=r.indexOf(a.color);if(-1===n){const t=de(a.color,r);if(!t)return e;return-1===r.indexOf(t)?e:`${a.quantity}${a.separator}${a.size}${a.separator}${t}`}let s;s="right"===t?n<r.length-1?n+1:0:n>0?n-1:r.length-1;const i=r[s];return`${a.quantity}${a.separator}${a.size}${a.separator}${i}`},pe=()=>{l&&c&&(u>0||(w>0||_>0||C>0||q>0||K>0))&&se&&(t(e,l,c,u,se,w,_,O,D,A,z,C,I,B,q,K,H,W,V,X,J),m(0),N(0),S(0),T(0),$(0),U(0),ee(!1))};return i.jsxs(ro,{className:"relative",children:[i.jsxs(Co,{variant:(null==se?void 0:se.stock_quantity)&&se.stock_quantity>0?"default":"destructive",className:"absolute top-2 left-2 text-xs z-10",children:["Stok: ",(null==se?void 0:se.stock_quantity)||0]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"absolute top-2 right-2 text-xs z-10 bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700",children:[i.jsx(ln,{className:"h-3 w-3 mr-1"}),"Metin ile Giriş"]}),i.jsx(io,{className:"p-4 pt-8",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),pe())},style:{outline:"none"},children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-20 h-20 object-cover rounded-lg bg-white border cursor-pointer hover:opacity-80 transition-opacity mix-blend-multiply dark:mix-blend-normal",onClick:()=>s(e.image||"/placeholder.svg",e.name),onError:e=>{e.currentTarget.src="/placeholder.svg"}})}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.name}),i.jsx(Co,{variant:"outline",className:"text-xs px-2 py-1",children:e.code})]}),i.jsxs("p",{className:"text-xl font-bold text-blue-600 mt-1",children:["₺",(null==se?void 0:se.final_price)||e.basePrice]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Renk:"}),i.jsxs(eO,{value:l,onValueChange:o,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:e.colors.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Beden:"}),i.jsxs(eO,{value:c,onValueChange:d,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Beden seçin"})}),i.jsx(sO,{children:e.sizes.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Oyuncu Adeti:"}),i.jsx(co,{type:"number",min:"0",max:null==se?void 0:se.stock_quantity,value:0===u?"":u,onChange:e=>{const t=e.target.value;m(""===t?0:parseInt(t)||0)},className:"mt-1",placeholder:"0"})]}),ie&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kaleci Adeti:"}),i.jsx(co,{type:"number",min:"0",max:(null==se?void 0:se.stock_quantity)||0,value:0===C?"":C,onChange:e=>{const t=e.target.value;T(""===t?0:parseInt(t)||0)},className:"mt-1",placeholder:"0"}),(null==se?void 0:se.goalkeeper_price)&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Birim fiyat: ₺",se.goalkeeper_price]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kaleci Renk:"}),i.jsxs(eO,{value:I,onValueChange:F,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Kaleci renk seçin"})}),i.jsx(sO,{children:ne.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kaleci Beden:"}),i.jsxs(eO,{value:B,onValueChange:L,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Kaleci beden seçin"})}),i.jsx(sO,{children:e.sizes.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),!ie&&i.jsx("div",{className:"flex items-end col-span-1",children:i.jsx(oo,{onClick:pe,disabled:!(l&&c&&(u||w||_||C)&&se&&0!==se.stock_quantity),className:"w-full",children:0===(null==se?void 0:se.stock_quantity)?"Stokta Yok":"Sepete Ekle"})})]}),ie&&i.jsxs("div",{className:"border-t pt-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-blue-700 border-b pb-2",children:"Oyuncu Ek Ürünleri"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Oyuncu Şort"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===w?"":w,onChange:e=>{const t=e.target.value;N(""===t?0:parseInt(t)||0)},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:O,onValueChange:P,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:["Siyah","Beyaz","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Boy:"}),i.jsxs(eO,{value:A,onValueChange:E,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Boy seçin"})}),i.jsx(sO,{children:te.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),(null==se?void 0:se.shorts_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",se.shorts_price]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Oyuncu Çorap"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===_?"":_,onChange:e=>{const t=e.target.value;S(""===t?0:parseInt(t)||0)},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Tip:"}),i.jsxs(eO,{value:D,onValueChange:M,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Tip seçin"})}),i.jsx(sO,{children:re.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:z,onValueChange:R,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:ae.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),(null==se?void 0:se.socks_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",se.socks_price]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-orange-700 border-b pb-2",children:"Kaleci Ek Ürünleri"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:J?"Kaleci Uzun Şort":"Kaleci Şort"}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:J,onChange:e=>ee(e.target.checked),className:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 dark:focus:ring-orange-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),i.jsx("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-400",children:"Uzun Alt"})]})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===q?"":q,onChange:e=>{const t=e.target.value;$(""===t?0:parseInt(t)||0)},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:H,onValueChange:Y,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:["Siyah"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Boy:"}),i.jsxs(eO,{value:V,onValueChange:G,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Boy seçin"})}),i.jsx(sO,{children:te.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),(null==se?void 0:se.shorts_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",se.shorts_price]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Kaleci Çorap"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===K?"":K,onChange:e=>{const t=e.target.value;U(""===t?0:parseInt(t)||0)},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Tip:"}),i.jsxs(eO,{value:W,onValueChange:Q,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Tip seçin"})}),i.jsx(sO,{children:re.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:X,onValueChange:Z,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:ae.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),(null==se?void 0:se.socks_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",se.socks_price]})]})]})]}),(w>0||_>0||C>0||q>0||K>0)&&i.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded text-sm space-y-2",children:[i.jsx("div",{className:"font-semibold",children:"Ek Ürünler Toplamı:"}),i.jsxs("div",{className:"space-y-1 text-xs",children:[w>0&&i.jsxs("div",{children:["Oyuncu Şort: ",w," x ₺",(null==se?void 0:se.shorts_price)||0," = ₺",(w*((null==se?void 0:se.shorts_price)||0)).toFixed(2)]}),_>0&&i.jsxs("div",{children:["Oyuncu Çorap: ",_," x ₺",(null==se?void 0:se.socks_price)||0," = ₺",(_*((null==se?void 0:se.socks_price)||0)).toFixed(2)]}),C>0&&i.jsxs("div",{children:["Kaleci Forması: ",C," x ₺",(null==se?void 0:se.goalkeeper_price)||0," = ₺",(C*((null==se?void 0:se.goalkeeper_price)||0)).toFixed(2)]}),q>0&&i.jsxs("div",{children:[J?"Kaleci Uzun Şort":"Kaleci Şort",": ",q," x ₺",(null==se?void 0:se.shorts_price)||0," = ₺",(q*((null==se?void 0:se.shorts_price)||0)).toFixed(2)]}),K>0&&i.jsxs("div",{children:["Kaleci Çorap: ",K," x ₺",(null==se?void 0:se.socks_price)||0," = ₺",(K*((null==se?void 0:se.socks_price)||0)).toFixed(2)]})]}),i.jsxs("div",{className:"font-semibold border-t pt-2",children:["Toplam: ₺",(w*((null==se?void 0:se.shorts_price)||0)+_*((null==se?void 0:se.socks_price)||0)+C*((null==se?void 0:se.goalkeeper_price)||0)+q*((null==se?void 0:se.shorts_price)||0)+K*((null==se?void 0:se.socks_price)||0)).toFixed(2)]})]}),i.jsx("div",{className:"mt-4",children:i.jsx(oo,{onClick:pe,disabled:!(l&&c&&(u||w||_||C||q||K)&&se&&0!==se.stock_quantity),className:"w-full",children:0===(null==se?void 0:se.stock_quantity)?"Stokta Yok":"Sepete Ekle"})})]})]})]})}),i.jsx(sd,{open:h,onOpenChange:p,children:i.jsxs(cd,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsx(dd,{children:i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(ln,{className:"h-5 w-5"}),"Metin ile Giriş - ",e.name]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"📝 Kullanım Kılavuzu"}),i.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[i.jsx("p",{children:"Ayırıcılar: -, |, ,, ; veya boşluk"}),i.jsx("p",{children:"Tab ile ürün direk girebilirsiniz"}),i.jsx("p",{children:"• ↑ beden artır, ↓ beden azalt"}),i.jsx("p",{children:"• ← rengi geri alır, → rengi ileri alır"})]}),i.jsx("div",{className:"mt-3 text-xs text-blue-600 dark:text-blue-400",children:i.jsxs("p",{children:[i.jsx("strong",{children:"Mevcut Bedenler:"})," ",e.sizes.join(", ")]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block text-blue-700 font-semibold",children:"🔵 Oyuncu Formaları:"}),i.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[i.jsx("strong",{children:"Mevcut Renkler:"})," ",e.colors.join(", ")]}),i.jsx(v6,{placeholder:`Örnek:\n${oe()}`,value:x,onChange:e=>g(e.target.value),onKeyDown:t=>{const r=t.currentTarget,a=r.selectionStart,n=x.substring(0,a);x.substring(a);const s=x.split("\n"),i=n.split("\n").length-1,l=s[i]||"";if("ArrowUp"!==t.key&&"ArrowDown"!==t.key)if("ArrowLeft"!==t.key&&"ArrowRight"!==t.key){if("Tab"===t.key){if(t.preventDefault(),""===l.trim()||"ornek"===l.trim().toLowerCase()){const e=[...s];e[i]=l.replace(/ornek\s*$/i,"")+oe();const t=e.join("\n");return g(t),void setTimeout((()=>{const e=a-l.length+oe().length;r.setSelectionRange(e,e)}),0)}const n=ue(l);if(n&&n.color){const t=de(n.color,e.colors);if(t&&t!==n.color){const e=`${n.quantity}${n.separator}${n.size}${n.separator}${t}`,o=[...s];o[i]=e;const c=o.join("\n");return g(c),void setTimeout((()=>{const t=a+(e.length-l.length);r.setSelectionRange(t,t)}),0)}}}}else{t.preventDefault();const n="ArrowRight"===t.key?"right":"left",o=he(l,n,e.colors);if(o!==l){const e=[...s];e[i]=o;const t=e.join("\n");g(t),setTimeout((()=>{const e=a+(o.length-l.length);r.setSelectionRange(e,e)}),0)}}else{t.preventDefault();const e="ArrowUp"===t.key?"up":"down",n=me(l,e);if(n!==l){const e=[...s];e[i]=n;const t=e.join("\n");g(t),setTimeout((()=>{const e=a+(n.length-l.length);r.setSelectionRange(e,e)}),0)}}},rows:6,className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block text-orange-700 font-semibold",children:"🟠 Kaleci Formaları:"}),i.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[i.jsx("strong",{children:"Mevcut Renkler:"})," ",ne.join(", ")]}),i.jsx(v6,{placeholder:`Örnek:\n${ce()}`,value:f,onChange:e=>y(e.target.value),onKeyDown:e=>{const t=e.currentTarget,r=t.selectionStart,a=f.substring(0,r);f.substring(r);const n=f.split("\n"),s=a.split("\n").length-1,i=n[s]||"";if("ArrowUp"!==e.key&&"ArrowDown"!==e.key)if("ArrowLeft"!==e.key&&"ArrowRight"!==e.key){if("Tab"===e.key){if(e.preventDefault(),""===i.trim()||"ornek"===i.trim().toLowerCase()){const e=[...n];e[s]=i.replace(/ornek\s*$/i,"")+ce();const a=e.join("\n");return y(a),void setTimeout((()=>{const e=r-i.length+ce().length;t.setSelectionRange(e,e)}),0)}const a=ue(i);if(a&&a.color){const e=de(a.color,ne);if(e&&e!==a.color){const l=`${a.quantity}${a.separator}${a.size}${a.separator}${e}`,o=[...n];o[s]=l;const c=o.join("\n");return y(c),void setTimeout((()=>{const e=r+(l.length-i.length);t.setSelectionRange(e,e)}),0)}}}}else{e.preventDefault();const a="ArrowRight"===e.key?"right":"left",l=he(i,a,ne);if(l!==i){const e=[...n];e[s]=l;const a=e.join("\n");y(a),setTimeout((()=>{const e=r+(l.length-i.length);t.setSelectionRange(e,e)}),0)}}else{e.preventDefault();const a="ArrowUp"===e.key?"up":"down",l=me(i,a);if(l!==i){const e=[...n];e[s]=l;const a=e.join("\n");y(a),setTimeout((()=>{const e=r+(l.length-i.length);t.setSelectionRange(e,e)}),0)}}},rows:6,className:"w-full"})]})]}),!j&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{onClick:()=>{if(x.trim()||f.trim()){const t=((t,r)=>{const a=[],n=[];t.split("\n").filter((e=>e.trim())).forEach(((t,r)=>{const n=t.trim();if(!n)return;const s={line:n,type:"Oyuncu",quantity:0,size:"",color:"",errors:[]},i=ue(n),l=1===e.colors.length;if(i&&i.quantity&&i.size){const t=parseInt(i.quantity);if(isNaN(t)||t<=0?s.errors.push(`Oyuncu Satır ${r+1}: Adet geçerli bir pozitif sayı olmalı`):s.quantity=t,e.sizes.includes(i.size)?s.size=i.size:s.errors.push(`Oyuncu Satır ${r+1}: "${i.size}" bedeni mevcut değil. Mevcut bedenler: ${e.sizes.join(", ")}`),l)s.color=e.colors[0];else{const t=i.color;if(t){const a=de(t,e.colors);a?s.color=a:s.errors.push(`Oyuncu Satır ${r+1}: "${t}" rengi mevcut değil. Mevcut renkler: ${e.colors.join(", ")}`)}else s.errors.push(`Oyuncu Satır ${r+1}: Renk belirtmeniz gerekli. Mevcut renkler: ${e.colors.join(", ")}`)}}else{const e=l?"Adet - Beden":"Adet - Beden - Renk";s.errors.push(`Oyuncu Satır ${r+1}: Format hatalı. Doğru format: "${e}"`)}a.push(s)})),r.split("\n").filter((e=>e.trim())).forEach(((t,r)=>{const n=t.trim();if(!n)return;const s={line:n,type:"Kaleci",quantity:0,size:"",color:"",errors:[]},i=ue(n),l=1===ne.length;if(i&&i.quantity&&i.size){const t=parseInt(i.quantity);if(isNaN(t)||t<=0?s.errors.push(`Kaleci Satır ${r+1}: Adet geçerli bir pozitif sayı olmalı`):s.quantity=t,e.sizes.includes(i.size)?s.size=i.size:s.errors.push(`Kaleci Satır ${r+1}: "${i.size}" bedeni mevcut değil. Mevcut bedenler: ${e.sizes.join(", ")}`),l)s.color=ne[0];else{const e=i.color;if(e){const t=de(e,ne);t?s.color=t:s.errors.push(`Kaleci Satır ${r+1}: "${e}" rengi mevcut değil. Mevcut kaleci renkleri: ${ne.join(", ")}`)}else s.errors.push(`Kaleci Satır ${r+1}: Renk belirtmeniz gerekli. Mevcut kaleci renkleri: ${ne.join(", ")}`)}}else{const e=l?"Adet - Beden":"Adet - Beden - Renk";s.errors.push(`Kaleci Satır ${r+1}: Format hatalı. Doğru format: "${e}"`)}a.push(s)}));const s=n.length>0||a.some((e=>e.errors.length>0));return{entries:a,errors:n,canApply:!s}})(x,f);b(t),k(!0)}},disabled:!x.trim()&&!f.trim(),children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),"Kontrol Et"]}),i.jsxs(oo,{variant:"outline",onClick:le,children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"İptal"]})]}),j&&v&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[i.jsx(Tr,{className:"h-5 w-5"}),"Kontrol Sonucu"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.entries.filter((e=>0===e.errors.length)).length}),i.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"✅ Başarılı"})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:v.entries.filter((e=>e.errors.length>0)).length}),i.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:"❌ Hatalı"})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.entries.length}),i.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"📋 Toplam"})]})]}),i.jsx("div",{className:"space-y-2",children:v.entries.map(((e,t)=>i.jsxs("div",{className:"border rounded-lg p-3 "+(0===e.errors.length?"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800":"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800"),children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[0===e.errors.length?i.jsx(Or,{className:"h-4 w-4 text-green-600"}):i.jsx(Er,{className:"h-4 w-4 text-red-600"}),i.jsx("span",{className:"font-mono text-sm",children:e.line})]}),0===e.errors.length&&i.jsxs("div",{className:"text-xs text-green-600 font-medium",children:[e.type," • ",e.quantity," adet • ",e.size," beden • ",e.color]})]}),e.errors.length>0&&i.jsx("div",{className:"space-y-1",children:e.errors.map(((e,t)=>i.jsxs("div",{className:"text-sm text-red-700 dark:text-red-300 flex items-center gap-1",children:[i.jsx(Tr,{className:"h-3 w-3"}),e]},t)))})]},t)))}),i.jsxs("div",{className:"border-t pt-4 space-y-3",children:[v.canApply?i.jsxs(C5,{className:"border-green-200 bg-green-50 dark:bg-green-900/20",children:[i.jsx(Or,{className:"h-4 w-4 text-green-600"}),i.jsx(T5,{className:"text-green-800 dark:text-green-200",children:"🎉 Her şey hazır! Ürünler sepete eklenebilir."})]}):i.jsxs(C5,{variant:"destructive",children:[i.jsx(Er,{className:"h-4 w-4"}),i.jsx(T5,{children:"❌ Önce hataları düzeltin! Sepete ekleme yapılamaz."})]}),i.jsxs("div",{className:"flex gap-2",children:[v.canApply?i.jsxs(oo,{onClick:()=>{if(v&&v.canApply){const s=[];v.entries.forEach(((a,i)=>{if(0===a.errors.length)if("Oyuncu"===a.type){const i=e.variations.find((e=>e.color===a.color&&e.size===a.size));if(i){const l=`${e.name}-${a.color}-${a.size}`;if(r.find((e=>e.id===l)))t(e,a.color,a.size,a.quantity,i);else{const t=(i.final_price||0)*a.quantity,r={id:l,name:e.name,type:"ready_stock",category:e.category,color:a.color,size:a.size,sizes:[{size:a.size,quantity:a.quantity,variation_id:i.variation_id}],quantity:a.quantity,unitPrice:i.final_price||0,totalPrice:t,variationId:i.variation_id,sku:i.sku,image:n(i.images),goalkeeperDetails:[],playerShortsDetails:[],playerSocksDetails:[],goalkeeperShortsDetails:[],goalkeeperSocksDetails:[],playerShortsTotalPrice:0,playerSocksTotalPrice:0,goalkeeperShortsTotalPrice:0,goalkeeperSocksTotalPrice:0,shortsQuantity:0,socksQuantity:0,goalkeeperQuantity:0,shortsUnitPrice:i.shorts_price,socksUnitPrice:i.socks_price,goalkeeperUnitPrice:i.goalkeeper_price,shortsTotalPrice:0,socksTotalPrice:0,goalkeeperTotalPrice:0,goalkeeperColor:"",goalkeeperSize:""};s.push(r)}}}else if("Kaleci"===a.type){const i=e.variations.find((e=>e.size===a.size))||e.variations[0];if(i){const l=`${e.name}-${i.color}-${a.size}`;if(r.find((e=>e.id===l)))t(e,i.color,a.size,0,i,0,0,"","","","",a.quantity,a.color,a.size);else{const t=(i.goalkeeper_price||0)*a.quantity,r=[{quantity:a.quantity,color:a.color,size:a.size,unitPrice:i.goalkeeper_price||0}],o={id:l,name:e.name,type:"ready_stock",category:e.category,color:i.color,size:"",sizes:[],quantity:0,unitPrice:i.final_price||0,totalPrice:0,variationId:i.variation_id,sku:i.sku,image:n(i.images),goalkeeperDetails:r,playerShortsDetails:[],playerSocksDetails:[],goalkeeperShortsDetails:[],goalkeeperSocksDetails:[],playerShortsTotalPrice:0,playerSocksTotalPrice:0,goalkeeperShortsTotalPrice:0,goalkeeperSocksTotalPrice:0,shortsQuantity:0,socksQuantity:0,goalkeeperQuantity:a.quantity,shortsUnitPrice:i.shorts_price,socksUnitPrice:i.socks_price,goalkeeperUnitPrice:i.goalkeeper_price,shortsTotalPrice:0,socksTotalPrice:0,goalkeeperTotalPrice:t,goalkeeperColor:a.color,goalkeeperSize:a.size};s.push(o)}}}})),s.length>0&&a([...r,...s]),g(""),y(""),b(null),k(!1),p(!1)}},className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),"✅ Sepete Ekle"]}):i.jsxs(oo,{disabled:!0,className:"bg-gray-400 cursor-not-allowed",children:[i.jsx(Er,{className:"h-4 w-4 mr-2"}),"❌ Önce Hataları Düzeltin"]}),i.jsx(oo,{variant:"outline",onClick:()=>k(!1),children:"↩️ Düzenle"}),i.jsxs(oo,{variant:"outline",onClick:le,children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"İptal"]})]})]})]})})]})]})})]})}function Hae({product:e,onAddToOrder:t,orderItems:r,onImageClick:a}){const[n,s]=ze.useState(e.colors[0]||""),[l,o]=ze.useState(e.sizes[0]||""),[c,d]=ze.useState(0),[u,m]=ze.useState(0),[h,p]=ze.useState(0),[x,g]=ze.useState(0),[f,y]=ze.useState("Siyah"),[v,b]=ze.useState("L"),[j,k]=ze.useState("Yetişkin"),[w,N]=ze.useState("Beyaz"),[_,S]=ze.useState("Fosfor Turuncu"),[C,T]=ze.useState(e.sizes[0]||""),[O,P]=ze.useState(0),[A,E]=ze.useState(0),[D,M]=ze.useState(""),[z,R]=ze.useState("L"),[I,F]=ze.useState("Yetişkin"),[B,L]=ze.useState("Beyaz"),[q,$]=ze.useState(!1),[K,U]=ze.useState(!1),[H,Y]=ze.useState("");ze.useState("");const[V,G]=ze.useState([]),[W,Q]=ze.useState([]),[X,Z]=ze.useState(!1),[J,ee]=ze.useState(""),[te,re]=ze.useState(""),[ae,ne]=ze.useState(null),[se,ie]=ze.useState(!1),le=["104","116","128","140","152","164","176","XS","S","M","L","XL","XXL","XXXL","4XL"],oe=["Fosfor Turuncu","Fosfor Yeşil","Saks Mavi","Kırmızı","Yeşil","Sarı","Pembe","Turkuaz","Gri"],ce=e.variations.find((e=>e.color===n&&e.size===l)),de="Özel Tasarım"===e.category||"Tasarım"===e.category||e.name.toLowerCase().includes("forma")||e.name.toLowerCase().includes("jersey")||e.name.toLowerCase().includes("üniforma")||e.name.toLowerCase().includes("tasarım"),ue=()=>{try{const e=new Audio("https://github.com/xMrGadgetx/Data/raw/refs/heads/master/luvvoice.com-20250624-2TE589.mp3");e.volume=.5,e.play().catch(console.error)}catch(e){}},me=e=>{const t=e.trim();if(!t)return null;let r="",a="",s="";if(t.includes("-")){const e=t.split("-").map((e=>e.trim()));e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}else if(t.includes("|")){const e=t.split("|").map((e=>e.trim()));e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}else if(t.includes(",")){const e=t.split(",").map((e=>e.trim()));e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}else if(t.includes(";")){const e=t.split(";").map((e=>e.trim()));e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}else{const e=t.split(/\s+/);e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}return{quantity:r&&parseInt(r)||0,size:a,color:s||n}},he=t=>{if(!t)return n;const r=t.toLowerCase().replace(/ı/g,"i").replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ö/g,"o").replace(/ç/g,"c"),a=e.colors;for(const e of a)if(e.toLowerCase()===t.toLowerCase())return e;for(const e of a){const t=e.toLowerCase().replace(/ı/g,"i").replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ö/g,"o").replace(/ç/g,"c");if(t.includes(r)||r.includes(t))return e}return n},pe=()=>{Z(!1),ee(""),re(""),ne(null),ie(!1)},xe=(t,r)=>{const a=me(t);if(!a||!a.size)return t;const n=e.sizes.indexOf(a.size);if(-1===n)return t;let s=n;"up"===r&&n<e.sizes.length-1?s=n+1:"down"===r&&n>0&&(s=n-1);const i=e.sizes[s];return t.replace(a.size,i)},ge=(e,t,r)=>{const a=me(e);if(!a||!a.color)return e;const n=r.indexOf(a.color);if(-1===n)return e;let s=n;"right"===t&&n<r.length-1?s=n+1:"left"===t&&n>0&&(s=n-1);const i=r[s];return e.replace(a.color,i)},fe=()=>{const r=u>0||h>0||x>0||O>0||A>0;return O>0&&!D.trim()?(Fs.error("Kaleci şortu için renk girmediniz. Derya hanım giriş yapın artık!"),void ue()):u>0&&!f?(Fs.error("Oyuncu şortu için renk seçmediniz!"),void ue()):!(x>0)||_&&C?void(n&&l&&(c>0||r)&&ce&&(t(e,n,l,c,ce,u,h,f,j,v,w,x,_,C,O,A,D,I,z,B,q),d(0),m(0),p(0),g(0),P(0),E(0),$(!1))):(Fs.error("Kaleci forması için renk ve beden seçmediniz!"),void ue())};return i.jsxs(ro,{className:"relative",children:[i.jsxs(Co,{variant:(null==ce?void 0:ce.stock_quantity)&&ce.stock_quantity>0?"default":"destructive",className:"absolute top-2 left-2 text-xs z-10",children:["Stok: ",(null==ce?void 0:ce.stock_quantity)||0]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>Z(!0),className:"absolute top-2 right-2 text-xs z-10 bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700",children:[i.jsx(ln,{className:"h-3 w-3 mr-1"}),"Metin ile Giriş"]}),i.jsx(io,{className:"p-4 pt-8",tabIndex:0,style:{outline:"none"},children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("img",{src:Array.isArray(e.image)?e.image[0]:e.image||"/placeholder.svg",alt:e.name,className:"w-20 h-20 object-cover rounded-lg bg-white border cursor-pointer hover:opacity-80 transition-opacity mix-blend-multiply dark:mix-blend-normal",onClick:()=>a(Array.isArray(e.image)?e.image[0]:e.image||"/placeholder.svg",e.name),onError:e=>{e.currentTarget.src="/placeholder.svg"}})}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.name}),i.jsx(Co,{variant:"outline",className:"text-xs px-2 py-1",children:e.category})]}),i.jsxs("p",{className:"text-xl font-bold text-blue-600 mt-1",children:["₺",(null==ce?void 0:ce.final_price)||e.basePrice]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Renk:"}),i.jsxs(eO,{value:n,onValueChange:s,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:e.colors.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Beden:"}),i.jsxs(eO,{value:l,onValueChange:o,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Beden seçin"})}),i.jsx(sO,{children:e.sizes.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Oyuncu Adeti"}),i.jsx(co,{type:"number",min:0,max:null==ce?void 0:ce.stock_quantity,value:0===c?"":c,onChange:e=>{const t=e.target.value;d(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),fe())},className:"mt-1",placeholder:"0"})]}),de&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kaleci Adeti"}),i.jsx(co,{type:"number",min:0,max:(null==ce?void 0:ce.stock_quantity)||0,value:0===x?"":x,onChange:e=>{const t=e.target.value;g(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),fe())},className:"mt-1",placeholder:"0"}),(null==ce?void 0:ce.goalkeeper_price)&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Birim fiyat: ₺",ce.goalkeeper_price]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kaleci Renk:"}),i.jsx(co,{type:"text",value:_,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),fe())},className:"mt-1",placeholder:"Renk girin"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kaleci Beden:"}),i.jsxs(eO,{value:C,onValueChange:T,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Beden seçin"})}),i.jsx(sO,{children:e.sizes.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),!de&&i.jsx("div",{className:"flex items-end col-span-1",children:i.jsx(oo,{onClick:fe,disabled:!(n&&l&&(c||u||h||x)&&ce&&0!==ce.stock_quantity),className:"w-full",children:0===(null==ce?void 0:ce.stock_quantity)?"Stokta Yok":"Sepete Ekle"})})]}),K&&i.jsx("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50 dark:bg-gray-800",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Oyuncu Formaları:"}),i.jsx(v6,{value:H,onChange:e=>Y(e.target.value),onKeyDown:t=>((t,r)=>{if(!r)return;const{selectionStart:a,selectionEnd:n,value:s}=r;if("ArrowUp"===t.key||"ArrowDown"===t.key){t.preventDefault();const e=s.substring(0,a).split("\n"),n=e.length-1;e[n];const i=a-e.slice(0,n).join("\n").length-(n>0?1:0);if("ArrowUp"===t.key&&n>0){const t=s.split("\n")[n-1],a=e.slice(0,n-1).join("\n").length+(n>1?1:0)+Math.min(i,t.length);r.setSelectionRange(a,a)}else if("ArrowDown"===t.key&&n<s.split("\n").length-1){const t=s.split("\n")[n+1],a=e.join("\n").length+1+Math.min(i,t.length);r.setSelectionRange(a,a)}}if("Tab"===t.key){t.preventDefault(),s.split("\n");const i=s.lastIndexOf("\n",a-1)+1,l=s.substring(i,-1===s.indexOf("\n",a)?s.length:s.indexOf("\n",a)),o=e.sizes,c=l.split(/\s+/),d=c[c.length-1];if(d){const e=o.filter((e=>e.toLowerCase().startsWith(d.toLowerCase())));if(1===e.length){const t=s.substring(0,a-d.length)+e[0]+s.substring(n);ee(t);const i=a-d.length+e[0].length;setTimeout((()=>r.setSelectionRange(i,i)),0)}}}})(t,t.target),placeholder:"Format: İsim Beden Adet (her satıra bir oyuncu)\nÖrnek:\nAhmet L 1\nMehmet XL 1",className:"mt-1 font-mono text-sm",rows:6}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx(oo,{type:"button",size:"sm",onClick:()=>(async r=>{const a=r.split("\n").filter((e=>e.trim()));let n=0;for(const s of a){const r=me(s);if(!r)continue;const{size:a,quantity:i,color:l}=r,o=he(l),c=e.variations.find((e=>e.color===o&&e.size===a));c&&c.stock_quantity>=i&&(t(e,o,a,i,c,0,0,"Varsayılan","M","M","Beyaz",0,"Fosfor Turuncu",a,0,0,"Siyah","5","5","Beyaz",!1),n++)}n>0&&(Y(""),U(!1))})(H),disabled:!H.trim(),children:"Oyuncu Formalarını Ekle"}),i.jsx(oo,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=(t=>{const r=t.split("\n").filter((e=>e.trim())),a=[],n=[];let s=0;return r.forEach(((t,r)=>{const i=r+1,l=me(t);if(!l)return void a.push(`Satır ${i}: Geçersiz format`);const{size:o,quantity:c,color:d}=l;if(!o||c<=0)return void a.push(`Satır ${i}: Eksik bilgi (beden: "${o}", adet: ${c})`);if(!e.sizes.includes(o))return void a.push(`Satır ${i}: "${o}" bedeni mevcut değil`);const u=he(d),m=e.variations.find((e=>e.color===u&&e.size===o));m?m.stock_quantity<c?a.push(`Satır ${i}: Yetersiz stok (Mevcut: ${m.stock_quantity}, İstenen: ${c})`):(s+=c,n.push(`Satır ${i}: ${u} ${o} (${c} adet) ✓`)):a.push(`Satır ${i}: "${u} - ${o}" kombinasyonu bulunamadı`)})),{errors:a,successes:n,totalQuantity:s}})(H);G(t.errors),Q(t.successes)},disabled:!H.trim(),children:"Kontrol Et"})]})]}),(V.length>0||W.length>0)&&i.jsxs("div",{className:"space-y-2",children:[V.length>0&&i.jsxs(C5,{children:[i.jsx(Er,{className:"h-4 w-4"}),i.jsx(T5,{children:i.jsxs("div",{className:"text-sm",children:[i.jsxs("strong",{children:["Hatalar (",V.length,"):"]}),i.jsxs("ul",{className:"mt-1 space-y-1",children:[V.slice(0,5).map(((e,t)=>i.jsx("li",{className:"text-red-600",children:e},t))),V.length>5&&i.jsxs("li",{className:"text-gray-500",children:["... ve ",V.length-5," hata daha"]})]})]})})]}),W.length>0&&i.jsxs(C5,{children:[i.jsx(Or,{className:"h-4 w-4"}),i.jsx(T5,{children:i.jsxs("div",{className:"text-sm",children:[i.jsxs("strong",{children:["Başarılı (",W.length,"):"]}),i.jsxs("ul",{className:"mt-1 space-y-1",children:[W.slice(0,3).map(((e,t)=>i.jsx("li",{className:"text-green-600",children:e},t))),W.length>3&&i.jsxs("li",{className:"text-gray-500",children:["... ve ",W.length-3," başarılı daha"]})]})]})})]})]})]})}),de&&i.jsxs("div",{className:"border-t pt-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-blue-700 border-b pb-2",children:"Oyuncu Ek Ürünleri"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Oyuncu Şort"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===u?"":u,onChange:e=>{const t=e.target.value;m(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),fe())},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:f,onValueChange:y,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:["Siyah","Beyaz","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Boy:"}),i.jsxs(eO,{value:v,onValueChange:b,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Boy seçin"})}),i.jsx(sO,{children:le.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),(null==ce?void 0:ce.shorts_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",ce.shorts_price]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Oyuncu Çorap"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===h?"":h,onChange:e=>{const t=e.target.value;p(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),fe())},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Tip:"}),i.jsxs(eO,{value:j,onValueChange:k,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Tip seçin"})}),i.jsx(sO,{children:["Yetişkin","Çocuk"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:w,onValueChange:N,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:["Beyaz","Siyah","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz","Sarı","Turuncu"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),(null==ce?void 0:ce.socks_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",ce.socks_price]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-orange-700 border-b pb-2",children:"Kaleci Ek Ürünleri"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:q?"Kaleci Uzun Şort":"Kaleci Şort"}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:q,onChange:e=>$(e.target.checked),className:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 dark:focus:ring-orange-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),i.jsx("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-400",children:"Uzun Alt"})]})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===O?"":O,onChange:e=>{const t=e.target.value;P(""===t?0:parseInt(t)||0)},onKeyDown:e=>{if("Enter"===e.key){if(e.preventDefault(),O>0&&!D.trim())return Fs.error("Kaleci şortu için renk girmediniz. Derya hanım giriş yapın artık!"),void ue();fe()}},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsx(co,{type:"text",value:D,onChange:e=>M(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),fe())},className:"mt-1",placeholder:"Renk girin"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Boy:"}),i.jsxs(eO,{value:z,onValueChange:R,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Boy seçin"})}),i.jsx(sO,{children:le.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),(null==ce?void 0:ce.shorts_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",ce.shorts_price]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Kaleci Çorap"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===A?"":A,onChange:e=>{const t=e.target.value;E(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),fe())},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Tip:"}),i.jsxs(eO,{value:I,onValueChange:F,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Tip seçin"})}),i.jsx(sO,{children:["Yetişkin","Çocuk"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:B,onValueChange:L,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:["Beyaz","Siyah","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz","Sarı","Turuncu"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),(null==ce?void 0:ce.socks_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",ce.socks_price]})]})]})]}),(u>0||h>0||x>0||O>0||A>0)&&i.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded text-sm space-y-2",children:[i.jsx("div",{className:"font-semibold",children:"Ek Ürünler Toplamı:"}),i.jsxs("div",{className:"space-y-1 text-xs",children:[u>0&&i.jsxs("div",{children:["Oyuncu Şort: ",u," x ₺",(null==ce?void 0:ce.shorts_price)||0," = ₺",(u*((null==ce?void 0:ce.shorts_price)||0)).toFixed(2)]}),h>0&&i.jsxs("div",{children:["Oyuncu Çorap: ",h," x ₺",(null==ce?void 0:ce.socks_price)||0," = ₺",(h*((null==ce?void 0:ce.socks_price)||0)).toFixed(2)]}),x>0&&i.jsxs("div",{children:["Kaleci Forması: ",x," x ₺",(null==ce?void 0:ce.goalkeeper_price)||0," = ₺",(x*((null==ce?void 0:ce.goalkeeper_price)||0)).toFixed(2)]}),O>0&&i.jsxs("div",{children:[q?"Kaleci Uzun Şort":"Kaleci Şort",": ",O," x ₺",(null==ce?void 0:ce.shorts_price)||0," = ₺",(O*((null==ce?void 0:ce.shorts_price)||0)).toFixed(2)]}),A>0&&i.jsxs("div",{children:["Kaleci Çorap: ",A," x ₺",(null==ce?void 0:ce.socks_price)||0," = ₺",(A*((null==ce?void 0:ce.socks_price)||0)).toFixed(2)]})]}),i.jsxs("div",{className:"font-semibold border-t pt-2",children:["Toplam: ₺",(u*((null==ce?void 0:ce.shorts_price)||0)+h*((null==ce?void 0:ce.socks_price)||0)+x*((null==ce?void 0:ce.goalkeeper_price)||0)+O*((null==ce?void 0:ce.shorts_price)||0)+A*((null==ce?void 0:ce.socks_price)||0)).toFixed(2)]})]}),i.jsx("div",{className:"mt-4",children:i.jsx(oo,{onClick:fe,disabled:!(n&&l&&(c||u||h||x||O||A)&&ce&&0!==ce.stock_quantity),className:"w-full",children:0===(null==ce?void 0:ce.stock_quantity)?"Stokta Yok":"Sepete Ekle"})})]})]})]})}),i.jsx(sd,{open:X,onOpenChange:Z,children:i.jsxs(cd,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsx(dd,{children:i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(ln,{className:"h-5 w-5"}),"Metin ile Giriş - ",e.name]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"📝 Kullanım Kılavuzu"}),i.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[i.jsx("p",{children:"Ayırıcılar: -, |, ,, ; veya boşluk"}),i.jsx("p",{children:"Tab ile ürün direk girebilirsiniz"}),i.jsx("p",{children:"• ↑ beden artır, ↓ beden azalt"}),i.jsx("p",{children:"• ← rengi geri alır, → rengi ileri alır"})]}),i.jsx("div",{className:"mt-3 text-xs text-blue-600 dark:text-blue-400",children:i.jsxs("p",{children:[i.jsx("strong",{children:"Mevcut Bedenler:"})," ",e.sizes.join(", ")]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block text-blue-700",children:"🔵 Oyuncu Formaları:"}),i.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[i.jsx("strong",{children:"Mevcut Renkler:"})," ",e.colors.join(", ")]}),i.jsx(v6,{placeholder:`Örnek:\n${(()=>{const t=e.sizes.slice(0,3),r=e.colors.slice(0,2);return t.map(((e,t)=>`${t+1} - ${e} - ${r[t%r.length]||r[0]}`)).join("\n")})()}`,value:J,onChange:e=>ee(e.target.value),onKeyDown:t=>{const r=t.currentTarget,{selectionStart:a,selectionEnd:n,value:s}=r;if("Enter"===t.key&&!t.shiftKey)return t.preventDefault(),void fe();if("ArrowUp"===t.key||"ArrowDown"===t.key){t.preventDefault();const e=s.split("\n"),n=s.lastIndexOf("\n",a-1)+1;s.indexOf("\n",a);const i=s.substring(0,a).split("\n").length-1;if(i>=0&&i<e.length){const s=e[i],l=xe(s,"ArrowUp"===t.key?"up":"down"),o=[...e];o[i]=l;const c=o.join("\n");ee(c),setTimeout((()=>{const e=n+(a-n);r.setSelectionRange(e,e)}),0)}}else if("ArrowLeft"===t.key||"ArrowRight"===t.key){if(t.ctrlKey||t.metaKey){t.preventDefault();const r=s.split("\n"),n=s.substring(0,a).split("\n").length-1;if(n>=0&&n<r.length){const a=r[n],s=ge(a,"ArrowLeft"===t.key?"left":"right",e.colors),i=[...r];i[n]=s;const l=i.join("\n");ee(l)}}}else if("Tab"===t.key){t.preventDefault();const r=s.split("\n"),n=s.substring(0,a).split("\n").length-1;if(n>=0&&n<r.length){const t=r[n].trim();if(t){const a=me(t);if(a&&a.quantity>0&&a.size){const t=1===e.colors.length?`${a.quantity} - ${a.size} - ${e.colors[0]}`:`${a.quantity} - ${a.size} - ${a.color||e.colors[0]}`,s=[...r];s[n]=t,ee(s.join("\n"))}}}}},rows:6,className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block text-orange-700",children:"🟠 Kaleci Formaları:"}),i.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[i.jsx("strong",{children:"Mevcut Renkler:"})," ",oe.join(", ")]}),i.jsx(v6,{placeholder:`Örnek:\n${(()=>{const t=e.sizes.slice(0,2),r=oe.slice(0,2);return t.map(((e,t)=>`${t+1} - ${e} - ${r[t%r.length]||r[0]}`)).join("\n")})()}`,value:te,onChange:e=>re(e.target.value),onKeyDown:e=>{const t=e.currentTarget,{selectionStart:r,selectionEnd:a,value:n}=t;if("Enter"===e.key&&!e.shiftKey)return e.preventDefault(),void fe();if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const a=n.split("\n"),s=n.lastIndexOf("\n",r-1)+1;n.indexOf("\n",r);const i=n.substring(0,r).split("\n").length-1;if(i>=0&&i<a.length){const n=a[i],l=xe(n,"ArrowUp"===e.key?"up":"down"),o=[...a];o[i]=l;const c=o.join("\n");re(c),setTimeout((()=>{const e=s+(r-s);t.setSelectionRange(e,e)}),0)}}else if("ArrowLeft"===e.key||"ArrowRight"===e.key){if(e.ctrlKey||e.metaKey){e.preventDefault();const t=n.split("\n"),a=n.substring(0,r).split("\n").length-1;if(a>=0&&a<t.length){const r=t[a],n=ge(r,"ArrowLeft"===e.key?"left":"right",oe),s=[...t];s[a]=n;const i=s.join("\n");re(i)}}}else if("Tab"===e.key){e.preventDefault();const t=n.split("\n"),a=n.substring(0,r).split("\n").length-1;if(a>=0&&a<t.length){const e=t[a].trim();if(e){const r=me(e);if(r&&r.quantity>0&&r.size){const e=1===oe.length?`${r.quantity} - ${r.size} - ${oe[0]}`:`${r.quantity} - ${r.size} - ${r.color||oe[0]}`,n=[...t];n[a]=e,re(n.join("\n"))}}}}},rows:6,className:"w-full"})]})]}),!se&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{onClick:()=>{if(J.trim()||te.trim()){const t=((t,r)=>{const a=[],s=[];t.split("\n").filter((e=>e.trim())).forEach(((t,r)=>{const s=t.trim();if(!s)return;const i={line:s,type:"Oyuncu",quantity:0,size:"",color:"",errors:[]},l=me(s),o=1===e.colors.length;if(!l||l.quantity<=0||!l.size){const e=o?"Adet - Beden":"Adet - Beden - Renk";i.errors.push(`Oyuncu Satır ${r+1}: Format hatalı. Doğru format: "${e}"`)}else if(isNaN(l.quantity)||l.quantity<=0?i.errors.push(`Oyuncu Satır ${r+1}: Adet geçerli bir pozitif sayı olmalı`):i.quantity=l.quantity,e.sizes.includes(l.size)?i.size=l.size:i.errors.push(`Oyuncu Satır ${r+1}: "${l.size}" bedeni mevcut değil. Mevcut bedenler: ${e.sizes.join(", ")}`),o)i.color=e.colors[0];else{const t=l.color;if(t){const a=he(t);a&&a!==n?i.color=a:e.colors.includes(t)?i.color=t:i.errors.push(`Oyuncu Satır ${r+1}: "${t}" rengi mevcut değil. Mevcut renkler: ${e.colors.join(", ")}`)}else i.errors.push(`Oyuncu Satır ${r+1}: Renk belirtmeniz gerekli. Mevcut renkler: ${e.colors.join(", ")}`)}a.push(i)})),r.split("\n").filter((e=>e.trim())).forEach(((t,r)=>{const n=t.trim();if(!n)return;const s={line:n,type:"Kaleci",quantity:0,size:"",color:"",errors:[]},i=me(n),l=1===oe.length;if(!i||i.quantity<=0||!i.size){const e=l?"Adet - Beden":"Adet - Beden - Renk";s.errors.push(`Kaleci Satır ${r+1}: Format hatalı. Doğru format: "${e}"`)}else if(isNaN(i.quantity)||i.quantity<=0?s.errors.push(`Kaleci Satır ${r+1}: Adet geçerli bir pozitif sayı olmalı`):s.quantity=i.quantity,e.sizes.includes(i.size)?s.size=i.size:s.errors.push(`Kaleci Satır ${r+1}: "${i.size}" bedeni mevcut değil. Mevcut bedenler: ${e.sizes.join(", ")}`),l)s.color=oe[0];else{const e=i.color;if(e){const t=he(e);oe.includes(e)?s.color=e:t&&oe.includes(t)?s.color=t:s.errors.push(`Kaleci Satır ${r+1}: "${e}" rengi mevcut değil. Mevcut kaleci renkleri: ${oe.join(", ")}`)}else s.errors.push(`Kaleci Satır ${r+1}: Renk belirtmeniz gerekli. Mevcut kaleci renkleri: ${oe.join(", ")}`)}a.push(s)}));const i=s.length>0||a.some((e=>e.errors.length>0));return{entries:a,errors:s,canApply:!i}})(J,te);ne(t),ie(!0)}},disabled:!J.trim()&&!te.trim(),children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),"Kontrol Et"]}),i.jsxs(oo,{variant:"outline",onClick:pe,children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"İptal"]})]}),se&&ae&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[i.jsx(Tr,{className:"h-5 w-5"}),"Kontrol Sonucu"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:ae.entries.filter((e=>0===e.errors.length)).length}),i.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"✅ Başarılı"})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:ae.entries.filter((e=>e.errors.length>0)).length}),i.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:"❌ Hatalı"})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ae.entries.length}),i.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"📋 Toplam"})]})]}),i.jsx("div",{className:"space-y-2",children:ae.entries.map(((e,t)=>i.jsxs("div",{className:"border rounded-lg p-3 "+(0===e.errors.length?"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800":"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800"),children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[0===e.errors.length?i.jsx(Or,{className:"h-4 w-4 text-green-600"}):i.jsx(Er,{className:"h-4 w-4 text-red-600"}),i.jsx("span",{className:"font-mono text-sm",children:e.line})]}),0===e.errors.length&&i.jsxs("div",{className:"text-xs text-green-600 font-medium",children:[e.type," • ",e.quantity," adet • ",e.size," beden • ",e.color]})]}),e.errors.length>0&&i.jsx("div",{className:"space-y-1",children:e.errors.map(((e,t)=>i.jsxs("div",{className:"text-sm text-red-700 dark:text-red-300 flex items-center gap-1",children:[i.jsx(Tr,{className:"h-3 w-3"}),e]},t)))})]},t)))}),i.jsxs("div",{className:"border-t pt-4 space-y-3",children:[ae.canApply?i.jsxs(C5,{className:"border-green-200 bg-green-50 dark:bg-green-900/20",children:[i.jsx(Or,{className:"h-4 w-4 text-green-600"}),i.jsx(T5,{className:"text-green-800 dark:text-green-200",children:"🎉 Her şey hazır! Ürünler sepete eklenebilir."})]}):i.jsxs(C5,{variant:"destructive",children:[i.jsx(Er,{className:"h-4 w-4"}),i.jsx(T5,{children:"❌ Önce hataları düzeltin! Sepete ekleme yapılamaz."})]}),i.jsxs("div",{className:"flex gap-2",children:[ae.canApply?i.jsxs(oo,{onClick:()=>{ae&&ae.canApply&&(ae.entries.forEach((r=>{if(0===r.errors.length){const a=e.variations.find((e=>e.color===r.color&&e.size===r.size));a&&("Oyuncu"===r.type?t(e,r.color,r.size,r.quantity,a,0,0,"","","","",0,"","",0,0,"","","","",!1):"Kaleci"===r.type&&t(e,r.color,r.size,0,a,0,0,"","","","",r.quantity,r.color,r.size,0,0,"","","","",!1))}})),pe())},className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),"✅ Sepete Ekle"]}):i.jsxs(oo,{disabled:!0,className:"bg-gray-400 cursor-not-allowed",children:[i.jsx(Er,{className:"h-4 w-4 mr-2"}),"❌ Önce Hataları Düzeltin"]}),i.jsx(oo,{variant:"outline",onClick:()=>ie(!1),children:"↩️ Düzenle"}),i.jsxs(oo,{variant:"outline",onClick:pe,children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"İptal"]})]})]})]})})]})]})})]})}function Yae({orderItems:e,setOrderItems:t,onContinue:r}){const[a,n]=ze.useState(""),[s,l]=ze.useState("Tümü"),[o,c]=ze.useState("Tümü"),[d,u]=ze.useState(!1),[m,h]=ze.useState(null),[p,x]=ze.useState(1),[g]=ze.useState(5),{data:f,isLoading:y}=y8(),v=e=>{if(!e)return"/placeholder.svg";if(Array.isArray(e)&&e.length>0)return e[0];if("string"==typeof e)try{const t=JSON.parse(e);return Array.isArray(t)&&t.length>0?t[0]:e}catch(die){return e}return"/placeholder.svg"},b=(null==f?void 0:f.filter((e=>"Özel Tasarım"===e.category||"Tasarım"===e.category||e.name.toLowerCase().includes("tasarım"))))||[],j=b.reduce(((e,t)=>{const r=e.find((e=>e.name===t.name));return r?(r.colors.includes(t.color)||r.colors.push(t.color),r.sizes.includes(t.size)||r.sizes.push(t.size),r.variations.push(t),t.final_price!==r.basePrice&&(r.basePrice=Math.min(r.basePrice,t.final_price))):e.push({id:t.id,name:t.name,code:t.code,category:t.category,brand:t.brand,colors:[t.color],sizes:[t.size],basePrice:t.final_price,image:v(t.images),variations:[t]}),e}),[]),k=j.filter((e=>{var t;const r=e.name.toLowerCase().includes(a.toLowerCase())||e.code.toLowerCase().includes(a.toLowerCase())||(null==(t=e.brand)?void 0:t.toLowerCase().includes(a.toLowerCase())),n="Tümü"===s||e.colors.includes(s),i="Tümü"===o||e.brand===o;return r&&n&&i})),w=["Tümü",...Array.from(new Set(b.map((e=>e.color))))],N=["Tümü",...Array.from(new Set(b.map((e=>e.brand)).filter(Boolean)))],_=Math.ceil(k.length/g),S=(p-1)*g,C=S+g,T=k.slice(S,C),O=(e,t)=>{h({url:e,name:t}),u(!0)},P=(r,a,n,s,i,l,o,c,d,u,m,h,p,x,g,f,y,b,j,k,w)=>{if(s<=0&&!((l||0)>0||(o||0)>0||(h||0)>0||(g||0)>0||(f||0)>0))return;const N=Date.now(),_=Math.random().toString(36).substr(2,9),S=`${r.name}-${a}-${n}-${N}-${_}`,C=s>0?e.find((e=>e.name===r.name&&e.color===a&&e.size===n&&e.quantity>0)):null,T=(l||0)*(i.shorts_price||0),O=(o||0)*(i.socks_price||0),P=(g||0)*(i.shorts_price||0),A=(f||0)*(i.socks_price||0),E=(h||0)*(i.goalkeeper_price||0),D=(i.final_price||0)*s;if(C&&s>0){const r=C.quantity+s;let a=C.sizes||[];if(s>0){const e=a.findIndex((e=>e.size===n));e>=0?a[e].quantity+=s:a.push({size:n,quantity:s,variation_id:i.variation_id})}let v=C.goalkeeperDetails||[];if(h&&h>0&&p&&x){const e=v.findIndex((e=>e.color===p&&e.size===x));e>=0?v[e].quantity+=h:v.push({quantity:h,color:p,size:x,unitPrice:i.goalkeeper_price||0})}let N=C.playerShortsDetails||[];if(l&&l>0&&c&&u){const e=N.findIndex((e=>e.color===c&&e.type===u));e>=0?N[e].quantity+=l:N.push({quantity:l,color:c,type:u,unitPrice:i.shorts_price||0})}let _=C.playerSocksDetails||[];if(o&&o>0&&m&&d){const e=_.findIndex((e=>e.color===m&&e.type===d));e>=0?_[e].quantity+=o:_.push({quantity:o,color:m,type:d,unitPrice:i.socks_price||0})}let S=C.goalkeeperShortsDetails||[];if(g&&g>0&&y&&j){const e=w?`${j} - Uzun`:j,t=S.findIndex((t=>t.color===y&&t.type===e));t>=0?S[t].quantity+=g:S.push({quantity:g,color:y,type:e,unitPrice:i.shorts_price||0})}let T=C.goalkeeperSocksDetails||[];if(f&&f>0&&k&&b){const e=T.findIndex((e=>e.color===k&&e.type===b));e>=0?T[e].quantity+=f:T.push({quantity:f,color:k,type:b,unitPrice:i.socks_price||0})}const O=N.reduce(((e,t)=>e+t.quantity),0),P=_.reduce(((e,t)=>e+t.quantity),0),A=v.reduce(((e,t)=>e+t.quantity),0),E=S.reduce(((e,t)=>e+t.quantity),0),D=T.reduce(((e,t)=>e+t.quantity),0);let M=C.size;s>0?1===a.length?M=a[0].size:a.length>1&&(M=`${a.length} farklı beden`):r<=0&&(a=[],M=""),t(e.map((e=>e.id===C.id?{...e,quantity:r,totalPrice:r*(e.unitPrice||0),sizes:a,size:M,goalkeeperQuantity:A,goalkeeperTotalPrice:v.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperDetails:v,playerShortsDetails:N,playerSocksDetails:_,goalkeeperShortsDetails:S,goalkeeperSocksDetails:T,playerShortsTotalPrice:N.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),playerSocksTotalPrice:_.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperShortsTotalPrice:S.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperSocksTotalPrice:T.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),shortsQuantity:O+E,socksQuantity:P+D,shortsTotalPrice:N.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)+S.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),socksTotalPrice:_.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)+T.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperColor:p||e.goalkeeperColor,goalkeeperSize:x||e.goalkeeperSize}:e)))}else{const N=[];h&&h>0&&p&&x&&N.push({quantity:h,color:p,size:x,unitPrice:i.goalkeeper_price||0});const _=[];l&&l>0&&c&&u&&_.push({quantity:l,color:c,type:u,unitPrice:i.shorts_price||0});const C=[];o&&o>0&&m&&d&&C.push({quantity:o,color:m,type:d,unitPrice:i.socks_price||0});const M=[];if(g&&g>0&&y&&j){const e=w?`${j} - Uzun`:j;M.push({quantity:g,color:y,type:e,unitPrice:i.shorts_price||0})}const z=[];f&&f>0&&k&&b&&z.push({quantity:f,color:k,type:b,unitPrice:i.socks_price||0});const R={id:S,name:r.name,type:"design",category:r.category,color:a,size:s>0?n:"",sizes:s>0?[{size:n,quantity:s,variation_id:i.variation_id}]:[],quantity:s>0?s:0,unitPrice:i.final_price||0,totalPrice:D,variationId:i.variation_id,sku:i.sku,image:v(i.images),goalkeeperDetails:N,playerShortsDetails:_,playerSocksDetails:C,goalkeeperShortsDetails:M,goalkeeperSocksDetails:z,playerShortsTotalPrice:T,playerSocksTotalPrice:O,goalkeeperShortsTotalPrice:P,goalkeeperSocksTotalPrice:A,shortsQuantity:(l||0)+(g||0),socksQuantity:(o||0)+(f||0),goalkeeperQuantity:h||0,shortsUnitPrice:i.shorts_price,socksUnitPrice:i.socks_price,goalkeeperUnitPrice:i.goalkeeper_price,shortsTotalPrice:T+P,socksTotalPrice:O+A,goalkeeperTotalPrice:E,goalkeeperColor:p||"",goalkeeperSize:x||""};(s>0||l&&l>0||o&&o>0||h&&h>0||g&&g>0||f&&f>0)&&t([...e,R])}},A=r=>{t(e.filter((e=>e.id!==r)))},E=(r,a)=>{const n=e.find((e=>e.id===r));if(!n)return;const s=n.playerShortsDetails&&n.playerShortsDetails.length>0||n.playerSocksDetails&&n.playerSocksDetails.length>0||n.goalkeeperDetails&&n.goalkeeperDetails.length>0||n.goalkeeperShortsDetails&&n.goalkeeperShortsDetails.length>0||n.goalkeeperSocksDetails&&n.goalkeeperSocksDetails.length>0;if(a<=0&&!s)return void A(r);let i=n.sizes||[],l=n.size;a>0?n.sizes&&1===n.sizes.length?(i=[{...n.sizes[0],quantity:a}],l=i[0].size):n.sizes&&n.sizes.length>1&&(l=`${n.sizes.length} farklı beden`):(i=[],l=""),t(e.map((e=>e.id===r?{...e,quantity:a>0?a:0,totalPrice:(a>0?a:0)*(e.unitPrice||0),sizes:i,size:l}:e)))},D=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.goalkeeperDetails)return;const i=[...s.goalkeeperDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,goalkeeperDetails:i,goalkeeperTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperQuantity:i.reduce(((e,t)=>e+t.quantity),0)}:e))):A(r)},M=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.playerShortsDetails)return;const i=[...s.playerShortsDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,playerShortsDetails:i,playerShortsTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},z=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.playerSocksDetails)return;const i=[...s.playerSocksDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,playerSocksDetails:i,playerSocksTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},R=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.goalkeeperShortsDetails)return;const i=[...s.goalkeeperShortsDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,goalkeeperShortsDetails:i,goalkeeperShortsTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},I=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.goalkeeperSocksDetails)return;const i=[...s.goalkeeperSocksDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,goalkeeperSocksDetails:i,goalkeeperSocksTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},[F,B]=ze.useState(!1),[L,q]=ze.useState(""),[$,K]=ze.useState([]),[U,H]=ze.useState([]),[Y,V]=ze.useState(!1);return y?i.jsxs("div",{className:"flex items-center justify-center min-h-64",children:[i.jsx(oa,{className:"h-8 w-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Özel tasarım ürünleri yükleniyor..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Özel Tasarım Ürünleri"}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[k.length," ürün bulundu"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{variant:"outline",onClick:()=>B(!F),className:"flex items-center gap-2",children:[i.jsx(ln,{className:"h-4 w-4"}),F?"Normal Görünüm":"Toplu Giriş"]}),r&&e.length>0&&i.jsxs(oo,{onClick:()=>null==r?void 0:r(),className:"flex items-center gap-2",children:["Devam Et",i.jsx("span",{className:"bg-white/20 px-2 py-1 rounded text-sm",children:e.filter((e=>"design"===e.type)).length})]})]})]}),F&&i.jsxs(ro,{className:"p-6",children:[i.jsxs(ao,{className:"px-0 pt-0",children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ln,{className:"h-5 w-5"}),"Toplu Sipariş Girişi"]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Birden fazla ürünü aynı anda eklemek için aşağıdaki formata uyun:"})]}),i.jsx(io,{className:"px-0 space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sipariş Listesi"}),i.jsx(v6,{value:L,onChange:e=>q(e.target.value),placeholder:"Format örnekleri:\nÜrün Adı | Renk | Beden | Adet\nÜrün Adı - Renk - Beden - Adet\nÜrün Adı, Renk, Beden, Adet\nÜrün Adı Renk Beden Adet\n\nÖrnek:\nÖzel Tasarım Forma | Kırmızı | L | 10\nTasarım Jersey - Mavi - XL - 5",className:"min-h-[200px] font-mono text-sm"}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx(oo,{onClick:async()=>{V(!0),K([]),H([]);try{const t=L.split("\n").map((e=>e.trim())).filter((e=>e.length>0));if(0===t.length)return void K(["Lütfen sipariş bilgilerini girin."]);let r=0;const a=[],n=[];for(let s=0;s<t.length;s++){const i=t[s],l=s+1;try{let e="",t="",s="",o=0,c=0,d=0,u=0;if(i.includes("|")){const r=i.split("|").map((e=>e.trim()));r.length>=4&&([e,t,s]=r,o=parseInt(r[3])||0,r.length>4&&(c=parseInt(r[4])||0),r.length>5&&(d=parseInt(r[5])||0),r.length>6&&(u=parseInt(r[6])||0))}else if(i.includes(" - ")){const r=i.split(" - ").map((e=>e.trim()));r.length>=4&&([e,t,s]=r,o=parseInt(r[3])||0)}else if(i.includes(",")){const r=i.split(",").map((e=>e.trim()));r.length>=4&&([e,t,s]=r,o=parseInt(r[3])||0)}else{const r=i.split(/\s+/);r.length>=4&&(e=r.slice(0,-3).join(" "),t=r[r.length-3],s=r[r.length-2],o=parseInt(r[r.length-1])||0)}if(!e||!t||!s||o<=0){a.push(`Satır ${l}: Geçersiz format. Örnek: "Ürün Adı | Renk | Beden | Adet"`);continue}const m=j.find((t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase())));if(!m){a.push(`Satır ${l}: "${e}" ürünü bulunamadı.`);continue}const h=m.variations.find((e=>e.color.toLowerCase()===t.toLowerCase()&&e.size.toLowerCase()===s.toLowerCase()));if(!h){a.push(`Satır ${l}: "${m.name}" için "${t} - ${s}" bulunamadı.`);continue}if(h.stock_quantity<o){a.push(`Satır ${l}: "${m.name}" için yeterli stok yok. Mevcut: ${h.stock_quantity}, İstenen: ${o}`);continue}P(m,h.color,h.size,o,h,c,d,"Siyah","M","M","Beyaz",u,"Fosfor Turuncu",h.size,0,0,"Siyah","5","5","Beyaz",!1),r++,n.push(`Satır ${l}: "${m.name}" - ${t} ${s} (${o} adet) eklendi.`)}catch(e){a.push(`Satır ${l}: İşlem hatası - ${e instanceof Error?e.message:"Bilinmeyen hata"}`)}}K(a),H(n),r>0&&setTimeout((()=>{q(""),B(!1)}),3e3)}catch(e){K([`Genel hata: ${e instanceof Error?e.message:"Bilinmeyen hata"}`])}finally{V(!1)}},disabled:!L.trim()||Y,className:"flex items-center gap-2",children:Y?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 animate-spin"}),"İşleniyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Pa,{className:"h-4 w-4"}),"Siparişleri Ekle"]})}),i.jsx(oo,{variant:"outline",onClick:()=>q(""),disabled:Y,children:"Temizle"})]})]}),i.jsxs("div",{className:"space-y-4",children:[$.length>0&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(Er,{className:"h-4 w-4"}),i.jsx(T5,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("strong",{children:["Hatalar (",$.length,"):"]}),$.slice(0,5).map(((e,t)=>i.jsx("div",{className:"text-sm",children:e},t))),$.length>5&&i.jsxs("div",{className:"text-sm text-gray-500",children:["... ve ",$.length-5," hata daha"]})]})})]}),U.length>0&&i.jsxs(C5,{children:[i.jsx(Or,{className:"h-4 w-4"}),i.jsx(T5,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("strong",{children:["Başarılı (",U.length,"):"]}),U.slice(0,3).map(((e,t)=>i.jsx("div",{className:"text-sm text-green-600",children:e},t))),U.length>3&&i.jsxs("div",{className:"text-sm text-gray-500",children:["... ve ",U.length-3," başarılı daha"]})]})})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium mb-2",children:"İstatistikler"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:U.length}),i.jsx("div",{className:"text-gray-600",children:"Başarılı"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:$.length}),i.jsx("div",{className:"text-gray-600",children:"Hatalı"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:L.split("\n").filter((e=>e.trim())).length}),i.jsx("div",{className:"text-gray-600",children:"Toplam"})]})]})]})]})]})})]}),i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsx("div",{className:"flex-1 min-w-64",children:i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"Ürün ara...",value:a,onChange:e=>{return t=e.target.value,n(t),void x(1);var t},className:"pl-10"})]})}),i.jsxs(eO,{value:s,onValueChange:e=>{l(e),x(1)},children:[i.jsx(rO,{className:"w-48",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:w.map((e=>i.jsx(iO,{value:e,children:e},e)))})]}),i.jsxs(eO,{value:o,onValueChange:e=>{c(e),x(1)},children:[i.jsx(rO,{className:"w-48",children:i.jsx(tO,{placeholder:"Marka seçin"})}),i.jsx(sO,{children:N.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[0===T.length?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"Aradığınız kriterlere uygun ürün bulunamadı."})}):T.map((t=>i.jsx(Hae,{product:t,onAddToOrder:P,orderItems:e,onImageClick:O},t.id))),_>1&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[S+1,"-",Math.min(C,k.length)," / ",k.length," ürün"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>x(p-1),disabled:1===p,children:"Önceki"}),i.jsxs("span",{className:"text-sm",children:[p," / ",_]}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>x(p+1),disabled:p===_,children:"Sonraki"})]})]})]}),i.jsxs("div",{className:"space-y-4 sticky top-4 h-fit",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Sipariş Özeti"})}),i.jsx(io,{children:0===e.filter((e=>"design"===e.type&&((e.quantity||0)>0||(e.goalkeeperQuantity||0)>0||(e.shortsQuantity||0)>0||(e.socksQuantity||0)>0||(e.playerShortsQuantity||0)>0||(e.playerSocksQuantity||0)>0||(e.goalkeeperShortsQuantity||0)>0||(e.goalkeeperSocksQuantity||0)>0))).length?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Henüz ürün eklenmedi"}):i.jsxs("div",{className:"space-y-4",children:[e.filter((e=>"design"===e.type&&((e.quantity||0)>0||(e.goalkeeperQuantity||0)>0||(e.shortsQuantity||0)>0||(e.socksQuantity||0)>0||(e.playerShortsQuantity||0)>0||(e.playerSocksQuantity||0)>0||(e.goalkeeperShortsQuantity||0)>0||(e.goalkeeperSocksQuantity||0)>0))).reduce(((e,t)=>{const r=e.find((e=>e.name===t.name));return r?r.items.push(t):e.push({name:t.name,items:[t]}),e}),[]).map((e=>{const t=e.items.map((e=>e.color)).filter(((e,t,r)=>r.indexOf(e)===t)),r=[],a=[],n=[],s=[],l=[],o=[];let c=0,d=0,u=0,m=0,h=0,p=0,x=0;return e.items.forEach((e=>{c+=e.quantity||0,d+=e.totalPrice||0,e.sizes&&e.sizes.forEach((t=>{r.push({size:t.size,quantity:t.quantity,variation_id:t.variation_id,color:e.color})})),e.goalkeeperDetails&&(a.push(...e.goalkeeperDetails),u+=e.goalkeeperDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.playerShortsDetails&&(n.push(...e.playerShortsDetails),m+=e.playerShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.playerSocksDetails&&(s.push(...e.playerSocksDetails),h+=e.playerSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.goalkeeperShortsDetails&&(l.push(...e.goalkeeperShortsDetails),p+=e.goalkeeperShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.goalkeeperSocksDetails&&(o.push(...e.goalkeeperSocksDetails),x+=e.goalkeeperSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),!e.playerShortsDetails&&!e.goalkeeperShortsDetails&&(e.shortsTotalPrice||0)>0&&(m+=e.shortsTotalPrice||0),!e.playerSocksDetails&&!e.goalkeeperSocksDetails&&(e.socksTotalPrice||0)>0&&(h+=e.socksTotalPrice||0),!e.goalkeeperDetails&&(e.goalkeeperTotalPrice||0)>0&&(u+=e.goalkeeperTotalPrice||0)})),i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-base text-gray-900 dark:text-gray-100",children:e.name}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.join(", ")})]}),i.jsxs("div",{className:"space-y-2",children:[r.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-gray-200",children:"📏 Bedenler"}),r.map(((t,r)=>{var a;const n=e.items.find((e=>{var r;return e.color===t.color&&(null==(r=e.sizes)?void 0:r.some((e=>e.size===t.size)))}));return i.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:[t.color," - ",t.size]}),i.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[t.quantity," x ₺",(null==(a=null==n?void 0:n.unitPrice)?void 0:a.toFixed(2))||"0.00"," = ₺",(t.quantity*((null==n?void 0:n.unitPrice)||0)).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{n&&E(n.id,(n.quantity||0)-1)},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{n&&E(n.id,(n.quantity||0)+1)},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`${t.color}-${t.size}`)}))]}),a.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-orange-800 dark:text-orange-200",children:"🥅 Kaleci Forması"}),a.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.goalkeeperDetails)?void 0:r.some((e=>e.color===t.color&&e.size===t.size))}));return i.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3 border border-orange-200 dark:border-orange-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[t.color," - ",t.size]}),i.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.size===t.size)))||0;D(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.size===t.size)))||0;D(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`goalkeeper-${r}`)}))]}),(n.length>0||l.length>0)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-blue-800 dark:text-blue-200",children:"🩳 Şortlar"}),n.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.playerShortsDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Oyuncu • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;M(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;M(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`player-shorts-${r}`)})),l.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.goalkeeperShortsDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Kaleci • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;R(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;R(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`goalkeeper-shorts-${r}`)}))]}),(s.length>0||o.length>0)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-green-800 dark:text-green-200",children:"🧦 Çoraplar"}),s.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.playerSocksDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:["Oyuncu • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;z(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;z(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`player-socks-${r}`)})),o.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.goalkeeperSocksDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:["Kaleci • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;I(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;I(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`goalkeeper-socks-${r}`)}))]})]}),i.jsx("div",{className:"border-t pt-3 mt-3",children:i.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[i.jsx("span",{children:"Ürün Toplamı:"}),i.jsxs("span",{children:["₺",(d+u+m+h+p+x).toFixed(2)]})]})})]},e.name)})),i.jsx("div",{className:"border-t pt-3",children:i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:"Toplam:"}),i.jsxs("span",{children:["₺",e.filter((e=>"design"===e.type)).reduce(((e,t)=>{let r=t.totalPrice||0;return t.goalkeeperDetails?r+=t.goalkeeperDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0):t.goalkeeperTotalPrice&&(r+=t.goalkeeperTotalPrice),t.playerShortsDetails?r+=t.playerShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0):t.shortsTotalPrice&&(r+=t.shortsTotalPrice),t.playerSocksDetails?r+=t.playerSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0):t.socksTotalPrice&&(r+=t.socksTotalPrice),t.goalkeeperShortsDetails&&(r+=t.goalkeeperShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),t.goalkeeperSocksDetails&&(r+=t.goalkeeperSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e+r}),0).toFixed(2)]})]})})]})})]}),e.filter((e=>"design"===e.type)).length>0&&i.jsx(ro,{children:i.jsx(io,{className:"p-4",children:i.jsx(oo,{className:"w-full",size:"lg",onClick:()=>{r&&r()},children:"Devam Et"})})})]})]}),i.jsx(sd,{open:d,onOpenChange:u,children:i.jsxs(cd,{className:"max-w-2xl",children:[i.jsx(dd,{children:i.jsx(md,{children:null==m?void 0:m.name})}),i.jsx("div",{className:"flex justify-center",children:i.jsx("img",{src:null==m?void 0:m.url,alt:null==m?void 0:m.name,className:"max-w-full max-h-96 object-contain rounded-lg",onError:e=>{e.currentTarget.src="/placeholder.svg"}})})]})})]})}const Vae={min:100,max:200,default:100},Gae={min:50,max:100,default:50},Wae={min:40,max:80,default:40},Qae={min:25,max:50,default:25},Xae={min:25,max:50,default:25},Zae={min:25,max:50,default:25};function Jae({product:e,onAddToOrder:t,orderItems:r,onImageClick:a}){const[n,s]=ze.useState(e.colors[0]||""),[l,o]=ze.useState(e.sizes[0]||""),[c,d]=ze.useState(0),[u,m]=ze.useState(0),[h,p]=ze.useState(0),[x,g]=ze.useState(0),[f,y]=ze.useState("Siyah"),[v,b]=ze.useState("L"),[j,k]=ze.useState("Yetişkin"),[w,N]=ze.useState("Beyaz"),[_,S]=ze.useState("Fosfor Turuncu"),[C,T]=ze.useState(e.sizes[0]||""),[O,P]=ze.useState(0),[A,E]=ze.useState(0),[D,M]=ze.useState(""),[z,R]=ze.useState("L"),[I,F]=ze.useState("Yetişkin"),[B,L]=ze.useState("Beyaz"),[q,$]=ze.useState(!1),[K,U]=ze.useState(Vae.default),[H,Y]=ze.useState(Gae.default),[V,G]=ze.useState(Wae.default),[W,Q]=ze.useState(Qae.default),[X,Z]=ze.useState(Xae.default),[J,ee]=ze.useState(Zae.default),[te,re]=ze.useState(!1),[ae,ne]=ze.useState("");ze.useState("");const[se,ie]=ze.useState([]),[le,oe]=ze.useState([]),[ce,de]=ze.useState(!1),[ue,me]=ze.useState(""),[he,pe]=ze.useState(""),[xe,ge]=ze.useState(null),[fe,ye]=ze.useState(!1),ve=["104","116","128","140","152","164","176","XS","S","M","L","XL","XXL","XXXL","4XL"],be=["Fosfor Turuncu","Fosfor Yeşil","Saks Mavi","Kırmızı","Yeşil","Sarı","Pembe","Turkuaz","Gri"],je=e.variations.find((e=>e.color===n&&e.size===l)),ke="Promosyon"===e.category||"Promosyon"===e.category||e.name.toLowerCase().includes("forma")||e.name.toLowerCase().includes("jersey")||e.name.toLowerCase().includes("üniforma")||e.name.toLowerCase().includes("tasarım"),we=(e,t,r)=>a=>{const n=a.target.value;if(""===n)return void t(0);const s=parseInt(n);!isNaN(s)&&s>=e.min&&s<=e.max?t(s):(a.target.value=String(0===r?e.default:r),t(0===r?e.default:r))},Ne=()=>{try{const e=new Audio("https://github.com/xMrGadgetx/Data/raw/refs/heads/master/luvvoice.com-20250624-2TE589.mp3");e.volume=.5,e.play().catch(console.error)}catch(e){}},_e=e=>{const t=e.trim();if(!t)return null;let r="",a="",s="";if(t.includes("-")){const e=t.split("-").map((e=>e.trim()));e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}else if(t.includes("|")){const e=t.split("|").map((e=>e.trim()));e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}else if(t.includes(",")){const e=t.split(",").map((e=>e.trim()));e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}else if(t.includes(";")){const e=t.split(";").map((e=>e.trim()));e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}else{const e=t.split(/\s+/);e.length>=2&&(r=e[0],a=e[1],s=e[2]||"")}return{quantity:r&&parseInt(r)||0,size:a,color:s||n}},Se=t=>{if(!t)return n;const r=t.toLowerCase().replace(/ı/g,"i").replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ö/g,"o").replace(/ç/g,"c"),a=e.colors;for(const e of a)if(e.toLowerCase()===t.toLowerCase())return e;for(const e of a){const t=e.toLowerCase().replace(/ı/g,"i").replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ö/g,"o").replace(/ç/g,"c");if(t.includes(r)||r.includes(t))return e}return n},Ce=()=>{de(!1),me(""),pe(""),ge(null),ye(!1)},Te=(t,r)=>{const a=_e(t);if(!a||!a.size)return t;const n=e.sizes.indexOf(a.size);if(-1===n)return t;let s=n;"up"===r&&n<e.sizes.length-1?s=n+1:"down"===r&&n>0&&(s=n-1);const i=e.sizes[s];return t.replace(a.size,i)},Oe=(e,t,r)=>{const a=_e(e);if(!a||!a.color)return e;const n=r.indexOf(a.color);if(-1===n)return e;let s=n;"right"===t&&n<r.length-1?s=n+1:"left"===t&&n>0&&(s=n-1);const i=r[s];return e.replace(a.color,i)},Pe=()=>{const r=u>0||h>0||x>0||O>0||A>0;return O>0&&!D.trim()?(Fs.error("Kaleci şortu için renk girmediniz. Derya hanım giriş yapın artık!"),void Ne()):u>0&&!f?(Fs.error("Oyuncu şortu için renk seçmediniz!"),void Ne()):!(x>0)||_&&C?void(n&&l&&(c>0||r)&&je&&(t(e,n,l,c,je,u,h,f,j,v,w,x,_,C,O,A,D,I,z,B,q,K||100,H,V,W,X,J),d(0),m(0),p(0),g(0),P(0),E(0),$(!1))):(Fs.error("Kaleci forması için renk ve beden seçmediniz!"),void Ne())};return i.jsxs(ro,{className:"relative",children:[i.jsxs(Co,{variant:(null==je?void 0:je.stock_quantity)&&je.stock_quantity>0?"default":"destructive",className:"absolute top-2 left-2 text-xs z-10",children:["Stok: ",(null==je?void 0:je.stock_quantity)||0]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>de(!0),className:"absolute top-2 right-2 text-xs z-10 bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700",children:[i.jsx(ln,{className:"h-3 w-3 mr-1"}),"Metin ile Giriş"]}),i.jsx(io,{className:"p-4 pt-8",tabIndex:0,style:{outline:"none"},children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("img",{src:Array.isArray(e.image)?e.image[0]:e.image||"/placeholder.svg",alt:e.name,className:"w-20 h-20 object-cover rounded-lg bg-white border cursor-pointer hover:opacity-80 transition-opacity mix-blend-multiply dark:mix-blend-normal",onClick:()=>a(Array.isArray(e.image)?e.image[0]:e.image||"/placeholder.svg",e.name),onError:e=>{e.currentTarget.src="/placeholder.svg"}})}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.name}),i.jsx(Co,{variant:"outline",className:"text-xs px-2 py-1",children:e.category})]}),i.jsx("p",{className:"text-xl font-bold text-blue-600 mt-1",children:"Promosyon"===e.category?i.jsx("span",{children:"Fiyat Aralığı: ₺100 - ₺200"}):i.jsxs("span",{children:["₺",(null==je?void 0:je.final_price)||e.basePrice]})})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Renk:"}),i.jsxs(eO,{value:n,onValueChange:s,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:e.colors.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Beden:"}),i.jsxs(eO,{value:l,onValueChange:o,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Beden seçin"})}),i.jsx(sO,{children:e.sizes.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Oyuncu Adeti"}),i.jsx(co,{type:"number",min:0,max:null==je?void 0:je.stock_quantity,value:0===c?"":c,onChange:e=>{const t=e.target.value;d(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())},className:"mt-1",placeholder:"0"}),"Promosyon"===e.category&&i.jsxs("div",{className:"mt-1",children:[i.jsxs("label",{className:"text-xs font-medium",children:["Forma Fiyatı (₺",Vae.min,"-",Vae.max,"):"]}),i.jsx(co,{type:"number",min:Vae.min,max:Vae.max,defaultValue:0===K?"":K,onBlur:we(Vae,U,K),className:"mt-1 text-xs h-7",placeholder:String(Vae.default)})]})]}),ke&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kaleci Adeti"}),i.jsx(co,{type:"number",min:0,max:(null==je?void 0:je.stock_quantity)||0,value:0===x?"":x,onChange:e=>{const t=e.target.value;g(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())},className:"mt-1",placeholder:"0"}),"Promosyon"===e.category?i.jsxs("div",{className:"mt-1",children:[i.jsxs("label",{className:"text-xs font-medium",children:["Kaleci Fiyatı (₺",Gae.min,"-",Gae.max,"):"]}),i.jsx(co,{type:"number",min:Gae.min,max:Gae.max,defaultValue:0===H?"":H,onBlur:we(Gae,Y,H),className:"mt-1 text-xs h-7",placeholder:String(Gae.default)})]}):(null==je?void 0:je.goalkeeper_price)&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Birim fiyat: ₺",je.goalkeeper_price]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kaleci Renk:"}),i.jsx(co,{type:"text",value:_,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())},className:"mt-1",placeholder:"Renk girin"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Kaleci Beden:"}),i.jsxs(eO,{value:C,onValueChange:T,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Beden seçin"})}),i.jsx(sO,{children:e.sizes.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),!ke&&i.jsx("div",{className:"flex items-end col-span-1",children:i.jsx(oo,{onClick:Pe,disabled:!(n&&l&&(c||u||h||x)&&je&&0!==je.stock_quantity),className:"w-full",children:0===(null==je?void 0:je.stock_quantity)?"Stokta Yok":"Sepete Ekle"})})]}),te&&i.jsx("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50 dark:bg-gray-800",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Oyuncu Formaları:"}),i.jsx(v6,{value:ae,onChange:e=>ne(e.target.value),onKeyDown:t=>((t,r)=>{if(!r)return;const{selectionStart:a,selectionEnd:n,value:s}=r;if("ArrowUp"===t.key||"ArrowDown"===t.key){t.preventDefault();const e=s.substring(0,a).split("\n"),n=e.length-1;e[n];const i=a-e.slice(0,n).join("\n").length-(n>0?1:0);if("ArrowUp"===t.key&&n>0){const t=s.split("\n")[n-1],a=e.slice(0,n-1).join("\n").length+(n>1?1:0)+Math.min(i,t.length);r.setSelectionRange(a,a)}else if("ArrowDown"===t.key&&n<s.split("\n").length-1){const t=s.split("\n")[n+1],a=e.join("\n").length+1+Math.min(i,t.length);r.setSelectionRange(a,a)}}if("Tab"===t.key){t.preventDefault(),s.split("\n");const i=s.lastIndexOf("\n",a-1)+1,l=s.substring(i,-1===s.indexOf("\n",a)?s.length:s.indexOf("\n",a)),o=e.sizes,c=l.split(/\s+/),d=c[c.length-1];if(d){const e=o.filter((e=>e.toLowerCase().startsWith(d.toLowerCase())));if(1===e.length){const t=s.substring(0,a-d.length)+e[0]+s.substring(n);me(t);const i=a-d.length+e[0].length;setTimeout((()=>r.setSelectionRange(i,i)),0)}}}})(t,t.target),placeholder:"Format: İsim Beden Adet (her satıra bir oyuncu)\nÖrnek:\nAhmet L 1\nMehmet XL 1",className:"mt-1 font-mono text-sm",rows:6}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx(oo,{type:"button",size:"sm",onClick:()=>(async r=>{const a=r.split("\n").filter((e=>e.trim()));let n=0;for(const s of a){const r=_e(s);if(!r)continue;const{size:a,quantity:i,color:l}=r,o=Se(l),c=e.variations.find((e=>e.color===o&&e.size===a));c&&c.stock_quantity>=i&&(t(e,o,a,i,c,0,0,"Varsayılan","M","M","Beyaz",0,"Fosfor Turuncu",a,0,0,"Siyah","5","5","Beyaz",!1,K,H,V,W,X,J),n++)}n>0&&(ne(""),re(!1))})(ae),disabled:!ae.trim(),children:"Oyuncu Formalarını Ekle"}),i.jsx(oo,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=(t=>{const r=t.split("\n").filter((e=>e.trim())),a=[],n=[];let s=0;return r.forEach(((t,r)=>{const i=r+1,l=_e(t);if(!l)return void a.push(`Satır ${i}: Geçersiz format`);const{size:o,quantity:c,color:d}=l;if(!o||c<=0)return void a.push(`Satır ${i}: Eksik bilgi (beden: "${o}", adet: ${c})`);if(!e.sizes.includes(o))return void a.push(`Satır ${i}: "${o}" bedeni mevcut değil`);const u=Se(d),m=e.variations.find((e=>e.color===u&&e.size===o));m?m.stock_quantity<c?a.push(`Satır ${i}: Yetersiz stok (Mevcut: ${m.stock_quantity}, İstenen: ${c})`):(s+=c,n.push(`Satır ${i}: ${u} ${o} (${c} adet) ✓`)):a.push(`Satır ${i}: "${u} - ${o}" kombinasyonu bulunamadı`)})),{errors:a,successes:n,totalQuantity:s}})(ae);ie(t.errors),oe(t.successes)},disabled:!ae.trim(),children:"Kontrol Et"})]})]}),(se.length>0||le.length>0)&&i.jsxs("div",{className:"space-y-2",children:[se.length>0&&i.jsxs(C5,{children:[i.jsx(Er,{className:"h-4 w-4"}),i.jsx(T5,{children:i.jsxs("div",{className:"text-sm",children:[i.jsxs("strong",{children:["Hatalar (",se.length,"):"]}),i.jsxs("ul",{className:"mt-1 space-y-1",children:[se.slice(0,5).map(((e,t)=>i.jsx("li",{className:"text-red-600",children:e},t))),se.length>5&&i.jsxs("li",{className:"text-gray-500",children:["... ve ",se.length-5," hata daha"]})]})]})})]}),le.length>0&&i.jsxs(C5,{children:[i.jsx(Or,{className:"h-4 w-4"}),i.jsx(T5,{children:i.jsxs("div",{className:"text-sm",children:[i.jsxs("strong",{children:["Başarılı (",le.length,"):"]}),i.jsxs("ul",{className:"mt-1 space-y-1",children:[le.slice(0,3).map(((e,t)=>i.jsx("li",{className:"text-green-600",children:e},t))),le.length>3&&i.jsxs("li",{className:"text-gray-500",children:["... ve ",le.length-3," başarılı daha"]})]})]})})]})]})]})}),ke&&i.jsxs("div",{className:"border-t pt-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-blue-700 border-b pb-2",children:"Oyuncu Ek Ürünleri"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Oyuncu Şort"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===u?"":u,onChange:e=>{const t=e.target.value;m(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:f,onValueChange:y,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:["Siyah","Beyaz","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Boy:"}),i.jsxs(eO,{value:v,onValueChange:b,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Boy seçin"})}),i.jsx(sO,{children:ve.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),"Promosyon"===e.category?i.jsxs("div",{className:"mt-1",children:[i.jsxs("label",{className:"text-xs font-medium",children:["Şort Fiyatı (₺",Wae.min,"-",Wae.max,"):"]}),i.jsx(co,{type:"number",min:Wae.min,max:Wae.max,defaultValue:0===V?"":V,onBlur:we(Wae,G,V),className:"mt-1 text-xs h-7",placeholder:String(Wae.default)})]}):(null==je?void 0:je.shorts_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",je.shorts_price]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Oyuncu Çorap"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===h?"":h,onChange:e=>{const t=e.target.value;p(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Tip:"}),i.jsxs(eO,{value:j,onValueChange:k,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Tip seçin"})}),i.jsx(sO,{children:["Yetişkin","Çocuk"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:w,onValueChange:N,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:["Beyaz","Siyah","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz","Sarı","Turuncu"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),"Promosyon"===e.category?i.jsxs("div",{className:"mt-1",children:[i.jsx("label",{className:"text-xs font-medium",children:"Çorap Fiyatı (₺25-50):"}),i.jsx(co,{type:"number",min:"25",max:"50",defaultValue:X,onBlur:e=>{const t=e.target.value;if(""===t)return void Z(0);const r=parseInt(t);!isNaN(r)&&r>=25&&r<=50?Z(r):(e.target.value=0===X?"25":String(X),Z(0===X?25:X))},className:"mt-1 text-xs h-7",placeholder:"25"})]}):(null==je?void 0:je.socks_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",je.socks_price]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-orange-700 border-b pb-2",children:"Kaleci Ek Ürünleri"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:q?"Kaleci Uzun Şort":"Kaleci Şort"}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:q,onChange:e=>$(e.target.checked),className:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 dark:focus:ring-orange-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),i.jsx("span",{className:"text-xs font-medium text-orange-600 dark:text-orange-400",children:"Uzun Alt"})]})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===O?"":O,onChange:e=>{const t=e.target.value;P(""===t?0:parseInt(t)||0)},onKeyDown:e=>{if("Enter"===e.key){if(e.preventDefault(),O>0&&!D.trim())return Fs.error("Kaleci şortu için renk girmediniz. Derya hanım giriş yapın artık!"),void Ne();Pe()}},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsx(co,{type:"text",value:D,onChange:e=>M(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())},className:"mt-1",placeholder:"Renk girin"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Boy:"}),i.jsxs(eO,{value:z,onValueChange:R,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Boy seçin"})}),i.jsx(sO,{children:ve.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),"Promosyon"===e.category?i.jsxs("div",{className:"mt-1",children:[i.jsx("label",{className:"text-xs font-medium",children:"Kaleci Şort Fiyatı (₺25-50):"}),i.jsx(co,{type:"number",min:"25",max:"50",defaultValue:W,onBlur:e=>{const t=e.target.value;if(""===t)return void Q(0);const r=parseInt(t);!isNaN(r)&&r>=25&&r<=50?Q(r):(e.target.value=0===W?"25":String(W),Q(0===W?25:W))},className:"mt-1 text-xs h-7",placeholder:"25"})]}):(null==je?void 0:je.shorts_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",je.shorts_price]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Kaleci Çorap"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Adet:"}),i.jsx(co,{type:"number",min:"0",value:0===A?"":A,onChange:e=>{const t=e.target.value;E(""===t?0:parseInt(t)||0)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())},className:"mt-1",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Tip:"}),i.jsxs(eO,{value:I,onValueChange:F,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Tip seçin"})}),i.jsx(sO,{children:["Yetişkin","Çocuk"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium",children:"Renk:"}),i.jsxs(eO,{value:B,onValueChange:L,children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:["Beyaz","Siyah","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz","Sarı","Turuncu"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),"Promosyon"===e.category?i.jsxs("div",{className:"mt-1",children:[i.jsx("label",{className:"text-xs font-medium",children:"Kaleci Çorap Fiyatı (₺25-50):"}),i.jsx(co,{type:"number",min:"25",max:"50",defaultValue:J,onBlur:e=>{const t=e.target.value;if(""===t)return void ee(0);const r=parseInt(t);!isNaN(r)&&r>=25&&r<=50?ee(r):(e.target.value=0===J?"25":String(J),ee(0===J?25:J))},className:"mt-1 text-xs h-7",placeholder:"25"})]}):(null==je?void 0:je.socks_price)&&i.jsxs("p",{className:"text-xs text-gray-500",children:["Birim fiyat: ₺",je.socks_price]})]})]})]}),(u>0||h>0||x>0||O>0||A>0)&&i.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded text-sm space-y-2",children:[i.jsx("div",{className:"font-semibold",children:"Promosyon"===e.category?"Ürünler Toplamı:":"Ek Ürünler Toplamı:"}),i.jsxs("div",{className:"space-y-1 text-xs",children:[c>0&&i.jsxs("div",{children:["Oyuncu Forması: ",c," x ₺","Promosyon"===e.category?K:(null==je?void 0:je.final_price)||0," = ₺",(c*("Promosyon"===e.category?K:(null==je?void 0:je.final_price)||0)).toFixed(2)]}),u>0&&i.jsxs("div",{children:["Oyuncu Şort: ",u," x ₺","Promosyon"===e.category?V:(null==je?void 0:je.shorts_price)||0," = ₺",(u*("Promosyon"===e.category?V:(null==je?void 0:je.shorts_price)||0)).toFixed(2)]}),h>0&&i.jsxs("div",{children:["Oyuncu Çorap: ",h," x ₺","Promosyon"===e.category?X:(null==je?void 0:je.socks_price)||0," = ₺",(h*("Promosyon"===e.category?X:(null==je?void 0:je.socks_price)||0)).toFixed(2)]}),x>0&&i.jsxs("div",{children:["Kaleci Forması: ",x," x ₺","Promosyon"===e.category?H:(null==je?void 0:je.goalkeeper_price)||0," = ₺",(x*("Promosyon"===e.category?H:(null==je?void 0:je.goalkeeper_price)||0)).toFixed(2)]}),O>0&&i.jsxs("div",{children:[q?"Kaleci Uzun Şort":"Kaleci Şort",": ",O," x ₺","Promosyon"===e.category?W:(null==je?void 0:je.shorts_price)||0," = ₺",(O*("Promosyon"===e.category?W:(null==je?void 0:je.shorts_price)||0)).toFixed(2)]}),A>0&&i.jsxs("div",{children:["Kaleci Çorap: ",A," x ₺","Promosyon"===e.category?J:(null==je?void 0:je.socks_price)||0," = ₺",(A*("Promosyon"===e.category?J:(null==je?void 0:je.socks_price)||0)).toFixed(2)]})]}),i.jsxs("div",{className:"font-semibold border-t pt-2",children:["Toplam: ₺",(c*("Promosyon"===e.category?K:(null==je?void 0:je.final_price)||0)+u*("Promosyon"===e.category?V:(null==je?void 0:je.shorts_price)||0)+h*("Promosyon"===e.category?X:(null==je?void 0:je.socks_price)||0)+x*("Promosyon"===e.category?H:(null==je?void 0:je.goalkeeper_price)||0)+O*("Promosyon"===e.category?W:(null==je?void 0:je.shorts_price)||0)+A*("Promosyon"===e.category?J:(null==je?void 0:je.socks_price)||0)).toFixed(2)]})]}),i.jsx("div",{className:"mt-4",children:i.jsx(oo,{onClick:Pe,disabled:!(n&&l&&(c||u||h||x||O||A)&&je&&0!==je.stock_quantity),className:"w-full",children:0===(null==je?void 0:je.stock_quantity)?"Stokta Yok":"Sepete Ekle"})})]})]})]})}),i.jsx(sd,{open:ce,onOpenChange:de,children:i.jsxs(cd,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsx(dd,{children:i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(ln,{className:"h-5 w-5"}),"Metin ile Giriş - ",e.name]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"📝 Kullanım Kılavuzu"}),i.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[i.jsx("p",{children:"Ayırıcılar: -, |, ,, ; veya boşluk"}),i.jsx("p",{children:"Tab ile ürün direk girebilirsiniz"}),i.jsx("p",{children:"• ↑ beden artır, ↓ beden azalt"}),i.jsx("p",{children:"• ← rengi geri alır, → rengi ileri alır"})]}),i.jsx("div",{className:"mt-3 text-xs text-blue-600 dark:text-blue-400",children:i.jsxs("p",{children:[i.jsx("strong",{children:"Mevcut Bedenler:"})," ",e.sizes.join(", ")]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block text-blue-700",children:"🔵 Oyuncu Formaları:"}),i.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[i.jsx("strong",{children:"Mevcut Renkler:"})," ",e.colors.join(", ")]}),i.jsx(v6,{placeholder:`Örnek:\n${(()=>{const t=e.sizes.slice(0,3),r=e.colors.slice(0,2);return t.map(((e,t)=>`${t+1} - ${e} - ${r[t%r.length]||r[0]}`)).join("\n")})()}`,value:ue,onChange:e=>me(e.target.value),onKeyDown:t=>{const r=t.currentTarget,{selectionStart:a,selectionEnd:n,value:s}=r;if("Enter"===t.key&&!t.shiftKey)return t.preventDefault(),void Pe();if("ArrowUp"===t.key||"ArrowDown"===t.key){t.preventDefault();const e=s.split("\n"),n=s.lastIndexOf("\n",a-1)+1;s.indexOf("\n",a);const i=s.substring(0,a).split("\n").length-1;if(i>=0&&i<e.length){const s=e[i],l=Te(s,"ArrowUp"===t.key?"up":"down"),o=[...e];o[i]=l;const c=o.join("\n");me(c),setTimeout((()=>{const e=n+(a-n);r.setSelectionRange(e,e)}),0)}}else if("ArrowLeft"===t.key||"ArrowRight"===t.key){if(t.ctrlKey||t.metaKey){t.preventDefault();const r=s.split("\n"),n=s.substring(0,a).split("\n").length-1;if(n>=0&&n<r.length){const a=r[n],s=Oe(a,"ArrowLeft"===t.key?"left":"right",e.colors),i=[...r];i[n]=s;const l=i.join("\n");me(l)}}}else if("Tab"===t.key){t.preventDefault();const r=s.split("\n"),n=s.substring(0,a).split("\n").length-1;if(n>=0&&n<r.length){const t=r[n].trim();if(t){const a=_e(t);if(a&&a.quantity>0&&a.size){const t=1===e.colors.length?`${a.quantity} - ${a.size} - ${e.colors[0]}`:`${a.quantity} - ${a.size} - ${a.color||e.colors[0]}`,s=[...r];s[n]=t,me(s.join("\n"))}}}}},rows:6,className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block text-orange-700",children:"🟠 Kaleci Formaları:"}),i.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[i.jsx("strong",{children:"Mevcut Renkler:"})," ",be.join(", ")]}),i.jsx(v6,{placeholder:`Örnek:\n${(()=>{const t=e.sizes.slice(0,2),r=be.slice(0,2);return t.map(((e,t)=>`${t+1} - ${e} - ${r[t%r.length]||r[0]}`)).join("\n")})()}`,value:he,onChange:e=>pe(e.target.value),onKeyDown:e=>{const t=e.currentTarget,{selectionStart:r,selectionEnd:a,value:n}=t;if("Enter"===e.key&&!e.shiftKey)return e.preventDefault(),void Pe();if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const a=n.split("\n"),s=n.lastIndexOf("\n",r-1)+1;n.indexOf("\n",r);const i=n.substring(0,r).split("\n").length-1;if(i>=0&&i<a.length){const n=a[i],l=Te(n,"ArrowUp"===e.key?"up":"down"),o=[...a];o[i]=l;const c=o.join("\n");pe(c),setTimeout((()=>{const e=s+(r-s);t.setSelectionRange(e,e)}),0)}}else if("ArrowLeft"===e.key||"ArrowRight"===e.key){if(e.ctrlKey||e.metaKey){e.preventDefault();const t=n.split("\n"),a=n.substring(0,r).split("\n").length-1;if(a>=0&&a<t.length){const r=t[a],n=Oe(r,"ArrowLeft"===e.key?"left":"right",be),s=[...t];s[a]=n;const i=s.join("\n");pe(i)}}}else if("Tab"===e.key){e.preventDefault();const t=n.split("\n"),a=n.substring(0,r).split("\n").length-1;if(a>=0&&a<t.length){const e=t[a].trim();if(e){const r=_e(e);if(r&&r.quantity>0&&r.size){const e=1===be.length?`${r.quantity} - ${r.size} - ${be[0]}`:`${r.quantity} - ${r.size} - ${r.color||be[0]}`,n=[...t];n[a]=e,pe(n.join("\n"))}}}}},rows:6,className:"w-full"})]})]}),!fe&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{onClick:()=>{if(ue.trim()||he.trim()){const t=((t,r)=>{const a=[],s=[];t.split("\n").filter((e=>e.trim())).forEach(((t,r)=>{const s=t.trim();if(!s)return;const i={line:s,type:"Oyuncu",quantity:0,size:"",color:"",errors:[]},l=_e(s),o=1===e.colors.length;if(!l||l.quantity<=0||!l.size){const e=o?"Adet - Beden":"Adet - Beden - Renk";i.errors.push(`Oyuncu Satır ${r+1}: Format hatalı. Doğru format: "${e}"`)}else if(isNaN(l.quantity)||l.quantity<=0?i.errors.push(`Oyuncu Satır ${r+1}: Adet geçerli bir pozitif sayı olmalı`):i.quantity=l.quantity,e.sizes.includes(l.size)?i.size=l.size:i.errors.push(`Oyuncu Satır ${r+1}: "${l.size}" bedeni mevcut değil. Mevcut bedenler: ${e.sizes.join(", ")}`),o)i.color=e.colors[0];else{const t=l.color;if(t){const a=Se(t);a&&a!==n?i.color=a:e.colors.includes(t)?i.color=t:i.errors.push(`Oyuncu Satır ${r+1}: "${t}" rengi mevcut değil. Mevcut renkler: ${e.colors.join(", ")}`)}else i.errors.push(`Oyuncu Satır ${r+1}: Renk belirtmeniz gerekli. Mevcut renkler: ${e.colors.join(", ")}`)}a.push(i)})),r.split("\n").filter((e=>e.trim())).forEach(((t,r)=>{const n=t.trim();if(!n)return;const s={line:n,type:"Kaleci",quantity:0,size:"",color:"",errors:[]},i=_e(n),l=1===be.length;if(!i||i.quantity<=0||!i.size){const e=l?"Adet - Beden":"Adet - Beden - Renk";s.errors.push(`Kaleci Satır ${r+1}: Format hatalı. Doğru format: "${e}"`)}else if(isNaN(i.quantity)||i.quantity<=0?s.errors.push(`Kaleci Satır ${r+1}: Adet geçerli bir pozitif sayı olmalı`):s.quantity=i.quantity,e.sizes.includes(i.size)?s.size=i.size:s.errors.push(`Kaleci Satır ${r+1}: "${i.size}" bedeni mevcut değil. Mevcut bedenler: ${e.sizes.join(", ")}`),l)s.color=be[0];else{const e=i.color;if(e){const t=Se(e);be.includes(e)?s.color=e:t&&be.includes(t)?s.color=t:s.errors.push(`Kaleci Satır ${r+1}: "${e}" rengi mevcut değil. Mevcut kaleci renkleri: ${be.join(", ")}`)}else s.errors.push(`Kaleci Satır ${r+1}: Renk belirtmeniz gerekli. Mevcut kaleci renkleri: ${be.join(", ")}`)}a.push(s)}));const i=s.length>0||a.some((e=>e.errors.length>0));return{entries:a,errors:s,canApply:!i}})(ue,he);ge(t),ye(!0)}},disabled:!ue.trim()&&!he.trim(),children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),"Kontrol Et"]}),i.jsxs(oo,{variant:"outline",onClick:Ce,children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"İptal"]})]}),fe&&xe&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[i.jsx(Tr,{className:"h-5 w-5"}),"Kontrol Sonucu"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:xe.entries.filter((e=>0===e.errors.length)).length}),i.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"✅ Başarılı"})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:xe.entries.filter((e=>e.errors.length>0)).length}),i.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:"❌ Hatalı"})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:xe.entries.length}),i.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"📋 Toplam"})]})]}),i.jsx("div",{className:"space-y-2",children:xe.entries.map(((e,t)=>i.jsxs("div",{className:"border rounded-lg p-3 "+(0===e.errors.length?"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800":"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800"),children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[0===e.errors.length?i.jsx(Or,{className:"h-4 w-4 text-green-600"}):i.jsx(Er,{className:"h-4 w-4 text-red-600"}),i.jsx("span",{className:"font-mono text-sm",children:e.line})]}),0===e.errors.length&&i.jsxs("div",{className:"text-xs text-green-600 font-medium",children:[e.type," • ",e.quantity," adet • ",e.size," beden • ",e.color]})]}),e.errors.length>0&&i.jsx("div",{className:"space-y-1",children:e.errors.map(((e,t)=>i.jsxs("div",{className:"text-sm text-red-700 dark:text-red-300 flex items-center gap-1",children:[i.jsx(Tr,{className:"h-3 w-3"}),e]},t)))})]},t)))}),i.jsxs("div",{className:"border-t pt-4 space-y-3",children:[xe.canApply?i.jsxs(C5,{className:"border-green-200 bg-green-50 dark:bg-green-900/20",children:[i.jsx(Or,{className:"h-4 w-4 text-green-600"}),i.jsx(T5,{className:"text-green-800 dark:text-green-200",children:"🎉 Her şey hazır! Ürünler sepete eklenebilir."})]}):i.jsxs(C5,{variant:"destructive",children:[i.jsx(Er,{className:"h-4 w-4"}),i.jsx(T5,{children:"❌ Önce hataları düzeltin! Sepete ekleme yapılamaz."})]}),i.jsxs("div",{className:"flex gap-2",children:[xe.canApply?i.jsxs(oo,{onClick:()=>{xe&&xe.canApply&&(xe.entries.forEach((r=>{if(0===r.errors.length){const a=e.variations.find((e=>e.color===r.color&&e.size===r.size));a&&("Oyuncu"===r.type?t(e,r.color,r.size,r.quantity,a,0,0,"","","","",0,"","",0,0,"","","","",!1,K,H,V,W,X,J):"Kaleci"===r.type&&t(e,r.color,r.size,0,a,0,0,"","","","",r.quantity,r.color,r.size,0,0,"","","","",!1,K,H,V,W,X,J))}})),Ce())},className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),"✅ Sepete Ekle"]}):i.jsxs(oo,{disabled:!0,className:"bg-gray-400 cursor-not-allowed",children:[i.jsx(Er,{className:"h-4 w-4 mr-2"}),"❌ Önce Hataları Düzeltin"]}),i.jsx(oo,{variant:"outline",onClick:()=>ye(!1),children:"↩️ Düzenle"}),i.jsxs(oo,{variant:"outline",onClick:Ce,children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"İptal"]})]})]})]})})]})]})})]})}function ene({orderItems:e,setOrderItems:t,onContinue:r}){const[a,n]=ze.useState(""),[s,l]=ze.useState("Tümü"),[o,c]=ze.useState("Tümü"),[d,u]=ze.useState(!1),[m,h]=ze.useState(null),[p,x]=ze.useState(1),[g]=ze.useState(5),{data:f,isLoading:y}=qe({queryKey:["promotion-products"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("products").select("\n          *,\n          product_variations(*)\n        ").eq("category","Promosyon").eq("status","active").eq("is_additional_product",!1);if(t)throw t;const r=[];return null==e||e.forEach((e=>{var t;null==(t=e.product_variations)||t.forEach((t=>{t.stock_quantity>0&&r.push({variation_id:t.id,id:e.id,name:e.name,code:e.code,category:e.category,brand:e.brand||"",color:t.color,size:t.size,sku:t.sku,stock_quantity:t.stock_quantity,final_price:t.variation_price||e.design_base_price||e.base_price,images:e.images?[e.images]:[],shorts_price:e.shorts_price||0,socks_price:e.socks_price||0,goalkeeper_price:e.goalkeeper_price||0})}))})),r}}),v=e=>{if(!e)return"/placeholder.svg";if(Array.isArray(e)&&e.length>0)return e[0];if("string"==typeof e)try{const t=JSON.parse(e);return Array.isArray(t)&&t.length>0?t[0]:e}catch(die){return e}return"/placeholder.svg"},b=(null==f?void 0:f.filter((e=>"Promosyon"===e.category||e.name.toLowerCase().includes("promosyon"))))||[],j=b.reduce(((e,t)=>{const r=e.find((e=>e.name===t.name));return r?(r.colors.includes(t.color)||r.colors.push(t.color),r.sizes.includes(t.size)||r.sizes.push(t.size),r.variations.push(t),t.final_price!==r.basePrice&&(r.basePrice=Math.min(r.basePrice,t.final_price))):e.push({id:t.id,name:t.name,code:t.code,category:t.category,brand:t.brand,colors:[t.color],sizes:[t.size],basePrice:t.final_price,image:v(t.images),variations:[t]}),e}),[]),k=j.filter((e=>{var t;const r=e.name.toLowerCase().includes(a.toLowerCase())||e.code.toLowerCase().includes(a.toLowerCase())||(null==(t=e.brand)?void 0:t.toLowerCase().includes(a.toLowerCase())),n="Tümü"===s||e.colors.includes(s),i="Tümü"===o||e.brand===o;return r&&n&&i})),w=["Tümü",...Array.from(new Set(b.map((e=>e.color))))],N=["Tümü",...Array.from(new Set(b.map((e=>e.brand)).filter(Boolean)))],_=Math.ceil(k.length/g),S=(p-1)*g,C=S+g,T=k.slice(S,C),O=(e,t)=>{h({url:e,name:t}),u(!0)},P=(r,a,n,s,i,l,o,c,d,u,m,h,p,x,g,f,y,b,j,k,w,N,_,S,C,T,O)=>{if(s<=0&&!((l||0)>0||(o||0)>0||(h||0)>0||(g||0)>0||(f||0)>0))return;const P=Date.now(),A=Math.random().toString(36).substr(2,9),E=`${r.name}-${a}-${n}-${P}-${A}`,D=s>0?e.find((e=>e.name===r.name&&e.color===a&&e.size===n&&e.quantity>0)):null,M=(l||0)*(S||60),z=(o||0)*(T||37),R=(g||0)*(C||40),I=(f||0)*(O||37),F=(h||0)*(_||50),B=(N||100)*s;if(D&&s>0){const r=D.quantity+s;let a=D.sizes||[];if(s>0){const e=a.findIndex((e=>e.size===n));e>=0?a[e].quantity+=s:a.push({size:n,quantity:s,variation_id:i.variation_id})}let v=D.goalkeeperDetails||[];if(h&&h>0&&p&&x){const e=v.findIndex((e=>e.color===p&&e.size===x));e>=0?v[e].quantity+=h:v.push({quantity:h,color:p,size:x,unitPrice:_||50})}let P=D.playerShortsDetails||[];if(l&&l>0&&c&&u){const e=P.findIndex((e=>e.color===c&&e.type===u));e>=0?P[e].quantity+=l:P.push({quantity:l,color:c,type:u,unitPrice:S||60})}let A=D.playerSocksDetails||[];if(o&&o>0&&m&&d){const e=A.findIndex((e=>e.color===m&&e.type===d));e>=0?A[e].quantity+=o:A.push({quantity:o,color:m,type:d,unitPrice:T||37})}let E=D.goalkeeperShortsDetails||[];if(g&&g>0&&y&&j){const e=w?`${j} - Uzun`:j,t=E.findIndex((t=>t.color===y&&t.type===e));t>=0?E[t].quantity+=g:E.push({quantity:g,color:y,type:e,unitPrice:C||40})}let M=D.goalkeeperSocksDetails||[];if(f&&f>0&&k&&b){const e=M.findIndex((e=>e.color===k&&e.type===b));e>=0?M[e].quantity+=f:M.push({quantity:f,color:k,type:b,unitPrice:O||37})}const z=P.reduce(((e,t)=>e+t.quantity),0),R=A.reduce(((e,t)=>e+t.quantity),0),I=v.reduce(((e,t)=>e+t.quantity),0),F=E.reduce(((e,t)=>e+t.quantity),0),B=M.reduce(((e,t)=>e+t.quantity),0);let L=D.size;s>0?1===a.length?L=a[0].size:a.length>1&&(L=`${a.length} farklı beden`):r<=0&&(a=[],L=""),t(e.map((e=>e.id===D.id?{...e,quantity:r,unitPrice:N||100,totalPrice:r*(N||100),sizes:a,size:L,goalkeeperQuantity:I,goalkeeperTotalPrice:v.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperDetails:v,playerShortsDetails:P,playerSocksDetails:A,goalkeeperShortsDetails:E,goalkeeperSocksDetails:M,playerShortsTotalPrice:P.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),playerSocksTotalPrice:A.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperShortsTotalPrice:E.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperSocksTotalPrice:M.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),shortsQuantity:z+F,socksQuantity:R+B,shortsTotalPrice:P.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)+E.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),socksTotalPrice:A.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)+M.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperColor:p||e.goalkeeperColor,goalkeeperSize:x||e.goalkeeperSize}:e)))}else{const P=[];h&&h>0&&p&&x&&P.push({quantity:h,color:p,size:x,unitPrice:_||50});const A=[];l&&l>0&&c&&u&&A.push({quantity:l,color:c,type:u,unitPrice:S||60});const D=[];o&&o>0&&m&&d&&D.push({quantity:o,color:m,type:d,unitPrice:T||37});const L=[];if(g&&g>0&&y&&j){const e=w?`${j} - Uzun`:j;L.push({quantity:g,color:y,type:e,unitPrice:C||40})}const q=[];f&&f>0&&k&&b&&q.push({quantity:f,color:k,type:b,unitPrice:O||37});const $={id:E,name:r.name,type:"promotion",category:r.category,color:a,size:s>0?n:"",sizes:s>0?[{size:n,quantity:s,variation_id:i.variation_id}]:[],quantity:s>0?s:0,unitPrice:N||100,totalPrice:B,variationId:i.variation_id,sku:i.sku,image:v(i.images),goalkeeperDetails:P,playerShortsDetails:A,playerSocksDetails:D,goalkeeperShortsDetails:L,goalkeeperSocksDetails:q,playerShortsTotalPrice:M,playerSocksTotalPrice:z,goalkeeperShortsTotalPrice:R,goalkeeperSocksTotalPrice:I,shortsQuantity:(l||0)+(g||0),socksQuantity:(o||0)+(f||0),goalkeeperQuantity:h||0,shortsUnitPrice:S||60,socksUnitPrice:T||37,goalkeeperUnitPrice:_||75,shortsTotalPrice:M+R,socksTotalPrice:z+I,goalkeeperTotalPrice:F,goalkeeperColor:p||"",goalkeeperSize:x||""};(s>0||l&&l>0||o&&o>0||h&&h>0||g&&g>0||f&&f>0)&&t([...e,$])}},A=r=>{t(e.filter((e=>e.id!==r)))},E=(r,a)=>{const n=e.find((e=>e.id===r));if(!n)return;const s=n.playerShortsDetails&&n.playerShortsDetails.length>0||n.playerSocksDetails&&n.playerSocksDetails.length>0||n.goalkeeperDetails&&n.goalkeeperDetails.length>0||n.goalkeeperShortsDetails&&n.goalkeeperShortsDetails.length>0||n.goalkeeperSocksDetails&&n.goalkeeperSocksDetails.length>0;if(a<=0&&!s)return void A(r);let i=n.sizes||[],l=n.size;a>0?n.sizes&&1===n.sizes.length?(i=[{...n.sizes[0],quantity:a}],l=i[0].size):n.sizes&&n.sizes.length>1&&(l=`${n.sizes.length} farklı beden`):(i=[],l=""),t(e.map((e=>e.id===r?{...e,quantity:a>0?a:0,totalPrice:(a>0?a:0)*(e.unitPrice||0),sizes:i,size:l}:e)))},D=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.goalkeeperDetails)return;const i=[...s.goalkeeperDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,goalkeeperDetails:i,goalkeeperTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),goalkeeperQuantity:i.reduce(((e,t)=>e+t.quantity),0)}:e))):A(r)},M=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.playerShortsDetails)return;const i=[...s.playerShortsDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,playerShortsDetails:i,playerShortsTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},z=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.playerSocksDetails)return;const i=[...s.playerSocksDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,playerSocksDetails:i,playerSocksTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},R=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.goalkeeperShortsDetails)return;const i=[...s.goalkeeperShortsDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperSocksDetails&&s.goalkeeperSocksDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,goalkeeperShortsDetails:i,goalkeeperShortsTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},I=(r,a,n)=>{const s=e.find((e=>e.id===r));if(!s||!s.goalkeeperSocksDetails)return;const i=[...s.goalkeeperSocksDetails];n<=0?i.splice(a,1):i[a]={...i[a],quantity:n};const l=(s.quantity||0)>0||s.playerShortsDetails&&s.playerShortsDetails.length>0||s.playerSocksDetails&&s.playerSocksDetails.length>0||s.goalkeeperDetails&&s.goalkeeperDetails.length>0||s.goalkeeperShortsDetails&&s.goalkeeperShortsDetails.length>0;0!==i.length||l?t(e.map((e=>e.id===r?{...e,goalkeeperSocksDetails:i,goalkeeperSocksTotalPrice:i.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)}:e))):A(r)},[F,B]=ze.useState(!1),[L,q]=ze.useState(""),[$,K]=ze.useState([]),[U,H]=ze.useState([]),[Y,V]=ze.useState(!1);return y?i.jsxs("div",{className:"flex items-center justify-center min-h-64",children:[i.jsx(oa,{className:"h-8 w-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Promosyon ürünleri yükleniyor..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Promosyon Ürünleri"}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[k.length," ürün bulundu"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{variant:"outline",onClick:()=>B(!F),className:"flex items-center gap-2",children:[i.jsx(ln,{className:"h-4 w-4"}),F?"Normal Görünüm":"Toplu Giriş"]}),r&&e.length>0&&i.jsxs(oo,{onClick:()=>null==r?void 0:r(),className:"flex items-center gap-2",children:["Devam Et",i.jsx("span",{className:"bg-white/20 px-2 py-1 rounded text-sm",children:e.filter((e=>"promotion"===e.type)).length})]})]})]}),F&&i.jsxs(ro,{className:"p-6",children:[i.jsxs(ao,{className:"px-0 pt-0",children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ln,{className:"h-5 w-5"}),"Toplu Sipariş Girişi"]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Birden fazla ürünü aynı anda eklemek için aşağıdaki formata uyun:"})]}),i.jsx(io,{className:"px-0 space-y-4",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sipariş Listesi"}),i.jsx(v6,{value:L,onChange:e=>q(e.target.value),placeholder:"Format örnekleri:\nÜrün Adı | Renk | Beden | Adet\nÜrün Adı - Renk - Beden - Adet\nÜrün Adı, Renk, Beden, Adet\nÜrün Adı Renk Beden Adet\n\nÖrnek:\nÖzel Tasarım Forma | Kırmızı | L | 10\nTasarım Jersey - Mavi - XL - 5",className:"min-h-[200px] font-mono text-sm"}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx(oo,{onClick:async()=>{V(!0),K([]),H([]);try{const t=L.split("\n").map((e=>e.trim())).filter((e=>e.length>0));if(0===t.length)return void K(["Lütfen sipariş bilgilerini girin."]);let r=0;const a=[],n=[];for(let s=0;s<t.length;s++){const i=t[s],l=s+1;try{let e="",t="",s="",o=0,c=0,d=0,u=0;if(i.includes("|")){const r=i.split("|").map((e=>e.trim()));r.length>=4&&([e,t,s]=r,o=parseInt(r[3])||0,r.length>4&&(c=parseInt(r[4])||0),r.length>5&&(d=parseInt(r[5])||0),r.length>6&&(u=parseInt(r[6])||0))}else if(i.includes(" - ")){const r=i.split(" - ").map((e=>e.trim()));r.length>=4&&([e,t,s]=r,o=parseInt(r[3])||0)}else if(i.includes(",")){const r=i.split(",").map((e=>e.trim()));r.length>=4&&([e,t,s]=r,o=parseInt(r[3])||0)}else{const r=i.split(/\s+/);r.length>=4&&(e=r.slice(0,-3).join(" "),t=r[r.length-3],s=r[r.length-2],o=parseInt(r[r.length-1])||0)}if(!e||!t||!s||o<=0){a.push(`Satır ${l}: Geçersiz format. Örnek: "Ürün Adı | Renk | Beden | Adet"`);continue}const m=j.find((t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase())));if(!m){a.push(`Satır ${l}: "${e}" ürünü bulunamadı.`);continue}const h=m.variations.find((e=>e.color.toLowerCase()===t.toLowerCase()&&e.size.toLowerCase()===s.toLowerCase()));if(!h){a.push(`Satır ${l}: "${m.name}" için "${t} - ${s}" bulunamadı.`);continue}if(h.stock_quantity<o){a.push(`Satır ${l}: "${m.name}" için yeterli stok yok. Mevcut: ${h.stock_quantity}, İstenen: ${o}`);continue}P(m,h.color,h.size,o,h,c,d,"Siyah","M","M","Beyaz",u,"Fosfor Turuncu",h.size,0,0,"Siyah","5","5","Beyaz",!1),r++,n.push(`Satır ${l}: "${m.name}" - ${t} ${s} (${o} adet) eklendi.`)}catch(e){a.push(`Satır ${l}: İşlem hatası - ${e instanceof Error?e.message:"Bilinmeyen hata"}`)}}K(a),H(n),r>0&&setTimeout((()=>{q(""),B(!1)}),3e3)}catch(e){K([`Genel hata: ${e instanceof Error?e.message:"Bilinmeyen hata"}`])}finally{V(!1)}},disabled:!L.trim()||Y,className:"flex items-center gap-2",children:Y?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 animate-spin"}),"İşleniyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Pa,{className:"h-4 w-4"}),"Siparişleri Ekle"]})}),i.jsx(oo,{variant:"outline",onClick:()=>q(""),disabled:Y,children:"Temizle"})]})]}),i.jsxs("div",{className:"space-y-4",children:[$.length>0&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(Er,{className:"h-4 w-4"}),i.jsx(T5,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("strong",{children:["Hatalar (",$.length,"):"]}),$.slice(0,5).map(((e,t)=>i.jsx("div",{className:"text-sm",children:e},t))),$.length>5&&i.jsxs("div",{className:"text-sm text-gray-500",children:["... ve ",$.length-5," hata daha"]})]})})]}),U.length>0&&i.jsxs(C5,{children:[i.jsx(Or,{className:"h-4 w-4"}),i.jsx(T5,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("strong",{children:["Başarılı (",U.length,"):"]}),U.slice(0,3).map(((e,t)=>i.jsx("div",{className:"text-sm text-green-600",children:e},t))),U.length>3&&i.jsxs("div",{className:"text-sm text-gray-500",children:["... ve ",U.length-3," başarılı daha"]})]})})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium mb-2",children:"İstatistikler"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:U.length}),i.jsx("div",{className:"text-gray-600",children:"Başarılı"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:$.length}),i.jsx("div",{className:"text-gray-600",children:"Hatalı"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:L.split("\n").filter((e=>e.trim())).length}),i.jsx("div",{className:"text-gray-600",children:"Toplam"})]})]})]})]})]})})]}),i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsx("div",{className:"flex-1 min-w-64",children:i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"Ürün ara...",value:a,onChange:e=>{return t=e.target.value,n(t),void x(1);var t},className:"pl-10"})]})}),i.jsxs(eO,{value:s,onValueChange:e=>{l(e),x(1)},children:[i.jsx(rO,{className:"w-48",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:w.map((e=>i.jsx(iO,{value:e,children:e},e)))})]}),i.jsxs(eO,{value:o,onValueChange:e=>{c(e),x(1)},children:[i.jsx(rO,{className:"w-48",children:i.jsx(tO,{placeholder:"Marka seçin"})}),i.jsx(sO,{children:N.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[0===T.length?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"Aradığınız kriterlere uygun ürün bulunamadı."})}):T.map((t=>i.jsx(Jae,{product:t,onAddToOrder:P,orderItems:e,onImageClick:O},t.id))),_>1&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[S+1,"-",Math.min(C,k.length)," / ",k.length," ürün"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>x(p-1),disabled:1===p,children:"Önceki"}),i.jsxs("span",{className:"text-sm",children:[p," / ",_]}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>x(p+1),disabled:p===_,children:"Sonraki"})]})]})]}),i.jsxs("div",{className:"space-y-4 sticky top-4 h-fit",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Sipariş Özeti"})}),i.jsx(io,{children:0===e.filter((e=>"promotion"===e.type&&((e.quantity||0)>0||(e.goalkeeperQuantity||0)>0||(e.shortsQuantity||0)>0||(e.socksQuantity||0)>0||(e.playerShortsQuantity||0)>0||(e.playerSocksQuantity||0)>0||(e.goalkeeperShortsQuantity||0)>0||(e.goalkeeperSocksQuantity||0)>0))).length?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Henüz ürün eklenmedi"}):i.jsxs("div",{className:"space-y-4",children:[e.filter((e=>"promotion"===e.type&&((e.quantity||0)>0||(e.goalkeeperQuantity||0)>0||(e.shortsQuantity||0)>0||(e.socksQuantity||0)>0||(e.playerShortsQuantity||0)>0||(e.playerSocksQuantity||0)>0||(e.goalkeeperShortsQuantity||0)>0||(e.goalkeeperSocksQuantity||0)>0))).reduce(((e,t)=>{const r=e.find((e=>e.name===t.name));return r?r.items.push(t):e.push({name:t.name,items:[t]}),e}),[]).map((e=>{const t=e.items.map((e=>e.color)).filter(((e,t,r)=>r.indexOf(e)===t)),r=[],a=[],n=[],s=[],l=[],o=[];let c=0,d=0,u=0,m=0,h=0,p=0,x=0;return e.items.forEach((e=>{c+=e.quantity||0,d+=e.totalPrice||0,e.sizes&&e.sizes.forEach((t=>{r.push({size:t.size,quantity:t.quantity,variation_id:t.variation_id,color:e.color})})),e.goalkeeperDetails&&(a.push(...e.goalkeeperDetails),u+=e.goalkeeperDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.playerShortsDetails&&(n.push(...e.playerShortsDetails),m+=e.playerShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.playerSocksDetails&&(s.push(...e.playerSocksDetails),h+=e.playerSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.goalkeeperShortsDetails&&(l.push(...e.goalkeeperShortsDetails),p+=e.goalkeeperShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e.goalkeeperSocksDetails&&(o.push(...e.goalkeeperSocksDetails),x+=e.goalkeeperSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),!e.playerShortsDetails&&!e.goalkeeperShortsDetails&&(e.shortsTotalPrice||0)>0&&(m+=e.shortsTotalPrice||0),!e.playerSocksDetails&&!e.goalkeeperSocksDetails&&(e.socksTotalPrice||0)>0&&(h+=e.socksTotalPrice||0),!e.goalkeeperDetails&&(e.goalkeeperTotalPrice||0)>0&&(u+=e.goalkeeperTotalPrice||0)})),i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("h3",{className:"font-semibold text-base text-gray-900 dark:text-gray-100",children:e.name}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.join(", ")})]}),i.jsxs("div",{className:"space-y-2",children:[r.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-gray-200",children:"📏 Bedenler"}),r.map(((t,r)=>{var a;const n=e.items.find((e=>{var r;return e.color===t.color&&(null==(r=e.sizes)?void 0:r.some((e=>e.size===t.size)))}));return i.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:[t.color," - ",t.size]}),i.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[t.quantity," x ₺",(null==(a=null==n?void 0:n.unitPrice)?void 0:a.toFixed(2))||"0.00"," = ₺",(t.quantity*((null==n?void 0:n.unitPrice)||0)).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{n&&E(n.id,(n.quantity||0)-1)},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{n&&E(n.id,(n.quantity||0)+1)},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`${t.color}-${t.size}`)}))]}),a.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-orange-800 dark:text-orange-200",children:"🥅 Kaleci Forması"}),a.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.goalkeeperDetails)?void 0:r.some((e=>e.color===t.color&&e.size===t.size))}));return i.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3 border border-orange-200 dark:border-orange-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[t.color," - ",t.size]}),i.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.size===t.size)))||0;D(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.size===t.size)))||0;D(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`goalkeeper-${r}`)}))]}),(n.length>0||l.length>0)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-blue-800 dark:text-blue-200",children:"🩳 Şortlar"}),n.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.playerShortsDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Oyuncu • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;M(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;M(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`player-shorts-${r}`)})),l.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.goalkeeperShortsDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Kaleci • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;R(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperShortsDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;R(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`goalkeeper-shorts-${r}`)}))]}),(s.length>0||o.length>0)&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium text-sm text-green-800 dark:text-green-200",children:"🧦 Çoraplar"}),s.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.playerSocksDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:["Oyuncu • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;z(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.playerSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;z(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`player-socks-${r}`)})),o.map(((t,r)=>{const a=e.items.find((e=>{var r;return null==(r=e.goalkeeperSocksDetails)?void 0:r.some((e=>e.color===t.color&&e.type===t.type))}));return i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:["Kaleci • ",t.color," - ",t.type]}),i.jsxs("p",{className:"text-xs text-green-600 dark:text-green-300",children:[t.quantity," x ₺",t.unitPrice.toFixed(2)," = ₺",(t.quantity*t.unitPrice).toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;I(a.id,r,t.quantity-1)}},children:i.jsx(ga,{className:"h-3 w-3"})}),i.jsx("span",{className:"text-sm font-medium w-8 text-center",children:t.quantity}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{var e;if(a){const r=(null==(e=a.goalkeeperSocksDetails)?void 0:e.findIndex((e=>e.color===t.color&&e.type===t.type)))||0;I(a.id,r,t.quantity+1)}},children:i.jsx(Pa,{className:"h-3 w-3"})})]})]})},`goalkeeper-socks-${r}`)}))]})]}),i.jsx("div",{className:"border-t pt-3 mt-3",children:i.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[i.jsx("span",{children:"Ürün Toplamı:"}),i.jsxs("span",{children:["₺",(d+u+m+h+p+x).toFixed(2)]})]})})]},e.name)})),i.jsx("div",{className:"border-t pt-3",children:i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:"Toplam:"}),i.jsxs("span",{children:["₺",e.filter((e=>"promotion"===e.type)).reduce(((e,t)=>{let r=t.totalPrice||0;return t.goalkeeperDetails?r+=t.goalkeeperDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0):t.goalkeeperTotalPrice&&(r+=t.goalkeeperTotalPrice),t.playerShortsDetails?r+=t.playerShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0):t.shortsTotalPrice&&(r+=t.shortsTotalPrice),t.playerSocksDetails?r+=t.playerSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0):t.socksTotalPrice&&(r+=t.socksTotalPrice),t.goalkeeperShortsDetails&&(r+=t.goalkeeperShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),t.goalkeeperSocksDetails&&(r+=t.goalkeeperSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)),e+r}),0).toFixed(2)]})]})})]})})]}),e.filter((e=>"promotion"===e.type)).length>0&&i.jsx(ro,{children:i.jsx(io,{className:"p-4",children:i.jsx(oo,{className:"w-full",size:"lg",onClick:()=>{r&&r()},children:"Devam Et"})})})]})]}),i.jsx(sd,{open:d,onOpenChange:u,children:i.jsxs(cd,{className:"max-w-2xl",children:[i.jsx(dd,{children:i.jsx(md,{children:null==m?void 0:m.name})}),i.jsx("div",{className:"flex justify-center",children:i.jsx("img",{src:null==m?void 0:m.url,alt:null==m?void 0:m.name,className:"max-w-full max-h-96 object-contain rounded-lg",onError:e=>{e.currentTarget.src="/placeholder.svg"}})})]})})]})}function tne({additionalItems:e,setAdditionalItems:t,onContinue:r}){const{data:a,isLoading:n}=qe({queryKey:["additional-products"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("products").select("\n          *,\n          product_variations(*)\n        ").eq("status","active").eq("is_additional_product",!0);if(t)throw t;const r=[];return null==e||e.forEach((e=>{var t;null==(t=e.product_variations)||t.forEach((t=>{t.stock_quantity>0&&r.push({variation_id:t.id,id:e.id,name:e.name,code:e.code,category:e.category,brand:e.brand||"",color:t.color,size:t.size,sku:t.sku,stock_quantity:t.stock_quantity,final_price:t.variation_price||e.base_price,images:e.images?[e.images]:[],is_lined:t.is_lined,is_mesh:t.is_mesh})}))})),r}}),s=a?Object.values(a.reduce(((e,t)=>{const r=t.id;return e[r]||(e[r]={id:r,name:t.name,category:t.category,brand:t.brand,basePrice:t.final_price,variations:[],colors:[],sizes:[],hasLiningOption:!1,hasMeshOption:!1}),e[r].variations.push({variation_id:t.variation_id,color:t.color,size:t.size,stock_quantity:t.stock_quantity,final_price:t.final_price,is_lined:t.is_lined,is_mesh:t.is_mesh}),e[r].colors.includes(t.color)||e[r].colors.push(t.color),e[r].sizes.includes(t.size)||e[r].sizes.push(t.size),!0===t.is_lined&&(e[r].hasLiningOption=!0),!0===t.is_mesh&&(e[r].hasMeshOption=!0),e}),{})):[],l=(r,n,i)=>{const l=null==a?void 0:a.find((e=>e.variation_id===r));if(!l)return;const o=`${r}-${(null==i?void 0:i.is_lined)?"lined":"unlined"}-${(null==i?void 0:i.is_mesh)?"mesh":"plain"}`,c=e.findIndex((e=>e.id===o));if(n<=0)return void(c>=0&&t(e.filter(((e,t)=>t!==c))));let d=`${l.name} - ${l.color} - ${l.size}`;const u=s.find((e=>e.id===l.id));(null==u?void 0:u.hasLiningOption)&&"boolean"==typeof(null==i?void 0:i.is_lined)&&(d+=i.is_lined?" - Astarlı":" - Astarsız"),(null==u?void 0:u.hasMeshOption)&&"boolean"==typeof(null==i?void 0:i.is_mesh)&&(d+=i.is_mesh?" - Fileli":" - Standart");let m=l.final_price;(null==u?void 0:u.hasLiningOption)&&!0===(null==i?void 0:i.is_lined)&&(m+=200),(null==u?void 0:u.hasMeshOption)&&!0===(null==i?void 0:i.is_mesh)&&(m+=50);const h={id:o,name:d,quantity:n,unitPrice:m,totalPrice:m*n};if(c>=0){const r=[...e];r[c]=h,t(r)}else t([...e,h])},o=t=>{const r=e.find((e=>e.id===t));return(null==r?void 0:r.quantity)||0};return n?i.jsx("div",{className:"text-center py-8",children:"Ek ürünler yükleniyor..."}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-4",children:i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(va,{className:"h-5 w-5"}),"Ek Ürünler Ekleyebilirsiniz"]})}),i.jsxs(io,{className:"space-y-4",children:[s.map((e=>i.jsx(rne,{product:e,onUpdateQuantity:l,getQuantity:o},e.id))),0===s.length&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(va,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Henüz ek ürün bulunmuyor"})]})]})]})}),i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"sticky top-4 space-y-4",children:i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Ek Ürünler Özeti"})}),i.jsx(io,{children:0===e.length?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Ek ürün seçilmedi"}):i.jsxs("div",{className:"space-y-3",children:[e.map((e=>i.jsx("div",{className:"border rounded-lg p-3",children:i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-sm",children:e.name}),i.jsxs("div",{className:"flex flex-wrap gap-1 my-1",children:[e.name.includes("Astarlı")&&i.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs text-blue-700",children:"Astarlı"}),e.name.includes("Astarsız")&&i.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-700",children:"Astarsız"}),e.name.includes("Fileli")&&i.jsx("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs text-green-700",children:"Fileli"}),e.name.includes("Standart")&&i.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-700",children:"Standart"})]}),i.jsxs("p",{className:"text-xs text-gray-600",children:["₺",e.unitPrice," x ",e.quantity]})]}),i.jsxs("span",{className:"text-sm font-bold",children:["₺",e.totalPrice]})]})},e.id))),i.jsx("div",{className:"border-t pt-3",children:i.jsxs("div",{className:"flex justify-between items-center font-bold",children:[i.jsx("span",{children:"Ek Ürünler Toplam:"}),i.jsxs("span",{children:["₺",e.reduce(((e,t)=>e+t.totalPrice),0)]})]})})]})})]})})})]})}function rne({product:e,onUpdateQuantity:t,getQuantity:r}){const[a,n]=ze.useState(e.colors[0]||""),[s,l]=ze.useState(e.sizes[0]||""),[o,c]=ze.useState(1),[d,u]=ze.useState(void 0),[m,h]=ze.useState(void 0),p=e.variations.filter((e=>e.color===a&&e.size===s)),x=p.reduce(((e,t)=>e+(t.stock_quantity||0)),0),g=p[0],f=g?{...g,stock_quantity:x,is_lined:d,is_mesh:m}:void 0,y=g?`${g.variation_id}-${d?"lined":"unlined"}-${m?"mesh":"plain"}`:"",v=g?r(y):0,b=e=>{g&&t(g.variation_id,e,{is_lined:d,is_mesh:m})};return i.jsx(ro,{children:i.jsx(io,{className:"p-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:e.name}),i.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["₺",(null==g?void 0:g.final_price)||e.basePrice]}),f&&i.jsxs("p",{className:"text-sm text-gray-500",children:["Stok: ",f.stock_quantity," adet"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Renk:"}),i.jsxs(eO,{value:a,onValueChange:e=>{n(e),u(void 0),h(void 0)},children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Renk seçin"})}),i.jsx(sO,{children:e.colors.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Beden:"}),i.jsxs(eO,{value:s,onValueChange:e=>{l(e),u(void 0),h(void 0)},children:[i.jsx(rO,{className:"mt-1",children:i.jsx(tO,{placeholder:"Beden seçin"})}),i.jsx(sO,{children:e.sizes.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),e.hasLiningOption&&i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("label",{className:"text-sm font-medium",children:"Astar:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:!0===d?"default":"outline",size:"sm",onClick:()=>u(!0),children:"Astarlı"}),i.jsx(oo,{variant:!1===d?"default":"outline",size:"sm",onClick:()=>u(!1),children:"Astarsız"})]})]}),e.hasMeshOption&&i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("label",{className:"text-sm font-medium",children:"File:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(oo,{variant:!0===m?"default":"outline",size:"sm",onClick:()=>h(!0),children:"Fileli"}),i.jsx(oo,{variant:!1===m?"default":"outline",size:"sm",onClick:()=>h(!1),children:"Standart"})]})]}),v>0&&i.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[i.jsxs("span",{className:"text-sm font-medium",children:["Sepette: ",v," adet"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>b(v-1),className:"h-8 w-8 p-0",children:i.jsx(ga,{className:"h-4 w-4"})}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>b(v+1),disabled:!g||v>=g.stock_quantity,className:"h-8 w-8 p-0",children:i.jsx(Pa,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(co,{type:"number",min:"1",value:o,onChange:e=>c(parseInt(e.target.value)||1),className:"flex-1",placeholder:"Adet"}),i.jsx(oo,{onClick:()=>{g&&o>0&&(t(g.variation_id,v+o,{is_lined:d,is_mesh:m}),c(1))},disabled:!g||!a||!s||o<=0||g&&v+o>x||e.hasLiningOption&&void 0===d||e.hasMeshOption&&void 0===m,className:"flex-1",children:"Sepete Ekle"})]})]})})})}function ane({printRequests:e,setPrintRequests:t,orderItems:r,orderType:a,onValidationChange:n}){const[s,l]=ze.useState(!0),[o,c]=ze.useState(!1),[d,u]=ze.useState(null),[m,h]=ze.useState(null),[p,x]=ze.useState(null),[g,f]=ze.useState(null),[y,v]=ze.useState(null),[b,j]=ze.useState(null),[k,w]=ze.useState(null),[N,_]=ze.useState({productId:"",region:"",content:""}),{data:S,isLoading:C}=qe({queryKey:["print-regions"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("print_regions").select("*").eq("status","active").order("display_order",{ascending:!0});if(t)throw t;return e}}),T=()=>{u(null)},O=["25705bc8-6080-40c9-ac73-d196f3facc96","e4d3dabc-4703-4ecf-9662-54b485d539c6","ced1b5a4-b5b1-4f2f-a0dd-34c85e0a83fc"],P="design"===a?null==S?void 0:S.filter((e=>O.includes(e.id))):S;ze.useEffect((()=>{const t=null!==g||e.some((e=>"e4d3dabc-4703-4ecf-9662-54b485d539c6"===e.regionId&&e.fileUrl)),r=null!==b||e.some((e=>"ced1b5a4-b5b1-4f2f-a0dd-34c85e0a83fc"===e.regionId&&e.fileUrl));null==n||n(t&&r)}),[g,b,e,n]),ze.useEffect((()=>{N.region&&setTimeout((()=>{const e=document.getElementById("file");e&&(e.focus(),e.click())}),300)}),[N.region]);const A=(e,t,a)=>{const n=r.filter((t=>{var a;return t.id===e||t.name===(null==(a=r.find((t=>t.id===e)))?void 0:a.name)})),s=t.toLowerCase();if(a&&["3ab16bfa-7430-4e3b-aad5-871492903229","0466e2c6-fb52-4ff8-bb81-8408836da481"].includes(a)){let e=0,t=0,r=0;return n.forEach((a=>{var n,s;e+=(null==(n=a.playerShortsDetails)?void 0:n.reduce(((e,t)=>e+t.quantity),0))||0,t+=(null==(s=a.goalkeeperShortsDetails)?void 0:s.reduce(((e,t)=>e+t.quantity),0))||0,r+=a.shortsQuantity||0})),e>0||t>0?e+t:r}if(s.includes("şort")||s.includes("short")){let e=0,t=0,r=0;return n.forEach((a=>{var n,s;e+=(null==(n=a.playerShortsDetails)?void 0:n.reduce(((e,t)=>e+t.quantity),0))||0,t+=(null==(s=a.goalkeeperShortsDetails)?void 0:s.reduce(((e,t)=>e+t.quantity),0))||0,r+=a.shortsQuantity||0})),e>0||t>0?e+t:r}let i=0,l=0;return n.forEach((e=>{var t,r;i+=(null==(t=e.sizes)?void 0:t.reduce(((e,t)=>e+t.quantity),0))||e.quantity||0,l+=(null==(r=e.goalkeeperDetails)?void 0:r.reduce(((e,t)=>e+t.quantity),0))||e.goalkeeperQuantity||0})),i+l};ze.useEffect((()=>{e.length>0&&(()=>{const a=e.map((e=>{if(r.find((t=>t.id===e.productId))){const t=A(e.productId,e.region,e.regionId),r=e.unitPrice,a=r*t;return{...e,unitPrice:r,totalPrice:a}}return e}));t(a)})()}),[r]);const E=()=>{l(!0),_({productId:"",region:"",content:""}),x(null),h(null),f(null),v(null),j(null),w(null),T()};return C?i.jsx("div",{className:"text-center py-8",children:"Baskı bölgeleri yükleniyor..."}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-4",children:i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5"}),"Baskı Detayları"]})}),i.jsxs(io,{className:"space-y-4",children:[s?i.jsxs(oo,{onClick:()=>l(!1),className:"w-full mb-4",variant:"outline",children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"Baskı Formu Kapat"]}):i.jsxs(oo,{onClick:()=>l(!0),className:"w-full",variant:"outline",children:[i.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Baskı İsteği Ekle"]}),s&&i.jsx(ro,{className:"border-dashed",children:i.jsxs(io,{className:"pt-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"product",children:"Baskı Yapılacak Ürün"}),i.jsxs(eO,{value:N.productId,onValueChange:e=>_((t=>({...t,productId:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Ürün seçin"})}),i.jsx(sO,{children:r.reduce(((e,t)=>{const r=e.find((e=>e.name===t.name));return r?r.items.push(t):e.push({name:t.name,items:[t]}),e}),[]).map((e=>{const t=e.items[0],r=e.items.reduce(((e,t)=>{var r;return e+((null==(r=t.sizes)?void 0:r.reduce(((e,t)=>e+t.quantity),0))||t.quantity||0)}),0),a=e.items.reduce(((e,t)=>{var r;return e+((null==(r=t.goalkeeperDetails)?void 0:r.reduce(((e,t)=>e+t.quantity),0))||t.goalkeeperQuantity||0)}),0),n=e.items.reduce(((e,t)=>{var r,a;const n=(null==(r=t.playerShortsDetails)?void 0:r.reduce(((e,t)=>e+t.quantity),0))||0,s=(null==(a=t.goalkeeperShortsDetails)?void 0:a.reduce(((e,t)=>e+t.quantity),0))||0,i=t.shortsQuantity||0;return e+(n+s||i)}),0);return i.jsxs(iO,{value:t.id,children:[e.name," (Oyuncu: ",r,", Kaleci: ",a,n>0&&`, Şort: ${n}`,")"]},e.name)}))})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"region",children:"Baskı Bölgesi"}),i.jsxs(eO,{value:N.region,onValueChange:e=>_((t=>({...t,region:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Bölge seçin"})}),i.jsx(sO,{children:null==P?void 0:P.map((e=>i.jsxs(iO,{value:e.id,children:[e.name," - ₺",e.base_price]},e.id)))})]})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"content",children:"Tasarım Notu (Opsiyonel)"}),i.jsx(v6,{id:"content",placeholder:"Numara, isim, logo açıklaması vb. (İsteğe bağlı)",value:N.content,onChange:e=>_((t=>({...t,content:e.target.value}))),rows:3})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"file",children:"Tasarım Dosyası (Opsiyonel)"}),i.jsxs("div",{className:"mt-1 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(co,{id:"file",type:"file",accept:"image/*",onChange:async e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(T(),h(null),r)if(function(e){return["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp"].includes(e.type)&&e.size<=104857600}(r)){x(r);try{const e=await L8(r);h(e)}catch(a){u("Dosya önizlemesi oluşturulamadı")}}else u("Desteklenen formatlar: JPEG, PNG, GIF, BMP, WebP (max 100MB)");else x(null)},disabled:o,className:"flex-1"}),o&&i.jsx(oa,{className:"h-5 w-5 animate-spin text-blue-500"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Logo, tasarım dosyası için. JPEG, PNG, GIF, BMP, WebP formatında (max 32MB). Tasarımlar otomatik olarak baskı albümüne yüklenecek."}),d&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx(T5,{children:d})]}),m&&i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Önizleme:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:p&&q8(p.size)}),i.jsxs(sd,{children:[i.jsx(id,{asChild:!0,children:i.jsx(oo,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:i.jsx(Vr,{className:"h-3 w-3"})})}),i.jsx(cd,{className:"max-w-3xl",children:i.jsx("img",{src:m,alt:"Tasarım önizleme",className:"w-full h-auto max-h-[80vh] object-contain"})})]})]})]}),i.jsx("img",{src:m,alt:"Tasarım önizleme",className:"w-full h-32 object-contain border rounded"})]})]})]}),i.jsx(oo,{onClick:async()=>{if(!N.productId||!N.region)return;const a=r.find((e=>e.id===N.productId)),n=null==P?void 0:P.find((e=>e.id===N.region));if(!a||!n)return;T(),c(!0);const s=[];let i;if(p)try{const e=await F8(p,`design_${Date.now()}_${a.name}`);e.success&&e.data&&(i=e.data.url)}catch(h){return u(h instanceof Error?h.message:"Genel tasarım yükleme hatası"),void c(!1)}else m&&(i=m);const l=A(N.productId,n.name,n.id),o=n.base_price,d=o*l;if(s.push({id:`print_${Date.now()}`,productId:N.productId,productName:a.name,region:n.name,regionId:n.id,content:N.content,unitPrice:o,totalPrice:d,fileUrl:i||void 0}),g){const e=null==P?void 0:P.find((e=>"e4d3dabc-4703-4ecf-9662-54b485d539c6"===e.id));if(!e)return u("Forma Ön Görsel baskı bölgesi bulunamadı."),void c(!1);let t;try{const e=await F8(g,`front_jersey_${Date.now()}_${a.name}`);e.success&&e.data&&(t=e.data.url)}catch(h){return u(h instanceof Error?h.message:"Ön yüz görseli yükleme hatası"),void c(!1)}const r=A(N.productId,e.name,e.id),n=e.base_price,i=n*r;s.push({id:`print_front_jersey_${Date.now()}`,productId:N.productId,productName:a.name+" (Ön Görsel)",region:e.name,regionId:e.id,content:"Forma Ön Görsel Baskısı",unitPrice:n,totalPrice:i,fileUrl:t||void 0})}if(b){const e=null==P?void 0:P.find((e=>"ced1b5a4-b5b1-4f2f-a0dd-34c85e0a83fc"===e.id));if(!e)return u("Forma Arka Görsel baskı bölgesi bulunamadı."),void c(!1);let t;try{const e=await F8(b,`back_jersey_${Date.now()}_${a.name}`);e.success&&e.data&&(t=e.data.url)}catch(h){return u(h instanceof Error?h.message:"Arka yüz görseli yükleme hatası"),void c(!1)}const r=A(N.productId,e.name,e.id),n=e.base_price,i=n*r;s.push({id:`print_back_jersey_${Date.now()}`,productId:N.productId,productName:a.name+" (Arka Görsel)",region:e.name,regionId:e.id,content:"Forma Arka Görsel Baskısı",unitPrice:n,totalPrice:i,fileUrl:t||void 0})}t([...e,...s]),E(),c(!1)},disabled:!N.productId||!N.region||o,className:"w-full",children:o?"Yükleniyor...":"Baskı İsteği Ekle"})]})}),0===e.length?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Baskı isteği eklenmedi"}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium",children:"Mevcut Baskı İstekleri"}),e.map((a=>{if(!r.find((e=>e.id===a.productId)))return null;const n=A(a.productId,a.region,a.regionId),s=a.region.toLowerCase().includes("şort")?"Şort Baskısı":"Forma Baskısı";return i.jsx(ro,{children:i.jsx(io,{className:"pt-4",children:i.jsxs("div",{className:"flex gap-4",children:[a.fileUrl?i.jsxs(sd,{children:[i.jsx(id,{asChild:!0,children:i.jsx("div",{className:"flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",children:i.jsx("img",{src:a.fileUrl,alt:`${a.region} tasarım`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 hover:border-blue-400 transition-colors"})})}),i.jsx(cd,{className:"max-w-3xl",children:i.jsx("img",{src:a.fileUrl,alt:`${a.region} tasarım`,className:"w-full h-auto max-h-[80vh] object-contain"})})]}):i.jsx("div",{className:"flex-shrink-0 w-20 h-20 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:i.jsx(aa,{className:"h-8 w-8 text-gray-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h5",{className:"font-medium",children:a.productName}),i.jsx("p",{className:"text-sm text-gray-600",children:a.region}),i.jsx("p",{className:"text-sm text-blue-600 font-medium",children:s}),i.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["₺",a.unitPrice," x ",n," adet = ₺",a.totalPrice]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"font-bold",children:["₺",a.totalPrice]}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{return r=a.id,void t(e.filter((e=>e.id!==r)));var r},className:"text-red-600 hover:text-red-700 h-8 w-8 p-0",children:i.jsx(vn,{className:"h-4 w-4"})})]})]}),a.content&&i.jsx("p",{className:"text-sm text-gray-700",children:a.content})]})]})})},a.id)}))]})]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Baskı Özeti"})}),i.jsx(io,{children:0===e.length?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Baskı isteği eklenmedi"}):i.jsxs("div",{className:"space-y-3",children:[e.map((e=>{if(!r.find((t=>t.id===e.productId)))return null;const t=A(e.productId,e.region,e.regionId),a=e.region.toLowerCase().includes("şort")?"Şort Baskısı":"Forma Baskısı";return i.jsx("div",{className:"border rounded-lg p-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-sm",children:e.region}),i.jsx("p",{className:"text-xs text-gray-600",children:e.productName}),i.jsx("p",{className:"text-xs text-blue-600 font-medium",children:a}),i.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["₺",e.unitPrice," x ",t," adet = ₺",e.totalPrice]})]}),i.jsxs("span",{className:"text-sm font-bold",children:["₺",e.totalPrice]})]}),e.content&&i.jsx("p",{className:"text-xs text-gray-700",children:e.content})]})},e.id)})),i.jsx("div",{className:"border-t pt-3",children:i.jsxs("div",{className:"flex justify-between items-center font-bold",children:[i.jsx("span",{children:"Baskı Toplam:"}),i.jsxs("span",{children:["₺",e.reduce(((e,t)=>e+t.totalPrice),0)]})]})})]})})]}),0===r.length&&i.jsx(ro,{children:i.jsx(io,{className:"pt-6",children:i.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:[i.jsx("p",{className:"font-medium",children:"Uyarı"}),i.jsx("p",{children:"Baskı isteği ekleyebilmek için önce ürün seçmelisiniz."})]})})})]})]})}var nne="Radio",[sne,ine]=n(nne),[lne,one]=sne(nne),cne=ze.forwardRef(((e,t)=>{const{__scopeRadio:r,name:a,checked:n=!1,required:l,disabled:c,value:d="on",onCheck:u,form:m,...p}=e,[x,g]=ze.useState(null),f=s(t,(e=>g(e))),y=ze.useRef(!1),v=!x||(m||!!x.closest("form"));return i.jsxs(lne,{scope:r,checked:n,disabled:c,children:[i.jsx(o.button,{type:"button",role:"radio","aria-checked":n,"data-state":hne(n),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:f,onClick:h(e.onClick,(e=>{n||null==u||u(),v&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())}))}),v&&i.jsx(mne,{control:x,bubbles:!y.current,name:a,value:d,checked:n,required:l,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})}));cne.displayName=nne;var dne="RadioIndicator",une=ze.forwardRef(((e,t)=>{const{__scopeRadio:r,forceMount:a,...n}=e,s=one(dne,r);return i.jsx(u,{present:a||s.checked,children:i.jsx(o.span,{"data-state":hne(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})})}));une.displayName=dne;var mne=e=>{const{control:t,checked:r,bubbles:a=!0,...n}=e,s=ze.useRef(null),l=ke(r),o=we(t);return ze.useEffect((()=>{const e=s.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==r&&n){const t=new Event("click",{bubbles:a});n.call(e,r),e.dispatchEvent(t)}}),[l,r,a]),i.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:s,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function hne(e){return e?"checked":"unchecked"}var pne=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],xne="RadioGroup",[gne,fne]=n(xne,[T,ine]),yne=T(),vne=ine(),[bne,jne]=gne(xne),kne=ze.forwardRef(((e,t)=>{const{__scopeRadioGroup:r,name:a,defaultValue:n,value:s,required:l=!1,disabled:c=!1,orientation:u,dir:m,loop:h=!0,onValueChange:p,...x}=e,g=yne(r),f=O(m),[y,v]=d({prop:s,defaultProp:n,onChange:p});return i.jsx(bne,{scope:r,name:a,required:l,disabled:c,value:y,onValueChange:v,children:i.jsx(P,{asChild:!0,...g,orientation:u,dir:f,loop:h,children:i.jsx(o.div,{role:"radiogroup","aria-required":l,"aria-orientation":u,"data-disabled":c?"":void 0,dir:f,...x,ref:t})})})}));kne.displayName=xne;var wne="RadioGroupItem",Nne=ze.forwardRef(((e,t)=>{const{__scopeRadioGroup:r,disabled:a,...n}=e,l=jne(wne,r),o=l.disabled||a,c=yne(r),d=vne(r),u=ze.useRef(null),m=s(t,u),p=l.value===n.value,x=ze.useRef(!1);return ze.useEffect((()=>{const e=e=>{pne.includes(e.key)&&(x.current=!0)},t=()=>x.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),i.jsx(A,{asChild:!0,...c,focusable:!o,active:p,children:i.jsx(cne,{disabled:o,required:l.required,checked:p,...d,...n,name:l.name,ref:m,onCheck:()=>l.onValueChange(n.value),onKeyDown:h((e=>{"Enter"===e.key&&e.preventDefault()})),onFocus:h(n.onFocus,(()=>{var e;x.current&&(null==(e=u.current)||e.click())}))})})}));Nne.displayName=wne;var _ne=ze.forwardRef(((e,t)=>{const{__scopeRadioGroup:r,...a}=e,n=vne(r);return i.jsx(une,{...n,...a,ref:t})}));_ne.displayName="RadioGroupIndicator";var Sne=kne,Cne=Nne,Tne=_ne;const One=ze.forwardRef((({className:e,...t},r)=>i.jsx(Sne,{className:xs("grid gap-2",e),...t,ref:r})));One.displayName=Sne.displayName;const Pne=ze.forwardRef((({className:e,...t},r)=>i.jsx(Cne,{ref:r,className:xs("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:i.jsx(Tne,{className:"flex items-center justify-center",children:i.jsx(Dr,{className:"h-2.5 w-2.5 fill-current text-current"})})})));function Ane({orderItems:e,printDetails:t,setPrintDetails:r}){ze.useState(null);const[a,n]=ze.useState("above"),[s,l]=ze.useState(!1),[o,c]=ze.useState(""),[d,u]=ze.useState(null),[m,h]=ze.useState(!1),p=e=>{n(e);const a=t.map((t=>({...t,namePosition:e})));r(a)},x=e=>{if(e.image&&""!==e.image){return Array.isArray(e.image)?e.image[0]:e.image}return`https://ui-avatars.com/api/?name==${encodeURIComponent(e.name.substring(0,2).toUpperCase())}`};ze.useEffect((()=>{const a=(()=>{const r=[];return e.forEach((e=>{if(e.quantity>0){let a=0;if(e.sizes&&e.sizes.length>0)e.sizes.forEach((n=>{for(let s=0;s<n.quantity;s++){const s=t.find((r=>r.orderItemId===e.id&&"Oyuncu"===r.type&&t.filter((t=>t.orderItemId===e.id&&"Oyuncu"===t.type)).indexOf(r)===a));r.push({id:`${e.id}-player-${a}`,productName:e.name,productImage:x(e),type:"Oyuncu",name:(null==s?void 0:s.name)||"",number:(null==s?void 0:s.number)||"",namePosition:(null==s?void 0:s.namePosition)||"above",orderItemId:e.id,size:n.size}),a++}}));else{const a=e.size||"Belirtilmedi";for(let n=0;n<e.quantity;n++){const s=t.find((r=>r.orderItemId===e.id&&"Oyuncu"===r.type&&t.filter((t=>t.orderItemId===e.id&&"Oyuncu"===t.type)).indexOf(r)===n));r.push({id:`${e.id}-player-${n}`,productName:e.name,productImage:x(e),type:"Oyuncu",name:(null==s?void 0:s.name)||"",number:(null==s?void 0:s.number)||"",namePosition:(null==s?void 0:s.namePosition)||"above",orderItemId:e.id,size:a})}}}if(e.goalkeeperQuantity&&e.goalkeeperQuantity>0){const a=e.goalkeeperSize||e.size||"Belirtilmedi";for(let n=0;n<e.goalkeeperQuantity;n++){const s=t.find((r=>r.orderItemId===e.id&&"Kaleci"===r.type&&t.filter((t=>t.orderItemId===e.id&&"Kaleci"===t.type)).indexOf(r)===n));r.push({id:`${e.id}-goalkeeper-${n}`,productName:e.name,productImage:x(e),type:"Kaleci",name:(null==s?void 0:s.name)||"",number:(null==s?void 0:s.number)||"",namePosition:(null==s?void 0:s.namePosition)||"above",orderItemId:e.id,size:a})}}})),r.sort(((e,t)=>"Kaleci"===e.type&&"Oyuncu"===t.type?-1:"Oyuncu"===e.type&&"Kaleci"===t.type?1:0))})();(a.length!==t.length||a.some((e=>!t.find((t=>t.id===e.id)))))&&r(a)}),[e,t.length]);const g=(e,a,n)=>{const s=t.map((t=>t.id===e?{...t,[a]:n}:t));r(s)},f=(e,r)=>{const a=t.find((t=>t.id===e));return a?a[r]:""},y={xs:["xs","xsmall","extra small","çok küçük"],s:["s","small","küçük","ufak","smal"],m:["m","medium","orta","normal"],l:["l","large","büyük","geniş"],xl:["xl","xlarge","extra large","çok büyük","1xl"],xxl:["xxl","2xl","xxlarge","extra extra large","çok çok büyük"],xxxl:["xxxl","3xl","xxxlarge","4xl"],"4xl":["4xl","xxxxl","4xlarge"],"5xl":["5xl","xxxxxl","5xlarge"],128:["128","128","128"],134:["134","134","134"],140:["140","140","140"],152:["152","152","152"],164:["164","164","164"],176:["176","176","176"]},v=()=>{const e={};return t.forEach((t=>{const r=t.size.toUpperCase();e[r]=(e[r]||0)+1})),e},b=e=>{const t=e.split("\n").filter((e=>e.trim())),r=[],a=[],n=[];t.forEach(((e,t)=>{const a=e.trim();if(!a)return;const n={line:a,name:"",number:"",size:"",errors:[]},s=a.split(/\s+/),i=s.filter((e=>{const t=e.toLowerCase();return/^(xs|s|m|l|xl|xxl|xxxl|4xl|5xl|xsmall|small|medium|large|xlarge|xxlarge|xxxlarge|4xlarge|5xlarge|extra\s*small|extra\s*large|extra\s*extra\s*large|\d*xl|küçük|ufak|orta|normal|büyük|geniş|çok\s*küçük|çok\s*büyük|çok\s*çok\s*büyük|128|134|140|152|164|176)$/i.test(t)}));if(i.length>1)n.errors.push(`👕 Bu satırda birden fazla beden var: ${i.join(", ")}. Sadece bir beden yazın.`);else if(1===i.length){const e=(e=>{const t=e.toLowerCase().trim();for(const[r,a]of Object.entries(y))if(a.includes(t))return r.toUpperCase();return e.toUpperCase()})(i[0]);n.size=e}const l=s.filter((e=>/^\d{1,5}$/.test(e)&&!i.includes(e)));if(l.length>1)n.errors.push(`🔢 Bu satırda birden fazla numara var: ${l.join(", ")}. Sadece bir numara yazın.`);else if(1===l.length){const e=parseInt(l[0]);e<1||e>99999?n.errors.push(`🔢 ${e} numarası geçersiz. 1 ile 99999 arasında bir numara yazın.`):n.number=l[0]}const o=s.filter((e=>{const t=e.toLowerCase();return!(l.includes(e)||i.includes(e)||/^(xs|s|m|l|xl|xxl|xxxl|4xl|5xl|xsmall|small|medium|large|xlarge|xxlarge|xxxlarge|4xlarge|5xlarge|extra\s*small|extra\s*large|extra\s*extra\s*large|\d*xl|küçük|ufak|orta|normal|büyük|geniş|çok\s*küçük|çok\s*büyük|çok\s*çok\s*büyük|128|134|140|152|164|176)$/i.test(t)||/^\d+$/.test(e))}));0!==o.length||n.errors.length?n.name=o.join(" ").toUpperCase():n.errors.push("👤 Bu satırda isim bulunamadı. Örnek: Metehan 7 XL"),n.name||n.errors.length||n.errors.push("👤 İsim eksik. Lütfen kişinin ismini yazın."),n.number||n.errors.length||n.errors.push("🔢 Numara eksik. Lütfen forma numarasını yazın."),r.push(n)}));const s=v(),i={};r.forEach((e=>{e.size&&!e.errors.length&&(i[e.size]=(i[e.size]||0)+1)})),Object.entries(i).forEach((([e,t])=>{const r=s[e]||0;t>r?a.push(`👕 ${e} beden sorunu: ${t} kişi istedi ama sadece ${r} adet ${e} beden formanız var. ${t-r} kişi fazla!`):t===r&&n.push(`⚠️ ${e} beden: ${t} kişi var ve ${r} adet forma var. Tam tamına yetiyor.`)})),r.forEach((e=>{e.size&&!s[e.size]&&e.errors.push(`👕 ${e.size} bedeni siparişinizde yok! Mevcut bedenler: ${Object.keys(s).join(", ")}`)}));const l=a.length>0||r.some((e=>e.errors.length>0));return{entries:r,errors:a,warnings:n,canApply:!l}},j=()=>{c(""),u(null),h(!1),l(!1)};return 0===t.length?i.jsxs(ro,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-md border-0 shadow-lg",children:[i.jsx(ao,{className:"pb-4",children:i.jsxs(no,{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:i.jsx(Wr,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})}),"Baskı Detayları"]})}),i.jsx(io,{children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"mx-auto w-20 h-20 bg-slate-100 dark:bg-slate-700 rounded-2xl flex items-center justify-center mb-6",children:i.jsx(Wr,{className:"h-10 w-10 text-slate-400"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Henüz baskı detayı yok"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 max-w-md mx-auto",children:"Baskı yapılacak ürün bulunmuyor. Önce sipariş ürünlerini ekleyin."})]})})]}):i.jsxs(ro,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-md border-0 shadow-lg",children:[i.jsx(ao,{className:"pb-4",children:i.jsxs(no,{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:i.jsx(Wr,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})}),"Baskı Detayları"]})}),i.jsxs(io,{className:"space-y-6",children:["        ",i.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-xl bg-white dark:bg-slate-800",children:i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{className:"bg-slate-50 dark:bg-slate-900/50 hover:bg-slate-50 dark:hover:bg-slate-900/50",children:[i.jsx(M5,{className:"w-1/5 text-slate-700 dark:text-slate-300 font-semibold",children:"Ürün"}),i.jsx(M5,{className:"w-1/8 text-center text-slate-700 dark:text-slate-300 font-semibold",children:"Tip"}),i.jsx(M5,{className:"w-1/8 text-center text-slate-700 dark:text-slate-300 font-semibold",children:"Beden"}),i.jsx(M5,{className:"w-1/5 text-slate-700 dark:text-slate-300 font-semibold",children:"Arkaya Basılacak İsim"}),i.jsx(M5,{className:"w-1/10 text-center text-slate-700 dark:text-slate-300 font-semibold",children:"Numara"}),i.jsx(M5,{className:"w-1/4 text-slate-700 dark:text-slate-300 font-semibold",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"İsim Pozisyonu"}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>p("above"),className:"px-3 py-1 h-7 text-xs border transition-all "+("above"===a?"bg-blue-100 border-blue-300 text-blue-700 dark:bg-blue-900/30 dark:border-blue-600 dark:text-blue-400":"border-slate-300 text-slate-600 hover:bg-slate-100 dark:border-slate-600 dark:text-slate-400 dark:hover:bg-slate-700"),children:[i.jsx(ir,{className:"h-3 w-3 mr-1"}),"Üstte"]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>p("below"),className:"px-3 py-1 h-7 text-xs border transition-all "+("below"===a?"bg-blue-100 border-blue-300 text-blue-700 dark:bg-blue-900/30 dark:border-blue-600 dark:text-blue-400":"border-slate-300 text-slate-600 hover:bg-slate-100 dark:border-slate-600 dark:text-slate-400 dark:hover:bg-slate-700"),children:[i.jsx(rr,{className:"h-3 w-3 mr-1"}),"Altta"]}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>l(!0),className:"px-3 py-1 h-7 text-xs border border-green-300 text-green-700 hover:bg-green-100 dark:border-green-600 dark:text-green-400 dark:hover:bg-green-900/30 transition-all",children:[i.jsx(ln,{className:"h-3 w-3 mr-1"}),"Metin'den Gir"]})]})]})})]})}),i.jsx(E5,{children:t.map(((t,r)=>{var a;return i.jsxs(D5,{className:`\n                    hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors\n                    ${"Kaleci"===t.type?"bg-red-50/50 dark:bg-red-900/10":"bg-white dark:bg-slate-800"}\n                  `,children:[i.jsx(z5,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(sd,{children:[i.jsx(id,{asChild:!0,children:i.jsxs("div",{className:"relative group cursor-pointer",children:[i.jsx("img",{src:t.productImage,alt:t.productName,className:"w-16 h-16 object-cover rounded-xl border-2 border-slate-200 dark:border-slate-600 transition-all group-hover:scale-105 group-hover:shadow-lg",onError:e=>{e.currentTarget.src="/placeholder.svg"}}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 rounded-xl transition-all flex items-center justify-center",children:i.jsx(jn,{className:"h-5 w-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})}),i.jsx(cd,{className:"max-w-2xl p-8",children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:t.productName}),i.jsx("img",{src:t.productImage,alt:t.productName,className:"max-w-full max-h-96 mx-auto rounded-xl border border-slate-200 dark:border-slate-700"})]})})]}),"Kaleci"===t.type&&i.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 rounded-full p-1",children:i.jsx(qa,{className:"h-3 w-3 text-white"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100 truncate",children:t.productName}),i.jsx("div",{className:"flex gap-2 mt-2",children:i.jsx(Co,{variant:"outline",className:"text-xs bg-slate-50 dark:bg-slate-700 border-slate-200 dark:border-slate-600",children:null==(a=e.find((e=>e.id===t.orderItemId)))?void 0:a.color})})]})]})}),i.jsx(z5,{className:"py-4 text-center",children:i.jsx(Co,{variant:"Kaleci"===t.type?"destructive":"secondary",className:"px-3 py-1 "+("Kaleci"===t.type?"bg-red-100 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800":"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800"),children:"Kaleci"===t.type?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qa,{className:"h-3 w-3"}),"Kaleci"]}):i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(mn,{className:"h-3 w-3"}),"Oyuncu"]})})}),i.jsx(z5,{className:"py-4 text-center",children:i.jsx(Co,{variant:"outline",className:"text-sm font-semibold px-3 py-1 bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300",children:t.size})}),i.jsx(z5,{className:"py-4",children:i.jsx(co,{placeholder:"İsim giriniz",value:f(t.id,"name"),onChange:e=>g(t.id,"name",e.target.value),className:"w-full bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"})}),i.jsx(z5,{className:"py-4 text-center",children:i.jsx(co,{type:"number",placeholder:"No",value:f(t.id,"number"),onChange:e=>g(t.id,"number",e.target.value),className:"w-20 mx-auto text-center bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400",min:"1",max:"99"})}),i.jsx(z5,{className:"py-4",children:i.jsxs(One,{value:f(t.id,"namePosition"),onValueChange:e=>g(t.id,"namePosition",e),className:"space-y-3 pointer-events-none opacity-60",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Pne,{value:"above",id:`${t.id}-above`,className:"border-slate-300 dark:border-slate-600 text-blue-600 dark:text-blue-400"}),i.jsx(po,{htmlFor:`${t.id}-above`,className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"İsim Numaranın Üstünde"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Pne,{value:"below",id:`${t.id}-below`,className:"border-slate-300 dark:border-slate-600 text-blue-600 dark:text-blue-400"}),i.jsx(po,{htmlFor:`${t.id}-below`,className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"İsim Numaranın Altında"})]})]})})]},t.id)}))})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 p-6 rounded-xl border border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:i.jsx(Wr,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:t.length}),i.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Toplam Baskı"})]})]})}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 p-6 rounded-xl border border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:i.jsx(mn,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:t.filter((e=>"Oyuncu"===e.type)).length}),i.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Oyuncu Forması"})]})]})}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 p-6 rounded-xl border border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl",children:i.jsx(qa,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:t.filter((e=>"Kaleci"===e.type)).length}),i.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Kaleci Forması"})]})]})})]}),i.jsx(sd,{open:s,onOpenChange:j,children:i.jsxs(cd,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsx(dd,{children:i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(ln,{className:"h-5 w-5"}),"Toplu Metin Girişi"]})}),i.jsx("div",{className:"space-y-4",children:m?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Kontrol Sonuçları"}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>h(!1),children:"Geri Dön"})]}),d&&i.jsxs(i.Fragment,{children:[d.errors.length>0&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-semibold text-red-900 dark:text-red-100 mb-3 flex items-center gap-2",children:[i.jsx(Er,{className:"h-5 w-5"}),"❌ Düzeltilmesi Gereken Sorunlar (",d.errors.length,")"]}),i.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-3 rounded mb-3",children:i.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:"Bu sorunları çözene kadar devam edemezsiniz:"})}),i.jsx("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-2",children:d.errors.map(((e,t)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-red-500 mt-1",children:"●"}),i.jsx("span",{children:e})]},t)))})]}),d.warnings.length>0&&i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-3 flex items-center gap-2",children:[i.jsx(nn,{className:"h-5 w-5"}),"⚠️ Dikkat Edilecek Durumlar (",d.warnings.length,")"]}),i.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900/30 p-3 rounded mb-3",children:i.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-medium",children:"Sorun yok ama bilmenizde fayda var:"})}),i.jsx("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-2",children:d.warnings.map(((e,t)=>i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-500 mt-1",children:"●"}),i.jsx("span",{children:e})]},t)))})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3 flex items-center gap-2",children:[i.jsx(na,{className:"h-5 w-5"}),"📝 Girdiğiniz Liste İncelemesi (",d.entries.length," satır)"]}),i.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d.entries.filter((e=>0===e.errors.length)).length}),i.jsx("div",{className:"text-xs text-green-700 dark:text-green-300",children:"✅ Sorunsuz"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:d.entries.filter((e=>e.errors.length>0)).length}),i.jsx("div",{className:"text-xs text-red-700 dark:text-red-300",children:"❌ Hatalı"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:d.entries.length}),i.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:"📊 Toplam"})]})]})}),i.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:d.entries.map(((e,t)=>i.jsxs("div",{className:"p-4 rounded-lg border-2 text-sm transition-all "+(e.errors.length>0?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700"),children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[e.errors.length>0?i.jsx(Er,{className:"h-4 w-4 text-red-500"}):i.jsx(Or,{className:"h-4 w-4 text-green-500"}),i.jsxs("span",{className:"font-mono text-sm bg-white dark:bg-slate-700 px-2 py-1 rounded border",children:['"',e.line,'"']})]}),e.errors.length>0?i.jsxs(Co,{variant:"destructive",className:"text-xs",children:["❌ ",e.errors.length," Sorun"]}):i.jsx(Co,{className:"text-xs bg-green-100 text-green-800 border-green-300",children:"✅ Tamam"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[i.jsxs("div",{className:"text-center p-2 bg-white dark:bg-slate-700 rounded",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"👤 İsim"}),i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:e.name||"❌ Yok"})]}),i.jsxs("div",{className:"text-center p-2 bg-white dark:bg-slate-700 rounded",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"🔢 Numara"}),i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:e.number||"❌ Yok"})]}),i.jsxs("div",{className:"text-center p-2 bg-white dark:bg-slate-700 rounded",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"👕 Beden"}),i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:e.size||"❌ Yok"})]})]}),e.errors.length>0&&i.jsxs("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-900/30 rounded border border-red-200 dark:border-red-800",children:[i.jsx("div",{className:"text-xs font-semibold text-red-800 dark:text-red-200 mb-2",children:"🚨 Bu satırdaki sorunlar:"}),e.errors.map(((e,t)=>i.jsxs("div",{className:"text-xs text-red-700 dark:text-red-300 mb-1",children:["• ",e]},t)))]})]},t)))})]}),i.jsxs("div",{className:"space-y-3",children:[!d.canApply&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 text-center",children:[i.jsx(Er,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),i.jsx("p",{className:"text-red-800 dark:text-red-200 font-semibold",children:"❌ Henüz devam edemezsiniz!"}),i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:'Yukarıdaki kırmızı sorunları çözün, sonra tekrar "Kontrol Et" butonuna basın.'})]}),d.canApply&&i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 text-center",children:[i.jsx(Or,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),i.jsx("p",{className:"text-green-800 dark:text-green-200 font-semibold",children:"✅ Her şey hazır! Formaları doldurabilirsiniz."}),i.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:'"Formaları Doldur" butonuna basarak devam edebilirsiniz.'})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsxs(oo,{variant:"outline",onClick:j,children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"İptal"]}),i.jsx(oo,{onClick:()=>{d&&d.canApply&&((e=>{let a=[...t];e.forEach((({name:e,number:t,size:r})=>{if(!e||!t||!r)return;const n=a.filter((e=>e.size.toUpperCase()===r));if(n.length>0){let r=n.find((e=>!e.name&&!e.number));r||(r=n[0]);const s=a.findIndex((e=>e.id===r.id));-1!==s&&(a[s]={...a[s],name:e,number:t})}})),r(a)})(d.entries),c(""),u(null),h(!1),l(!1))},disabled:!d.canApply,className:"text-white font-semibold "+(d.canApply?"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl":"bg-gray-400 cursor-not-allowed"),children:d.canApply?i.jsxs(i.Fragment,{children:[i.jsx(Or,{className:"h-4 w-4 mr-2"}),"✅ Formaları Doldur"]}):i.jsxs(i.Fragment,{children:[i.jsx(Er,{className:"h-4 w-4 mr-2"}),"❌ Önce Hataları Düzeltin"]})})]})]})]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:[i.jsxs("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3 flex items-center gap-2",children:[i.jsx(na,{className:"h-5 w-5"}),"📊 Mevcut Forma Durumunuz"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(v()).map((([e,t])=>i.jsxs("div",{className:"text-center p-3 bg-white dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t}),i.jsxs("div",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:["👕 ",e," Beden"]}),i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"adet forma"})]},e)))}),i.jsx("div",{className:"mt-3 p-3 bg-blue-100 dark:bg-blue-900/40 rounded text-center",children:i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:["💡 Toplam ",i.jsxs("strong",{children:[Object.values(v()).reduce(((e,t)=>e+t),0)," adet"]})," forma için bilgi girebilirsiniz"]})})]}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Her satıra bir kişinin bilgilerini yazın. Format: ",i.jsx("strong",{children:"İsim Numara Beden"})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:[i.jsxs("h4",{className:"font-semibold text-sm mb-3 text-green-900 dark:text-green-100 flex items-center gap-2",children:[i.jsx(Or,{className:"h-4 w-4"}),"Doğru Kullanım Örnekleri:"]}),i.jsxs("div",{className:"text-sm text-green-700 dark:text-green-300 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-green-600",children:"✓"}),i.jsx("span",{className:"font-mono bg-white dark:bg-green-900/30 px-2 py-1 rounded",children:"METEHAN 7 XL"}),i.jsx("span",{className:"text-xs",children:"→ İsim + Numara + Beden"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-green-600",children:"✓"}),i.jsx("span",{className:"font-mono bg-white dark:bg-green-900/30 px-2 py-1 rounded",children:"10 ALİ Large"}),i.jsx("span",{className:"text-xs",children:"→ Sıralama farklı olabilir"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-green-600",children:"✓"}),i.jsx("span",{className:"font-mono bg-white dark:bg-green-900/30 px-2 py-1 rounded",children:"MEHMET S 23"}),i.jsx("span",{className:"text-xs",children:"→ Karışık sıralama da çalışır"})]}),i.jsx("div",{className:"mt-3 p-2 bg-green-100 dark:bg-green-900/40 rounded",children:i.jsxs("p",{className:"text-xs text-green-800 dark:text-green-200",children:["📝 ",i.jsx("strong",{children:"Not:"})," İsimler otomatik olarak BÜYÜK HARFLE yazılacak"]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"bulkText",children:"Metin Girişi"}),i.jsx(v6,{id:"bulkText",placeholder:"METEHAN 7 XL\nALİ 10 Large\nMEHMET 23 S\nAHMET 15 M\nCEM 9 L",value:o,onChange:e=>{c(e.target.value),u(null)},className:"min-h-32 bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600",rows:6})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-900 dark:text-blue-100",children:"Beden Eşleştirme:"}),i.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"S:"})," S, Small, Küçük"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"M:"})," M, Medium, Orta"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"L:"})," L, Large, Büyük"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"XL:"})," XL, XLarge, Extra Large"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"XXL:"})," XXL, 2XL, XXLarge"]}),i.jsxs("div",{children:[i.jsx("strong",{children:"XXXL:"})," XXXL, 3XL, XXXLarge"]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsxs(oo,{variant:"outline",onClick:j,children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"İptal"]}),i.jsxs(oo,{onClick:()=>{if(o.trim()){const e=b(o);u(e),h(!0)}},disabled:!o.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(ln,{className:"h-4 w-4 mr-2"}),"Kontrol Et"]})]})]})})]})})]})]})}Pne.displayName=Cne.displayName;var Ene="Collapsible",[Dne,Mne]=n(Ene),[zne,Rne]=Dne(Ene),Ine=ze.forwardRef(((e,t)=>{const{__scopeCollapsible:r,open:a,defaultOpen:n,disabled:s,onOpenChange:l,...c}=e,[u=!1,m]=d({prop:a,defaultProp:n,onChange:l});return i.jsx(zne,{scope:r,disabled:s,contentId:_(),open:u,onOpenToggle:ze.useCallback((()=>m((e=>!e))),[m]),children:i.jsx(o.div,{"data-state":Kne(u),"data-disabled":s?"":void 0,...c,ref:t})})}));Ine.displayName=Ene;var Fne="CollapsibleTrigger",Bne=ze.forwardRef(((e,t)=>{const{__scopeCollapsible:r,...a}=e,n=Rne(Fne,r);return i.jsx(o.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":Kne(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...a,ref:t,onClick:h(e.onClick,n.onOpenToggle)})}));Bne.displayName=Fne;var Lne="CollapsibleContent",qne=ze.forwardRef(((e,t)=>{const{forceMount:r,...a}=e,n=Rne(Lne,e.__scopeCollapsible);return i.jsx(u,{present:r||n.open,children:({present:e})=>i.jsx($ne,{...a,ref:t,present:e})})}));qne.displayName=Lne;var $ne=ze.forwardRef(((e,t)=>{const{__scopeCollapsible:r,present:a,children:n,...l}=e,c=Rne(Lne,r),[d,u]=ze.useState(a),m=ze.useRef(null),h=s(t,m),p=ze.useRef(0),x=p.current,f=ze.useRef(0),y=f.current,v=c.open||d,b=ze.useRef(v),j=ze.useRef();return ze.useEffect((()=>{const e=requestAnimationFrame((()=>b.current=!1));return()=>cancelAnimationFrame(e)}),[]),g((()=>{const e=m.current;if(e){j.current=j.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();p.current=t.height,f.current=t.width,b.current||(e.style.transitionDuration=j.current.transitionDuration,e.style.animationName=j.current.animationName),u(a)}}),[c.open,a]),i.jsx(o.div,{"data-state":Kne(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!v,...l,ref:h,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:v&&n})}));function Kne(e){return e?"open":"closed"}var Une=Ine,Hne=Bne,Yne=qne,Vne="Accordion",Gne=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Wne,Qne,Xne]=a(Vne),[Zne,Jne]=n(Vne,[Xne,Mne]),ese=Mne(),tse=Re.forwardRef(((e,t)=>{const{type:r,...a}=e,n=a,s=a;return i.jsx(Wne.Provider,{scope:e.__scopeAccordion,children:"multiple"===r?i.jsx(lse,{...s,ref:t}):i.jsx(ise,{...n,ref:t})})}));tse.displayName=Vne;var[rse,ase]=Zne(Vne),[nse,sse]=Zne(Vne,{collapsible:!1}),ise=Re.forwardRef(((e,t)=>{const{value:r,defaultValue:a,onValueChange:n=()=>{},collapsible:s=!1,...l}=e,[o,c]=d({prop:r,defaultProp:a,onChange:n});return i.jsx(rse,{scope:e.__scopeAccordion,value:o?[o]:[],onItemOpen:c,onItemClose:Re.useCallback((()=>s&&c("")),[s,c]),children:i.jsx(nse,{scope:e.__scopeAccordion,collapsible:s,children:i.jsx(dse,{...l,ref:t})})})})),lse=Re.forwardRef(((e,t)=>{const{value:r,defaultValue:a,onValueChange:n=()=>{},...s}=e,[l=[],o]=d({prop:r,defaultProp:a,onChange:n}),c=Re.useCallback((e=>o(((t=[])=>[...t,e]))),[o]),u=Re.useCallback((e=>o(((t=[])=>t.filter((t=>t!==e))))),[o]);return i.jsx(rse,{scope:e.__scopeAccordion,value:l,onItemOpen:c,onItemClose:u,children:i.jsx(nse,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(dse,{...s,ref:t})})})})),[ose,cse]=Zne(Vne),dse=Re.forwardRef(((e,t)=>{const{__scopeAccordion:r,disabled:a,dir:n,orientation:l="vertical",...c}=e,d=Re.useRef(null),u=s(d,t),m=Qne(r),p="ltr"===O(n),x=h(e.onKeyDown,(e=>{var t;if(!Gne.includes(e.key))return;const r=e.target,a=m().filter((e=>{var t;return!(null==(t=e.ref.current)?void 0:t.disabled)})),n=a.findIndex((e=>e.ref.current===r)),s=a.length;if(-1===n)return;e.preventDefault();let i=n;const o=s-1,c=()=>{i=n+1,i>o&&(i=0)},d=()=>{i=n-1,i<0&&(i=o)};switch(e.key){case"Home":i=0;break;case"End":i=o;break;case"ArrowRight":"horizontal"===l&&(p?c():d());break;case"ArrowDown":"vertical"===l&&c();break;case"ArrowLeft":"horizontal"===l&&(p?d():c());break;case"ArrowUp":"vertical"===l&&d()}null==(t=a[i%s].ref.current)||t.focus()}));return i.jsx(ose,{scope:r,disabled:a,direction:n,orientation:l,children:i.jsx(Wne.Slot,{scope:r,children:i.jsx(o.div,{...c,"data-orientation":l,ref:u,onKeyDown:a?void 0:x})})})})),use="AccordionItem",[mse,hse]=Zne(use),pse=Re.forwardRef(((e,t)=>{const{__scopeAccordion:r,value:a,...n}=e,s=cse(use,r),l=ase(use,r),o=ese(r),c=_(),d=a&&l.value.includes(a)||!1,u=s.disabled||e.disabled;return i.jsx(mse,{scope:r,open:d,disabled:u,triggerId:c,children:i.jsx(Une,{"data-orientation":s.orientation,"data-state":jse(d),...o,...n,ref:t,disabled:u,open:d,onOpenChange:e=>{e?l.onItemOpen(a):l.onItemClose(a)}})})}));pse.displayName=use;var xse="AccordionHeader",gse=Re.forwardRef(((e,t)=>{const{__scopeAccordion:r,...a}=e,n=cse(Vne,r),s=hse(xse,r);return i.jsx(o.h3,{"data-orientation":n.orientation,"data-state":jse(s.open),"data-disabled":s.disabled?"":void 0,...a,ref:t})}));gse.displayName=xse;var fse="AccordionTrigger",yse=Re.forwardRef(((e,t)=>{const{__scopeAccordion:r,...a}=e,n=cse(Vne,r),s=hse(fse,r),l=sse(fse,r),o=ese(r);return i.jsx(Wne.ItemSlot,{scope:r,children:i.jsx(Hne,{"aria-disabled":s.open&&!l.collapsible||void 0,"data-orientation":n.orientation,id:s.triggerId,...o,...a,ref:t})})}));yse.displayName=fse;var vse="AccordionContent",bse=Re.forwardRef(((e,t)=>{const{__scopeAccordion:r,...a}=e,n=cse(Vne,r),s=hse(vse,r),l=ese(r);return i.jsx(Yne,{role:"region","aria-labelledby":s.triggerId,"data-orientation":n.orientation,...l,...a,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})}));function jse(e){return e?"open":"closed"}bse.displayName=vse;var kse=pse,wse=gse,Nse=yse,_se=bse;const Sse=tse,Cse=ze.forwardRef((({className:e,...t},r)=>i.jsx(kse,{ref:r,className:xs("border-b",e),...t})));Cse.displayName="AccordionItem";const Tse=ze.forwardRef((({className:e,children:t,...r},a)=>i.jsx(wse,{className:"flex",children:i.jsxs(Nse,{ref:a,className:xs("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,i.jsx(jr,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})));Tse.displayName=Nse.displayName;const Ose=ze.forwardRef((({className:e,children:t,...r},a)=>i.jsx(_se,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:i.jsx("div",{className:xs("pb-4 pt-0",e),children:t})})));function Pse({orderType:e,orderItems:t,additionalItems:r,printRequests:a,payments:n,customerInfo:s,notes:l,setNotes:o,printDetails:c=[]}){const d=e=>e.sizes&&0!==e.sizes.length?i.jsx("div",{className:"flex flex-wrap gap-2",children:e.sizes.filter((e=>e.quantity>0)).map(((e,t)=>i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium",children:[e.size," - ",e.quantity," adet"]},t)))}):i.jsx("span",{className:"inline-flex items-center gap-2 py-1 px-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium",children:e.size?`${e.size} - ${e.quantity} adet`:`${e.quantity} adet`}),u=(e,t)=>{let r;return r="main"===t&&e.image?Array.isArray(e.image)?e.image[0]:e.image:"shorts"===t&&e.shortsImage?e.shortsImage:"socks"===t&&e.socksImage?e.socksImage:"goalkeeper"===t&&e.goalkeeperImage?e.goalkeeperImage:`https://ui-avatars.com/api/?name=${"main"===t?encodeURIComponent(e.name.substring(0,2).toUpperCase()):"shorts"===t?"ST":"socks"===t?"CR":"KF"}`,r},m=t.reduce(((e,t)=>e+(t.totalPrice||0)+(t.goalkeeperTotalPrice||0)+(t.playerShortsTotalPrice||0)+(t.playerSocksTotalPrice||0)+(t.goalkeeperShortsTotalPrice||0)+(t.goalkeeperSocksTotalPrice||0)+(t.playerShortsTotalPrice||t.goalkeeperShortsTotalPrice?0:t.shortsTotalPrice||0)+(t.playerSocksTotalPrice||t.goalkeeperSocksTotalPrice?0:t.socksTotalPrice||0)),0)+r.reduce(((e,t)=>e+(t.totalPrice||0)),0)+a.reduce(((e,t)=>e+(t.totalPrice||0)),0),h=m/1.1,p=m-h,x=m,g=t.filter((e=>(e.quantity||0)>0||(e.shortsQuantity||0)>0||(e.socksQuantity||0)>0||(e.goalkeeperQuantity||0)>0)).reduce(((e,t)=>{var r;const a=e.find((e=>e.name===t.name));return a?(a.quantity=(a.quantity||0)+(t.quantity||0),a.shortsQuantity=(a.shortsQuantity||0)+(t.shortsQuantity||0),a.socksQuantity=(a.socksQuantity||0)+(t.socksQuantity||0),a.goalkeeperQuantity=(a.goalkeeperQuantity||0)+(t.goalkeeperQuantity||0),a.totalPrice=(a.totalPrice||0)+(t.totalPrice||0),a.shortsTotalPrice=(a.shortsTotalPrice||0)+(t.shortsTotalPrice||0),a.socksTotalPrice=(a.socksTotalPrice||0)+(t.socksTotalPrice||0),a.goalkeeperTotalPrice=(a.goalkeeperTotalPrice||0)+(t.goalkeeperTotalPrice||0),a.playerShortsTotalPrice=(a.playerShortsTotalPrice||0)+(t.playerShortsTotalPrice||0),a.playerSocksTotalPrice=(a.playerSocksTotalPrice||0)+(t.playerSocksTotalPrice||0),a.goalkeeperShortsTotalPrice=(a.goalkeeperShortsTotalPrice||0)+(t.goalkeeperShortsTotalPrice||0),a.goalkeeperSocksTotalPrice=(a.goalkeeperSocksTotalPrice||0)+(t.goalkeeperSocksTotalPrice||0),t.goalkeeperDetails&&(a.goalkeeperDetails=[...a.goalkeeperDetails||[],...t.goalkeeperDetails]),t.playerShortsDetails&&(a.playerShortsDetails=[...a.playerShortsDetails||[],...t.playerShortsDetails]),t.playerSocksDetails&&(a.playerSocksDetails=[...a.playerSocksDetails||[],...t.playerSocksDetails]),t.goalkeeperShortsDetails&&(a.goalkeeperShortsDetails=[...a.goalkeeperShortsDetails||[],...t.goalkeeperShortsDetails]),t.goalkeeperSocksDetails&&(a.goalkeeperSocksDetails=[...a.goalkeeperSocksDetails||[],...t.goalkeeperSocksDetails]),t.sizes&&(a.sizes=[...a.sizes||[],...t.sizes]),t.color&&!(null==(r=a.colors)?void 0:r.includes(t.color))&&(a.colors=[...a.colors||[a.color],t.color].filter(Boolean))):e.push({...t,colors:t.color?[t.color]:[]}),e}),[]);return i.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[i.jsxs(ro,{className:"border-gray-200 dark:border-gray-700 shadow-lg rounded-xl overflow-hidden",children:[i.jsx(ao,{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900",children:i.jsxs(no,{className:"flex items-center gap-3 text-2xl font-bold text-gray-800 dark:text-gray-100",children:[i.jsx(Ha,{className:"h-6 w-6"}),"Sipariş Özeti"]})}),i.jsx(io,{className:"p-0 bg-white dark:bg-gray-900",children:0===g.length&&0===r.length&&0===a.length?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(ba,{className:"h-12 w-12 mx-auto text-gray-400"}),i.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:"Henüz siparişe eklenmiş ürün, ek ürün veya baskı talebi bulunmuyor."})]}):i.jsxs(i.Fragment,{children:[g.length>0&&i.jsx(Sse,{type:"single",collapsible:!0,defaultValue:"main-products",className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(Cse,{value:"main-products",children:[i.jsx(Tse,{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ka,{className:"h-5 w-5"}),i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"ready_stock"===e?"Hazır Stok Ürünleri":"Tasarım Ürünleri"})]})}),i.jsx(Ose,{children:i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{className:"bg-gray-100 dark:bg-gray-800",children:[i.jsx(M5,{className:"w-2/5 font-semibold text-gray-800 dark:text-gray-200",children:"Ürün"}),i.jsx(M5,{className:"w-1/5 text-center font-semibold text-gray-800 dark:text-gray-200",children:"Miktar"}),i.jsx(M5,{className:"w-1/5 text-right font-semibold text-gray-800 dark:text-gray-200",children:"Birim Fiyat"}),i.jsx(M5,{className:"w-1/5 text-right font-semibold text-gray-800 dark:text-gray-200",children:"Toplam"})]})}),i.jsx(E5,{children:g.flatMap((e=>{var t,r,a,n,s;const l=[];return(e.quantity||0)>0&&l.push(i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:[i.jsx(z5,{className:"py-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("img",{src:u(e,"main"),alt:`${e.name} Forma`,className:"w-16 h-16 object-cover rounded-lg border border-gray-300 dark:border-gray-600",onError:t=>{t.currentTarget.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name.substring(0,2).toUpperCase())}`}}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-200",children:e.name}),e.colors&&e.colors.length>0&&i.jsxs("p",{className:"inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium",children:["Renk: ",e.colors.join(", ")]}),d(e)]})]})}),i.jsx(z5,{className:"text-center py-4 text-gray-800 dark:text-gray-200",children:e.quantity}),i.jsxs(z5,{className:"text-right py-4 text-gray-800 dark:text-gray-200",children:["₺",(e.unitPrice||0).toFixed(2)]}),i.jsxs(z5,{className:"text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",(e.totalPrice||0).toFixed(2)]})]},`${e.id}-main`)),((e.goalkeeperQuantity||0)>0||e.goalkeeperDetails&&e.goalkeeperDetails.length>0)&&l.push(i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:[i.jsx(z5,{className:"py-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("img",{src:u(e,"goalkeeper"),alt:"Kaleci Forması",className:"w-16 h-16 object-cover rounded-lg border border-gray-300 dark:border-gray-600",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name==KF"}}),i.jsxs("div",{children:[i.jsxs("h5",{className:"font-medium text-gray-800 dark:text-gray-200",children:[e.name," - Kaleci"]}),i.jsx("div",{className:"flex flex-col gap-1",children:e.goalkeeperDetails&&e.goalkeeperDetails.length>0?e.goalkeeperDetails.map(((e,t)=>i.jsx("div",{className:"space-y-1",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 rounded-md text-sm font-medium",children:[e.quantity," adet • ",e.color," • ",e.size]})},t))):i.jsxs(i.Fragment,{children:[e.goalkeeperColor&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium",children:["Renk: ",e.goalkeeperColor]}),e.goalkeeperSize&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium",children:["Beden: ",e.goalkeeperSize]})]})})]})]})}),i.jsx(z5,{className:"text-center py-4 text-gray-800 dark:text-gray-200",children:e.goalkeeperDetails?e.goalkeeperDetails.reduce(((e,t)=>e+t.quantity),0):e.goalkeeperQuantity||0}),i.jsxs(z5,{className:"text-right py-4 text-gray-800 dark:text-gray-200",children:["₺",(e.goalkeeperUnitPrice||0).toFixed(2)]}),i.jsxs(z5,{className:"text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",(e.goalkeeperTotalPrice||0).toFixed(2)]})]},`${e.id}-goalkeeper`)),e.playerShortsDetails&&e.playerShortsDetails.length>0&&l.push(i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:[i.jsx(z5,{className:"py-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("img",{src:u(e,"shorts"),alt:"Oyuncu Şort",className:"w-16 h-16 object-cover rounded-lg border border-gray-300 dark:border-gray-600",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=OSH"}}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-blue-600 dark:text-blue-400",children:"Oyuncu Şort"}),i.jsx("div",{className:"flex flex-col gap-1",children:e.playerShortsDetails.map(((e,t)=>i.jsx("div",{className:"space-y-1",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 rounded-md text-sm font-medium",children:[e.quantity," adet • ",e.color," • ",e.type]})},t)))})]})]})}),i.jsx(z5,{className:"text-center py-4 text-gray-800 dark:text-gray-200",children:e.playerShortsDetails.reduce(((e,t)=>e+t.quantity),0)}),i.jsxs(z5,{className:"text-right py-4 text-gray-800 dark:text-gray-200",children:["₺",((null==(t=e.playerShortsDetails[0])?void 0:t.unitPrice)||0).toFixed(2)]}),i.jsxs(z5,{className:"text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",(e.playerShortsTotalPrice||0).toFixed(2)]})]},`${e.id}-player-shorts`)),e.goalkeeperShortsDetails&&e.goalkeeperShortsDetails.length>0&&l.push(i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:[i.jsx(z5,{className:"py-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("img",{src:u(e,"shorts"),alt:"Kaleci Şort",className:"w-16 h-16 object-cover rounded-lg border border-gray-300 dark:border-gray-600",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=KSH"}}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-orange-600 dark:text-orange-400",children:e.goalkeeperShortsDetails.some((e=>e.type.includes("Uzun")))?"Kaleci Uzun Şort":"Kaleci Şort"}),i.jsx("div",{className:"flex flex-col gap-1",children:e.goalkeeperShortsDetails.map(((e,t)=>i.jsx("div",{className:"space-y-1",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-orange-100 dark:bg-orange-800 text-orange-700 dark:text-orange-300 rounded-md text-sm font-medium",children:[e.quantity," adet • ",e.color," • ",e.type]})},t)))})]})]})}),i.jsx(z5,{className:"text-center py-4 text-gray-800 dark:text-gray-200",children:e.goalkeeperShortsDetails.reduce(((e,t)=>e+t.quantity),0)}),i.jsxs(z5,{className:"text-right py-4 text-gray-800 dark:text-gray-200",children:["₺",((null==(r=e.goalkeeperShortsDetails[0])?void 0:r.unitPrice)||0).toFixed(2)]}),i.jsxs(z5,{className:"text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",((null==(a=e.goalkeeperShortsDetails)?void 0:a.reduce(((e,t)=>e+t.quantity*t.unitPrice),0))||0).toFixed(2)]})]},`${e.id}-goalkeeper-shorts`)),(e.shortsQuantity||0)>0&&!e.playerShortsDetails&&!e.goalkeeperShortsDetails&&l.push(i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:[i.jsx(z5,{className:"py-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("img",{src:u(e,"shorts"),alt:"Şort",className:"w-16 h-16 object-cover rounded-lg border border-gray-300 dark:border-gray-600",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=SH"}}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Şort"}),i.jsxs("div",{className:"flex flex-col gap-1",children:[e.shortsColor&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium",children:["Renk: ",e.shortsColor]}),e.shortsType&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium",children:["Tip: ",e.shortsType]})]})]})]})}),i.jsx(z5,{className:"text-center py-4 text-gray-800 dark:text-gray-200",children:e.shortsQuantity||0}),i.jsxs(z5,{className:"text-right py-4 text-gray-800 dark:text-gray-200",children:["₺",(e.shortsUnitPrice||0).toFixed(2)]}),i.jsxs(z5,{className:"text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",(e.shortsTotalPrice||0).toFixed(2)]})]},`${e.id}-shorts`)),e.playerSocksDetails&&e.playerSocksDetails.length>0&&l.push(i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:[i.jsx(z5,{className:"py-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("img",{src:u(e,"socks"),alt:"Oyuncu Çorap",className:"w-16 h-16 object-cover rounded-lg border border-gray-300 dark:border-gray-600",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=OCR"}}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-blue-600 dark:text-blue-400",children:"Oyuncu Çorap"}),i.jsx("div",{className:"flex flex-col gap-1",children:e.playerSocksDetails.map(((e,t)=>i.jsx("div",{className:"space-y-1",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 rounded-md text-sm font-medium",children:[e.quantity," adet • ",e.color," • ",e.type]})},t)))})]})]})}),i.jsx(z5,{className:"text-center py-4 text-gray-800 dark:text-gray-200",children:e.playerSocksDetails.reduce(((e,t)=>e+t.quantity),0)}),i.jsxs(z5,{className:"text-right py-4 text-gray-800 dark:text-gray-200",children:["₺",((null==(n=e.playerSocksDetails[0])?void 0:n.unitPrice)||0).toFixed(2)]}),i.jsxs(z5,{className:"text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",(e.playerSocksTotalPrice||0).toFixed(2)]})]},`${e.id}-player-socks`)),e.goalkeeperSocksDetails&&e.goalkeeperSocksDetails.length>0&&l.push(i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:[i.jsx(z5,{className:"py-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("img",{src:u(e,"socks"),alt:"Kaleci Çorap",className:"w-16 h-16 object-cover rounded-lg border border-gray-300 dark:border-gray-600",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=KCR"}}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-orange-600 dark:text-orange-400",children:"Kaleci Çorap"}),i.jsx("div",{className:"flex flex-col gap-1",children:e.goalkeeperSocksDetails.map(((e,t)=>i.jsx("div",{className:"space-y-1",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-orange-100 dark:bg-orange-800 text-orange-700 dark:text-orange-300 rounded-md text-sm font-medium",children:[e.quantity," adet • ",e.color," • ",e.type]})},t)))})]})]})}),i.jsx(z5,{className:"text-center py-4 text-gray-800 dark:text-gray-200",children:e.goalkeeperSocksDetails.reduce(((e,t)=>e+t.quantity),0)}),i.jsxs(z5,{className:"text-right py-4 text-gray-800 dark:text-gray-200",children:["₺",((null==(s=e.goalkeeperSocksDetails[0])?void 0:s.unitPrice)||0).toFixed(2)]}),i.jsxs(z5,{className:"text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",(e.goalkeeperSocksTotalPrice||0).toFixed(2)]})]},`${e.id}-goalkeeper-socks`)),(e.socksQuantity||0)>0&&!e.playerSocksDetails&&!e.goalkeeperSocksDetails&&l.push(i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:[i.jsx(z5,{className:"py-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("img",{src:u(e,"socks"),alt:"Çorap",className:"w-16 h-16 object-cover rounded-lg border border-gray-300 dark:border-gray-600",onError:e=>{e.currentTarget.src="https://ui-avatars.com/api/?name=CR"}}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Çorap"}),i.jsxs("div",{className:"flex flex-col gap-1",children:[e.socksColor&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium",children:["Renk: ",e.socksColor]}),e.socksType&&i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium",children:["Tip: ",e.socksType]})]})]})]})}),i.jsx(z5,{className:"text-center py-4 text-gray-800 dark:text-gray-200",children:e.socksQuantity||0}),i.jsxs(z5,{className:"text-right py-4 text-gray-800 dark:text-gray-200",children:["₺",(e.socksUnitPrice||0).toFixed(2)]}),i.jsxs(z5,{className:"text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",(e.socksTotalPrice||0).toFixed(2)]})]},`${e.id}-socks`)),l}))})]})})]})}),r.length>0&&i.jsx(Sse,{type:"single",collapsible:!0,defaultValue:"additional-products",className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(Cse,{value:"additional-products",children:[i.jsx(Tse,{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5"}),i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Ek Ürünler"})]})}),i.jsx(Ose,{children:i.jsx(P5,{children:i.jsx(E5,{children:r.map((e=>i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[i.jsx(z5,{className:"w-2/5 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:i.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"EK"})}),i.jsxs("div",{children:[i.jsx("h6",{className:"font-medium text-gray-800 dark:text-gray-200",children:e.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ek ürün"})]})]})}),i.jsx(z5,{className:"w-1/5 text-center py-4 text-gray-800 dark:text-gray-200",children:e.quantity}),i.jsxs(z5,{className:"w-1/5 text-right py-4 text-gray-800 dark:text-gray-200",children:["₺",(e.unitPrice||0).toFixed(2)]}),i.jsxs(z5,{className:"w-1/5 text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",(e.totalPrice||0).toFixed(2)]})]},e.id)))})})})]})}),a.length>0&&i.jsx(Sse,{type:"single",collapsible:!0,defaultValue:"print-requests",className:"border-b border-gray-200 dark:border-gray-700",children:i.jsxs(Cse,{value:"print-requests",children:[i.jsx(Tse,{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5"}),i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Baskı Talepleri"})]})}),i.jsx(Ose,{children:i.jsx(P5,{children:i.jsx(E5,{children:a.map((e=>i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[i.jsx(z5,{className:"w-2/5 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:i.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"BS"})}),i.jsxs("div",{children:[i.jsx("h6",{className:"font-medium text-gray-800 dark:text-gray-200",children:e.productName}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.region," - ",e.content]})]})]})}),i.jsx(z5,{className:"w-1/5 text-center py-4 text-gray-500 dark:text-gray-400",children:"-"}),i.jsx(z5,{className:"w-1/5 text-right py-4 text-gray-500 dark:text-gray-400",children:"-"}),i.jsxs(z5,{className:"w-1/5 text-right py-4 font-semibold text-gray-900 dark:text-gray-100",children:["₺",(e.totalPrice||0).toFixed(2)]})]},e.id)))})})})]})}),c.length>0&&i.jsx(Sse,{type:"single",collapsible:!0,defaultValue:"print-details",children:i.jsxs(Cse,{value:"print-details",children:[i.jsx(Tse,{className:"px-6 py-4 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"h-5 w-5"}),i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Oyuncu İsim ve Numara Bilgileri"})]})}),i.jsxs(Ose,{children:[i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{className:"bg-gray-100 dark:bg-gray-800",children:[i.jsx(M5,{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Ürün"}),i.jsx(M5,{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Tip"}),i.jsx(M5,{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Oyuncu Adı"}),i.jsx(M5,{className:"text-center font-semibold text-gray-800 dark:text-gray-200",children:"Numara"}),i.jsx(M5,{className:"text-center font-semibold text-gray-800 dark:text-gray-200",children:"Beden"}),i.jsx(M5,{className:"font-semibold text-gray-800 dark:text-gray-200",children:"İsim Pozisyonu"})]})}),i.jsx(E5,{children:c.filter((e=>""!==e.name.trim()||""!==e.number.trim())).map((e=>i.jsxs(D5,{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[i.jsx(z5,{className:"py-3 text-gray-800 dark:text-gray-200",children:e.productName}),i.jsx(z5,{className:"py-3",children:i.jsx("span",{className:"inline-flex px-2 py-1 rounded text-xs font-medium "+("Kaleci"===e.type?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"),children:e.type})}),i.jsx(z5,{className:"py-3 text-gray-800 dark:text-gray-200",children:e.name||"-"}),i.jsx(z5,{className:"text-center py-3 text-gray-800 dark:text-gray-200",children:e.number||"-"}),i.jsx(z5,{className:"text-center py-3 text-gray-800 dark:text-gray-200",children:i.jsx("span",{className:"inline-flex px-2 py-1 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:e.size||"-"})}),i.jsx(z5,{className:"py-3 text-gray-500 dark:text-gray-400",children:"above"===e.namePosition?"Numaranın Üstünde":"Numaranın Altında"})]},e.id)))})]}),i.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/30 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.jsx("span",{className:"font-medium",children:"Toplam:"})," ",c.filter((e=>""!==e.name.trim()||""!==e.number.trim())).length," forma için özel baskı"]})})]})]})}),i.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/30",children:i.jsxs("div",{className:"max-w-md ml-auto space-y-4",children:[i.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[i.jsx("span",{children:"Ara Toplam"}),i.jsxs("span",{className:"font-semibold",children:["₺",h.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[i.jsx(yi,{children:i.jsxs(vi,{children:[i.jsx(bi,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-1",children:["KDV Tutarı (%10) ",i.jsx(na,{className:"h-4 w-4"})]})}),i.jsx(ji,{children:i.jsx("p",{children:"Ürünlerin toplam fiyatına eklenecek %10 KDV tutarı."})})]})}),i.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:["+₺",p.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-xl font-bold border-t border-gray-200 dark:border-gray-700 pt-4 text-gray-900 dark:text-gray-100",children:[i.jsx("span",{children:"Genel Toplam"}),i.jsxs("span",{children:["₺",x.toFixed(2)]})]}),n&&n.length>0&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4",children:[i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-3",children:"Ödeme Detayları"}),i.jsx("div",{className:"space-y-2",children:n.map(((e,t)=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[i.jsxs("span",{children:["Tutar #",t+1]}),i.jsxs("span",{children:["₺",e.amount.toFixed(2)]})]}),e.discount>0&&i.jsxs("div",{className:"flex justify-between text-sm text-green-600 dark:text-green-400",children:[i.jsxs("span",{children:["İndirim #",t+1]}),i.jsxs("span",{children:["+₺",e.discount.toFixed(2)]})]})]},e.id||t)))}),i.jsxs("div",{className:"flex justify-between font-semibold text-gray-800 dark:text-gray-200 border-t border-gray-200 dark:border-gray-700 pt-2 mt-3",children:[i.jsx("span",{children:"Toplam Ödenen"}),i.jsxs("span",{children:["₺",n.reduce(((e,t)=>e+(t.amount+t.discount)),0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between font-bold text-lg text-orange-600 dark:text-orange-400 mt-2",children:[i.jsx("span",{children:"Kalan Tutar"}),i.jsxs("span",{children:["₺",(x-n.reduce(((e,t)=>e+(t.amount+t.discount)),0)).toFixed(2)]})]})]})})]})})]})})]}),i.jsxs(ro,{className:"border-gray-200 dark:border-gray-700 shadow-lg rounded-xl overflow-hidden",children:[i.jsx(ao,{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900",children:i.jsxs(no,{className:"flex items-center gap-3 text-2xl font-bold text-gray-800 dark:text-gray-100",children:[i.jsx(mn,{className:"h-6 w-6"}),"Müşteri Bilgileri"]})}),i.jsxs(io,{className:"bg-white dark:bg-gray-900 p-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Müşteri Tipi"}),i.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:"individual"===s.customerType?"👤 Bireysel":"🏢 Kurumsal"})]}),i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"TC Kimlik No"}),i.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:s.tcNumber||"-"})]}),i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Ad Soyad"}),i.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[s.firstName," ",s.lastName]})]}),i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Telefon"}),i.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:s.phone||"-"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"İl / İlçe"}),i.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[s.city||"-"," / ",s.district||"-"]})]}),i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Adres"}),i.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:s.address||"-"})]})]})]}),"corporate"===s.customerType&&i.jsxs("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),i.jsx(po,{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Kurumsal Bilgiler"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Firma Ünvanı"}),i.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:s.companyName||"-"})]}),i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Vergi Kimlik No"}),i.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:s.taxNumber||"-"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Firma Adresi"}),i.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:s.address||"-"})]})]})]}),s.isBillingAddressDifferent&&i.jsxs("div",{className:"mt-8 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),i.jsx(po,{className:"text-sm font-semibold text-green-700 dark:text-green-300",children:"Fatura Adresi"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fatura İl / İlçe"}),i.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[s.billingCity||"-"," / ",s.billingDistrict||"-"]})]}),i.jsxs("div",{children:[i.jsx(po,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fatura Adresi"}),i.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:s.billingAddress||"-"})]})]})]})]})]}),i.jsxs(ro,{className:"border-gray-200 dark:border-gray-700 shadow-lg rounded-xl overflow-hidden",children:[i.jsx(ao,{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900",children:i.jsxs(no,{className:"flex items-center gap-3 text-2xl font-bold text-gray-800 dark:text-gray-100",children:[i.jsx(Wr,{className:"h-6 w-6"}),"Satıcı Notları"]})}),i.jsx(io,{className:"bg-white dark:bg-gray-900 p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx(po,{htmlFor:"notes",className:"text-gray-700 dark:text-gray-300",children:"Müşteri talepleri ve özel notlar"}),i.jsx(v6,{id:"notes",placeholder:"Sipariş ile ilgili özel notlar, müşteri talepleri...",value:l,onChange:e=>o(e.target.value),rows:5,className:"bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 rounded-lg"})]})})]}),i.jsx(ro,{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border-gray-200 dark:border-gray-700 shadow-lg rounded-xl",children:i.jsxs(io,{className:"p-6",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Sipariş Türü"}),i.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"ready_stock"===e?"Hazır Stok":"Tasarım"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Toplam Ürün Kategorisi"}),i.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:t.reduce(((e,t)=>{let r=0;return(t.quantity||0)>0&&(r+=1),(t.goalkeeperQuantity||0)>0&&(r+=1),t.playerShortsDetails&&t.playerShortsDetails.length>0&&(r+=1),t.playerSocksDetails&&t.playerSocksDetails.length>0&&(r+=1),t.goalkeeperShortsDetails&&t.goalkeeperShortsDetails.length>0&&(r+=1),t.goalkeeperSocksDetails&&t.goalkeeperSocksDetails.length>0&&(r+=1),!t.playerShortsDetails&&!t.goalkeeperShortsDetails&&(t.shortsQuantity||0)>0&&(r+=1),!t.playerSocksDetails&&!t.goalkeeperSocksDetails&&(t.socksQuantity||0)>0&&(r+=1),e+r}),0)+r.length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Baskı Talebi"}),i.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:a.length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Kalan Tutar"}),i.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:["₺",(x-(n?n.reduce(((e,t)=>e+(t.amount+t.discount)),0):0)).toFixed(2)]})]})]}),i.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600 dark:text-gray-400",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Toplam Ekstra Baskı Talebi:"})," ",a.length," adet"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"İsim/Numara Basılacak Forma:"})," ",c.filter((e=>""!==e.name.trim()||""!==e.number.trim())).length," adet"]})]})]})})]})}function Ase({payments:e,setPayments:t,orderItems:r,additionalItems:a,printRequests:n}){var s,l;const[o,c]=ze.useState(!1),[d,u]=ze.useState(!1),[m,h]=ze.useState(null),[p,x]=ze.useState(null),[g,f]=ze.useState({type:"",amount:"",discount:"",notes:"",file:null}),y=r.reduce(((e,t)=>e+(t.totalPrice||0)+(t.goalkeeperTotalPrice||0)+(t.playerShortsTotalPrice||0)+(t.playerSocksTotalPrice||0)+(t.goalkeeperShortsTotalPrice||0)+(t.goalkeeperSocksTotalPrice||0)+(t.playerShortsTotalPrice||t.goalkeeperShortsTotalPrice?0:t.shortsTotalPrice||0)+(t.playerSocksTotalPrice||t.goalkeeperSocksTotalPrice?0:t.socksTotalPrice||0)),0),v=a.reduce(((e,t)=>e+t.totalPrice),0),b=n.reduce(((e,t)=>e+t.totalPrice),0),j=y+v+b,k=e.reduce(((e,t)=>e+(t.amount+t.discount)),0),w=j-k,N=()=>{h(null)},_=()=>{c(!1),f({type:"",amount:"",discount:"",notes:"",file:null}),x(null),N()},S=e=>"deposit"===e?"Kapora":"Tam Ödeme",C=e=>"cash"===e?"Nakit":"Kredi Kartı",T=e=>e.paymentMethod||"cash";return i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-4",children:i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-5 w-5"}),"Ödeme Detayları | İskontayı Tutar kısmına Girmeyiniz."]})}),i.jsxs(io,{className:"space-y-4",children:[o?i.jsx(ro,{className:"border-dashed",children:i.jsxs(io,{className:"pt-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"payment-type",children:"Ödeme Türü"}),i.jsxs(eO,{value:g.type,onValueChange:e=>f((t=>({...t,type:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Ödeme türü seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"deposit",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-4 w-4"}),"Kapora"]})}),i.jsx(iO,{value:"full_payment",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-4 w-4"}),"Tam Ödeme"]})})]})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"amount",children:"Tutar (₺)"}),i.jsx(co,{id:"amount",type:"number",placeholder:"0.00",value:g.amount,onChange:e=>f((t=>({...t,amount:e.target.value}))),min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"iskonto",children:"İskonto (₺)"}),i.jsx(co,{id:"iskonto",type:"number",placeholder:"0.00",value:g.discount,onChange:e=>f((t=>({...t,discount:e.target.value}))),min:"0",step:"0.01"})]}),i.jsxs("div",{className:"md:col-span-2 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsx("div",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Net Tutar Önizlemesi:"}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-sm text-gray-700 dark:text-gray-300",children:[i.jsx("span",{children:"Ana Tutar:"}),i.jsxs("span",{children:["₺",(parseFloat(g.amount)||0).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex justify-between text-sm text-green-600 dark:text-green-400",children:[i.jsx("span",{children:"İskonto:"}),i.jsxs("span",{children:["+₺",(parseFloat(g.discount)||0).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),i.jsx("hr",{className:"border-blue-300 dark:border-blue-600"}),i.jsxs("div",{className:"flex justify-between font-bold text-blue-900 dark:text-blue-100",children:[i.jsx("span",{children:"Toplam:"}),i.jsxs("span",{children:["₺",((parseFloat(g.amount)||0)+(parseFloat(g.discount)||0)).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"notes",children:"Açıklama (Opsiyonel)"}),i.jsx(v6,{id:"notes",placeholder:"Ek notlar...",value:g.notes,onChange:e=>f((t=>({...t,notes:e.target.value}))),rows:2})]}),"                  ",i.jsxs("div",{children:[i.jsx(po,{htmlFor:"receipt",children:"Dekont/Makbuz (Opsiyonel)"}),i.jsxs("div",{className:"mt-1 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(co,{id:"receipt",type:"file",accept:"image/*,.pdf",onChange:async e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(N(),x(null),r)if(function(e){return["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp","application/pdf"].includes(e.type)&&e.size<=104857600}(r)){if(f((e=>({...e,file:r}))),"application/pdf"!==r.type)try{const e=await L8(r);x(e)}catch(a){h("Dosya önizleme oluşturulamadı")}}else h("Desteklenen formatlar: JPEG, PNG, GIF, BMP, WebP, PDF (max 100MB)");else f((e=>({...e,file:null})))},disabled:d,className:"flex-1"}),d&&i.jsx(oa,{className:"h-5 w-5 animate-spin text-blue-500"})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Ödeme dekontunu yükleyin. JPEG, PNG, GIF, BMP, WebP, PDF formatında (max 100MB)."}),m&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx(T5,{children:m})]}),p&&i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Dekont Önizleme:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:g.file&&q8(g.file.size)}),i.jsxs(sd,{children:[i.jsx(id,{asChild:!0,children:i.jsx(oo,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:i.jsx(Vr,{className:"h-3 w-3"})})}),i.jsx(cd,{className:"max-w-3xl",children:i.jsx("div",{className:"max-h-[80vh] overflow-auto",children:i.jsx("img",{src:p,alt:"Dekont önizleme",className:"w-full h-auto max-h-[80vh] object-contain"})})})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-20 h-20 border rounded overflow-hidden bg-white flex-shrink-0",children:i.jsx("img",{src:p,alt:"Dekont önizleme",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",children:null==(s=g.file)?void 0:s.name}),i.jsx("p",{className:"text-xs text-gray-500",children:g.file&&q8(g.file.size)})]})]})]}),"application/pdf"===(null==(l=g.file)?void 0:l.type)&&i.jsx("div",{className:"border rounded-lg p-3 bg-red-50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-20 h-20 border rounded overflow-hidden bg-white flex-shrink-0 flex items-center justify-center",children:i.jsx(Wr,{className:"h-10 w-10 text-red-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Wr,{className:"h-4 w-4 text-red-600"}),i.jsx("span",{className:"text-sm font-medium",children:"PDF Dosyası:"})]}),i.jsx("p",{className:"text-sm text-gray-600",children:g.file.name}),i.jsx("p",{className:"text-xs text-gray-500",children:q8(g.file.size)}),i.jsx("p",{className:"text-xs text-red-600 mt-1",children:"PDF dosyası doğrudan yüklenecek."})]})]})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(oo,{onClick:async()=>{var r;if(!g.type||!g.amount&&!g.discount)return;const a=parseFloat(g.amount||"0"),n=parseFloat(g.discount||"0");if(isNaN(a)||a<0)return;if(isNaN(n)||n<0)return;if(0===a&&0===n)return;let s;if(N(),u(!0),g.file)try{const e=await I8(g.file,`receipt_${Date.now()}_${g.type}`);e.success&&e.data&&(s=e.data.url)}catch(l){return h(l instanceof Error?l.message:"Yükleme hatası"),void u(!1)}const i={id:`payment_${Date.now()}`,type:g.type,amount:a,discount:n,bank:"",receiptUrl:s,fileType:null==(r=g.file)?void 0:r.type,date:(new Date).toISOString(),notes:g.notes||void 0};t([...e,i]),_(),u(!1)},disabled:!g.type||!g.amount&&!g.discount||d,className:"flex items-center gap-2",children:[d&&i.jsx(oa,{className:"h-4 w-4 animate-spin"}),d?"Yükleniyor...":"Ödeme Ekle"]}),i.jsx(oo,{variant:"outline",onClick:_,disabled:d,children:"İptal"})]})]})}):i.jsxs(oo,{onClick:()=>c(!0),className:"w-full",variant:"outline",children:[i.jsx(Pa,{className:"h-4 w-4 mr-2"}),"Yeni Ödeme Ekle"]}),e.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium",children:"Yapılan Ödemeler"}),e.map((r=>{var a,n,s,l,o;return i.jsx(ro,{children:i.jsxs(io,{className:"pt-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Co,{variant:(o=r.type,"deposit"===o?"secondary":"default"),children:S(r.type)}),i.jsx("span",{className:"text-sm text-gray-500",children:new Date(r.date).toLocaleDateString("tr-TR")})]}),i.jsx("div",{className:"space-y-1",children:i.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[Re.createElement((l=T(r),"cash"===l?or:Ir),{className:"h-3 w-3"}),C(T(r))]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-right",children:r.discount>0?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-sm text-gray-500 line-through",children:["₺",r.amount.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),i.jsxs("div",{className:"text-xs text-green-600",children:["+₺",r.discount.toLocaleString("tr-TR",{minimumFractionDigits:2})," iskonto"]}),i.jsxs("div",{className:"font-bold text-lg",children:["₺",(r.amount+r.discount).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}):i.jsxs("span",{className:"font-bold text-lg",children:["₺",r.amount.toLocaleString("tr-TR",{minimumFractionDigits:2})]})}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>{return a=r.id,void t(e.filter((e=>e.id!==a)));var a},className:"text-red-600 hover:text-red-700 h-8 w-8 p-0",children:i.jsx(vn,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[r.notes&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Açıklama:"}),i.jsx("p",{className:"text-sm text-gray-700",children:r.notes})]}),r.receiptUrl&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 border rounded overflow-hidden bg-gray-50 flex-shrink-0",children:"application/pdf"===r.fileType||(null==(a=r.receiptUrl)?void 0:a.includes("-pdf"))?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(Wr,{className:"h-6 w-6 text-red-600"})}):i.jsx("img",{src:r.receiptUrl,alt:"Dekont önizleme",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm text-green-600",children:"application/pdf"===r.fileType||(null==(n=r.receiptUrl)?void 0:n.includes("-pdf"))?"PDF Dekont:":"Dekont:"}),i.jsxs(sd,{children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{variant:"ghost",size:"sm",className:"h-6 px-2 text-green-600 hover:text-green-700",children:[i.jsx(Vr,{className:"h-3 w-3 mr-1"}),"Görüntüle"]})}),i.jsx(cd,{className:"max-w-3xl",children:i.jsx("div",{className:"max-h-[80vh] overflow-auto",children:"application/pdf"===r.fileType||(null==(s=r.receiptUrl)?void 0:s.includes("-pdf"))?i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"text-center p-8",children:[i.jsx(Wr,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"PDF Dekont"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"PDF dosyasını görüntülemek için aşağıdaki bağlantıya tıklayın."}),i.jsxs(oo,{onClick:()=>window.open(r.receiptUrl,"_blank"),className:"inline-flex items-center gap-2",children:[i.jsx(Wr,{className:"h-4 w-4"}),"PDF'i Aç"]})]})}):i.jsx("img",{src:r.receiptUrl,alt:`${S(r.type)} dekontu`,className:"w-full h-auto max-h-[80vh] object-contain"})})})]})]})]})]})]})},r.id)}))]})]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Ödeme Özeti"})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Ürün Tutarı:"}),i.jsxs("span",{children:["₺",y.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),v>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Ek Ürünler:"}),i.jsxs("span",{children:["₺",v.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),b>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Baskı Tutarı:"}),i.jsxs("span",{children:["₺",b.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),i.jsx("hr",{}),i.jsxs("div",{className:"flex justify-between font-medium",children:[i.jsx("span",{children:"Toplam Tutar:"}),i.jsxs("span",{children:["₺",j.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]}),i.jsxs("div",{className:"border-t pt-4 space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-green-600",children:[i.jsx("span",{children:"Ödenen Tutar:"}),i.jsxs("span",{className:"font-medium",children:["₺",k.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex justify-between font-bold "+(w>0?"text-orange-600":"text-green-600"),children:[i.jsx("span",{children:"Kalan Bakiye:"}),i.jsxs("span",{children:["₺",w.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]}),i.jsx("div",{className:"pt-2",children:0===w?i.jsx(Co,{variant:"default",className:"w-full justify-center bg-green-600",children:"✓ Ödeme Tamamlandı"}):k>0?i.jsx(Co,{variant:"secondary",className:"w-full justify-center",children:"Kısmi Ödeme Yapıldı"}):i.jsx(Co,{variant:"outline",className:"w-full justify-center",children:"Ödeme Bekleniyor"})}),e.length>0&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h5",{className:"font-medium mb-2",children:"Ödeme Geçmişi"}),i.jsx("div",{className:"space-y-2",children:e.map((e=>i.jsxs("div",{className:"text-xs bg-gray-50 p-2 rounded",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium",children:S(e.type)}),i.jsxs("span",{children:["₺",(e.amount+e.discount).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),i.jsxs("div",{className:"text-gray-500 mt-1",children:[C(T(e))," • ",new Date(e.date).toLocaleDateString("tr-TR")]})]},e.id)))})]})]})})]}),0===j&&i.jsx(ro,{children:i.jsx(io,{className:"pt-6",children:i.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg",children:[i.jsx("p",{className:"font-medium",children:"Uyarı"}),i.jsx("p",{children:"Ödeme ekleyebilmek için önce ürün seçmelisiniz."})]})})})]})]})}function Ese(){const[e,t]=ze.useState(!1),{toast:r}=at();return{loading:e,savePrintDetails:async(e,a)=>{t(!0);try{const{error:t}=await Wl.from("print_details").delete().eq("order_id",e);if(t)throw t;if(a.length>0){const{error:t}=await Wl.from("print_details").insert(a.map((t=>({order_id:e,order_item_id:t.orderItemId,product_name:t.productName,product_image:t.productImage,type:t.type,player_name:t.playerName,jersey_number:t.jerseyNumber,name_position:t.namePosition,size:t.size}))));if(t)throw t}return r({title:"Başarılı",description:"Baskı detayları kaydedildi."}),{success:!0}}catch(n){return r({title:"Hata",description:"Baskı detayları kaydedilirken bir hata oluştu.",variant:"destructive"}),{success:!1,error:n}}finally{t(!1)}},getPrintDetails:async(e,t="default")=>{try{const{data:r,error:a}=await Wl.from("print_details").select("*").eq("order_id",e);if(a)throw a;return r.map((e=>({id:e.id,orderId:e.order_id,orderItemId:e.order_item_id,productName:e.product_name,productImage:e.product_image,type:e.type,playerName:e.player_name,jerseyNumber:e.jersey_number,namePosition:e.name_position,size:e.size||"Belirtilmedi"}))).sort(((e,r)=>{switch(t){case"alphabetic":return e.playerName.localeCompare(r.playerName,"tr");case"number":return(parseInt(e.jerseyNumber)||0)-(parseInt(r.jerseyNumber)||0);case"size":const t=["XL","L","M","S"],a=t.indexOf(e.size),n=t.indexOf(r.size);return-1!==a&&-1!==n?a-n:-1!==a&&-1===n?-1:-1!==n&&-1===a?1:e.size.localeCompare(r.size);default:if("Kaleci"===e.type&&"Kaleci"!==r.type)return-1;if("Kaleci"===r.type&&"Kaleci"!==e.type)return 1;const s=["XL","L","M","S"],i=s.indexOf(e.size),l=s.indexOf(r.size);return-1!==i&&-1!==l?i-l:-1!==i&&-1===l?-1:-1!==l&&-1===i?1:e.size.localeCompare(r.size)}}))}catch(r){return[]}},updatePrintDetail:async(e,t)=>{try{const{error:r}=await Wl.from("print_details").update({player_name:t.playerName,jersey_number:t.jerseyNumber,name_position:t.namePosition,size:t.size}).eq("id",e);if(r)throw r;return{success:!0}}catch(a){return r({title:"Hata",description:"Baskı detayı güncellenirken bir hata oluştu.",variant:"destructive"}),{success:!1,error:a}}}}}Ose.displayName=_se.displayName;const Dse=({customerInfo:e,setCustomerInfo:t})=>{const[r,a]=ze.useState([]),[n,s]=ze.useState([]),[l,o]=ze.useState([]),[c,d]=ze.useState(!1),[u,m]=ze.useState(!1),[h,p]=ze.useState(!1),[x,g]=ze.useState(!1),[f,y]=ze.useState(!1),[v,b]=ze.useState(!1),[j,k]=ze.useState(!1);ze.useEffect((()=>{(async()=>{d(!0);try{const e=await fetch("https://turkiyeapi.dev/api/v1/provinces?fields=name,id"),t=await e.json();"OK"===t.status&&t.data&&a(t.data)}catch(e){Fs.error("İller yüklenirken hata oluştu")}finally{d(!1)}})()}),[]),ze.useEffect((()=>{(async()=>{if(e.city){m(!0);try{const t=await fetch(`https://turkiyeapi.dev/api/v1/districts?province=${e.city}&fields=provinceId,province,name`),r=await t.json();"OK"===r.status&&r.data&&s(r.data)}catch(t){Fs.error("İlçeler yüklenirken hata oluştu")}finally{m(!1)}}else s([])})()}),[e.city]),ze.useEffect((()=>{(async()=>{if(e.billingCity&&e.isBillingAddressDifferent){p(!0);try{const t=await fetch(`https://turkiyeapi.dev/api/v1/districts?province=${e.billingCity}&fields=provinceId,province,name`),r=await t.json();"OK"===r.status&&r.data&&o(r.data)}catch(t){Fs.error("Kargo ilçeleri yüklenirken hata oluştu")}finally{p(!1)}}else o([])})()}),[e.billingCity,e.isBillingAddressDifferent]);const w=(r,a)=>{t("city"===r&&"string"==typeof a?{...e,city:a,district:""}:"billingCity"===r&&"string"==typeof a?{...e,billingCity:a,billingDistrict:""}:{...e,[r]:a})};return i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(mn,{className:"h-5 w-5"}),"Müşteri Bilgileri"]}),i.jsx(so,{children:"Sipariş için gerekli kişisel bilgilerinizi giriniz"})]}),i.jsxs(io,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx(po,{children:"Müşteri Tipi *"}),i.jsxs(eO,{value:e.customerType,onValueChange:e=>w("customerType",e),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Müşteri tipini seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"individual",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(mn,{className:"h-4 w-4"}),"Bireysel"]})}),i.jsx(iO,{value:"corporate",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-4 w-4"}),"Kurumsal"]})})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(po,{children:"Ödeme Şekli *"}),i.jsxs(eO,{value:e.paymentMethod,onValueChange:e=>w("paymentMethod",e),children:[i.jsx(rO,{children:i.jsx(tO,{placeholder:"Ödeme şeklini seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"cash",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-green-600",children:"💵"}),"Nakit"]})}),i.jsx(iO,{value:"credit_card",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-4 w-4 text-blue-600"}),"Kredi Kartı"]})})]})]})]})]}),"corporate"===e.customerType&&i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg space-y-4",children:[i.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Fatura Bilgileri"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"companyName",children:"Firma Ünvanı *"}),i.jsx(co,{id:"companyName",type:"text",value:e.companyName||"",onChange:e=>w("companyName",e.target.value),placeholder:"Firma ünvanını giriniz",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"taxNumber",children:"Vergi Kimlik Numarası (VKN) *"}),i.jsx(co,{id:"taxNumber",type:"text",value:e.taxNumber||"",onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,10);w("taxNumber",t)},placeholder:"Vergi kimlik numarasını giriniz",maxLength:10,required:!0})]})]}),"individual"===e.customerType&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"firstName",children:"İsim *"}),i.jsx(co,{id:"firstName",type:"text",value:e.firstName,onChange:e=>w("firstName",e.target.value),placeholder:"İsminizi giriniz",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"lastName",children:"Soyisim *"}),i.jsx(co,{id:"lastName",type:"text",value:e.lastName,onChange:e=>w("lastName",e.target.value),placeholder:"Soyisminizi giriniz",required:!0})]})]}),"individual"===e.customerType&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"tcNumber",children:"TC Kimlik Numarası *"}),i.jsx(co,{id:"tcNumber",type:"text",value:e.tcNumber,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,11);w("tcNumber",t)},placeholder:"TC Kimlik numaranızı giriniz",maxLength:11,required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"city",children:"İl *"}),i.jsxs(nu,{open:x,onOpenChange:g,children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",role:"combobox","aria-expanded":x,className:"w-full justify-between",disabled:c,children:[e.city||(c?"İller yükleniyor...":"İl seçiniz..."),i.jsx(Cr,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(iu,{className:"w-full p-0",align:"start",children:i.jsxs(bte,{children:[i.jsx(jte,{placeholder:"İl ara..."}),i.jsxs(kte,{children:[i.jsx(wte,{children:"İl bulunamadı."}),i.jsx(Nte,{children:r.map((t=>i.jsxs(_te,{value:t.name,onSelect:e=>{w("city",e),g(!1)},children:[i.jsx(br,{className:xs("mr-2 h-4 w-4",e.city===t.name?"opacity-100":"opacity-0")}),t.name]},t.id)))})]})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"district",children:"İlçe *"}),i.jsxs(nu,{open:f,onOpenChange:y,children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",role:"combobox","aria-expanded":f,className:"w-full justify-between",disabled:!e.city||u,children:[e.district||(e.city?u?"İlçeler yükleniyor...":"İlçe seçiniz...":"Önce il seçiniz"),i.jsx(Cr,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(iu,{className:"w-full p-0",align:"start",children:i.jsxs(bte,{children:[i.jsx(jte,{placeholder:"İlçe ara..."}),i.jsxs(kte,{children:[i.jsx(wte,{children:"İlçe bulunamadı."}),i.jsx(Nte,{children:n.map((t=>i.jsxs(_te,{value:t.name,onSelect:e=>{w("district",e),y(!1)},children:[i.jsx(br,{className:xs("mr-2 h-4 w-4",e.district===t.name?"opacity-100":"opacity-0")}),t.name]},t.name)))})]})]})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"address",children:(e.customerType,"Firma Adresi *")}),i.jsx(co,{id:"address",type:"text",value:e.address,onChange:e=>w("address",e.target.value),placeholder:"corporate"===e.customerType?"Teslimat adresini giriniz":"Tam adresinizi giriniz",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"phone",children:"Telefon Numarası *"}),i.jsx(co,{id:"phone",type:"tel",value:e.phone,onChange:e=>{const t=e.target.value.replace(/[^\d\s\(\)\-\+]/g,"");w("phone",t)},placeholder:"Telefon numaranızı giriniz (örn: 0532 123 45 67)",required:!0})]}),"corporate"===e.customerType&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"billingAddressDifferent",checked:e.isBillingAddressDifferent,onChange:e=>w("isBillingAddressDifferent",e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),i.jsx(po,{htmlFor:"billingAddressDifferent",className:"text-sm font-medium text-gray-900 dark:text-gray-300 cursor-pointer",children:"Siparişin Kargo Adresi farklı mı?"})]}),e.isBillingAddressDifferent&&i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg space-y-4",children:[i.jsx("h4",{className:"font-medium text-green-900 dark:text-green-100",children:"Kargo Adresi Bilgileri"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"billingCity",children:"Kargo İl *"}),i.jsxs(nu,{open:v,onOpenChange:b,children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",role:"combobox","aria-expanded":v,className:"w-full justify-between",disabled:c,children:[e.billingCity||(c?"İller yükleniyor...":"Kargo il seçiniz..."),i.jsx(Cr,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(iu,{className:"w-full p-0",align:"start",children:i.jsxs(bte,{children:[i.jsx(jte,{placeholder:"Kargo il ara..."}),i.jsxs(kte,{children:[i.jsx(wte,{children:"İl bulunamadı."}),i.jsx(Nte,{children:r.map((t=>i.jsxs(_te,{value:t.name,onSelect:e=>{w("billingCity",e),b(!1)},children:[i.jsx(br,{className:xs("mr-2 h-4 w-4",e.billingCity===t.name?"opacity-100":"opacity-0")}),t.name]},`billing-${t.id}`)))})]})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"billingDistrict",children:"Kargo İlçe *"}),i.jsxs(nu,{open:j,onOpenChange:k,children:[i.jsx(su,{asChild:!0,children:i.jsxs(oo,{variant:"outline",role:"combobox","aria-expanded":j,className:"w-full justify-between",disabled:!e.billingCity||h,children:[e.billingDistrict||(e.billingCity?h?"İlçeler yükleniyor...":"Kargo ilçe seçiniz...":"Önce kargo il seçiniz"),i.jsx(Cr,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(iu,{className:"w-full p-0",align:"start",children:i.jsxs(bte,{children:[i.jsx(jte,{placeholder:"Kargo ilçe ara..."}),i.jsxs(kte,{children:[i.jsx(wte,{children:"İlçe bulunamadı."}),i.jsx(Nte,{children:l.map((t=>i.jsxs(_te,{value:t.name,onSelect:e=>{w("billingDistrict",e),k(!1)},children:[i.jsx(br,{className:xs("mr-2 h-4 w-4",e.billingDistrict===t.name?"opacity-100":"opacity-0")}),t.name]},`billing-${t.name}`)))})]})]})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(po,{htmlFor:"billingAddress",children:"Kargo Adresi *"}),i.jsx(co,{id:"billingAddress",type:"text",value:e.billingAddress||"",onChange:e=>w("billingAddress",e.target.value),placeholder:"Kargo Adresini giriniz",required:!0})]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[i.jsx("strong",{children:"Not:"})," Bu bilgiler sipariş takibi, teslimat ve fatura düzenleme için kullanılacaktır. Lütfen doğru bilgiler girdiğinizden emin olun."]})})]})]})},Mse=()=>{const[e,t]=ze.useState(1),[r,a]=ze.useState(null),[n,s]=ze.useState([]),[l,o]=ze.useState([]),[c,d]=ze.useState([]),[u,m]=ze.useState([]),[h,p]=ze.useState([]),[x,g]=ze.useState({customerType:"individual",paymentMethod:"cash",firstName:"",lastName:"",tcNumber:"",city:"",district:"",address:"",phone:"",isBillingAddressDifferent:!1}),[f,y]=ze.useState(""),[v,b]=ze.useState(!1),[j,k]=ze.useState(!1),{user:w}=Jl(),N=xl(),{savePrintDetails:_}=Ese();ze.useEffect((()=>{const e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target.isContentEditable))switch(e.key){case"-":case"_":e.preventDefault(),C();break;case"+":case"=":e.preventDefault(),T()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[e]);const S=e=>{a(e),t(2)},C=()=>{e>1&&t(e-1),2===e&&a(null)},T=()=>{if(4===e&&!j){const e=document.createElement("div");return e.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",e.innerHTML='\n        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md mx-4 shadow-xl">\n          <div class="flex items-center gap-3 mb-4">\n            <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">\n              <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.963-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>\n              </svg>\n            </div>\n            <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Önemli Uyarı</h3>\n          </div>\n          <p class="text-gray-700 dark:text-gray-300 mb-6">\n            Sonraki adıma geçebilmek için forma ön ve arka görsellerini yüklemeniz gerekmektedir.\n          </p>\n          <div class="flex justify-end">\n            <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors" onclick="this.closest(\'.fixed\').remove()">\n              Tamam\n            </button>\n          </div>\n        </div>\n      ',document.body.appendChild(e),void e.addEventListener("click",(t=>{t.target===e&&e.remove()}))}e<7&&t(e+1)},O=t=>[{number:1,title:"Forma Cinsi",description:"Forma tipini seçin",icon:La,completed:t<e,current:t===e,accessible:!0},{number:2,title:"ready_stock"===r?"Hazır Stok":"design"===r?"Tasarım":"Ürün Seçimi",description:"ready_stock"===r?"Stoktan ürün seç":"design"===r?"Tasarım oluştur":"Ürün türü seç",icon:"ready_stock"===r?ba:ja,completed:t<e,current:t===e,accessible:null!==r},{number:3,title:"Ek Ürünler",description:"İsteğe bağlı ürünler",icon:Ua,completed:t<e,current:t===e,accessible:n.length>0},{number:4,title:"Baskı Detayları",description:"Baskı bilgileri",icon:Wr,completed:t<e,current:t===e,accessible:n.length>0},{number:5,title:"Ödeme",description:"Ödeme bilgileri",icon:Ir,completed:t<e,current:t===e,accessible:n.length>0},{number:6,title:"Müşteri Bilgileri",description:"Kişisel bilgiler",icon:mn,completed:t<e,current:t===e,accessible:n.length>0},{number:7,title:"Sipariş Özeti",description:"Son kontrol ve onay",icon:Or,completed:!1,current:t===e,accessible:n.length>0}][t-1],P=()=>{var t,a,s,i,l,o;switch(e){case 1:return null!==r;case 2:return n.length>0;case 6:let e=!1;"individual"===x.customerType?e=""!==x.firstName.trim()&&""!==x.lastName.trim()&&""!==x.tcNumber.trim()&&""!==x.city.trim()&&""!==x.district.trim()&&""!==x.address.trim()&&""!==x.phone.trim():"corporate"===x.customerType&&(e=""!==x.city.trim()&&""!==x.district.trim()&&""!==x.address.trim()&&""!==x.phone.trim());let c=!0;"corporate"===x.customerType?c=""!==(null==(t=x.companyName)?void 0:t.trim())&&""!==(null==(a=x.taxNumber)?void 0:a.trim()):"individual"===x.customerType&&(c=""!==(null==(s=x.tcNumber)?void 0:s.trim()));let d=!0;return x.isBillingAddressDifferent&&(d=""!==(null==(i=x.billingCity)?void 0:i.trim())&&""!==(null==(l=x.billingDistrict)?void 0:l.trim())&&""!==(null==(o=x.billingAddress)?void 0:o.trim())),e&&c&&d;default:return!0}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Yeni Sipariş Oluştur"}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Adım ",e,"/7: ",(()=>{switch(e){case 1:return"Forma Cinsini Seçin";case 2:return"ready_stock"===r?"Hazır Stok Ürünleri":"design"===r?"Tasarım Forma Seçimi":"promotion"===r?"Promosyon Forma Seçimi":"Ürün Seçimi";case 3:return"Ek Ürünler";case 4:return"Baskı Detayları";case 5:return"Ödeme Bilgileri";case 6:return"Müşteri Bilgileri";case 7:return"Sipariş Özeti";default:return""}})()]}),i.jsx("div",{className:"flex items-center gap-4 mt-2",children:i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:["Klavye: ",i.jsx("kbd",{className:"font-mono font-bold",children:"-"})," Geri Gidebilirsiniz, ",i.jsx("kbd",{className:"font-mono font-bold",children:"+"})," İleri Gidebilirsiniz"]})})]}),r&&i.jsx(Co,{variant:"outline",className:"px-3 py-1",children:"ready_stock"===r?"Hazır Stok":"Tasarım Forma"})]}),i.jsx(ro,{children:i.jsxs(io,{className:"pt-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5,6,7].map((r=>{const a=O(r),n=a.icon;return i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:`\n                      relative group cursor-pointer transition-all duration-200\n                      ${a.accessible?"hover:scale-105":"cursor-not-allowed"}\n                    `,onClick:()=>a.accessible&&(r=>{r<=e&&t(r)})(r),children:[i.jsx("div",{className:`\n                      w-12 h-12 rounded-full flex items-center justify-center text-sm font-medium\n                      border-2 transition-all duration-200\n                      ${a.completed?"bg-green-600 border-green-600 text-white":a.current?"bg-blue-600 border-blue-600 text-white":a.accessible?"bg-white border-gray-300 text-gray-600 hover:border-blue-400 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300":"bg-gray-100 border-gray-200 text-gray-400 dark:bg-gray-800 dark:border-gray-700"}\n                    `,children:a.completed?i.jsx(Or,{className:"w-5 h-5"}):i.jsx(n,{className:"w-5 h-5"})}),i.jsxs("div",{className:`\n                      absolute top-14 left-1/2 transform -translate-x-1/2\n                      bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700\n                      rounded-lg p-2 min-w-max shadow-lg z-10\n                      opacity-0 group-hover:opacity-100 transition-opacity duration-200\n                      ${!a.accessible&&"hidden"}\n                    `,children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a.title}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.description}),i.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 rotate-45"})]})]}),r<7&&i.jsx("div",{className:`\n                      w-8 md:w-12 h-0.5 mx-2\n                      ${a.completed?"bg-green-600":"bg-gray-200 dark:bg-gray-700"}\n                    `})]},r)}))}),i.jsxs("div",{className:"mt-6 text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:O(e).title}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:O(e).description})]})]})}),i.jsx("div",{className:"min-h-[400px]",children:(()=>{switch(e){case 1:return i.jsx($ae,{onSelect:S,selectedType:r});case 2:return"ready_stock"===r?i.jsx(Kae,{orderItems:n,setOrderItems:s,onContinue:()=>t(3)}):"design"===r?i.jsx(Yae,{orderItems:n,setOrderItems:s,onContinue:()=>t(3)}):"promotion"===r?i.jsx(ene,{orderItems:n,setOrderItems:s,onContinue:()=>t(3)}):null;case 3:return i.jsx(tne,{additionalItems:l,setAdditionalItems:o});case 4:return i.jsxs("div",{className:"space-y-6",children:[i.jsx(ane,{printRequests:c,setPrintRequests:d,orderItems:n,orderType:r,onValidationChange:k}),i.jsx(Ane,{orderItems:n,printDetails:u,setPrintDetails:m})]});case 5:return i.jsx(Ase,{payments:h,setPayments:p,orderItems:n,additionalItems:l,printRequests:c});case 6:return i.jsx(Dse,{customerInfo:x,setCustomerInfo:g});case 7:return i.jsx(Pse,{orderType:r,orderItems:n,additionalItems:l,printRequests:c,payments:h,customerInfo:x,notes:f,setNotes:y,printDetails:u});default:return null}})()}),i.jsx(ro,{children:i.jsx(io,{className:"pt-6",children:i.jsxs("div",{className:"flex justify-between",children:[i.jsx(oo,{variant:"outline",onClick:C,disabled:1===e,children:"Geri"}),e<6?i.jsxs(oo,{onClick:T,disabled:!P(),children:["İleri",i.jsx(nr,{className:"ml-2 h-4 w-4"})]}):6===e?i.jsxs(oo,{onClick:T,disabled:!P(),children:["Özeti Gör",i.jsx(nr,{className:"ml-2 h-4 w-4"})]}):i.jsx(oo,{className:"bg-green-600 hover:bg-green-700",onClick:async()=>{var e,t;if(!w)return void Fs.error("Kullanıcı bilgisi bulunamadı");const r=e=>e&&0!==e.length?e.map((e=>`${e.quantity} Adet - ${e.color} - ${e.size}`)).join(", "):"",a=e=>e&&0!==e.length?e.map((e=>`${e.quantity} Adet - ${e.color} - ${e.type}`)).join(", "):"",s=e=>e&&0!==e.length?e.map((e=>`Oyuncu: ${e.quantity} Adet - ${e.color} - ${e.type}`)).join(", "):"",i=e=>e&&0!==e.length?e.map((e=>`Kaleci: ${e.quantity} Adet - ${e.color} - ${e.type}`)).join(", "):"",o=e=>e&&0!==e.length?e.map((e=>`Kaleci: ${e.quantity} Adet - ${e.color} - ${e.type}`)).join(", "):"";b(!0);try{const{grandTotal:m,totalPaid:p}=(()=>{const e=n.reduce(((e,t)=>e+(t.totalPrice||0)+(t.goalkeeperTotalPrice||0)+(t.playerShortsTotalPrice||0)+(t.playerSocksTotalPrice||0)+(t.goalkeeperShortsTotalPrice||0)+(t.goalkeeperSocksTotalPrice||0)+(t.playerShortsTotalPrice||t.goalkeeperShortsTotalPrice?0:t.shortsTotalPrice||0)+(t.playerSocksTotalPrice||t.goalkeeperSocksTotalPrice?0:t.socksTotalPrice||0)),0),t=l.reduce(((e,t)=>e+t.totalPrice),0),r=c.reduce(((e,t)=>e+t.totalPrice),0);return{orderTotal:e,additionalTotal:t,printTotal:r,grandTotal:e+t+r,totalPaid:h.reduce(((e,t)=>e+t.amount),0)}})(),g=e=>e.trim().replace(/\s+/g,"-").replace(/[^a-zA-ZüğıöçşÜĞIÖÇŞ0-9\-]/g,"").substring(0,20),y=e=>e.replace(/\D/g,""),v=()=>Math.floor(1e3+9e3*Math.random());let b="";if("individual"===x.customerType){const e=g(x.firstName||""),t=g(x.lastName||""),r=y(x.phone||"");b=`${e}-${t}-${r}-${v()}`}else if("corporate"===x.customerType){const e=g(x.companyName||"Kurumsal"),t=y(x.phone||"");b=`${e}-${t}-${v()}`}else b=`Siparis-${Date.now()}`;const j=`${x.address} || İl : ${x.city} || İlçe : ${x.district}`,{data:k,error:S}=await Wl.from("orders").insert({customer_id:w.id,order_number:b,status:"pending",total_amount:m,payment_status:p>=m?"paid":p>0?"partial":"pending",payment_method:x.paymentMethod,shipping_address:j,notes:f,customer_name:"individual"===x.customerType?`${x.firstName} ${x.lastName}`:x.companyName||"Kurumsal Müşteri",customer_tc:"individual"===x.customerType?x.tcNumber:null,customer_phone:x.phone,customer_address:x.address,customer_city:x.city,customer_district:x.district,customer_type:x.customerType,company_name:x.companyName||null,tax_number:x.taxNumber||null,company_address:null,is_billing_address_different:x.isBillingAddressDifferent,billing_city:x.billingCity||null,billing_district:x.billingDistrict||null,billing_address:x.billingAddress||null}).select().single();if(S)throw S;for(const l of n)if(l.variationId){if(l.sizes&&l.sizes.length>0){for(const t of l.sizes)if(t.quantity>0){const{error:r}=await Wl.from("order_items").insert({order_id:k.id,product_variation_id:t.variation_id,quantity:t.quantity,unit_price:l.unitPrice,total_price:l.unitPrice*t.quantity,item_type:l.type,notes:(null==(e=l.notes)?void 0:e.includes("Kaleci"))?`Kaleci ${l.name}`:null});if(r)throw r}}else if(l.quantity>0){const{error:e}=await Wl.from("order_items").insert({order_id:k.id,product_variation_id:l.variationId,quantity:l.quantity,unit_price:l.unitPrice,total_price:l.totalPrice,item_type:l.type,notes:(null==(t=l.notes)?void 0:t.includes("Kaleci"))?`Kaleci ${l.name}`:null});if(e)throw e}if(l.playerShortsDetails&&l.playerShortsDetails.length>0){const e=(d=l.playerShortsDetails)&&0!==d.length?d.map((e=>`Oyuncu: ${e.quantity} Adet - ${e.color} - ${e.type}`)).join(", "):"",t=l.playerShortsDetails.reduce(((e,t)=>e+t.quantity),0),r=l.playerShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),{error:a}=await Wl.from("order_items").insert({order_id:k.id,product_variation_id:l.variationId,quantity:t,unit_price:t>0?r/t:0,total_price:r,item_type:"shorts",notes:e});if(a)throw a}if(l.goalkeeperShortsDetails&&l.goalkeeperShortsDetails.length>0){const e=i(l.goalkeeperShortsDetails),t=l.goalkeeperShortsDetails.reduce(((e,t)=>e+t.quantity),0),r=l.goalkeeperShortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),{error:a}=await Wl.from("order_items").insert({order_id:k.id,product_variation_id:l.variationId,quantity:t,unit_price:t>0?r/t:0,total_price:r,item_type:"shorts",notes:e});if(a)throw a}if(l.playerSocksDetails&&l.playerSocksDetails.length>0){const e=s(l.playerSocksDetails),t=l.playerSocksDetails.reduce(((e,t)=>e+t.quantity),0),r=l.playerSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),{error:a}=await Wl.from("order_items").insert({order_id:k.id,product_variation_id:l.variationId,quantity:t,unit_price:t>0?r/t:0,total_price:r,item_type:"socks",notes:e});if(a)throw a}if(l.goalkeeperSocksDetails&&l.goalkeeperSocksDetails.length>0){const e=o(l.goalkeeperSocksDetails),t=l.goalkeeperSocksDetails.reduce(((e,t)=>e+t.quantity),0),r=l.goalkeeperSocksDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0),{error:a}=await Wl.from("order_items").insert({order_id:k.id,product_variation_id:l.variationId,quantity:t,unit_price:t>0?r/t:0,total_price:r,item_type:"socks",notes:e});if(a)throw a}if(l.shortsDetails&&l.shortsDetails.length>0||l.shortsQuantity&&l.shortsQuantity>0&&!l.playerShortsDetails&&!l.goalkeeperShortsDetails){let e="",t=0,r=0;l.shortsDetails&&l.shortsDetails.length>0?(e=a(l.shortsDetails),t=l.shortsDetails.reduce(((e,t)=>e+t.quantity),0),r=l.shortsDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)):(e=`${l.shortsQuantity} Adet - ${l.shortsColor||""} - ${l.shortsType||""}`,t=l.shortsQuantity||0,r=l.shortsTotalPrice||0);const{error:n}=await Wl.from("order_items").insert({order_id:k.id,product_variation_id:l.variationId,quantity:t,unit_price:t>0?r/t:0,total_price:r,item_type:"shorts",notes:e});if(n)throw n}if(l.goalkeeperDetails&&l.goalkeeperDetails.length>0||l.goalkeeperQuantity&&l.goalkeeperQuantity>0){let e="",t=0,a=0;l.goalkeeperDetails&&l.goalkeeperDetails.length>0?(e=r(l.goalkeeperDetails),t=l.goalkeeperDetails.reduce(((e,t)=>e+t.quantity),0),a=l.goalkeeperDetails.reduce(((e,t)=>e+t.quantity*t.unitPrice),0)):(e=`${l.goalkeeperQuantity} Adet - ${l.goalkeeperColor||""} - ${l.goalkeeperSize||""}`,t=l.goalkeeperQuantity||0,a=l.goalkeeperTotalPrice||0);const{error:n}=await Wl.from("order_items").insert({order_id:k.id,product_variation_id:l.variationId,quantity:t,unit_price:t>0?a/t:0,total_price:a,item_type:"goalkeeper",notes:e});if(n)throw n}}for(const e of l){const t=e.id.split("-"),r=t.length>=5?`${t[0]}-${t[1]}-${t[2]}-${t[3]}-${t[4]}`:t[0],{error:a}=await Wl.from("order_items").insert({order_id:k.id,product_variation_id:r,quantity:e.quantity,unit_price:e.unitPrice,total_price:e.totalPrice,is_additional_product:!0,notes:e.name,is_lined:e.id.includes("-lined-"),is_mesh:e.id.includes("-mesh-")});if(a)throw a}for(const e of c){const{error:t}=await Wl.from("print_requests").insert({order_id:k.id,content:e.content,price:e.totalPrice,print_region_id:e.regionId,file_url:e.fileUrl||null});if(t)throw t}for(const e of h){const{error:t}=await Wl.from("payments").insert({order_id:k.id,customer_id:w.id,amount:e.amount,discount:e.discount,payment_type:e.type,bank_info:e.bank,receipt_url:e.receiptUrl||null,notes:e.notes||null,status:"completed"});if(t)throw t}if(u.length>0){const e=u.map((e=>({id:e.id,orderId:k.id,orderItemId:e.orderItemId,productName:e.productName,productImage:e.productImage,type:e.type,playerName:e.name,jerseyNumber:e.number,namePosition:e.namePosition,size:e.size})));(await _(k.id,e)).success}Fs.success("Sipariş başarıyla oluşturuldu!"),N("/customer/orders")}catch(m){let e="Sipariş oluşturulurken hata oluştu";m instanceof Error?e=m.message:"object"==typeof m&&null!==m&&("message"in m?e=String(m.message):"details"in m&&(e=String(m.details))),Fs.error(e)}finally{b(!1)}var d},disabled:v,children:v?"Sipariş Veriliyor...":"Siparişi Onayla"})]})})})]})},zse=()=>{const{user:e}=Jl(),t=xl(),{toast:r}=at(),{data:a,isLoading:n}=f8(),[s,l]=ze.useState([]),[o,c]=ze.useState(!1),[d,u]=ze.useState(""),[m,h]=ze.useState("all"),[p,x]=ze.useState(""),[g,f]=ze.useState(""),y=(e,t)=>{const r=null==a?void 0:a.find((t=>t.variation_id===e));0===t?l(s.filter((t=>t.variation_id!==e))):t<=((null==r?void 0:r.stock_quantity)||0)&&l(s.map((r=>r.variation_id===e?{...r,quantity:t}:r)))},v=()=>{const e=s.reduce(((e,t)=>e+t.final_price*t.quantity),0);return e+0*e},b=()=>s.reduce(((e,t)=>e+t.final_price*t.quantity),0),j=()=>0*b(),k=(null==a?void 0:a.filter((e=>{var t;const r=e.name.toLowerCase().includes(d.toLowerCase())||e.code.toLowerCase().includes(d.toLowerCase())||(null==(t=e.brand)?void 0:t.toLowerCase().includes(d.toLowerCase())),a="all"===m||e.category===m;return r&&a})))||[],w=Array.from(new Set((null==a?void 0:a.map((e=>e.category)))||[]));return n?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Hazır Stok Siparişi"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Stoktaki ürünlerden seçim yapın"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Filtreler"})}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"search",children:"Ürün Ara"}),i.jsx(co,{id:"search",placeholder:"Ürün adı, kodu veya marka...",value:d,onChange:e=>u(e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"category",children:"Kategori"}),i.jsxs("select",{id:"category",value:m,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded-md bg-background",children:[i.jsx("option",{value:"all",children:"Tüm Kategoriler"}),w.map((e=>i.jsx("option",{value:e,children:e},e)))]})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map((e=>{const t=s.find((t=>t.variation_id===e.variation_id));return i.jsx(ro,{children:i.jsx(io,{className:"p-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:e.name}),i.jsx("p",{className:"text-sm text-gray-600",children:e.code}),i.jsx("p",{className:"text-sm text-gray-500",children:e.brand})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Co,{variant:"outline",children:e.color}),i.jsx(Co,{variant:"outline",children:e.size})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-bold text-lg",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e.final_price)}),i.jsxs("span",{className:"text-sm text-gray-500",children:["Stok: ",e.stock_quantity]})]}),t?i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>y(e.variation_id,t.quantity-1),children:i.jsx(ga,{className:"h-4 w-4"})}),i.jsx("span",{className:"font-medium",children:t.quantity}),i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>y(e.variation_id,t.quantity+1),disabled:t.quantity>=e.stock_quantity,children:i.jsx(Pa,{className:"h-4 w-4"})})]}),i.jsx(co,{placeholder:"Not ekle...",value:t.notes||"",onChange:t=>{return r=e.variation_id,a=t.target.value,void l(s.map((e=>e.variation_id===r?{...e,notes:a}:e)));var r,a}})]}):i.jsxs(oo,{onClick:()=>(e=>{const t=s.find((t=>t.variation_id===e.variation_id));t?t.quantity<e.stock_quantity?l(s.map((t=>t.variation_id===e.variation_id?{...t,quantity:t.quantity+1}:t))):r({title:"Stok Yetersiz",description:"Bu üründen daha fazla ekleyemezsiniz.",variant:"destructive"}):l([...s,{...e,quantity:1}])})(e),className:"w-full",disabled:0===e.stock_quantity,children:[i.jsx(Pa,{className:"mr-2 h-4 w-4"}),"Sepete Ekle"]})]})})},e.variation_id)}))}),0===k.length&&i.jsx(ro,{children:i.jsxs(io,{className:"text-center py-8",children:[i.jsx(ba,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Kriterlere uygun ürün bulunamadı"})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Ha,{className:"h-5 w-5"}),"Sepet (",s.length,")"]})}),i.jsx(io,{className:"space-y-4",children:0===s.length?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Sepetiniz boş"}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:s.map((e=>i.jsx("div",{className:"border-b pb-3 last:border-b-0",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm",children:e.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[e.color," - ",e.size]}),i.jsxs("p",{className:"text-sm font-medium",children:[e.quantity," x ",new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e.final_price)]})]}),i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>y(e.variation_id,0),children:"×"})]})},e.variation_id)))}),i.jsxs("div",{className:"space-y-2 pt-3 border-t",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Ara Toplam:"}),i.jsx("span",{children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(b())})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"KDV (%10):"}),i.jsx("span",{children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(j())})]}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"Toplam:"}),i.jsx("span",{children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(v())})]})]})]})})]}),s.length>0&&i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Sipariş Bilgileri"})}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"shipping",children:"Teslimat Adresi *"}),i.jsx(v6,{id:"shipping",placeholder:"Teslimat adresini girin...",value:p,onChange:e=>x(e.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"notes",children:"Sipariş Notları"}),i.jsx(v6,{id:"notes",placeholder:"Özel taleplerinizi belirtin...",value:g,onChange:e=>f(e.target.value)})]}),i.jsxs(oo,{onClick:async()=>{if(e&&0!==s.length&&p.trim()){c(!0);try{const{data:a,error:n}=await Wl.rpc("generate_order_number");if(n)throw n;const{data:i,error:l}=await Wl.from("orders").insert({order_number:a,customer_id:e.id,order_type:"ready_stock",shipping_address:p,customer_notes:g||null,status:"pending",subtotal:b(),tax_amount:j(),total_amount:v()}).select().single();if(l)throw l;for(const e of s){const{error:t}=await Wl.from("order_items").insert({order_id:i.id,product_variation_id:e.variation_id,quantity:e.quantity,unit_price:e.final_price,total_price:e.final_price*e.quantity,notes:e.notes||null});if(t)throw t;const{error:r}=await Wl.from("product_variations").update({stock_quantity:e.stock_quantity-e.quantity}).eq("id",e.variation_id);if(r)throw r}r({title:"Başarılı",description:"Siparişiniz başarıyla oluşturuldu."}),t("/customer/orders")}catch(a){r({title:"Hata",description:"Sipariş oluşturulurken bir hata oluştu.",variant:"destructive"})}finally{c(!1)}}else r({title:"Eksik Bilgi",description:"Lütfen tüm gerekli bilgileri doldurun.",variant:"destructive"})},disabled:o||!p.trim(),className:"w-full",children:[o?i.jsx(oa,{className:"mr-2 h-4 w-4 animate-spin"}):i.jsx(Ha,{className:"mr-2 h-4 w-4"}),"Siparişi Onayla"]})]})]})]})]})]})},Rse=()=>{const{user:e}=Jl(),t=xl(),{toast:r}=at(),{data:a,isLoading:n}=y8(),[s,l]=ze.useState([]),[o,c]=ze.useState(""),[d,u]=ze.useState(""),[m,h]=ze.useState(!1),p=null==a?void 0:a.reduce(((e,t)=>(e.find((e=>e.id===t.id))||e.push({id:t.id,name:t.name,code:t.code,category:t.category,brand:t.brand,final_price:t.final_price,images:t.images}),e)),[]),x=(e,t)=>{l(s.map(((r,a)=>a===e?{...r,...t}:r)))},g=()=>{const e=s.reduce(((e,t)=>e+t.basePrice*t.quantity),0);return e+0*e},f=()=>s.reduce(((e,t)=>e+t.basePrice*t.quantity),0),y=()=>0*f(),v=["XS","S","M","L","XL","XXL","3XL"];return n?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Özel Tasarım Siparişi"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Size özel tasarlanacak formalar (Minimum 5 adet)"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsx(no,{children:"Tasarım Ürünleri"}),i.jsx(so,{children:"Aşağıdaki ürünlerden seçim yaparak özel tasarımınızı oluşturun"})]}),i.jsx(io,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:null==p?void 0:p.map((e=>i.jsx(ro,{className:"border",children:i.jsx(io,{className:"p-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:e.name}),i.jsx("p",{className:"text-sm text-gray-600",children:e.code}),i.jsx("p",{className:"text-sm text-gray-500",children:e.category})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-bold text-lg",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e.final_price)}),i.jsx(Co,{variant:"secondary",children:"Tasarım"})]}),i.jsxs(oo,{onClick:()=>(e=>{const t={productId:e.id,productName:e.name,basePrice:e.final_price,quantity:0,sizes:{},designNotes:"",printRegions:[]};l([...s,t])})(e),className:"w-full",disabled:s.some((t=>t.productId===e.id)),children:[i.jsx(Pa,{className:"mr-2 h-4 w-4"}),s.some((t=>t.productId===e.id))?"Eklendi":"Ekle"]})]})})},e.id)))})})]}),s.map(((e,t)=>i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center justify-between",children:[e.productName,i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>(e=>{l(s.filter(((t,r)=>r!==e)))})(t),children:"×"})]})}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{children:"Tasarım Notları"}),i.jsx(v6,{placeholder:"Renk, logo, yazı vs. tasarım detaylarını belirtin...",value:e.designNotes,onChange:e=>x(t,{designNotes:e.target.value})})]}),i.jsxs("div",{children:[i.jsx(po,{children:"Beden ve Adet Seçimi"}),i.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:v.map((r=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(po,{className:"text-sm w-8",children:[r,":"]}),i.jsx(co,{type:"number",min:"0",value:e.sizes[r]||"",onChange:e=>((e,t,r)=>{const a={...s[e].sizes};0===r?delete a[t]:a[t]=r;const n=Object.values(a).reduce(((e,t)=>e+t),0);x(e,{sizes:a,quantity:n})})(t,r,parseInt(e.target.value)||0),className:"w-16"})]},r)))}),i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Toplam: ",e.quantity," adet"]})]})]})]},t)))]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ja,{className:"h-5 w-5"}),"Sipariş Özeti"]})}),i.jsx(io,{className:"space-y-4",children:0===s.length?i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Henüz ürün eklenmedi"}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-3",children:s.map(((e,t)=>i.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[i.jsx("p",{className:"font-medium text-sm",children:e.productName}),i.jsxs("p",{className:"text-xs text-gray-500",children:[e.quantity," adet"]}),i.jsx("p",{className:"text-sm font-medium",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e.basePrice*e.quantity)})]},t)))}),i.jsxs("div",{className:"space-y-2 pt-3 border-t",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Toplam Adet:"}),i.jsx("span",{children:s.reduce(((e,t)=>e+t.quantity),0)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Ara Toplam:"}),i.jsx("span",{children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(f())})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"KDV (%10):"}),i.jsx("span",{children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(y())})]}),i.jsxs("div",{className:"flex justify-between font-bold",children:[i.jsx("span",{children:"Toplam:"}),i.jsx("span",{children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(g())})]})]}),s.reduce(((e,t)=>e+t.quantity),0)<5&&i.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded-lg",children:i.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:["Minimum 5 adet sipariş verilmelidir. Eksik: ",5-s.reduce(((e,t)=>e+t.quantity),0)," adet"]})})]})})]}),s.length>0&&i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Sipariş Bilgileri"})}),i.jsxs(io,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"shipping",children:"Teslimat Adresi *"}),i.jsx(v6,{id:"shipping",placeholder:"Teslimat adresini girin...",value:o,onChange:e=>c(e.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"notes",children:"Sipariş Notları"}),i.jsx(v6,{id:"notes",placeholder:"Özel taleplerinizi belirtin...",value:d,onChange:e=>u(e.target.value)})]}),i.jsxs(oo,{onClick:async()=>{if(!e||0===s.length||!o.trim())return void r({title:"Eksik Bilgi",description:"Lütfen tüm gerekli bilgileri doldurun.",variant:"destructive"});if(s.reduce(((e,t)=>e+t.quantity),0)<5)r({title:"Minimum Sipariş",description:"Tasarım siparişi için minimum 5 adet gereklidir.",variant:"destructive"});else{h(!0);try{const{data:a,error:n}=await Wl.rpc("generate_order_number");if(n)throw n;const{data:i,error:l}=await Wl.from("orders").insert({order_number:a,customer_id:e.id,order_type:"design",shipping_address:o,customer_notes:d||null,status:"pending",subtotal:f(),tax_amount:y(),total_amount:g()}).select().single();if(l)throw l;for(const e of s)for(const[t,r]of Object.entries(e.sizes)){const{error:a}=await Wl.from("order_items").insert({order_id:i.id,product_variation_id:e.productId,quantity:r,unit_price:e.basePrice,total_price:e.basePrice*r,notes:`${e.designNotes} - Beden: ${t}`});if(a)throw a}r({title:"Başarılı",description:"Tasarım siparişiniz başarıyla oluşturuldu. Tasarım ekibimiz en kısa sürede sizinle iletişime geçecektir."}),t("/customer/orders")}catch(a){r({title:"Hata",description:"Sipariş oluşturulurken bir hata oluştu.",variant:"destructive"})}finally{h(!1)}}},disabled:m||!o.trim()||s.reduce(((e,t)=>e+t.quantity),0)<5,className:"w-full",children:[m?i.jsx(oa,{className:"mr-2 h-4 w-4 animate-spin"}):i.jsx(ja,{className:"mr-2 h-4 w-4"}),"Tasarım Siparişi Ver"]})]})]})]})]})]})},Ise=()=>{const{userProfile:e}=Jl(),[t,r]=ze.useState(""),[a,n]=ze.useState("all"),[s,l]=ze.useState("all"),[o,c]=ze.useState(1),[d,u]=ze.useState(""),[m,h]=ze.useState(""),[p,x]=ze.useState("all"),g=20,f=((e,t)=>{const[r,a]=ze.useState(e);return ze.useEffect((()=>{const r=setTimeout((()=>{a(e)}),t);return()=>{clearTimeout(r)}}),[e,t]),r})(t,500),y=e=>{if(x(e),c(1),"all"===e)u(""),h("");else{const{start:t,end:r}=(e=>{const t=new Date;switch(e){case"today":return{start:XC(ZS(t),"yyyy-MM-dd"),end:XC(cC(t),"yyyy-MM-dd")};case"yesterday":const e=nT(t,1);return{start:XC(ZS(e),"yyyy-MM-dd"),end:XC(cC(e),"yyyy-MM-dd")};case"thisWeek":return{start:XC(WS(t,{locale:ZT}),"yyyy-MM-dd"),end:XC(xC(t,{locale:ZT}),"yyyy-MM-dd")};case"14days":return{start:XC(nT(t,14),"yyyy-MM-dd"),end:XC(t,"yyyy-MM-dd")};case"thisMonth":return{start:XC(hC(t),"yyyy-MM-dd"),end:XC(dC(t),"yyyy-MM-dd")};default:return{start:"",end:""}}})(e);u(t),h(r)}},v=(e,t)=>{"start"===e?u(t):h(t),x(""),c(1)};ze.useEffect((()=>{c(1)}),[f,a,s]);const{data:b,isLoading:j}=qe({queryKey:["customer-orders",null==e?void 0:e.id,f,a,s,d,m],queryFn:async()=>{if(!(null==e?void 0:e.id))return[];let t=Wl.from("orders").select("\n          id,\n          order_number,\n          status,\n          total_amount,\n          order_type,\n          payment_status,\n          created_at,\n          customer_notes,\n          order_items (\n            id,\n            quantity,\n            product_variations (\n              id,\n              sku,\n              color,\n              size,\n              products (name, code)\n            )\n          ),\n          payments (\n            id,\n            amount,\n            discount\n          )\n        ").eq("customer_id",e.id).order("created_at",{ascending:!1});f&&(t=t.ilike("order_number",`%${f}%`)),"all"!==a&&(t=t.eq("status",a)),"all"!==s&&(t=t.eq("order_type",s)),d&&(t=t.gte("created_at",d+"T00:00:00.000Z")),m&&(t=t.lte("created_at",m+"T23:59:59.999Z"));const{data:r,error:n}=await t;if(n)throw n;return r||[]},enabled:!!(null==e?void 0:e.id)}),k=e=>{const t={pending:{label:"Beklemede",variant:"secondary",className:""},confirmed:{label:"Onaylandı",variant:"default",className:""},processing:{label:"Hazırlanıyor",variant:"default",className:"bg-sky-100 text-sky-800 border-sky-200 hover:bg-sky-200 dark:bg-sky-900 dark:text-sky-200 dark:border-sky-800"},in_production:{label:"Üretimde",variant:"default",className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200 dark:bg-green-900 dark:text-green-200 dark:border-green-800"},shipped:{label:"Kargoda",variant:"default",className:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-800 dark:border-purple-800"},delivered:{label:"Teslim Edildi",variant:"default",className:"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-200 dark:border-yellow-800"},cancelled:{label:"İptal",variant:"destructive",className:""}},r=t[e]||t.pending;return i.jsx(Co,{variant:r.variant,className:r.className,children:r.label})},w=e=>{const t={pending:{label:"Beklemede",variant:"secondary"},partial:{label:"Kısmi Ödendi",variant:"secondary"},paid:{label:"Ödendi",variant:"default"}},r=t[e]||t.pending;return i.jsx(Co,{variant:r.variant,children:r.label})},N=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),_=e=>{if(!e||0===e.length)return"Ürün bilgisi yok";return`${e.length} farklı ürün, toplam ${e.reduce(((e,t)=>e+t.quantity),0)} adet`};return j?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Siparişlerim"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Tüm siparişlerinizi görüntüleyin ve takip edin"})]}),i.jsx(oo,{asChild:!0,children:i.jsxs(Ll,{to:"/customer/orders/new",children:[i.jsx(Pa,{className:"mr-2 h-4 w-4"}),"Yeni Sipariş"]})})]}),i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Ha,{className:"h-5 w-5"}),"Sipariş Geçmişi"]}),i.jsx(so,{children:"Verdiğiniz tüm siparişleri görüntüleyebilir ve detaylarını inceleyebilirsiniz"})]}),i.jsxs(io,{children:[i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(co,{placeholder:"Sipariş numarası ile arayın... (yazdıktan sonra bekleyin)",className:"pl-10",value:t,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&c(1)}}),t!==f&&t&&i.jsx("div",{className:"absolute right-3 top-3",children:i.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})})]}),i.jsxs("select",{value:a,onChange:e=>n(e.target.value),className:"px-3 py-2 border rounded-md bg-background",children:[i.jsx("option",{value:"all",children:"Tüm Durumlar"}),i.jsx("option",{value:"pending",children:"Beklemede"}),i.jsx("option",{value:"confirmed",children:"Onaylandı"}),i.jsx("option",{value:"processing",children:"Hazırlanıyor"}),i.jsx("option",{value:"in_production",children:"Üretimde"}),i.jsx("option",{value:"shipped",children:"Kargoda"}),i.jsx("option",{value:"delivered",children:"Teslim Edildi"}),i.jsx("option",{value:"cancelled",children:"İptal"})]}),i.jsxs("select",{value:s,onChange:e=>l(e.target.value),className:"px-3 py-2 border rounded-md bg-background",children:[i.jsx("option",{value:"all",children:"Tüm Cinsler"}),i.jsx("option",{value:"ready_stock",children:"Hazır Stok"}),i.jsx("option",{value:"design",children:"Tasarım Forma"})]})]}),i.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-900",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(pr,{className:"h-4 w-4 text-gray-600"}),i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tarih Filtresi"})]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{value:"all",label:"Tüm zamanlar"},{value:"today",label:"Bugün"},{value:"yesterday",label:"Dün"},{value:"thisWeek",label:"Bu hafta"},{value:"14days",label:"14 Gün"},{value:"thisMonth",label:"Bu ay"}].map((e=>i.jsx(oo,{variant:p===e.value?"default":"outline",size:"sm",onClick:()=>y(e.value),className:"text-xs",children:e.label},e.value)))}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 block",children:"Başlangıç Tarihi"}),i.jsx(co,{type:"date",value:d,onChange:e=>v("start",e.target.value),className:"text-sm"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1 block",children:"Bitiş Tarihi"}),i.jsx(co,{type:"date",value:m,onChange:e=>v("end",e.target.value),className:"text-sm"})]}),(d||m)&&i.jsx("div",{className:"flex items-end",children:i.jsx(oo,{variant:"outline",size:"sm",onClick:()=>{u(""),h(""),x("all"),c(1)},className:"text-xs",children:"Temizle"})})]})]})]}),b&&b.length>0?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Toplam ",b.length," sipariş bulundu"]}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Sayfa ",o," / ",Math.ceil(b.length/g)]})]}),i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Sipariş No"}),i.jsx(M5,{children:"Sipariş Tarihi"}),i.jsx(M5,{children:"Forma Cinsi"}),i.jsx(M5,{children:"Ürünler"}),i.jsx(M5,{children:"Toplam Tutar"}),i.jsx(M5,{children:"Ödenen Tutar"}),i.jsx(M5,{children:"İskonto Tutar"}),i.jsx(M5,{children:"Kalan Tutar"}),i.jsx(M5,{children:"Ödeme Durumu"}),i.jsx(M5,{children:"Sipariş Durumu"}),i.jsx(M5,{className:"text-right",children:"İşlemler"})]})}),i.jsx(E5,{children:b.slice((o-1)*g,o*g).map((e=>{const{totalPaid:t,totalDiscount:r,totalPayment:a}=(e=>{if(!e||0===e.length)return{totalPaid:0,totalDiscount:0,totalPayment:0};const t=e.reduce(((e,t)=>e+(t.amount||0)),0),r=e.reduce(((e,t)=>e+(t.discount||0)),0);return{totalPaid:t,totalDiscount:r,totalPayment:t+r}})(e.payments),n=e.total_amount-a;return i.jsxs(D5,{children:[i.jsx(z5,{className:"font-medium",children:e.order_number}),i.jsx(z5,{children:XC(new Date(e.created_at),"dd MMM yyyy",{locale:ZT})}),i.jsx(z5,{children:(s=e.order_type,"design"===s?"Tasarım Forma":"Hazır Stok")}),i.jsx(z5,{children:i.jsx("div",{className:"text-sm",children:_(e.order_items)})}),i.jsx(z5,{className:"font-medium",children:N(e.total_amount)}),i.jsx(z5,{className:"text-blue-600 dark:text-blue-400",children:N(t)}),i.jsx(z5,{className:"text-green-600 dark:text-green-400",children:N(r)}),i.jsx(z5,{className:"font-medium "+(n>0?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"),children:N(n)}),i.jsx(z5,{children:w(e.payment_status)}),i.jsx(z5,{children:k(e.status)}),i.jsx(z5,{className:"text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx(oo,{variant:"ghost",size:"sm",asChild:!0,children:i.jsx(Ll,{to:`/customer/orders/${e.id}`,children:i.jsx(Vr,{className:"h-4 w-4"})})}),i.jsx(oo,{variant:"ghost",size:"sm",children:i.jsx(qr,{className:"h-4 w-4"})})]})})]},e.id);var s}))})]}),Math.ceil(b.length/g)>1&&i.jsxs("div",{className:"flex items-center justify-between mt-6",children:[i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(o-1)*g+1," - ",Math.min(o*g,b.length)," arası gösteriliyor"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>c((e=>Math.max(e-1,1))),disabled:1===o,children:[i.jsx(kr,{className:"h-4 w-4"}),"Önceki"]}),i.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.ceil(b.length/g)},((e,t)=>{const r=t+1,a=Math.ceil(b.length/g);return 1===r||r===a||r>=o-1&&r<=o+1?i.jsx(oo,{variant:o===r?"default":"outline",size:"sm",onClick:()=>c(r),className:"w-8 h-8 p-0",children:r},r):r===o-2||r===o+2?i.jsx("span",{className:"px-2 text-gray-400",children:"..."},r):null}))}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>c((e=>Math.min(e+1,Math.ceil(b.length/g)))),disabled:o===Math.ceil(b.length/g),children:["Sonraki",i.jsx(wr,{className:"h-4 w-4"})]})]})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ha,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Henüz sipariş bulunmuyor"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"İlk siparişinizi vererek başlayın"}),i.jsx(oo,{asChild:!0,children:i.jsxs(Ll,{to:"/customer/orders/new",children:[i.jsx(Pa,{className:"mr-2 h-4 w-4"}),"Yeni Sipariş Oluştur"]})})]})]})]})]})},Fse=({order:e,orderItems:t=[],printRequests:r=[],printDetails:a=[],payments:n=[],pageSize:s="A4",collarColor:i})=>{const l=(o=e.shipping_address||"",{name:e.customer_name||(()=>{const e=o.match(/^([^]*?)\s+TC:/);return e?e[1].trim():""})(),tc:e.customer_tc||(()=>{const e=o.match(/TC:\s*(\d+)/);return e?e[1]:""})(),phone:e.customer_phone||(()=>{const e=o.match(/Tel:\s*(.+?)$/);return e?e[1].trim():""})(),address:e.customer_address||(()=>{const e=o.match(/TC:\s*\d+\s+([^]*?)\s+[^\/]+\/[^\/]+\s+Tel:/);return e?e[1].trim():""})(),cityDistrict:e.customer_city&&e.customer_district?`${e.customer_district}/${e.customer_city}`:(()=>{const e=o.match(/([^\/\s]+\/[^\/\s]+)\s+Tel:/);return e?e[1].trim():""})()});var o;const c=n.reduce(((e,t)=>e+(t.amount+(t.discount||0))),0),d=e.total_amount-c;return`\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="utf-8">\n      <title>Baskı PDF - ${e.order_number}</title>\n      <style>\n        @page {\n          size: ${s};\n          margin: 10mm 10mm 15mm;\n\n          @bottom-left {\n            content: "Baltacı Kumaşcılık A.Ş";\n            font-family: Arial, sans-serif;\n            font-size: 13px;\n            color: #555;\n          }\n          @bottom-right {\n            content: "Sayfa " counter(page) " / " counter(pages);\n            font-family: Arial, sans-serif;\n            font-size: 9px;\n            color: #555;\n          }\n        }\n        \n        * {\n          margin: 0;\n          padding: 0;\n          box-sizing: border-box;\n        }\n        \n        body {\n          font-family: Arial, sans-serif;\n          font-size: ${"A3"===s?"11px":"9px"};\n          line-height: 1.3;\n          color: #000;\n          background: #fff;\n        }\n        \n        .print-pdf-container {\n          width: 100%;\n          height: 100%;\n        }\n        \n        .product-page-title {\n          text-align: center;\n          font-size: ${"A3"===s?"18px":"16px"};\n          font-weight: bold;\n          margin: 10px 0;\n          padding: 6px;\n          background-color: #f0f0f0;\n          border-radius: 4px;\n        }\n        \n        .columns-layout {\n          display: flex;\n          gap: 15px;\n          height: 100%;\n        }\n        \n        .left-column {\n          flex: 0 0 ${"A3"===s?"30%":"40%"};\n          max-width: ${"A3"===s?"30%":"40%"};\n        }\n        \n        .right-column {\n          flex: 1;\n          max-width: ${"A3"===s?"70%":"60%"};\n        }\n          .print-visuals {\n          margin-bottom: 15px;\n        }\n        \n        .visual-container {\n          margin-bottom: 12px;\n          border: 1px solid #ddd;\n          border-radius: 6px;\n          overflow: hidden;\n        }\n\n        .visual-container h3 {\n          font-size: ${"A3"===s?"11px":"9px"};\n          font-weight: bold;\n          text-align: center;\n          color: #fff;\n          background-color: #333;\n          padding: 4px;\n          margin: 0;\n        }        \n          .visual-placeholder {\n          width: 100%;\n          height: ${"A3"===s||"A4"===s?"250px":"200px"};\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background-color: #f9f9f9;\n          position: relative;\n        }\n        \n        .visual-placeholder img {\n          width: 100%;\n          height: 100%;\n          object-fit: fill;\n        }\n        \n        .no-visual {\n          color: #999;\n          font-style: italic;\n          font-size: 9px;\n          text-align: center;\n        }\n        \n        .order-items-list {\n          margin-top: 12px;\n          border: 1px solid #333;\n          border-radius: 6px;\n          overflow: hidden;\n        }\n        \n        .order-items-list h3 {\n          font-size: ${"A3"===s?"14px":"12px"};\n          font-weight: bold;\n          color: #fff;\n          background-color: #333;\n          padding: 6px;\n          margin: 0;\n          text-align: center;\n        }\n        \n        .order-items-content {\n          padding: ${"A3"===s?"12px":"10px"};\n          background-color: #f9f9f9;\n        }\n        \n        .order-items-content-grid {\n          padding: ${"A3"===s?"12px":"10px"};\n          background-color: #f9f9f9;\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 8px;\n        }\n        \n        .order-item-line {\n          font-size: ${"A3"===s?"12px":"11px"};\n          padding: 8px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n          background-color: #fff;\n          color: #333;\n        }\n        \n        .order-item-line .item-name {\n          font-weight: bold;\n          color: #1a1a1a;\n          margin-bottom: 2px;\n        }\n        \n        .order-item-line .item-detail {\n          font-size: ${"A3"===s?"10px":"9px"};\n          color: #666;\n          line-height: 1.3;\n        }\n        \n        .customer-notes-simple {\n          margin-top: 10px;\n          border: 1px solid #f39c12;\n          border-radius: 6px;\n          overflow: hidden;\n        }\n        \n        .customer-notes-simple h3 {\n          font-size: ${"A3"===s?"14px":"12px"};\n          font-weight: bold;\n          color: #fff;\n          background-color: #f39c12;\n          padding: 6px;\n          margin: 0;\n          text-align: center;\n        }\n        \n        .notes-content {\n          padding: 10px;\n          font-size: ${"A3"===s?"11px":"10px"};\n          line-height: 1.4;\n          background-color: #fff9e6;\n          color: #333;\n        }\n          .product-summary {\n          border: 1px solid #333;\n          border-radius: 6px;\n          overflow: hidden;\n          text-align: center;\n        }\n\n          .product-summary h3 {\n          font-size: ${"A3"===s?"18px":"16px"};\n          font-weight: bold;\n          color: #fff;\n          background-color: #333;\n          padding: 6px;\n          margin: 0;\n          text-align: center;\n        }\n        \n        .product-details {\n          padding: 8px;\n          background-color: #fff;\n        }        .product-item {\n          margin: 6px 0;\n          padding: 6px;\n          border-bottom: 1px dotted #ccc;\n          font-size: ${"A3"===s?"12px":"11px"};\n          background-color: #f9f9f9;\n          border-radius: 4px;\n        }\n        \n        .product-item:last-child {\n          border-bottom: none;\n          text-align: center;\n        }\n        \n        .product-item-title {\n          font-size: ${"A3"===s?"18px":"16px"};\n          font-weight: bold;\n          color: #333;\n          margin-bottom: 4px;\n          padding-bottom: 3px;\n          border-bottom: 1px solid #eee;\n        }\n        \n        .product-item-detail {\n          display: flex;\n          margin: 3px 0;\n          padding: 2px 0;\n          border-bottom: 1px dashed #eee;\n          background-color: #fff;\n          border-radius: 3px;\n          padding: 3px;\n        }\n        \n        .product-item-detail:last-child {\n          border-bottom: none;\n        }\n        \n        .product-item-detail div {\n          flex: 1;\n          padding: 2px;\n          font-size: ${"A3"===s?"12px":"11px"};\n        }          \n          .print-details-section \n        {\n          border: 1px solid #333;\n          border-radius: 6px;\n          overflow: hidden;\n          margin-top: 15px;\n        }          \n          \n        .print-details-section h3 {\n          font-size: ${"A3"===s?"18px":"16px"};\n          font-weight: bold;\n          color: #fff;\n          background-color: #333;\n          padding: 6px;\n          margin: 0;\n          text-align: center;\n        }\n        \n        .print-details-table {\n          width: 100%;\n          border-collapse: collapse;\n          background-color: #fff;\n        }\n          .print-details-table th,\n        .print-details-table td {\n          border: 1px solid #ddd;\n          padding: ${"A3"===s?"4px 3px":"3px 2px"};\n          text-align: center;\n          font-size: ${"A3"===s?"11px":"9px"};\n        }\n        \n        .print-details-table th {\n          background-color: #f8f8f8;\n          font-weight: bold;\n          color: #333;\n          font-size: ${"A3"===s?"10px":"8px"};\n        }\n        \n        .type-cell {\n          font-weight: bold;\n          background-color: #f0f0f0;\n        }\n        \n        .goalkeeper-row {\n          background-color: #fff2f2;\n        }\n        \n        .goalkeeper-row .type-cell {\n          background-color: #ffe6e6;\n          color: #d32f2f;\n          font-weight: bold;\n        }\n\n        .product-header-row {\n          background-color: #2c3e50;\n        }\n        \n        .product-header-cell {\n          padding: 8px 6px;\n          text-align: center;\n          color: #fff;\n          font-size: ${"A3"===s?"16px":"14px"};\n          font-weight: bold;\n          border: 1px solid #34495e;\n        }\n        \n        .type-header-row {\n          background-color: #ecf0f1;\n        }\n        \n        .type-header-cell {\n          padding: 6px;\n          text-align: center;\n          font-size: ${"A3"===s?"14px":"12px"};\n          font-weight: bold;\n          border: 1px solid #bdc3c7;\n        }\n        \n        .kaleci-header {\n          background-color: #ffebee;\n          color: #c62828;\n        }\n        \n        .oyuncu-header {\n          background-color: #e3f2fd;\n          color: #1565c0;\n        }\n        \n        .collar-color-row {\n          border-top: 2px solid #ddd;\n        }\n        \n        .collar-color-cell {\n          font-size: ${"A3"===s?"14px":"12px"};\n          font-weight: bold;\n          text-align: center;\n          padding: 8px;\n          background-color: #f8f9fa;\n          border: 1px solid #ddd;\n        }\n        \n        .collar-color-section {\n          margin-top: 15px;\n        }\n        \n        .collar-color-display {\n          font-size: ${"A3"===s?"24px":"20px"};\n          font-weight: bold;\n          text-align: center;\n          padding: 15px;\n          background-color: #f8f9fa;\n          border: 2px solid #ddd;\n          border-radius: 8px;\n          margin: 0;\n        }\n          .no-print-details {\n          padding: 12px;\n          text-align: center;\n          color: #999;\n          font-style: italic;\n          background-color: #f9f9f9;\n        }\n        \n        .page-break {\n          page-break-before: always;\n          break-before: page;\n        }\n        \n        .page-content {\n          position: relative;\n        }\n        \n        .customer-info-page {\n          padding: 0;\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n          margin-top: 20px;\n        }\n        \n        .shipping-label {\n          padding: 15px;\n          background-color: #fff;\n        }\n\n        .shipping-label-header {\n          font-size: ${"A3"===s?"20px":"16px"};\n          font-weight: bold;\n          text-align: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1.5px solid #000;\n          color: #000;\n          text-transform: uppercase;\n          letter-spacing: 1px;\n        }\n        \n        .customer-info-table {\n          width: 100%;\n          border-collapse: collapse;\n        }\n          .customer-info-table .label-cell {\n          width: 30%;\n          padding: 12px;\n          background-color: #f8f8f8;\n          font-weight: bold;\n          border: 1px solid #ccc;\n          vertical-align: top;\n          color: #333;\n          font-size: ${"A3"===s?"14px":"12px"};\n        }\n        \n        .customer-info-table .value-cell {\n          padding: 12px;\n          border: 1px solid #ccc;\n          vertical-align: top;\n          background-color: #fff;\n          font-size: ${"A3"===s?"14px":"12px"};\n          font-weight: bold;\n        }\n\n        .customer-info-table .total-row td {\n          background-color: #fff9e6;\n          font-weight: bold;\n        }\n\n        .customer-info-table .total-row .value-cell {\n          text-align: right;\n          color: #d9534f;\n          font-size: ${"A3"===s?"16px":"14px"};\n        }\n        \n        @media print {\n          body {\n            print-color-adjust: exact;\n            -webkit-print-color-adjust: exact;\n          }\n          \n          .page-content {\n            break-inside: avoid;\n            page-break-inside: avoid;\n          }\n          \n          .page-break {\n            page-break-before: always;\n            break-before: page;\n            display: block;\n            height: 0;\n          }\n          \n          .customer-info-page {\n            page-break-before: always;\n            break-before: page;\n          }\n          \n          .customer-info-section {\n            break-inside: avoid;\n            page-break-inside: avoid;\n          }\n        }\n\n        .product-item-detail-grid {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 4px;\n          padding: 8px;\n        }\n\n        .product-item-detail-grid-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 4px;\n          border: 1px solid #e0e0e0;\n          border-radius: 4px;\n          background-color: #ffffff;\n          font-size: ${"A3"===s?"11px":"9px"};\n          font-weight: 500;\n        }\n\n        .product-item-detail-grid-item span {\n          padding: 0 3px;\n          white-space: nowrap;\n        }\n      </style>\n    </head>\n    <body>\n      ${(()=>{const n=(e,t)=>{if(!e||!e.includes("Adet -"))return null;const r=e.split(",").map((e=>e.trim())),a=[];for(const n of r){const e=n.match(/^(\d+)\s+Adet\s+-\s+(.+?)\s+-\s+(.+)$/);e&&a.push({quantity:parseInt(e[1]),color:e[2].trim(),["goalkeeper"===t?"size":"type"]:e[3].trim()})}return a.length>0?a:null},o=e=>n(e,"shorts"),c=e=>n(e,"socks"),u=e=>{var t;if(!e||!e.includes("Oyuncu:"))return null;const r=null==(t=e.split("Oyuncu:")[1])?void 0:t.split("Kaleci:")[0];return r?n(r.trim(),"shorts"):null},m=e=>{var t;if(!e||!e.includes("Oyuncu:"))return null;const r=null==(t=e.split("Oyuncu:")[1])?void 0:t.split("Kaleci:")[0];return r?n(r.trim(),"socks"):null},h=e=>{if(!e||!e.includes("Kaleci:"))return null;const t=e.split("Kaleci:")[1];return t?n(t.trim(),"shorts"):null},p=e=>{if(!e||!e.includes("Kaleci:"))return null;const t=e.split("Kaleci:")[1];return t?n(t.trim(),"socks"):null},x=t.reduce(((e,t)=>{const r=`${t.product_name}-${t.color||"no-color"}-${t.notes||"no-notes"}`;return e[r]||(e[r]={...t,sizes:[],totalQuantity:0,totalPrice:0}),e[r].sizes.push({size:t.size,quantity:t.quantity}),e[r].totalQuantity+=t.quantity,e[r].totalPrice+=t.total_price,e}),{}),g=t.reduce(((e,t)=>{const r=t.product_name||"Unknown Product";return e[r]||(e[r]=[]),e[r].push(t),e}),{}),f=Object.keys(g);var y;return`\n      <div class="print-pdf-container">\n        ${f.map(((t,l)=>{const d=g[t];let y="",v="";const b=r.filter((e=>{const r=(e=>{if(!e)return null;try{const t=e.substring(e.lastIndexOf("/")+1).split("_");if(t.length>2){const e=t.slice(2).join("_");return decodeURIComponent(e).trim()}return null}catch(die){return null}})(e.file_url||"");return!(!r||t.trim().toLowerCase()!==r.trim().toLowerCase())||!r&&0===l}));if(b.length>0){const e=b.find((e=>{var t,r,a,n;return(null==(r=null==(t=e.print_regions)?void 0:t.name)?void 0:r.toLowerCase().includes("ön"))||(null==(n=null==(a=e.print_regions)?void 0:a.name)?void 0:n.toLowerCase().includes("front"))})),t=b.find((e=>{var t,r,a,n;return(null==(r=null==(t=e.print_regions)?void 0:t.name)?void 0:r.toLowerCase().includes("arka"))||(null==(n=null==(a=e.print_regions)?void 0:a.name)?void 0:n.toLowerCase().includes("back"))}));y=(null==e?void 0:e.file_url)||"",v=(null==t?void 0:t.file_url)||""}const j=b.map((e=>{var t;return(null==(t=e.print_regions)?void 0:t.name)||null})).filter((e=>e)).map((e=>`<div class="order-item-line">${e}</div>`)).join(""),k=a.filter((e=>e.productName===t||!e.productName));let w="";if(k.length>0){const e={[t]:{kaleci:k.filter((e=>"Kaleci"===e.type)),oyuncu:k.filter((e=>"Kaleci"!==e.type))}};w=Object.entries(e).map((([e,t])=>{let r=`\n            <tr class="product-header-row">\n              <td colspan="5" class="product-header-cell">\n                <strong>Ürün: ${e}</strong>\n              </td>\n            </tr>\n          `;if(t.kaleci.length>0){r+='\n              <tr class="type-header-row">\n                <td colspan="5" class="type-header-cell kaleci-header">Kaleci</td>\n              </tr>\n            ';const e=new Map;t.kaleci.forEach((t=>{if(!(t.playerName&&"-"!==t.playerName||t.jerseyNumber&&"-"!==t.jerseyNumber)){const r=`${t.type||"Kaleci"}-${t.size||"-"}-${t.namePosition||"above"}`;e.has(r)?e.get(r).count++:e.set(r,{count:1,detail:t})}else r+=`\n                  <tr class="goalkeeper-row">\n                    <td class="text-center">${t.type}</td>\n                    <td>${t.playerName||"-"}</td>\n                    <td class="text-center">${t.jerseyNumber||"-"}</td>\n                    <td class="text-center">${t.size||"-"}</td>\n                    <td class="text-center">${"above"===t.namePosition?"Numaranın Üstünde":"below"===t.namePosition?"Numaranın Altında":"-"}</td>\n                  </tr>\n                `})),e.forEach((({count:e,detail:t})=>{const a=e>1?`${e} Adet ${t.type||"Kaleci"}`:t.type||"Kaleci";r+=`\n                <tr class="goalkeeper-row">\n                  <td class="text-center">${a}</td>\n                  <td>-</td>\n                  <td class="text-center">-</td>\n                  <td class="text-center">${t.size||"-"}</td>\n                  <td class="text-center">${"above"===t.namePosition?"Numaranın Üstünde":"below"===t.namePosition?"Numaranın Altında":"-"}</td>\n                </tr>\n              `}))}if(t.oyuncu.length>0){r+='\n              <tr class="type-header-row">\n                <td colspan="5" class="type-header-cell oyuncu-header">Oyuncular</td>\n              </tr>\n            ';const e=new Map;t.oyuncu.forEach((t=>{if(!(t.playerName&&"-"!==t.playerName||t.jerseyNumber&&"-"!==t.jerseyNumber)){const r=`${t.type||"Oyuncu"}-${t.size||"-"}-${t.namePosition||"above"}`;e.has(r)?e.get(r).count++:e.set(r,{count:1,detail:t})}else r+=`\n                  <tr>\n                    <td class="text-center">${t.type}</td>\n                    <td>${t.playerName||"-"}</td>\n                    <td class="text-center">${t.jerseyNumber||"-"}</td>\n                    <td class="text-center">${t.size||"-"}</td>\n                    <td class="text-center">${"above"===t.namePosition?"Numaranın Üstünde":"below"===t.namePosition?"Numaranın Altında":"-"}</td>\n                  </tr>\n                `})),e.forEach((({count:e,detail:t})=>{const a=e>1?`${e} Adet ${t.type||"Oyuncu"}`:t.type||"Oyuncu";r+=`\n                <tr>\n                  <td class="text-center">${a}</td>\n                  <td>-</td>\n                  <td class="text-center">-</td>\n                  <td class="text-center">${t.size||"-"}</td>\n                  <td class="text-center">${"above"===t.namePosition?"Numaranın Üstünde":"below"===t.namePosition?"Numaranın Altında":"-"}</td>\n                </tr>\n              `}))}return r})).join("")}const N=(()=>{const e={},t={socks:[],shorts:[],goalkeeper:[],jerseys:[],other:[]};for(const o of d){switch(o.item_type){case"socks":t.socks.push(o);break;case"shorts":t.shorts.push(o);break;case"goalkeeper":t.goalkeeper.push(o);break;default:o.product_name&&(o.product_name.toLowerCase().includes("forma")||o.product_name.toLowerCase().includes("forması"))?t.jerseys.push(o):t.other.push(o)}}let r=0,a=0;if(t.socks.length>0){const n=new Set;for(const e of t.socks)if(!(e.quantity<=0))if(e.notes){if(n.has(e.notes))continue;n.add(e.notes);const t=m(e.notes);if(t){r+=t.reduce(((e,t)=>e+t.quantity),0)}const s=p(e.notes);if(s){a+=s.reduce(((e,t)=>e+t.quantity),0)}const i=c(e.notes);if(i&&!t&&!s){const t=i.reduce(((e,t)=>e+t.quantity),0);e.notes.toLowerCase().includes("kaleci")?a+=t:r+=t}}else e.quantity>0&&(r+=e.quantity);if(0===r&&0===a&&t.socks.length>0){r=t.socks[0].quantity}r>0&&(e["Oyuncu Çorap"]=r),a>0&&(e["Kaleci Çorap"]=a)}let n=0,s=0;if(t.shorts.length>0){const r=new Set;for(const e of t.shorts)if(!(e.quantity<=0))if(e.notes){if(r.has(e.notes))continue;r.add(e.notes);const t=u(e.notes);if(t){n+=t.reduce(((e,t)=>e+t.quantity),0)}const a=h(e.notes);if(a){s+=a.reduce(((e,t)=>e+t.quantity),0)}const i=o(e.notes);if(i&&!t&&!a){const t=i.reduce(((e,t)=>e+t.quantity),0);e.notes.toLowerCase().includes("kaleci")?s+=t:n+=t}}else e.quantity>0&&(n+=e.quantity);n>0&&(e["Oyuncu Şort"]=n),s>0&&(e["Kaleci Şort"]=s)}const i={};for(const o of t.jerseys){if(o.quantity<=0)continue;const e=o.product_name||"Oyuncu Forması";i[e]=(i[e]||0)+o.quantity}Object.entries(i).forEach((([t,r])=>{e[t]=r}));let l=0;for(const o of t.goalkeeper)o.quantity<=0||(l+=o.quantity);l>0&&(e["Kaleci Forması"]=l);for(const o of t.other){if(o.quantity<=0)continue;const t=o.product_name||"Diğer";e[t]=(e[t]||0)+o.quantity}return Object.entries(e).map((([e,t])=>`\n          <div class="order-item-line">\n            <div class="item-name">${t} Adet ${e}</div>\n          </div>\n        `)).join("")})(),_=Object.values(x).filter((e=>e.product_name===t)).map((e=>{let t=null,r=null,a=null,s=null,i=null,l=null,d=null;var x;"goalkeeper"===e.item_type?(x=e.notes,t=n(x,"goalkeeper")):"shorts"===e.item_type?e.notes&&(e.notes.includes("Oyuncu:")||e.notes.includes("Kaleci:"))?(s=u(e.notes),l=h(e.notes)):r=o(e.notes):"socks"===e.item_type&&(e.notes&&(e.notes.includes("Oyuncu:")||e.notes.includes("Kaleci:"))?(i=m(e.notes),d=p(e.notes)):a=c(e.notes));const g="goalkeeper"===e.item_type||null!==t,f="shorts"===e.item_type||null!==r||null!==s||null!==l,y="socks"===e.item_type||null!==a||null!==i||null!==d,v=[];if(g&&t){const e=t.map((e=>`\n          <div class="product-item-detail-grid-item">\n            <span>${e.quantity} Adet</span>\n            <span>${e.color}</span>\n            <span>${e.size}</span>\n          </div>\n        `)).join("");v.push({order:3,html:`\n            <div class="product-item">\n              <div class="product-item-title">Kaleci Forması</div>\n              <div class="product-item-detail-grid">${e}</div>\n            </div>\n          `})}else if(f){if(s){const e=s.map((e=>`\n            <div class="product-item-detail-grid-item">\n              <span>${e.quantity} Adet</span>\n              <span>${e.color}</span>\n              <span>Boy: ${e.type}</span>\n            </div>\n          `)).join("");v.push({order:2,html:`\n              <div class="product-item">\n                <div class="product-item-title">Oyuncu Şort</div>\n                <div class="product-item-detail-grid">${e}</div>\n              </div>\n            `})}if(l){const e=l.map((e=>`\n            <div class="product-item-detail-grid-item">\n              <span>${e.quantity} Adet</span>\n              <span>${e.color}</span>\n              <span>Boy: ${e.type}</span>\n            </div>\n          `)).join(""),t=l[0],r=t&&t.type&&t.type.includes("Uzun")?"Kaleci Uzun Şort":"Kaleci Şort";v.push({order:4,html:`\n              <div class="product-item">\n                <div class="product-item-title">${r}</div>\n                <div class="product-item-detail-grid">${e}</div>\n              </div>\n            `})}if(r){const e=r.map((e=>`\n            <div class="product-item-detail-grid-item">\n              <span>${e.quantity} Adet</span>\n              <span>${e.color}</span>\n              <span>Boy: ${e.type}</span>\n            </div>\n          `)).join("");v.push({order:2,html:`\n              <div class="product-item">\n                <div class="product-item-title">Şort</div>\n                <div class="product-item-detail-grid">${e}</div>\n              </div>\n            `})}}else if(y){if(i){const e=i.map((e=>`\n            <div class="product-item-detail-grid-item">\n              <span>${e.quantity} Adet</span>\n              <span>${e.color}</span>\n              <span>${e.type}</span>\n            </div>\n          `)).join("");v.push({order:5,html:`\n              <div class="product-item">\n                <div class="product-item-title">Oyuncu Çorap</div>\n                <div class="product-item-detail-grid">${e}</div>\n              </div>\n            `})}if(d){const e=d.map((e=>`\n            <div class="product-item-detail-grid-item">\n              <span>${e.quantity} Adet</span>\n              <span>${e.color}</span>\n              <span>${e.type}</span>\n            </div>\n          `)).join("");v.push({order:6,html:`\n              <div class="product-item">\n                <div class="product-item-title">Kaleci Çorap</div>\n                <div class="product-item-detail-grid">${e}</div>\n              </div>\n            `})}if(a){const e=a.map((e=>`\n            <div class="product-item-detail-grid-item">\n              <span>${e.quantity} Adet</span>\n              <span>${e.color}</span>\n              <span>${e.type}</span>\n            </div>\n          `)).join("");v.push({order:5,html:`\n              <div class="product-item">\n                <div class="product-item-title">Çorap</div>\n                <div class="product-item-detail-grid">${e}</div>\n              </div>\n            `})}}else{const t=e.sizes.filter((e=>e.quantity>0)).map((t=>`\n            <div class="product-item-detail-grid-item">\n              <span>${t.quantity} Adet</span>\n              <span>${e.color||""}</span>\n              <span>${t.size||""}</span>\n            </div>\n          `)).join(""),r=t.length>0?`<div class="product-item-detail-grid">${t}</div>`:`\n          <div class="product-item-detail">\n            <div>${e.totalQuantity} adet</div>\n            <div>${e.color||"-"}</div>\n            <div>${e.size||"-"}</div>\n          </div>\n        `;v.push({order:1,html:`\n        <div class="product-item">\n              <div class="product-item-title">${e.product_name}</div>\n          ${r}\n        </div>\n          `})}return v})).flat().sort(((e,t)=>e.order-t.order)).map((e=>e.html)).join("");return`\n        <div class="page-content">\n          <div class="columns-layout">\n            <div class="left-column">\n              \x3c!-- Visuals Section --\x3e\n              <div class="print-visuals">\n                <div class="visual-container">\n                  <h3>ÖN BASKI GÖRSELİ</h3>\n                  <div class="visual-placeholder">\n                    ${y?`<img src="${y}" alt="Ön Baskı" />`:'<span class="no-visual">Görsel yüklenmemiş</span>'}\n                  </div>\n                </div>\n                \n                <div class="visual-container">\n                  <h3>ARKA BASKI GÖRSELİ</h3>\n                  <div class="visual-placeholder">\n                    ${v?`<img src="${v}" alt="Arka Baskı" />`:'<span class="no-visual">Görsel yüklenmemiş</span>'}\n                  </div>\n                </div>\n              </div>\n              \n              \x3c!-- Order Items List --\x3e\n              <div class="order-items-list">\n                <h3>BASKI BÖLGELERİ</h3>\n                <div class="order-items-content${"A3"===s?"-grid":""}">\n                  ${j||'<div class="order-item-line">Baskı bölgesi seçilmemiş</div>'}\n                </div>\n              </div>\n              \n              \x3c!-- Product Items List --\x3e\n              <div class="order-items-list">\n                <h3>ÜRÜN ADETLERİ</h3>\n                <div class="order-items-content-grid">\n                  ${N||'<div class="order-item-line">Ürün bilgisi bulunamadı</div>'}\n                </div>\n              </div>\n              \n              \x3c!-- Customer Notes --\x3e\n              ${e.notes&&`\n              <div class="customer-notes-simple">\n                <h3>MÜŞTERİ NOTLARI</h3>\n                <div class="notes-content">\n                  ${e.notes}\n                </div>\n              </div>\n              `}\n            </div>\n            \n            <div class="right-column">\n              \x3c!-- Collar Color Section --\x3e\n              ${i?`\n              <div class="collar-color-section">\n                <div class="collar-color-display" style="color: ${S=i,{"kırmızı":"red",mavi:"blue","yeşil":"green","sarı":"yellow",siyah:"black",beyaz:"white",turuncu:"orange",mor:"purple",pembe:"pink",gri:"gray",kahverengi:"brown",lacivert:"navy",turkuaz:"turquoise","altın":"gold","gümüş":"silver",bordo:"maroon","füme":"gray","koyu mavi":"darkblue","açık mavi":"lightblue","koyu yeşil":"darkgreen","açık yeşil":"lightgreen"}[S.toLowerCase()]||S.toLowerCase()}; font-size: ${"A3"===s?"24px":"20px"}; font-weight: bold; text-align: center; padding: 15px; background-color: #f8f9fa; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 15px;">\n                  ${i} Yaka\n                </div>\n              </div>\n              `:""}\n              \n              \x3c!-- Product Summary --\x3e\n              <div class="product-summary">\n                <h2>${_||'<div class="product-item">Ürün bilgisi bulunamadı</div>'}</h2>\n              </div>\n              \n              \x3c!-- Print Details Table --\x3e\n              ${k.length>0?`\n              <div class="print-details-section">\n                <h3>BASKI DETAYLARI (İSİM/NUMARA)</h3>\n                <table class="print-details-table">\n                  <thead>\n                    <tr>\n                      <th>Tip</th>\n                      <th>Oyuncu İsmi</th>\n                      <th>Numara</th>\n                      <th>Beden</th>\n                      <th>İsim Pozisyonu</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    ${w}\n                  </tbody>\n                </table>\n              </div>\n              `:'\n              <div class="print-details-section">\n                <h3>BASKI DETAYLARI (İSİM/NUMARA)</h3>\n                <div class="no-print-details">İsim/numara baskısı eklenmemiş</div>\n              </div>\n              '}\n            </div>\n          </div>\n        </div>\n        ${l<f.length-1?'<div class="page-break"></div>':""}\n      `;var S})).join("")}\n        ${`\n        <div class="customer-info-page">\n          <div class="shipping-label">\n            <div class="shipping-label-header">MÜŞTERİ BİLGİLERİ</div>\n            <div class="shipping-label-body">\n              <table class="customer-info-table">\n                ${l.name&&`\n                <tr>\n                  <td class="label-cell">Ad Soyad:</td>\n                  <td class="value-cell">${l.name}</td>\n                </tr>\n                `}\n                ${l.tc&&`\n                <tr>\n                  <td class="label-cell">TC No:</td>\n                  <td class="value-cell">${l.tc}</td>\n                </tr>\n                `}\n                ${l.phone&&`\n                <tr>\n                  <td class="label-cell">Telefon:</td>\n                  <td class="value-cell">${l.phone}</td>\n                </tr>\n                `}\n                ${l.address&&`\n                <tr>\n                  <td class="label-cell">Adres:</td>\n                  <td class="value-cell">${l.address}</td>\n                </tr>\n                `}\n                ${l.cityDistrict&&`\n                <tr>\n                  <td class="label-cell">Şehir/İlçe:</td>\n                  <td class="value-cell">${l.cityDistrict}</td>\n                </tr>\n                `}\n                <tr class="total-row">\n                  <td class="label-cell">Ödenecek Tutar:</td>\n                  <td class="value-cell">${y=d,new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(y)}</td>\n                </tr>\n              </table>\n            </div>\n          </div>\n        </div>\n    `}\n      </div>\n    `})()}\n    </body>\n    </html>\n  `},Bse={yelek:"Yelek","şort":"Şort","çorap":"Çorap",kaleci:"Kaleci Forması","yağmurluk":"Yağmurluk",mont:"Mont",sweatshirt:"Sweatshirt","t-shirt":"T-Shirt",polo:"Polo","eşofman":"Eşofman","şal":"Şal",bere:"Bere",eldiven:"Eldiven","atkı":"Atkı",kemer:"Kemer","çanta":"Çanta","ayakkabı":"Ayakkabı",terlik:"Terlik","şapka":"Şapka",kask:"Kask",maske:"Maske","gözlük":"Gözlük",forma:"Forma"},Lse="text-xs bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded text-blue-800 dark:text-blue-200 font-medium",qse="text-xs bg-green-100 dark:bg-green-800 px-2 py-1 rounded text-green-800 dark:text-green-200 font-medium",$se="text-xs bg-purple-100 dark:bg-purple-800 px-2 py-1 rounded text-purple-800 dark:text-purple-200 font-medium",Kse=e=>{const t=e.toLowerCase();for(const[r,a]of Object.entries(Bse))if(t.includes(r))return a;return e},Use=e=>({beyaz:"#f3f4f6",siyah:"#1f2937","kırmızı":"#ef4444",mavi:"#3b82f6"}[e.toLowerCase()]||"#6b7280"),Hse=(e,t)=>{if(!e||!e.includes("Adet -"))return null;const r=e.split(",").map((e=>e.trim())),a=[];for(const n of r){const e=n.match(/^(\d+)\s+Adet\s+-\s+(.+?)\s+-\s+(.+)$/);if(e){const r=parseInt(e[1]);r>0&&a.push({quantity:r,color:e[2].trim(),["goalkeeper"===t?"size":"type"]:e[3].trim()})}}return a.length>0?a:null},Yse=e=>e&&e.replace(/Renk:\s*[^\n]*\n?/g,"").trim()||null,Vse=e=>{const t=e.filter((e=>e.quantity>0)).reduce(((e,t)=>{const r=(e=>{if(e.notes&&e.notes.includes("Renk:")){const t=e.notes.match(/Renk:\s*(.+?)(?:\n|$)/);if(t)return t[1].trim()}if(("shorts"===e.item_type||"socks"===e.item_type||"goalkeeper"===e.item_type)&&e.notes){const t=e.notes.match(/(\d+)\s+Adet\s+-\s+(.+?)\s+-\s+(.+)/);if(t)return t[2].trim()}return e.color})(t),a=Yse(t.notes),n=`${t.product_name}-${r||"no-color"}-${t.item_type||"no-type"}-${a||"no-notes"}`;return e[n]||(e[n]={...t,color:r,notes:a,sizes:[],totalQuantity:0,totalPrice:0,ids:[]}),e[n].sizes.push({size:t.size,quantity:t.quantity,is_lined:t.is_lined,is_mesh:t.is_mesh}),e[n].totalQuantity+=t.quantity,e[n].totalPrice+=t.total_price,e[n].ids.push(t.id),e}),{});return Object.values(t)},Gse=(e,t)=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:Lse,children:e.size}),(e.is_lined??t.is_lined)&&i.jsx("span",{className:qse,children:"Astarlı"}),(e.is_mesh??t.is_mesh)&&i.jsx("span",{className:$se,children:"Fileli"})]}),Wse=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),Qse=({orderItems:e,isAdminView:t,orderId:r})=>{const{toast:a}=at(),n=$e(),s=Ke({mutationFn:async e=>{const{data:t,error:a}=await Wl.from("order_items").select("*").eq("id",e).single();if(a)throw a;const{data:n,error:s}=await Wl.from("orders").select("total_amount, subtotal").eq("id",r).single();if(s)throw s;const{error:i}=await Wl.from("order_items").delete().eq("id",e);if(i)throw i;const{error:l}=await Wl.from("orders").update({total_amount:Math.max(0,(n.total_amount||0)-t.total_price),subtotal:Math.max(0,(n.subtotal||0)-t.total_price)}).eq("id",r);if(l)throw l;return t},onSuccess:e=>{n.invalidateQueries({queryKey:["order-items",r]}),n.invalidateQueries({queryKey:["order-details",r]}),a({title:"Ürün silindi",description:`Ürün siparişten kaldırıldı. ₺${e.total_price} düşüldü.`})},onError:e=>{a({title:"Hata",description:e.message||"Ürün silinirken bir hata oluştu.",variant:"destructive"})}}),[l,o]=ze.useState(null),[c,d]=ze.useState({color:""}),[u,m]=ze.useState(!1),h=()=>{o(null),d({color:""})};return e&&0!==e.length?i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Ürün"}),i.jsx(M5,{children:"Adet"}),i.jsx(M5,{children:"Birim Fiyat"}),i.jsx(M5,{className:"text-right",children:"Toplam"}),t&&i.jsx(M5,{className:"text-center",children:"İşlemler"})]})}),i.jsx(E5,{children:Vse(e).map((e=>{let p=null,x=null,g=null,f=null,y=null,v=null,b=null;var j;"goalkeeper"===e.item_type?(j=e.notes,p=Hse(j,"goalkeeper")):"shorts"===e.item_type?e.notes&&(e.notes.includes("Oyuncu:")||e.notes.includes("Kaleci:"))?(f=(e=>{var t;if(!e||!e.includes("Oyuncu:"))return null;const r=null==(t=e.split("Oyuncu:")[1])?void 0:t.split("Kaleci:")[0];return r?Hse(r.trim(),"shorts"):null})(e.notes),v=(e=>{if(!e||!e.includes("Kaleci:"))return null;const t=e.split("Kaleci:")[1];return t?Hse(t.trim(),"shorts"):null})(e.notes)):x=(e=>Hse(e,"shorts"))(e.notes):"socks"===e.item_type&&(e.notes&&(e.notes.includes("Oyuncu:")||e.notes.includes("Kaleci:"))?(y=(e=>{var t;if(!e||!e.includes("Oyuncu:"))return null;const r=null==(t=e.split("Oyuncu:")[1])?void 0:t.split("Kaleci:")[0];return r?Hse(r.trim(),"socks"):null})(e.notes),b=(e=>{if(!e||!e.includes("Kaleci:"))return null;const t=e.split("Kaleci:")[1];return t?Hse(t.trim(),"socks"):null})(e.notes)):g=(e=>Hse(e,"socks"))(e.notes));const k="goalkeeper"===e.item_type||null!==p,w="shorts"===e.item_type||null!==x||null!==f||null!==v,N="socks"===e.item_type||null!==g||null!==y||null!==b,_=()=>k?"Kaleci Forması":w?"Şort":N?"Çorap":e.product_name;return i.jsxs(D5,{children:[i.jsx(z5,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:_()}),i.jsx("div",{className:"mt-3",children:k&&p?i.jsx("div",{className:"space-y-3",children:p.map(((t,r)=>i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:i.jsx(mn,{className:"h-4 w-4 text-white"})}),i.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Kaleci Forması"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ba,{className:"h-3 w-3 text-gray-500"}),i.jsxs("span",{className:"text-sm font-medium",children:[t.quantity," adet"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-current",style:{color:Use(t.color)}}),i.jsx("span",{className:"text-sm",children:t.color})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded text-blue-800 dark:text-blue-200 font-medium",children:t.size}),(t.is_lined??e.is_lined)&&i.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-800 px-2 py-1 rounded text-green-800 dark:text-green-200 font-medium",children:"Astarlı"}),(t.is_mesh??e.is_mesh)&&i.jsx("span",{className:"text-xs bg-purple-100 dark:bg-purple-800 px-2 py-1 rounded text-purple-800 dark:text-purple-200 font-medium",children:"Fileli"})]})]})]},r)))}):w&&(f||v||x)?i.jsxs("div",{className:"space-y-3",children:[f&&f.map(((e,t)=>i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:i.jsx(ba,{className:"h-4 w-4 text-white"})}),i.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Oyuncu Şort"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ba,{className:"h-3 w-3 text-gray-500"}),i.jsxs("span",{className:"text-sm font-medium",children:[e.quantity," adet"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-current",style:{color:Use(e.color)}}),i.jsx("span",{className:"text-sm",children:e.color})]}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded text-blue-800 dark:text-blue-200 font-medium",children:["Boy: ",e.type]})})]})]},`player-${t}`))),v&&v.map(((e,t)=>i.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 border border-orange-200 dark:border-orange-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:i.jsx(ba,{className:"h-4 w-4 text-white"})}),i.jsx("span",{className:"font-semibold text-orange-800 dark:text-orange-200",children:e.type.includes("Uzun")?"Kaleci Uzun Şort":"Kaleci Şort"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ba,{className:"h-3 w-3 text-gray-500"}),i.jsxs("span",{className:"text-sm font-medium",children:[e.quantity," adet"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-current",style:{color:Use(e.color)}}),i.jsx("span",{className:"text-sm",children:e.color})]}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsxs("span",{className:"text-xs bg-orange-100 dark:bg-orange-800 px-2 py-1 rounded text-orange-800 dark:text-orange-200 font-medium",children:["Boy: ",e.type]})})]})]},`goalkeeper-${t}`))),x&&x.map(((e,t)=>i.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-900/20 dark:to-slate-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-500 rounded-full flex items-center justify-center",children:i.jsx(ba,{className:"h-4 w-4 text-white"})}),i.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Şort"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ba,{className:"h-3 w-3 text-gray-500"}),i.jsxs("span",{className:"text-sm font-medium",children:[e.quantity," adet"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-current",style:{color:Use(e.color)}}),i.jsx("span",{className:"text-sm",children:e.color})]}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-medium",children:["Boy: ",e.type]})})]})]},`legacy-${t}`)))]}):N&&(y||b||g)?i.jsxs("div",{className:"space-y-3",children:[y&&y.map(((e,t)=>i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:i.jsx(ba,{className:"h-4 w-4 text-white"})}),i.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Oyuncu Çorap"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ba,{className:"h-3 w-3 text-gray-500"}),i.jsxs("span",{className:"text-sm font-medium",children:[e.quantity," adet"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-current",style:{color:Use(e.color)}}),i.jsx("span",{className:"text-sm",children:e.color})]}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded text-blue-800 dark:text-blue-200 font-medium",children:e.type})})]})]},`player-${t}`))),b&&b.map(((e,t)=>i.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 border border-orange-200 dark:border-orange-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:i.jsx(ba,{className:"h-4 w-4 text-white"})}),i.jsx("span",{className:"font-semibold text-orange-800 dark:text-orange-200",children:"Kaleci Çorap"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ba,{className:"h-3 w-3 text-gray-500"}),i.jsxs("span",{className:"text-sm font-medium",children:[e.quantity," adet"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-current",style:{color:Use(e.color)}}),i.jsx("span",{className:"text-sm",children:e.color})]}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("span",{className:"text-xs bg-orange-100 dark:bg-orange-800 px-2 py-1 rounded text-orange-800 dark:text-orange-200 font-medium",children:e.type})})]})]},`goalkeeper-${t}`))),g&&g.map(((e,t)=>i.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-900/20 dark:to-slate-900/20 border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-500 rounded-full flex items-center justify-center",children:i.jsx(ba,{className:"h-4 w-4 text-white"})}),i.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Çorap"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ba,{className:"h-3 w-3 text-gray-500"}),i.jsxs("span",{className:"text-sm font-medium",children:[e.quantity," adet"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-current",style:{color:Use(e.color)}}),i.jsx("span",{className:"text-sm",children:e.color})]}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-medium",children:e.type})})]})]},`legacy-${t}`)))]}):i.jsx("div",{className:"space-y-3",children:e.sizes.map(((t,r)=>i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:i.jsx(ba,{className:"h-4 w-4 text-white"})}),i.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200",children:Kse(_())})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ba,{className:"h-3 w-3 text-gray-500"}),i.jsxs("span",{className:"text-sm font-medium",children:[t.quantity," adet"]})]}),e.color&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-current",style:{color:Use(e.color)}}),i.jsx("span",{className:"text-sm",children:e.color})]}),Gse(t,e)]})]},r)))})}),e.notes&&!k&&!w&&!N&&i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:e.notes})]})}),i.jsx(z5,{children:k&&p?p.reduce(((e,t)=>e+t.quantity),0):w&&(f||v||x)?(f?f.reduce(((e,t)=>e+t.quantity),0):0)+(v?v.reduce(((e,t)=>e+t.quantity),0):0)+(x?x.reduce(((e,t)=>e+t.quantity),0):0):N&&(y||b||g)?(y?y.reduce(((e,t)=>e+t.quantity),0):0)+(b?b.reduce(((e,t)=>e+t.quantity),0):0)+(g?g.reduce(((e,t)=>e+t.quantity),0):0):e.totalQuantity}),i.jsx(z5,{children:Wse(e.unit_price)}),i.jsx(z5,{className:"text-right font-medium",children:Wse(e.totalPrice)}),t&&i.jsx(z5,{className:"text-center",children:e.color&&(l===e.ids.join("-")?i.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[i.jsx(co,{value:c.color,onChange:e=>d((t=>({...t,color:e.target.value}))),placeholder:"Renk yazın",className:"w-32"}),i.jsx(oo,{size:"sm",onClick:()=>(async e=>{try{m(!0);const{data:t,error:s}=await Wl.from("order_items").select("notes, item_type").in("id",e);if(s)throw s;const i=null==t?void 0:t[0];if(!i)throw new Error("Item not found");let l="";if("shorts"===i.item_type||"socks"===i.item_type||"goalkeeper"===i.item_type)l=i.notes?i.notes.replace(/(\d+\s+Adet\s+-\s+)(.+?)(\s+-\s+.+)/,`$1${c.color}$3`):`Renk: ${c.color}`;else{const e=i.notes?Yse(i.notes):null;l=e?`${e}\nRenk: ${c.color}`:`Renk: ${c.color}`}const{error:o}=await Wl.from("order_items").update({notes:l}).in("id",e);if(o)throw o;a({title:"Başarılı",description:"Ürün rengi güncellendi."}),n.invalidateQueries({queryKey:["order-items",r]}),n.invalidateQueries({queryKey:["order-details",r]}),h()}catch(t){a({title:"Hata",description:"Ürün güncellenirken bir hata oluştu.",variant:"destructive"})}finally{m(!1)}})(e.ids),disabled:u,className:"h-8 w-8 p-0",children:u?i.jsx(oa,{className:"h-3 w-3 animate-spin"}):i.jsx(Ra,{className:"h-3 w-3"})}),i.jsx(oo,{size:"sm",variant:"outline",onClick:h,disabled:u,className:"h-8 w-8 p-0",children:i.jsx(vn,{className:"h-3 w-3"})})]}):i.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[i.jsx(oo,{size:"sm",variant:"ghost",onClick:()=>{return t=e.ids,r=e.color,o(t.join("-")),void d({color:r||""});var t,r},className:"h-8 w-8 p-0",title:"Renk düzenle",children:i.jsx(Va,{className:"h-3 w-3"})}),i.jsx(oo,{size:"sm",variant:"ghost",onClick:()=>{confirm("Bu ürünü siparişten kaldırmak istediğinizden emin misiniz?")&&e.ids.forEach((e=>{s.mutate(e)}))},disabled:s.isPending,className:"h-8 w-8 p-0 text-red-600 hover:text-red-800",title:"Ürünü sil",children:s.isPending?i.jsx(oa,{className:"h-3 w-3 animate-spin"}):i.jsx(en,{className:"h-3 w-3"})})]}))})]},e.ids.join("-"))}))})]}):i.jsx("p",{className:"text-center py-4 text-gray-500",children:"Ürün bilgisi bulunamadı"})},Xse=({printRequests:e})=>e&&0!==e.length?i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5"}),"Baskı İstekleri"]})}),i.jsx(io,{children:i.jsx("div",{className:"space-y-4",children:e.map((e=>{var t,r,a,n;return i.jsx("div",{className:"border rounded-lg p-4",children:i.jsxs("div",{className:"flex gap-4",children:[e.file_url?i.jsxs(sd,{children:[i.jsx(id,{asChild:!0,children:i.jsx("div",{className:"flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",children:i.jsx("img",{src:e.file_url,alt:`${null==(t=e.print_regions)?void 0:t.name} tasarım`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 hover:border-blue-400 transition-colors"})})}),i.jsx(cd,{className:"max-w-3xl",children:i.jsx("img",{src:e.file_url,alt:`${null==(r=e.print_regions)?void 0:r.name} tasarım`,className:"w-full h-auto max-h-[80vh] object-contain"})})]}):i.jsx("div",{className:"flex-shrink-0 w-20 h-20 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:i.jsx(Wr,{className:"h-8 w-8 text-gray-400"})}),i.jsxs("div",{className:"flex-1 flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h5",{className:"font-medium",children:null==(a=e.print_regions)?void 0:a.name}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.content})]}),i.jsx("div",{className:"text-right ml-4",children:i.jsx("span",{className:"font-bold",children:(n=e.price,new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(n))})})]})]})},e.id)}))})})]}):null,Zse=({printDetails:e,orderId:t,sortBy:r,setSortBy:a})=>{const{toast:n}=at(),s=$e(),[l,o]=ze.useState(null),[c,d]=ze.useState({playerName:"",jerseyNumber:"",namePosition:"above",size:"",type:"Oyuncu"}),[u,m]=ze.useState(!1),h=()=>{o(null),d({playerName:"",jerseyNumber:"",namePosition:"above",size:"",type:"Oyuncu"})};return e&&0!==e.length?i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"h-5 w-5"}),"Baskı Detayları (İsim/Numara)"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(po,{htmlFor:"sort-select",className:"text-sm font-medium",children:"Sıralama:"}),i.jsxs(eO,{value:r,onValueChange:a,children:[i.jsx(rO,{id:"sort-select",className:"w-48",children:i.jsx(tO,{placeholder:"Sıralama seçin"})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"default",children:"Varsayılan (Kaleci önce, sonra beden)"}),i.jsx(iO,{value:"alphabetic",children:"Alfabetik (İsim)"}),i.jsx(iO,{value:"number",children:"Numaraya göre"}),i.jsx(iO,{value:"size",children:"Bedene göre"})]})]})]})]})}),i.jsxs(io,{children:[i.jsx("div",{className:"overflow-hidden rounded-lg border",children:i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"Ürün"}),i.jsx(M5,{className:"text-center",children:"Tip"}),i.jsx(M5,{className:"text-center",children:"Beden"}),i.jsx(M5,{children:"Oyuncu İsmi"}),i.jsx(M5,{className:"text-center",children:"Numara"}),i.jsx(M5,{className:"text-center",children:"İsim Pozisyonu"}),i.jsx(M5,{className:"text-center",children:"İşlemler"})]})}),i.jsx(E5,{children:e.map((e=>i.jsxs(D5,{className:"hover:bg-muted/50 "+("Kaleci"===e.type?"bg-red-50/30 dark:bg-red-900/10":""),children:[i.jsx(z5,{className:"py-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:e.productImage||"/placeholder.svg",alt:e.productName,className:"w-10 h-10 object-cover rounded-md border",onError:e=>{e.currentTarget.src="/placeholder.svg"}}),"Kaleci"===e.type&&i.jsx("div",{className:"absolute -top-1 -right-1",children:i.jsx(Aa,{className:"h-3 w-3 text-red-500"})})]}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"font-medium",children:e.productName})})]})}),i.jsx(z5,{className:"py-4 px-4 text-center",children:l===e.id?i.jsxs(eO,{value:c.type,onValueChange:e=>d((t=>({...t,type:e}))),children:[i.jsx(rO,{className:"w-32",children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"Oyuncu",children:"Oyuncu"}),i.jsx(iO,{value:"Kaleci",children:"Kaleci"})]})]}):i.jsx(Co,{variant:"Kaleci"===e.type?"destructive":"default",children:"Kaleci"===e.type?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Aa,{className:"h-3 w-3"}),"Kaleci"]}):i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(mn,{className:"h-3 w-3"}),"Oyuncu"]})})}),i.jsx(z5,{className:"py-4 px-4 text-center",children:l===e.id?i.jsx(co,{value:c.size,onChange:e=>d((t=>({...t,size:e.target.value}))),placeholder:"Beden",className:"w-20 text-center"}):i.jsx(Co,{variant:"outline",className:"text-sm font-semibold",children:e.size||"Belirtilmedi"})}),i.jsx(z5,{className:"py-4 px-4",children:l===e.id?i.jsx(co,{value:c.playerName,onChange:e=>d((t=>({...t,playerName:e.target.value}))),placeholder:"Oyuncu ismi",className:"w-full"}):i.jsx("span",{className:"font-medium",children:e.playerName||"-"})}),i.jsx(z5,{className:"py-4 px-4 text-center",children:l===e.id?i.jsx(co,{value:c.jerseyNumber,onChange:e=>d((t=>({...t,jerseyNumber:e.target.value}))),placeholder:"Numara",className:"w-20 text-center"}):i.jsx(Co,{variant:"outline",className:"font-bold",children:e.jerseyNumber||"-"})}),i.jsx(z5,{className:"py-4 px-4 text-center",children:l===e.id?i.jsxs(eO,{value:c.namePosition,onValueChange:e=>d((t=>({...t,namePosition:e}))),children:[i.jsx(rO,{className:"w-40",children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"above",children:"Numaranın Üstünde"}),i.jsx(iO,{value:"below",children:"Numaranın Altında"})]})]}):i.jsx(Co,{variant:"secondary",children:"above"===e.namePosition?"Numaranın Üstünde":"Numaranın Altında"})}),i.jsx(z5,{className:"py-4 px-4 text-center",children:l===e.id?i.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[i.jsx(oo,{size:"sm",onClick:()=>(async e=>{try{m(!0);const{error:r}=await Wl.from("print_details").update({player_name:c.playerName,jersey_number:c.jerseyNumber,name_position:c.namePosition,size:c.size,type:c.type}).eq("id",e);if(r)throw r;n({title:"Başarılı",description:"Baskı detayları güncellendi."}),s.invalidateQueries({queryKey:["print-details",t]}),h()}catch(r){n({title:"Hata",description:"Baskı detayları güncellenirken bir hata oluştu.",variant:"destructive"})}finally{m(!1)}})(e.id),disabled:u,className:"h-8 w-8 p-0",children:u?i.jsx(oa,{className:"h-3 w-3 animate-spin"}):i.jsx(Ra,{className:"h-3 w-3"})}),i.jsx(oo,{size:"sm",variant:"outline",onClick:h,disabled:u,className:"h-8 w-8 p-0",children:i.jsx(vn,{className:"h-3 w-3"})})]}):i.jsx(oo,{size:"sm",variant:"ghost",onClick:()=>(e=>{o(e.id),d({playerName:e.playerName||"",jerseyNumber:e.jerseyNumber||"",namePosition:e.namePosition||"above",size:e.size||"",type:e.type||"Oyuncu"})})(e),className:"h-8 w-8 p-0",children:i.jsx(Va,{className:"h-3 w-3"})})})]},e.id)))})]})}),i.jsx("div",{className:"mt-4 p-4 bg-muted/30 rounded-lg",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background/60 rounded-lg",children:[i.jsx("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center",children:i.jsx(Wr,{className:"h-5 w-5 text-primary-foreground"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-lg",children:e.length}),i.jsx("div",{className:"text-muted-foreground font-medium",children:"Toplam Baskı"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background/60 rounded-lg",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:i.jsx(mn,{className:"h-5 w-5 text-white"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-lg",children:e.filter((e=>"Oyuncu"===e.type)).length}),i.jsx("div",{className:"text-muted-foreground font-medium",children:"Oyuncu Forması"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background/60 rounded-lg",children:[i.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center",children:i.jsx(Aa,{className:"h-5 w-5 text-white"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-lg",children:e.filter((e=>"Kaleci"===e.type)).length}),i.jsx("div",{className:"text-muted-foreground font-medium",children:"Kaleci Forması"})]})]})]})})]})]}):null};function Jse({searchTerm:e,onSearchChange:t,categoryFilter:r,onCategoryChange:a}){return i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(po,{htmlFor:"search",children:"Ürün Ara"}),i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(co,{id:"search",placeholder:"Ürün adı veya kodu ara...",className:"pl-10",value:e,onChange:e=>t(e.target.value)})]})]}),i.jsxs("div",{className:"sm:w-48",children:[i.jsx(po,{htmlFor:"category",children:"Kategori"}),i.jsxs(eO,{value:r,onValueChange:a,children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"all",children:"Tüm Kategoriler"}),i.jsx(iO,{value:"ready",children:"Hazır Forma"}),i.jsx(iO,{value:"design",children:"Özel Tasarım"}),i.jsx(iO,{value:"promotion",children:"Promosyon"})]})]})]})]})}function eie({product:e,isSelected:t,onSelect:r}){return i.jsxs("div",{className:"border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md "+(t?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 hover:border-gray-300"),onClick:()=>{r(e),setTimeout((()=>{const e=document.getElementById("variation-selection");e&&e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),100)},children:[i.jsx("div",{className:"aspect-square mb-3 bg-gray-100 rounded-lg flex items-center justify-center",children:e.images?i.jsx("img",{src:e.images.split(",")[0],alt:e.name,className:"w-full h-full object-cover rounded-lg"}):i.jsx(ba,{className:"h-12 w-12 text-gray-400"})}),i.jsx("h3",{className:"font-medium text-sm mb-1",children:e.name}),i.jsx("p",{className:"text-xs text-gray-500 mb-2",children:e.category}),i.jsxs("div",{className:"text-xs space-y-1",children:[i.jsxs("div",{children:["Ana: ₺",e.base_price]}),e.goalkeeper_price&&i.jsxs("div",{className:"text-orange-600",children:["Kaleci: ₺",e.goalkeeper_price]}),e.shorts_price&&i.jsxs("div",{className:"text-blue-600",children:["Şort: ₺",e.shorts_price]}),e.socks_price&&i.jsxs("div",{className:"text-purple-600",children:["Çorap: ₺",e.socks_price]})]})]})}function tie({products:e,isLoading:t,selectedProduct:r,onSelectProduct:a,searchTerm:n=""}){const[s,l]=ze.useState(1),o=ze.useMemo((()=>n?e.filter((e=>e.name.toLowerCase().includes(n.toLowerCase())||e.code.toLowerCase().includes(n.toLowerCase())||e.category.toLowerCase().includes(n.toLowerCase())||e.brand&&e.brand.toLowerCase().includes(n.toLowerCase()))):e),[e,n]),c=Math.ceil(o.length/8),d=8*(s-1),u=d+8,m=o.slice(d,u);return ze.useMemo((()=>{l(1)}),[n]),t?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})}):0===o.length?i.jsx("div",{className:"text-center py-12 text-gray-500",children:n?i.jsxs("p",{children:['"',n,'" için sonuç bulunamadı.']}):i.jsx("p",{children:"Aradığınız kriterlere uygun ürün bulunamadı."})}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:m.map((e=>i.jsx(eie,{product:e,isSelected:(null==r?void 0:r.id)===e.id,onSelect:a},e.id)))}),c>1&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[o.length," üründen ",d+1,"-",Math.min(u,o.length)," arası gösteriliyor",n&&` (${n} araması)`]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>l((e=>Math.max(1,e-1))),disabled:1===s,children:[i.jsx(kr,{className:"h-4 w-4"}),"Önceki"]}),i.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:c},((e,t)=>t+1)).map((e=>i.jsx(oo,{variant:s===e?"default":"outline",size:"sm",onClick:()=>l(e),className:"w-8 h-8 p-0",children:e},e)))}),i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>l((e=>Math.min(c,e+1))),disabled:s===c,children:["Sonraki",i.jsx(wr,{className:"h-4 w-4"})]})]})]})]})}function rie({product:e,selectedVariation:t,onSelectVariation:r}){var a;return(null==(a=null==e?void 0:e.product_variations)?void 0:a.length)?i.jsxs("div",{className:"border-t pt-6",children:[i.jsxs("h3",{className:"text-lg font-medium mb-4",children:["Varyasyon Seçimi - ",e.name]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:e.product_variations.map((e=>i.jsxs("div",{className:"border rounded-lg p-3 cursor-pointer transition-all "+((null==t?void 0:t.id)===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 hover:border-gray-300"),onClick:()=>r(e),children:[i.jsx("div",{className:"text-sm font-medium",children:e.color}),i.jsx("div",{className:"text-xs text-gray-500",children:e.size}),i.jsxs("div",{className:"text-xs text-gray-400",children:["Stok: ",e.stock_quantity]})]},e.id)))})]}):i.jsx("div",{className:"text-center py-4 text-gray-500",children:i.jsx("p",{children:"Bu ürün için varyasyon bulunamadı."})})}function aie(e){var t,r,a;const{product:n,playerQuantity:s,setPlayerQuantity:l,playerShortsQuantity:o,setPlayerShortsQuantity:c,playerSocksQuantity:d,setPlayerSocksQuantity:u,goalkeeperQuantity:m,setGoalkeeperQuantity:h,goalkeeperShortsQuantity:p,setGoalkeeperShortsQuantity:x,goalkeeperSocksQuantity:g,setGoalkeeperSocksQuantity:f,goalkeeperColor:y,setGoalkeeperColor:v,goalkeeperSize:b,setGoalkeeperSize:j,playerShortsColor:k,setPlayerShortsColor:w,playerShortsType:N,setPlayerShortsType:_,playerSocksColor:S,setPlayerSocksColor:C,playerSocksType:T,setPlayerSocksType:O,goalkeeperShortsColor:P,setGoalkeeperShortsColor:A,goalkeeperShortsType:E,setGoalkeeperShortsType:D,goalkeeperSocksColor:M,setGoalkeeperSocksColor:z,goalkeeperSocksType:R,setGoalkeeperSocksType:I,isGoalkeeperShortsLong:F,setIsGoalkeeperShortsLong:B}=e,L=["Beyaz","Siyah","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz","Sarı","Turuncu"],q="Özel Tasarım"===n.category||"promotion"===n.category?["104","116","128","140","152","164","176","XS","S","M","L","XL","XXL","XXXL","4XL"]:["3","5","7"],$=["Yetişkin","Çocuk"];return i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Ürün Tipi ve Adet Seçimi"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-medium text-blue-700 dark:text-blue-300",children:"👤 Oyuncu Ürünleri"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(po,{className:"w-20",children:"Forma:"}),i.jsx(co,{type:"number",min:"0",value:s,onChange:e=>l(Number(e.target.value)),className:"w-20"}),i.jsxs("span",{className:"text-sm text-gray-500",children:["₺",n.base_price||0," / adet"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(po,{className:"w-20",children:"Şort:"}),i.jsx(co,{type:"number",min:"0",value:o,onChange:e=>c(Number(e.target.value)),className:"w-20"}),i.jsxs("span",{className:"text-sm text-gray-500",children:["₺",n.shorts_price||0," / adet"]})]}),o>0&&i.jsxs("div",{className:"flex gap-2 ml-23",children:[i.jsxs(eO,{value:k,onValueChange:w,children:[i.jsx(rO,{className:"w-32",children:i.jsx(tO,{})}),i.jsx(sO,{children:["Siyah","Beyaz","Lacivert","Kırmızı","Saks Mavi","Yeşil","Turkuaz"].map((e=>i.jsx(iO,{value:e,children:e},e)))})]}),i.jsxs(eO,{value:N,onValueChange:_,children:[i.jsx(rO,{className:"w-16",children:i.jsx(tO,{})}),i.jsx(sO,{children:q.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(po,{className:"w-20",children:"Çorap:"}),i.jsx(co,{type:"number",min:"0",value:d,onChange:e=>u(Number(e.target.value)),className:"w-20"}),i.jsxs("span",{className:"text-sm text-gray-500",children:["₺",n.socks_price||0," / adet"]})]}),d>0&&i.jsxs("div",{className:"flex gap-2 ml-23",children:[i.jsxs(eO,{value:S,onValueChange:C,children:[i.jsx(rO,{className:"w-32",children:i.jsx(tO,{})}),i.jsx(sO,{children:L.map((e=>i.jsx(iO,{value:e,children:e},e)))})]}),i.jsxs(eO,{value:T,onValueChange:O,children:[i.jsx(rO,{className:"w-24",children:i.jsx(tO,{})}),i.jsx(sO,{children:$.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-medium text-orange-700 dark:text-orange-300",children:"🥅 Kaleci Ürünleri"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(po,{className:"w-20",children:"Forma:"}),i.jsx(co,{type:"number",min:"0",value:m,onChange:e=>h(Number(e.target.value)),className:"w-20"}),i.jsxs("span",{className:"text-sm text-gray-500",children:["₺",n.goalkeeper_price||0," / adet"]})]}),m>0&&i.jsxs("div",{className:"flex gap-2 ml-23",children:[i.jsxs(eO,{value:y,onValueChange:v,children:[i.jsx(rO,{className:"w-32",children:i.jsx(tO,{})}),i.jsx(sO,{children:(null==(r=null==(t=n.product_variations)?void 0:t.find((e=>e.color)))?void 0:r.color)&&[n.product_variations.find((e=>e.color)).color].map((e=>i.jsx(iO,{value:e,children:e},e)))})]}),i.jsxs(eO,{value:b,onValueChange:j,children:[i.jsx(rO,{className:"w-24",children:i.jsx(tO,{})}),i.jsx(sO,{children:null==(a=n.product_variations)?void 0:a.map((e=>e.size)).filter(((e,t,r)=>r.indexOf(e)===t)).map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(po,{className:"w-20",children:"Şort:"}),i.jsx(co,{type:"number",min:"0",value:p,onChange:e=>x(Number(e.target.value)),className:"w-20"}),i.jsxs("span",{className:"text-sm text-gray-500",children:["₺",n.shorts_price||0," / adet"]})]}),p>0&&i.jsxs("div",{className:"space-y-2 ml-23",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(eO,{value:P,onValueChange:A,children:[i.jsx(rO,{className:"w-32",children:i.jsx(tO,{})}),i.jsx(sO,{children:i.jsx(iO,{value:"Siyah",children:"Siyah"})})]}),i.jsxs(eO,{value:E,onValueChange:D,children:[i.jsx(rO,{className:"w-16",children:i.jsx(tO,{})}),i.jsx(sO,{children:q.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"longShorts",checked:F,onChange:e=>B(e.target.checked),className:"rounded"}),i.jsx(po,{htmlFor:"longShorts",className:"text-sm",children:"Uzun Şort"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(po,{className:"w-20",children:"Çorap:"}),i.jsx(co,{type:"number",min:"0",value:g,onChange:e=>f(Number(e.target.value)),className:"w-20"}),i.jsxs("span",{className:"text-sm text-gray-500",children:["₺",n.socks_price||0," / adet"]})]}),g>0&&i.jsxs("div",{className:"flex gap-2 ml-23",children:[i.jsxs(eO,{value:M,onValueChange:z,children:[i.jsx(rO,{className:"w-32",children:i.jsx(tO,{})}),i.jsx(sO,{children:L.map((e=>i.jsx(iO,{value:e,children:e},e)))})]}),i.jsxs(eO,{value:R,onValueChange:I,children:[i.jsx(rO,{className:"w-24",children:i.jsx(tO,{})}),i.jsx(sO,{children:$.map((e=>i.jsx(iO,{value:e,children:e},e)))})]})]})]})]})]})]})}function nie(e){const{product:t,playerQuantity:r,playerShortsQuantity:a,playerSocksQuantity:n,goalkeeperQuantity:s,goalkeeperShortsQuantity:l,goalkeeperSocksQuantity:o,onAddToOrder:c,onCancel:d,isLoading:u=!1}=e,m=(()=>{let e=0;return e+=r*(t.base_price||0),e+=a*(t.shorts_price||0),e+=n*(t.socks_price||0),e+=s*(t.goalkeeper_price||0),e+=l*(t.shorts_price||0),e+=o*(t.socks_price||0),e})(),h=r+a+n+s+l+o,p=h>0;return i.jsx("div",{className:"border-t pt-6",children:i.jsx(ro,{children:i.jsx(io,{className:"p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Sipariş Özeti"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium text-blue-700 dark:text-blue-300",children:"👤 Oyuncu Ürünleri"}),r>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Forma x ",r]}),i.jsxs("span",{children:["₺",(r*(t.base_price||0)).toLocaleString()]})]}),a>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Şort x ",a]}),i.jsxs("span",{children:["₺",(a*(t.shorts_price||0)).toLocaleString()]})]}),n>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Çorap x ",n]}),i.jsxs("span",{children:["₺",(n*(t.socks_price||0)).toLocaleString()]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium text-orange-700 dark:text-orange-300",children:"🥅 Kaleci Ürünleri"}),s>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Forma x ",s]}),i.jsxs("span",{children:["₺",(s*(t.goalkeeper_price||0)).toLocaleString()]})]}),l>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Şort x ",l]}),i.jsxs("span",{children:["₺",(l*(t.shorts_price||0)).toLocaleString()]})]}),o>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Çorap x ",o]}),i.jsxs("span",{children:["₺",(o*(t.socks_price||0)).toLocaleString()]})]})]})]}),i.jsx("div",{className:"border-t pt-4",children:i.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[i.jsxs("span",{children:["Toplam (",h," adet)"]}),i.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["₺",m.toLocaleString()]})]})}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx(oo,{variant:"outline",onClick:d,className:"flex-1",disabled:u,children:"İptal"}),i.jsx(oo,{onClick:c,className:"flex-1",disabled:!p||u,children:u?"Ekleniyor...":"Siparişe Ekle"})]}),!p&&i.jsx("div",{className:"text-center text-sm text-gray-500 mt-2",children:"Siparişe eklemek için en az bir ürün seçin"})]})})})})}const sie=()=>{const{id:e}=fl(),t=hl(),{toast:r}=at(),a=$e(),n=t.pathname.includes("/admin/"),s=n?"/admin/orders":"/customer/orders",[l,o]=ze.useState(!1),[c,d]=ze.useState(""),[u,m]=ze.useState(""),[h,p]=ze.useState(""),[x,g]=ze.useState(""),[f,y]=ze.useState(null),[v,b]=ze.useState(!1),[j,k]=ze.useState("default"),[w,N]=ze.useState(!1),[_,S]=ze.useState("A4"),[C,T]=ze.useState(""),[O,P]=ze.useState(null),[A,E]=ze.useState((()=>{const e=localStorage.getItem("showDiscountInPayments");return null!==e&&"true"===e})),[D,M]=ze.useState(!1),[z,R]=ze.useState({customer_name:"",customer_tc:"",customer_phone:"",customer_address:"",customer_city:"",customer_district:"",customer_type:"individual",payment_method:"cash",company_name:"",tax_number:"",company_address:"",billing_city:"",billing_district:"",billing_address:"",is_billing_address_different:!1}),[I,F]=ze.useState(!1),[B,L]=ze.useState("all"),[q,$]=ze.useState(""),[K,U]=ze.useState(null),[H,Y]=ze.useState(null),[V,G]=ze.useState(0),[W,Q]=ze.useState(0),[X,Z]=ze.useState(0),[J,ee]=ze.useState(0),[te,re]=ze.useState(0),[ae,ne]=ze.useState(0),[se,ie]=ze.useState("Siyah"),[le,oe]=ze.useState(""),[ce,de]=ze.useState("Siyah"),[ue,me]=ze.useState("5"),[he,pe]=ze.useState("Beyaz"),[xe,ge]=ze.useState("Yetişkin"),[fe,ye]=ze.useState("Siyah"),[ve,be]=ze.useState("5"),[je,ke]=ze.useState("Beyaz"),[we,Ne]=ze.useState("Yetişkin"),[_e,Se]=ze.useState(!1);if(!e)return i.jsx("div",{className:"space-y-6",children:i.jsxs(C5,{variant:"destructive",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx(T5,{children:"Sipariş ID'si bulunamadı"})]})});const{data:Ce,isLoading:Te,error:Oe}=qe({queryKey:["order-details",Pe=e],queryFn:async()=>{const{data:e,error:t}=await Wl.from("orders").select("*").eq("id",Pe).single();if(t)throw t;return e},enabled:!!Pe});var Pe;const{data:Ae,isLoading:Ee}=(e=>qe({queryKey:["order-items",e],queryFn:async()=>{const{data:t,error:r}=await Wl.from("order_items").select("\n          *,\n          product_variations(\n            color,\n            size,\n            sku,\n            products(name, code)\n          )\n        ").eq("order_id",e);if(r)throw r;return null==t?void 0:t.map((e=>{var t,r,a,n,s,i,l;return{...e,product_name:null==(r=null==(t=e.product_variations)?void 0:t.products)?void 0:r.name,product_code:null==(n=null==(a=e.product_variations)?void 0:a.products)?void 0:n.code,color:null==(s=e.product_variations)?void 0:s.color,size:null==(i=e.product_variations)?void 0:i.size,sku:null==(l=e.product_variations)?void 0:l.sku}}))},enabled:!!e}))(e),{getPrintDetails:De}=Ese(),{data:Me,isLoading:Re}=qe({queryKey:["payments",e],queryFn:async()=>{const{data:t,error:r}=await Wl.from("payments").select("*").eq("order_id",e).order("created_at",{ascending:!1});if(r)throw r;return t},enabled:!!e}),{data:Ie,isLoading:Fe}=qe({queryKey:["print-details",e,j],queryFn:async()=>e?await De(e,j):[],enabled:!!e}),{data:Be,isLoading:Le}=qe({queryKey:["print-requests",e],queryFn:async()=>{const{data:t,error:r}=await Wl.from("print_requests").select("\n          *,\n          print_regions(name, base_price),\n          order_items (\n            product_variations (\n              products ( name )\n            )\n          )\n        ").eq("order_id",e);if(r)throw r;return t},enabled:!!e}),{data:Ue,isLoading:He}=qe({queryKey:["products-for-order"],queryFn:async()=>{const{data:e,error:t}=await Wl.from("products").select("\n          *,\n          product_variations (\n            id,\n            color,\n            size,\n            stock_quantity,\n            variation_image\n          )\n        ").eq("status","active").order("name");if(t)throw t;return e},enabled:I}),Ye=(null==Ue?void 0:Ue.filter((e=>{if("all"!==B){if("ready"===B&&"Hazır Forma"!==e.category)return!1;if("design"===B&&"Özel Tasarım"!==e.category)return!1;if("promotion"===B&&"Promosyon"!==e.category)return!1}return!0})))||[],Ve=()=>{U(null),Y(null),G(0),Q(0),Z(0),ee(0),re(0),ne(0),ie("Siyah"),oe(""),de("Siyah"),me("5"),pe("Beyaz"),ge("Yetişkin"),ye("Siyah"),be("5"),ke("Beyaz"),Ne("Yetişkin"),Se(!1),L("all"),$("")},Ge=()=>{if(!K)return 0;let e=0;return e+=V*(K.base_price||0),e+=W*(K.goalkeeper_price||0),e+=X*(K.shorts_price||0),e+=J*(K.socks_price||0),e+=te*(K.shorts_price||0),e+=ae*(K.socks_price||0),e},We=Ke({mutationFn:async t=>{const r=(null==Ce?void 0:Ce.customer_id)||(null==Ce?void 0:Ce.customer_name),{data:a,error:n}=await Wl.from("payments").insert({order_id:e,customer_id:r,amount:t.amount,discount:t.discount||0,payment_type:"payment",status:"completed",notes:t.notes||void 0,bank_info:t.bankInfo||void 0,receipt_url:t.receiptUrl||void 0}).select().single();if(n)throw n;const{data:s,error:i}=await Wl.from("payments").select("amount, discount").eq("order_id",e).eq("status","completed");if(i)throw i;const l=(null==s?void 0:s.reduce(((e,t)=>e+(t.amount+(t.discount||0))),0))||0;let o;o=l>=Ce.total_amount?"paid":l>0?"partial":"pending";const{error:c}=await Wl.from("orders").update({payment_status:o}).eq("id",e);if(c)throw c;return{payment:a,newPaymentStatus:o}},onMutate:async t=>{await a.cancelQueries({queryKey:["payments",e]}),await a.cancelQueries({queryKey:["order-details",e]});const r=a.getQueryData(["payments",e]),n=a.getQueryData(["order-details",e]),s={id:`temp-${Date.now()}`,order_id:e,customer_id:(null==Ce?void 0:Ce.customer_id)||(null==Ce?void 0:Ce.customer_name),amount:t.amount,payment_type:"payment",status:"completed",notes:t.notes||null,bank_info:t.bankInfo||null,receipt_url:t.receiptUrl||null,created_at:(new Date).toISOString(),discount:0};a.setQueryData(["payments",e],(e=>[s,...e||[]]));const i=((null==r?void 0:r.reduce(((e,t)=>e+t.amount+(A&&t.discount||0)),0))||0)+t.amount;let l;return l=i>=((null==Ce?void 0:Ce.total_amount)||0)?"paid":i>0?"partial":"pending",n&&a.setQueryData(["order",e],(e=>({...e,payment_status:l}))),{previousPayments:r,previousOrder:n}},onError:(t,n,s)=>{(null==s?void 0:s.previousPayments)&&a.setQueryData(["payments",e],s.previousPayments),(null==s?void 0:s.previousOrder)&&a.setQueryData(["order",e],s.previousOrder),r({title:"Hata",description:"Ödeme eklenirken bir hata oluştu.",variant:"destructive"})},onSuccess:()=>{a.invalidateQueries({queryKey:["payments",e]}),a.invalidateQueries({queryKey:["order",e]}),r({title:"Ödeme eklendi",description:"Ödemeniz başarıyla kaydedildi."}),o(!1),Qe()},onSettled:()=>{a.invalidateQueries({queryKey:["payments",e]}),a.invalidateQueries({queryKey:["order",e]})}}),Qe=()=>{d(""),m(""),p(""),g(""),y(null),b(!1)},Xe=Ke({mutationFn:async()=>{if(!K||!H||!e)throw new Error("Missing required data");const t=[],r=(t,r,a,n)=>({order_id:e,product_variation_id:H.id,quantity:r,unit_price:a,total_price:r*a,item_type:t,notes:n||null});if(V>0&&t.push(r("ready_stock",V,K.base_price||0)),W>0){const e=`${W} Adet - ${se} - ${le}`;t.push(r("goalkeeper",W,K.goalkeeper_price||0,e))}if(X>0){const e=`Oyuncu: ${X} Adet - ${ce} - ${ue}`;t.push(r("shorts",X,K.shorts_price||0,e))}if(J>0){const e=`Oyuncu: ${J} Adet - ${he} - ${xe}`;t.push(r("socks",J,K.socks_price||0,e))}if(te>0){const e=`Kaleci: ${te} Adet - ${fe} - ${ve}${_e?" (Uzun)":""}`;t.push(r("shorts",te,K.shorts_price||0,e))}if(ae>0){const e=`Kaleci: ${ae} Adet - ${je} - ${we}`;t.push(r("goalkeeper_socks",ae,K.socks_price||0,e))}if(0===t.length)throw new Error("En az bir ürün seçmelisiniz");const{error:a}=await Wl.from("order_items").insert(t);if(a)throw a;const n=Ge(),{error:s}=await Wl.from("orders").update({total_amount:((null==Ce?void 0:Ce.total_amount)||0)+n,subtotal:((null==Ce?void 0:Ce.subtotal)||0)+n}).eq("id",e);if(s)throw s;return{items:t,totalToAdd:n}},onMutate:async()=>{await a.cancelQueries({queryKey:["order-details",e]}),await a.cancelQueries({queryKey:["order-items",e]});const t=a.getQueryData(["order-details",e]),r=a.getQueryData(["order-items",e]),n=Ge();return t&&a.setQueryData(["order-details",e],(e=>({...e,total_amount:(e.total_amount||0)+n,subtotal:(e.subtotal||0)+n}))),{previousOrder:t,previousOrderItems:r,totalToAdd:n}},onError:(t,n,s)=>{(null==s?void 0:s.previousOrder)&&a.setQueryData(["order-details",e],s.previousOrder),(null==s?void 0:s.previousOrderItems)&&a.setQueryData(["order-items",e],s.previousOrderItems),r({title:"Hata",description:t.message||"Ürün eklenirken bir hata oluştu.",variant:"destructive"})},onSuccess:t=>{a.invalidateQueries({queryKey:["order-items",e]}),a.invalidateQueries({queryKey:["order-details",e]}),r({title:"Ürün eklendi",description:`${t.items.length} ürün siparişe eklendi. Toplam: ₺${t.totalToAdd.toFixed(2)}`}),F(!1),Ve()},onSettled:()=>{a.invalidateQueries({queryKey:["order",e]}),a.invalidateQueries({queryKey:["order-items",e]})}}),Ze=Ke({mutationFn:async t=>{const{data:r,error:a}=await Wl.from("dealer_payment_distributions").select("dealer_payment_id, distributed_amount").eq("payment_id",t);if(a)throw new Error(`Dealer payment distributions kontrol hatası: ${a.message}`);if(r&&r.length>0){const e=[...new Set(r.map((e=>e.dealer_payment_id)))];for(const t of e){const{error:e}=await Wl.from("dealer_payments").delete().eq("id",t);if(e)throw new Error(`Dealer payment silme hatası: ${e.message}`)}}const{error:n}=await Wl.from("payments").delete().eq("id",t);if(n)throw new Error(`Payment silme hatası: ${n.message}`);const{data:s,error:i}=await Wl.from("payments").select("amount, discount").eq("order_id",e).eq("status","completed");if(i)throw i;const l=(null==s?void 0:s.reduce(((e,t)=>e+(t.amount+(t.discount||0))),0))||0;let o;o=l>=Ce.total_amount?"paid":l>0?"partial":"pending";const{error:c}=await Wl.from("orders").update({payment_status:o}).eq("id",e);if(c)throw c;return{paymentId:t,newPaymentStatus:o}},onMutate:async t=>{await a.cancelQueries({queryKey:["payments",e]}),await a.cancelQueries({queryKey:["order",e]});const r=a.getQueryData(["payments",e]),n=a.getQueryData(["order",e]);a.setQueryData(["payments",e],(e=>(e||[]).filter((e=>e.id!==t))));const s=((null==r?void 0:r.filter((e=>e.id!==t)))||[]).reduce(((e,t)=>e+t.amount+(A&&t.discount||0)),0);let i;return i=s>=((null==Ce?void 0:Ce.total_amount)||0)?"paid":s>0?"partial":"pending",n&&a.setQueryData(["order",e],(e=>({...e,payment_status:i}))),{previousPayments:r,previousOrder:n}},onError:(t,n,s)=>{(null==s?void 0:s.previousPayments)&&a.setQueryData(["payments",e],s.previousPayments),(null==s?void 0:s.previousOrder)&&a.setQueryData(["order",e],s.previousOrder),r({title:"Hata",description:"Ödeme silinirken bir hata oluştu.",variant:"destructive"}),P(null)},onSuccess:()=>{a.invalidateQueries({queryKey:["payments",e]}),a.invalidateQueries({queryKey:["order",e]}),a.invalidateQueries({queryKey:["dealer-payments"]}),a.invalidateQueries({queryKey:["dealer-payment-history"]}),a.invalidateQueries({queryKey:["dealer-payment-distributions"]}),a.removeQueries({queryKey:["dealer-payment-history"]}),a.removeQueries({queryKey:["dealer-payments"]}),r({title:"Ödeme silindi",description:"Ödeme kaydı başarıyla silindi."}),P(null)},onSettled:()=>{a.invalidateQueries({queryKey:["payments",e]}),a.invalidateQueries({queryKey:["order",e]})}}),Je=Ke({mutationFn:async t=>{const{error:r}=await Wl.from("orders").update({customer_name:t.customer_name,customer_tc:t.customer_tc,customer_phone:t.customer_phone,customer_address:t.customer_address,customer_city:t.customer_city,customer_district:t.customer_district,customer_type:t.customer_type,payment_method:t.payment_method,company_name:t.company_name,tax_number:t.tax_number,company_address:t.company_address,billing_city:t.billing_city,billing_district:t.billing_district,billing_address:t.billing_address,is_billing_address_different:t.is_billing_address_different}).eq("id",e);if(r)throw r;return t},onMutate:async t=>{await a.cancelQueries({queryKey:["order",e]});const r=a.getQueryData(["order",e]);return r&&a.setQueryData(["order",e],(e=>({...e,customer_name:t.customer_name,customer_tc:t.customer_tc,customer_phone:t.customer_phone,customer_address:t.customer_address,customer_city:t.customer_city,customer_district:t.customer_district,customer_type:t.customer_type,payment_method:t.payment_method,company_name:t.company_name,tax_number:t.tax_number,company_address:t.company_address,billing_city:t.billing_city,billing_district:t.billing_district,billing_address:t.billing_address,is_billing_address_different:t.is_billing_address_different}))),{previousOrder:r}},onError:(t,n,s)=>{(null==s?void 0:s.previousOrder)&&a.setQueryData(["order",e],s.previousOrder),r({title:"Hata",description:"Müşteri bilgileri güncellenirken bir hata oluştu.",variant:"destructive"})},onSuccess:()=>{a.invalidateQueries({queryKey:["order",e]}),r({title:"Başarılı",description:"Müşteri bilgileri güncellendi."}),M(!1)},onSettled:()=>{a.invalidateQueries({queryKey:["order",e]})}}),et=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(e),tt=e=>"deposit"===e?"Kapora":"Tam Ödeme";if(Te||Ee||Re||Le)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx(oa,{className:"h-8 w-8 animate-spin"})});if(Oe)return i.jsx("div",{className:"space-y-6",children:i.jsxs(C5,{variant:"destructive",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsxs(T5,{children:["Sipariş yüklenirken hata oluştu: ",Oe.message]})]})});if(!Ce)return i.jsx("div",{className:"space-y-6",children:i.jsxs(C5,{variant:"destructive",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx(T5,{children:"Sipariş bulunamadı"})]})});const rt=(null==Me?void 0:Me.reduce(((e,t)=>e+t.amount+(A&&t.discount||0)),0))||0,nt=Ce.total_amount-rt;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(oo,{variant:"ghost",size:"sm",asChild:!0,children:i.jsxs(Ll,{to:s,children:[i.jsx(ar,{className:"h-4 w-4 mr-2"}),"Siparişlere Dön"]})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Sipariş Detayı"}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Sipariş No: ",Ce.order_number]})]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(oo,{variant:"outline",size:"sm",onClick:()=>{N(!0)},"data-print-pdf-button":!0,children:[i.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Baskı PDF İndir"]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5"}),"Sipariş Bilgileri"]})}),i.jsxs(io,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Sipariş No"}),i.jsx("p",{className:"font-semibold",children:Ce.order_number})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Sipariş Tarihi"}),i.jsxs("p",{className:"flex items-center gap-2",children:[i.jsx(pr,{className:"h-4 w-4"}),XC(new Date(Ce.created_at),"dd MMMM yyyy HH:mm",{locale:ZT})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Forma Cinsi"}),i.jsx("p",{children:(st=Ce.order_type,"design"===st?"Tasarım Forma":"Hazır Stok")})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Sipariş Durumu"}),i.jsx("div",{children:(e=>{const t={pending:{label:"Beklemede",variant:"secondary",className:""},confirmed:{label:"Onaylandı",variant:"default",className:""},processing:{label:"Hazırlanıyor",variant:"default",className:"bg-sky-100 text-sky-800 border-sky-200 hover:bg-sky-200 dark:bg-sky-900 dark:text-sky-200 dark:border-sky-800"},in_production:{label:"Üretimde",variant:"default",className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200 dark:bg-green-900 dark:text-green-200 dark:border-green-800"},shipped:{label:"Kargoda",variant:"default",className:"bg-purple-100 text-purple-800 border-purple-200 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-800 dark:border-purple-800"},delivered:{label:"Teslim Edildi",variant:"default",className:"bg-yellow-100 text-yellow-800 border-yellow-200 hover:bg-yellow-200 dark:bg-yellow-900 dark:text-yellow-200 dark:border-yellow-800"},cancelled:{label:"İptal",variant:"destructive",className:""}}[e]||{label:e,variant:"secondary",className:""};return i.jsx(Co,{variant:t.variant,className:t.className,children:t.label})})(Ce.status)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Ödeme Durumu"}),i.jsx("div",{children:(e=>{const t={pending:{label:"Beklemede",variant:"secondary"},partial:{label:"Kısmi Ödendi",variant:"secondary"},paid:{label:"Ödendi",variant:"default"},refunded:{label:"İade Edildi",variant:"destructive"}}[e]||{label:e,variant:"secondary"};return i.jsx(Co,{variant:t.variant,children:t.label})})(Ce.payment_status)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Toplam Tutar"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:et(Ce.total_amount)})]})]})]}),Ce.customer_notes&&i.jsxs("div",{className:"mt-4 pt-4 border-t",children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Müşteri Notları"}),i.jsx("p",{className:"mt-1 text-gray-700",children:Ce.customer_notes})]})]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(mn,{className:"h-5 w-5"}),"Müşteri Bilgileri"]}),n&&i.jsx("div",{className:"flex items-center gap-2",children:D?i.jsxs(i.Fragment,{children:[i.jsx(oo,{size:"sm",onClick:async()=>{try{b(!0),await Je.mutateAsync(z)}catch(e){}finally{b(!1)}},disabled:v,children:v?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydediliyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Kaydet"]})}),i.jsxs(oo,{size:"sm",variant:"outline",onClick:()=>{M(!1),R({customer_name:"",customer_tc:"",customer_phone:"",customer_address:"",customer_city:"",customer_district:"",customer_type:"individual",payment_method:"cash",company_name:"",tax_number:"",company_address:"",billing_city:"",billing_district:"",billing_address:"",is_billing_address_different:!1})},disabled:v,children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"İptal"]})]}):i.jsxs(oo,{size:"sm",variant:"ghost",onClick:()=>{Ce&&(R({customer_name:Ce.customer_name||"",customer_tc:Ce.customer_tc||"",customer_phone:Ce.customer_phone||"",customer_address:Ce.customer_address||"",customer_city:Ce.customer_city||"",customer_district:Ce.customer_district||"",customer_type:"corporate"===Ce.customer_type?"corporate":"individual",payment_method:Ce.payment_method||"cash",company_name:Ce.company_name||"",tax_number:Ce.tax_number||"",company_address:Ce.company_address||"",billing_city:Ce.billing_city||"",billing_district:Ce.billing_district||"",billing_address:Ce.billing_address||"",is_billing_address_different:Ce.is_billing_address_different||!1}),M(!0))},children:[i.jsx(Va,{className:"h-4 w-4 mr-2"}),"Düzenle"]})})]})}),i.jsxs(io,{children:[D?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"customer_name",children:"İsim Soyisim *"}),i.jsx(co,{id:"customer_name",value:z.customer_name,onChange:e=>R((t=>({...t,customer_name:e.target.value}))),placeholder:"Müşteri adı ve soyadı"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"customer_phone",children:"Telefon"}),i.jsx(co,{id:"customer_phone",value:z.customer_phone,onChange:e=>R((t=>({...t,customer_phone:e.target.value}))),placeholder:"Telefon numarası"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"customer_type",children:"Müşteri Tipi"}),i.jsxs(eO,{value:z.customer_type,onValueChange:e=>R((t=>({...t,customer_type:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"individual",children:"👤 Bireysel"}),i.jsx(iO,{value:"corporate",children:"🏢 Kurumsal"})]})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"payment_method",children:"Ödeme Şekli"}),i.jsxs(eO,{value:z.payment_method,onValueChange:e=>R((t=>({...t,payment_method:e}))),children:[i.jsx(rO,{children:i.jsx(tO,{})}),i.jsxs(sO,{children:[i.jsx(iO,{value:"cash",children:"💵 Nakit"}),i.jsx(iO,{value:"credit_card",children:"💳 Kredi Kartı"})]})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"customer_tc",children:"TC Kimlik No"}),i.jsx(co,{id:"customer_tc",value:z.customer_tc,onChange:e=>R((t=>({...t,customer_tc:e.target.value}))),placeholder:"TC kimlik numarası"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"customer_city",children:"İl"}),i.jsx(co,{id:"customer_city",value:z.customer_city,onChange:e=>R((t=>({...t,customer_city:e.target.value}))),placeholder:"İl"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.jsxs("div",{children:[i.jsx(po,{htmlFor:"customer_district",children:"İlçe"}),i.jsx(co,{id:"customer_district",value:z.customer_district,onChange:e=>R((t=>({...t,customer_district:e.target.value}))),placeholder:"İlçe"})]})}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"customer_address",children:"Adres"}),i.jsx(v6,{id:"customer_address",value:z.customer_address,onChange:e=>R((t=>({...t,customer_address:e.target.value}))),placeholder:"Müşteri adresi",rows:3})]}),"corporate"===z.customer_type&&i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),i.jsx("span",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Kurumsal Bilgiler"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"company_name",children:"Firma Ünvanı"}),i.jsx(co,{id:"company_name",value:z.company_name,onChange:e=>R((t=>({...t,company_name:e.target.value}))),placeholder:"Firma ünvanı"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"tax_number",children:"Vergi Kimlik No"}),i.jsx(co,{id:"tax_number",value:z.tax_number,onChange:e=>R((t=>({...t,tax_number:e.target.value}))),placeholder:"Vergi kimlik numarası"})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(po,{htmlFor:"company_address",children:"Firma Adresi"}),i.jsx(v6,{id:"company_address",value:z.company_address,onChange:e=>R((t=>({...t,company_address:e.target.value}))),placeholder:"Firma adresi",rows:2})]})]}),i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm font-semibold text-green-700 dark:text-green-300",children:"Kargo Adresi"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"is_billing_address_different",checked:z.is_billing_address_different,onChange:e=>R((t=>({...t,is_billing_address_different:e.target.checked}))),className:"rounded"}),i.jsx(po,{htmlFor:"is_billing_address_different",children:"Farklı kargo adresi kullan"})]}),z.is_billing_address_different&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"billing_city",children:"Kargo İl"}),i.jsx(co,{id:"billing_city",value:z.billing_city,onChange:e=>R((t=>({...t,billing_city:e.target.value}))),placeholder:"Kargo ili"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"billing_district",children:"Kargo İlçe"}),i.jsx(co,{id:"billing_district",value:z.billing_district,onChange:e=>R((t=>({...t,billing_district:e.target.value}))),placeholder:"Kargo ilçesi"})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"billing_address",children:"Kargo Adresi"}),i.jsx(v6,{id:"billing_address",value:z.billing_address,onChange:e=>R((t=>({...t,billing_address:e.target.value}))),placeholder:"Kargo adresi",rows:3})]})]})]})]})]}):i.jsx("div",{className:"space-y-4",children:(()=>{const e=Ce.customer_tc,t=Ce.customer_phone,r=Ce.customer_name,a=Ce.customer_address,n=Ce.customer_city&&Ce.customer_district?`${Ce.customer_district}/${Ce.customer_city}`:"",s=Ce.customer_type||"individual";return Ce.company_name,Ce.tax_number,Ce.company_address,Ce.billing_city,Ce.billing_district,i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[100px]",children:"Müşteri Tipi:"}),i.jsx("span",{className:"font-medium flex items-center gap-2",children:"corporate"===s||"Kurumsal"===s?i.jsx(i.Fragment,{children:"Kurumsal"}):i.jsx(i.Fragment,{children:"Bireysel"})})]}),Ce.payment_method&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[100px]",children:"Ödeme Şekli:"}),i.jsx("span",{className:"font-medium flex items-center gap-2",children:"cash"===Ce.payment_method?"Nakit":"Kredi Kartı"})]}),e&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[100px]",children:"TC:"}),i.jsx("span",{className:"font-medium",children:e})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[100px]",children:"İsim Soyisim:"}),i.jsx("span",{className:"font-medium",children:r})]}),a&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[100px]",children:"Adres:"}),i.jsx("span",{className:"font-medium",children:a})]}),n&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[100px]",children:"İl / İlçe:"}),i.jsx("span",{className:"font-medium",children:n})]}),t&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[100px]",children:"Tel:"}),i.jsx("span",{className:"font-medium",children:t})]}),Ce.customer_company&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[100px]",children:"Şirket:"}),i.jsxs("span",{className:"font-medium flex items-center gap-2",children:[i.jsx(mr,{className:"h-4 w-4"}),Ce.customer_company]})]})]})})()}),!D&&(()=>{if("corporate"===Ce.customer_type){const e=Ce.company_name,t=Ce.tax_number,r=Ce.company_address;if(e||t||r)return i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),i.jsx("span",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Kurumsal Bilgiler"})]}),i.jsxs("div",{className:"space-y-3",children:[e&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[120px]",children:"Firma Ünvanı:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:e})]}),t&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[120px]",children:"VKN:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:t})]}),r&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[120px]",children:"Firma Adresi:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:r})]})]})]})}return null})(),!D&&(()=>{const e=Ce.billing_city,t=Ce.billing_district,r=Ce.billing_address;return Ce.is_billing_address_different||e||t||r?i.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),i.jsx("span",{className:"text-sm font-semibold text-green-700 dark:text-green-300",children:"Kargo Adresi"})]}),i.jsxs("div",{className:"space-y-3",children:[(e||t)&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[120px]",children:"Kargo İl/İlçe:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:e&&t?`${e}/${t}`:e||t})]}),r&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[120px]",children:"Kargo Adresi:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:r})]}),!e&&!t&&!r&&Ce.is_billing_address_different&&i.jsx("div",{className:"text-sm text-gray-500 italic",children:"Kargo adresi farklı seçilmiş ancak adres bilgisi girilmemiş."})]})]}):null})()]})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{className:"h-5 w-5"}),"Sipariş Ürünleri"]}),i.jsxs(sd,{open:I,onOpenChange:e=>{e||Ve(),F(e)},children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{size:"sm",className:"gap-2",children:[i.jsx(Pa,{className:"h-4 w-4"}),"Ürün Ekle"]})}),i.jsxs(cd,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[i.jsx(dd,{children:i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(Ha,{className:"h-5 w-5"}),"Siparişe Ürün Ekle"]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(Jse,{searchTerm:q,onSearchChange:$,categoryFilter:B,onCategoryChange:L}),i.jsx(tie,{products:Ye,isLoading:He,selectedProduct:K,searchTerm:q,onSelectProduct:e=>{var t,r;U(e),Y(null),oe((null==(r=null==(t=e.product_variations)?void 0:t[0])?void 0:r.size)||"")}}),K&&i.jsx("div",{id:"variation-selection",children:i.jsx(rie,{product:K,selectedVariation:H,onSelectVariation:Y})}),H&&i.jsx(aie,{product:K,selectedVariation:H,playerQuantity:V,setPlayerQuantity:G,playerShortsQuantity:X,setPlayerShortsQuantity:Z,playerSocksQuantity:J,setPlayerSocksQuantity:ee,goalkeeperQuantity:W,setGoalkeeperQuantity:Q,goalkeeperShortsQuantity:te,setGoalkeeperShortsQuantity:re,goalkeeperSocksQuantity:ae,setGoalkeeperSocksQuantity:ne,goalkeeperColor:se,setGoalkeeperColor:ie,goalkeeperSize:le,setGoalkeeperSize:oe,playerShortsColor:ce,setPlayerShortsColor:de,playerShortsType:ue,setPlayerShortsType:me,playerSocksColor:he,setPlayerSocksColor:pe,playerSocksType:xe,setPlayerSocksType:ge,goalkeeperShortsColor:fe,setGoalkeeperShortsColor:ye,goalkeeperShortsType:ve,setGoalkeeperShortsType:be,goalkeeperSocksColor:je,setGoalkeeperSocksColor:ke,goalkeeperSocksType:we,setGoalkeeperSocksType:Ne,isGoalkeeperShortsLong:_e,setIsGoalkeeperShortsLong:Se}),H&&i.jsx(nie,{product:K,selectedVariation:H,playerQuantity:V,playerShortsQuantity:X,playerSocksQuantity:J,goalkeeperQuantity:W,goalkeeperShortsQuantity:te,goalkeeperSocksQuantity:ae,playerShortsColor:ce,playerShortsType:ue,playerSocksColor:he,playerSocksType:xe,goalkeeperColor:se,goalkeeperSize:le,goalkeeperShortsColor:fe,goalkeeperShortsType:ve,goalkeeperSocksColor:je,goalkeeperSocksType:we,isGoalkeeperShortsLong:_e,onAddToOrder:()=>Xe.mutate(),onCancel:()=>{F(!1),Ve()},isLoading:Xe.isPending})]})]})]})]})}),i.jsx(io,{children:i.jsx(Qse,{orderItems:Ae||[],isAdminView:n,orderId:e})})]}),i.jsx(Xse,{printRequests:Be}),i.jsx(Zse,{printDetails:Ie,orderId:e,sortBy:j,setSortBy:k}),Me&&Me.length>0||nt>0?i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-5 w-5"}),"Ödeme Geçmişi"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"show-discount",checked:A,onChange:e=>{const t=e.target.checked;E(t),localStorage.setItem("showDiscountInPayments",t.toString())},className:"rounded border-gray-300"}),i.jsx(po,{htmlFor:"show-discount",className:"text-sm font-normal cursor-pointer",children:"İskontoları dahil et"})]})]}),nt>0&&i.jsxs(sd,{open:l,onOpenChange:o,children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{size:"sm",className:"gap-2",children:[i.jsx(Pa,{className:"h-4 w-4"}),"Ödeme Ekle"]})}),i.jsxs(cd,{className:"sm:max-w-md",children:[i.jsx(dd,{children:i.jsx(md,{children:"Yeni Ödeme Ekle"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-500",children:["Kalan bakiye: ",et(nt)]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"amount",children:"Ödeme Tutarı"}),i.jsx(co,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:c,onChange:e=>d(e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"discount",children:"İskonto Tutarı"}),i.jsx(co,{id:"discount",type:"number",step:"0.01",placeholder:"0.00",value:u,onChange:e=>m(e.target.value)})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"receipt",children:"Dekont/Makbuz Yükle"}),i.jsx(co,{id:"receipt",type:"file",accept:"image/*,.pdf",onChange:e=>{var t;return y((null==(t=e.target.files)?void 0:t[0])||null)}})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"notes",children:"Notlar (Opsiyonel)"}),i.jsx(v6,{id:"notes",placeholder:"Ödeme ile ilgili notlarınız...",value:h,onChange:e=>p(e.target.value),rows:3})]})]}),i.jsxs(ud,{children:[i.jsx(oo,{variant:"outline",onClick:()=>o(!1),disabled:v,children:"İptal"}),i.jsx(oo,{onClick:async()=>{const e=parseFloat(c)||0,t=parseFloat(u)||0;if(e<=0&&t<=0)return void r({title:"Hata",description:"Ödeme tutarı veya iskonto tutarı giriniz.",variant:"destructive"});if(e+t>nt)r({title:"Hata",description:"Toplam ödeme tutarı (tutar + iskonto) kalan bakiyeden fazla olamaz.",variant:"destructive"});else{b(!0);try{let r="";f&&(r=await(async e=>{try{const t=await I8(e,`receipt_${Date.now()}`);if(t.success&&t.data)return t.data.url;throw new Error("Upload failed")}catch(t){throw t}})(f)),await We.mutateAsync({amount:e,discount:t,notes:h,bankInfo:x,receiptUrl:r})}catch(a){b(!1)}}},disabled:v||parseFloat(c)<=0&&parseFloat(u)<=0,children:v?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydediliyor..."]}):"Ödeme Ekle"})]})]})]})]})}),i.jsx(io,{children:Me&&Me.length>0?i.jsx("div",{className:"space-y-4",children:Me.map((e=>{var t,r,a;return i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Co,{variant:"deposit"===e.payment_type?"secondary":"default",children:tt(e.payment_type)}),i.jsx("span",{className:"text-sm text-gray-500",children:XC(new Date(e.created_at),"dd MMM yyyy HH:mm",{locale:ZT})})]}),e.bank_info&&i.jsx("p",{className:"text-sm text-gray-600",children:e.bank_info}),e.notes&&i.jsx("p",{className:"text-sm text-gray-700 mt-1",children:e.notes})]}),i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{children:[A&&e.discount&&e.discount>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-sm text-gray-500 line-through",children:et(e.amount)}),i.jsxs("div",{className:"text-xs text-green-600",children:["+",et(e.discount)," iskonto"]}),i.jsx("div",{className:"font-bold text-lg",children:et(e.amount+e.discount)})]}):i.jsx("span",{className:"font-bold text-lg",children:et(e.amount)}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:["completed"===e.status?i.jsx(Or,{className:"h-4 w-4 text-green-600"}):i.jsx(zr,{className:"h-4 w-4 text-orange-600"}),i.jsx("span",{className:"text-xs text-gray-500",children:"completed"===e.status?"Tamamlandı":"Beklemede"})]})]}),n&&i.jsx(oo,{variant:"ghost",size:"sm",onClick:()=>P(e.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Ödeme kaydını sil",children:i.jsx(en,{className:"h-4 w-4"})})]})})]}),e.receipt_url&&i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[i.jsx("div",{className:"w-12 h-12 border rounded overflow-hidden bg-gray-50 flex-shrink-0",children:(null==(t=e.receipt_url)?void 0:t.includes("-pdf"))?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(Wr,{className:"h-6 w-6 text-red-600"})}):i.jsx("img",{src:e.receipt_url,alt:"Dekont önizleme",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ea,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm text-green-600",children:(null==(r=e.receipt_url)?void 0:r.includes("-pdf"))?"PDF Dekont:":"Dekont:"}),i.jsxs(sd,{children:[i.jsx(id,{asChild:!0,children:i.jsxs(oo,{variant:"ghost",size:"sm",className:"h-6 px-2 text-green-600 hover:text-green-700",children:[i.jsx(Vr,{className:"h-3 w-3 mr-1"}),"Görüntüle"]})}),i.jsx(cd,{className:"max-w-3xl",children:i.jsx("div",{className:"max-h-[80vh] overflow-auto",children:(null==(a=e.receipt_url)?void 0:a.includes("-pdf"))?i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"text-center p-8",children:[i.jsx(Wr,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"PDF Dekont"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"PDF dosyasını görüntülemek için aşağıdaki bağlantıya tıklayın."}),i.jsxs(oo,{onClick:()=>window.open(e.receipt_url,"_blank"),className:"inline-flex items-center gap-2",children:[i.jsx(Wr,{className:"h-4 w-4"}),"PDF'i Aç"]})]})}):i.jsx("img",{src:e.receipt_url,alt:`${tt(e.payment_type)} dekontu`,className:"w-full h-auto max-h-[80vh] object-contain"})})})]})]})]})]},e.id)}))}):i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Ir,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),i.jsx("p",{children:"Henüz ödeme kaydı bulunmuyor."}),i.jsx("p",{className:"text-sm",children:'Yukarıdaki "Ödeme Ekle" butonunu kullanarak ödeme ekleyebilirsiniz.'})]})})]}):null]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"Sipariş Özeti"})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Ürün Tutarı:"}),i.jsx("span",{children:et(Ce.subtotal&&Ce.subtotal>0?Ce.subtotal:Ce.total_amount)})]}),Ce.tax_amount>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"KDV:"}),i.jsx("span",{children:et(Ce.tax_amount)})]}),i.jsx("hr",{}),i.jsxs("div",{className:"flex justify-between font-medium",children:[i.jsx("span",{children:"Toplam:"}),i.jsx("span",{children:et(Ce.total_amount)})]}),i.jsxs("div",{className:"flex justify-between text-green-600",children:[i.jsx("span",{children:"Ödenen:"}),i.jsx("span",{className:"font-medium",children:et(rt)})]}),i.jsxs("div",{className:"flex justify-between font-bold "+(nt>0?"text-orange-600":"text-green-600"),children:[i.jsx("span",{children:"Kalan:"}),i.jsx("span",{children:et(nt)})]}),i.jsx("div",{className:"pt-2",children:0===nt?i.jsx(Co,{variant:"default",className:"w-full justify-center bg-green-600",children:"✓ Ödeme Tamamlandı"}):rt>0?i.jsx(Co,{variant:"secondary",className:"w-full justify-center",children:"Kısmi Ödeme Yapıldı"}):i.jsx(Co,{variant:"outline",className:"w-full justify-center",children:"Ödeme Bekleniyor"})})]})})]}),(Ce.estimated_delivery_date||Ce.actual_delivery_date||Ce.shipping_method)&&i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(sn,{className:"h-5 w-5"}),"Takip Bilgileri"]})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-3",children:[Ce.shipping_method&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Kargo Yöntemi"}),i.jsx("p",{children:Ce.shipping_method})]}),Ce.estimated_delivery_date&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tahmini Teslimat"}),i.jsxs("p",{className:"flex items-center gap-2",children:[i.jsx(zr,{className:"h-4 w-4"}),XC(new Date(Ce.estimated_delivery_date),"dd MMMM yyyy",{locale:ZT})]})]}),Ce.actual_delivery_date&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Gerçek Teslimat"}),i.jsxs("p",{className:"flex items-center gap-2",children:[i.jsx(Or,{className:"h-4 w-4 text-green-600"}),XC(new Date(Ce.actual_delivery_date),"dd MMMM yyyy",{locale:ZT})]})]}),Ce.cargo_cost&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Kargo Ücreti"}),i.jsx("p",{children:et(Ce.cargo_cost)})]})]})})]}),(Ce.invoice_number||Ce.invoice_status)&&i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Wr,{className:"h-5 w-5"}),"Fatura Bilgileri"]})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-3",children:[Ce.invoice_status&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Fatura Durumu"}),i.jsx("div",{children:i.jsx(Co,{variant:"issued"===Ce.invoice_status?"default":"secondary",children:"issued"===Ce.invoice_status?"Düzenlendi":"Beklemede"})})]}),Ce.invoice_number&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Fatura No"}),i.jsx("p",{className:"font-semibold",children:Ce.invoice_number})]}),Ce.invoice_date&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Fatura Tarihi"}),i.jsx("p",{children:XC(new Date(Ce.invoice_date),"dd MMMM yyyy",{locale:ZT})})]}),Ce.invoice_amount&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Fatura Tutarı"}),i.jsx("p",{className:"font-semibold",children:et(Ce.invoice_amount)})]})]})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsx(no,{children:"İstatistikler"})}),i.jsx(io,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Toplam Ürün Kategorisi:"}),i.jsx("span",{className:"font-semibold",children:(null==Ae?void 0:Ae.length)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Toplam Adet:"}),i.jsx("span",{className:"font-semibold",children:(null==Ae?void 0:Ae.filter((e=>e.quantity>0)).reduce(((e,t)=>e+t.quantity),0))||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Ekstra Baskı İsteği:"}),i.jsx("span",{className:"font-semibold",children:(null==Be?void 0:Be.length)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Ödeme Sayısı:"}),i.jsx("span",{className:"font-semibold",children:(null==Me?void 0:Me.length)||0})]})]})})]})]})]}),i.jsx(sd,{open:w,onOpenChange:N,children:i.jsxs(cd,{className:"sm:max-w-md",children:[i.jsx(dd,{children:i.jsxs(md,{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5"}),"Baskı PDF İndir"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"PDF'i hangi sayfa boyutunda oluşturmak istiyorsunuz?"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("button",{onClick:()=>S("A4"),className:"p-4 border-2 rounded-lg transition-all "+("A4"===_?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-8 h-12 bg-white border-2 border-gray-400 mx-auto mb-2 rounded"}),i.jsx("div",{className:"font-medium",children:"A4"}),i.jsx("div",{className:"text-xs text-gray-500",children:"21 x 29.7 cm"}),i.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Tavsiye Edilen"})]})}),i.jsx("button",{onClick:()=>S("A3"),className:"p-4 border-2 rounded-lg transition-all "+("A3"===_?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-white border-2 border-gray-400 mx-auto mb-2 rounded"}),i.jsx("div",{className:"font-medium",children:"A3"}),i.jsx("div",{className:"text-xs text-gray-500",children:"29.7 x 42 cm"}),i.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Daha Büyük"})]})})]}),i.jsxs("div",{className:"text-xs text-gray-500 bg-gray-50 p-3 rounded-lg",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"A4:"})," Standart yazıcılar için uygun, pratik"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"A3:"})," Daha detaylı görüntü, profesyonel yazıcı gerekli"]})]}),i.jsxs("div",{className:"border-t pt-4",children:[(()=>{const e=(null==Ae?void 0:Ae.some((e=>{const t=e.product_name||"",r=t.includes("Özel Tasarım")||t.includes("Tasarım"),a=t.includes("Promosyon")||t.includes("Promo");return r||a})))||!1;return i.jsxs("div",{className:"mb-3",children:[i.jsxs(po,{className:"text-sm font-medium "+(e?"text-red-600":"text-gray-700"),children:["Yaka Rengi Bilgisi ",e?"*":""]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e?"Özel Tasarım/Promosyon ürünleri için zorunlu - PDF'de görüntülenecektir":"İsteğe bağlı - PDF'de görüntülenecektir"})]})})(),i.jsxs("div",{className:"space-y-2",children:[i.jsx(co,{placeholder:"Örnek: Kırmızı, Siyah, Mavi, Beyaz...",value:C,onChange:e=>T(e.target.value),className:"text-sm "+((null==Ae?void 0:Ae.some((e=>{const t=e.product_name||"",r=t.includes("Özel Tasarım")||t.includes("Tasarım"),a=t.includes("Promosyon")||t.includes("Promo");return r||a})))?"border-red-200 focus:border-red-400":"border-gray-200 focus:border-blue-400"),required:(null==Ae?void 0:Ae.some((e=>{const t=e.product_name||"",r=t.includes("Özel Tasarım")||t.includes("Tasarım"),a=t.includes("Promosyon")||t.includes("Promo");return r||a})))||!1}),i.jsx("p",{className:"text-xs text-gray-500",children:"Yaka rengi baskı detayları tablosunun üstünde görüntülenecektir."})]})]})]}),i.jsxs(ud,{className:"gap-2",children:[i.jsx(oo,{variant:"outline",onClick:()=>{N(!1),T("")},children:"İptal"}),i.jsxs(oo,{onClick:async()=>{if(!Ce)return void r({title:"Hata",description:"Sipariş bilgileri yüklenemedi.",variant:"destructive"});!((null==Ae?void 0:Ae.some((e=>{const t=e.product_name||"",r=t.includes("Özel Tasarım")||t.includes("Tasarım"),a=t.includes("Promosyon")||t.includes("Promo");return r||a})))||!1)||C.trim()?(await(async(e,t)=>{try{t({title:"Baskı PDF Hazırlanıyor...",description:"Lütfen bekleyin..."});const r=e.order.customer_name||"Musteri",a=e.order.customer_phone||"",n=r.replace(/\s+/g,"-").replace(/[^a-zA-ZğüşıöçĞÜŞİÖÇ0-9\-]/g,"").substring(0,50),s=a.replace(/[^0-9]/g,""),i=s?`${n}-${s}`:n,l=e.pageSize||"A4",o=window.open("","_blank");if(!o)throw new Error("Pop-up blocker prevented PDF generation");const c=Fse(e);o.document.write(c),o.document.close(),o.document.title=i,await new Promise((e=>{o.addEventListener("load",e),setTimeout(e,800)})),o.focus(),o.print(),setTimeout((()=>{o.close()}),100),t({title:"Başarılı",description:`Baskı PDF yazdırma penceresi açıldı. Dosya adı: ${i} (${l})`})}catch(r){t({title:"Hata",description:"Baskı PDF oluşturulurken bir hata oluştu.",variant:"destructive"})}})({order:Ce,orderItems:Ae,printRequests:Be,printDetails:Ie,payments:Me||[],pageSize:_,collarColor:C.trim()},r),N(!1),T("")):r({title:"Hata",description:"Özel Tasarım veya Promosyon ürünleri için yaka rengi belirtmeniz gereklidir.",variant:"destructive"})},className:"gap-2",children:[i.jsx(Aa,{className:"h-4 w-4"}),_," PDF İndir"]})]})]})}),i.jsx(sd,{open:!!O,onOpenChange:e=>!e&&P(null),children:i.jsxs(cd,{children:[i.jsx(dd,{children:i.jsxs(md,{className:"flex items-center gap-2 text-red-600",children:[i.jsx(en,{className:"h-5 w-5"}),"Ödeme Kaydını Sil"]})}),i.jsx("div",{className:"py-4",children:i.jsxs(C5,{children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx(T5,{children:"Bu ödeme kaydını silmek istediğinizden emin misiniz? Bu işlem geri alınamaz ve sipariş ödeme durumu otomatik olarak güncellenecektir."})]})}),i.jsxs(ud,{children:[i.jsx(oo,{variant:"outline",onClick:()=>P(null),children:"İptal"}),i.jsx(oo,{variant:"destructive",onClick:()=>O&&Ze.mutate(O),disabled:Ze.isPending,children:Ze.isPending?i.jsxs(i.Fragment,{children:[i.jsx(oa,{className:"h-4 w-4 mr-2 animate-spin"}),"Siliniyor..."]}):i.jsxs(i.Fragment,{children:[i.jsx(en,{className:"h-4 w-4 mr-2"}),"Sil"]})})]})]})})]});var st},iie=()=>{var e,t,r,a,n,s,l,o;const{userProfile:c,user:d}=Jl(),{toast:u}=at(),m=$e(),[h,p]=ze.useState({full_name:(null==c?void 0:c.full_name)||"",company:(null==c?void 0:c.company)||"",phone:(null==c?void 0:c.phone)||"",tax_office:(null==c?void 0:c.tax_office)||"",tax_number:(null==c?void 0:c.tax_number)||""}),[x,g]=ze.useState({street:(null==(e=null==c?void 0:c.billing_address)?void 0:e.street)||"",district:(null==(t=null==c?void 0:c.billing_address)?void 0:t.district)||"",city:(null==(r=null==c?void 0:c.billing_address)?void 0:r.city)||"",postal_code:(null==(a=null==c?void 0:c.billing_address)?void 0:a.postal_code)||""}),[f,y]=ze.useState({street:(null==(n=null==c?void 0:c.shipping_address)?void 0:n.street)||"",district:(null==(s=null==c?void 0:c.shipping_address)?void 0:s.district)||"",city:(null==(l=null==c?void 0:c.shipping_address)?void 0:l.city)||"",postal_code:(null==(o=null==c?void 0:c.shipping_address)?void 0:o.postal_code)||""}),[v,b]=ze.useState(!1),[j,k]=ze.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[w,N]=ze.useState({yurtici_token:(null==c?void 0:c.yurtici_token)||"",yurtici_username:(null==c?void 0:c.yurtici_username)||"",yurtici_password:(null==c?void 0:c.yurtici_password)||""}),_=Ke({mutationFn:async()=>{const{error:e}=await Wl.from("profiles").update(h).eq("id",null==c?void 0:c.id);if(e)throw e},onSuccess:()=>{u({title:"Başarılı",description:"Profil bilgileriniz güncellendi."}),m.invalidateQueries({queryKey:["user-profile"]})},onError:()=>{u({title:"Hata",description:"Profil güncellenirken bir hata oluştu.",variant:"destructive"})}}),S=Ke({mutationFn:async()=>{const e=v?x:f,{error:t}=await Wl.from("profiles").update({billing_address:x,shipping_address:e}).eq("id",null==c?void 0:c.id);if(t)throw t},onSuccess:()=>{u({title:"Başarılı",description:"Adres bilgileriniz güncellendi."}),m.invalidateQueries({queryKey:["user-profile"]})},onError:()=>{u({title:"Hata",description:"Adres güncellenirken bir hata oluştu.",variant:"destructive"})}}),C=Ke({mutationFn:async()=>{if(j.newPassword!==j.confirmPassword)throw new Error("Yeni şifreler eşleşmiyor");const{error:e}=await Wl.auth.updateUser({password:j.newPassword});if(e)throw e},onSuccess:()=>{u({title:"Başarılı",description:"Şifreniz güncellendi."}),k({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{u({title:"Hata",description:e.message||"Şifre güncellenirken bir hata oluştu.",variant:"destructive"})}}),T=Ke({mutationFn:async()=>{const{error:e}=await Wl.from("profiles").update({yurtici_token:null,yurtici_username:w.yurtici_username,yurtici_password:w.yurtici_password}).eq("id",null==c?void 0:c.id);if(e)throw e},onSuccess:()=>{u({title:"Başarılı",description:"Yurtiçi Kargo bilgileriniz güncellendi."}),m.invalidateQueries({queryKey:["user-profile"]})},onError:()=>{u({title:"Hata",description:"Yurtiçi Kargo bilgileri güncellenirken bir hata oluştu.",variant:"destructive"})}});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Hesap Bilgilerim"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Profil bilgilerinizi düzenleyin ve güncelleyin"})]}),i.jsxs(Yo,{defaultValue:"profile",className:"space-y-6",children:[i.jsxs(Vo,{className:"grid w-full grid-cols-4",children:[i.jsx(Go,{value:"profile",children:"Firma/Kişisel Bilgiler"}),i.jsx(Go,{value:"address",children:"Adres Bilgileri"}),i.jsx(Go,{value:"password",children:"Şifre Değiştirme"}),i.jsx(Go,{value:"cargo",children:"Kargo Entegrasyonu"})]}),i.jsx(Wo,{value:"profile",children:i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(mn,{className:"h-5 w-5"}),"Firma/Kişisel Bilgiler"]}),i.jsx(so,{children:"Temel bilgilerinizi güncelleyebilirsiniz"})]}),i.jsx(io,{children:i.jsxs("form",{onSubmit:e=>{e.preventDefault(),_.mutate()},className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"customer_code",children:"Müşteri Kodu"}),i.jsx(co,{id:"customer_code",value:(null==c?void 0:c.customer_code)||"Atanmamış",disabled:!0,className:"bg-gray-100"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"email",children:"E-posta"}),i.jsx(co,{id:"email",type:"email",value:(null==d?void 0:d.email)||"",disabled:!0,className:"bg-gray-100"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"full_name",children:"Ad Soyad *"}),i.jsx(co,{id:"full_name",value:h.full_name,onChange:e=>p((t=>({...t,full_name:e.target.value}))),required:!0})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"company",children:"Firma Adı"}),i.jsx(co,{id:"company",value:h.company,onChange:e=>p((t=>({...t,company:e.target.value})))})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"phone",children:"Telefon"}),i.jsx(co,{id:"phone",value:h.phone,onChange:e=>p((t=>({...t,phone:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"tax_office",children:"Vergi Dairesi"}),i.jsx(co,{id:"tax_office",value:h.tax_office,onChange:e=>p((t=>({...t,tax_office:e.target.value})))})]})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"tax_number",children:"Vergi Numarası"}),i.jsx(co,{id:"tax_number",value:h.tax_number,onChange:e=>p((t=>({...t,tax_number:e.target.value})))})]}),i.jsxs(oo,{type:"submit",disabled:_.isPending,children:[_.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):i.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Bilgileri Güncelle"]})]})})]})}),i.jsx(Wo,{value:"address",children:i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ma,{className:"h-5 w-5"}),"Adres Bilgileri"]}),i.jsx(so,{children:"Fatura ve teslimat adreslerinizi düzenleyebilirsiniz"})]}),i.jsx(io,{children:i.jsxs("form",{onSubmit:e=>{e.preventDefault(),S.mutate()},className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Fatura Adresi"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(po,{htmlFor:"billing_street",children:"Sokak"}),i.jsx(co,{id:"billing_street",value:x.street,onChange:e=>g((t=>({...t,street:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"billing_district",children:"İlçe"}),i.jsx(co,{id:"billing_district",value:x.district,onChange:e=>g((t=>({...t,district:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"billing_city",children:"Şehir"}),i.jsx(co,{id:"billing_city",value:x.city,onChange:e=>g((t=>({...t,city:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"billing_postal_code",children:"Posta Kodu"}),i.jsx(co,{id:"billing_postal_code",value:x.postal_code,onChange:e=>g((t=>({...t,postal_code:e.target.value})))})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"same_as_billing",checked:v,onChange:e=>{return t=e.target.checked,b(t),void(t&&y(x));var t},className:"rounded"}),i.jsx(po,{htmlFor:"same_as_billing",children:"Teslimat adresi fatura adresi ile aynı"})]}),!v&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Teslimat Adresi"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(po,{htmlFor:"shipping_street",children:"Sokak"}),i.jsx(co,{id:"shipping_street",value:f.street,onChange:e=>y((t=>({...t,street:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"shipping_district",children:"İlçe"}),i.jsx(co,{id:"shipping_district",value:f.district,onChange:e=>y((t=>({...t,district:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"shipping_city",children:"Şehir"}),i.jsx(co,{id:"shipping_city",value:f.city,onChange:e=>y((t=>({...t,city:e.target.value})))})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"shipping_postal_code",children:"Posta Kodu"}),i.jsx(co,{id:"shipping_postal_code",value:f.postal_code,onChange:e=>y((t=>({...t,postal_code:e.target.value})))})]})]})]}),i.jsxs(oo,{type:"submit",disabled:S.isPending,children:[S.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):i.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Adresleri Güncelle"]})]})})]})}),i.jsx(Wo,{value:"password",children:i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(sa,{className:"h-5 w-5"}),"Şifre Değiştirme"]}),i.jsx(so,{children:"Hesabınızın güvenliği için şifrenizi güncelleyebilirsiniz"})]}),i.jsx(io,{children:i.jsxs("form",{onSubmit:e=>{e.preventDefault(),C.mutate()},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"new_password",children:"Yeni Şifre"}),i.jsx(co,{id:"new_password",type:"password",value:j.newPassword,onChange:e=>k((t=>({...t,newPassword:e.target.value}))),required:!0})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"confirm_password",children:"Yeni Şifre (Tekrar)"}),i.jsx(co,{id:"confirm_password",type:"password",value:j.confirmPassword,onChange:e=>k((t=>({...t,confirmPassword:e.target.value}))),required:!0})]}),i.jsxs(oo,{type:"submit",disabled:C.isPending,children:[C.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):i.jsx(sa,{className:"h-4 w-4 mr-2"}),"Şifremi Değiştir"]})]})})]})}),i.jsx(Wo,{value:"cargo",children:i.jsxs(ro,{children:[i.jsxs(ao,{children:[i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(sn,{className:"h-5 w-5"}),"Yurtiçi Kargo Entegrasyonu"]}),i.jsx(so,{children:"Yurtiçi Kargo hesap bilgilerinizi buradan yönetebilirsiniz"})]}),i.jsx(io,{children:i.jsxs("form",{onSubmit:e=>{e.preventDefault(),T.mutate()},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(po,{htmlFor:"yurtici_username",children:"Kullanıcı Adı"}),i.jsx(co,{id:"yurtici_username",value:w.yurtici_username,onChange:e=>N((t=>({...t,yurtici_username:e.target.value}))),placeholder:"Yurtiçi Kargo kullanıcı adınız"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"yurtici_password",children:"Şifre"}),i.jsx(co,{id:"yurtici_password",type:"password",value:w.yurtici_password,onChange:e=>N((t=>({...t,yurtici_password:e.target.value}))),placeholder:"Yurtiçi Kargo şifreniz"})]}),i.jsxs("div",{children:[i.jsx(po,{htmlFor:"yurtici_token",children:"API Token (Otomatik)"}),i.jsx(co,{id:"yurtici_token",value:w.yurtici_token,disabled:!0,className:"bg-gray-100",placeholder:"Token otomatik olarak oluşturulacak"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Token, ilk kargo sorgulamasında kullanıcı adı ve şifre ile otomatik olarak oluşturulur. SMS doğrulaması gerekebilir."})]}),i.jsxs(oo,{type:"submit",disabled:T.isPending,children:[T.isPending?i.jsx(oa,{className:"h-4 w-4 animate-spin mr-2"}):i.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Bilgileri Güncelle"]})]})})]})})]})]})};function lie(){const{user:e}=Jl(),[t,r]=ze.useState(XC(new Date,"yyyy-MM-dd")),[a,n]=ze.useState(XC(new Date,"yyyy-MM-dd")),[s,l]=ze.useState(""),[o,c]=ze.useState(!1),[d,u]=ze.useState(null),[m,h]=ze.useState(""),[p,x]=ze.useState({username:"",password:""}),[g,f]=ze.useState({isOpen:!1,isLoading:!1,smsCode:"",phoneNumber:"",error:null,pendingRequest:null}),[y,v]=ze.useState([]);ze.useEffect((()=>{(async()=>{if(e)try{const{data:t,error:r}=await Wl.from("profiles").select("yurtici_token, yurtici_username, yurtici_password").eq("id",e.id).single();if(r)return void u("Kargo sistemi ayarları alınamadı. Lütfen daha sonra tekrar deneyin.");const a=null==t?void 0:t.yurtici_token,n=null==t?void 0:t.yurtici_username,s=null==t?void 0:t.yurtici_password;if(!n||!s)return void u("Yurtiçi Kargo entegrasyonu için gerekli bilgiler eksik. Lütfen profil ayarlarınızdan Yurtiçi Kargo bilgilerinizi güncelleyin.");a&&h(a),x({username:n,password:s})}catch(uie){u("Kargo sistemi ayarları okunurken bir hata oluştu.")}else u("Kullanıcı bilgileri alınamadı.")})()}),[e]);const b=async()=>{var t,r;try{const a=await fetch("https://api-ykss.yurticikargo.com/api/v1/auth",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.5","Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify({Username:p.username,Password:p.password,Language:"tr"})}),n=await a.json();if(!a.ok)throw new Error(n.message||"Token yenileme başarısız");if("requiredSmsVerification"===(null==(t=n.data)?void 0:t.errors))return new Promise((e=>{f((t=>({...t,isOpen:!0,phoneNumber:n.data.phoneNumber||"",error:null,pendingRequest:e,isLoading:!1,smsCode:""})))}));if(null==(r=n.data)?void 0:r.token){const t=n.data.token;return h(t),await Wl.from("profiles").update({yurtici_token:t,updated_at:(new Date).toISOString()}).eq("id",null==e?void 0:e.id),t}throw new Error("Token alınamadı")}catch(a){return null}},j=async t=>{var r;try{f((e=>({...e,isLoading:!0,error:null})));const a=await fetch("https://api-ykss.yurticikargo.com/api/v1/auth",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.5","Content-Type":"application/json",Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"},body:JSON.stringify({Username:p.username,Password:p.password,Language:"tr",smsCode:t})}),n=await a.json();if(!a.ok)throw new Error(n.message||"SMS doğrulama başarısız");if(null==(r=n.data)?void 0:r.token){const t=n.data.token;return h(t),await Wl.from("profiles").update({yurtici_token:t,updated_at:(new Date).toISOString()}).eq("id",null==e?void 0:e.id),f((e=>({...e,isOpen:!1,isLoading:!1,smsCode:"",error:null,pendingRequest:null}))),t}throw new Error("Token alınamadı")}catch(a){const e=a instanceof Error?a.message:"SMS doğrulama başarısız";return f((t=>({...t,isLoading:!1,error:e}))),null}},k=e=>{if(!e)return{name:"-",phone:""};const t=e.match(/\(([^)]+)\)/),r=t?`(${t[1]})`:"";let a=e.replace(/\(([^)]+)\)/,"").trim();return a=a.replace(/^\d+-\s*/,""),{name:a.trim(),phone:r}},w=(e,t)=>{var r;return{no:t+1,receiverName:(null==(r=e.receiverCustName)?void 0:r.split("\n")[0].trim())||"-",docId:e.docId||"-",currentLocation:e.currentLocation||"-",deliveryDate:(e=>{if(!e||8!==e.length)return"-";try{const t=e.slice(0,4),r=e.slice(4,6);return`${e.slice(6,8)}.${r}.${t}`}catch{return e}})(e.shipmentDeliveryDate),trackingUrl:e.trackingUrl||`https://www.yurticikargo.com/tr/online-servisler/gonderi-sorgula?code=${e.docId}`,departureUnit:k(e.departureUnitInfo),deliveryUnit:k(e.deliveryUnitInfo)}},N=async(e=0)=>{var r;if(!p.username||!p.password)throw new Error("Yurtiçi Kargo kullanıcı bilgileri bulunamadı. Lütfen önce profil ayarlarından Yurtiçi Kargo bilgilerinizi güncelleyin.");if(!m&&0===e){if(!(await b()))throw new Error("Token alınamadı. Lütfen profil ayarlarınızdan Yurtiçi Kargo bilgilerinizi kontrol edin.")}const n=new URL("https://api-ykss.yurticikargo.com/api/v1/Report/listShipmentsSswTracking");n.searchParams.append("StartDate",t),n.searchParams.append("EndDate",a),n.searchParams.append("ApiSearchKey",s),n.searchParams.append("FieldName","null"),n.searchParams.append("FieldValue",""),n.searchParams.append("DocId",""),n.searchParams.append("ReceiverCustNameIndex",""),n.searchParams.append("CargoEventReasonCode","");const i=await fetch(n.toString(),{method:"GET",headers:{Accept:"application/json, text/plain, */*","Accept-Language":"tr;q=0.8",Authorization:`Bearer ${m}`,Origin:"https://ykss.yurticikargo.com",Referer:"https://ykss.yurticikargo.com/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}});if(401===i.status&&0===e){if(await b())return N(e+1);throw new Error("Token yenilenemedi. Lütfen profil ayarlarınızdan yeniden giriş yapın.")}if(!i.ok){const e=await i.text();throw new Error(`API hatası: ${i.status} - ${e}`)}const l=await i.json();return Array.isArray(null==(r=l.data)?void 0:r.shipmentArray)?l.data.shipmentArray:[]},_=({data:e})=>i.jsxs(P5,{children:[i.jsx(A5,{children:i.jsxs(D5,{children:[i.jsx(M5,{children:"ID"}),i.jsx(M5,{children:"Alıcı Adı"}),i.jsx(M5,{children:"Takip No"}),i.jsx(M5,{children:"Mevcut Konum"}),i.jsx(M5,{children:"Teslim Tarihi"}),i.jsx(M5,{children:"Çıkış Şubesi"}),i.jsx(M5,{children:"Varış Şubesi"})]})}),i.jsx(E5,{children:0===e.length?i.jsx(D5,{children:i.jsx(z5,{colSpan:7,className:"text-center py-8",children:o?"Yükleniyor...":"Kayıt bulunamadı."})}):e.map((e=>i.jsxs(D5,{children:[i.jsx(z5,{children:e.no}),i.jsx(z5,{children:e.receiverName}),i.jsx(z5,{className:"font-medium",children:i.jsx("a",{href:e.trackingUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:e.docId})}),i.jsx(z5,{children:e.currentLocation}),i.jsx(z5,{children:e.deliveryDate}),i.jsxs(z5,{children:[i.jsx("div",{children:e.departureUnit.name}),e.departureUnit.phone&&i.jsx("div",{className:"text-xs text-muted-foreground",children:e.departureUnit.phone})]}),i.jsxs(z5,{children:[i.jsx("div",{children:e.deliveryUnit.name}),e.deliveryUnit.phone&&i.jsx("div",{className:"text-xs text-muted-foreground",children:e.deliveryUnit.phone})]})]},e.no)))})]});return i.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:i.jsx(sn,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Kargo Takip"}),i.jsx("p",{className:"text-muted-foreground",children:"Gönderilerinizin durumunu buradan takip edebilirsiniz."})]})]}),d&&i.jsxs(C5,{variant:"destructive",children:[i.jsx(Tr,{className:"h-4 w-4"}),i.jsx(T5,{children:d})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(Fa,{})," Arama Kriterleri"]})}),i.jsx(io,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(po,{htmlFor:"startDate",children:[i.jsx(pr,{className:"h-4 w-4 inline mr-1"}),"Başlangıç Tarihi"]}),i.jsx(co,{id:"startDate",type:"date",value:t,onChange:e=>r(e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(po,{htmlFor:"endDate",children:[i.jsx(pr,{className:"h-4 w-4 inline mr-1"}),"Bitiş Tarihi"]}),i.jsx(co,{id:"endDate",type:"date",value:a,onChange:e=>n(e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(po,{htmlFor:"searchQuery",children:[i.jsx(mn,{className:"h-4 w-4 inline mr-1"}),"Sorgu Kriteri"]}),i.jsx(co,{id:"searchQuery",type:"text",placeholder:"Alıcı adı, gönderi no...",value:s,onChange:e=>l(e.target.value)})]}),i.jsx(oo,{onClick:async()=>{c(!0),u(null),v([]);try{const e=(await N()).map(w);v(e)}catch(uie){u(uie instanceof Error?uie.message:"Bilinmeyen bir hata oluştu")}finally{c(!1)}},disabled:o,children:o?"Aranıyor...":"Ara"})]})})]}),i.jsxs(ro,{children:[i.jsx(ao,{children:i.jsxs(no,{className:"flex items-center gap-2",children:[i.jsx(ba,{})," Gönderi Listesi"]})}),i.jsx(io,{children:i.jsx("div",{className:"rounded-md border",children:i.jsx(_,{data:y})})})]}),i.jsx(sd,{open:g.isOpen,onOpenChange:e=>{e||g.isLoading||f((e=>({...e,isOpen:!1,smsCode:"",error:null,pendingRequest:null})))},children:i.jsxs(cd,{children:[i.jsxs(dd,{children:[i.jsx(md,{children:"SMS Doğrulama"}),i.jsxs(hd,{children:[g.phoneNumber," numaralı telefona gelen kodu giriniz."]})]}),g.error&&i.jsx(C5,{variant:"destructive",children:g.error}),i.jsx(co,{value:g.smsCode,onChange:e=>f((t=>({...t,smsCode:e.target.value.replace(/\D/g,"").slice(0,6)}))),maxLength:6,onKeyDown:async e=>{if("Enter"===e.key&&6===g.smsCode.length&&g.pendingRequest){const e=await j(g.smsCode);g.pendingRequest(e)}}}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(oo,{onClick:async()=>{const e=await j(g.smsCode);e&&g.pendingRequest&&g.pendingRequest(e)},disabled:g.isLoading||6!==g.smsCode.length,className:"flex-1",children:g.isLoading?"Doğrulanıyor...":"Doğrula"}),i.jsx(oo,{variant:"outline",onClick:()=>{g.isLoading||f((e=>({...e,isOpen:!1,smsCode:"",error:null,pendingRequest:null})))},disabled:g.isLoading,children:"İptal"})]})]})})]})}const oie=new Ue;function cie(){return i.jsx(He,{client:oie,children:i.jsx(Zl,{children:i.jsx(to,{children:i.jsx(Vl,{defaultTheme:"light",storageKey:"vite-ui-theme",children:i.jsxs(yi,{children:[i.jsx(Ns,{}),i.jsx(Ys,{}),i.jsxs(Il,{children:[i.jsx(xS,{}),i.jsxs(Al,{children:[i.jsx(Ol,{path:"/",element:i.jsx(jo,{})}),i.jsx(Ol,{path:"/dashboard",element:i.jsx(No,{})}),i.jsxs(Ol,{path:"/admin",element:i.jsx(FS,{}),children:[i.jsx(Ol,{index:!0,element:i.jsx(Cl,{to:"/admin/dashboard",replace:!0})}),i.jsx(Ol,{path:"dashboard",element:i.jsx(O5,{})}),i.jsx(Ol,{path:"orders",element:i.jsx(h8,{})}),i.jsx(Ol,{path:"payment-management",element:i.jsx(p8,{})}),i.jsx(Ol,{path:"payment-slips",element:i.jsx(l7,{})}),i.jsx(Ol,{path:"orders/:id",element:i.jsx(sie,{})}),i.jsx(Ol,{path:"invoices",element:i.jsx(g8,{})}),i.jsx(Ol,{path:"products",element:i.jsx(v8,{})}),i.jsx(Ol,{path:"products/new",element:i.jsx(U8,{})}),i.jsx(Ol,{path:"products/additional",element:i.jsx(v8,{})}),i.jsx(Ol,{path:"products/design",element:i.jsx(v8,{})}),i.jsx(Ol,{path:"products/promotion",element:i.jsx(v8,{})}),i.jsx(Ol,{path:"products/print-regions",element:i.jsx(v8,{})}),i.jsx(Ol,{path:"products/:id",element:i.jsx(b8,{})}),i.jsx(Ol,{path:"products/:id/edit",element:i.jsx(K8,{})}),i.jsx(Ol,{path:"users",element:i.jsx(H8,{})}),i.jsx(Ol,{path:"users/pending",element:i.jsx(Y8,{})}),i.jsx(Ol,{path:"pending-users",element:i.jsx(Cl,{to:"/admin/users/pending",replace:!0})}),i.jsx(Ol,{path:"settings",element:i.jsx(C9,{})}),i.jsx(Ol,{path:"sales",element:i.jsx(U9,{})}),i.jsx(Ol,{path:"sales/payment-analytics",element:i.jsx(i7,{})}),i.jsx(Ol,{path:"employees",element:i.jsx(Vte,{})}),i.jsx(Ol,{path:"employees/new",element:i.jsx(jae,{})}),i.jsx(Ol,{path:"employees/positions",element:i.jsx(Sae,{})}),i.jsx(Ol,{path:"employees/:id",element:i.jsx(Nae,{})}),i.jsx(Ol,{path:"employees/:id/edit",element:i.jsx(Nae,{})}),i.jsx(Ol,{path:"cargo/delivery-list",element:i.jsx(o7,{})}),i.jsx(Ol,{path:"cargo/new-shipment",element:i.jsx(Cte,{})}),i.jsx(Ol,{path:"production",element:i.jsx(Ate,{})}),i.jsx(Ol,{path:"dealers",element:i.jsx(Bte,{})})]}),i.jsxs(Ol,{path:"/customer",element:i.jsx(Lae,{}),children:[i.jsx(Ol,{index:!0,element:i.jsx(Cl,{to:"/customer/dashboard",replace:!0})}),i.jsx(Ol,{path:"dashboard",element:i.jsx(qae,{})}),i.jsx(Ol,{path:"orders/new",element:i.jsx(Mse,{})}),i.jsx(Ol,{path:"ready-stock-order",element:i.jsx(zse,{})}),i.jsx(Ol,{path:"design-order",element:i.jsx(Rse,{})}),i.jsx(Ol,{path:"orders",element:i.jsx(Ise,{})}),i.jsx(Ol,{path:"orders/:id",element:i.jsx(sie,{})}),i.jsx(Ol,{path:"profile",element:i.jsx(iie,{})}),i.jsx(Ol,{path:"cargo-tracking",element:i.jsx(lie,{})}),i.jsx(Ol,{path:"admin/products",element:i.jsx(v8,{})}),i.jsx(Ol,{path:"admin/products/new",element:i.jsx(U8,{})}),i.jsx(Ol,{path:"admin/products/additional",element:i.jsx(v8,{})}),i.jsx(Ol,{path:"admin/products/design",element:i.jsx(v8,{})}),i.jsx(Ol,{path:"admin/products/print-regions",element:i.jsx(v8,{})}),i.jsx(Ol,{path:"admin/products/:id",element:i.jsx(b8,{})}),i.jsx(Ol,{path:"admin/products/:id/edit",element:i.jsx(K8,{})}),i.jsx(Ol,{path:"admin/orders",element:i.jsx(h8,{})}),i.jsx(Ol,{path:"admin/orders/:id",element:i.jsx(sie,{})})]}),i.jsx(Ol,{path:"*",element:i.jsx(_o,{})})]})]}),i.jsx(pS,{})]})})})})})}e(document.getElementById("root")).render(i.jsx(cie,{}));
