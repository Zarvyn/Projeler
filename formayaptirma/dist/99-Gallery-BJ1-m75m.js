import{n as e,j as s,a7 as r,a8 as a,s as l,a9 as t,y as i,aa as c,X as n,ab as o,ac as d,J as m}from"./03-hero-critical-BKzCa96P.js";import{r as p}from"./01-react-core-DCvPBpDR.js";import{J as y}from"./99-JerseyCard-DWmTcMYn.js";import{B as h}from"./04-ui-components-DpbmxBFV.js";import{L as x}from"./99-label-DtO75rKq.js";import{I as u}from"./05-admin-bundle-BW3OFzIa.js";import{b as f,u as j}from"./02-react-router-l50u7dmW.js";import"./06-utils-QQqVvbBo.js";import"./99-badge-CpQK4qLU.js";const g=({filters:t,onFilterChange:i,onReset:c})=>{const{t:n,language:o}=e(),[d,m]=p.useState([]),[y,u]=p.useState([]),[f,j]=p.useState([]),[g,_]=p.useState([]),[w,v]=p.useState(!1);p.useEffect((()=>{(async()=>{v(!0);try{const{data:e,error:s}=await l.from("jersey_types").select("*").eq("is_active",!0).order("name",{ascending:!1});if(s)throw s;m(e||[]);const{data:r,error:a}=await l.from("price_ranges").select("*").order("min",{ascending:!0});if(a)throw a;u(r||[]),null==r||r.find((e=>e.is_default));const{data:t,error:i}=await l.from("order_quantities").select("*").order("value",{ascending:!0});if(i)throw i;j(t||[]),null==t||t.find((e=>e.is_default));const{data:c,error:n}=await l.from("jersey_colors").select("*").eq("is_active",!0).order("name",{ascending:!0});if(n)throw n;_(c||[])}catch(e){}finally{v(!1)}})()}),[]);const N=e=>{i({...t,jerseyType:e,specialFilter:"all"!==e?"all":t.specialFilter})},k=e=>{i({...t,specialFilter:e,jerseyType:"all"!==e?"all":t.jerseyType})};return w?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 sticky top-24 flex justify-center items-center h-64",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(r,{className:"h-8 w-8 animate-spin text-primary mb-2"}),s.jsx("p",{children:n("Urun_Yukleniyor")||"Ürünler yükleniyor..."})]})}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 sticky top-24",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsxs(h,{variant:"outline",size:"sm",onClick:c,children:[s.jsx(a,{className:"h-4 w-4 mr-1"})," ",n("reset_filters")]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(x,{className:"block mb-2 font-medium",children:n("jersey_type")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"all-types",name:"jersey-type",checked:"all"===t.jerseyType,onChange:()=>N("all"),className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary"}),s.jsx(x,{htmlFor:"all-types",className:"cursor-pointer",children:n("all_types")})]}),d.map((e=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:`type-${e.id}`,name:"jersey-type",checked:t.jerseyType===e.id,onChange:()=>N(e.id),className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary"}),s.jsx(x,{htmlFor:`type-${e.id}`,className:"cursor-pointer",children:"tr"===o?e.name_tr:e.name})]},e.id)))]})]}),s.jsxs("div",{children:[s.jsx(x,{className:"block mb-2 font-medium",children:n("special_filters")||"Özel Filtreler"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"new-filter",name:"special-filter",checked:"new"===t.specialFilter,onChange:()=>k("new"),className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary"}),s.jsx(x,{htmlFor:"new-filter",className:"cursor-pointer",children:n("new_arrivals")})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"popular-filter",name:"special-filter",checked:"popular"===t.specialFilter,onChange:()=>k("popular"),className:"h-4 w-4 rounded-full border-gray-300 text-primary focus:ring-primary"}),s.jsx(x,{htmlFor:"popular-filter",className:"cursor-pointer",children:n("popular_items")})]})]})]})]})]})},_={id:"",title_en:"All Products",title_tr:"Tüm Ürünler",description_en:"Browse our collection of high-quality custom jerseys for your team.",description_tr:"Takımınız için yüksek kaliteli özel formaları keşfedin.",items_per_page:12,show_search:!0,show_filters:!0,default_filter_view:"expanded",show_price:!0,show_min_order:!0,show_stock_status:!0,show_delivery_time:!0,delivery_time_text_en:"2-3 business days delivery",delivery_time_text_tr:"2-3 iş gününde teslim",layout_type:"grid",sort_order:"newest"},w=()=>{const a=f(),x=j(),w=new URLSearchParams(x.search),{t:v,language:N}=e(),k=()=>{const e="true"===w.get("showNew"),s="true"===w.get("showPopular");return e?"new":s?"popular":"all"},b={jerseyType:w.get("jerseyType")||"all",colors:[],specialFilter:k()},[T,C]=p.useState(""),[F,S]=p.useState(!1),[z,$]=p.useState(b),[P,E]=p.useState([]),[L,q]=p.useState([]),[D,O]=p.useState(!0),[Y,A]=p.useState({}),[J,R]=p.useState(!1),[B,M]=p.useState({}),[U,G]=p.useState(_);p.useEffect((()=>{(async()=>{try{const{data:e,error:s}=await l.from("seo_settings").select("*").single();s&&s.code,e&&A(e)}catch(e){}})()}),[]),p.useEffect((()=>{(async()=>{try{const{data:e,error:s}=await l.from("gallery_settings").select("*").single();s&&s.code,e&&(G(e),S("expanded"===e.default_filter_view))}catch(e){}})()}),[]),p.useEffect((()=>{(async()=>{try{O(!0);const{data:e,error:s}=await l.from("jersey_types").select("id, name"),r=(e||[]).reduce(((e,s)=>(e[s.id]=s.name,e)),{});M(r);const{data:a,error:t}=await l.from("products").select("*");if(t)throw t;if(!a||0===a.length)return E([]),q([]),O(!1),void R(!0);let i=[...a];switch(U.sort_order){case"newest":i.sort(((e,s)=>new Date(s.created_at||"").getTime()-new Date(e.created_at||"").getTime()));break;case"price_low":i.sort(((e,s)=>(e.price||0)-(s.price||0)));break;case"price_high":i.sort(((e,s)=>(s.price||0)-(e.price||0)));break;case"display_order":i.sort(((e,s)=>(e.display_id||999)-(s.display_id||999)));break;default:i.sort(((e,s)=>s.name.localeCompare(e.name)))}const c=(e=>e&&0!==e.length?e.map((e=>{const s=e.slug||(e.name||"").toLowerCase().replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ç/g,"c").replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-|-$/g,""),r=e.jersey_type?e.jersey_type:"all";return{id:e.id,name:e.name||"",image:e.image_url||"/placeholder.svg",minOrder:e.min_order||10,price:e.price||0,colors:e.colors||1,isPopular:e.is_popular||!1,isNew:e.is_new||!1,jerseyType:r,slug:s,display_id:e.display_id,stock:e.stock||0,deliveryTime:"en"===N?U.delivery_time_text_en:U.delivery_time_text_tr,displayOrder:e.display_id}})):[])(i);E(c),q(c),R(!0)}catch(e){m.error(v("error_fetching_products")||"Ürünler yüklenirken hata oluştu")}finally{O(!1)}})()}),[v,U]),p.useEffect((()=>{J&&P.length>0&&((e,s,r)=>{if(!e||0===e.length)return void q([]);let a=[...e];if(r&&""!==r.trim()&&(a=a.filter((e=>e.name.toLowerCase().includes(r.toLowerCase())))),"all"!==s.jerseyType&&(a=a.filter((e=>e.jerseyType===s.jerseyType))),"new"===s.specialFilter||"popular"===s.specialFilter){const e="new"===s.specialFilter,r="popular"===s.specialFilter,l=a.filter((s=>e?s.isNew:!!r&&s.isPopular)),t=a.filter((s=>e?!s.isNew:!r||!s.isPopular));l.sort(((e,s)=>e.display_id&&s.display_id?e.display_id-s.display_id:e.name.localeCompare(s.name))),t.sort(((e,s)=>e.display_id&&s.display_id?e.display_id-s.display_id:e.name.localeCompare(s.name))),a=[...l,...t]}else a.sort(((e,s)=>e.display_id&&s.display_id?e.display_id-s.display_id:e.name.localeCompare(s.name)));q(a)})(P,z,T)}),[z,T,P,J]),p.useEffect((()=>{if(!J)return;const e=w.get("jerseyType")||"all",s=k();$((r=>({...r,jerseyType:e,specialFilter:s})))}),[x.search,J]);const I=()=>{$({jerseyType:"all",colors:[],specialFilter:"all"}),C("")},H="en"===N?U.title_en:U.title_tr,K="en"===N?U.description_en:U.description_tr;return s.jsx(t,{children:s.jsxs("div",{children:[s.jsxs(i,{children:[s.jsx("title",{children:Y.meta_title||`${H} - ${Y.site_title||"Athletic Galaxy"}`}),s.jsx("meta",{name:"description",content:Y.meta_description||K||""}),Y.keywords&&s.jsx("meta",{name:"keywords",content:Y.keywords}),s.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),s.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),s.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),s.jsx("link",{rel:"preload",href:P.length>0?P[0].image:"/placeholder.svg",as:"image"})]}),s.jsx("div",{className:"mb-8",children:s.jsxs(h,{variant:"ghost",onClick:()=>a("/"),className:"flex items-center gap-2 group",children:[s.jsx(c,{className:"h-4 w-4 text-primary group-hover:text-primary/80 transition-colors"}),s.jsx("span",{className:"text-base text-primary group-hover:text-primary/80 transition-colors",children:v("back_to_home")||"Ana Sayfaya Dön"})]})}),s.jsx("div",{className:"mb-10 text-left",children:("all"!==z.specialFilter||"all"!==z.jerseyType)&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:["popular"===z.specialFilter&&s.jsxs("div",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm flex items-center",children:[s.jsx("span",{children:v("popular_jerseys")||"Popüler Ürünler"}),s.jsx(h,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-1 -mr-1",onClick:()=>$((e=>({...e,specialFilter:"all"}))),children:s.jsx(n,{className:"h-3 w-3"})})]}),"new"===z.specialFilter&&s.jsxs("div",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm flex items-center",children:[s.jsx("span",{children:v("Yeni Ürünler")||"Yeni Ürünler"}),s.jsx(h,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-1 -mr-1",onClick:()=>$((e=>({...e,specialFilter:"all"}))),children:s.jsx(n,{className:"h-3 w-3"})})]}),"all"!==z.jerseyType&&s.jsxs("div",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm flex items-center",children:[s.jsx("span",{children:B[z.jerseyType]||z.jerseyType}),s.jsx(h,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-1 -mr-1",onClick:()=>$((e=>({...e,jerseyType:"all"}))),children:s.jsx(n,{className:"h-3 w-3"})})]}),s.jsx(h,{variant:"ghost",size:"sm",className:"text-sm",onClick:I,children:v("clear_all")||"Tümünü Temizle"})]})}),U.show_search&&s.jsxs("div",{className:"flex flex-col md:hidden gap-4 mb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),s.jsx(u,{type:"text",placeholder:v("search_placeholder"),value:T,onChange:e=>C(e.target.value),className:"pl-10"})]}),U.show_filters&&s.jsxs(h,{variant:"outline",className:"w-full",onClick:()=>S(!F),children:[s.jsx(d,{className:"h-4 w-4 mr-2"}),v(F?"hide_filters":"show_filters")]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[U.show_filters&&s.jsx("div",{className:`md:w-64 ${F||"hidden md:block"}`,children:s.jsx(g,{filters:z,onFilterChange:e=>$(e),onReset:I})}),s.jsxs("div",{className:"flex-1",children:[U.show_search&&s.jsxs("div",{className:"hidden md:flex mb-6 relative",children:[s.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),s.jsx(u,{type:"text",placeholder:v("search_placeholder"),value:T,onChange:e=>C(e.target.value),className:"pl-10 w-full max-w-md"})]}),s.jsx("div",{className:"mb-6 text-left",children:s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:D?s.jsxs("span",{className:"flex items-center",children:[s.jsx(r,{className:"h-4 w-4 mr-2 animate-spin"}),v("loading")||"Yükleniyor..."]}):`${v("showing")} ${L.length} ${1===L.length?v("jersey_singular"):v("jersey_plural")}`})}),D?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(r,{className:"h-12 w-12 animate-spin text-primary"})}):L.length>0?s.jsx("div",{className:"grid"===U.layout_type?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3":"list"===U.layout_type?"flex flex-col gap-2":"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-3",children:L.map((e=>s.jsx(y,{jersey:e,showPrice:U.show_price,showMinOrder:U.show_min_order,showStockStatus:U.show_stock_status,showDeliveryTime:U.show_delivery_time,layout:U.layout_type},e.id)))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-xl font-medium mb-2",children:v("no_jerseys_found")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:v("adjust_filters")}),s.jsx(h,{onClick:I,children:v("reset_filters")})]})]})]})]})})};export{w as default};
