import{j as e,X as s,aF as a,aj as r,aI as i,aG as t,s as l,J as n}from"./03-hero-critical-BKzCa96P.js";import{r as c}from"./01-react-core-DCvPBpDR.js";import{B as d}from"./04-ui-components-DpbmxBFV.js";import{I as o}from"./05-admin-bundle-BW3OFzIa.js";import{T as m,a as u,b as x,c as h,d as j,e as p}from"./99-table-DV3dN7kr.js";import{S as v,a as f,b as y,c as g,d as _}from"./99-select-CL9TI2Dz.js";import{u as b}from"./99-index.esm-2mfLcUez.js";import"./02-react-router-l50u7dmW.js";import"./06-utils-QQqVvbBo.js";import"./99-index-CxCer4qO.js";import"./99-index-D5v_MFz8.js";const N=[{value:"color",label:"Color"},{value:"fabric",label:"Fabric"},{value:"font",label:"Font"}],w=()=>{const[w,k]=c.useState([]),[C,V]=c.useState(!0),[F,S]=c.useState("color"),[A,O]=c.useState(null),[q,z]=c.useState(!1),I=b({defaultValues:{name:"",name_tr:"",value:"",is_active:!0,display_order:0}}),D=b({defaultValues:{name:"",name_tr:"",value:"",is_active:!0,display_order:0}}),E=async()=>{try{V(!0);const{data:e,error:s}=await l.from("design_options").select("*").eq("type",F).order("display_order");if(s)throw s;k(e||[])}catch(e){n.error("Failed to load design options")}finally{V(!1)}};return c.useEffect((()=>{E()}),[F]),e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Design Options"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(v,{value:F,onValueChange:S,children:[e.jsx(f,{className:"w-40",children:e.jsx(y,{placeholder:"Filter by type"})}),e.jsx(g,{children:N.map((s=>e.jsx(_,{value:s.value,children:s.label},s.value)))})]}),e.jsxs(d,{onClick:()=>{I.reset(),z(!q)},variant:"default",children:[q?e.jsx(s,{className:"mr-2 h-4 w-4"}):e.jsx(a,{className:"mr-2 h-4 w-4"}),q?"Cancel":"Add Option"]})]})]}),q&&e.jsxs("div",{className:"bg-muted/50 p-4 mb-6 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-medium mb-4",children:["Add New ",F.charAt(0).toUpperCase()+F.slice(1)," Option"]}),e.jsxs("form",{onSubmit:I.handleSubmit((async e=>{try{const s={type:F,name:e.name,name_tr:e.name_tr,value:e.value,is_active:e.is_active,display_order:e.display_order||w.length+1},{error:a}=await l.from("design_options").insert(s);if(a)throw a;n.success("Option added successfully"),I.reset(),z(!1),E()}catch(s){n.error("Failed to add option")}})),className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name (English)"}),e.jsx(o,{...I.register("name"),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name (Turkish)"}),e.jsx(o,{...I.register("name_tr"),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"color"===F?"Hex Color Value":"Value"}),e.jsx(o,{...I.register("value"),required:!0,type:"color"===F?"color":"text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Display Order"}),e.jsx(o,{...I.register("display_order"),type:"number",min:"0",defaultValue:w.length+1})]}),e.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-2 mt-4",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(d,{type:"submit",children:"Save"})]})]})]}),C?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map((s=>e.jsx("div",{className:"h-14 bg-gray-200 dark:bg-gray-700 rounded"},s)))}):e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs(x,{children:[e.jsx(h,{children:"Name (EN)"}),e.jsx(h,{children:"Name (TR)"}),e.jsx(h,{children:"Value"}),e.jsx(h,{children:"Order"}),e.jsx(h,{children:"Status"}),e.jsx(h,{className:"text-right",children:"Actions"})]})}),e.jsx(j,{children:0===w.length?e.jsx(x,{children:e.jsx(p,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No options found for this type. Add a new one!"})}):w.map((a=>e.jsx(x,{children:A===a.id?e.jsxs(e.Fragment,{children:[e.jsx(p,{children:e.jsx(o,{...D.register("name"),defaultValue:a.name})}),e.jsx(p,{children:e.jsx(o,{...D.register("name_tr"),defaultValue:a.name_tr})}),e.jsx(p,{children:e.jsx(o,{...D.register("value"),defaultValue:a.value,type:"color"===F?"color":"text"})}),e.jsx(p,{children:e.jsx(o,{...D.register("display_order"),type:"number",defaultValue:a.display_order,className:"w-20"})}),e.jsx(p,{children:e.jsxs(v,{defaultValue:a.is_active?"true":"false",onValueChange:e=>D.setValue("is_active","true"===e),children:[e.jsx(f,{className:"w-24",children:e.jsx(y,{})}),e.jsxs(g,{children:[e.jsx(_,{value:"true",children:"Active"}),e.jsx(_,{value:"false",children:"Inactive"})]})]})}),e.jsxs(p,{className:"text-right space-x-2",children:[e.jsx(d,{size:"sm",variant:"outline",onClick:()=>O(null),children:e.jsx(s,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",onClick:()=>{const e=D.getValues();(async(e,s)=>{try{const{error:a}=await l.from("design_options").update({name:s.name,name_tr:s.name_tr,value:s.value,is_active:s.is_active,display_order:s.display_order}).eq("id",e);if(a)throw a;n.success("Option updated successfully"),O(null),E()}catch(a){n.error("Failed to update option")}})(a.id,e)},children:e.jsx(r,{className:"h-4 w-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{children:a.name}),e.jsx(p,{children:a.name_tr}),e.jsx(p,{children:"color"===F?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full mr-2",style:{backgroundColor:a.value}}),a.value]}):a.value}),e.jsx(p,{children:a.display_order}),e.jsx(p,{children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(a.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:a.is_active?"Active":"Inactive"})}),e.jsxs(p,{className:"text-right space-x-1",children:[e.jsx(d,{size:"icon",variant:"outline",onClick:()=>(async(e,s)=>{try{const{error:a}=await l.from("design_options").update({is_active:!s}).eq("id",e);if(a)throw a;n.success(`Option ${s?"deactivated":"activated"} successfully`),E()}catch(a){n.error("Failed to update option status")}})(a.id,a.is_active),children:a.is_active?"Deactivate":"Activate"}),e.jsx(d,{size:"icon",variant:"outline",onClick:()=>(e=>{O(e.id),D.reset({name:e.name,name_tr:e.name_tr,value:e.value,is_active:e.is_active,display_order:e.display_order})})(a),children:e.jsx(i,{className:"h-4 w-4"})}),e.jsx(d,{size:"icon",variant:"destructive",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this option?"))try{const{error:s}=await l.from("design_options").delete().eq("id",e);if(s)throw s;n.success("Option deleted successfully"),E()}catch(s){n.error("Failed to delete option")}})(a.id),children:e.jsx(t,{className:"h-4 w-4"})})]})]})},a.id)))})]})]})};export{w as default};
