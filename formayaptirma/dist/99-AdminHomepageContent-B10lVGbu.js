import{n as e,s,J as i,j as a,a7 as t,aS as r,aT as n,aG as l,aF as d,aU as c,au as o,at as m}from"./03-hero-critical-BKzCa96P.js";import{r as u}from"./01-react-core-DCvPBpDR.js";import{C as h,g as p,h as _,i as x,f as g,B as j,p as y}from"./04-ui-components-DpbmxBFV.js";import{T as f,a as v,b as k,c as w}from"./99-tabs-CCs0hPp1.js";import{I as N}from"./05-admin-bundle-BW3OFzIa.js";import{L as b}from"./99-label-DtO75rKq.js";import{T as S}from"./99-textarea-BOZk7JoE.js";import{a as z,b as C,c as F,A}from"./99-accordion-BRlPMYDB.js";import{S as B}from"./99-switch-BaDU39Q5.js";import{I as T}from"./99-image-uploader-KY2aE3Hk.js";import{B as E}from"./99-badge-CpQK4qLU.js";import{F as I,a as V,b as D,c as $,d as K,f as Y}from"./99-form-BQypkM9v.js";import{u as O}from"./99-index.esm-2mfLcUez.js";import"./02-react-router-l50u7dmW.js";import"./06-utils-QQqVvbBo.js";import"./99-index-CxCer4qO.js";import"./99-index-D5v_MFz8.js";const U=()=>{const{t:r}=e(),[n,l]=u.useState("featured"),[d,c]=u.useState(!0),[o,m]=u.useState(!1),[y,z]=u.useState({section:"featured",title_tr:"",title_en:"",description_tr:"",description_en:""}),[C,F]=u.useState({section:"popular",title_tr:"",title_en:"",description_tr:"",description_en:""}),[A,B]=u.useState({section:"latest",title_tr:"",title_en:"",description_tr:"",description_en:""}),[T,E]=u.useState({section:"features",title_tr:"",title_en:"",description_tr:"",description_en:""});u.useEffect((()=>{(async()=>{c(!0);try{const{data:e,error:i}=await s.from("homepage_content").select("*");if(i)throw i;e&&e.length>0&&e.forEach((e=>{switch(e.section){case"featured":z(e);break;case"popular":F(e);break;case"latest":B(e);break;case"features":E(e)}}))}catch(e){i.error(r("content_load_error")||"İçerik yüklenirken hata oluştu")}finally{c(!1)}})()}),[r]);const I=(e,n)=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(b,{htmlFor:`${e.section}-title-tr`,children:r("title_tr")||"Başlık (TR)"}),a.jsx(N,{id:`${e.section}-title-tr`,value:e.title_tr,onChange:s=>n({...e,title_tr:s.target.value}),placeholder:"Başlık Türkçe"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(b,{htmlFor:`${e.section}-title-en`,children:r("title_en")||"Başlık (EN)"}),a.jsx(N,{id:`${e.section}-title-en`,value:e.title_en,onChange:s=>n({...e,title_en:s.target.value}),placeholder:"Title English"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(b,{htmlFor:`${e.section}-description-tr`,children:r("description_tr")||"Açıklama (TR)"}),a.jsx(S,{id:`${e.section}-description-tr`,value:e.description_tr,onChange:s=>n({...e,description_tr:s.target.value}),placeholder:"Açıklama Türkçe",rows:4})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(b,{htmlFor:`${e.section}-description-en`,children:r("description_en")||"Açıklama (EN)"}),a.jsx(S,{id:`${e.section}-description-en`,value:e.description_en,onChange:s=>n({...e,description_en:s.target.value}),placeholder:"Description English",rows:4})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(j,{onClick:()=>(async e=>{m(!0);try{if(e.id){const{error:a}=await s.from("homepage_content").update({title_tr:e.title_tr,title_en:e.title_en,description_tr:e.description_tr,description_en:e.description_en,updated_at:(new Date).toISOString()}).eq("id",e.id);if(a)throw a;i.success(r("content_updated")||"İçerik güncellendi")}else{const{error:a}=await s.from("homepage_content").insert({section:e.section,title_tr:e.title_tr,title_en:e.title_en,description_tr:e.description_tr,description_en:e.description_en});if(a)throw a;window.location.reload(),i.success(r("content_created")||"İçerik oluşturuldu")}}catch(a){i.error(r("content_save_error")||"İçerik kaydedilirken hata oluştu")}finally{m(!1)}})(e),disabled:o,children:[o&&a.jsx(t,{className:"mr-2 h-4 w-4 animate-spin"}),r("save")||"Kaydet"]})})]});return d?a.jsx("div",{className:"flex justify-center items-center p-10",children:a.jsx(t,{className:"h-10 w-10 animate-spin text-primary"})}):a.jsxs(h,{className:"w-full",children:[a.jsxs(p,{children:[a.jsx(_,{children:r("homepage_section_content")||"Anasayfa Bölüm İçerikleri"}),a.jsx(x,{children:r("homepage_section_content_description")||"Anasayfadaki bölümlerin başlık ve açıklamalarını düzenleyin."})]}),a.jsx(g,{children:a.jsxs(f,{defaultValue:n,onValueChange:l,children:[a.jsxs(v,{className:"grid w-full grid-cols-4 mb-4",children:[a.jsx(k,{value:"featured",children:r("featured_section")||"Öne Çıkan"}),a.jsx(k,{value:"popular",children:r("popular_section")||"Popüler"}),a.jsx(k,{value:"latest",children:r("latest_section")||"Yeni Eklenenler"}),a.jsx(k,{value:"features",children:r("features_section")||"Özellikler"})]}),a.jsx(w,{value:"featured",className:"pt-4",children:I(y,z)}),a.jsx(w,{value:"popular",className:"pt-4",children:I(C,F)}),a.jsx(w,{value:"latest",className:"pt-4",children:I(A,B)}),a.jsx(w,{value:"features",className:"pt-4",children:I(T,E)})]})})]})},q=({section:e,onUpdate:s,onDelete:i,onAddFeature:o,saving:m,sections:h,setSections:p})=>{const[_,x]=u.useState(e),[g,y]=u.useState("tr"),[A,E]=u.useState(!1),I=e=>{const{name:s,value:i}=e.target;x((e=>({...e,[s]:i})))};return a.jsxs(z,{value:e.id,className:"border rounded-md",children:[a.jsx(C,{className:"px-4 hover:no-underline",children:a.jsxs("span",{className:"flex items-center gap-2",children:[_.is_active?a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}):a.jsx("span",{className:"w-2 h-2 bg-gray-300 rounded-full"}),a.jsx("span",{children:"tr"===g?_.title_tr:_.title_en})]})}),a.jsxs(F,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(j,{variant:"outline",size:"sm",onClick:()=>{if(e.display_order<=0)return;const i=[...h],a=i.findIndex((s=>s.id===e.id)),t=i.findIndex((s=>s.display_order===e.display_order-1));if(-1===t)return;const r={..._,display_order:_.display_order-1},n={...i[t],display_order:i[t].display_order+1};i[a]=r,i[t]=n,x(r),p(i),s(r),s(n)},disabled:e.display_order<=0,children:a.jsx(r,{className:"h-4 w-4"})}),a.jsx(j,{variant:"outline",size:"sm",onClick:()=>{if(e.display_order>=h.length-1)return;const i=[...h],a=i.findIndex((s=>s.id===e.id)),t=i.findIndex((s=>s.display_order===e.display_order+1));if(-1===t)return;const r={..._,display_order:_.display_order+1},n={...i[t],display_order:i[t].display_order-1};i[a]=r,i[t]=n,x(r),p(i),s(r),s(n)},disabled:e.display_order>=h.length-1,children:a.jsx(n,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(b,{htmlFor:`section-active-${e.id}`,children:"Aktif"}),a.jsx(B,{id:`section-active-${e.id}`,checked:_.is_active,onCheckedChange:e=>{x((s=>({...s,is_active:e})))}})]})]}),a.jsxs(f,{defaultValue:g,onValueChange:e=>y(e),children:[a.jsxs(v,{className:"grid grid-cols-2",children:[a.jsx(k,{value:"tr",children:"Türkçe"}),a.jsx(k,{value:"en",children:"English"})]}),a.jsx(w,{value:"tr",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Başlık"}),a.jsx(N,{name:"title_tr",value:_.title_tr,onChange:I,placeholder:"Bölüm başlığı"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Açıklama"}),a.jsx(S,{name:"description_tr",value:_.description_tr,onChange:I,placeholder:"Bölüm açıklaması",rows:5})]})]})}),a.jsx(w,{value:"en",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Title"}),a.jsx(N,{name:"title_en",value:_.title_en,onChange:I,placeholder:"Section title"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Description"}),a.jsx(S,{name:"description_en",value:_.description_en,onChange:I,placeholder:"Section description",rows:5})]})]})})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Resim"}),a.jsx(T,{currentImageUrl:_.image_url||void 0,onImageUploaded:e=>{x((s=>({...s,image_url:e})))},bucketName:"homepage",folderPath:"sections"})]}),a.jsxs("div",{className:"flex justify-between pt-4",children:[a.jsx("div",{children:a.jsxs(j,{variant:"destructive",onClick:()=>{if(!A)return E(!0),void setTimeout((()=>E(!1)),3e3);i(e.id,e.section_key),E(!1)},disabled:m,children:[a.jsx(l,{className:"h-4 w-4 mr-2"}),A?"Emin misiniz?":"Sil"]})}),a.jsxs("div",{className:"space-x-2",children:[a.jsxs(j,{variant:"outline",onClick:()=>o(e.section_key),disabled:m,children:[a.jsx(d,{className:"h-4 w-4 mr-2"}),"Özellik Ekle"]}),a.jsx(j,{onClick:()=>{s(_)},disabled:m,children:m?a.jsxs(a.Fragment,{children:[a.jsx(t,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydediyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx(c,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]})]})]})]})},H=({sections:e,setSections:s,updateSection:i,deleteSection:t,addFeature:r,saving:n})=>a.jsxs(h,{children:[a.jsxs(p,{children:[a.jsx(_,{children:"Anasayfa Bölümleri"}),a.jsx(x,{children:"Anasayfadaki her bir bölümü düzenleyin. Başlık, açıklama ve resimlerini güncelleyin."})]}),a.jsx(g,{children:a.jsx(A,{type:"multiple",className:"space-y-2",children:e.sort(((e,s)=>e.display_order-s.display_order)).map((l=>a.jsx(q,{section:l,onUpdate:i,onDelete:t,onAddFeature:r,saving:n,setSections:s,sections:e},l.id)))})})]}),P=({feature:e,sectionKey:s,onUpdate:i,onDelete:d,saving:o,features:m,setFeatures:p})=>{const[_,x]=u.useState(e),[z,C]=u.useState("tr"),[F,A]=u.useState(!1),E=m.filter((e=>e.section_key===s)),I=e=>{const{name:s,value:i}=e.target;x((e=>({...e,[s]:i})))};return a.jsxs(h,{className:"overflow-hidden",children:[a.jsxs(g,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(j,{variant:"outline",size:"sm",onClick:()=>{if(e.display_order<=0)return;const a=[...m],t=a.findIndex((s=>s.id===e.id)),r=a.findIndex((i=>i.section_key===s&&i.display_order===e.display_order-1));if(-1===r)return;const n={..._,display_order:_.display_order-1},l={...a[r],display_order:a[r].display_order+1};a[t]=n,a[r]=l,x(n),p(a),i(n),i(l)},disabled:e.display_order<=0||o,children:a.jsx(r,{className:"h-4 w-4"})}),a.jsx(j,{variant:"outline",size:"sm",onClick:()=>{if(e.display_order>=E.length-1)return;const a=[...m],t=a.findIndex((s=>s.id===e.id)),r=a.findIndex((i=>i.section_key===s&&i.display_order===e.display_order+1));if(-1===r)return;const n={..._,display_order:_.display_order+1},l={...a[r],display_order:a[r].display_order-1};a[t]=n,a[r]=l,x(n),p(a),i(n),i(l)},disabled:e.display_order>=E.length-1||o,children:a.jsx(n,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(b,{htmlFor:`feature-active-${e.id}`,children:"Aktif"}),a.jsx(B,{id:`feature-active-${e.id}`,checked:_.is_active,onCheckedChange:e=>{x((s=>({...s,is_active:e})))},disabled:o})]})]}),a.jsxs(f,{defaultValue:z,onValueChange:e=>C(e),children:[a.jsxs(v,{className:"grid grid-cols-2",children:[a.jsx(k,{value:"tr",children:"Türkçe"}),a.jsx(k,{value:"en",children:"English"})]}),a.jsx(w,{value:"tr",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Başlık"}),a.jsx(N,{name:"title_tr",value:_.title_tr,onChange:I,placeholder:"Özellik başlığı",disabled:o})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Açıklama"}),a.jsx(S,{name:"description_tr",value:_.description_tr,onChange:I,placeholder:"Özellik açıklaması",rows:3,disabled:o})]})]})}),a.jsx(w,{value:"en",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Title"}),a.jsx(N,{name:"title_en",value:_.title_en,onChange:I,placeholder:"Feature title",disabled:o})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Description"}),a.jsx(S,{name:"description_en",value:_.description_en,onChange:I,placeholder:"Feature description",rows:3,disabled:o})]})]})})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Link (Optional)"}),a.jsx(N,{name:"link",value:_.link||"",onChange:I,placeholder:"https://example.com",disabled:o}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty if no link is needed"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(b,{children:"Resim"}),a.jsx(T,{currentImageUrl:_.image_url||void 0,onImageUploaded:e=>{x((s=>({...s,image_url:e})))},bucketName:"homepage",folderPath:"features",disabled:o})]})]}),a.jsxs(y,{className:"flex justify-between p-4 pt-0",children:[a.jsxs(j,{variant:"destructive",size:"sm",onClick:()=>{if(!F)return A(!0),void setTimeout((()=>A(!1)),3e3);d(e.id),A(!1)},disabled:o,children:[a.jsx(l,{className:"h-4 w-4 mr-2"}),F?"Emin misiniz?":"Sil"]}),a.jsx(j,{size:"sm",onClick:()=>{i(_)},disabled:o,children:o?a.jsxs(a.Fragment,{children:[a.jsx(t,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydediyor..."]}):a.jsxs(a.Fragment,{children:[a.jsx(c,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]})]})},M=({sections:s,features:i,setFeatures:t,updateFeature:r,deleteFeature:n,addFeature:l,saving:c})=>{const{language:o}=e();return a.jsxs(h,{children:[a.jsxs(p,{children:[a.jsx(_,{children:"Anasayfa Özellikleri"}),a.jsx(x,{children:"Her bölümün özelliklerini yönetin. Özellikler ekleyebilir, düzenleyebilir ve silebilirsiniz."})]}),a.jsx(g,{children:a.jsx(A,{type:"multiple",className:"space-y-2",children:s.sort(((e,s)=>e.display_order-s.display_order)).map((e=>{const s=i.filter((s=>s.section_key===e.section_key));return a.jsxs(z,{value:`features-${e.id}`,className:"border rounded-md",children:[a.jsx(C,{className:"px-4 hover:no-underline",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{children:"tr"===o?e.title_tr:e.title_en}),a.jsx(E,{className:"ml-2",variant:"outline",children:s.length})]})}),a.jsx(F,{className:"p-4 pt-2",children:0===s.length?a.jsxs("div",{className:"text-center py-4 text-gray-500",children:[a.jsx("p",{children:"Bu bölüm için henüz özellik bulunmuyor."}),a.jsxs(j,{variant:"outline",className:"mt-2",onClick:()=>l(e.section_key),children:[a.jsx(d,{className:"w-4 h-4 mr-2"}),"Özellik Ekle"]})]}):a.jsxs("div",{className:"space-y-4",children:[s.sort(((e,s)=>e.display_order-s.display_order)).map((s=>a.jsx(P,{feature:s,sectionKey:e.section_key,onUpdate:r,onDelete:n,saving:c,setFeatures:t,features:i},s.id))),a.jsxs(j,{variant:"outline",className:"w-full",onClick:()=>l(e.section_key),children:[a.jsx(d,{className:"w-4 h-4 mr-2"}),"Yeni Özellik Ekle"]})]})})]},`features-${e.id}`)}))})})]})},R=()=>{const{t:r,language:n}=e(),[l,d]=u.useState(!0),[c,o]=u.useState(!1),[m,y]=u.useState(!1),[f,v]=u.useState({title_tr:"",title_en:"",description_tr:"",description_en:"",image_url:null,customer_count:2e3,rating_value:4.9,rating_count:5,show_ratings:!0,section:"hero"}),k=O({defaultValues:f});return u.useEffect((()=>{(async()=>{d(!0);try{const{data:e,error:i}=await s.from("homepage_content").select("*").eq("section","hero").single();if(i){if("PGRST116"!==i.code)throw i}else if(e){const s=e,i={id:s.id,title_tr:s.title_tr||"",title_en:s.title_en||"",description_tr:s.description_tr||"",description_en:s.description_en||"",image_url:s.image_url,customer_count:s.customer_count||2e3,rating_value:s.rating_value||4.9,rating_count:s.rating_count||5,show_ratings:void 0===s.show_ratings||s.show_ratings,section:"hero"};v(i),k.reset(i)}}catch(e){i.error(r("content_load_error")||"İçerik yüklenirken hata oluştu")}finally{d(!1)}})()}),[r,k]),l?a.jsx("div",{className:"flex justify-center items-center p-10",children:a.jsx(t,{className:"h-10 w-10 animate-spin text-primary"})}):a.jsxs(h,{children:[a.jsxs(p,{children:[a.jsx(_,{children:r("hero_section_settings")||"Anasayfa Hero Bölümü Ayarları"}),a.jsx(x,{children:r("hero_section_description")||"Anasayfadaki hero bölümünün başlığını, açıklamasını ve görseli düzenleyin."})]}),a.jsx(g,{children:a.jsx(I,{...k,children:a.jsxs("form",{onSubmit:k.handleSubmit((async e=>{o(!0);try{if(f.id){const{error:a}=await s.from("homepage_content").update({title_tr:e.title_tr,title_en:e.title_en,description_tr:e.description_tr,description_en:e.description_en,image_url:e.image_url,customer_count:e.customer_count,rating_value:e.rating_value,rating_count:e.rating_count,show_ratings:e.show_ratings,updated_at:(new Date).toISOString()}).eq("id",f.id);if(a)throw a;i.success(r("hero_content_updated")||"Anasayfa hero içeriği güncellendi")}else{const{data:a,error:t}=await s.from("homepage_content").insert({section:"hero",title_tr:e.title_tr,title_en:e.title_en,description_tr:e.description_tr,description_en:e.description_en,image_url:e.image_url,customer_count:e.customer_count,rating_value:e.rating_value,rating_count:e.rating_count,show_ratings:e.show_ratings}).select().single();if(t)throw t;a&&v({...e,id:a.id}),i.success(r("hero_content_created")||"Anasayfa hero içeriği oluşturuldu")}}catch(a){i.error(r("content_save_error")||"İçerik kaydedilirken hata oluştu")}finally{o(!1)}})),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx(V,{control:k.control,name:"title_tr",defaultValue:f.title_tr,render:({field:e})=>a.jsxs(D,{children:[a.jsx($,{children:r("title_tr")||"Başlık (TR)"}),a.jsx(K,{children:a.jsx(N,{...e,placeholder:"Premium Toptancılar İçin Formalar"})})]})}),a.jsx(V,{control:k.control,name:"description_tr",defaultValue:f.description_tr,render:({field:e})=>a.jsxs(D,{children:[a.jsx($,{children:r("description_tr")||"Açıklama (TR)"}),a.jsx(K,{children:a.jsx(S,{...e,placeholder:"Toptan dağıtım için tasarlanmış özel forma koleksiyonumuzu keşfedin.",rows:4})})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(V,{control:k.control,name:"title_en",defaultValue:f.title_en,render:({field:e})=>a.jsxs(D,{children:[a.jsx($,{children:r("title_en")||"Başlık (EN)"}),a.jsx(K,{children:a.jsx(N,{...e,placeholder:"Premium Jerseys for Wholesalers"})})]})}),a.jsx(V,{control:k.control,name:"description_en",defaultValue:f.description_en,render:({field:e})=>a.jsxs(D,{children:[a.jsx($,{children:r("description_en")||"Açıklama (EN)"}),a.jsx(K,{children:a.jsx(S,{...e,placeholder:"Explore our collection of custom jerseys designed for wholesale distribution.",rows:4})})]})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(b,{children:r("hero_image")||"Hero Görseli"}),a.jsx(T,{currentImageUrl:f.image_url||"",onImageUploaded:async e=>{v({...f,image_url:e}),k.setValue("image_url",e)},bucketName:"homepage_images",folderPath:"hero"})]}),a.jsxs("div",{className:"border p-4 rounded-md space-y-4",children:[a.jsx("h3",{className:"font-medium text-lg",children:r("customer_testimonial_settings")||"Müşteri Değerlendirme Ayarları"}),a.jsx(V,{control:k.control,name:"show_ratings",defaultValue:f.show_ratings,render:({field:e})=>a.jsxs(D,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx($,{children:r("show_ratings")||"Değerlendirmeleri Göster"}),a.jsx(Y,{children:r("show_ratings_description")||"Anasayfada yıldız değerlendirmelerini ve müşteri sayısını göster."})]}),a.jsx(K,{children:a.jsx(B,{checked:e.value,onCheckedChange:e.onChange})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(V,{control:k.control,name:"customer_count",defaultValue:f.customer_count,render:({field:e})=>a.jsxs(D,{children:[a.jsx($,{children:r("customer_count")||"Müşteri Sayısı"}),a.jsx(K,{children:a.jsx(N,{type:"number",...e,onChange:s=>e.onChange(Number(s.target.value))})})]})}),a.jsx(V,{control:k.control,name:"rating_value",defaultValue:f.rating_value,render:({field:e})=>a.jsxs(D,{children:[a.jsx($,{children:r("rating_value")||"Değerlendirme Puanı"}),a.jsx(K,{children:a.jsx(N,{type:"number",step:"0.1",min:"0",max:"5",...e,onChange:s=>e.onChange(Number(s.target.value))})})]})}),a.jsx(V,{control:k.control,name:"rating_count",defaultValue:f.rating_count,render:({field:e})=>a.jsxs(D,{children:[a.jsx($,{children:r("star_count")||"Yıldız Sayısı"}),a.jsx(K,{children:a.jsx(N,{type:"number",min:"0",max:"5",...e,onChange:s=>e.onChange(Number(s.target.value))})})]})})]})]})]}),a.jsxs(j,{type:"submit",disabled:c||m,className:"w-full md:w-auto",children:[c&&a.jsx(t,{className:"mr-2 h-4 w-4 animate-spin"}),r("save_settings")||"Ayarları Kaydet"]})]})})})]})},W=()=>{const{t:r}=e(),[n,l]=u.useState("hero"),{sections:c,features:p,loading:_,saving:x,setSections:g,setFeatures:y,fetchHomepageContent:N,addSection:b,updateSection:S,deleteSection:z,addFeature:C,updateFeature:F,deleteFeature:A}=(()=>{const[a,t]=u.useState([]),[r,n]=u.useState([]),[l,d]=u.useState(!0),[c,o]=u.useState(!1),[m,h]=u.useState(null),{language:p}=e(),_=async()=>{d(!0),h(null);try{const{data:i,error:a}=await s.from("homepage_sections").select("*").order("display_order",{ascending:!0});if(a)throw a;const{data:r,error:l}=await s.from("homepage_features").select("*").order("display_order",{ascending:!0});if(l)throw l;t(i||[]);const d=(r||[]).map((e=>({...e,link:e.link||null})));if(n(d),0===d.filter((e=>"references"===e.section_key)).length)try{const e=[{section_key:"references",title_tr:"Ali Yılmaz",title_en:"Ali Yilmaz",description_tr:"FormaYaptırma ile çalışmak harika bir deneyimdi. Formalarımız tam istediğimiz gibi oldu.",description_en:"Working with FormaYaptirma was a great experience. Our jerseys turned out exactly as we wanted.",display_order:0,is_active:!0,link:null},{section_key:"references",title_tr:"Ayşe Kaya",title_en:"Ayse Kaya",description_tr:"Kaliteli kumaş ve uygun fiyatlarla harika hizmet aldık. Kesinlikle tavsiye ediyorum.",description_en:"We received great service with quality fabric and reasonable prices. Highly recommended.",display_order:1,is_active:!0,link:null},{section_key:"references",title_tr:"Mehmet Demir",title_en:"Mehmet Demir",description_tr:"Takımımız için özel tasarladığımız formalar çok beğenildi. Teşekkürler!",description_en:"The jerseys we designed for our team were very popular. Thank you!",display_order:2,is_active:!0,link:null},{section_key:"references",title_tr:"Zeynep Öztürk",title_en:"Zeynep Ozturk",description_tr:"Hızlı teslimat ve mükemmel müşteri hizmeti. Tekrar çalışacağız.",description_en:"Fast delivery and excellent customer service. We will work together again.",display_order:3,is_active:!0,link:null},{section_key:"references",title_tr:"Osman Yıldız",title_en:"Osman Yildiz",description_tr:"Çok profesyonel bir ekip. Siparişimiz zamanında ve kusursuz teslim edildi.",description_en:"Very professional team. Our order was delivered on time and flawlessly.",display_order:4,is_active:!0,link:null},{section_key:"references",title_tr:"Selin Kara",title_en:"Selin Kara",description_tr:"Forma tasarım sürecinde verdikleri destek için çok teşekkürler. Harika iş çıkardılar.",description_en:"Thank you for your support during the jersey design process. They did a great job.",display_order:5,is_active:!0,link:null}],{data:i,error:a}=await s.from("homepage_features").insert(e).select();if(a)throw a;i&&n((e=>[...e,...i]))}catch(e){}}catch(e){h(e.message||"Failed to fetch homepage content"),i.error("İçerik yüklenirken bir hata oluştu")}finally{d(!1)}};return u.useEffect((()=>{_()}),[]),{sections:a,features:r,loading:l,saving:c,error:m,language:p,setSections:t,setFeatures:n,fetchHomepageContent:_,addSection:async()=>{o(!0);try{const e={section_key:`section_${Date.now()}`,title_tr:"Yeni Bölüm",title_en:"New Section",description_tr:"Bölüm açıklaması buraya gelecek",description_en:"Section description goes here",image_url:null,display_order:a.length>0?Math.max(...a.map((e=>e.display_order)))+1:0,is_active:!0},{data:r,error:n}=await s.from("homepage_sections").insert(e).select().single();if(n)throw n;i.success("Yeni bölüm eklendi"),t((e=>[...e,r]))}catch(e){i.error(e.message||"Bölüm eklenirken hata oluştu")}finally{o(!1)}},updateSection:async e=>{o(!0);try{const{error:a}=await s.from("homepage_sections").update({title_tr:e.title_tr,title_en:e.title_en,description_tr:e.description_tr,description_en:e.description_en,image_url:e.image_url,is_active:e.is_active,display_order:e.display_order,updated_at:(new Date).toISOString()}).eq("id",e.id);if(a)throw a;i.success("Bölüm güncellendi"),t((s=>s.map((s=>s.id===e.id?e:s))))}catch(a){i.error(a.message||"Bölüm güncellenirken hata oluştu")}finally{o(!1)}},deleteSection:async(e,a)=>{o(!0);try{const{error:r}=await s.from("homepage_features").delete().eq("section_key",a);if(r)throw r;const{error:l}=await s.from("homepage_sections").delete().eq("id",e);if(l)throw l;i.success("Bölüm silindi"),t((s=>s.filter((s=>s.id!==e)))),n((e=>e.filter((e=>e.section_key!==a))))}catch(r){i.error(r.message||"Bölüm silinirken hata oluştu")}finally{o(!1)}},addFeature:async e=>{o(!0);try{const a=r.filter((s=>s.section_key===e)),t=a.length>0?Math.max(...a.map((e=>e.display_order)))+1:0,l={section_key:e,title_tr:"Yeni Özellik",title_en:"New Feature",description_tr:"Özellik açıklaması buraya gelecek",description_en:"Feature description goes here",image_url:null,link:null,display_order:t,is_active:!0},{data:d,error:c}=await s.from("homepage_features").insert(l).select().single();if(c)throw c;i.success("Yeni özellik eklendi"),n((e=>[...e,d]))}catch(a){i.error(a.message||"Özellik eklenirken hata oluştu")}finally{o(!1)}},updateFeature:async e=>{o(!0);try{const{error:a}=await s.from("homepage_features").update({title_tr:e.title_tr,title_en:e.title_en,description_tr:e.description_tr,description_en:e.description_en,image_url:e.image_url,link:e.link,is_active:e.is_active,display_order:e.display_order,updated_at:(new Date).toISOString()}).eq("id",e.id);if(a)throw a;i.success("Özellik güncellendi"),n((s=>s.map((s=>s.id===e.id?e:s))))}catch(a){i.error(a.message||"Özellik güncellenirken hata oluştu")}finally{o(!1)}},deleteFeature:async e=>{o(!0);try{const{error:a}=await s.from("homepage_features").delete().eq("id",e);if(a)throw a;i.success("Özellik silindi"),n((s=>s.filter((s=>s.id!==e))))}catch(a){i.error(a.message||"Özellik silinirken hata oluştu")}finally{o(!1)}}}})();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-galaxy-purple",children:r("homepage_content")||"Anasayfa İçeriği"}),a.jsx("p",{className:"text-muted-foreground",children:r("homepage_content_description")||"Anasayfa içeriğini düzenleyin ve yönetin"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(j,{variant:"outline",onClick:N,disabled:_||x,className:"border-primary/20 hover:border-primary/60 transition-all",children:[a.jsx(o,{className:"mr-2 h-4 w-4 "+(_?"animate-spin":"")}),r("refresh")||"Yenile"]}),a.jsxs(j,{onClick:b,disabled:_||x,className:"bg-gradient-to-r from-galaxy-blue to-galaxy-purple hover:opacity-90",children:[a.jsx(d,{className:"mr-2 h-4 w-4"}),r("add_section")||"Bölüm Ekle"]})]})]}),a.jsx(h,{className:"border-primary/10 shadow-lg shadow-primary/5",children:a.jsxs(f,{defaultValue:n,onValueChange:l,className:"w-full",children:[a.jsxs(v,{className:"w-full grid grid-cols-4 p-1 bg-muted/30",children:[a.jsxs(k,{value:"hero",className:"data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm dark:data-[state=active]:bg-gray-800",children:[a.jsx(m,{className:"mr-2 h-4 w-4"}),r("hero_section")||"Hero Bölümü"]}),a.jsx(k,{value:"content",className:"data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm dark:data-[state=active]:bg-gray-800",children:r("existing_content")||"Mevcut İçerik"}),a.jsx(k,{value:"sections",className:"data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm dark:data-[state=active]:bg-gray-800",children:r("sections")||"Bölümler"}),a.jsx(k,{value:"features",className:"data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm dark:data-[state=active]:bg-gray-800",children:r("features")||"Özellikler"})]}),_?a.jsx("div",{className:"flex items-center justify-center p-10",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(t,{className:"h-10 w-10 animate-spin text-primary"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:r("loading_content")||"İçerik yükleniyor..."})]})}):a.jsxs(a.Fragment,{children:[a.jsx(w,{value:"hero",children:a.jsx(R,{})}),a.jsx(w,{value:"content",children:a.jsx(U,{})}),a.jsx(w,{value:"sections",children:a.jsx(H,{sections:c,setSections:g,updateSection:S,deleteSection:z,addFeature:C,saving:x})}),a.jsx(w,{value:"features",children:a.jsx(M,{sections:c,features:p,setFeatures:y,updateFeature:F,deleteFeature:A,addFeature:C,saving:x})})]})]})})]})};export{W as default};
