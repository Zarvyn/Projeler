import{n as e,s as r,J as a,j as s,A as l}from"./03-hero-critical-BKzCa96P.js";import{r as i}from"./01-react-core-DCvPBpDR.js";import{L as t}from"./02-react-router-l50u7dmW.js";import{u as d,J as o}from"./99-JerseyCard-DWmTcMYn.js";import{B as c}from"./04-ui-components-DpbmxBFV.js";import"./06-utils-QQqVvbBo.js";import"./99-badge-CpQK4qLU.js";import"./05-admin-bundle-BW3OFzIa.js";const n=i.memo((()=>{const[n,m]=i.useState([]),[g,p]=i.useState(!0),{t:u}=e(),{ref:x,inView:h}=d({triggerOnce:!0,threshold:.1,rootMargin:"300px 0px"}),y=i.useCallback((async()=>{if(h)try{p(!0);const{data:e,error:a}=await r.from("products").select("id, name, image_url, min_order, price, colors, is_popular, is_new, display_id, slug").eq("is_popular",!0).order("created_at",{ascending:!1}).limit(5);if(a)throw a;if(!e||0===e.length)return void m([]);const s=e.map((e=>{const r=e.slug||e.name.toLowerCase().replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ç/g,"c").replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-|-$/g,"");return{id:e.id,name:e.name,image:e.image_url||"/placeholder.svg",minOrder:e.min_order||10,price:e.price,colors:e.colors||1,isPopular:Boolean(e.is_popular),isNew:Boolean(e.is_new),display_id:e.display_id,slug:r,deliveryTime:"2-3 İş Günü"}}));m(s)}catch(e){a.error(u("error_fetching_products")||"Ürünler yüklenirken hata oluştu"),m([])}finally{p(!1)}}),[u,h]);return i.useEffect((()=>{h&&y()}),[y,h]),s.jsx("section",{ref:x,className:"py-16",children:s.jsxs("div",{className:"w-full px-2 lg:px-40",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-galaxy-blue to-galaxy-purple",children:"Popüler Formalar"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:"Şuan En popüler formalarımızı bu kısımdan görebilirsiniz."})]}),g?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:[...Array(5)].map(((e,r)=>s.jsxs("div",{className:"overflow-hidden group relative transition-all",children:[s.jsx("div",{className:"relative pb-[100%]",children:s.jsx("div",{className:"absolute inset-0 w-full h-full bg-gray-200 dark:bg-gray-800 animate-pulse",style:{aspectRatio:"1 / 1"}})}),s.jsxs("div",{className:"p-4 flex flex-col justify-between gap-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 animate-pulse rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-800 animate-pulse rounded mb-2 w-3/4"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-800 animate-pulse rounded mb-2 w-1/2"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-800 animate-pulse rounded w-2/3"})]}),s.jsx("div",{className:"mt-2",children:s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 animate-pulse rounded w-1/3"})})]})]},r)))}):n.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 mb-2",children:n.map((e=>s.jsx(o,{jersey:e,showDeliveryTime:!0},e.id)))}),s.jsx("div",{className:"text-center",children:s.jsx(t,{to:"/gallery?showPopular=true",children:s.jsxs(c,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",children:[u("view_all")||"Tümünü Gör"," ",s.jsx(l,{className:"ml-2 h-4 w-4"})]})})})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:u("no_popular_jerseys_found")||"Popüler ürün bulunamadı"})})]})})})),m=i.memo(n);export{m as default};
