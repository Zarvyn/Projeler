import{c as e,aV as s,j as a,U as i,O as t,a as r,aW as l,K as n,d,S as c,T as o,Q as m,N as u,V as h,R as p,n as x,aF as j,aX as f,a7 as y,s as v,J as g}from"./03-hero-critical-BKzCa96P.js";import{r as _}from"./01-react-core-DCvPBpDR.js";import{T as N,a as k,b,c as w}from"./99-tabs-CCs0hPp1.js";import{r as z,B as $,C as A,g as F,h as D,i as B,f as S}from"./04-ui-components-DpbmxBFV.js";import{a as C,b as R,c as E,A as I}from"./99-accordion-BRlPMYDB.js";import{I as P}from"./05-admin-bundle-BW3OFzIa.js";import{L as T}from"./99-label-DtO75rKq.js";import{T as U}from"./99-textarea-BOZk7JoE.js";import{B as Y}from"./99-badge-CpQK4qLU.js";import{c as O}from"./06-utils-QQqVvbBo.js";import{I as q}from"./99-image-uploader-KY2aE3Hk.js";import"./02-react-router-l50u7dmW.js";import"./99-index-CxCer4qO.js";var H="AlertDialog",[K,M]=e(H,[s]),V=s(),W=e=>{const{__scopeAlertDialog:s,...i}=e,t=V(s);return a.jsx(p,{...t,...i,modal:!0})};W.displayName=H;var G=_.forwardRef(((e,s)=>{const{__scopeAlertDialog:t,...r}=e,l=V(t);return a.jsx(i,{...l,...r,ref:s})}));G.displayName="AlertDialogTrigger";var X=e=>{const{__scopeAlertDialog:s,...i}=e,t=V(s);return a.jsx(h,{...t,...i})};X.displayName="AlertDialogPortal";var J=_.forwardRef(((e,s)=>{const{__scopeAlertDialog:i,...r}=e,l=V(i);return a.jsx(t,{...l,...r,ref:s})}));J.displayName="AlertDialogOverlay";var L="AlertDialogContent",[Q,Z]=K(L),ee=_.forwardRef(((e,s)=>{const{__scopeAlertDialog:i,children:t,...o}=e,m=V(i),u=_.useRef(null),h=r(s,u),p=_.useRef(null);return a.jsx(l,{contentName:L,titleName:se,docsSlug:"alert-dialog",children:a.jsx(Q,{scope:i,cancelRef:p,children:a.jsxs(n,{role:"alertdialog",...m,...o,ref:h,onOpenAutoFocus:d(o.onOpenAutoFocus,(e=>{var s;e.preventDefault(),null==(s=p.current)||s.focus({preventScroll:!0})})),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[a.jsx(c,{children:t}),a.jsx(de,{contentRef:u})]})})})}));ee.displayName=L;var se="AlertDialogTitle",ae=_.forwardRef(((e,s)=>{const{__scopeAlertDialog:i,...t}=e,r=V(i);return a.jsx(o,{...r,...t,ref:s})}));ae.displayName=se;var ie="AlertDialogDescription",te=_.forwardRef(((e,s)=>{const{__scopeAlertDialog:i,...t}=e,r=V(i);return a.jsx(m,{...r,...t,ref:s})}));te.displayName=ie;var re=_.forwardRef(((e,s)=>{const{__scopeAlertDialog:i,...t}=e,r=V(i);return a.jsx(u,{...r,...t,ref:s})}));re.displayName="AlertDialogAction";var le="AlertDialogCancel",ne=_.forwardRef(((e,s)=>{const{__scopeAlertDialog:i,...t}=e,{cancelRef:l}=Z(le,i),n=V(i),d=r(s,l);return a.jsx(u,{...n,...t,ref:d})}));ne.displayName=le;var de=({contentRef:e})=>{const s=`\`${L}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${L}\` by passing a \`${ie}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${L}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect((()=>{var s;document.getElementById(null==(s=e.current)?void 0:s.getAttribute("aria-describedby"))}),[s,e]),null},ce=J,oe=ee,me=re,ue=ne,he=ae,pe=te;const xe=W,je=G,fe=X,ye=_.forwardRef((({className:e,...s},i)=>a.jsx(ce,{className:O("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:i})));ye.displayName=ce.displayName;const ve=_.forwardRef((({className:e,...s},i)=>a.jsxs(fe,{children:[a.jsx(ye,{}),a.jsx(oe,{ref:i,className:O("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]})));ve.displayName=oe.displayName;const ge=({className:e,...s})=>a.jsx("div",{className:O("flex flex-col space-y-2 text-center sm:text-left",e),...s});ge.displayName="AlertDialogHeader";const _e=({className:e,...s})=>a.jsx("div",{className:O("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});_e.displayName="AlertDialogFooter";const Ne=_.forwardRef((({className:e,...s},i)=>a.jsx(he,{ref:i,className:O("text-lg font-semibold",e),...s})));Ne.displayName=he.displayName;const ke=_.forwardRef((({className:e,...s},i)=>a.jsx(pe,{ref:i,className:O("text-sm text-muted-foreground",e),...s})));ke.displayName=pe.displayName;const be=_.forwardRef((({className:e,...s},i)=>a.jsx(me,{ref:i,className:O(z(),e),...s})));be.displayName=me.displayName;const we=_.forwardRef((({className:e,...s},i)=>a.jsx(ue,{ref:i,className:O(z({variant:"outline"}),"mt-2 sm:mt-0",e),...s})));we.displayName=ue.displayName;const ze=({section:e,onUpdate:s,onDelete:i,onAddFeature:t,saving:r,setSections:l,sections:n})=>{const{language:d}=x(),c=(s,a)=>{const i={...e,[s]:a};l(n.map((s=>s.id===e.id?i:s)))};return a.jsxs(C,{value:e.id,className:"border rounded-md",children:[a.jsx(R,{className:"px-4 hover:no-underline",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{children:"tr"===d?e.title_tr:e.title_en}),a.jsx(Y,{variant:e.is_active?"default":"secondary",children:e.is_active?"Aktif":"Pasif"})]})}),a.jsx(E,{className:"p-4 pt-2",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-title-tr`,children:"Başlık (TR)"}),a.jsx(P,{id:`${e.id}-title-tr`,value:e.title_tr,onChange:e=>c("title_tr",e.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-title-en`,children:"Başlık (EN)"}),a.jsx(P,{id:`${e.id}-title-en`,value:e.title_en,onChange:e=>c("title_en",e.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-desc-tr`,children:"Açıklama (TR)"}),a.jsx(U,{id:`${e.id}-desc-tr`,value:e.description_tr,rows:3,onChange:e=>c("description_tr",e.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-desc-en`,children:"Açıklama (EN)"}),a.jsx(U,{id:`${e.id}-desc-en`,value:e.description_en,rows:3,onChange:e=>c("description_en",e.target.value)})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-image`,children:"Bölüm Görseli"}),a.jsx(q,{currentImageUrl:e.image_url,onImageUploaded:e=>c("image_url",e),folderPath:`sections/${e.section_key}`})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-order`,children:"Sıralama"}),a.jsx(P,{id:`${e.id}-order`,type:"number",value:e.display_order,onChange:e=>c("display_order",parseInt(e.target.value)||0)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-status`,children:"Durum"}),a.jsxs("select",{id:`${e.id}-status`,className:"w-full h-10 px-3 rounded-md border",value:e.is_active?"active":"inactive",onChange:e=>c("is_active","active"===e.target.value),children:[a.jsx("option",{value:"active",children:"Aktif"}),a.jsx("option",{value:"inactive",children:"Pasif"})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs($,{variant:"outline",onClick:()=>t(e.section_key),children:[a.jsx(j,{className:"w-4 h-4 mr-2"}),"Özellik Ekle"]}),e.section_key.startsWith("custom_section_")&&a.jsxs(xe,{children:[a.jsx(je,{asChild:!0,children:a.jsxs($,{variant:"destructive",size:"sm",children:[a.jsx(f,{className:"h-4 w-4 mr-2"}),"Bölümü Sil"]})}),a.jsxs(ve,{children:[a.jsxs(ge,{children:[a.jsx(Ne,{children:"Bu bölümü silmek istediğinizden emin misiniz?"}),a.jsx(ke,{children:"Bu işlem geri alınamaz. Bu bölüm ve tüm özellikleri kalıcı olarak silinecektir."})]}),a.jsxs(_e,{children:[a.jsx(we,{children:"İptal"}),a.jsx(be,{onClick:()=>i(e.id,e.section_key),className:"bg-red-600 hover:bg-red-700",children:"Evet, Sil"})]})]})]})]}),a.jsxs($,{onClick:()=>s(e),disabled:r,children:[r&&a.jsx(y,{className:"w-4 h-4 mr-2 animate-spin"}),"Kaydet"]})]})]})})]},e.id)},$e=({sections:e,setSections:s,updateSection:i,deleteSection:t,addFeature:r,saving:l})=>a.jsxs(A,{children:[a.jsxs(F,{children:[a.jsx(D,{children:"Hakkımızda Sayfası Bölümleri"}),a.jsx(B,{children:"Hakkımızda sayfasındaki her bir bölümü düzenleyin. Başlık, açıklama ve resimlerini güncelleyin."})]}),a.jsx(S,{children:a.jsx(I,{type:"multiple",className:"space-y-2",children:e.sort(((e,s)=>e.display_order-s.display_order)).map((n=>a.jsx(ze,{section:n,onUpdate:i,onDelete:t,onAddFeature:r,saving:l,setSections:s,sections:e},n.id)))})})]}),Ae=({feature:e,sectionKey:s,onUpdate:i,onDelete:t,saving:r,setFeatures:l,features:n})=>{const{language:d}=x(),c=(s,a)=>{const i={...e,[s]:a};l(n.map((s=>s.id===e.id?i:s)))};return a.jsxs(A,{className:"border",children:[a.jsx(F,{className:"p-4 pb-0",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs(D,{className:"text-base",children:["tr"===d?e.title_tr:e.title_en,a.jsx(Y,{className:"ml-2",variant:e.is_active?"default":"secondary",children:e.is_active?"Aktif":"Pasif"})]}),a.jsxs(xe,{children:[a.jsx(je,{asChild:!0,children:a.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-600 hover:bg-red-100",children:a.jsx(f,{className:"h-4 w-4"})})}),a.jsxs(ve,{children:[a.jsxs(ge,{children:[a.jsx(Ne,{children:"Bu özelliği silmek istediğinizden emin misiniz?"}),a.jsx(ke,{children:"Bu işlem geri alınamaz. Bu özellik kalıcı olarak silinecektir."})]}),a.jsxs(_e,{children:[a.jsx(we,{children:"İptal"}),a.jsx(be,{onClick:()=>t(e.id),className:"bg-red-600 hover:bg-red-700",children:"Evet, Sil"})]})]})]})]})}),a.jsx(S,{className:"p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-title-tr`,children:"Başlık (TR)"}),a.jsx(P,{id:`${e.id}-title-tr`,value:e.title_tr,onChange:e=>c("title_tr",e.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-title-en`,children:"Başlık (EN)"}),a.jsx(P,{id:`${e.id}-title-en`,value:e.title_en,onChange:e=>c("title_en",e.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-desc-tr`,children:"Açıklama (TR)"}),a.jsx(U,{id:`${e.id}-desc-tr`,value:e.description_tr,rows:3,onChange:e=>c("description_tr",e.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-desc-en`,children:"Açıklama (EN)"}),a.jsx(U,{id:`${e.id}-desc-en`,value:e.description_en,rows:3,onChange:e=>c("description_en",e.target.value)})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-image`,children:"Özellik Görseli"}),a.jsx(q,{currentImageUrl:e.image_url,onImageUploaded:e=>c("image_url",e),folderPath:`features/${s}`})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-order`,children:"Sıralama"}),a.jsx(P,{id:`${e.id}-order`,type:"number",value:e.display_order,onChange:e=>c("display_order",parseInt(e.target.value)||0)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(T,{htmlFor:`${e.id}-status`,children:"Durum"}),a.jsxs("select",{id:`${e.id}-status`,className:"w-full h-10 px-3 rounded-md border",value:e.is_active?"active":"inactive",onChange:e=>c("is_active","active"===e.target.value),children:[a.jsx("option",{value:"active",children:"Aktif"}),a.jsx("option",{value:"inactive",children:"Pasif"})]})]})]}),a.jsxs($,{className:"w-full",onClick:()=>i(e),disabled:r,children:[r&&a.jsx(y,{className:"w-4 h-4 mr-2 animate-spin"}),"Kaydet"]})]})})]},e.id)},Fe=({sections:e,features:s,setFeatures:i,updateFeature:t,deleteFeature:r,addFeature:l,saving:n})=>{const{language:d}=x();return a.jsxs(A,{children:[a.jsxs(F,{children:[a.jsx(D,{children:"Hakkımızda Sayfası Özellikleri"}),a.jsx(B,{children:"Her bölümün özelliklerini yönetin. Özellikler ekleyebilir, düzenleyebilir ve silebilirsiniz."})]}),a.jsx(S,{children:a.jsx(I,{type:"multiple",className:"space-y-2",children:e.sort(((e,s)=>e.display_order-s.display_order)).map((e=>{const c=s.filter((s=>s.section_key===e.section_key));return a.jsxs(C,{value:`features-${e.id}`,className:"border rounded-md",children:[a.jsx(R,{className:"px-4 hover:no-underline",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{children:"tr"===d?e.title_tr:e.title_en}),a.jsx(Y,{className:"ml-2",variant:"outline",children:c.length})]})}),a.jsx(E,{className:"p-4 pt-2",children:0===c.length?a.jsxs("div",{className:"text-center py-4 text-gray-500",children:[a.jsx("p",{children:"Bu bölüm için henüz özellik bulunmuyor."}),a.jsxs($,{variant:"outline",className:"mt-2",onClick:()=>l(e.section_key),children:[a.jsx(j,{className:"w-4 h-4 mr-2"}),"Özellik Ekle"]})]}):a.jsxs("div",{className:"space-y-4",children:[c.sort(((e,s)=>e.display_order-s.display_order)).map((l=>a.jsx(Ae,{feature:l,sectionKey:e.section_key,onUpdate:t,onDelete:r,saving:n,setFeatures:i,features:s},l.id))),a.jsxs($,{variant:"outline",className:"w-full",onClick:()=>l(e.section_key),children:[a.jsx(j,{className:"w-4 h-4 mr-2"}),"Yeni Özellik Ekle"]})]})})]},`features-${e.id}`)}))})})]})},De=()=>{const[e,s]=_.useState([]),[i,t]=_.useState([]),[r,l]=_.useState(!0),[n,d]=_.useState(!1);_.useEffect((()=>{(async()=>{l(!0);try{const{data:e,error:a}=await v.from("about_sections").select("*").order("display_order");if(a)throw a;const{data:i,error:r}=await v.from("about_features").select("*").order("section_key, display_order");if(r)throw r;s(e||[]),t(i||[])}catch(e){g.error("İçerik yüklenirken bir hata oluştu")}finally{l(!1)}})()}),[]);const c=async e=>{d(!0);try{const s=i.filter((s=>s.section_key===e)),a=s.length>0?Math.max(...s.map((e=>e.display_order))):0,r={section_key:e,title_tr:"Yeni Özellik",title_en:"New Feature",description_tr:"Özellik açıklaması",description_en:"Feature description",display_order:a+1,is_active:!0},{data:l,error:n}=await v.from("about_features").insert([r]).select();if(n)throw n;l&&l.length>0&&(g.success("Yeni özellik eklendi"),t([...i,l[0]]))}catch(s){g.error("Özellik eklenirken bir hata oluştu")}finally{d(!1)}};return r?a.jsxs("div",{className:"flex items-center justify-center p-10",children:[a.jsx(y,{className:"w-8 h-8 animate-spin"}),a.jsx("span",{className:"ml-2 text-lg",children:"Yükleniyor..."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Hakkımızda Sayfası Yönetimi"}),a.jsxs($,{onClick:async()=>{d(!0);try{const a=e.length>0?Math.max(...e.map((e=>e.display_order))):0,i={section_key:`custom_section_${Date.now()}_${Math.random().toString(36).substring(2,8)}`,title_tr:"Yeni Bölüm",title_en:"New Section",description_tr:"Bölüm açıklaması",description_en:"Section description",display_order:a+1,is_active:!0},{data:t,error:r}=await v.from("about_sections").insert([i]).select();if(r)throw r;t&&t.length>0&&(g.success("Yeni bölüm eklendi"),s([...e,t[0]]))}catch(a){g.error("Bölüm eklenirken bir hata oluştu")}finally{d(!1)}},children:[a.jsx(j,{className:"mr-2 h-4 w-4"}),"Yeni Bölüm Ekle"]})]}),a.jsxs(N,{defaultValue:"sections",children:[a.jsxs(k,{className:"mb-4",children:[a.jsx(b,{value:"sections",children:"Bölümler"}),a.jsx(b,{value:"features",children:"Özellikler"})]}),a.jsx(w,{value:"sections",className:"space-y-4",children:a.jsx($e,{sections:e,setSections:s,updateSection:async e=>{d(!0);try{const{error:a}=await v.from("about_sections").update({title_tr:e.title_tr,title_en:e.title_en,description_tr:e.description_tr,description_en:e.description_en,is_active:e.is_active,display_order:e.display_order,image_url:e.image_url}).eq("id",e.id);if(a)throw a;g.success("Bölüm başarıyla güncellendi"),s((s=>s.map((s=>s.id===e.id?e:s))))}catch(a){g.error("Bölüm güncellenirken bir hata oluştu")}finally{d(!1)}},deleteSection:async(a,r)=>{d(!0);try{if(!r.startsWith("custom_section_"))return g.error("Varsayılan bölümler silinemez"),void d(!1);const{error:l}=await v.from("about_features").delete().eq("section_key",r);if(l)throw l;const{error:n}=await v.from("about_sections").delete().eq("id",a);if(n)throw n;g.success("Bölüm başarıyla silindi"),s(e.filter((e=>e.id!==a))),t(i.filter((e=>e.section_key!==r)))}catch(l){g.error("Bölüm silinirken bir hata oluştu")}finally{d(!1)}},addFeature:c,saving:n})}),a.jsx(w,{value:"features",className:"space-y-4",children:a.jsx(Fe,{sections:e,features:i,setFeatures:t,updateFeature:async e=>{d(!0);try{const{error:s}=await v.from("about_features").update({title_tr:e.title_tr,title_en:e.title_en,description_tr:e.description_tr,description_en:e.description_en,is_active:e.is_active,display_order:e.display_order,image_url:e.image_url}).eq("id",e.id);if(s)throw s;g.success("Özellik başarıyla güncellendi"),t((s=>s.map((s=>s.id===e.id?e:s))))}catch(s){g.error("Özellik güncellenirken bir hata oluştu")}finally{d(!1)}},deleteFeature:async e=>{d(!0);try{const{error:s}=await v.from("about_features").delete().eq("id",e);if(s)throw s;g.success("Özellik başarıyla silindi"),t(i.filter((s=>s.id!==e)))}catch(s){g.error("Özellik silinirken bir hata oluştu")}finally{d(!1)}},addFeature:c,saving:n})})]})]})};export{De as default};
