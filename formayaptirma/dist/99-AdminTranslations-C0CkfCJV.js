import{n as e,j as s,au as r,aF as a,ab as i,a7 as n,aU as t,s as l,J as c}from"./03-hero-critical-BKzCa96P.js";import{r as o}from"./01-react-core-DCvPBpDR.js";import{B as d,C as m,g as h,h as j,f as x,D as u,j as f,k as y,l as k,o as p}from"./04-ui-components-DpbmxBFV.js";import{I as v}from"./05-admin-bundle-BW3OFzIa.js";import{F as g,a as w,b as N,c as b,d as C,e as S}from"./99-form-BQypkM9v.js";import{u as z}from"./99-index.esm-2mfLcUez.js";import{z as L,t as _}from"./99-zod-D0J4YnXH.js";import{T as E,a as D,b as T,c as q,d as A,e as F}from"./99-table-DV3dN7kr.js";import"./02-react-router-l50u7dmW.js";import"./06-utils-QQqVvbBo.js";import"./99-label-DtO75rKq.js";const K=L.object({key:L.string().min(1,"Key is required"),tr:L.string(),en:L.string()}),Y=()=>{const{t:L}=e(),[Y,B]=o.useState([]),[I,J]=o.useState([]),[M,O]=o.useState(!0),[Q,R]=o.useState(""),[U,V]=o.useState(!1),[G,H]=o.useState(null),P=z({resolver:_(K),defaultValues:{key:"",tr:"",en:""}}),W=async()=>{O(!0);try{const{data:e,error:s}=await l.from("translations").select("*").order("key",{ascending:!0});if(s)throw s;B(e||[]),J(e||[])}catch(e){c.error(e.message||"Çeviriler yüklenirken hata oluştu")}finally{O(!1)}};return o.useEffect((()=>{W()}),[]),o.useEffect((()=>{J(Q?Y.filter((e=>e.key.toLowerCase().includes(Q.toLowerCase())||e.tr.toLowerCase().includes(Q.toLowerCase())||e.en.toLowerCase().includes(Q.toLowerCase()))):Y)}),[Q,Y]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold",children:L("translations")||"Çeviriler"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(d,{variant:"outline",onClick:W,disabled:M,children:[s.jsx(r,{className:"mr-2 h-4 w-4 "+(M?"animate-spin":"")}),L("refresh")||"Yenile"]}),s.jsxs(d,{onClick:()=>{H(null),P.reset({key:"",tr:"",en:""}),V(!0)},children:[s.jsx(a,{className:"mr-2 h-4 w-4"}),L("add_translation")||"Çeviri Ekle"]})]})]}),s.jsxs(m,{children:[s.jsxs(h,{children:[s.jsx(j,{children:L("manage_translations")||"Çevirileri Yönet"}),s.jsxs("div",{className:"relative",children:[s.jsx(i,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(v,{placeholder:L("search_translations")||"Çevirilerde ara...",className:"pl-8",value:Q,onChange:e=>R(e.target.value)})]})]}),s.jsx(x,{children:M?s.jsx("div",{className:"flex justify-center py-10",children:s.jsx(n,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsx("div",{className:"overflow-auto max-h-[32rem]",children:s.jsxs(E,{children:[s.jsx(D,{className:"bg-background",children:s.jsxs(T,{children:[s.jsx(q,{className:"w-1/4",children:L("key")||"Anahtar"}),s.jsx(q,{className:"w-1/3",children:L("turkish")||"Türkçe"}),s.jsx(q,{className:"w-1/3",children:L("english")||"İngilizce"}),s.jsx(q,{className:"w-24 text-right",children:L("actions")||"İşlemler"})]})}),s.jsx(A,{children:I.map((e=>s.jsxs(T,{children:[s.jsx(F,{className:"font-medium",children:e.key}),s.jsx(F,{children:e.tr}),s.jsx(F,{children:e.en}),s.jsx(F,{className:"text-right",children:s.jsx(d,{variant:"ghost",size:"sm",onClick:()=>(e=>{H(e),P.reset({key:e.key,tr:e.tr,en:e.en}),V(!0)})(e),children:L("edit")||"Düzenle"})})]},e.id)))})]})})})]}),s.jsx(u,{open:U,onOpenChange:V,children:s.jsxs(f,{className:"sm:max-w-[500px]",children:[s.jsx(y,{children:s.jsx(k,{children:G?L("edit_translation")||"Çeviriyi Düzenle":L("add_translation")||"Çeviri Ekle"})}),s.jsx(g,{...P,children:s.jsxs("form",{onSubmit:P.handleSubmit((async e=>{try{if(G){const{error:s}=await l.from("translations").update({key:e.key,tr:e.tr,en:e.en}).eq("id",G.id);if(s)throw s;c.success("Çeviri başarıyla güncellendi")}else{const{error:s}=await l.from("translations").insert({key:e.key,tr:e.tr,en:e.en});if(s)throw s;c.success("Çeviri başarıyla eklendi")}W(),V(!1)}catch(s){c.error(s.message||"Çeviri kaydedilirken hata oluştu")}})),className:"space-y-4",children:[s.jsx(w,{control:P.control,name:"key",render:({field:e})=>s.jsxs(N,{children:[s.jsx(b,{children:L("key")||"Anahtar"}),s.jsx(C,{children:s.jsx(v,{...e})}),s.jsx(S,{})]})}),s.jsx(w,{control:P.control,name:"tr",render:({field:e})=>s.jsxs(N,{children:[s.jsx(b,{children:L("turkish")||"Türkçe"}),s.jsx(C,{children:s.jsx(v,{...e})}),s.jsx(S,{})]})}),s.jsx(w,{control:P.control,name:"en",render:({field:e})=>s.jsxs(N,{children:[s.jsx(b,{children:L("english")||"İngilizce"}),s.jsx(C,{children:s.jsx(v,{...e})}),s.jsx(S,{})]})}),s.jsx(p,{children:s.jsxs(d,{type:"submit",children:[s.jsx(t,{className:"mr-2 h-4 w-4"}),L("save")||"Kaydet"]})})]})})]})})]})};export{Y as default};
