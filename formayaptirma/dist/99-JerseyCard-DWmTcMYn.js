import{n as e,j as t}from"./03-hero-critical-BKzCa96P.js";import{r}from"./01-react-core-DCvPBpDR.js";import{B as s}from"./99-badge-CpQK4qLU.js";import{C as i}from"./04-ui-components-DpbmxBFV.js";import{L as o}from"./02-react-router-l50u7dmW.js";import{i as a}from"./06-utils-QQqVvbBo.js";var n=new Map,l=new WeakMap,c=0;function d({threshold:e,delay:t,trackVisibility:s,rootMargin:i,root:o,triggerOnce:a,skip:d,initialInView:m,fallbackInView:h,onChange:u}={}){var g;const[p,f]=r.useState(null),x=r.useRef(u),[y,v]=r.useState({inView:!!m,entry:void 0});x.current=u,r.useEffect((()=>{if(d||!p)return;let r;return r=function(e,t,r={},s){if(void 0===window.IntersectionObserver&&void 0!==s){const i=e.getBoundingClientRect();return t(s,{isIntersecting:s,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:i,observer:o,elements:a}=function(e){const t=function(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(r=e.root,r?(l.has(r)||(c+=1,l.set(r,c.toString())),l.get(r)):"0"):e[t]}`;var r})).toString()}(e);let r=n.get(t);if(!r){const s=new Map;let i;const o=new IntersectionObserver((t=>{t.forEach((t=>{var r;const o=t.isIntersecting&&i.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(r=s.get(t.target))||r.forEach((e=>{e(o,t)}))}))}),e);i=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:s},n.set(t,r)}return r}(r),d=a.get(e)||[];return a.has(e)||a.set(e,d),d.push(t),o.observe(e),function(){d.splice(d.indexOf(t),1),0===d.length&&(a.delete(e),o.unobserve(e)),0===a.size&&(o.disconnect(),n.delete(i))}}(p,((e,t)=>{v({inView:e,entry:t}),x.current&&x.current(e,t),t.isIntersecting&&a&&r&&(r(),r=void 0)}),{root:o,rootMargin:i,threshold:e,trackVisibility:s,delay:t},h),()=>{r&&r()}}),[Array.isArray(e)?e.toString():e,p,o,i,a,d,s,h,t]);const w=null==(g=y.entry)?void 0:g.target,b=r.useRef(void 0);p||!w||a||d||b.current===w||(b.current=w,v({inView:!!m,entry:void 0}));const j=[f,y.inView,y.entry];return j.ref=j[0],j.inView=j[1],j.entry=j[2],j}const m=r.memo((({jersey:n,showPrice:l=!0,showMinOrder:c=!0,showStockStatus:m=!0,showDeliveryTime:h=!0,layout:u="grid"})=>{const{t:g,language:p}=e(),[f,x]=r.useState(!1),{ref:y,inView:v}=d({triggerOnce:!0,rootMargin:"200px 0px",threshold:.1});r.useEffect((()=>{v&&(a.isImageCached(n.image)?x(!0):a.preloadImage(n.image).then((()=>x(!0))).catch((()=>x(!1))))}),[v,n.image]);const w="list"===u,b=`/product/${n.display_id||n.id}/${n.slug||n.name.toLowerCase().replace(/\s+/g,"-")}`,j=w?"(max-width: 640px) 33vw, 200px":"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw";return t.jsxs(i,{ref:y,className:`\n      overflow-hidden group relative transition-all hover:shadow-md\n      ${w?"flex flex-row":"h-full flex flex-col"}\n    `,children:[t.jsx(o,{to:b,className:"block "+(w?"w-1/3 flex-shrink-0":"w-full"),"aria-label":`${n.name} - ${g("view_details")||"Detayları Gör"}`,children:t.jsxs("div",{className:"relative pb-[100%]",style:{aspectRatio:"1 / 1"},children:[v?t.jsx("img",{src:n.image,alt:n.name,className:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 "+(f?"opacity-100":"opacity-0"),width:"400",height:"400",loading:"lazy",decoding:"async",sizes:j,style:{aspectRatio:"1 / 1"},onLoad:()=>x(!0),onError:e=>{e.target.src="/placeholder.svg",x(!0)}}):null,t.jsx("div",{className:`absolute inset-0 w-full h-full bg-gray-100 dark:bg-gray-800 ${f?"opacity-0":"opacity-100 animate-pulse"} transition-opacity duration-300`,style:{aspectRatio:"1 / 1"}}),t.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[n.isNew&&t.jsx(s,{className:"bg-blue-500 hover:bg-blue-600",children:g("new")||"Yeni"}),n.isPopular&&t.jsx(s,{className:"bg-red-600 hover:bg-red-900",children:g("popular")||"Popüler"})]})]})}),t.jsxs("div",{className:`\n        p-2 flex flex-col justify-between gap-2 \n        ${w?"flex-1":""}\n      `,children:[t.jsxs("div",{children:[t.jsx(o,{to:b,className:"block","aria-label":`${n.name} - ${g("view_product")||"Ürünü Görüntüle"}`,children:t.jsx("h3",{className:"font-medium text-lg mb-1 line-clamp-2",children:n.name})}),t.jsxs("div",{className:"space-y-2",children:[c&&n.minOrder&&t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[g("min_order")||"Minimum Sipariş",": ",n.minOrder]}),m&&t.jsx("p",{className:"text-sm font-medium text-success",children:n.stock&&n.stock>0?g("in_stock")||"Stoklu Ürün":g("out_of_stock")||"Stokta Yok"}),h&&n.deliveryTime&&t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[g("delivery_time")||"Teslimat Süresi",": ",n.deliveryTime]})]})]}),l&&t.jsx("div",{className:"mt-2",children:t.jsxs("p",{className:"font-bold text-xl text-primary",children:[n.price.toFixed(2)," ₺"]})})]})]})}),((e,t)=>e.jersey.id===t.jersey.id&&e.layout===t.layout&&e.showPrice===t.showPrice&&e.showMinOrder===t.showMinOrder&&e.showStockStatus===t.showStockStatus&&e.showDeliveryTime===t.showDeliveryTime));m.displayName="JerseyCard";export{m as J,d as u};
