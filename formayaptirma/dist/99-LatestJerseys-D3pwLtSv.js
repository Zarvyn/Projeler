import{n as e,s as a,J as r,j as s,A as l}from"./03-hero-critical-BKzCa96P.js";import{r as i}from"./01-react-core-DCvPBpDR.js";import{L as t}from"./02-react-router-l50u7dmW.js";import{u as d,J as n}from"./99-JerseyCard-DWmTcMYn.js";import{B as c}from"./04-ui-components-DpbmxBFV.js";import"./06-utils-QQqVvbBo.js";import"./99-badge-CpQK4qLU.js";import"./05-admin-bundle-BW3OFzIa.js";const o=i.memo((()=>{const[o,m]=i.useState([]),[g,p]=i.useState(!0),{t:x}=e(),{ref:u,inView:y}=d({triggerOnce:!0,threshold:.1,rootMargin:"300px 0px"}),h=i.useCallback((async()=>{if(y)try{p(!0);const{data:e,error:r}=await a.from("products").select("id, name, image_url, min_order, price, colors, is_popular, is_new, display_id, slug").eq("is_new",!0).order("created_at",{ascending:!1}).limit(5);if(r)throw r;if(!e||0===e.length)return void m([]);const s=e.map((e=>{const a=e.slug||e.name.toLowerCase().replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ç/g,"c").replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-|-$/g,"");return{id:e.id,name:e.name,image:e.image_url||"/placeholder.svg",minOrder:e.min_order||10,price:e.price,colors:e.colors||1,isPopular:Boolean(e.is_popular),isNew:Boolean(e.is_new),display_id:e.display_id,slug:a,deliveryTime:"2-3 İş Günü"}}));m(s)}catch(e){r.error(x("error_fetching_products")||"Ürünler yüklenirken hata oluştu"),m([])}finally{p(!1)}}),[x,y]);return i.useEffect((()=>{y&&h()}),[h,y]),s.jsx("section",{ref:u,className:"py-16 bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"w-full px-2 lg:px-40",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-galaxy-neon to-galaxy-blue",children:"En Yeni Formalar"}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:"En yeni üretilen formalarımızı burdan takip edebilirsiniz"})]}),g?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:[...Array(5)].map(((e,a)=>s.jsxs("div",{className:"overflow-hidden group relative transition-all",children:[s.jsx("div",{className:"relative pb-[100%]",children:s.jsx("div",{className:"absolute inset-0 w-full h-full bg-gray-200 dark:bg-gray-800 animate-pulse",style:{aspectRatio:"1 / 1"}})}),s.jsxs("div",{className:"p-4 flex flex-col justify-between gap-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 animate-pulse rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-800 animate-pulse rounded mb-2 w-3/4"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-800 animate-pulse rounded mb-2 w-1/2"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-800 animate-pulse rounded w-2/3"})]}),s.jsx("div",{className:"mt-2",children:s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-800 animate-pulse rounded w-1/3"})})]})]},a)))}):o.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 mb-2",children:o.map((e=>s.jsx(n,{jersey:e,showDeliveryTime:!0},e.id)))}),s.jsx("div",{className:"text-center",children:s.jsx(t,{to:"/gallery?showNew=true",children:s.jsxs(c,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",children:[x("view_all")||"Tümünü Gör"," ",s.jsx(l,{className:"ml-2 h-4 w-4"})]})})})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x("no_new_jerseys_found")||"Yeni ürün bulunamadı"})})]})})}));export{o as default};
