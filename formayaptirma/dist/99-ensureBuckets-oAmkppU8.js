import{s as e,J as r}from"./03-hero-critical-BKzCa96P.js";import"./01-react-core-DCvPBpDR.js";import"./02-react-router-l50u7dmW.js";import"./06-utils-QQqVvbBo.js";const t={story_images:{public:!0,allowedMimeTypes:["image/png","image/jpeg","image/gif","image/webp"],fileSizeLimit:5242880,cacheControl:"public, max-age=31536000",upsert:!0},homepage_images:{public:!0,allowedMimeTypes:["image/png","image/jpeg","image/gif","image/webp"],fileSizeLimit:5242880,cacheControl:"public, max-age=31536000",upsert:!0}},a=async()=>{try{const{data:a,error:i}=await e.storage.listBuckets();if(i)return r.error("Failed to check storage buckets. Please try again later."),{data:null,error:i};const s=await Promise.all(Object.entries(t).map((async([r,t])=>{if(null==a?void 0:a.some((e=>e.name===r)))return{bucketName:r,success:!0};{const{error:a}=await e.storage.createBucket(r,{public:t.public,allowedMimeTypes:t.allowedMimeTypes,fileSizeLimit:t.fileSizeLimit});return a?{bucketName:r,success:!1,error:a}:{bucketName:r,success:!0}}})));return s.filter((e=>!e.success)).length>0&&r.error("Some storage buckets failed to initialize. Please contact the administrator."),{data:{buckets:a,results:s},error:null}}catch(a){return r.error("Failed to initialize storage. Please try again later."),{data:null,error:a}}},i=async r=>{try{const{data:t,error:a}=await e.storage.listBuckets();return!a&&t.some((e=>e.name===r))}catch(t){return!1}},s=e=>t[e];export{i as checkBucketExists,a as ensureBucketsExist,s as getBucketConfig};
