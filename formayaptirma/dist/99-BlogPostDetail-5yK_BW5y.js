import{n as e,j as t,am as a,a7 as s,s as r,an as l,ao as i,ap as n,a9 as c,y as o}from"./03-hero-critical-BKzCa96P.js";import{r as d}from"./01-react-core-DCvPBpDR.js";import{L as m,c as x}from"./02-react-router-l50u7dmW.js";import{C as h,f as u,B as g}from"./04-ui-components-DpbmxBFV.js";import{B as p,a as j}from"./99-BlogSidebarWidget-DjwmQiRj.js";import{c as y}from"./06-utils-QQqVvbBo.js";import{a as f,u as b,I as v}from"./05-admin-bundle-BW3OFzIa.js";import{B as N}from"./99-badge-CpQK4qLU.js";import{f as k}from"./99-format-DBZQo3P3.js";const w=s=>{const[r,l]=d.useState(""),{language:i}=e(),n="tr"===i?"İçindekiler":"Table of Contents";let c=[],o=n;return"content"in s?c=(e=>{const t=/<h([1-6])[^>]*id="([^"]+)"[^>]*>([\s\S]*?)<\/h\1>/g,a=[];let s;for(;null!==(s=t.exec(e));){const e=parseInt(s[1],10),t=s[2],r=s[3].replace(/<[^>]*>/g,"");a.push({id:t,text:r,level:e})}return a})(s.content):(c=s.headings,o=s.title||n),d.useEffect((()=>{if(0===c.length)return;const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&l(e.target.id)}))}),{rootMargin:"0px 0px -70% 0px",threshold:[.1,.5,1]});return c.forEach((t=>{const a=document.getElementById(t.id);a&&e.observe(a)})),()=>{c.forEach((t=>{const a=document.getElementById(t.id);a&&e.unobserve(a)}))}}),[c]),0===c.length?null:t.jsxs("nav",{className:"glass-card rounded-xl p-5 shadow-md","aria-labelledby":"toc-heading",children:[t.jsxs("h2",{id:"toc-heading",className:"text-lg font-semibold mb-3 flex items-center text-gray-900 dark:text-white",children:[t.jsx(a,{className:"h-5 w-5 mr-2 text-primary","aria-hidden":"true"}),t.jsx("span",{children:o})]}),t.jsx("div",{className:"toc",children:t.jsx("ol",{className:"space-y-1 max-h-[50vh] overflow-y-auto pr-2",children:c.map((e=>t.jsx("li",{className:y("transition-colors text-sm",1===e.level&&"pl-0",2===e.level&&"pl-2",3===e.level&&"pl-4",4===e.level&&"pl-6",5===e.level&&"pl-8",6===e.level&&"pl-10",r===e.id?"text-primary font-medium border-l-2 border-primary pl-[calc(0.25rem+var(--indent,0rem))]":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 border-l-2 border-transparent pl-[calc(0.25rem+var(--indent,0rem))]"),style:{"--indent":.5*(e.level-1)+"rem"},children:t.jsx("a",{href:`#${e.id}`,onClick:t=>{t.preventDefault();const a=document.getElementById(e.id);if(a){const t=-80,s=a.getBoundingClientRect().top+window.pageYOffset+t;window.scrollTo({top:s,behavior:"smooth"}),window.history.pushState(null,"",`#${e.id}`),l(e.id)}},className:"block py-1","aria-current":r===e.id?"location":void 0,children:e.text})},e.id)))})})]})},_=({currentPostId:a,category:l,relatedPosts:i})=>{const[n,c]=d.useState([]),[o,x]=d.useState(!i),{t:h}=e();return d.useEffect((()=>{if(i&&i.length>0)return c(i),void x(!1);(async()=>{if(a||l)try{let e=r.from("blogs").select("id, title, slug, cover_image, created_at");a&&(e=e.neq("id",a)),l&&(e=e.eq("category",l));const{data:t,error:s}=await e.order("created_at",{ascending:!1}).limit(3);if(s)throw s;c(t||[])}catch(e){}finally{x(!1)}else x(!1)})()}),[a,l,i]),o?t.jsx(s,{className:"h-6 w-6 animate-spin text-primary mx-auto"}):0===n.length?t.jsx("p",{className:"text-sm text-muted-foreground",children:h("no_related_posts")||"İlgili yazı bulunamadı."}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-medium text-lg mb-4",children:h("related_posts")||"İlgili Yazılar"}),n.map((e=>t.jsxs("div",{className:"flex items-start gap-3",children:[e.cover_image&&t.jsx(m,{to:`/blog/${e.slug}`,className:"flex-shrink-0",children:t.jsx("img",{src:e.cover_image,alt:e.title,className:"w-16 h-16 rounded-md object-cover"})}),t.jsxs("div",{children:[t.jsx(m,{to:`/blog/${e.slug}`,className:"text-sm font-medium hover:text-primary",children:e.title}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.created_at?new Date(e.created_at).toLocaleDateString():""})]})]},e.id)))]})},S=[{id:1,author:"Ali Yılmaz",date:"2023-09-15T10:30:00",content:"Bu makalenin içeriği gerçekten faydalı, forma tasarımı hakkında çok şey öğrendim. Teşekkürler!",likes:12,dislikes:1,replies:[{id:3,author:"FormaYaptırma Takımı",date:"2023-09-15T14:45:00",content:"Yorumunuz için teşekkür ederiz! Daha fazla içerik için bizi takip etmeye devam edin.",likes:3,dislikes:0,replies:[]}]},{id:2,author:"Mehmet Demir",date:"2023-09-14T16:20:00",content:"E-spor takımları için forma tasarımı konusunda harika bilgiler. Takımımız için düşündüğümüz tasarımlara yeni bir bakış açısı kazandırdı.",likes:8,dislikes:0,replies:[]}],I=({postId:a})=>{const{language:s,t:r}=e(),[c,o]=d.useState(S),[m,x]=d.useState(""),g=e=>{o(c.map((t=>t.id===e?{...t,likes:t.likes+1}:t)))},p=e=>new Date(e).toLocaleDateString("tr"===s?"tr-TR":"en-US",{year:"numeric",month:"long",day:"numeric"}),j=({comment:e})=>t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 flex-shrink-0 overflow-hidden",children:t.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.author)}&background=random`,alt:e.author,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center justify-between mb-1",children:t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.author}),t.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs ml-2",children:p(e.date)})]})}),t.jsx("div",{className:"text-gray-700 dark:text-gray-300 mb-2",children:e.content}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("button",{className:"flex items-center text-gray-500 hover:text-primary transition-colors",onClick:()=>g(e.id),children:[t.jsx(l,{className:"h-4 w-4 mr-1"}),t.jsx("span",{children:e.likes})]}),t.jsxs("button",{className:"flex items-center text-gray-500 hover:text-primary transition-colors",children:[t.jsx(i,{className:"h-4 w-4 mr-1"}),t.jsx("span",{children:r("reply")})]}),t.jsxs("button",{className:"flex items-center text-gray-500 hover:text-red-500 transition-colors",children:[t.jsx(n,{className:"h-4 w-4 mr-1"}),t.jsx("span",{children:r("report")})]})]}),e.replies.length>0&&t.jsx("div",{className:"mt-4 pl-4 border-l-2 border-gray-200 dark:border-gray-700",children:e.replies.map((e=>t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex-shrink-0 overflow-hidden",children:t.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.author)}&background=random`,alt:e.author,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center justify-between mb-1",children:t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.author}),t.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs ml-2",children:p(e.date)})]})}),t.jsx("div",{className:"text-gray-700 dark:text-gray-300 mb-2",children:e.content}),t.jsx("div",{className:"flex items-center gap-4 text-sm",children:t.jsxs("button",{className:"flex items-center text-gray-500 hover:text-primary transition-colors",onClick:()=>g(e.id),children:[t.jsx(l,{className:"h-4 w-4 mr-1"}),t.jsx("span",{children:e.likes})]})})]})]})},e.id)))})]})]})});return t.jsx("div",{className:"space-y-6",children:t.jsx(h,{className:"border-0 shadow-lg",children:t.jsxs(u,{className:"p-6",children:[t.jsxs("h4",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:[c.length," ",r("comments")]}),t.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!m.trim())return;const t={id:Date.now(),author:"Ziyaretçi",date:(new Date).toISOString(),content:m,likes:0,dislikes:0,replies:[]};o([t,...c]),x("")},className:"mb-8",children:[t.jsx("div",{className:"mb-3",children:t.jsx("textarea",{value:m,onChange:e=>x(e.target.value),placeholder:"tr"===s?"Yorumunuzu yazın...":"Write your comment...",className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",rows:4,required:!0})}),t.jsx("button",{type:"submit",className:"bg-primary text-white px-5 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:"tr"===s?"Yorum Yap":"Post Comment"})]}),t.jsx(f,{className:"my-6"}),c.length>0?t.jsx("div",{className:"space-y-6",children:c.map((e=>t.jsx(j,{comment:e},e.id)))}):t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"tr"===s?"Henüz yorum yapılmamış. İlk yorumu yapan siz olun!":"No comments yet. Be the first to comment!"})]})})})},z=()=>{const[a,s]=d.useState(""),{toast:r}=b(),{t:l}=e();return t.jsxs("div",{className:"glass-card rounded-xl p-6",children:[t.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900 dark:text-white",children:l("newsletter_title")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:l("newsletter_description")}),t.jsx("form",{onSubmit:e=>{e.preventDefault(),a?(r({title:l("success"),description:l("newsletter_success")}),s("")):r({title:l("error"),description:l("please_enter_email"),variant:"destructive"})},children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(v,{type:"email",placeholder:l("email_placeholder"),value:a,onChange:e=>s(e.target.value),className:"w-full"}),t.jsx(g,{type:"submit",className:"w-full",children:l("subscribe")})]})})]})},B=()=>{const[a,l]=d.useState([]),[i,n]=d.useState(!0),{t:c}=e();return d.useEffect((()=>{(async()=>{try{const{data:e,error:t}=await r.rpc("get_blog_categories");if(t)throw t;l(e||[])}catch(e){}finally{n(!1)}})()}),[]),i?t.jsx(s,{className:"h-6 w-6 animate-spin text-primary mx-auto"}):0===a.length?t.jsx("p",{className:"text-sm text-muted-foreground",children:c("no_categories")||"Henüz kategori bulunmamaktadır."}):t.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((e=>t.jsx(m,{to:`/blog/category/${e.category}`,children:t.jsxs(N,{variant:"outline",className:"hover:bg-muted cursor-pointer",children:[e.category," (",e.count,")"]})},e.category)))})},C=()=>{const{slug:a}=x(),{t:s,language:l}=e(),[i,n]=d.useState(null),[y,f]=d.useState(!0),[b,v]=d.useState([]);if(d.useEffect((()=>{(async()=>{f(!0);try{if(!a)return;const{data:e,error:t}=await r.from("blogs").select("*").eq("slug",a).single();if(t)throw t;if(e&&(n(e),e.category)){const{data:t,error:s}=await r.from("blogs").select("*").eq("category",e.category).neq("slug",a).limit(3);!s&&t&&v(t)}}catch(e){}finally{f(!1)}})()}),[a]),y)return t.jsx(c,{children:t.jsx("div",{className:"container mx-auto py-12",children:t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})})});if(!i)return t.jsx(c,{children:t.jsx("div",{className:"container mx-auto py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:s("blog_post_not_found")||"Blog post not found"}),t.jsx(g,{asChild:!0,children:t.jsx(m,{to:"/blog",children:s("back_to_blog")||"Back to Blog"})})]})})});i.created_at&&k(new Date(i.created_at),"MMMM dd, yyyy");const N=i.content?(e=>{const t=[],a=/<h([2-3])[^>]*>(.*?)<\/h\1>/g;let s;for(;null!==(s=a.exec(e));){const e=parseInt(s[1],10),a=s[2].replace(/<[^>]*>/g,""),r=a.toLowerCase().replace(/\s+/g,"-");t.push({id:r,text:a,level:e})}return t})(i.content):[];return t.jsxs(c,{children:[t.jsxs(o,{children:[t.jsxs("title",{children:[i.title," | FormaYaptırma"]}),t.jsx("meta",{name:"description",content:i.excerpt||""})]}),t.jsx(p,{title:i.title,excerpt:i.excerpt,coverImage:i.cover_image,category:i.category,date:i.created_at}),t.jsx("div",{className:"container mx-auto py-12",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2",children:[t.jsx(h,{children:t.jsxs(u,{className:"p-6",children:[N.length>0&&t.jsx(w,{headings:N}),t.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:i.content||""}})]})}),t.jsx("div",{className:"mt-8",children:t.jsx(I,{postId:i.id})}),b.length>0&&t.jsx("div",{className:"mt-12",children:t.jsx(_,{relatedPosts:b})})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsx(j,{title:s("about_blog")||"About This Blog",children:t.jsx("p",{children:s("blog_description")||"Our latest news and updates about custom jerseys."})}),t.jsx(B,{}),t.jsx(z,{})]})]})})]})};export{C as default};
